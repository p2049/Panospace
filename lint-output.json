[{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\App.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Debug' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":43,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":43,"endColumn":12}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { Suspense, lazy } from 'react';\nimport { BrowserRouter as Router, Routes, Route, Navigate, useLocation } from 'react-router-dom';\nimport { HelmetProvider } from 'react-helmet-async';\nimport { AnimatePresence } from 'framer-motion';\nimport OrientationGuard from './components/OrientationGuard';\nimport MobileNavigation from './components/MobileNavigation';\nimport GlobalErrorBoundary from './components/GlobalErrorBoundary';\nimport MotionWrapper from './components/MotionWrapper';\nimport AppLoading from './components/AppLoading';\nimport OfflineBanner from './components/OfflineBanner';\nimport { AuthProvider, useAuth } from './context/AuthContext';\nimport { UserCacheProvider } from './context/UserCacheContext';\nimport { UIProvider } from './context/UIContext';\nimport { ToastProvider } from './context/ToastContext';\nimport ToastManager from './components/ToastManager';\nimport './styles/tap-targets.css';\n\n// Lazy load pages for performance optimization\nconst Login = lazy(() => import('./pages/Login'));\nconst Signup = lazy(() => import('./pages/Signup'));\nconst Feed = lazy(() => import('./pages/Feed'));\nconst CreatePost = lazy(() => import('./pages/CreatePost'));\nconst Profile = lazy(() => import(\"./pages/Profile.jsx\"));\nconst EditProfile = lazy(() => import('./pages/EditProfile'));\nconst Search = lazy(() => import('./pages/Search'));\nconst Legal = lazy(() => import('./pages/Legal'));\nconst EditPost = lazy(() => import('./pages/EditPost'));\nconst PostDetail = lazy(() => import('./pages/PostDetail'));\n\nconst CheckoutSuccess = lazy(() => import('./pages/CheckoutSuccess'));\nconst ShopItemDetail = lazy(() => import('./pages/ShopItemDetail'));\nconst Shop = lazy(() => import('./pages/Shop'));\nconst Contest = lazy(() => import('./pages/Contest'));\nconst CollectionDetail = lazy(() => import('./pages/CollectionDetail'));\nconst CreateCollection = lazy(() => import('./pages/CreateCollection'));\nconst Calendar = lazy(() => import('./pages/Calendar'));\nconst EventCreator = lazy(() => import('./pages/EventCreator'));\nconst AestheticGallery = lazy(() => import('./pages/AestheticGallery'));\nconst CreateGallery = lazy(() => import('./pages/CreateGallery'));\nconst GalleryDetail = lazy(() => import('./pages/GalleryDetail'));\nconst Parks = lazy(() => import('./pages/Parks'));\nconst ParkGallery = lazy(() => import('./pages/ParkGallery'));\nconst Debug = lazy(() => import('./pages/Debug'));\nconst CardDetailPage = lazy(() => import('./pages/CardDetailPage'));\nconst CardMarketplace = lazy(() => import('./pages/CardMarketplace'));\nconst UltraPage = lazy(() => import('./pages/UltraPage'));\nconst MuseumPage = lazy(() => import('./pages/MuseumPage'));\nconst MagazineView = lazy(() => import('./pages/MagazineView'));\nconst CreateMagazineIssue = lazy(() => import('./pages/CreateMagazineIssue'));\nconst MagazineCuration = lazy(() => import('./pages/MagazineCuration'));\nconst CommissionsPage = lazy(() => import('./pages/CommissionsPage'));\nconst CreateMuseumPage = lazy(() => import('./pages/CreateMuseumPage'));\nconst ProjectPage = lazy(() => import('./pages/ProjectPage'));\nconst Settings = lazy(() => import('./pages/Settings'));\nconst Credits = lazy(() => import('./pages/Credits'));\nconst Notifications = lazy(() => import('./pages/Notifications'));\nconst AdminCleanup = lazy(() => import('./pages/AdminCleanup'));\nconst AdminModeration = lazy(() => import('./pages/AdminModeration'));\nconst CampusHub = lazy(() => import('./pages/CampusHub'));\nconst EventFeedPage = lazy(() => import('./pages/EventFeedPage'));\n\nconst MigrateDates = lazy(() => import('./pages/MigrateDates'));\nconst ShopSetup = lazy(() => import('./pages/shop/ShopSetupPage'));\nconst ShopDrafts = lazy(() => import('./pages/ShopDrafts'));\nconst ColorBackfillPage = lazy(() => import('./pages/ColorBackfillPage'));\nconst CustomFeedManager = lazy(() => import('./pages/CustomFeedManager'));\nconst CustomFeedCreator = lazy(() => import('./pages/CustomFeedCreator'));\n\nconst NotFound = lazy(() => import('./pages/NotFound'));\n\nconst PrivateRoute = ({ children }) => {\n  const { currentUser, loading } = useAuth();\n\n  if (loading) {\n    return <AppLoading />;\n  }\n\n  return currentUser ? children : <Navigate to=\"/login\" />;\n};\n\n// Animated Routes Component\nconst AnimatedRoutes = () => {\n  const location = useLocation();\n\n  return (\n    <AnimatePresence mode=\"wait\" initial={false}>\n      <Routes location={location} key={location.pathname}>\n        <Route path=\"/login\" element={<MotionWrapper><Login /></MotionWrapper>} />\n        <Route path=\"/signup\" element={<MotionWrapper><Signup /></MotionWrapper>} />\n        <Route path=\"/legal\" element={<MotionWrapper><Legal /></MotionWrapper>} />\n        <Route path=\"/\" element={\n          <PrivateRoute>\n            <MotionWrapper><Feed /></MotionWrapper>\n          </PrivateRoute>\n        } />\n        <Route path=\"/search\" element={\n          <PrivateRoute>\n            <MotionWrapper><Search /></MotionWrapper>\n          </PrivateRoute>\n        } />\n        <Route path=\"/events/:eventId\" element={\n          <PrivateRoute>\n            <MotionWrapper><EventFeedPage /></MotionWrapper>\n          </PrivateRoute>\n        } />\n        <Route path=\"/create\" element={\n          <PrivateRoute>\n            <MotionWrapper><CreatePost /></MotionWrapper>\n          </PrivateRoute>\n        } />\n        <Route path=\"/create-post\" element={\n          <PrivateRoute>\n            <MotionWrapper><CreatePost /></MotionWrapper>\n          </PrivateRoute>\n        } />\n        <Route path=\"/profile/:id\" element={\n          <PrivateRoute>\n            <MotionWrapper><Profile /></MotionWrapper>\n          </PrivateRoute>\n        } />\n        <Route path=\"/profile\" element={<Navigate to=\"/profile/me\" replace />} />\n        <Route path=\"/edit-profile\" element={\n          <PrivateRoute>\n            <MotionWrapper><EditProfile /></MotionWrapper>\n          </PrivateRoute>\n        } />\n        <Route path=\"/edit-post/:id\" element={\n          <PrivateRoute>\n            <MotionWrapper><EditPost /></MotionWrapper>\n          </PrivateRoute>\n        } />\n        <Route path=\"/post/:id\" element={\n          <PrivateRoute>\n            <MotionWrapper><PostDetail /></MotionWrapper>\n          </PrivateRoute>\n        } />\n        <Route path=\"/success\" element={\n          <PrivateRoute>\n            <MotionWrapper><CheckoutSuccess /></MotionWrapper>\n          </PrivateRoute>\n        } />\n        <Route path=\"/shop\" element={\n          <PrivateRoute>\n            <MotionWrapper><Shop /></MotionWrapper>\n          </PrivateRoute>\n        } />\n        <Route path=\"/shop/setup\" element={\n          <PrivateRoute>\n            <MotionWrapper><ShopSetup /></MotionWrapper>\n          </PrivateRoute>\n        } />\n        <Route path=\"/shop/drafts\" element={\n          <PrivateRoute>\n            <MotionWrapper><ShopDrafts /></MotionWrapper>\n          </PrivateRoute>\n        } />\n        <Route path=\"/shop/:id\" element={\n          <PrivateRoute>\n            <MotionWrapper><ShopItemDetail /></MotionWrapper>\n          </PrivateRoute>\n        } />\n        <Route path=\"/contest\" element={\n          <PrivateRoute>\n            <MotionWrapper><Contest /></MotionWrapper>\n          </PrivateRoute>\n        } />\n        <Route path=\"/collection/:id\" element={\n          <PrivateRoute>\n            <MotionWrapper><CollectionDetail /></MotionWrapper>\n          </PrivateRoute>\n        } />\n        <Route path=\"/create-collection\" element={\n          <PrivateRoute>\n            <MotionWrapper><CreateCollection /></MotionWrapper>\n          </PrivateRoute>\n        } />\n        <Route path=\"/calendar\" element={\n          <PrivateRoute>\n            <MotionWrapper><Calendar /></MotionWrapper>\n          </PrivateRoute>\n        } />\n        <Route path=\"/event/create\" element={\n          <PrivateRoute>\n            <MotionWrapper><EventCreator /></MotionWrapper>\n          </PrivateRoute>\n        } />\n        <Route path=\"/gallery/:type/:tag\" element={<MotionWrapper><AestheticGallery /></MotionWrapper>} />\n        <Route path=\"/tag/:tag\" element={<MotionWrapper><AestheticGallery /></MotionWrapper>} />\n        <Route path=\"/gallery/create\" element={\n          <PrivateRoute>\n            <MotionWrapper><CreateGallery /></MotionWrapper>\n          </PrivateRoute>\n        } />\n        <Route path=\"/gallery/:id\" element={<MotionWrapper><GalleryDetail /></MotionWrapper>} />\n        <Route path=\"/parks\" element={\n          <PrivateRoute>\n            <MotionWrapper><Parks /></MotionWrapper>\n          </PrivateRoute>\n        } />\n        <Route path=\"/park/:parkId\" element={\n          <PrivateRoute>\n            <MotionWrapper><ParkGallery /></MotionWrapper>\n          </PrivateRoute>\n        } />\n        {/* <Route path=\"/debug\" element={<MotionWrapper><Debug /></MotionWrapper>} /> */}\n        <Route path=\"/cards/:cardId\" element={<MotionWrapper><CardDetailPage /></MotionWrapper>} />\n        <Route path=\"/marketplace\" element={<MotionWrapper><CardMarketplace /></MotionWrapper>} />\n        <Route path=\"/ultra\" element={\n          <PrivateRoute>\n            <MotionWrapper><UltraPage /></MotionWrapper>\n          </PrivateRoute>\n        } />\n        <Route path=\"/museums/:museumId\" element={\n          <PrivateRoute>\n            <MotionWrapper><MuseumPage /></MotionWrapper>\n          </PrivateRoute>\n        } />\n        <Route path=\"/magazine/:id\" element={\n          <PrivateRoute>\n            <MotionWrapper><MagazineView /></MotionWrapper>\n          </PrivateRoute>\n        } />\n        <Route path=\"/magazine/:id/create-issue\" element={\n          <PrivateRoute>\n            <MotionWrapper><CreateMagazineIssue /></MotionWrapper>\n          </PrivateRoute>\n        } />\n        <Route path=\"/magazine/:magazineId/issue/:issueId/curate\" element={\n          <PrivateRoute>\n            <MotionWrapper><MagazineCuration /></MotionWrapper>\n          </PrivateRoute>\n        } />\n        <Route path=\"/commissions\" element={\n          <PrivateRoute>\n            <MotionWrapper><CommissionsPage /></MotionWrapper>\n          </PrivateRoute>\n        } />\n        <Route path=\"/museum/create\" element={\n          <PrivateRoute>\n            <MotionWrapper><CreateMuseumPage /></MotionWrapper>\n          </PrivateRoute>\n        } />\n        <Route path=\"/project/:studioId/:projectId\" element={\n          <PrivateRoute>\n            <MotionWrapper><ProjectPage /></MotionWrapper>\n          </PrivateRoute>\n        } />\n\n        <Route path=\"/settings\" element={\n          <PrivateRoute>\n            <MotionWrapper><Settings /></MotionWrapper>\n          </PrivateRoute>\n        } />\n        <Route path=\"/credits\" element={\n          <PrivateRoute>\n            <MotionWrapper><Credits /></MotionWrapper>\n          </PrivateRoute>\n        } />\n        <Route path=\"/notifications\" element={\n          <PrivateRoute>\n            <MotionWrapper><Notifications /></MotionWrapper>\n          </PrivateRoute>\n        } />\n        <Route path=\"/admin/cleanup\" element={<PrivateRoute><MotionWrapper><AdminCleanup /></MotionWrapper></PrivateRoute>} />\n        <Route path=\"/admin\" element={<PrivateRoute><MotionWrapper><AdminModeration /></MotionWrapper></PrivateRoute>} />\n        <Route path=\"/admin/color-backfill\" element={<PrivateRoute><MotionWrapper><ColorBackfillPage /></MotionWrapper></PrivateRoute>} />\n        <Route path=\"/custom-feeds\" element={<PrivateRoute><MotionWrapper><CustomFeedManager /></MotionWrapper></PrivateRoute>} />\n        <Route path=\"/custom-feeds/create\" element={<PrivateRoute><MotionWrapper><CustomFeedCreator /></MotionWrapper></PrivateRoute>} />\n        <Route path=\"/campus\" element={<PrivateRoute><MotionWrapper><CampusHub /></MotionWrapper></PrivateRoute>} />\n\n\n        <Route path=\"/migrate-dates\" element={<PrivateRoute><MotionWrapper><MigrateDates /></MotionWrapper></PrivateRoute>} />\n        <Route path=\"*\" element={<MotionWrapper><NotFound /></MotionWrapper>} />\n      </Routes>\n    </AnimatePresence>\n  );\n};\n\nfunction App() {\n  return (\n    <GlobalErrorBoundary>\n      <AuthProvider>\n        <UserCacheProvider>\n          <UIProvider>\n            <ToastProvider>\n              <HelmetProvider>\n                <Router future={{ v7_startTransition: true, v7_relativeSplatPath: true }}>\n                  <OrientationGuard>\n                    {/* Offline Banner - Global */}\n                    <OfflineBanner />\n\n                    <div className=\"app-container\">\n                      <Suspense fallback={<AppLoading />}>\n                        <AnimatedRoutes />\n                      </Suspense>\n\n                      <MobileNavigation />\n                    </div>\n                  </OrientationGuard>\n                </Router>\n                <ToastManager />\n              </HelmetProvider>\n            </ToastProvider>\n          </UIProvider>\n        </UserCacheProvider>\n      </AuthProvider>\n    </GlobalErrorBoundary>\n  );\n}\n\n\nexport default App;\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\AppLoading.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useMemo } from 'react';\r\n\r\n/**\r\n * AppLoading - Global loading screen for app initialization\r\n * Displays while Firebase auth, user profile, and UIContext are loading\r\n */\r\nconst AppLoading = () => {\r\n    // Generate stars once and memoize them\r\n    const stars = useMemo(() => {\r\n        return [...Array(80)].map((_, i) => ({\r\n            id: i,\r\n            width: Math.random() * 2 + 1,\r\n            height: Math.random() * 2 + 1,\r\n            top: Math.random() * 100,\r\n            left: Math.random() * 100,\r\n            opacity: Math.random() * 0.5 + 0.3,\r\n            duration: Math.random() * 3 + 2,\r\n            delay: Math.random() * 2,\r\n        }));\r\n    }, []);\r\n\r\n    return (\r\n        <div style={{\r\n            position: 'fixed',\r\n            top: 0,\r\n            left: 0,\r\n            width: '100vw',\r\n            height: '100vh',\r\n            background: 'linear-gradient(135deg, #000000 0%, #0a0a0a 50%, #000000 100%)',\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            justifyContent: 'center',\r\n            alignItems: 'center',\r\n            zIndex: 9999,\r\n            overflow: 'hidden'\r\n        }}>\r\n            {/* Animated Stars Background */}\r\n            {stars.map((star) => (\r\n                <div\r\n                    key={star.id}\r\n                    style={{\r\n                        position: 'absolute',\r\n                        width: `${star.width}px`,\r\n                        height: `${star.height}px`,\r\n                        top: `${star.top}%`,\r\n                        left: `${star.left}%`,\r\n                        background: '#7FFFD4',\r\n                        borderRadius: '50%',\r\n                        opacity: star.opacity,\r\n                        boxShadow: `0 0 ${Math.random() * 4 + 2}px rgba(127, 255, 212, 0.8)`,\r\n                        animation: `twinkle ${star.duration}s ease-in-out ${star.delay}s infinite`\r\n                    }}\r\n                />\r\n            ))}\r\n\r\n            {/* Logo/Brand */}\r\n            <div style={{\r\n                position: 'relative',\r\n                zIndex: 10,\r\n                display: 'flex',\r\n                flexDirection: 'column',\r\n                alignItems: 'center',\r\n                gap: '2rem'\r\n            }}>\r\n                {/* Planet Logo */}\r\n                <svg\r\n                    width=\"80\"\r\n                    height=\"80\"\r\n                    viewBox=\"-5 -5 34 34\"\r\n                    style={{\r\n                        filter: 'drop-shadow(0 0 20px rgba(127, 255, 212, 0.6))',\r\n                        animation: 'float 3s ease-in-out infinite'\r\n                    }}\r\n                >\r\n                    <defs>\r\n                        <radialGradient id=\"planetGradientLoading\" cx=\"40%\" cy=\"40%\">\r\n                            <stop offset=\"0%\" style={{ stopColor: '#7FFFD4', stopOpacity: 1 }} />\r\n                            <stop offset=\"100%\" style={{ stopColor: '#00CED1', stopOpacity: 1 }} />\r\n                        </radialGradient>\r\n                        <filter id=\"planetGlowLoading\" x=\"-50%\" y=\"-50%\" width=\"200%\" height=\"200%\">\r\n                            <feGaussianBlur stdDeviation=\"3\" result=\"coloredBlur\" />\r\n                            <feMerge>\r\n                                <feMergeNode in=\"coloredBlur\" />\r\n                                <feMergeNode in=\"SourceGraphic\" />\r\n                            </feMerge>\r\n                        </filter>\r\n                    </defs>\r\n                    <ellipse cx=\"12\" cy=\"12\" rx=\"14\" ry=\"4\" fill=\"none\" stroke=\"#7FFFD4\" strokeWidth=\"1.5\" opacity=\"0.4\" transform=\"rotate(-20 12 12)\" />\r\n                    <circle cx=\"12\" cy=\"12\" r=\"7\" fill=\"url(#planetGradientLoading)\" opacity=\"0.95\" filter=\"url(#planetGlowLoading)\" />\r\n                    <ellipse cx=\"12\" cy=\"12\" rx=\"14\" ry=\"4\" fill=\"none\" stroke=\"#7FFFD4\" strokeWidth=\"1.5\" opacity=\"0.6\" transform=\"rotate(-20 12 12)\" strokeDasharray=\"0,8,20,100\" />\r\n                    <circle cx=\"12\" cy=\"12\" r=\"7\" fill=\"none\" stroke=\"#7FFFD4\" strokeWidth=\"0.5\" opacity=\"0.3\" />\r\n                </svg>\r\n\r\n                {/* App Name */}\r\n                <h1 style={{\r\n                    color: '#7FFFD4',\r\n                    fontSize: '2rem',\r\n                    fontFamily: '\"Rajdhani\", sans-serif',\r\n                    fontWeight: '700',\r\n                    letterSpacing: '0.15em',\r\n                    textTransform: 'uppercase',\r\n                    textShadow: '0 0 20px rgba(127, 255, 212, 0.5)',\r\n                    margin: 0,\r\n                    animation: 'pulse 2s ease-in-out infinite'\r\n                }}>\r\n                    PanoSpace\r\n                </h1>\r\n\r\n                {/* Loading Spinner */}\r\n                <div style={{\r\n                    width: '40px',\r\n                    height: '40px',\r\n                    border: '3px solid rgba(127, 255, 212, 0.2)',\r\n                    borderTop: '3px solid #7FFFD4',\r\n                    borderRadius: '50%',\r\n                    animation: 'spin 1s linear infinite',\r\n                    boxShadow: '0 0 15px rgba(127, 255, 212, 0.3)'\r\n                }} />\r\n\r\n                {/* Loading Text */}\r\n                <p style={{\r\n                    color: 'rgba(127, 255, 212, 0.7)',\r\n                    fontSize: '0.9rem',\r\n                    fontFamily: '\"Rajdhani\", sans-serif',\r\n                    fontWeight: '500',\r\n                    letterSpacing: '0.1em',\r\n                    margin: 0,\r\n                    animation: 'fadeInOut 2s ease-in-out infinite'\r\n                }}>\r\n                    Initializing...\r\n                </p>\r\n            </div>\r\n\r\n            {/* Animations */}\r\n            <style>{`\r\n                @keyframes spin {\r\n                    0% { transform: rotate(0deg); }\r\n                    100% { transform: rotate(360deg); }\r\n                }\r\n\r\n                @keyframes pulse {\r\n                    0%, 100% { opacity: 1; }\r\n                    50% { opacity: 0.7; }\r\n                }\r\n\r\n                @keyframes fadeInOut {\r\n                    0%, 100% { opacity: 0.5; }\r\n                    50% { opacity: 1; }\r\n                }\r\n\r\n                @keyframes float {\r\n                    0%, 100% { transform: translateY(0px); }\r\n                    50% { transform: translateY(-10px); }\r\n                }\r\n\r\n                @keyframes twinkle {\r\n                    0%, 100% {\r\n                        opacity: 0.3;\r\n                        transform: scale(1);\r\n                    }\r\n                    50% {\r\n                        opacity: 1;\r\n                        transform: scale(1.2);\r\n                    }\r\n                }\r\n            `}</style>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AppLoading;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\AsyncButton.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\n\r\n/**\r\n * AsyncButton Component\r\n * A reusable button that handles loading states for async operations\r\n * \r\n * @param {boolean} loading - Whether the button is in loading state\r\n * @param {function} onClick - Click handler function\r\n * @param {ReactNode} children - Button content (text/icons)\r\n * @param {string} loadingText - Optional custom loading text (defaults to children)\r\n * @param {boolean} disabled - Additional disabled state (combined with loading)\r\n * @param {string} variant - Button style variant: 'primary', 'secondary', 'danger', 'ghost', 'mint'\r\n * @param {string} size - Button size: 'sm', 'md', 'lg'\r\n * @param {object} style - Additional inline styles\r\n * @param {string} className - Additional CSS classes\r\n * @param {string} type - Button type attribute\r\n */\r\nconst AsyncButton = ({\r\n    loading = false,\r\n    onClick,\r\n    children,\r\n    loadingText,\r\n    disabled = false,\r\n    variant = 'primary',\r\n    size = 'md',\r\n    style = {},\r\n    className = '',\r\n    type = 'button',\r\n    ...props\r\n}) => {\r\n    const isDisabled = loading || disabled;\r\n\r\n    // Base styles\r\n    const baseStyles = {\r\n        cursor: isDisabled ? 'not-allowed' : 'pointer',\r\n        opacity: isDisabled ? 0.6 : 1,\r\n        transition: 'all 0.2s',\r\n        fontWeight: '600',\r\n        borderRadius: '8px',\r\n        display: 'inline-flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        gap: '0.5rem',\r\n        border: 'none',\r\n        ...style\r\n    };\r\n\r\n    // Size styles\r\n    const sizeStyles = {\r\n        sm: {\r\n            padding: '0.5rem 1rem',\r\n            fontSize: '0.875rem'\r\n        },\r\n        md: {\r\n            padding: '0.75rem 1.5rem',\r\n            fontSize: '1rem'\r\n        },\r\n        lg: {\r\n            padding: '1rem 2rem',\r\n            fontSize: '1.125rem'\r\n        }\r\n    };\r\n\r\n    // Variant styles\r\n    const variantStyles = {\r\n        primary: {\r\n            background: '#7FFFD4',\r\n            color: '#000'\r\n        },\r\n        mint: {\r\n            background: '#7FFFD4',\r\n            color: '#000'\r\n        },\r\n        secondary: {\r\n            background: '#333',\r\n            color: '#fff',\r\n            border: '1px solid #555'\r\n        },\r\n        danger: {\r\n            background: '#ff4444',\r\n            color: '#fff'\r\n        },\r\n        ghost: {\r\n            background: 'transparent',\r\n            color: '#7FFFD4',\r\n            border: '2px solid #7FFFD4'\r\n        },\r\n        outline: {\r\n            background: 'transparent',\r\n            color: '#fff',\r\n            border: '1px solid #333'\r\n        }\r\n    };\r\n\r\n    const combinedStyles = {\r\n        ...baseStyles,\r\n        ...sizeStyles[size],\r\n        ...variantStyles[variant]\r\n    };\r\n\r\n    // Display loading text or children\r\n    const displayContent = loading && loadingText ? loadingText : children;\r\n\r\n    return (\r\n        <button\r\n            type={type}\r\n            onClick={onClick}\r\n            disabled={isDisabled}\r\n            style={combinedStyles}\r\n            className={className}\r\n            {...props}\r\n        >\r\n            {loading && (\r\n                <span style={{\r\n                    display: 'inline-block',\r\n                    width: '1em',\r\n                    height: '1em',\r\n                    border: '2px solid currentColor',\r\n                    borderTopColor: 'transparent',\r\n                    borderRadius: '50%',\r\n                    animation: 'spin 0.6s linear infinite'\r\n                }}>\r\n                    <style>{`\r\n                        @keyframes spin {\r\n                            to { transform: rotate(360deg); }\r\n                        }\r\n                    `}</style>\r\n                </span>\r\n            )}\r\n            {displayContent}\r\n        </button>\r\n    );\r\n};\r\n\r\nexport default AsyncButton;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\AudioLicenseIndicator.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { FaCheckCircle, FaLock, FaShoppingCart } from 'react-icons/fa';\r\n\r\nconst AudioLicenseIndicator = ({ isLicensed = false, requiredCard = null, onPurchase, className = '' }) => {\r\n    const styles = {\r\n        container: {\r\n            display: 'inline-flex',\r\n            alignItems: 'center',\r\n            gap: '6px',\r\n            padding: '4px 8px',\r\n            borderRadius: '4px',\r\n            fontSize: '0.7rem',\r\n            fontWeight: '500',\r\n            background: isLicensed ? 'rgba(76, 175, 80, 0.1)' : 'rgba(244, 67, 54, 0.1)',\r\n            border: `1px solid ${isLicensed ? '#4CAF50' : '#F44336'}`,\r\n            color: isLicensed ? '#4CAF50' : '#F44336',\r\n        },\r\n        button: {\r\n            marginLeft: '8px',\r\n            padding: '2px 6px',\r\n            borderRadius: '4px',\r\n            background: '#F44336',\r\n            color: 'white',\r\n            border: 'none',\r\n            fontSize: '0.7rem',\r\n            cursor: 'pointer',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '4px'\r\n        }\r\n    };\r\n\r\n    if (isLicensed) {\r\n        return (\r\n            <div style={styles.container} className={className}>\r\n                <FaCheckCircle size={10} />\r\n                <span>Licensed</span>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div style={styles.container} className={className}>\r\n            <FaLock size={10} />\r\n            <span>\r\n                {requiredCard ? `Requires ${requiredCard.title || 'SpaceCard'}` : 'License Required'}\r\n            </span>\r\n            {onPurchase && (\r\n                <button style={styles.button} onClick={(e) => { e.stopPropagation(); onPurchase(); }}>\r\n                    <FaShoppingCart size={10} />\r\n                    Get License\r\n                </button>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AudioLicenseIndicator;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\BadgeCard.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { FaStar, FaLock } from 'react-icons/fa';\r\n\r\nconst BadgeCard = ({ badge, isLocked = false, onClick }) => {\r\n    const navigate = useNavigate();\r\n\r\n    const handleClick = () => {\r\n        if (onClick) {\r\n            onClick(badge);\r\n        } else if (!isLocked && badge.relatedPostId) {\r\n            navigate(`/post/${badge.relatedPostId}`);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div\r\n            onClick={handleClick}\r\n            style={{\r\n                position: 'relative',\r\n                aspectRatio: '1',\r\n                borderRadius: '12px',\r\n                overflow: 'hidden',\r\n                cursor: isLocked ? 'default' : 'pointer',\r\n                border: isLocked ? '2px dashed #333' : '2px solid #444',\r\n                background: isLocked ? '#0a0a0a' : '#111',\r\n                transition: 'all 0.3s ease',\r\n                filter: isLocked ? 'grayscale(100%)' : 'none',\r\n                opacity: isLocked ? 0.5 : 1\r\n            }}\r\n            onMouseEnter={(e) => {\r\n                if (!isLocked) {\r\n                    e.currentTarget.style.transform = 'scale(1.05)';\r\n                    e.currentTarget.style.borderColor = '#7FFFD4';\r\n                }\r\n            }}\r\n            onMouseLeave={(e) => {\r\n                if (!isLocked) {\r\n                    e.currentTarget.style.transform = 'scale(1)';\r\n                    e.currentTarget.style.borderColor = '#444';\r\n                }\r\n            }}\r\n        >\r\n            {/* Badge Image */}\r\n            {!isLocked && badge.badgeImageUrl ? (\r\n                <img\r\n                    src={badge.badgeImageUrl}\r\n                    alt={badge.subjectName}\r\n                    style={{\r\n                        width: '100%',\r\n                        height: '100%',\r\n                        objectFit: 'cover'\r\n                    }}\r\n                />\r\n            ) : (\r\n                <div style={{\r\n                    width: '100%',\r\n                    height: '100%',\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'center',\r\n                    background: 'linear-gradient(135deg, #1a1a1a 0%, #0a0a0a 100%)'\r\n                }}>\r\n                    <FaLock size={32} color=\"#333\" />\r\n                </div>\r\n            )}\r\n\r\n            {/* Rarity Stars */}\r\n            {!isLocked && badge.rarityScore && (\r\n                <div style={{\r\n                    position: 'absolute',\r\n                    top: '0.5rem',\r\n                    right: '0.5rem',\r\n                    display: 'flex',\r\n                    gap: '2px'\r\n                }}>\r\n                    {[...Array(Math.min(badge.rarityScore, 10))].map((_, i) => (\r\n                        <FaStar\r\n                            key={i}\r\n                            size={8}\r\n                            color={badge.rarityScore >= 8 ? '#FFD700' : badge.rarityScore >= 6 ? '#7FFFD4' : '#888'}\r\n                        />\r\n                    ))}\r\n                </div>\r\n            )}\r\n\r\n            {/* PP Badge */}\r\n            {!isLocked && badge.pointsAwarded && (\r\n                <div style={{\r\n                    position: 'absolute',\r\n                    bottom: '0',\r\n                    left: '0',\r\n                    right: '0',\r\n                    background: 'linear-gradient(to top, rgba(0,0,0,0.9), transparent)',\r\n                    padding: '1.5rem 0.5rem 0.5rem',\r\n                    color: '#fff'\r\n                }}>\r\n                    <div style={{ fontSize: '0.7rem', fontWeight: 'bold', textAlign: 'center' }}>\r\n                        {badge.subjectName}\r\n                    </div>\r\n                    <div style={{\r\n                        fontSize: '0.6rem',\r\n                        color: '#7FFFD4',\r\n                        textAlign: 'center',\r\n                        marginTop: '0.25rem'\r\n                    }}>\r\n                        +{badge.pointsAwarded} PP\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Locked State */}\r\n            {isLocked && (\r\n                <div style={{\r\n                    position: 'absolute',\r\n                    bottom: '0',\r\n                    left: '0',\r\n                    right: '0',\r\n                    background: 'rgba(0,0,0,0.8)',\r\n                    padding: '0.5rem',\r\n                    color: '#666',\r\n                    textAlign: 'center',\r\n                    fontSize: '0.7rem',\r\n                    fontWeight: 'bold'\r\n                }}>\r\n                    ???\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default BadgeCard;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\BadgeUnlockedModal.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { FaTimes, FaStar, FaTrophy } from 'react-icons/fa';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { SpaceCardService } from '@/services/SpaceCardService';\r\n\r\nconst BadgeUnlockedModal = ({ badges, onClose, userId, userName }) => {\r\n    const navigate = useNavigate();\r\n\r\n    if (!badges || badges.length === 0) return null;\r\n\r\n    const badge = badges[0]; // Show first badge\r\n\r\n    const handleGenerateCard = async () => {\r\n        try {\r\n            // Map PhotoDex rarity to SpaceCard rarity\r\n            const mapRarity = (photoDexRarity) => {\r\n                if (photoDexRarity <= 3) return 'Common';\r\n                if (photoDexRarity <= 5) return 'Uncommon';\r\n                if (photoDexRarity <= 7) return 'Rare';\r\n                if (photoDexRarity === 8) return 'Epic';\r\n                if (photoDexRarity === 9) return 'Legendary';\r\n                return 'Mythic';\r\n            };\r\n\r\n            const cardData = {\r\n                creatorUid: userId,\r\n                creatorName: userName,\r\n                frontImage: badge.badgeImageUrl,\r\n                title: `${badge.subjectName} Badge`,\r\n                description: `PhotoDex badge for capturing ${badge.subjectName}`,\r\n                discipline: badge.type,\r\n                rarity: mapRarity(badge.rarityScore),\r\n                editionType: 'limited',\r\n                editionSize: 100,\r\n                linkedPhotoDexEntryId: badge.badgeId,\r\n                cardStyle: 'wildlife',\r\n                basePrice: badge.pointsAwarded / 10\r\n            };\r\n\r\n            await SpaceCardService.createCard(cardData);\r\n            alert('SpaceCard created successfully!');\r\n            navigate('/profile/me');\r\n        } catch (error) {\r\n            console.error('Error creating card:', error);\r\n            alert('Failed to create card: ' + error.message);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div style={{\r\n            position: 'fixed',\r\n            inset: 0,\r\n            background: 'rgba(0,0,0,0.95)',\r\n            backdropFilter: 'blur(10px)',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            zIndex: 3000,\r\n            padding: '1rem',\r\n            animation: 'fadeIn 0.3s ease'\r\n        }}>\r\n            <div style={{\r\n                background: 'linear-gradient(135deg, #1a1a1a 0%, #0a0a0a 100%)',\r\n                border: '2px solid #7FFFD4',\r\n                borderRadius: '16px',\r\n                maxWidth: '500px',\r\n                width: '100%',\r\n                padding: '2rem',\r\n                position: 'relative',\r\n                animation: 'slideUp 0.5s ease'\r\n            }}>\r\n                <button\r\n                    onClick={onClose}\r\n                    style={{\r\n                        position: 'absolute',\r\n                        top: '1rem',\r\n                        right: '1rem',\r\n                        background: 'transparent',\r\n                        border: 'none',\r\n                        color: '#888',\r\n                        cursor: 'pointer',\r\n                        fontSize: '1.5rem'\r\n                    }}\r\n                >\r\n                    <FaTimes />\r\n                </button>\r\n\r\n                {/* Celebration Header */}\r\n                <div style={{ textAlign: 'center', marginBottom: '1.5rem' }}>\r\n                    <FaTrophy size={48} color=\"#FFD700\" style={{ marginBottom: '1rem' }} />\r\n                    <h2 style={{ margin: 0, fontSize: '1.8rem', color: '#7FFFD4' }}>\r\n                        Badge Unlocked!\r\n                    </h2>\r\n                </div>\r\n\r\n                {/* Badge Display */}\r\n                <div style={{\r\n                    aspectRatio: '1',\r\n                    borderRadius: '12px',\r\n                    overflow: 'hidden',\r\n                    border: '3px solid #7FFFD4',\r\n                    marginBottom: '1.5rem',\r\n                    position: 'relative',\r\n                    boxShadow: '0 0 30px rgba(127, 255, 212, 0.3)'\r\n                }}>\r\n                    <img\r\n                        src={badge.badgeImageUrl}\r\n                        alt={badge.subjectName}\r\n                        style={{ width: '100%', height: '100%', objectFit: 'cover' }}\r\n                    />\r\n\r\n                    {/* Rarity Stars */}\r\n                    <div style={{\r\n                        position: 'absolute',\r\n                        top: '1rem',\r\n                        right: '1rem',\r\n                        display: 'flex',\r\n                        gap: '4px'\r\n                    }}>\r\n                        {[...Array(Math.min(badge.rarityScore, 10))].map((_, i) => (\r\n                            <FaStar\r\n                                key={i}\r\n                                size={16}\r\n                                color={badge.rarityScore >= 8 ? '#FFD700' : '#7FFFD4'}\r\n                            />\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Badge Info */}\r\n                <div style={{ textAlign: 'center', marginBottom: '1.5rem' }}>\r\n                    <h3 style={{ margin: '0 0 0.5rem 0', fontSize: '1.5rem', color: '#fff' }}>\r\n                        {badge.subjectName}\r\n                    </h3>\r\n                    <div style={{ color: '#888', fontSize: '0.9rem', marginBottom: '1rem' }}>\r\n                        {badge.type.charAt(0).toUpperCase() + badge.type.slice(1)}\r\n                    </div>\r\n                    <div style={{\r\n                        display: 'inline-block',\r\n                        background: 'linear-gradient(135deg, #7FFFD4 0%, #00CED1 100%)',\r\n                        color: '#000',\r\n                        padding: '0.75rem 1.5rem',\r\n                        borderRadius: '20px',\r\n                        fontWeight: 'bold',\r\n                        fontSize: '1.2rem'\r\n                    }}>\r\n                        +{badge.pointsAwarded} Photo Points\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Actions */}\r\n                <div style={{ display: 'flex', flexDirection: 'column', gap: '0.75rem' }}>\r\n                    <button\r\n                        onClick={handleGenerateCard}\r\n                        style={{\r\n                            padding: '1rem',\r\n                            background: '#7FFFD4',\r\n                            color: '#000',\r\n                            border: 'none',\r\n                            borderRadius: '8px',\r\n                            fontWeight: 'bold',\r\n                            cursor: 'pointer',\r\n                            fontSize: '1rem'\r\n                        }}\r\n                    >\r\n                        ≡ƒÄ┤ Generate SpaceCard from Badge\r\n                    </button>\r\n\r\n                    <button\r\n                        onClick={() => navigate('/photodex')}\r\n                        style={{\r\n                            padding: '1rem',\r\n                            background: '#222',\r\n                            color: '#fff',\r\n                            border: '1px solid #444',\r\n                            borderRadius: '8px',\r\n                            fontWeight: 'bold',\r\n                            cursor: 'pointer',\r\n                            fontSize: '1rem'\r\n                        }}\r\n                    >\r\n                        View PhotoDex\r\n                    </button>\r\n\r\n                    <button\r\n                        onClick={onClose}\r\n                        style={{\r\n                            padding: '1rem',\r\n                            background: 'transparent',\r\n                            color: '#888',\r\n                            border: 'none',\r\n                            cursor: 'pointer',\r\n                            fontSize: '0.9rem'\r\n                        }}\r\n                    >\r\n                        Continue\r\n                    </button>\r\n                </div>\r\n\r\n                {badges.length > 1 && (\r\n                    <div style={{\r\n                        marginTop: '1rem',\r\n                        textAlign: 'center',\r\n                        color: '#7FFFD4',\r\n                        fontSize: '0.9rem'\r\n                    }}>\r\n                        +{badges.length - 1} more badge{badges.length > 2 ? 's' : ''} unlocked!\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            <style>{`\r\n                @keyframes fadeIn {\r\n                    from { opacity: 0; }\r\n                    to { opacity: 1; }\r\n                }\r\n                @keyframes slideUp {\r\n                    from { transform: translateY(50px); opacity: 0; }\r\n                    to { transform: translateY(0); opacity: 1; }\r\n                }\r\n            `}</style>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default BadgeUnlockedModal;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\BottomNav.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { Link, useLocation } from 'react-router-dom';\r\nimport { FaHome, FaPlusSquare, FaUser, FaSearch } from 'react-icons/fa';\r\n\r\nconst BottomNav = () => {\r\n    const location = useLocation();\r\n\r\n    // Don't show on login/signup\r\n    if (['/login', '/signup'].includes(location.pathname)) {\r\n        return null;\r\n    }\r\n\r\n    const navStyle = {\r\n        position: 'fixed',\r\n        bottom: '20px',\r\n        left: '50%',\r\n        transform: 'translateX(-50%)',\r\n        width: 'auto',\r\n        minWidth: '250px',\r\n        height: '60px',\r\n        backgroundColor: 'rgba(20, 20, 20, 0.6)',\r\n        backdropFilter: 'blur(20px)',\r\n        borderRadius: '30px',\r\n        display: 'flex',\r\n        justifyContent: 'space-evenly',\r\n        alignItems: 'center',\r\n        border: '1px solid rgba(255, 255, 255, 0.1)',\r\n        zIndex: 1000,\r\n        padding: '0 20px',\r\n        boxShadow: '0 10px 30px rgba(0,0,0,0.5)'\r\n    };\r\n\r\n    const linkStyle = {\r\n        color: '#fff',\r\n        fontSize: '1.5rem',\r\n        opacity: 0.6,\r\n        transition: 'all 0.2s ease'\r\n    };\r\n\r\n    const activeLinkStyle = {\r\n        ...linkStyle,\r\n        opacity: 1,\r\n        transform: 'scale(1.1)',\r\n        color: '#fff'\r\n    };\r\n\r\n    return (\r\n        <nav style={navStyle}>\r\n            <Link to=\"/\" style={location.pathname === '/' ? activeLinkStyle : linkStyle}>\r\n                <FaHome />\r\n            </Link>\r\n            <Link to=\"/search\" style={location.pathname === '/search' ? activeLinkStyle : linkStyle}>\r\n                <FaSearch />\r\n            </Link>\r\n            <Link to=\"/create\" style={location.pathname === '/create' ? activeLinkStyle : linkStyle}>\r\n                <FaPlusSquare />\r\n            </Link>\r\n            <Link to=\"/profile/me\" style={location.pathname.startsWith('/profile') ? activeLinkStyle : linkStyle}>\r\n                <FaUser />\r\n            </Link>\r\n        </nav>\r\n    );\r\n};\r\n\r\nexport default BottomNav;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\BusinessCardModal.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaBriefcase' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":40,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":51},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'getCurrentGradientId' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":33,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":53}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { FaTimes, FaEnvelope, FaGlobe, FaBriefcase, FaMapMarkerAlt, FaCopy, FaCheck, FaImage, FaExchangeAlt } from 'react-icons/fa';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { db } from '@/firebase';\r\nimport { doc, updateDoc } from 'firebase/firestore';\r\nimport SmartImage from './SmartImage';\r\nimport { getGradientBackground, getCurrentGradientId } from '@/core/constants/gradients';\r\n\r\nconst BusinessCardModal = ({ isOpen, onClose, user }) => {\r\n    const { currentUser } = useAuth();\r\n    const [copiedField, setCopiedField] = useState(null);\r\n\r\n    // Form state (editable only by owner)\r\n    const [isEditing, setIsEditing] = useState(false);\r\n    const [cardData, setCardData] = useState({\r\n        email: '',\r\n        website: '',\r\n        portfolioUrl: '',\r\n        businessType: '',\r\n        availableForCommission: false,\r\n        cardImageUrl: '',\r\n        fullCardImageUrl: '',\r\n        layoutMode: 'split', // 'split' or 'full'\r\n        bio: '' // New Bio field\r\n    });\r\n\r\n    // Initialize data from user profile\r\n    useEffect(() => {\r\n        if (user) {\r\n            setCardData({\r\n                email: user.email || '',\r\n                website: user.website || '',\r\n                portfolioUrl: user.portfolioUrl || '',\r\n                businessType: user.businessType || '',\r\n                availableForCommission: user.availableForCommission || false,\r\n                cardImageUrl: user.cardImageUrl || '',\r\n                fullCardImageUrl: user.fullCardImageUrl || '',\r\n                layoutMode: user.cardLayoutMode || 'split',\r\n                bio: user.bio || ''\r\n            });\r\n        }\r\n    }, [user]);\r\n\r\n    const handleCopy = (text, field) => {\r\n        navigator.clipboard.writeText(text);\r\n        setCopiedField(field);\r\n        setTimeout(() => setCopiedField(null), 2000);\r\n    };\r\n\r\n    const handleSave = async () => {\r\n        if (!currentUser || !user) return;\r\n\r\n        try {\r\n            const userRef = doc(db, 'users', user.id);\r\n            await updateDoc(userRef, {\r\n                email: cardData.email,\r\n                website: cardData.website,\r\n                portfolioUrl: cardData.portfolioUrl,\r\n                businessType: cardData.businessType,\r\n                availableForCommission: cardData.availableForCommission,\r\n                cardImageUrl: cardData.cardImageUrl,\r\n                fullCardImageUrl: cardData.fullCardImageUrl,\r\n                cardLayoutMode: cardData.layoutMode,\r\n                bio: cardData.bio // Save Bio\r\n            });\r\n            setIsEditing(false);\r\n            // Optional: Show success toast\r\n        } catch (error) {\r\n            console.error(\"Error saving business card:\", error);\r\n            alert(\"Failed to save business card changes.\");\r\n        }\r\n    };\r\n\r\n    if (!isOpen || !user) return null;\r\n\r\n    const isOwner = currentUser && currentUser.uid === user.id;\r\n    // Use user's chosen gradient or fallback\r\n    const userGradient = getGradientBackground(user.profileTheme?.gradientId || user.gradientId || 'green-default');\r\n\r\n    // Color Logic\r\n    const usernameColor = (user.profileTheme?.usernameColor && !user.profileTheme.usernameColor.includes('gradient'))\r\n        ? user.profileTheme.usernameColor\r\n        : '#FFFFFF';\r\n\r\n    const bioColor = user.profileTheme?.bioColor || 'rgba(255, 255, 255, 0.7)';\r\n    const borderColor = usernameColor;\r\n\r\n    return (\r\n        <div style={{\r\n            position: 'fixed',\r\n            top: 0,\r\n            left: 0,\r\n            right: 0,\r\n            bottom: 0,\r\n            background: 'rgba(0, 0, 0, 0.85)',\r\n            backdropFilter: 'blur(5px)',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            zIndex: 1100,\r\n            padding: '1rem'\r\n        }}>\r\n            {/* Card Container - 3.5 x 2 Ratio (1.75) */}\r\n            <div style={{\r\n                position: 'relative',\r\n                width: '100%',\r\n                maxWidth: '600px',\r\n                aspectRatio: '1.75 / 1',\r\n                background: userGradient,\r\n                borderRadius: '12px',\r\n                boxShadow: '0 20px 50px rgba(0,0,0,0.5)',\r\n                overflow: 'hidden',\r\n                border: `2px solid ${borderColor}`,\r\n                display: 'flex',\r\n                flexDirection: 'column'\r\n            }}>\r\n                {/* Close Button */}\r\n                <button\r\n                    onClick={onClose}\r\n                    style={{\r\n                        position: 'absolute',\r\n                        top: '10px',\r\n                        right: '10px',\r\n                        background: 'rgba(0,0,0,0.5)',\r\n                        border: 'none',\r\n                        color: '#fff',\r\n                        width: '24px',\r\n                        height: '24px',\r\n                        borderRadius: '50%',\r\n                        cursor: 'pointer',\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        justifyContent: 'center',\r\n                        zIndex: 20\r\n                    }}\r\n                >\r\n                    <FaTimes size={12} />\r\n                </button>\r\n\r\n                {/* FULL CARD MODE */}\r\n                {cardData.layoutMode === 'full' ? (\r\n                    <div style={{ width: '100%', height: '100%', position: 'relative' }}>\r\n                        {cardData.fullCardImageUrl ? (\r\n                            <SmartImage\r\n                                src={cardData.fullCardImageUrl}\r\n                                alt=\"Full Business Card\"\r\n                                style={{ width: '100%', height: '100%', objectFit: 'cover' }}\r\n                            />\r\n                        ) : (\r\n                            <div style={{\r\n                                width: '100%',\r\n                                height: '100%',\r\n                                display: 'flex',\r\n                                flexDirection: 'column',\r\n                                alignItems: 'center',\r\n                                justifyContent: 'center',\r\n                                background: '#222',\r\n                                color: '#666'\r\n                            }}>\r\n                                <FaImage size={40} style={{ marginBottom: '1rem', opacity: 0.5 }} />\r\n                                <div>No Full Card Image Uploaded</div>\r\n                            </div>\r\n                        )}\r\n\r\n                        {isOwner && isEditing && (\r\n                            <div style={{\r\n                                position: 'absolute',\r\n                                bottom: '10px',\r\n                                left: '50%',\r\n                                transform: 'translateX(-50%)',\r\n                                display: 'flex',\r\n                                gap: '0.5rem'\r\n                            }}>\r\n                                <button style={{\r\n                                    background: 'rgba(0,0,0,0.7)',\r\n                                    color: '#fff',\r\n                                    border: '1px solid rgba(255,255,255,0.2)',\r\n                                    padding: '4px 10px',\r\n                                    borderRadius: '12px',\r\n                                    fontSize: '0.7rem',\r\n                                    cursor: 'pointer'\r\n                                }}>\r\n                                    Upload Full Card\r\n                                </button>\r\n                                <button\r\n                                    onClick={() => setCardData(prev => ({ ...prev, layoutMode: 'split' }))}\r\n                                    style={{\r\n                                        background: 'rgba(0,0,0,0.7)',\r\n                                        color: '#fff',\r\n                                        border: '1px solid rgba(255,255,255,0.2)',\r\n                                        padding: '4px 10px',\r\n                                        borderRadius: '12px',\r\n                                        fontSize: '0.7rem',\r\n                                        cursor: 'pointer',\r\n                                        display: 'flex',\r\n                                        alignItems: 'center',\r\n                                        gap: '4px'\r\n                                    }}\r\n                                >\r\n                                    <FaExchangeAlt size={10} /> Switch to Split View\r\n                                </button>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                ) : (\r\n                    /* SPLIT MODE (Standard) with Bio on Left */\r\n                    <div style={{ display: 'flex', width: '100%', height: '100%' }}>\r\n\r\n                        {/* Left Side: Bio (40%) */}\r\n                        <div style={{\r\n                            width: '40%',\r\n                            height: '100%',\r\n                            padding: '1.5rem',\r\n                            borderRight: '1px solid rgba(255,255,255,0.1)',\r\n                            background: 'rgba(0,0,0,0.2)', // Slight tint for readability\r\n                            display: 'flex',\r\n                            flexDirection: 'column',\r\n                            justifyContent: 'center',\r\n                            overflowY: 'auto'\r\n                        }}>\r\n                            {isEditing ? (\r\n                                <textarea\r\n                                    value={cardData.bio}\r\n                                    onChange={(e) => setCardData({ ...cardData, bio: e.target.value })}\r\n                                    placeholder=\"Enter your professional bio...\"\r\n                                    style={{\r\n                                        width: '100%',\r\n                                        height: '100%',\r\n                                        background: 'rgba(255,255,255,0.05)',\r\n                                        border: '1px solid rgba(255,255,255,0.2)',\r\n                                        color: '#fff',\r\n                                        borderRadius: '4px',\r\n                                        padding: '0.5rem',\r\n                                        resize: 'none',\r\n                                        fontSize: '0.85rem'\r\n                                    }}\r\n                                />\r\n                            ) : (\r\n                                <p style={{\r\n                                    margin: 0,\r\n                                    color: bioColor,\r\n                                    fontSize: '0.9rem',\r\n                                    lineHeight: '1.5',\r\n                                    whiteSpace: 'pre-wrap',\r\n                                    fontFamily: 'var(--font-family-body)'\r\n                                }}>\r\n                                    {cardData.bio || 'No bio added.'}\r\n                                </p>\r\n                            )}\r\n                        </div>\r\n\r\n                        {/* Right Side: Content (60%) */}\r\n                        <div style={{\r\n                            width: '60%',\r\n                            padding: '1.5rem',\r\n                            display: 'flex',\r\n                            flexDirection: 'column',\r\n                            justifyContent: 'center',\r\n                            position: 'relative'\r\n                        }}>\r\n                            {/* Name & Title */}\r\n                            <div style={{ marginBottom: '1rem' }}>\r\n                                <h2 style={{\r\n                                    margin: '0 0 0.25rem 0',\r\n                                    fontSize: '1.4rem',\r\n                                    color: usernameColor,\r\n                                    fontWeight: '800',\r\n                                    lineHeight: '1.2',\r\n                                    fontFamily: 'var(--font-family-heading)',\r\n                                    textTransform: 'uppercase',\r\n                                    letterSpacing: '0.02em'\r\n                                }}>\r\n                                    {user.displayName || user.username}\r\n                                </h2>\r\n                                <div style={{\r\n                                    color: bioColor, // Use bioColor for subtitle too for coherence\r\n                                    fontSize: '0.85rem',\r\n                                    fontWeight: '500',\r\n                                    opacity: 0.9\r\n                                }}>\r\n                                    {cardData.businessType || 'Creator'}\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Details */}\r\n                            <div style={{ display: 'flex', flexDirection: 'column', gap: '0.5rem', fontSize: '0.8rem', color: '#ccc' }}>\r\n                                <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                                    <span style={{ color: usernameColor, width: '16px', opacity: 0.7 }}>@</span>\r\n                                    <span>{user.username}</span>\r\n                                </div>\r\n\r\n                                {user.location && (\r\n                                    <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                                        <FaMapMarkerAlt size={12} style={{ color: usernameColor, opacity: 0.7 }} />\r\n                                        <span>{user.location}</span>\r\n                                    </div>\r\n                                )}\r\n\r\n                                {cardData.email && (\r\n                                    <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', maxWidth: '100%' }}>\r\n                                        <FaEnvelope size={12} style={{ color: usernameColor, opacity: 0.7, minWidth: '12px' }} />\r\n                                        <span style={{ whiteSpace: 'nowrap', overflow: 'hidden', textOverflow: 'ellipsis' }}>{cardData.email}</span>\r\n                                        <button\r\n                                            onClick={() => handleCopy(cardData.email, 'email')}\r\n                                            style={{ background: 'none', border: 'none', color: copiedField === 'email' ? 'var(--ice-mint)' : '#444', cursor: 'pointer', padding: 0 }}\r\n                                        >\r\n                                            {copiedField === 'email' ? <FaCheck size={10} /> : <FaCopy size={10} />}\r\n                                        </button>\r\n                                    </div>\r\n                                )}\r\n\r\n                                {cardData.website && (\r\n                                    <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', maxWidth: '100%' }}>\r\n                                        <FaGlobe size={12} style={{ color: usernameColor, opacity: 0.7, minWidth: '12px' }} />\r\n                                        <a\r\n                                            href={cardData.website.startsWith('http') ? cardData.website : `https://${cardData.website}`}\r\n                                            target=\"_blank\"\r\n                                            rel=\"noopener noreferrer\"\r\n                                            style={{ color: '#ccc', textDecoration: 'none', whiteSpace: 'nowrap', overflow: 'hidden', textOverflow: 'ellipsis' }}\r\n                                        >\r\n                                            {cardData.website.replace(/^https?:\\/\\//, '')}\r\n                                        </a>\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n\r\n                            {/* Footer / Status */}\r\n                            {cardData.availableForCommission && (\r\n                                <div style={{\r\n                                    marginTop: 'auto',\r\n                                    paddingTop: '1rem',\r\n                                    display: 'flex',\r\n                                    alignItems: 'center',\r\n                                    gap: '0.4rem',\r\n                                    fontSize: '0.7rem',\r\n                                    color: 'var(--ice-mint)'\r\n                                }}>\r\n                                    <div style={{ width: '6px', height: '6px', borderRadius: '50%', background: 'var(--ice-mint)' }}></div>\r\n                                    Available for Commission\r\n                                </div>\r\n                            )}\r\n\r\n                            {/* Edit Toggle */}\r\n                            {isOwner && (\r\n                                <div style={{\r\n                                    position: 'absolute',\r\n                                    bottom: '10px',\r\n                                    right: '10px',\r\n                                    display: 'flex',\r\n                                    gap: '10px',\r\n                                    alignItems: 'center'\r\n                                }}>\r\n                                    {isEditing ? (\r\n                                        <>\r\n                                            <button\r\n                                                onClick={() => setCardData(prev => ({ ...prev, layoutMode: 'full' }))}\r\n                                                style={{\r\n                                                    background: 'transparent',\r\n                                                    border: 'none',\r\n                                                    color: '#888',\r\n                                                    fontSize: '0.7rem',\r\n                                                    cursor: 'pointer',\r\n                                                    display: 'flex',\r\n                                                    alignItems: 'center',\r\n                                                    gap: '4px'\r\n                                                }}\r\n                                            >\r\n                                                <FaExchangeAlt size={10} /> Use Full Card\r\n                                            </button>\r\n                                            <button\r\n                                                onClick={handleSave}\r\n                                                style={{\r\n                                                    background: 'transparent',\r\n                                                    border: 'none',\r\n                                                    color: 'var(--ice-mint)',\r\n                                                    fontSize: '0.7rem',\r\n                                                    cursor: 'pointer',\r\n                                                    fontWeight: 'bold'\r\n                                                }}\r\n                                            >\r\n                                                Save\r\n                                            </button>\r\n                                        </>\r\n                                    ) : (\r\n                                        <button\r\n                                            onClick={() => setIsEditing(true)}\r\n                                            style={{\r\n                                                background: 'transparent',\r\n                                                border: 'none',\r\n                                                color: '#444',\r\n                                                fontSize: '0.7rem',\r\n                                                cursor: 'pointer',\r\n                                                textDecoration: 'underline'\r\n                                            }}\r\n                                        >\r\n                                            Edit\r\n                                        </button>\r\n                                    )}\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default BusinessCardModal;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\CheckoutButton.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { loadStripe } from '@stripe/stripe-js';\r\nimport { functions, db } from '@/firebase';\r\nimport { httpsCallable } from 'firebase/functions';\r\nimport { doc, updateDoc, increment, getDoc } from 'firebase/firestore';\r\nimport { FaShoppingCart, FaWallet } from 'react-icons/fa';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { WalletService } from '@/services/WalletService';\r\n\r\n// Initialize Stripe with the provided test key\r\nconst stripePromise = loadStripe('pk_test_51SVxZtF3FCQ1N5YCyooRPhAZiECp9ivHgrIcOcomZPy6fbcCy34C6I7mT4dgC27yh51VcwPebwCAuVdOkgtaJKBa00mB4c8yta');\r\n\r\nconst CheckoutButton = ({ post, selectedSize, buttonStyle }) => {\r\n    const { currentUser } = useAuth();\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState(null);\r\n    const [walletBalance, setWalletBalance] = useState(0);\r\n    const [showWalletOption, setShowWalletOption] = useState(false);\r\n\r\n    // Get price for selected size\r\n    const selectedSizeConfig = post.printSizes?.find(s => s.id === selectedSize);\r\n    const price = selectedSizeConfig ? Number(selectedSizeConfig.price) : 0;\r\n\r\n    useEffect(() => {\r\n        const fetchWallet = async () => {\r\n            if (currentUser) {\r\n                const wallet = await WalletService.getWallet(currentUser.uid);\r\n                if (wallet) {\r\n                    setWalletBalance(wallet.balance);\r\n                }\r\n            }\r\n        };\r\n        fetchWallet();\r\n    }, [currentUser]);\r\n\r\n    // Check if user can afford with wallet\r\n    useEffect(() => {\r\n        if (price > 0 && walletBalance >= price) {\r\n            setShowWalletOption(true);\r\n        } else {\r\n            setShowWalletOption(false);\r\n        }\r\n    }, [price, walletBalance]);\r\n\r\n    const handleWalletPurchase = async () => {\r\n        if (!currentUser) {\r\n            setError(\"Please log in to purchase.\");\r\n            return;\r\n        }\r\n        if (!selectedSize) {\r\n            setError('Please select a size');\r\n            return;\r\n        }\r\n\r\n        setLoading(true);\r\n        setError(null);\r\n\r\n        try {\r\n            // 1. Check Stock (Double Check)\r\n            if (post.isLimitedEdition) {\r\n                const freshDoc = await getDoc(doc(db, 'shopItems', post.id));\r\n                if (freshDoc.exists()) {\r\n                    const data = freshDoc.data();\r\n                    if (data.soldCount >= data.editionSize) {\r\n                        throw new Error(\"Sorry, this item just sold out!\");\r\n                    }\r\n                }\r\n            }\r\n\r\n            // 2. Process Transaction\r\n            await WalletService.processPrimaryPurchase(\r\n                currentUser.uid,\r\n                post.userId, // Seller ID\r\n                post.id, // Item ID\r\n                'print', // Item Type\r\n                price,\r\n                post.title\r\n            );\r\n\r\n            // 3. Update Stock & Sold Count\r\n            if (post.isLimitedEdition) {\r\n                await updateDoc(doc(db, 'shopItems', post.id), {\r\n                    soldCount: increment(1),\r\n                    // Check if sold out after this (client-side prediction, backend rule would be better)\r\n                });\r\n            }\r\n\r\n            alert(\"Purchase successful! Item added to your collection.\");\r\n            window.location.reload(); // Refresh to show updated stock/wallet\r\n\r\n        } catch (err) {\r\n            console.error(\"Wallet purchase failed:\", err);\r\n            setError(err.message || \"Purchase failed.\");\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleStripeCheckout = async () => {\r\n        if (!selectedSize) {\r\n            setError('Please select a size');\r\n            return;\r\n        }\r\n\r\n        setLoading(true);\r\n        setError(null);\r\n\r\n        try {\r\n            const createCheckoutSession = httpsCallable(functions, 'createCheckoutSession');\r\n\r\n            const payload = {\r\n                postId: post.id,\r\n                size: selectedSize,\r\n                imageUrl: post?.images?.[0]?.url || post.imageUrl,\r\n                title: post.title,\r\n                authorId: post.authorId,\r\n                origin: window.location.origin\r\n            };\r\n\r\n            const { data } = await createCheckoutSession(payload);\r\n\r\n            if (!data || !data.sessionId) {\r\n                throw new Error('Failed to create checkout session');\r\n            }\r\n\r\n            const stripe = await stripePromise;\r\n            const { error: stripeError } = await stripe.redirectToCheckout({\r\n                sessionId: data.sessionId,\r\n            });\r\n\r\n            if (stripeError) {\r\n                setError(stripeError.message);\r\n                setLoading(false);\r\n            }\r\n        } catch (err) {\r\n            console.error(\"Checkout failed:\", err);\r\n            if (err.code === 'functions/not-found') {\r\n                setError(\"Checkout is temporarily unavailable. Please try again later.\");\r\n            } else if (err.code === 'functions/unauthenticated') {\r\n                setError(\"Please log in to make a purchase.\");\r\n            } else {\r\n                setError(\"Checkout failed. Please try again.\");\r\n            }\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    // Disable if sold out\r\n    const isSoldOut = post.isLimitedEdition && post.soldCount >= post.editionSize;\r\n\r\n    if (isSoldOut) {\r\n        return (\r\n            <button\r\n                disabled\r\n                style={{\r\n                    ...buttonStyle,\r\n                    background: '#333',\r\n                    color: '#888',\r\n                    cursor: 'not-allowed',\r\n                    opacity: 0.7\r\n                }}\r\n            >\r\n                Sold Out\r\n            </button>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div style={{ display: 'flex', flexDirection: 'column', gap: '1rem', width: '100%' }}>\r\n            {error && (\r\n                <div style={{\r\n                    padding: '1rem',\r\n                    background: 'rgba(244, 67, 54, 0.1)',\r\n                    border: '1px solid rgba(244, 67, 54, 0.3)',\r\n                    borderRadius: '8px',\r\n                    color: '#f44336',\r\n                    fontSize: '0.9rem'\r\n                }}>\r\n                    {error}\r\n                </div>\r\n            )}\r\n\r\n            {/* Wallet Option */}\r\n            {showWalletOption && (\r\n                <button\r\n                    onClick={handleWalletPurchase}\r\n                    disabled={loading || !selectedSize}\r\n                    style={{\r\n                        ...buttonStyle,\r\n                        background: 'rgba(127, 255, 212, 0.15)',\r\n                        color: '#7FFFD4',\r\n                        border: '1px solid #7FFFD4',\r\n                        opacity: (loading || !selectedSize) ? 0.6 : 1,\r\n                        cursor: (loading || !selectedSize) ? 'not-allowed' : 'pointer',\r\n                    }}\r\n                >\r\n                    {loading ? 'Processing...' : (\r\n                        <>\r\n                            <FaWallet /> Pay with Wallet (${walletBalance.toFixed(2)})\r\n                        </>\r\n                    )}\r\n                </button>\r\n            )}\r\n\r\n            {/* Stripe Option */}\r\n            <button\r\n                onClick={handleStripeCheckout}\r\n                disabled={loading || !selectedSize}\r\n                style={{\r\n                    ...buttonStyle,\r\n                    opacity: (loading || !selectedSize) ? 0.6 : 1,\r\n                    cursor: (loading || !selectedSize) ? 'not-allowed' : 'pointer',\r\n                }}\r\n            >\r\n                {loading ? 'Processing...' : (\r\n                    <>\r\n                        <FaShoppingCart /> Pay with Card\r\n                    </>\r\n                )}\r\n            </button>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CheckoutButton;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\CollectionCard.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { FaLayerGroup } from 'react-icons/fa';\r\n\r\nconst CollectionCard = ({ collection }) => {\r\n    const navigate = useNavigate();\r\n    return (\r\n        <div\r\n            onClick={() => navigate(`/collection/${collection.id}`)}\r\n            style={{\r\n                background: 'rgba(255,255,255,0.03)',\r\n                borderRadius: '12px',\r\n                overflow: 'hidden',\r\n                cursor: 'pointer',\r\n                border: '1px solid rgba(255,255,255,0.05)',\r\n                transition: 'transform 0.2s'\r\n            }}\r\n            onMouseEnter={e => e.currentTarget.style.transform = 'translateY(-4px)'}\r\n            onMouseLeave={e => e.currentTarget.style.transform = 'translateY(0)'}\r\n        >\r\n            <div style={{ aspectRatio: '1/1', background: '#111', position: 'relative', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\r\n                {collection.coverImage ? (\r\n                    <img\r\n                        src={collection.coverImage}\r\n                        alt=\"\"\r\n                        loading=\"lazy\"\r\n                        style={{ width: '100%', height: '100%', objectFit: 'cover' }}\r\n                    />\r\n                ) : (\r\n                    <FaLayerGroup size={32} color=\"#444\" />\r\n                )}\r\n                <div style={{\r\n                    position: 'absolute',\r\n                    bottom: 0,\r\n                    left: 0,\r\n                    right: 0,\r\n                    padding: '1rem',\r\n                    background: 'linear-gradient(to top, rgba(0,0,0,0.9), transparent)'\r\n                }}>\r\n                    <h4 style={{ margin: '0', color: '#fff', fontSize: '1.1rem' }}>{collection.title || 'Untitled Collection'}</h4>\r\n                    <p style={{ margin: '0.25rem 0 0 0', fontSize: '0.85rem', color: 'rgba(255,255,255,0.7)' }}>{collection.itemCount || 0} items</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CollectionCard;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\ContestCard.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { FaTrophy, FaClock } from 'react-icons/fa';\r\n\r\nconst ContestCard = ({ contest }) => {\r\n    const navigate = useNavigate();\r\n    const isActive = contest.status === 'active';\r\n\r\n    return (\r\n        <div\r\n            onClick={() => navigate(`/contest/${contest.id}`)}\r\n            style={{\r\n                background: 'rgba(255,255,255,0.03)',\r\n                borderRadius: '12px',\r\n                overflow: 'hidden',\r\n                cursor: 'pointer',\r\n                border: '1px solid rgba(255,255,255,0.05)',\r\n                transition: 'transform 0.2s',\r\n                display: 'flex',\r\n                flexDirection: 'column'\r\n            }}\r\n            onMouseEnter={e => e.currentTarget.style.transform = 'translateY(-4px)'}\r\n            onMouseLeave={e => e.currentTarget.style.transform = 'translateY(0)'}\r\n        >\r\n            <div style={{ padding: '1.5rem', flex: 1 }}>\r\n                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'start', marginBottom: '1rem' }}>\r\n                    <div style={{\r\n                        padding: '0.25rem 0.75rem',\r\n                        borderRadius: '20px',\r\n                        background: isActive ? 'rgba(127, 255, 212, 0.1)' : 'rgba(255, 255, 255, 0.1)',\r\n                        color: isActive ? 'var(--ice-mint)' : '#888',\r\n                        fontSize: '0.75rem',\r\n                        fontWeight: 600,\r\n                        display: 'inline-flex',\r\n                        alignItems: 'center',\r\n                        gap: '0.25rem'\r\n                    }}>\r\n                        {isActive ? <FaClock size={10} /> : null}\r\n                        {isActive ? 'ACTIVE' : 'ENDED'}\r\n                    </div>\r\n                    <FaTrophy style={{ color: 'gold', opacity: 0.8 }} />\r\n                </div>\r\n                <h4 style={{ margin: '0 0 0.5rem 0', color: '#fff', fontSize: '1.2rem' }}>{contest.title}</h4>\r\n                <p style={{ margin: 0, fontSize: '0.9rem', color: '#aaa', lineHeight: 1.4 }}>{contest.description}</p>\r\n            </div>\r\n            {contest.prize && (\r\n                <div style={{\r\n                    padding: '1rem 1.5rem',\r\n                    background: 'rgba(255, 255, 255, 0.02)',\r\n                    borderTop: '1px solid rgba(255, 255, 255, 0.05)',\r\n                    fontSize: '0.9rem',\r\n                    color: 'var(--ice-mint)'\r\n                }}>\r\n                    ≡ƒÅå Prize: {contest.prize}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ContestCard;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\ContextOptionsSection.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { FaChevronRight, FaPen, FaTrash, FaFlag, FaBan, FaLink, FaShareAlt } from 'react-icons/fa';\r\nimport { useAuth } from '@/context/AuthContext';\r\n\r\nconst ContextOptionsSection = ({\r\n    currentContext,\r\n    postOwnerId,\r\n    profileUserId,\r\n    onEditPost,\r\n    onDeletePost,\r\n    onReportPost,\r\n    onReportProfile,\r\n    onBlockUser,\r\n    onCopyLink,\r\n    onShareProfile\r\n}) => {\r\n    const [isExpanded, setIsExpanded] = useState(false);\r\n    const { currentUser } = useAuth();\r\n\r\n    if (!currentContext) return null;\r\n\r\n    const isPost = currentContext === 'post';\r\n    const isProfile = currentContext === 'profile';\r\n\r\n    // Determine target user ID for blocking\r\n    const targetUserId = isPost ? postOwnerId : profileUserId;\r\n    const isOwner = currentUser?.uid === targetUserId;\r\n\r\n    const title = isPost ? 'Post Options' : 'Profile Options';\r\n\r\n    // Animation variants\r\n    const contentVariants = {\r\n        hidden: {\r\n            height: 0,\r\n            opacity: 0,\r\n            y: -6,\r\n            transition: {\r\n                height: { duration: 0.2, ease: \"easeInOut\" },\r\n                opacity: { duration: 0.15 },\r\n                y: { duration: 0.15 }\r\n            }\r\n        },\r\n        visible: {\r\n            height: 'auto',\r\n            opacity: 1,\r\n            y: 0,\r\n            transition: {\r\n                height: { duration: 0.25, ease: \"easeOut\" },\r\n                opacity: { duration: 0.2, delay: 0.05 },\r\n                y: { duration: 0.2, delay: 0.05 }\r\n            }\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div style={{ width: '100%', borderBottom: '1px solid rgba(255,255,255,0.1)', paddingBottom: '6px' }}>\r\n            {/* Header */}\r\n            <div\r\n                onClick={() => setIsExpanded(!isExpanded)}\r\n                style={{\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'space-between',\r\n                    padding: '1.2rem 1.5rem',\r\n                    paddingTop: '1.6rem', // Extra vertical padding\r\n                    cursor: 'pointer',\r\n                    background: 'transparent',\r\n                    color: '#fff',\r\n                    fontFamily: 'var(--font-family-heading, sans-serif)',\r\n                    letterSpacing: '0.05em',\r\n                    textTransform: 'uppercase',\r\n                    fontSize: '0.9rem',\r\n                    fontWeight: 600\r\n                }}\r\n            >\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                    <span style={{ color: '#7FFFD4' }}>{title}</span>\r\n                </div>\r\n                <FaChevronRight\r\n                    size={12}\r\n                    style={{\r\n                        transform: isExpanded ? 'rotate(90deg)' : 'rotate(0deg)',\r\n                        transition: 'transform 0.18s ease',\r\n                        color: '#666'\r\n                    }}\r\n                />\r\n            </div>\r\n\r\n            {/* Expanded Content */}\r\n            <AnimatePresence>\r\n                {isExpanded && (\r\n                    <motion.div\r\n                        variants={contentVariants}\r\n                        initial=\"hidden\"\r\n                        animate=\"visible\"\r\n                        exit=\"hidden\"\r\n                        style={{ overflow: 'hidden', background: 'rgba(255,255,255,0.02)' }}\r\n                    >\r\n                        <div style={{ padding: '0.5rem 0' }}>\r\n                            {/* Post Actions */}\r\n                            {isPost && (\r\n                                <>\r\n                                    {isOwner && (\r\n                                        <>\r\n                                            <OptionItem label=\"Edit Post\" icon={FaPen} onClick={onEditPost} />\r\n                                            <OptionItem label=\"Delete Post\" icon={FaTrash} onClick={onDeletePost} danger />\r\n                                        </>\r\n                                    )}\r\n                                    {!isOwner && (\r\n                                        <>\r\n                                            <OptionItem label=\"Report Post\" icon={FaFlag} onClick={onReportPost} />\r\n                                            <OptionItem label=\"Block User\" icon={FaBan} onClick={onBlockUser} danger />\r\n                                        </>\r\n                                    )}\r\n                                    <OptionItem label=\"Copy Link\" icon={FaLink} onClick={onCopyLink} />\r\n                                </>\r\n                            )}\r\n\r\n                            {/* Profile Actions */}\r\n                            {isProfile && (\r\n                                <>\r\n                                    {!isOwner ? (\r\n                                        <>\r\n                                            <OptionItem label=\"Report Profile\" icon={FaFlag} onClick={onReportProfile} />\r\n                                            <OptionItem label=\"Block User\" icon={FaBan} onClick={onBlockUser} danger />\r\n                                            <OptionItem label=\"Share Profile\" icon={FaShareAlt} onClick={onShareProfile} />\r\n                                        </>\r\n                                    ) : (\r\n                                        <OptionItem label=\"Share Profile\" icon={FaShareAlt} onClick={onShareProfile} />\r\n                                    )}\r\n                                </>\r\n                            )}\r\n                        </div>\r\n                    </motion.div>\r\n                )}\r\n            </AnimatePresence>\r\n        </div>\r\n    );\r\n};\r\n\r\n// Helper Sub-component\r\nconst OptionItem = ({ label, icon: Icon, onClick, danger }) => (\r\n    <div\r\n        onClick={onClick}\r\n        style={{\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '1rem',\r\n            // Indent 16px relative to header (1.5rem + 16px ~= 2.5rem)\r\n            padding: '0.8rem 1.5rem 0.8rem 2.5rem',\r\n            minHeight: '42px',\r\n            cursor: 'pointer',\r\n            color: danger ? '#ff4444' : '#ccc',\r\n            fontSize: '0.9rem',\r\n            transition: 'background 0.2s',\r\n            background: 'transparent'\r\n        }}\r\n        onMouseEnter={(e) => e.currentTarget.style.background = 'rgba(255,255,255,0.05)'}\r\n        onMouseLeave={(e) => e.currentTarget.style.background = 'transparent'}\r\n    >\r\n        <Icon size={14} style={{ opacity: 0.8 }} />\r\n        <span>{label}</span>\r\n    </div>\r\n);\r\n\r\nexport default ContextOptionsSection;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\CosmicGuideModal.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { FaTimes } from 'react-icons/fa';\r\nimport { renderCosmicUsername } from '@/utils/usernameRenderer';\r\n\r\nconst SYMBOLS_DATA = [\r\n    { symbol: '@', description: 'Planet', label: 'Planet' },\r\n    { symbol: '*', description: 'Star', label: 'Star' },\r\n    { symbol: '.', description: 'Moon', label: 'Moon' },\r\n    { symbol: '/', description: 'Comet', label: 'Comet' },\r\n    { symbol: '\"', description: 'Sparkles', label: 'Sparkles' },\r\n    { symbol: '_', description: 'Glowing Star', label: 'Glow Star' },\r\n    { symbol: '<()', description: 'Sun', label: 'Sun' },\r\n    { symbol: '()', description: 'Earth', label: 'Earth' },\r\n    { symbol: '[]', description: 'Camera', label: 'Camera' },\r\n    { symbol: '{}', description: 'Palette', label: 'Art' },\r\n    { symbol: '-()', description: 'Flower', label: 'Flower' },\r\n    { symbol: '%', description: 'Rocket', label: 'Rocket' },\r\n    { symbol: '#', description: 'Fire', label: 'Fire' },\r\n    { symbol: '^', description: 'Waves', label: 'Wave' },\r\n    { symbol: '\\\\', description: 'Lightning', label: 'Bolt' },\r\n    { symbol: '?', description: 'Mushroom', label: 'Shroom' },\r\n    { symbol: ':)', description: 'Smile', label: 'Smile' },\r\n    { symbol: '<3', description: 'Heart', label: 'Heart' },\r\n    { symbol: '(:)', description: 'Music', label: 'Music' },\r\n    { symbol: '(0)', description: 'Alien Ship', label: 'UFO' },\r\n    { symbol: '(8)', description: 'Alien Head', label: 'Alien' },\r\n    { symbol: '(@)', description: 'Galaxy', label: 'Galaxy' },\r\n];\r\n\r\nconst CosmicGuideModal = ({ isOpen, onClose }) => {\r\n    if (!isOpen) return null;\r\n\r\n    return (\r\n        <div style={{\r\n            position: 'fixed',\r\n            top: 0,\r\n            left: 0,\r\n            width: '100%',\r\n            height: '100%',\r\n            zIndex: 9999,\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            background: 'rgba(0, 0, 0, 0.8)',\r\n            backdropFilter: 'blur(8px)'\r\n        }} onClick={onClose}>\r\n            <div style={{\r\n                width: '90%',\r\n                maxWidth: '500px',\r\n                background: 'rgba(15, 15, 20, 0.95)',\r\n                border: '1px solid rgba(127, 255, 212, 0.3)',\r\n                borderRadius: '24px',\r\n                padding: '24px',\r\n                position: 'relative',\r\n                boxShadow: '0 0 50px rgba(127, 255, 212, 0.1)',\r\n                animation: 'fadeIn 0.2s ease-out'\r\n            }} onClick={e => e.stopPropagation()}>\r\n\r\n                {/* Header */}\r\n                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '20px' }}>\r\n                    <h2 style={{\r\n                        margin: 0,\r\n                        fontSize: '1.5rem',\r\n                        fontFamily: 'var(--font-family-heading)',\r\n                        color: '#7FFFD4',\r\n                        textTransform: 'uppercase',\r\n                        letterSpacing: '0.05em'\r\n                    }}>\r\n                        Cosmic Symbols\r\n                    </h2>\r\n                    <button\r\n                        onClick={onClose}\r\n                        style={{\r\n                            background: 'transparent',\r\n                            border: 'none',\r\n                            color: '#fff',\r\n                            cursor: 'pointer',\r\n                            padding: '8px',\r\n                            display: 'flex'\r\n                        }}\r\n                    >\r\n                        <FaTimes size={20} />\r\n                    </button>\r\n                </div>\r\n\r\n                <div style={{ color: '#888', marginBottom: '24px', fontSize: '0.9rem', lineHeight: '1.5' }}>\r\n                    Use these special characters in your username to create cosmic icons. They will be rendered automatically.\r\n                </div>\r\n\r\n                {/* Grid */}\r\n                <div style={{\r\n                    display: 'grid',\r\n                    gridTemplateColumns: 'repeat(auto-fill, minmax(100px, 1fr))',\r\n                    gap: '12px',\r\n                    maxHeight: '60vh',\r\n                    overflowY: 'auto',\r\n                    paddingRight: '8px'\r\n                }}>\r\n                    {SYMBOLS_DATA.map((item, idx) => (\r\n                        <div key={idx} style={{\r\n                            background: 'rgba(255, 255, 255, 0.03)',\r\n                            border: '1px solid rgba(255, 255, 255, 0.08)',\r\n                            borderRadius: '12px',\r\n                            padding: '12px',\r\n                            display: 'flex',\r\n                            flexDirection: 'column',\r\n                            alignItems: 'center',\r\n                            gap: '8px',\r\n                            cursor: 'pointer',\r\n                            transition: 'all 0.2s'\r\n                        }}\r\n                            onClick={() => {\r\n                                // Optional: Copy to clipboard logic could go here\r\n                            }}\r\n                        >\r\n                            {/* Visual Preview */}\r\n                            <div style={{\r\n                                fontSize: '1.8rem',\r\n                                height: '40px',\r\n                                display: 'flex',\r\n                                alignItems: 'center',\r\n                                filter: 'drop-shadow(0 0 8px rgba(127, 255, 212, 0.2))'\r\n                            }}>\r\n                                {renderCosmicUsername(item.symbol, '#7FFFD4')}\r\n                            </div>\r\n\r\n                            {/* Code */}\r\n                            <div style={{\r\n                                fontFamily: 'monospace',\r\n                                background: 'rgba(0, 0, 0, 0.4)',\r\n                                padding: '4px 8px',\r\n                                borderRadius: '6px',\r\n                                color: '#7FFFD4',\r\n                                fontWeight: 'bold',\r\n                                fontSize: '0.9rem'\r\n                            }}>\r\n                                {item.symbol}\r\n                            </div>\r\n\r\n                            {/* Label */}\r\n                            <div style={{ fontSize: '0.75rem', color: '#888', textTransform: 'uppercase' }}>\r\n                                {item.label}\r\n                            </div>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n\r\n                {/* Footer Note */}\r\n                <div style={{ marginTop: '20px', fontSize: '0.8rem', color: '#555', textAlign: 'center', borderTop: '1px solid rgba(255,255,255,0.05)', paddingTop: '16px' }}>\r\n                    Tap a symbol code to type it!\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CosmicGuideModal;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\CreateCardModal.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useMemo' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":46,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":53},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setBackImage' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":32,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":32,"endColumn":35}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef, useMemo } from 'react';\r\nimport { FaTimes, FaImage, FaStar, FaInfoCircle, FaRocket, FaFileAlt, FaUpload, FaShoppingCart } from 'react-icons/fa';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { SpaceCardService, RARITY_TIERS, EDITION_TYPES, CARD_DISCIPLINES, CARD_STYLES } from '@/services/SpaceCardService';\r\nimport { fetchPublishedPosts, fetchDrafts } from '@/core/services/firestore/posts.service';\r\nimport { storage, db } from '@/firebase';\r\nimport { ref, uploadBytesResumable, getDownloadURL } from 'firebase/storage';\r\nimport { collection, addDoc, serverTimestamp } from 'firebase/firestore';\r\nimport {\r\n    CARD_CATEGORIES,\r\n    getCategoryTags,\r\n    getAutoRarity,\r\n    getAllParks,\r\n    getTagLabel\r\n} from '@/core/constants/officialCardCategories';\r\nimport StarBackground from './StarBackground';\r\nimport { logger } from '@/core/utils/logger';\r\n\r\nconst CreateCardModal = ({ onClose, onCreated }) => {\r\n    const { currentUser } = useAuth();\r\n    const [step, setStep] = useState(1); // 1: Select Image, 2: Card Details, 3: Preview\r\n    const [userPosts, setUserPosts] = useState([]);\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    // Generate stars for background animation\r\n    // const stars = useMemo(() => { ... }); // Removed in favor of StarBackground component\r\n\r\n    // Step 1 State: Image Selection\r\n    const [activeTab, setActiveTab] = useState('published'); // 'published' | 'drafts' | 'upload'\r\n    const [selectedPost, setSelectedPost] = useState(null);\r\n    const [frontImage, setFrontImage] = useState('');\r\n    const [backImage, setBackImage] = useState('');\r\n    const [uploadedFile, setUploadedFile] = useState(null);\r\n    const [uploadPreview, setUploadPreview] = useState('');\r\n    const [postToFeed, setPostToFeed] = useState(false);\r\n    const fileInputRef = useRef(null);\r\n\r\n    // Image positioning state\r\n    const [imagePosition, setImagePosition] = useState({ x: 50, y: 50 }); // percentage\r\n    const [isDragging, setIsDragging] = useState(false);\r\n    const [dragStart, setDragStart] = useState({ x: 0, y: 0 });\r\n\r\n    // Step 2 State: Card Details\r\n    const [cardType, setCardType] = useState('official'); // 'official' | 'custom'\r\n    const [title, setTitle] = useState('');\r\n    const [description, setDescription] = useState('');\r\n    const [discipline, setDiscipline] = useState(CARD_DISCIPLINES.OTHER);\r\n\r\n    // Official Card State\r\n    const [officialCategory, setOfficialCategory] = useState(CARD_CATEGORIES.ANIMALS);\r\n    const [selectedTag, setSelectedTag] = useState('');\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n    const [filteredTags, setFilteredTags] = useState([]);\r\n\r\n    // Custom Card State\r\n    const [customTag, setCustomTag] = useState('');\r\n    const [rarity, setRarity] = useState('Common'); // For custom cards or auto-set for official\r\n\r\n    // Common Details\r\n    const [editionType, setEditionType] = useState(EDITION_TYPES.UNLIMITED);\r\n    const [editionSize, setEditionSize] = useState(100);\r\n    const [cardStyle, setCardStyle] = useState(CARD_STYLES.CLASSIC);\r\n    // const [basePrice, setBasePrice] = useState(10); // Removed Selling Fields for now\r\n    const [addToShopDraft, setAddToShopDraft] = useState(false); // NEW: Shop Draft Toggle\r\n\r\n    // Fetch posts when tab changes\r\n    useEffect(() => {\r\n        const loadPosts = async () => {\r\n            if (!currentUser) return;\r\n            setLoading(true);\r\n            try {\r\n                let posts = [];\r\n                if (activeTab === 'published') {\r\n                    posts = await fetchPublishedPosts(currentUser.uid, 50);\r\n                } else {\r\n                    posts = await fetchDrafts(currentUser.uid);\r\n                }\r\n                setUserPosts(posts);\r\n            } catch (error) {\r\n                console.error('Error fetching posts:', error);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n        loadPosts();\r\n    }, [currentUser, activeTab]);\r\n\r\n    // Initialize tags list\r\n    useEffect(() => {\r\n        if (officialCategory === CARD_CATEGORIES.NATIONAL_PARKS || officialCategory === CARD_CATEGORIES.STATE_PARKS) {\r\n            setFilteredTags(getAllParks());\r\n        } else {\r\n            // For other categories, initialize with all tags\r\n            setFilteredTags(getCategoryTags(officialCategory));\r\n        }\r\n    }, [officialCategory]);\r\n\r\n    // Filter tags when searching\r\n    useEffect(() => {\r\n        if (officialCategory === CARD_CATEGORIES.NATIONAL_PARKS || officialCategory === CARD_CATEGORIES.STATE_PARKS) {\r\n            // Park filtering logic (objects)\r\n            let filtered = getAllParks();\r\n\r\n            // Filter by type first\r\n            if (officialCategory === CARD_CATEGORIES.NATIONAL_PARKS) {\r\n                filtered = filtered.filter(p => p.type === 'national');\r\n            } else {\r\n                filtered = filtered.filter(p => p.type === 'state');\r\n            }\r\n\r\n            // Then filter by search term if present\r\n            if (searchTerm) {\r\n                filtered = filtered.filter(p =>\r\n                    p.label.toLowerCase().includes(searchTerm.toLowerCase())\r\n                );\r\n            }\r\n\r\n            setFilteredTags(filtered);\r\n        } else {\r\n            // Standard category filtering logic (strings)\r\n            let tags = getCategoryTags(officialCategory);\r\n\r\n            if (searchTerm) {\r\n                tags = tags.filter(tag =>\r\n                    tag.toLowerCase().includes(searchTerm.toLowerCase())\r\n                );\r\n            }\r\n\r\n            setFilteredTags(tags);\r\n        }\r\n    }, [searchTerm, officialCategory]);\r\n\r\n    // Auto-Rarity Logic\r\n    useEffect(() => {\r\n        if (cardType === 'official' && selectedTag) {\r\n            const autoRarity = getAutoRarity(officialCategory, selectedTag);\r\n            if (autoRarity) {\r\n                // Capitalize first letter for compatibility with RARITY_TIERS keys\r\n                const formattedRarity = autoRarity.charAt(0).toUpperCase() + autoRarity.slice(1);\r\n                setRarity(formattedRarity);\r\n            }\r\n        }\r\n    }, [cardType, officialCategory, selectedTag]);\r\n\r\n    const handlePostSelect = (post) => {\r\n        setSelectedPost(post);\r\n        setFrontImage(post.downloadURL || post.images?.[0]?.url);\r\n        setUploadedFile(null);\r\n        setUploadPreview('');\r\n        // Reset image position to center\r\n        setImagePosition({ x: 50, y: 50 });\r\n        // Auto-fill title if empty\r\n        if (!title) setTitle(post.title || '');\r\n        if (!description) setDescription(post.description || '');\r\n    };\r\n\r\n    const handleFileSelect = (e) => {\r\n        const file = e.target.files?.[0];\r\n        if (file && file.type.startsWith('image/')) {\r\n            setUploadedFile(file);\r\n            setSelectedPost(null);\r\n\r\n            // Create preview\r\n            const reader = new FileReader();\r\n            reader.onloadend = () => {\r\n                setUploadPreview(reader.result);\r\n                setFrontImage(reader.result);\r\n                // Reset image position to center\r\n                setImagePosition({ x: 50, y: 50 });\r\n                // Default to posting to feed\r\n                setPostToFeed(true);\r\n            };\r\n            reader.readAsDataURL(file);\r\n        }\r\n    };\r\n\r\n    // Image positioning handlers\r\n    const handleMouseDown = (e) => {\r\n        e.preventDefault();\r\n        setIsDragging(true);\r\n        setDragStart({ x: e.clientX, y: e.clientY });\r\n    };\r\n\r\n    const handleMouseMove = (e) => {\r\n        if (!isDragging) return;\r\n        e.preventDefault();\r\n\r\n        const deltaX = e.clientX - dragStart.x;\r\n        const deltaY = e.clientY - dragStart.y;\r\n\r\n        setImagePosition(prev => ({\r\n            x: Math.max(0, Math.min(100, prev.x + (deltaX / 3))),\r\n            y: Math.max(0, Math.min(100, prev.y + (deltaY / 3)))\r\n        }));\r\n\r\n        setDragStart({ x: e.clientX, y: e.clientY });\r\n    };\r\n\r\n    const handleMouseUp = () => {\r\n        setIsDragging(false);\r\n    };\r\n\r\n    const handleCreate = async () => {\r\n        if (!frontImage || !title) {\r\n            alert('Please provide at least a front image and title');\r\n            return;\r\n        }\r\n\r\n        if (cardType === 'official' && !selectedTag) {\r\n            alert('Please select a category and tag for the official card');\r\n            return;\r\n        }\r\n\r\n        setLoading(true);\r\n        try {\r\n            let finalFrontImage = frontImage;\r\n            let postId = null;\r\n\r\n            // Upload file if user uploaded one\r\n            if (uploadedFile) {\r\n                const storageRef = ref(\r\n                    storage,\r\n                    `spacecards/${currentUser.uid}/${Date.now()}_${uploadedFile.name}`\r\n                );\r\n                const uploadTask = uploadBytesResumable(storageRef, uploadedFile);\r\n\r\n                await new Promise((resolve, reject) => {\r\n                    uploadTask.on('state_changed',\r\n                        null,\r\n                        (error) => reject(error),\r\n                        () => resolve()\r\n                    );\r\n                });\r\n\r\n                finalFrontImage = await getDownloadURL(storageRef);\r\n\r\n                // Create post if requested\r\n                if (postToFeed) {\r\n                    const postDoc = {\r\n                        userId: currentUser.uid,\r\n                        uid: currentUser.uid, // Keep for legacy compatibility\r\n                        username: currentUser.displayName || currentUser.email,\r\n                        userAvatar: currentUser.photoURL || '',\r\n                        createdAt: serverTimestamp(),\r\n                        updatedAt: serverTimestamp(),\r\n                        status: 'published', // Required field\r\n                        caption: title,\r\n                        imageUrls: [finalFrontImage],\r\n                        thumbnailUrls: [finalFrontImage],\r\n                        tags: cardType === 'official' ? [selectedTag] : [customTag].filter(Boolean),\r\n                        locationName: '',\r\n                        lat: null,\r\n                        lng: null,\r\n                        likesCount: 0,\r\n                        commentsCount: 0,\r\n                        artType: 'photography',\r\n                        category: 'general',\r\n                        safe: true,\r\n                        shopEnabled: false,\r\n                        hasSlides: false,\r\n                        hasItems: true,\r\n                        hasImages: true,\r\n                        showInProfile: true,\r\n                        title,\r\n                        description: description || '',\r\n                        images: [{\r\n                            url: finalFrontImage,\r\n                            caption: title,\r\n                            exif: null\r\n                        }]\r\n                    };\r\n\r\n                    const postRef = await addDoc(collection(db, 'posts'), postDoc);\r\n                    postId = postRef.id;\r\n                }\r\n            }\r\n\r\n            const cardData = {\r\n                creatorUid: currentUser.uid,\r\n                creatorName: currentUser.displayName || currentUser.email,\r\n                frontImage: finalFrontImage,\r\n                backImage,\r\n                title,\r\n                description,\r\n                discipline,\r\n                rarity,\r\n                editionType,\r\n                editionSize: editionType === EDITION_TYPES.LIMITED ? editionSize : null,\r\n                linkedPostId: postId || selectedPost?.id || null,\r\n                cardStyle,\r\n                basePrice: 0, // Force 0 or remove entirely if schema allows. We are removing selling fields.\r\n                // New Fields\r\n                cardType,\r\n                subjectTag: cardType === 'official' ? selectedTag : customTag,\r\n                isOfficial: cardType === 'official',\r\n                imagePosition // Pass the crop position\r\n            };\r\n\r\n            const newCard = await SpaceCardService.createCard(cardData);\r\n\r\n            // 2.2 Create Shop Draft if requested\r\n            if (addToShopDraft) {\r\n                try {\r\n                    const shopItemData = {\r\n                        ownerId: currentUser.uid,\r\n                        kind: \"spacecard\",\r\n                        status: \"draft\",\r\n                        sourcePostId: newCard.id, // Link to the newly created SpaceCard ID\r\n                        postRef: newCard.id, // Legacy compatibility\r\n                        title: title || \"Untitled Space Card\",\r\n                        description: description || \"\",\r\n                        imageUrl: finalFrontImage,\r\n                        tags: cardType === 'official' ? [selectedTag] : [customTag].filter(Boolean),\r\n                        baseCostCents: 0,\r\n                        markupCents: 0,\r\n                        priceCents: 0,\r\n                        currency: \"USD\",\r\n                        createdAt: serverTimestamp(),\r\n                        updatedAt: serverTimestamp(),\r\n                        available: false\r\n                    };\r\n\r\n                    // Add to 'shopItems' collection\r\n                    await addDoc(collection(db, 'shopItems'), shopItemData);\r\n                    logger.log(\"Shop Item Draft Created for SpaceCard:\", newCard.id);\r\n\r\n                } catch (shopError) {\r\n                    logger.error(\"Error creating shop draft:\", shopError);\r\n                    // Don't block the main success flow, just log it\r\n                }\r\n            }\r\n\r\n            alert(`Card \"${title}\" created successfully!`);\r\n            if (onCreated) onCreated(newCard);\r\n            onClose();\r\n        } catch (error) {\r\n            console.error('Error creating card:', error);\r\n            alert('Failed to create card: ' + error.message);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div style={{\r\n            position: 'fixed',\r\n            inset: 0,\r\n            background: 'rgba(0,0,0,0.9)',\r\n            backdropFilter: 'blur(10px)',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            zIndex: 2000,\r\n            padding: '1rem'\r\n        }}>\r\n            {/* Animated Stars Background */}\r\n            <StarBackground />\r\n\r\n            <div style={{\r\n                background: 'rgba(26, 26, 26, 0.7)',\r\n                backdropFilter: 'blur(40px) saturate(180%)',\r\n                WebkitBackdropFilter: 'blur(40px) saturate(180%)',\r\n                border: '1px solid rgba(127, 255, 212, 0.1)',\r\n                borderRadius: '24px',\r\n                width: '100%',\r\n                maxWidth: '900px',\r\n                maxHeight: '90vh',\r\n                display: 'flex',\r\n                flexDirection: 'column',\r\n                overflow: 'hidden',\r\n                boxShadow: '0 8px 32px rgba(0, 0, 0, 0.4), 0 0 0 1px rgba(255, 255, 255, 0.05) inset',\r\n                position: 'relative',\r\n                zIndex: 1\r\n            }}>\r\n                {/* Header & Tabs Unified */}\r\n                <div style={{\r\n                    background: 'rgba(255, 255, 255, 0.02)',\r\n                    borderBottom: '1px solid rgba(127, 255, 212, 0.1)'\r\n                }}>\r\n                    {/* Top Bar: Title & Close */}\r\n                    <div style={{\r\n                        padding: '1.5rem 1.5rem 0.5rem 1.5rem',\r\n                        display: 'flex',\r\n                        justifyContent: 'space-between',\r\n                        alignItems: 'center'\r\n                    }}>\r\n                        <h2 style={{ margin: 0, fontSize: '1.5rem', fontWeight: '600' }}>Create SpaceCard</h2>\r\n                        <button onClick={onClose} style={{\r\n                            background: 'rgba(255, 255, 255, 0.1)',\r\n                            backdropFilter: 'blur(10px)',\r\n                            border: '1px solid rgba(255, 255, 255, 0.1)',\r\n                            borderRadius: '50%',\r\n                            width: '36px',\r\n                            height: '36px',\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            justifyContent: 'center',\r\n                            color: '#fff',\r\n                            cursor: 'pointer',\r\n                            fontSize: '1.25rem',\r\n                            transition: 'all 0.2s',\r\n                        }}\r\n                            onMouseEnter={(e) => {\r\n                                e.currentTarget.style.background = 'rgba(255, 255, 255, 0.15)';\r\n                                e.currentTarget.style.transform = 'scale(1.05)';\r\n                            }}\r\n                            onMouseLeave={(e) => {\r\n                                e.currentTarget.style.background = 'rgba(255, 255, 255, 0.1)';\r\n                                e.currentTarget.style.transform = 'scale(1)';\r\n                            }}>\r\n                            <FaTimes />\r\n                        </button>\r\n                    </div>\r\n\r\n                    {/* Step Indicator (Tabs) - Centered */}\r\n                    <div style={{\r\n                        display: 'flex',\r\n                        padding: '0.5rem 1.5rem 1.5rem 1.5rem',\r\n                        gap: '1rem',\r\n                        justifyContent: 'center',\r\n                        flexWrap: 'wrap'\r\n                    }}>\r\n                        {['Select Image', 'Card Details', 'Preview'].map((label, idx) => (\r\n                            <div key={idx} style={{\r\n                                flex: '0 1 auto',\r\n                                minWidth: '120px',\r\n                                textAlign: 'center',\r\n                                padding: '0.75rem 1rem',\r\n                                borderRadius: '12px',\r\n                                background: step === idx + 1\r\n                                    ? 'rgba(127, 255, 212, 0.15)'\r\n                                    : 'rgba(255, 255, 255, 0.03)',\r\n                                backdropFilter: step === idx + 1 ? 'blur(10px)' : 'none',\r\n                                color: step === idx + 1 ? '#7FFFD4' : '#888',\r\n                                fontWeight: step === idx + 1 ? '600' : '400',\r\n                                border: step === idx + 1\r\n                                    ? '1px solid rgba(127, 255, 212, 0.3)'\r\n                                    : '1px solid rgba(255, 255, 255, 0.05)',\r\n                                transition: 'all 0.3s ease',\r\n                                boxShadow: step === idx + 1\r\n                                    ? '0 4px 12px rgba(127, 255, 212, 0.2)'\r\n                                    : 'none',\r\n                                cursor: 'default'\r\n                            }}>\r\n                                {idx + 1}. {label}\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Content */}\r\n                <div style={{ flex: 1, overflowY: 'auto', padding: '1.5rem' }}>\r\n                    {/* Step 1: Select Image */}\r\n                    {step === 1 && (\r\n                        <div>\r\n                            <div style={{ display: 'flex', gap: '1rem', marginBottom: '1.5rem' }}>\r\n                                <button\r\n                                    onClick={() => setActiveTab('published')}\r\n                                    style={{\r\n                                        padding: '0.75rem 1.5rem',\r\n                                        background: activeTab === 'published' ? '#7FFFD4' : '#222',\r\n                                        color: activeTab === 'published' ? '#000' : '#888',\r\n                                        border: 'none',\r\n                                        borderRadius: '8px',\r\n                                        fontWeight: '600',\r\n                                        cursor: 'pointer',\r\n                                        display: 'flex',\r\n                                        alignItems: 'center',\r\n                                        gap: '0.5rem'\r\n                                    }}\r\n                                >\r\n                                    <FaRocket /> Published Posts\r\n                                </button>\r\n                                <button\r\n                                    onClick={() => setActiveTab('drafts')}\r\n                                    style={{\r\n                                        padding: '0.75rem 1.5rem',\r\n                                        background: activeTab === 'drafts' ? '#7FFFD4' : '#222',\r\n                                        color: activeTab === 'drafts' ? '#000' : '#888',\r\n                                        border: 'none',\r\n                                        borderRadius: '8px',\r\n                                        fontWeight: '600',\r\n                                        cursor: 'pointer',\r\n                                        display: 'flex',\r\n                                        alignItems: 'center',\r\n                                        gap: '0.5rem'\r\n                                    }}\r\n                                >\r\n                                    <FaFileAlt /> Drafts\r\n                                </button>\r\n                                <button\r\n                                    onClick={() => setActiveTab('upload')}\r\n                                    style={{\r\n                                        padding: '0.75rem 1.5rem',\r\n                                        background: activeTab === 'upload' ? '#7FFFD4' : '#222',\r\n                                        color: activeTab === 'upload' ? '#000' : '#888',\r\n                                        border: 'none',\r\n                                        borderRadius: '8px',\r\n                                        fontWeight: '600',\r\n                                        cursor: 'pointer',\r\n                                        display: 'flex',\r\n                                        alignItems: 'center',\r\n                                        gap: '0.5rem'\r\n                                    }}\r\n                                >\r\n                                    <FaUpload /> Upload Image\r\n                                </button>\r\n                            </div>\r\n\r\n\r\n                            {activeTab !== 'upload' ? (\r\n                                <>\r\n                                    <h3 style={{ marginTop: 0 }}>Select an image from your {activeTab}</h3>\r\n                                    <div style={{\r\n                                        display: 'grid',\r\n                                        gridTemplateColumns: 'repeat(auto-fill, minmax(150px, 1fr))',\r\n                                        gap: '1rem'\r\n                                    }}>\r\n                                        {userPosts.map(post => (\r\n                                            <div\r\n                                                key={post.id}\r\n                                                onClick={() => handlePostSelect(post)}\r\n                                                style={{\r\n                                                    aspectRatio: '1',\r\n                                                    borderRadius: '8px',\r\n                                                    overflow: 'hidden',\r\n                                                    cursor: 'pointer',\r\n                                                    border: selectedPost?.id === post.id ? '3px solid #7FFFD4' : '1px solid #333',\r\n                                                    position: 'relative'\r\n                                                }}\r\n                                            >\r\n                                                <img\r\n                                                    src={post.downloadURL || post.images?.[0]?.url}\r\n                                                    alt={post.title}\r\n                                                    style={{ width: '100%', height: '100%', objectFit: 'cover' }}\r\n                                                />\r\n                                                {selectedPost?.id === post.id && (\r\n                                                    <div style={{\r\n                                                        position: 'absolute',\r\n                                                        top: '0.5rem',\r\n                                                        right: '0.5rem',\r\n                                                        background: '#7FFFD4',\r\n                                                        color: '#000',\r\n                                                        borderRadius: '50%',\r\n                                                        width: '24px',\r\n                                                        height: '24px',\r\n                                                        display: 'flex',\r\n                                                        alignItems: 'center',\r\n                                                        justifyContent: 'center',\r\n                                                        fontWeight: 'bold'\r\n                                                    }}>Γ£ô</div>\r\n                                                )}\r\n                                            </div>\r\n                                        ))}\r\n                                    </div>\r\n                                    {userPosts.length === 0 && (\r\n                                        <div style={{ textAlign: 'center', padding: '3rem', color: '#666' }}>\r\n                                            <FaImage size={48} style={{ marginBottom: '1rem', opacity: 0.5 }} />\r\n                                            <div>No {activeTab} found.</div>\r\n                                        </div>\r\n                                    )}\r\n                                </>\r\n                            ) : (\r\n                                <>\r\n                                    <h3 style={{ marginTop: 0 }}>Upload an Image</h3>\r\n                                    <input\r\n                                        ref={fileInputRef}\r\n                                        type=\"file\"\r\n                                        accept=\"image/*\"\r\n                                        onChange={handleFileSelect}\r\n                                        style={{ display: 'none' }}\r\n                                    />\r\n                                    <div\r\n                                        onClick={() => fileInputRef.current?.click()}\r\n                                        style={{\r\n                                            border: '2px dashed #444',\r\n                                            borderRadius: '12px',\r\n                                            padding: '3rem',\r\n                                            textAlign: 'center',\r\n                                            cursor: 'pointer',\r\n                                            background: uploadPreview ? 'transparent' : '#1a1a1a',\r\n                                            transition: 'all 0.2s',\r\n                                            position: 'relative',\r\n                                            minHeight: '300px',\r\n                                            display: 'flex',\r\n                                            alignItems: 'center',\r\n                                            justifyContent: 'center'\r\n                                        }}\r\n                                    >\r\n                                        {uploadPreview ? (\r\n                                            <img\r\n                                                src={uploadPreview}\r\n                                                alt=\"Preview\"\r\n                                                style={{\r\n                                                    maxWidth: '100%',\r\n                                                    maxHeight: '400px',\r\n                                                    borderRadius: '8px'\r\n                                                }}\r\n                                            />\r\n                                        ) : (\r\n                                            <div>\r\n                                                <FaUpload size={48} style={{ marginBottom: '1rem', color: '#7FFFD4' }} />\r\n                                                <div style={{ fontSize: '1.1rem', fontWeight: '600', marginBottom: '0.5rem' }}>\r\n                                                    Click to upload an image\r\n                                                </div>\r\n                                                <div style={{ color: '#666', fontSize: '0.9rem' }}>\r\n                                                    JPG, PNG, or GIF\r\n                                                </div>\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n\r\n                                    {/* Post to Feed Checkbox */}\r\n                                    {uploadedFile && (\r\n                                        <div style={{\r\n                                            marginTop: '1.5rem',\r\n                                            padding: '1rem',\r\n                                            background: '#222',\r\n                                            borderRadius: '8px',\r\n                                            border: '1px solid #333'\r\n                                        }}>\r\n                                            <label style={{\r\n                                                display: 'flex',\r\n                                                alignItems: 'center',\r\n                                                gap: '0.75rem',\r\n                                                cursor: 'pointer'\r\n                                            }}>\r\n                                                <input\r\n                                                    type=\"checkbox\"\r\n                                                    checked={postToFeed}\r\n                                                    onChange={(e) => setPostToFeed(e.target.checked)}\r\n                                                    style={{\r\n                                                        width: '18px',\r\n                                                        height: '18px',\r\n                                                        cursor: 'pointer',\r\n                                                        accentColor: '#7FFFD4'\r\n                                                    }}\r\n                                                />\r\n                                                <div>\r\n                                                    <div style={{ fontWeight: '600', marginBottom: '0.25rem' }}>\r\n                                                        Post to Feed\r\n                                                    </div>\r\n                                                    <div style={{ fontSize: '0.85rem', color: '#888' }}>\r\n                                                        Also create a post on your profile with this image\r\n                                                    </div>\r\n                                                </div>\r\n                                            </label>\r\n                                        </div>\r\n                                    )}\r\n                                </>\r\n                            )}\r\n\r\n                            {/* Crop Preview - Show when image is selected */}\r\n                            {(selectedPost || uploadedFile) && frontImage && (\r\n                                <div style={{ marginTop: '2rem' }}>\r\n                                    <div style={{\r\n                                        display: 'flex',\r\n                                        justifyContent: 'space-between',\r\n                                        alignItems: 'center',\r\n                                        marginBottom: '1rem'\r\n                                    }}>\r\n                                        <h3 style={{ margin: 0 }}>Position Your Image</h3>\r\n                                        <button\r\n                                            onClick={() => setImagePosition({ x: 50, y: 50 })}\r\n                                            style={{\r\n                                                padding: '0.5rem 1rem',\r\n                                                background: 'rgba(127, 255, 212, 0.1)',\r\n                                                border: '1px solid rgba(127, 255, 212, 0.3)',\r\n                                                borderRadius: '8px',\r\n                                                color: '#7FFFD4',\r\n                                                cursor: 'pointer',\r\n                                                fontSize: '0.9rem',\r\n                                                fontWeight: '600',\r\n                                                transition: 'all 0.2s'\r\n                                            }}\r\n                                            onMouseEnter={(e) => {\r\n                                                e.currentTarget.style.background = 'rgba(127, 255, 212, 0.2)';\r\n                                            }}\r\n                                            onMouseLeave={(e) => {\r\n                                                e.currentTarget.style.background = 'rgba(127, 255, 212, 0.1)';\r\n                                            }}\r\n                                        >\r\n                                            Reset Position\r\n                                        </button>\r\n                                    </div>\r\n\r\n                                    <div style={{\r\n                                        display: 'flex',\r\n                                        gap: '2rem',\r\n                                        alignItems: 'flex-start',\r\n                                        flexWrap: 'wrap'\r\n                                    }}>\r\n                                        {/* Crop Box */}\r\n                                        <div style={{ flex: '1 1 300px', minWidth: '300px' }}>\r\n                                            <div\r\n                                                onMouseDown={handleMouseDown}\r\n                                                onMouseMove={handleMouseMove}\r\n                                                onMouseUp={handleMouseUp}\r\n                                                onMouseLeave={handleMouseUp}\r\n                                                onTouchStart={(e) => {\r\n                                                    const touch = e.touches[0];\r\n                                                    handleMouseDown({\r\n                                                        preventDefault: () => e.preventDefault(),\r\n                                                        clientX: touch.clientX,\r\n                                                        clientY: touch.clientY\r\n                                                    });\r\n                                                }}\r\n                                                onTouchMove={(e) => {\r\n                                                    const touch = e.touches[0];\r\n                                                    handleMouseMove({\r\n                                                        preventDefault: () => e.preventDefault(),\r\n                                                        clientX: touch.clientX,\r\n                                                        clientY: touch.clientY\r\n                                                    });\r\n                                                }}\r\n                                                onTouchEnd={handleMouseUp}\r\n                                                style={{\r\n                                                    position: 'relative',\r\n                                                    aspectRatio: '2/3',\r\n                                                    maxWidth: '400px',\r\n                                                    margin: '0 auto',\r\n                                                    borderRadius: '12px',\r\n                                                    overflow: 'hidden',\r\n                                                    border: '2px solid #7FFFD4',\r\n                                                    boxShadow: '0 0 20px rgba(127, 255, 212, 0.3), inset 0 0 20px rgba(0, 0, 0, 0.5)',\r\n                                                    cursor: isDragging ? 'grabbing' : 'grab',\r\n                                                    userSelect: 'none',\r\n                                                    WebkitUserSelect: 'none',\r\n                                                    background: '#000'\r\n                                                }}\r\n                                            >\r\n                                                {/* Image */}\r\n                                                <img\r\n                                                    src={frontImage}\r\n                                                    alt=\"Crop preview\"\r\n                                                    draggable={false}\r\n                                                    style={{\r\n                                                        position: 'absolute',\r\n                                                        width: '100%',\r\n                                                        height: '100%',\r\n                                                        objectFit: 'cover',\r\n                                                        objectPosition: `${imagePosition.x}% ${imagePosition.y}% `,\r\n                                                        pointerEvents: 'none',\r\n                                                        transition: isDragging ? 'none' : 'object-position 0.1s ease-out'\r\n                                                    }}\r\n                                                />\r\n\r\n                                                {/* Grid Overlay */}\r\n                                                <div style={{\r\n                                                    position: 'absolute',\r\n                                                    inset: 0,\r\n                                                    background: `\r\n    linear - gradient(to right, rgba(127, 255, 212, 0.1) 1px, transparent 1px),\r\n        linear - gradient(to bottom, rgba(127, 255, 212, 0.1) 1px, transparent 1px)\r\n            `,\r\n                                                    backgroundSize: '33.33% 33.33%',\r\n                                                    pointerEvents: 'none',\r\n                                                    opacity: 0.5\r\n                                                }} />\r\n\r\n                                                {/* Center Crosshair */}\r\n                                                <div style={{\r\n                                                    position: 'absolute',\r\n                                                    top: '50%',\r\n                                                    left: '50%',\r\n                                                    width: '20px',\r\n                                                    height: '20px',\r\n                                                    transform: 'translate(-50%, -50%)',\r\n                                                    pointerEvents: 'none'\r\n                                                }}>\r\n                                                    <div style={{\r\n                                                        position: 'absolute',\r\n                                                        top: '50%',\r\n                                                        left: 0,\r\n                                                        right: 0,\r\n                                                        height: '1px',\r\n                                                        background: 'rgba(127, 255, 212, 0.5)'\r\n                                                    }} />\r\n                                                    <div style={{\r\n                                                        position: 'absolute',\r\n                                                        left: '50%',\r\n                                                        top: 0,\r\n                                                        bottom: 0,\r\n                                                        width: '1px',\r\n                                                        background: 'rgba(127, 255, 212, 0.5)'\r\n                                                    }} />\r\n                                                </div>\r\n                                            </div>\r\n\r\n                                            <div style={{\r\n                                                marginTop: '1rem',\r\n                                                padding: '0.75rem',\r\n                                                background: 'rgba(127, 255, 212, 0.05)',\r\n                                                border: '1px solid rgba(127, 255, 212, 0.2)',\r\n                                                borderRadius: '8px',\r\n                                                fontSize: '0.85rem',\r\n                                                color: '#aaa',\r\n                                                textAlign: 'center'\r\n                                            }}>\r\n                                                <strong style={{ color: '#7FFFD4' }}>≡ƒÆí Tip:</strong> Drag the image to reposition it within the card frame\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        {/* Info Panel */}\r\n                                        <div style={{\r\n                                            flex: '1 1 250px',\r\n                                            background: 'rgba(255, 255, 255, 0.02)',\r\n                                            padding: '1.5rem',\r\n                                            borderRadius: '12px',\r\n                                            border: '1px solid rgba(255, 255, 255, 0.05)'\r\n                                        }}>\r\n                                            <h4 style={{\r\n                                                margin: '0 0 1rem 0',\r\n                                                color: '#7FFFD4',\r\n                                                fontSize: '1rem'\r\n                                            }}>\r\n                                                Card Preview\r\n                                            </h4>\r\n                                            <div style={{\r\n                                                display: 'flex',\r\n                                                flexDirection: 'column',\r\n                                                gap: '0.75rem',\r\n                                                fontSize: '0.9rem',\r\n                                                color: '#ccc'\r\n                                            }}>\r\n                                                <div>\r\n                                                    <strong>Aspect Ratio:</strong> 2:3 (Card Standard)\r\n                                                </div>\r\n                                                <div>\r\n                                                    <strong>Position:</strong> {Math.round(imagePosition.x)}%, {Math.round(imagePosition.y)}%\r\n                                                </div>\r\n                                                <div style={{\r\n                                                    marginTop: '0.5rem',\r\n                                                    padding: '0.75rem',\r\n                                                    background: 'rgba(127, 255, 212, 0.05)',\r\n                                                    borderRadius: '6px',\r\n                                                    fontSize: '0.85rem',\r\n                                                    lineHeight: '1.5'\r\n                                                }}>\r\n                                                    The area shown in the crop box is what will appear on your Space Card. Drag to adjust the framing.\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Step 2: Card Details */}\r\n                    {step === 2 && (\r\n                        <div style={{ display: 'flex', flexDirection: 'column', gap: '1.5rem' }}>\r\n                            {/* Card Type Selector */}\r\n                            <div style={{ background: '#222', padding: '1rem', borderRadius: '8px', border: '1px solid #333' }}>\r\n                                <label style={{ display: 'block', marginBottom: '1rem', fontWeight: '600' }}>Card Type</label>\r\n                                <div style={{ display: 'flex', gap: '1rem' }}>\r\n                                    <button\r\n                                        onClick={() => setCardType('official')}\r\n                                        style={{\r\n                                            flex: 1,\r\n                                            padding: '1rem',\r\n                                            background: cardType === 'official' ? 'rgba(127, 255, 212, 0.1)' : 'transparent',\r\n                                            border: cardType === 'official' ? '1px solid #7FFFD4' : '1px solid #444',\r\n                                            borderRadius: '8px',\r\n                                            color: cardType === 'official' ? '#7FFFD4' : '#888',\r\n                                            cursor: 'pointer',\r\n                                            fontWeight: '600'\r\n                                        }}\r\n                                    >\r\n                                        Official Card (Auto-Rarity)\r\n                                    </button>\r\n                                    <button\r\n                                        onClick={() => setCardType('custom')}\r\n                                        style={{\r\n                                            flex: 1,\r\n                                            padding: '1rem',\r\n                                            background: cardType === 'custom' ? 'rgba(127, 255, 212, 0.1)' : 'transparent',\r\n                                            border: cardType === 'custom' ? '1px solid #7FFFD4' : '1px solid #444',\r\n                                            borderRadius: '8px',\r\n                                            color: cardType === 'custom' ? '#7FFFD4' : '#888',\r\n                                            cursor: 'pointer',\r\n                                            fontWeight: '600'\r\n                                        }}\r\n                                    >\r\n                                        Custom Card\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Official Card UI */}\r\n                            {cardType === 'official' && (\r\n                                <div style={{ background: '#222', padding: '1rem', borderRadius: '8px', border: '1px solid #333' }}>\r\n                                    <label style={{ display: 'block', marginBottom: '1rem', fontWeight: '600' }}>Official Category</label>\r\n                                    <select\r\n                                        value={officialCategory}\r\n                                        onChange={(e) => {\r\n                                            setOfficialCategory(e.target.value);\r\n                                            setSelectedTag('');\r\n                                            setSearchTerm('');\r\n                                        }}\r\n                                        style={{\r\n                                            width: '100%',\r\n                                            padding: '0.75rem',\r\n                                            background: '#1a1a1a',\r\n                                            border: '1px solid #444',\r\n                                            borderRadius: '8px',\r\n                                            color: '#fff',\r\n                                            fontSize: '1rem',\r\n                                            marginBottom: '1.5rem'\r\n                                        }}\r\n                                    >\r\n                                        <option value={CARD_CATEGORIES.ANIMALS}>Animals</option>\r\n                                        <option value={CARD_CATEGORIES.BUGS}>Bugs & Insects</option>\r\n                                        <option value={CARD_CATEGORIES.TERRAIN}>Terrain / Landforms</option>\r\n                                        <option value={CARD_CATEGORIES.NATIONAL_PARKS}>National Parks</option>\r\n                                        <option value={CARD_CATEGORIES.STATE_PARKS}>State Parks</option>\r\n                                    </select>\r\n\r\n                                    {/* Tag Selection UI */}\r\n                                    <label style={{ display: 'block', marginBottom: '0.5rem', fontWeight: '600' }}>\r\n                                        Select {officialCategory === CARD_CATEGORIES.ANIMALS ? 'Animal' :\r\n                                            officialCategory === CARD_CATEGORIES.BUGS ? 'Bug/Insect' :\r\n                                                officialCategory === CARD_CATEGORIES.TERRAIN ? 'Terrain' : 'Park'}\r\n                                    </label>\r\n\r\n                                    {/* Search Input - Now available for ALL categories */}\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        value={searchTerm}\r\n                                        onChange={(e) => setSearchTerm(e.target.value)}\r\n                                        placeholder={`Search for ${officialCategory === CARD_CATEGORIES.ANIMALS ? 'an animal' :\r\n                                            officialCategory === CARD_CATEGORIES.BUGS ? 'a bug' :\r\n                                                officialCategory === CARD_CATEGORIES.TERRAIN ? 'terrain' : 'a park'}...`}\r\n                                        style={{\r\n                                            width: '100%',\r\n                                            padding: '0.75rem',\r\n                                            background: '#1a1a1a',\r\n                                            border: '1px solid #444',\r\n                                            borderRadius: '8px',\r\n                                            color: '#fff',\r\n                                            marginBottom: '1rem'\r\n                                        }}\r\n                                    />\r\n\r\n                                    {/* Horizontal Scrolling Tag List - Unified for ALL categories */}\r\n                                    <div style={{\r\n                                        display: 'grid',\r\n                                        gridTemplateRows: 'repeat(3, min-content)', // 3 rows as requested\r\n                                        gridAutoFlow: 'column',\r\n                                        gridAutoColumns: 'max-content',\r\n                                        gap: '0.5rem',\r\n                                        overflowX: 'auto', // Horizontal scroll\r\n                                        overflowY: 'hidden',\r\n                                        paddingBottom: '0.75rem', // Space for scrollbar\r\n                                        marginBottom: '0.5rem',\r\n                                        scrollbarWidth: 'thin',\r\n                                        scrollbarColor: '#7FFFD4 #222',\r\n                                        height: 'auto',\r\n                                        maxHeight: '160px' // Approximate height for 3 rows + scrollbar\r\n                                    }}>\r\n                                        {filteredTags.map(tagItem => {\r\n                                            // Handle both string tags (Animals/Bugs/Terrain) and object tags (Parks)\r\n                                            const isObject = typeof tagItem === 'object';\r\n                                            const key = isObject ? tagItem.key : tagItem;\r\n                                            const label = isObject ? tagItem.label : getTagLabel(officialCategory, tagItem);\r\n\r\n                                            return (\r\n                                                <button\r\n                                                    key={key}\r\n                                                    onClick={() => {\r\n                                                        setSelectedTag(key);\r\n                                                        if (isObject) setSearchTerm(label);\r\n                                                    }}\r\n                                                    style={{\r\n                                                        padding: '0.5rem 1rem',\r\n                                                        borderRadius: '20px',\r\n                                                        background: selectedTag === key ? '#7FFFD4' : '#333',\r\n                                                        color: selectedTag === key ? '#000' : '#ccc',\r\n                                                        border: 'none',\r\n                                                        cursor: 'pointer',\r\n                                                        fontSize: '0.9rem',\r\n                                                        flex: '0 0 auto', // Prevent shrinking\r\n                                                        whiteSpace: 'nowrap', // Keep text on one line\r\n                                                        display: 'flex',\r\n                                                        alignItems: 'center',\r\n                                                        gap: '0.5rem'\r\n                                                    }}\r\n                                                >\r\n                                                    {/* Add icons for parks if applicable */}\r\n                                                    {isObject && (\r\n                                                        <span style={{ fontSize: '0.8rem' }}>\r\n                                                            {tagItem.type === 'national' ? '≡ƒÅö∩╕Å' : '≡ƒî▓'}\r\n                                                        </span>\r\n                                                    )}\r\n                                                    {label}\r\n                                                </button>\r\n                                            );\r\n                                        })}\r\n                                        {filteredTags.length === 0 && (\r\n                                            <div style={{ width: '100%', padding: '1rem', color: '#666', textAlign: 'center' }}>\r\n                                                No matches found\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n\r\n                                    {selectedTag && (\r\n                                        <div style={{ marginTop: '1rem', padding: '0.75rem', background: 'rgba(127, 255, 212, 0.05)', borderRadius: '8px', border: '1px solid rgba(127, 255, 212, 0.2)' }}>\r\n                                            <div style={{ fontSize: '0.9rem', color: '#888' }}>Auto-Assigned Rarity</div>\r\n                                            <div style={{ fontWeight: 'bold', color: RARITY_TIERS[rarity]?.color || '#fff' }}>{rarity}</div>\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            )}\r\n\r\n                            {/* Custom Card UI */}\r\n                            {cardType === 'custom' && (\r\n                                <div style={{ background: '#222', padding: '1rem', borderRadius: '8px', border: '1px solid #333' }}>\r\n                                    <div style={{ marginBottom: '1.5rem' }}>\r\n                                        <label style={{ display: 'block', marginBottom: '0.5rem', fontWeight: '600' }}>Custom Tag</label>\r\n                                        <input\r\n                                            type=\"text\"\r\n                                            value={customTag}\r\n                                            onChange={(e) => setCustomTag(e.target.value)}\r\n                                            placeholder=\"Enter a tag (e.g., 'Street Art', 'Portrait')\"\r\n                                            style={{\r\n                                                width: '100%',\r\n                                                padding: '0.75rem',\r\n                                                background: '#1a1a1a',\r\n                                                border: '1px solid #444',\r\n                                                borderRadius: '8px',\r\n                                                color: '#fff'\r\n                                            }}\r\n                                        />\r\n                                    </div>\r\n\r\n                                    <div>\r\n                                        <label style={{ display: 'block', marginBottom: '0.5rem', fontWeight: '600' }}>\r\n                                            Select Rarity <FaStar style={{ color: RARITY_TIERS[rarity].color, marginLeft: '0.5rem' }} />\r\n                                        </label>\r\n                                        <div style={{ display: 'grid', gridTemplateColumns: 'repeat(3, 1fr)', gap: '0.5rem' }}>\r\n                                            {Object.keys(RARITY_TIERS).map(rarityTier => (\r\n                                                <button\r\n                                                    key={rarityTier}\r\n                                                    onClick={() => setRarity(rarityTier)}\r\n                                                    style={{\r\n                                                        padding: '0.75rem',\r\n                                                        background: rarity === rarityTier ? RARITY_TIERS[rarityTier].color : '#1a1a1a',\r\n                                                        color: rarity === rarityTier ? '#000' : RARITY_TIERS[rarityTier].color,\r\n                                                        border: `2px solid ${RARITY_TIERS[rarityTier].color} `,\r\n                                                        borderRadius: '8px',\r\n                                                        cursor: 'pointer',\r\n                                                        fontWeight: '600',\r\n                                                        transition: 'all 0.2s'\r\n                                                    }}\r\n                                                >\r\n                                                    {rarityTier}\r\n                                                </button>\r\n                                            ))}\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n\r\n                            {/* Common Fields */}\r\n                            <div>\r\n                                <label style={{ display: 'block', marginBottom: '0.5rem', fontWeight: '600' }}>Card Title *</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={title}\r\n                                    onChange={(e) => setTitle(e.target.value)}\r\n                                    placeholder=\"Enter card title\"\r\n                                    style={{\r\n                                        width: '100%',\r\n                                        padding: '0.75rem',\r\n                                        background: '#222',\r\n                                        border: '1px solid #333',\r\n                                        borderRadius: '8px',\r\n                                        color: '#fff',\r\n                                        fontSize: '1rem'\r\n                                    }}\r\n                                />\r\n                            </div>\r\n\r\n                            <div>\r\n                                <label style={{ display: 'block', marginBottom: '0.5rem', fontWeight: '600' }}>Description</label>\r\n                                <textarea\r\n                                    value={description}\r\n                                    onChange={(e) => setDescription(e.target.value)}\r\n                                    placeholder=\"Describe your card\"\r\n                                    rows={3}\r\n                                    style={{\r\n                                        width: '100%',\r\n                                        padding: '0.75rem',\r\n                                        background: '#222',\r\n                                        border: '1px solid #333',\r\n                                        borderRadius: '8px',\r\n                                        color: '#fff',\r\n                                        fontSize: '1rem',\r\n                                        resize: 'vertical'\r\n                                    }}\r\n                                />\r\n                            </div>\r\n\r\n                            <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '1rem' }}>\r\n                                <div>\r\n                                    <label style={{ display: 'block', marginBottom: '0.5rem', fontWeight: '600' }}>Discipline</label>\r\n                                    <select\r\n                                        value={discipline}\r\n                                        onChange={(e) => setDiscipline(e.target.value)}\r\n                                        style={{\r\n                                            width: '100%',\r\n                                            padding: '0.75rem',\r\n                                            background: '#222',\r\n                                            border: '1px solid #333',\r\n                                            borderRadius: '8px',\r\n                                            color: '#fff',\r\n                                            fontSize: '1rem'\r\n                                        }}\r\n                                    >\r\n                                        {Object.values(CARD_DISCIPLINES).map(disc => (\r\n                                            <option key={disc} value={disc}>{disc}</option>\r\n                                        ))}\r\n                                    </select>\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <label style={{ display: 'block', marginBottom: '0.5rem', fontWeight: '600' }}>Card Style</label>\r\n                                    <select\r\n                                        value={cardStyle}\r\n                                        onChange={(e) => setCardStyle(e.target.value)}\r\n                                        style={{\r\n                                            width: '100%',\r\n                                            padding: '0.75rem',\r\n                                            background: '#222',\r\n                                            border: '1px solid #333',\r\n                                            borderRadius: '8px',\r\n                                            color: '#fff',\r\n                                            fontSize: '1rem'\r\n                                        }}\r\n                                    >\r\n                                        {Object.values(CARD_STYLES).map(style => (\r\n                                            <option key={style} value={style}>{style}</option>\r\n                                        ))}\r\n                                    </select>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div>\r\n                                <label style={{ display: 'block', marginBottom: '0.5rem', fontWeight: '600' }}>Edition Type</label>\r\n                                <select\r\n                                    value={editionType}\r\n                                    onChange={(e) => setEditionType(e.target.value)}\r\n                                    style={{\r\n                                        width: '100%',\r\n                                        padding: '0.75rem',\r\n                                        background: '#222',\r\n                                        border: '1px solid #333',\r\n                                        borderRadius: '8px',\r\n                                        color: '#fff',\r\n                                        fontSize: '1rem'\r\n                                    }}\r\n                                >\r\n                                    <option value={EDITION_TYPES.UNLIMITED}>Unlimited (Not Tradable)</option>\r\n                                    <option value={EDITION_TYPES.LIMITED}>Limited Edition (Tradable)</option>\r\n                                    <option value={EDITION_TYPES.TIMED}>Timed Edition (Tradable)</option>\r\n                                    <option value={EDITION_TYPES.CHALLENGE}>Challenge Reward</option>\r\n                                    <option value={EDITION_TYPES.CONTEST}>Contest Prize</option>\r\n                                </select>\r\n\r\n                                {/* Copyright Warning for Tradable Items */}\r\n                                {(editionType === EDITION_TYPES.LIMITED || editionType === EDITION_TYPES.TIMED) && (\r\n                                    <div style={{\r\n                                        marginTop: '0.75rem',\r\n                                        padding: '0.75rem',\r\n                                        background: 'rgba(255, 165, 0, 0.1)',\r\n                                        border: '1px solid rgba(255, 165, 0, 0.3)',\r\n                                        borderRadius: '6px',\r\n                                        fontSize: '0.75rem',\r\n                                        color: '#ffb84d',\r\n                                        lineHeight: '1.4'\r\n                                    }}>\r\n                                        ΓÜá∩╕Å <strong>Copyright Notice:</strong> By listing this item, you certify that you own all rights to this content. Unauthorized sale of copyrighted material is prohibited.\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n\r\n                            {editionType === EDITION_TYPES.LIMITED && (\r\n                                <div>\r\n                                    <label style={{ display: 'block', marginBottom: '0.5rem', fontWeight: '600' }}>Edition Size</label>\r\n                                    <input\r\n                                        type=\"number\"\r\n                                        value={editionSize}\r\n                                        onChange={(e) => setEditionSize(parseInt(e.target.value))}\r\n                                        min=\"1\"\r\n                                        max=\"10000\"\r\n                                        style={{\r\n                                            width: '100%',\r\n                                            padding: '0.75rem',\r\n                                            background: '#222',\r\n                                            border: '1px solid #333',\r\n                                            borderRadius: '8px',\r\n                                            color: '#fff',\r\n                                            fontSize: '1rem'\r\n                                        }}\r\n                                    />\r\n                                </div>\r\n                            )}\r\n\r\n                            <div>\r\n                                {/* SHOP INTEGRATION TOGGLE */}\r\n                                <div style={{\r\n                                    marginTop: '1.5rem',\r\n                                    padding: '1rem',\r\n                                    background: '#222',\r\n                                    borderRadius: '8px',\r\n                                    border: '1px solid #333'\r\n                                }}>\r\n                                    <label style={{\r\n                                        display: 'flex',\r\n                                        alignItems: 'center',\r\n                                        gap: '0.75rem',\r\n                                        cursor: 'pointer'\r\n                                    }}>\r\n                                        <input\r\n                                            type=\"checkbox\"\r\n                                            checked={addToShopDraft}\r\n                                            onChange={(e) => setAddToShopDraft(e.target.checked)}\r\n                                            style={{\r\n                                                width: '18px',\r\n                                                height: '18px',\r\n                                                cursor: 'pointer',\r\n                                                accentColor: '#7FFFD4'\r\n                                            }}\r\n                                        />\r\n                                        <div>\r\n                                            <div style={{ fontWeight: '600', marginBottom: '0.25rem', color: '#fff' }}>\r\n                                                Add to Shop as Draft\r\n                                            </div>\r\n                                            <div style={{ fontSize: '0.85rem', color: '#888' }}>\r\n                                                Create a draft listing in your shop to sell this card later.\r\n                                            </div>\r\n                                        </div>\r\n                                    </label>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Step 3: Preview */}\r\n                    {step === 3 && (\r\n                        <div style={{ display: 'flex', gap: '2rem', alignItems: 'flex-start' }}>\r\n                            <div style={{ flex: 1 }}>\r\n                                <h3>Card Preview</h3>\r\n                                <div style={{\r\n                                    aspectRatio: '2/3',\r\n                                    borderRadius: '12px',\r\n                                    overflow: 'hidden',\r\n                                    border: RARITY_TIERS[rarity].border,\r\n                                    boxShadow: RARITY_TIERS[rarity].glow ? `0 0 20px ${RARITY_TIERS[rarity].color} ` : 'none',\r\n                                    background: '#000'\r\n                                }}>\r\n                                    <img src={frontImage} alt={title} style={{\r\n                                        width: '100%',\r\n                                        height: '100%',\r\n                                        objectFit: 'cover',\r\n                                        objectPosition: `${imagePosition.x}% ${imagePosition.y}% `\r\n                                    }} />\r\n                                </div>\r\n                            </div>\r\n                            <div style={{ flex: 1 }}>\r\n                                <h3>Card Details</h3>\r\n                                <div style={{ display: 'flex', flexDirection: 'column', gap: '1rem', color: '#ccc' }}>\r\n                                    <div><strong>Title:</strong> {title}</div>\r\n                                    <div><strong>Type:</strong> {cardType === 'official' ? 'Official' : 'Custom'}</div>\r\n                                    <div><strong>Tag:</strong> {cardType === 'official' ? getTagLabel(officialCategory, selectedTag) : customTag}</div>\r\n                                    <div><strong>Discipline:</strong> {discipline}</div>\r\n                                    <div><strong>Rarity:</strong> <span style={{ color: RARITY_TIERS[rarity].color }}>{rarity}</span></div>\r\n                                    <div><strong>Edition:</strong> {editionType === EDITION_TYPES.LIMITED ? `Limited(${editionSize})` : editionType}</div>\r\n                                    <div><strong>Edition:</strong> {editionType === EDITION_TYPES.LIMITED ? `Limited(${editionSize})` : editionType}</div>\r\n                                    {/* <div><strong>Price:</strong> ${basePrice.toFixed(2)}</div> */}\r\n                                    {description && <div><strong>Description:</strong> {description}</div>}\r\n                                    <div style={{\r\n                                        marginTop: '1rem',\r\n                                        padding: '1rem',\r\n                                        background: 'rgba(127, 255, 212, 0.1)',\r\n                                        border: '1px solid #7FFFD4',\r\n                                        borderRadius: '8px',\r\n                                        fontSize: '0.9rem'\r\n                                    }}>\r\n                                        <FaInfoCircle style={{ marginRight: '0.5rem' }} />\r\n                                        You will receive a permanent Creator Edition (0/0) that cannot be sold.\r\n                                    </div>\r\n\r\n                                    {uploadedFile && postToFeed && (\r\n                                        <div style={{\r\n                                            marginTop: '0.5rem',\r\n                                            padding: '1rem',\r\n                                            background: 'rgba(127, 255, 212, 0.1)',\r\n                                            border: '1px solid #7FFFD4',\r\n                                            borderRadius: '8px',\r\n                                            fontSize: '0.9rem',\r\n                                            display: 'flex',\r\n                                            alignItems: 'center'\r\n                                        }}>\r\n                                            <FaRocket style={{ marginRight: '0.5rem' }} />\r\n                                            A new post will also be created on your feed.\r\n                                        </div>\r\n                                    )}\r\n\r\n                                    {addToShopDraft && (\r\n                                        <div style={{\r\n                                            marginTop: '0.5rem',\r\n                                            padding: '1rem',\r\n                                            background: 'rgba(127, 255, 212, 0.1)',\r\n                                            border: '1px solid #7FFFD4',\r\n                                            borderRadius: '8px',\r\n                                            fontSize: '0.9rem',\r\n                                            display: 'flex',\r\n                                            alignItems: 'center'\r\n                                        }}>\r\n                                            <FaShoppingCart style={{ marginRight: '0.5rem' }} />\r\n                                            A draft item will be added to your shop.\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Footer */}\r\n                <div style={{\r\n                    padding: '1.5rem',\r\n                    borderTop: '1px solid #333',\r\n                    display: 'flex',\r\n                    justifyContent: 'center',\r\n                    gap: '1rem'\r\n                }}>\r\n                    {step > 1 && (\r\n                        <button\r\n                            onClick={() => setStep(step - 1)}\r\n                            style={{\r\n                                padding: '0.75rem 1.5rem',\r\n                                background: '#333',\r\n                                border: '1px solid #444',\r\n                                borderRadius: '8px',\r\n                                color: '#fff',\r\n                                cursor: 'pointer',\r\n                                fontWeight: '600'\r\n                            }}\r\n                        >\r\n                            Back\r\n                        </button>\r\n                    )}\r\n\r\n                    {step < 3 ? (\r\n                        <button\r\n                            onClick={() => setStep(step + 1)}\r\n                            disabled={step === 1 && !selectedPost && !uploadedFile}\r\n                            style={{\r\n                                padding: '0.75rem 1.5rem',\r\n                                background: (step === 1 && !selectedPost && !uploadedFile) ? '#333' : '#7FFFD4',\r\n                                border: 'none',\r\n                                borderRadius: '8px',\r\n                                color: '#000',\r\n                                cursor: (step === 1 && !selectedPost && !uploadedFile) ? 'not-allowed' : 'pointer',\r\n                                fontWeight: '600',\r\n                                opacity: (step === 1 && !selectedPost && !uploadedFile) ? 0.5 : 1\r\n                            }}\r\n                        >\r\n                            Next\r\n                        </button>\r\n                    ) : (\r\n                        <button\r\n                            onClick={handleCreate}\r\n                            disabled={loading}\r\n                            style={{\r\n                                padding: '0.75rem 1.5rem',\r\n                                background: loading ? '#333' : '#7FFFD4',\r\n                                border: 'none',\r\n                                borderRadius: '8px',\r\n                                color: '#000',\r\n                                cursor: loading ? 'not-allowed' : 'pointer',\r\n                                fontWeight: '600',\r\n                                opacity: loading ? 0.5 : 1\r\n                            }}\r\n                        >\r\n                            {loading ? 'Creating...' : 'Create Card'}\r\n                        </button>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div >\r\n    );\r\n};\r\n\r\nexport default CreateCardModal;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\CreateCollectionModal.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaImage' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaLock' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":34},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaUsers' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":36,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":43},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaGlobe' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":45,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":52},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaStore' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":66,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":73},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaRss' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":75,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":80}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { FaTimes, FaImage, FaLock, FaUsers, FaGlobe, FaCalendar, FaStore, FaRss } from 'react-icons/fa';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { useCreateCollection } from '@/hooks/useCollections';\r\n\r\nconst CreateCollectionModal = ({ isOpen, onClose, onSuccess, userPosts = [] }) => {\r\n    const { currentUser } = useAuth();\r\n    const { createCollection, loading, error } = useCreateCollection();\r\n\r\n    const [formData, setFormData] = useState({\r\n        title: '',\r\n        description: '',\r\n        visibility: 'public',\r\n        showInFeed: true,\r\n        showInStore: false,\r\n        bundlePrice: '',\r\n        scheduledDropDate: '',\r\n        selectedPostIds: [],\r\n        isGallery: false\r\n    });\r\n\r\n    const [coverImageUrl, setCoverImageUrl] = useState('');\r\n\r\n    useEffect(() => {\r\n        if (!isOpen) {\r\n            // Reset form when modal closes\r\n            setFormData({\r\n                title: '',\r\n                description: '',\r\n                visibility: 'public',\r\n                showInFeed: true,\r\n                showInStore: false,\r\n                bundlePrice: '',\r\n                scheduledDropDate: '',\r\n                selectedPostIds: [],\r\n                isGallery: false\r\n            });\r\n            setCoverImageUrl('');\r\n        }\r\n    }, [isOpen]);\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n\r\n        if (!formData.title.trim()) {\r\n            alert('Please enter a collection title');\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const collectionData = {\r\n                title: formData.title.trim(),\r\n                description: formData.description.trim(),\r\n                coverImage: coverImageUrl || (userPosts.find(p => formData.selectedPostIds.includes(p.id))?.images?.[0]?.url || ''),\r\n                ownerId: currentUser.uid,\r\n                postIds: formData.selectedPostIds,\r\n                visibility: formData.visibility,\r\n                showInFeed: formData.showInFeed,\r\n                showInStore: formData.showInStore,\r\n                bundlePrice: formData.bundlePrice ? parseFloat(formData.bundlePrice) : null,\r\n                scheduledDropDate: formData.scheduledDropDate ? new Date(formData.scheduledDropDate) : null,\r\n                isGallery: formData.isGallery\r\n            };\r\n\r\n            const newCollection = await createCollection(collectionData);\r\n\r\n            if (onSuccess) {\r\n                onSuccess(newCollection);\r\n            }\r\n\r\n            onClose();\r\n        } catch (err) {\r\n            console.error('Failed to create collection:', err);\r\n            alert('Failed to create collection. Please try again.');\r\n        }\r\n    };\r\n\r\n    const togglePostSelection = (postId) => {\r\n        setFormData(prev => ({\r\n            ...prev,\r\n            selectedPostIds: prev.selectedPostIds.includes(postId)\r\n                ? prev.selectedPostIds.filter(id => id !== postId)\r\n                : [...prev.selectedPostIds, postId]\r\n        }));\r\n    };\r\n\r\n    if (!isOpen) return null;\r\n\r\n    return (\r\n        <div style={{\r\n            position: 'fixed',\r\n            top: 0,\r\n            left: 0,\r\n            right: 0,\r\n            bottom: 0,\r\n            background: 'rgba(0, 0, 0, 0.9)',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            zIndex: 1000,\r\n            padding: '1rem'\r\n        }}>\r\n            <div style={{\r\n                background: '#111',\r\n                borderRadius: '12px',\r\n                maxWidth: '600px',\r\n                width: '100%',\r\n                maxHeight: '90vh',\r\n                overflow: 'auto',\r\n                border: '1px solid #333'\r\n            }}>\r\n                {/* Header */}\r\n                <div style={{\r\n                    padding: '1.5rem',\r\n                    borderBottom: '1px solid #333',\r\n                    display: 'flex',\r\n                    justifyContent: 'space-between',\r\n                    alignItems: 'center',\r\n                    position: 'sticky',\r\n                    top: 0,\r\n                    background: '#111',\r\n                    zIndex: 10\r\n                }}>\r\n                    <h2 style={{ fontSize: '1.5rem', fontWeight: 'bold', color: '#fff' }}>Create Collection</h2>\r\n                    <button\r\n                        onClick={onClose}\r\n                        style={{\r\n                            background: 'transparent',\r\n                            border: 'none',\r\n                            color: '#888',\r\n                            cursor: 'pointer',\r\n                            fontSize: '1.5rem'\r\n                        }}\r\n                    >\r\n                        <FaTimes />\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Form */}\r\n                <form onSubmit={handleSubmit} style={{ padding: '1.5rem' }}>\r\n                    {/* Title */}\r\n                    <div style={{ marginBottom: '1.5rem' }}>\r\n                        <label style={{ display: 'block', marginBottom: '0.5rem', color: '#ccc', fontWeight: '600' }}>\r\n                            Collection Title *\r\n                        </label>\r\n                        <input\r\n                            type=\"text\"\r\n                            value={formData.title}\r\n                            onChange={(e) => setFormData({ ...formData, title: e.target.value })}\r\n                            placeholder=\"e.g., Summer 2024 Collection\"\r\n                            style={{\r\n                                width: '100%',\r\n                                padding: '0.75rem',\r\n                                background: '#222',\r\n                                border: '1px solid #333',\r\n                                borderRadius: '8px',\r\n                                color: '#fff',\r\n                                fontSize: '1rem'\r\n                            }}\r\n                            required\r\n                        />\r\n                    </div>\r\n\r\n                    {/* Description */}\r\n                    <div style={{ marginBottom: '1.5rem' }}>\r\n                        <label style={{ display: 'block', marginBottom: '0.5rem', color: '#ccc', fontWeight: '600' }}>\r\n                            Description\r\n                        </label>\r\n                        <textarea\r\n                            value={formData.description}\r\n                            onChange={(e) => setFormData({ ...formData, description: e.target.value })}\r\n                            placeholder=\"Describe this collection...\"\r\n                            rows={3}\r\n                            style={{\r\n                                width: '100%',\r\n                                padding: '0.75rem',\r\n                                background: '#222',\r\n                                border: '1px solid #333',\r\n                                borderRadius: '8px',\r\n                                color: '#fff',\r\n                                fontSize: '1rem',\r\n                                resize: 'vertical'\r\n                            }}\r\n                        />\r\n                    </div>\r\n\r\n                    {/* Visibility */}\r\n                    <div style={{ marginBottom: '1.5rem' }}>\r\n                        <label style={{ display: 'block', marginBottom: '0.5rem', color: '#ccc', fontWeight: '600' }}>\r\n                            Visibility\r\n                        </label>\r\n                        <div style={{ fontSize: '0.85rem', color: '#666', marginTop: '0.5rem' }}>\r\n                            Leave empty to sell items individually\r\n                        </div>\r\n\r\n                        {/* Copyright Warning for Store Items */}\r\n                        <div style={{\r\n                            marginTop: '0.75rem',\r\n                            padding: '0.75rem',\r\n                            background: 'rgba(255, 165, 0, 0.1)',\r\n                            border: '1px solid rgba(255, 165, 0, 0.3)',\r\n                            borderRadius: '6px',\r\n                            fontSize: '0.75rem',\r\n                            color: '#ffb84d',\r\n                            lineHeight: '1.4'\r\n                        }}>\r\n                            ΓÜá∩╕Å <strong>Copyright Notice:</strong> By listing this item, you certify that you own all rights to this content. Unauthorized sale of copyrighted material is prohibited.\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Scheduled Drop Date */}\r\n                    <div style={{ marginBottom: '1.5rem' }}>\r\n                        <label style={{ display: 'block', marginBottom: '0.5rem', color: '#ccc', fontWeight: '600' }}>\r\n                            <FaCalendar style={{ marginRight: '0.5rem' }} />\r\n                            Schedule Drop (Optional)\r\n                        </label>\r\n                        <input\r\n                            type=\"datetime-local\"\r\n                            value={formData.scheduledDropDate}\r\n                            onChange={(e) => setFormData({ ...formData, scheduledDropDate: e.target.value })}\r\n                            style={{\r\n                                width: '100%',\r\n                                padding: '0.75rem',\r\n                                background: '#222',\r\n                                border: '1px solid #333',\r\n                                borderRadius: '8px',\r\n                                color: '#fff',\r\n                                fontSize: '1rem'\r\n                            }}\r\n                        />\r\n                        <div style={{ fontSize: '0.85rem', color: '#666', marginTop: '0.5rem' }}>\r\n                            Leave empty to publish immediately\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Select Posts */}\r\n                    <div style={{ marginBottom: '1.5rem' }}>\r\n                        <label style={{ display: 'block', marginBottom: '0.75rem', color: '#ccc', fontWeight: '600' }}>\r\n                            Select Posts ({formData.selectedPostIds.length} selected)\r\n                        </label>\r\n                        <div style={{\r\n                            display: 'grid',\r\n                            gridTemplateColumns: 'repeat(auto-fill, minmax(80px, 1fr))',\r\n                            gap: '0.5rem',\r\n                            maxHeight: '300px',\r\n                            overflow: 'auto',\r\n                            padding: '0.5rem',\r\n                            background: '#0a0a0a',\r\n                            borderRadius: '8px',\r\n                            border: '1px solid #333'\r\n                        }}>\r\n                            {userPosts.length === 0 ? (\r\n                                <div style={{ gridColumn: '1 / -1', textAlign: 'center', padding: '2rem', color: '#666' }}>\r\n                                    No posts available. You can still create an empty collection.\r\n                                </div>\r\n                            ) : (\r\n                                userPosts.map(post => {\r\n                                    const isSelected = formData.selectedPostIds.includes(post.id);\r\n                                    const imageUrl = post.images?.[0]?.url || post.imageUrl || post.items?.[0]?.url;\r\n\r\n                                    return (\r\n                                        <div\r\n                                            key={post.id}\r\n                                            onClick={() => togglePostSelection(post.id)}\r\n                                            style={{\r\n                                                aspectRatio: '1',\r\n                                                background: '#222',\r\n                                                borderRadius: '4px',\r\n                                                overflow: 'hidden',\r\n                                                cursor: 'pointer',\r\n                                                border: isSelected ? '2px solid #7FFFD4' : '2px solid transparent',\r\n                                                position: 'relative',\r\n                                                transition: 'all 0.2s'\r\n                                            }}\r\n                                        >\r\n                                            {imageUrl ? (\r\n                                                <img\r\n                                                    src={imageUrl}\r\n                                                    alt=\"\"\r\n                                                    style={{\r\n                                                        width: '100%',\r\n                                                        height: '100%',\r\n                                                        objectFit: 'cover',\r\n                                                        opacity: isSelected ? 1 : 0.7\r\n                                                    }}\r\n                                                />\r\n                                            ) : (\r\n                                                <div style={{\r\n                                                    width: '100%',\r\n                                                    height: '100%',\r\n                                                    display: 'flex',\r\n                                                    alignItems: 'center',\r\n                                                    justifyContent: 'center',\r\n                                                    color: '#666',\r\n                                                    fontSize: '0.7rem'\r\n                                                }}>\r\n                                                    Text\r\n                                                </div>\r\n                                            )}\r\n                                            {isSelected && (\r\n                                                <div style={{\r\n                                                    position: 'absolute',\r\n                                                    top: '4px',\r\n                                                    right: '4px',\r\n                                                    width: '20px',\r\n                                                    height: '20px',\r\n                                                    background: '#7FFFD4',\r\n                                                    borderRadius: '50%',\r\n                                                    display: 'flex',\r\n                                                    alignItems: 'center',\r\n                                                    justifyContent: 'center',\r\n                                                    color: '#000',\r\n                                                    fontSize: '0.7rem',\r\n                                                    fontWeight: 'bold'\r\n                                                }}>\r\n                                                    Γ£ô\r\n                                                </div>\r\n                                            )}\r\n                                        </div>\r\n                                    );\r\n                                })\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Error Display */}\r\n                    {error && (\r\n                        <div style={{\r\n                            padding: '0.75rem',\r\n                            background: 'rgba(255, 68, 68, 0.1)',\r\n                            border: '1px solid rgba(255, 68, 68, 0.3)',\r\n                            borderRadius: '8px',\r\n                            color: '#ff4444',\r\n                            marginBottom: '1.5rem',\r\n                            fontSize: '0.9rem'\r\n                        }}>\r\n                            {error}\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Actions */}\r\n                    <div style={{ display: 'flex', gap: '1rem', justifyContent: 'flex-end' }}>\r\n                        <button\r\n                            type=\"button\"\r\n                            onClick={onClose}\r\n                            disabled={loading}\r\n                            style={{\r\n                                padding: '0.75rem 1.5rem',\r\n                                background: '#333',\r\n                                border: 'none',\r\n                                borderRadius: '8px',\r\n                                color: '#fff',\r\n                                cursor: loading ? 'not-allowed' : 'pointer',\r\n                                fontWeight: '600',\r\n                                opacity: loading ? 0.5 : 1\r\n                            }}\r\n                        >\r\n                            Cancel\r\n                        </button>\r\n                        <button\r\n                            type=\"submit\"\r\n                            disabled={loading}\r\n                            style={{\r\n                                padding: '0.75rem 1.5rem',\r\n                                background: '#7FFFD4',\r\n                                border: 'none',\r\n                                borderRadius: '8px',\r\n                                color: '#000',\r\n                                cursor: loading ? 'not-allowed' : 'pointer',\r\n                                fontWeight: 'bold',\r\n                                opacity: loading ? 0.5 : 1\r\n                            }}\r\n                        >\r\n                            {loading ? 'Creating...' : 'Create Collection'}\r\n                        </button>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CreateCollectionModal;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\CreateMuseumModal.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaTrash' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":68,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":75},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":11,"column":40,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":45},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'fetchingTier' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":16,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":24}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { FaTimes, FaSearch, FaUniversity, FaUser, FaImage, FaPlus, FaTrash } from 'react-icons/fa';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { useCreateCollection } from '@/hooks/useCollections';\r\nimport { useSearch } from '@/hooks/useSearch';\r\nimport { getUserTier, USER_TIERS } from '@/core/services/firestore/monetization.service';\r\nimport { useToast } from '@/context/ToastContext';\r\n\r\nconst CreateMuseumModal = ({ isOpen, onClose, onSuccess }) => {\r\n    const { currentUser } = useAuth();\r\n    const { createCollection, loading, error } = useCreateCollection();\r\n    const { searchUsers, searchGalleries } = useSearch();\r\n    const { showError } = useToast();\r\n\r\n    const [userTier, setUserTier] = useState(null);\r\n    const [fetchingTier, setFetchingTier] = useState(true);\r\n\r\n    const [formData, setFormData] = useState({\r\n        title: '',\r\n        description: '',\r\n        coverImage: '',\r\n        visibility: 'public',\r\n        galleryIds: [],\r\n        profileIds: []\r\n    });\r\n\r\n    const [searchQuery, setSearchQuery] = useState('');\r\n    const [searchResults, setSearchResults] = useState([]);\r\n    const [searchType, setSearchType] = useState('galleries'); // 'galleries' or 'profiles'\r\n    const [isSearching, setIsSearching] = useState(false);\r\n    const [selectedItems, setSelectedItems] = useState([]); // Array of full objects for display\r\n\r\n    // Fetch user tier\r\n    useEffect(() => {\r\n        const fetchTier = async () => {\r\n            if (!currentUser) {\r\n                setFetchingTier(false);\r\n                return;\r\n            }\r\n            try {\r\n                const tier = await getUserTier(currentUser.uid);\r\n                setUserTier(tier);\r\n            } catch (err) {\r\n                console.error('Error fetching user tier:', err);\r\n            } finally {\r\n                setFetchingTier(false);\r\n            }\r\n        };\r\n        fetchTier();\r\n    }, [currentUser]);\r\n\r\n    useEffect(() => {\r\n        if (!isOpen) {\r\n            setFormData({\r\n                title: '',\r\n                description: '',\r\n                coverImage: '',\r\n                visibility: 'public',\r\n                galleryIds: [],\r\n                profileIds: []\r\n            });\r\n            setSearchQuery('');\r\n            setSearchResults([]);\r\n            setSelectedItems([]);\r\n        }\r\n    }, [isOpen]);\r\n\r\n    // Handle search\r\n    useEffect(() => {\r\n        const delayDebounceFn = setTimeout(async () => {\r\n            if (searchQuery.trim()) {\r\n                setIsSearching(true);\r\n                try {\r\n                    let results;\r\n                    if (searchType === 'galleries') {\r\n                        results = await searchGalleries(searchQuery);\r\n                    } else {\r\n                        results = await searchUsers(searchQuery);\r\n                    }\r\n                    setSearchResults(results.data || []);\r\n                } catch (err) {\r\n                    console.error('Search error:', err);\r\n                } finally {\r\n                    setIsSearching(false);\r\n                }\r\n            } else {\r\n                setSearchResults([]);\r\n            }\r\n        }, 500);\r\n\r\n        return () => clearTimeout(delayDebounceFn);\r\n    }, [searchQuery, searchType, searchGalleries, searchUsers]);\r\n\r\n    const handleAddItem = (item) => {\r\n        const isGallery = searchType === 'galleries';\r\n        const idField = isGallery ? 'galleryIds' : 'profileIds';\r\n\r\n        if (formData[idField].includes(item.id)) return;\r\n\r\n        setFormData(prev => ({\r\n            ...prev,\r\n            [idField]: [...prev[idField], item.id]\r\n        }));\r\n\r\n        setSelectedItems(prev => [...prev, { ...item, type: searchType }]);\r\n    };\r\n\r\n    const handleRemoveItem = (itemId, type) => {\r\n        const idField = type === 'galleries' ? 'galleryIds' : 'profileIds';\r\n\r\n        setFormData(prev => ({\r\n            ...prev,\r\n            [idField]: prev[idField].filter(id => id !== itemId)\r\n        }));\r\n\r\n        setSelectedItems(prev => prev.filter(item => item.id !== itemId));\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        if (!formData.title.trim()) return;\r\n\r\n        // Check if user is Ultra-tier Space Creator\r\n        if (userTier !== USER_TIERS.ULTRA && userTier !== USER_TIERS.PARTNER) {\r\n            showError('Museums are exclusive to Space Creator members. Please upgrade to continue.');\r\n            onClose();\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const museumData = {\r\n                ...formData,\r\n                type: 'museum',\r\n                ownerId: currentUser.uid,\r\n                ownerUsername: currentUser.displayName,\r\n                items: [], // Museums don't hold individual posts directly in 'items' usually, but we keep structure\r\n                postRefs: []\r\n            };\r\n\r\n            const newMuseum = await createCollection(museumData);\r\n            if (onSuccess) onSuccess(newMuseum);\r\n            onClose();\r\n        } catch (err) {\r\n            console.error('Failed to create museum:', err);\r\n        }\r\n    };\r\n\r\n    if (!isOpen) return null;\r\n\r\n    return (\r\n        <div style={{\r\n            position: 'fixed',\r\n            inset: 0,\r\n            background: 'rgba(0,0,0,0.9)',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            zIndex: 1000,\r\n            padding: '1rem'\r\n        }}>\r\n            <div style={{\r\n                background: '#111',\r\n                borderRadius: '12px',\r\n                width: '100%',\r\n                maxWidth: '800px',\r\n                maxHeight: '90vh',\r\n                display: 'flex',\r\n                flexDirection: 'column',\r\n                border: '1px solid #333'\r\n            }}>\r\n                {/* Header */}\r\n                <div style={{\r\n                    padding: '1.5rem',\r\n                    borderBottom: '1px solid #333',\r\n                    display: 'flex',\r\n                    justifyContent: 'space-between',\r\n                    alignItems: 'center'\r\n                }}>\r\n                    <h2 style={{ fontSize: '1.5rem', fontWeight: 'bold', color: '#fff', display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                        <FaUniversity style={{ color: '#7FFFD4' }} /> Create Museum\r\n                    </h2>\r\n                    <button onClick={onClose} style={{ background: 'none', border: 'none', color: '#888', cursor: 'pointer', fontSize: '1.5rem' }}>\r\n                        <FaTimes />\r\n                    </button>\r\n                </div>\r\n\r\n                <div style={{ display: 'flex', flex: 1, overflow: 'hidden' }}>\r\n                    {/* Left: Details Form */}\r\n                    <div style={{ flex: 1, padding: '1.5rem', overflowY: 'auto', borderRight: '1px solid #333' }}>\r\n                        <form id=\"museum-form\" onSubmit={handleSubmit}>\r\n                            <div style={{ marginBottom: '1.5rem' }}>\r\n                                <label style={{ display: 'block', color: '#ccc', marginBottom: '0.5rem' }}>Title</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={formData.title}\r\n                                    onChange={e => setFormData({ ...formData, title: e.target.value })}\r\n                                    style={{ width: '100%', padding: '0.75rem', background: '#222', border: '1px solid #333', borderRadius: '8px', color: '#fff' }}\r\n                                    placeholder=\"Museum Name\"\r\n                                    required\r\n                                />\r\n                            </div>\r\n                            <div style={{ marginBottom: '1.5rem' }}>\r\n                                <label style={{ display: 'block', color: '#ccc', marginBottom: '0.5rem' }}>Description</label>\r\n                                <textarea\r\n                                    value={formData.description}\r\n                                    onChange={e => setFormData({ ...formData, description: e.target.value })}\r\n                                    style={{ width: '100%', padding: '0.75rem', background: '#222', border: '1px solid #333', borderRadius: '8px', color: '#fff' }}\r\n                                    rows={4}\r\n                                    placeholder=\"Describe your museum...\"\r\n                                />\r\n                            </div>\r\n                            <div style={{ marginBottom: '1.5rem' }}>\r\n                                <label style={{ display: 'block', color: '#ccc', marginBottom: '0.5rem' }}>Cover Image URL</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={formData.coverImage}\r\n                                    onChange={e => setFormData({ ...formData, coverImage: e.target.value })}\r\n                                    style={{ width: '100%', padding: '0.75rem', background: '#222', border: '1px solid #333', borderRadius: '8px', color: '#fff' }}\r\n                                    placeholder=\"https://...\"\r\n                                />\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n\r\n                    {/* Right: Content Selection */}\r\n                    <div style={{ flex: 1, padding: '1.5rem', display: 'flex', flexDirection: 'column', background: '#0a0a0a' }}>\r\n                        <h3 style={{ color: '#fff', marginBottom: '1rem' }}>Curate Content</h3>\r\n\r\n                        {/* Search Type Toggle */}\r\n                        <div style={{ display: 'flex', gap: '0.5rem', marginBottom: '1rem' }}>\r\n                            <button\r\n                                onClick={() => setSearchType('galleries')}\r\n                                style={{\r\n                                    flex: 1,\r\n                                    padding: '0.5rem',\r\n                                    background: searchType === 'galleries' ? 'rgba(127, 255, 212, 0.2)' : '#222',\r\n                                    color: searchType === 'galleries' ? '#7FFFD4' : '#888',\r\n                                    border: '1px solid',\r\n                                    borderColor: searchType === 'galleries' ? '#7FFFD4' : '#333',\r\n                                    borderRadius: '6px',\r\n                                    cursor: 'pointer',\r\n                                    display: 'flex',\r\n                                    alignItems: 'center',\r\n                                    justifyContent: 'center',\r\n                                    gap: '0.5rem'\r\n                                }}\r\n                            >\r\n                                <FaImage /> Studios\r\n                            </button>\r\n                            <button\r\n                                onClick={() => setSearchType('profiles')}\r\n                                style={{\r\n                                    flex: 1,\r\n                                    padding: '0.5rem',\r\n                                    background: searchType === 'profiles' ? 'rgba(127, 255, 212, 0.2)' : '#222',\r\n                                    color: searchType === 'profiles' ? '#7FFFD4' : '#888',\r\n                                    border: '1px solid',\r\n                                    borderColor: searchType === 'profiles' ? '#7FFFD4' : '#333',\r\n                                    borderRadius: '6px',\r\n                                    cursor: 'pointer',\r\n                                    display: 'flex',\r\n                                    alignItems: 'center',\r\n                                    justifyContent: 'center',\r\n                                    gap: '0.5rem'\r\n                                }}\r\n                            >\r\n                                <FaUser /> Profiles\r\n                            </button>\r\n                        </div>\r\n\r\n                        {/* Search Input */}\r\n                        <div style={{ position: 'relative', marginBottom: '1rem' }}>\r\n                            <FaSearch style={{ position: 'absolute', left: '10px', top: '50%', transform: 'translateY(-50%)', color: '#666' }} />\r\n                            <input\r\n                                type=\"text\"\r\n                                value={searchQuery}\r\n                                onChange={e => setSearchQuery(e.target.value)}\r\n                                placeholder={`Search ${searchType === 'galleries' ? 'studios' : searchType}...`}\r\n                                style={{ width: '100%', padding: '0.75rem 0.75rem 0.75rem 2.5rem', background: '#222', border: '1px solid #333', borderRadius: '8px', color: '#fff' }}\r\n                            />\r\n                        </div>\r\n\r\n                        {/* Search Results */}\r\n                        <div style={{ flex: 1, overflowY: 'auto', marginBottom: '1rem', border: '1px solid #333', borderRadius: '8px', padding: '0.5rem' }}>\r\n                            {isSearching ? (\r\n                                <div style={{ padding: '1rem', textAlign: 'center', color: '#666' }}>Searching...</div>\r\n                            ) : searchResults.length > 0 ? (\r\n                                <div style={{ display: 'flex', flexDirection: 'column', gap: '0.5rem' }}>\r\n                                    {searchResults.map(item => (\r\n                                        <div\r\n                                            key={item.id}\r\n                                            onClick={() => handleAddItem(item)}\r\n                                            style={{\r\n                                                display: 'flex',\r\n                                                alignItems: 'center',\r\n                                                gap: '0.75rem',\r\n                                                padding: '0.5rem',\r\n                                                background: '#1a1a1a',\r\n                                                borderRadius: '6px',\r\n                                                cursor: 'pointer',\r\n                                                border: '1px solid transparent',\r\n                                                transition: 'all 0.2s'\r\n                                            }}\r\n                                            onMouseOver={e => e.currentTarget.style.borderColor = '#7FFFD4'}\r\n                                            onMouseOut={e => e.currentTarget.style.borderColor = 'transparent'}\r\n                                        >\r\n                                            <img\r\n                                                src={item.coverImage || item.photoURL || 'https://via.placeholder.com/40'}\r\n                                                alt=\"\"\r\n                                                style={{ width: '40px', height: '40px', borderRadius: searchType === 'profiles' ? '50%' : '4px', objectFit: 'cover' }}\r\n                                            />\r\n                                            <div style={{ overflow: 'hidden' }}>\r\n                                                <div style={{ color: '#fff', fontWeight: 'bold', whiteSpace: 'nowrap', overflow: 'hidden', textOverflow: 'ellipsis' }}>\r\n                                                    {item.title || item.displayName}\r\n                                                </div>\r\n                                                <div style={{ color: '#666', fontSize: '0.8rem' }}>\r\n                                                    {searchType === 'galleries' ? `${item.postCount || 0} posts` : `@${item.username || 'user'}`}\r\n                                                </div>\r\n                                            </div>\r\n                                            <FaPlus style={{ marginLeft: 'auto', color: '#7FFFD4' }} />\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n                            ) : (\r\n                                <div style={{ padding: '1rem', textAlign: 'center', color: '#666' }}>\r\n                                    {searchQuery ? 'No results found' : 'Start typing to search'}\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n\r\n                        {/* Selected Items */}\r\n                        <div style={{ maxHeight: '150px', overflowY: 'auto' }}>\r\n                            <h4 style={{ color: '#ccc', fontSize: '0.9rem', marginBottom: '0.5rem' }}>Selected Content ({selectedItems.length})</h4>\r\n                            <div style={{ display: 'flex', flexWrap: 'wrap', gap: '0.5rem' }}>\r\n                                {selectedItems.map(item => (\r\n                                    <div key={item.id} style={{\r\n                                        display: 'flex',\r\n                                        alignItems: 'center',\r\n                                        gap: '0.5rem',\r\n                                        padding: '0.25rem 0.5rem',\r\n                                        background: 'rgba(127, 255, 212, 0.1)',\r\n                                        border: '1px solid rgba(127, 255, 212, 0.3)',\r\n                                        borderRadius: '20px',\r\n                                        fontSize: '0.85rem',\r\n                                        color: '#7FFFD4'\r\n                                    }}>\r\n                                        {item.type === 'profiles' && <FaUser size={10} />}\r\n                                        {item.type === 'galleries' && <FaImage size={10} />}\r\n                                        <span style={{ maxWidth: '100px', overflow: 'hidden', textOverflow: 'ellipsis', whiteSpace: 'nowrap' }}>\r\n                                            {item.title || item.displayName}\r\n                                        </span>\r\n                                        <FaTimes\r\n                                            style={{ cursor: 'pointer' }}\r\n                                            onClick={() => handleRemoveItem(item.id, item.type)}\r\n                                        />\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Footer */}\r\n                <div style={{ padding: '1.5rem', borderTop: '1px solid #333', display: 'flex', justifyContent: 'flex-end', gap: '1rem' }}>\r\n                    <button\r\n                        onClick={onClose}\r\n                        style={{ padding: '0.75rem 1.5rem', background: 'transparent', border: '1px solid #333', borderRadius: '8px', color: '#fff', cursor: 'pointer' }}\r\n                    >\r\n                        Cancel\r\n                    </button>\r\n                    <button\r\n                        type=\"submit\"\r\n                        form=\"museum-form\"\r\n                        disabled={loading}\r\n                        style={{\r\n                            padding: '0.75rem 1.5rem',\r\n                            background: '#7FFFD4',\r\n                            border: 'none',\r\n                            borderRadius: '8px',\r\n                            color: '#000',\r\n                            fontWeight: 'bold',\r\n                            cursor: loading ? 'not-allowed' : 'pointer',\r\n                            opacity: loading ? 0.7 : 1\r\n                        }}\r\n                    >\r\n                        {loading ? 'Creating...' : 'Create Museum'}\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CreateMuseumModal;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\CreateProjectModal.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { FaTimes, FaPlus, FaTrash, FaUsers } from 'react-icons/fa';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { useProjectManagement } from '@/hooks/useProjects';\r\nimport PSButton from './PSButton';\r\n\r\nconst CreateProjectModal = ({ isOpen, onClose, studioId, onSuccess }) => {\r\n    const { currentUser } = useAuth();\r\n    const { create, loading, error } = useProjectManagement();\r\n\r\n    const [formData, setFormData] = useState({\r\n        title: '',\r\n        description: '',\r\n        isTemporary: false,\r\n        contributors: [],\r\n        roles: []\r\n    });\r\n\r\n    const [newContributor, setNewContributor] = useState({\r\n        uid: '',\r\n        displayName: '',\r\n        role: ''\r\n    });\r\n\r\n    const [newRole, setNewRole] = useState('');\r\n\r\n    if (!isOpen) return null;\r\n\r\n    const handleAddRole = () => {\r\n        if (newRole.trim() && !formData.roles.includes(newRole.trim())) {\r\n            setFormData(prev => ({\r\n                ...prev,\r\n                roles: [...prev.roles, newRole.trim()]\r\n            }));\r\n            setNewRole('');\r\n        }\r\n    };\r\n\r\n    const handleRemoveRole = (roleToRemove) => {\r\n        setFormData(prev => ({\r\n            ...prev,\r\n            roles: prev.roles.filter(role => role !== roleToRemove)\r\n        }));\r\n    };\r\n\r\n    const handleAddContributor = () => {\r\n        if (newContributor.displayName.trim() && newContributor.role.trim()) {\r\n            setFormData(prev => ({\r\n                ...prev,\r\n                contributors: [...prev.contributors, {\r\n                    uid: newContributor.uid || currentUser.uid,\r\n                    displayName: newContributor.displayName.trim(),\r\n                    role: newContributor.role.trim()\r\n                }]\r\n            }));\r\n            setNewContributor({ uid: '', displayName: '', role: '' });\r\n        }\r\n    };\r\n\r\n    const handleRemoveContributor = (index) => {\r\n        setFormData(prev => ({\r\n            ...prev,\r\n            contributors: prev.contributors.filter((_, i) => i !== index)\r\n        }));\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n\r\n        if (!formData.title.trim()) {\r\n            alert('Please enter a project title');\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const projectData = {\r\n                ...formData,\r\n                createdBy: currentUser.uid,\r\n                contributors: formData.contributors.length > 0\r\n                    ? formData.contributors\r\n                    : [{\r\n                        uid: currentUser.uid,\r\n                        displayName: currentUser.displayName || 'Anonymous',\r\n                        role: 'Creator'\r\n                    }]\r\n            };\r\n\r\n            const newProject = await create(studioId, projectData);\r\n\r\n            if (onSuccess) {\r\n                onSuccess(newProject);\r\n            }\r\n\r\n            onClose();\r\n        } catch (err) {\r\n            console.error('Failed to create project:', err);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div style={{\r\n            position: 'fixed',\r\n            inset: 0,\r\n            zIndex: 1000,\r\n            background: 'rgba(0,0,0,0.9)',\r\n            backdropFilter: 'blur(5px)',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            padding: '1rem'\r\n        }}>\r\n            <div style={{\r\n                background: '#111',\r\n                border: '1px solid #333',\r\n                borderRadius: '16px',\r\n                width: '100%',\r\n                maxWidth: '600px',\r\n                maxHeight: '90vh',\r\n                overflowY: 'auto',\r\n                position: 'relative'\r\n            }}>\r\n                {/* Header */}\r\n                <div style={{\r\n                    padding: '1.5rem',\r\n                    borderBottom: '1px solid #222',\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'space-between',\r\n                    position: 'sticky',\r\n                    top: 0,\r\n                    background: '#111',\r\n                    zIndex: 10\r\n                }}>\r\n                    <h2 style={{ margin: 0, fontSize: '1.5rem', color: '#fff', display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                        <FaUsers style={{ color: '#7FFFD4' }} />\r\n                        New Project\r\n                    </h2>\r\n                    <button\r\n                        onClick={onClose}\r\n                        style={{\r\n                            background: 'transparent',\r\n                            border: 'none',\r\n                            color: '#888',\r\n                            cursor: 'pointer',\r\n                            padding: '0.5rem',\r\n                            display: 'flex'\r\n                        }}\r\n                    >\r\n                        <FaTimes size={20} />\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Body */}\r\n                <form onSubmit={handleSubmit} style={{ padding: '1.5rem' }}>\r\n                    {error && (\r\n                        <div style={{\r\n                            padding: '1rem',\r\n                            background: 'rgba(255, 68, 68, 0.1)',\r\n                            border: '1px solid #ff4444',\r\n                            borderRadius: '8px',\r\n                            color: '#ff4444',\r\n                            marginBottom: '1.5rem',\r\n                            fontSize: '0.9rem'\r\n                        }}>\r\n                            {error}\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Title */}\r\n                    <div style={{ marginBottom: '1.5rem' }}>\r\n                        <label style={{ display: 'block', color: '#ccc', marginBottom: '0.5rem', fontWeight: '600' }}>\r\n                            Project Title *\r\n                        </label>\r\n                        <input\r\n                            type=\"text\"\r\n                            value={formData.title}\r\n                            onChange={e => setFormData({ ...formData, title: e.target.value })}\r\n                            placeholder=\"e.g., Summer Campaign 2024\"\r\n                            style={{\r\n                                width: '100%',\r\n                                padding: '0.75rem',\r\n                                background: '#222',\r\n                                border: '1px solid #333',\r\n                                borderRadius: '8px',\r\n                                color: '#fff',\r\n                                fontSize: '1rem'\r\n                            }}\r\n                            required\r\n                        />\r\n                    </div>\r\n\r\n                    {/* Description */}\r\n                    <div style={{ marginBottom: '1.5rem' }}>\r\n                        <label style={{ display: 'block', color: '#ccc', marginBottom: '0.5rem', fontWeight: '600' }}>\r\n                            Description\r\n                        </label>\r\n                        <textarea\r\n                            value={formData.description}\r\n                            onChange={e => setFormData({ ...formData, description: e.target.value })}\r\n                            placeholder=\"Describe this project...\"\r\n                            rows={3}\r\n                            style={{\r\n                                width: '100%',\r\n                                padding: '0.75rem',\r\n                                background: '#222',\r\n                                border: '1px solid #333',\r\n                                borderRadius: '8px',\r\n                                color: '#fff',\r\n                                fontSize: '1rem',\r\n                                resize: 'vertical'\r\n                            }}\r\n                        />\r\n                    </div>\r\n\r\n                    {/* Temporary Project Toggle */}\r\n                    <div style={{ marginBottom: '1.5rem' }}>\r\n                        <label style={{\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            gap: '0.75rem',\r\n                            cursor: 'pointer',\r\n                            padding: '0.75rem',\r\n                            background: '#222',\r\n                            borderRadius: '8px',\r\n                            border: '1px solid #333'\r\n                        }}>\r\n                            <input\r\n                                type=\"checkbox\"\r\n                                checked={formData.isTemporary}\r\n                                onChange={e => setFormData({ ...formData, isTemporary: e.target.checked })}\r\n                                style={{ width: '20px', height: '20px', cursor: 'pointer' }}\r\n                            />\r\n                            <div>\r\n                                <div style={{ color: '#fff', fontWeight: '600' }}>Temporary Project</div>\r\n                                <div style={{ color: '#666', fontSize: '0.85rem' }}>\r\n                                    Mark this as a short-term collaboration\r\n                                </div>\r\n                            </div>\r\n                        </label>\r\n                    </div>\r\n\r\n                    {/* Roles */}\r\n                    <div style={{ marginBottom: '1.5rem' }}>\r\n                        <label style={{ display: 'block', color: '#ccc', marginBottom: '0.5rem', fontWeight: '600' }}>\r\n                            Project Roles (Optional)\r\n                        </label>\r\n                        <div style={{ display: 'flex', gap: '0.5rem', marginBottom: '0.5rem' }}>\r\n                            <input\r\n                                type=\"text\"\r\n                                value={newRole}\r\n                                onChange={e => setNewRole(e.target.value)}\r\n                                onKeyPress={e => e.key === 'Enter' && (e.preventDefault(), handleAddRole())}\r\n                                placeholder=\"e.g., Photographer, Editor, Designer\"\r\n                                style={{\r\n                                    flex: 1,\r\n                                    padding: '0.5rem',\r\n                                    background: '#222',\r\n                                    border: '1px solid #333',\r\n                                    borderRadius: '8px',\r\n                                    color: '#fff',\r\n                                    fontSize: '0.9rem'\r\n                                }}\r\n                            />\r\n                            <button\r\n                                type=\"button\"\r\n                                onClick={handleAddRole}\r\n                                style={{\r\n                                    padding: '0.5rem 1rem',\r\n                                    background: '#7FFFD4',\r\n                                    color: '#000',\r\n                                    border: 'none',\r\n                                    borderRadius: '8px',\r\n                                    fontWeight: 'bold',\r\n                                    cursor: 'pointer'\r\n                                }}\r\n                            >\r\n                                <FaPlus />\r\n                            </button>\r\n                        </div>\r\n                        {formData.roles.length > 0 && (\r\n                            <div style={{ display: 'flex', flexWrap: 'wrap', gap: '0.5rem' }}>\r\n                                {formData.roles.map((role, index) => (\r\n                                    <div key={index} style={{\r\n                                        display: 'flex',\r\n                                        alignItems: 'center',\r\n                                        gap: '0.5rem',\r\n                                        padding: '0.25rem 0.75rem',\r\n                                        background: 'rgba(127, 255, 212, 0.1)',\r\n                                        border: '1px solid rgba(127, 255, 212, 0.3)',\r\n                                        borderRadius: '20px',\r\n                                        fontSize: '0.85rem',\r\n                                        color: '#7FFFD4'\r\n                                    }}>\r\n                                        {role}\r\n                                        <FaTimes\r\n                                            size={12}\r\n                                            style={{ cursor: 'pointer' }}\r\n                                            onClick={() => handleRemoveRole(role)}\r\n                                        />\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Contributors */}\r\n                    <div style={{ marginBottom: '1.5rem' }}>\r\n                        <label style={{ display: 'block', color: '#ccc', marginBottom: '0.5rem', fontWeight: '600' }}>\r\n                            Contributors (Optional)\r\n                        </label>\r\n                        <div style={{ marginBottom: '0.5rem' }}>\r\n                            <input\r\n                                type=\"text\"\r\n                                value={newContributor.displayName}\r\n                                onChange={e => setNewContributor({ ...newContributor, displayName: e.target.value })}\r\n                                placeholder=\"Contributor name\"\r\n                                style={{\r\n                                    width: '100%',\r\n                                    padding: '0.5rem',\r\n                                    background: '#222',\r\n                                    border: '1px solid #333',\r\n                                    borderRadius: '8px',\r\n                                    color: '#fff',\r\n                                    fontSize: '0.9rem',\r\n                                    marginBottom: '0.5rem'\r\n                                }}\r\n                            />\r\n                            <div style={{ display: 'flex', gap: '0.5rem' }}>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={newContributor.role}\r\n                                    onChange={e => setNewContributor({ ...newContributor, role: e.target.value })}\r\n                                    placeholder=\"Role\"\r\n                                    style={{\r\n                                        flex: 1,\r\n                                        padding: '0.5rem',\r\n                                        background: '#222',\r\n                                        border: '1px solid #333',\r\n                                        borderRadius: '8px',\r\n                                        color: '#fff',\r\n                                        fontSize: '0.9rem'\r\n                                    }}\r\n                                />\r\n                                <button\r\n                                    type=\"button\"\r\n                                    onClick={handleAddContributor}\r\n                                    style={{\r\n                                        padding: '0.5rem 1rem',\r\n                                        background: '#7FFFD4',\r\n                                        color: '#000',\r\n                                        border: 'none',\r\n                                        borderRadius: '8px',\r\n                                        fontWeight: 'bold',\r\n                                        cursor: 'pointer'\r\n                                    }}\r\n                                >\r\n                                    <FaPlus />\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                        {formData.contributors.length > 0 && (\r\n                            <div style={{ display: 'flex', flexDirection: 'column', gap: '0.5rem' }}>\r\n                                {formData.contributors.map((contributor, index) => (\r\n                                    <div key={index} style={{\r\n                                        display: 'flex',\r\n                                        alignItems: 'center',\r\n                                        justifyContent: 'space-between',\r\n                                        padding: '0.5rem',\r\n                                        background: '#222',\r\n                                        border: '1px solid #333',\r\n                                        borderRadius: '8px'\r\n                                    }}>\r\n                                        <div>\r\n                                            <div style={{ color: '#fff', fontWeight: 'bold' }}>\r\n                                                {contributor.displayName}\r\n                                            </div>\r\n                                            <div style={{ color: '#7FFFD4', fontSize: '0.85rem' }}>\r\n                                                {contributor.role}\r\n                                            </div>\r\n                                        </div>\r\n                                        <button\r\n                                            type=\"button\"\r\n                                            onClick={() => handleRemoveContributor(index)}\r\n                                            style={{\r\n                                                background: 'transparent',\r\n                                                border: 'none',\r\n                                                color: '#ff4444',\r\n                                                cursor: 'pointer',\r\n                                                padding: '0.5rem'\r\n                                            }}\r\n                                        >\r\n                                            <FaTrash />\r\n                                        </button>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Footer */}\r\n                    <div style={{\r\n                        display: 'flex',\r\n                        justifyContent: 'flex-end',\r\n                        gap: '1rem',\r\n                        paddingTop: '1rem',\r\n                        borderTop: '1px solid #222'\r\n                    }}>\r\n                        <PSButton\r\n                            variant=\"ghost\"\r\n                            onClick={onClose}\r\n                            disabled={loading}\r\n                        >\r\n                            Cancel\r\n                        </PSButton>\r\n                        <PSButton\r\n                            variant=\"mint\"\r\n                            type=\"submit\"\r\n                            disabled={loading}\r\n                        >\r\n                            {loading ? 'Creating...' : 'Create Project'}\r\n                        </PSButton>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CreateProjectModal;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\CustomDropdown.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { FaChevronDown } from 'react-icons/fa';\r\nconst CustomDropdown = ({\r\n    value,\r\n    onChange,\r\n    options = [],\r\n    placeholder = 'Select...',\r\n    style = {},\r\n    className = '',\r\n    disabled = false\r\n}) => {\r\n    const [isOpen, setIsOpen] = useState(false);\r\n    const dropdownRef = useRef(null);\r\n    const [dropdownPos, setDropdownPos] = useState({ top: 0, left: 0, width: 0 });\r\n\r\n    // Close dropdown when clicking outside\r\n    useEffect(() => {\r\n        const handleClickOutside = (event) => {\r\n            if (dropdownRef.current && !dropdownRef.current.contains(event.target)) {\r\n                // Check if click is inside the portal menu\r\n                const portalMenu = document.getElementById(`dropdown-portal-${placeholder.replace(/\\s+/g, '-')}`);\r\n                if (portalMenu && portalMenu.contains(event.target)) {\r\n                    return;\r\n                }\r\n                setIsOpen(false);\r\n            }\r\n        };\r\n\r\n        const handleScroll = () => {\r\n            if (isOpen) setIsOpen(false); // Close on scroll to avoid detached menu\r\n        };\r\n\r\n        if (isOpen) {\r\n            document.addEventListener('mousedown', handleClickOutside);\r\n            window.addEventListener('scroll', handleScroll, true);\r\n            window.addEventListener('resize', handleScroll);\r\n        }\r\n\r\n        return () => {\r\n            document.removeEventListener('mousedown', handleClickOutside);\r\n            window.removeEventListener('scroll', handleScroll, true);\r\n            window.removeEventListener('resize', handleScroll);\r\n        };\r\n    }, [isOpen, placeholder]);\r\n\r\n    // Update position when opening\r\n    useEffect(() => {\r\n        if (isOpen && dropdownRef.current) {\r\n            const rect = dropdownRef.current.getBoundingClientRect();\r\n            setDropdownPos({\r\n                top: rect.bottom + window.scrollY + 8, // 8px gap\r\n                left: rect.left + window.scrollX,\r\n                width: rect.width\r\n            });\r\n        }\r\n    }, [isOpen]);\r\n\r\n    const selectedOption = options.find(opt => opt.id === value || opt.value === value);\r\n    const displayLabel = selectedOption?.label || placeholder;\r\n\r\n    const dropdownMenu = (\r\n        <div\r\n            id={`dropdown-portal-${placeholder.replace(/\\s+/g, '-')}`}\r\n            style={{\r\n                position: 'absolute',\r\n                top: dropdownPos.top,\r\n                left: dropdownPos.left,\r\n                width: dropdownPos.width,\r\n                maxHeight: '300px',\r\n                overflowY: 'auto',\r\n                background: '#000',\r\n                border: '1px solid var(--ice-mint)',\r\n                borderRadius: '12px',\r\n                boxShadow: '0 0 20px rgba(127, 255, 212, 0.2), 0 10px 30px rgba(0,0,0,0.8)',\r\n                zIndex: 9999,\r\n                animation: 'fadeIn 0.2s ease-out'\r\n            }}\r\n        >\r\n            {options.map(opt => {\r\n                const optValue = opt.id || opt.value;\r\n                const isSelected = optValue === value;\r\n\r\n                return (\r\n                    <button\r\n                        key={optValue}\r\n                        onClick={() => {\r\n                            onChange(optValue);\r\n                            setIsOpen(false);\r\n                        }}\r\n                        style={{\r\n                            width: '100%',\r\n                            textAlign: 'left',\r\n                            padding: '0.8rem 1rem',\r\n                            background: isSelected ? 'rgba(127, 255, 212, 0.1)' : 'transparent',\r\n                            border: 'none',\r\n                            borderBottom: '1px solid rgba(255, 255, 255, 0.05)',\r\n                            color: isSelected ? 'var(--ice-mint)' : '#fff',\r\n                            fontSize: '0.85rem',\r\n                            fontFamily: \"'Rajdhani', sans-serif\",\r\n                            fontWeight: isSelected ? '600' : '500',\r\n                            cursor: 'pointer',\r\n                            transition: 'all 0.2s',\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            justifyContent: 'space-between'\r\n                        }}\r\n                        onMouseEnter={(e) => {\r\n                            if (!isSelected) {\r\n                                e.currentTarget.style.background = 'rgba(255, 255, 255, 0.05)';\r\n                                e.currentTarget.style.color = 'var(--ice-mint)';\r\n                            }\r\n                        }}\r\n                        onMouseLeave={(e) => {\r\n                            if (!isSelected) {\r\n                                e.currentTarget.style.background = 'transparent';\r\n                                e.currentTarget.style.color = '#fff';\r\n                            }\r\n                        }}\r\n                    >\r\n                        {opt.label}\r\n                        {isSelected && (\r\n                            <div style={{\r\n                                width: '6px',\r\n                                height: '6px',\r\n                                borderRadius: '50%',\r\n                                background: 'var(--ice-mint)',\r\n                                boxShadow: '0 0 5px var(--ice-mint)'\r\n                            }} />\r\n                        )}\r\n                    </button>\r\n                );\r\n            })}\r\n        </div>\r\n    );\r\n\r\n    return (\r\n        <div ref={dropdownRef} style={{ position: 'relative', ...style }} className={className}>\r\n            <button\r\n                onClick={() => !disabled && setIsOpen(!isOpen)}\r\n                disabled={disabled}\r\n                style={{\r\n                    width: '100%',\r\n                    padding: '0.6rem 1rem',\r\n                    background: isOpen ? 'rgba(127, 255, 212, 0.15)' : 'rgba(255, 255, 255, 0.03)',\r\n                    border: isOpen ? '1px solid var(--ice-mint)' : '1px solid rgba(255, 255, 255, 0.08)',\r\n                    borderRadius: '8px',\r\n                    color: isOpen ? 'var(--ice-mint)' : 'rgba(255, 255, 255, 0.9)',\r\n                    fontSize: '0.85rem',\r\n                    cursor: disabled ? 'not-allowed' : 'pointer',\r\n                    outline: 'none',\r\n                    fontFamily: \"'Rajdhani', sans-serif\",\r\n                    fontWeight: '600',\r\n                    letterSpacing: '0.05em',\r\n                    transition: 'all 0.3s ease',\r\n                    backdropFilter: 'blur(10px)',\r\n                    textTransform: 'uppercase',\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'space-between',\r\n                    gap: '0.5rem',\r\n                    opacity: disabled ? 0.5 : 1\r\n                }}\r\n            >\r\n                <span style={{\r\n                    overflow: 'hidden',\r\n                    textOverflow: 'ellipsis',\r\n                    whiteSpace: 'nowrap'\r\n                }}>\r\n                    {displayLabel}\r\n                </span>\r\n                <FaChevronDown style={{\r\n                    fontSize: '0.7rem',\r\n                    opacity: 0.8,\r\n                    transform: isOpen ? 'rotate(180deg)' : 'rotate(0deg)',\r\n                    transition: 'transform 0.2s ease'\r\n                }} />\r\n            </button>\r\n\r\n            {/* Render Dropdown via Portal */}\r\n            {isOpen && ReactDOM.createPortal(dropdownMenu, document.body)}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CustomDropdown;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\DateStampOverlay.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\DisciplineSelector.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { FaCheck, FaChevronDown, FaChevronUp } from 'react-icons/fa';\r\nimport { ART_DISCIPLINES } from '@/core/constants/artDisciplines';\r\n\r\nconst DisciplineSelector = ({\r\n    selectedMain,\r\n    selectedNiches,\r\n    expandedDiscipline,\r\n    setExpandedDiscipline,\r\n    toggleMainDiscipline,\r\n    toggleNiche\r\n}) => {\r\n    // Collapsed by default\r\n    const [isSectionCollapsed, setIsSectionCollapsed] = useState(true);\r\n\r\n    return (\r\n        <div className=\"form-group\">\r\n            <div\r\n                onClick={() => setIsSectionCollapsed(!isSectionCollapsed)}\r\n                style={{\r\n                    display: 'flex',\r\n                    justifyContent: 'space-between',\r\n                    alignItems: 'center',\r\n                    marginBottom: '0.5rem',\r\n                    cursor: 'pointer'\r\n                }}\r\n            >\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                    <label style={{ color: '#7FFFD4', fontSize: '0.85rem', fontWeight: '600', letterSpacing: '0.05em', textTransform: 'uppercase', cursor: 'pointer' }}>Art Disciplines</label>\r\n                    <span style={{ fontSize: '0.8rem', color: '#888' }}>\r\n                        {selectedMain.length} selected\r\n                    </span>\r\n                </div>\r\n                {isSectionCollapsed ? <FaChevronDown color=\"#7FFFD4\" size={14} /> : <FaChevronUp color=\"#7FFFD4\" size={14} />}\r\n            </div>\r\n\r\n            {!isSectionCollapsed && (\r\n                <>\r\n                    <p style={{ fontSize: '0.8rem', color: '#888', marginBottom: '1rem' }}>\r\n                        Select your main disciplines. Click to deselect. Use arrow to view niches.\r\n                    </p>\r\n\r\n                    <div style={{ display: 'flex', flexDirection: 'column', gap: '0.8rem' }}>\r\n                        {Object.keys(ART_DISCIPLINES).map(discipline => {\r\n                            const isSelected = selectedMain.includes(discipline);\r\n                            const isExpanded = expandedDiscipline === discipline;\r\n                            const nicheCount = selectedNiches[discipline]?.length || 0;\r\n\r\n                            return (\r\n                                <div key={discipline} style={{\r\n                                    background: isSelected ? 'rgba(127, 255, 212, 0.1)' : 'transparent',\r\n                                    borderRadius: '12px',\r\n                                    border: isSelected ? '1px solid rgba(127, 255, 212, 0.3)' : '1px solid transparent',\r\n                                    overflow: 'hidden',\r\n                                    transition: 'all 0.2s'\r\n                                }}>\r\n                                    <button\r\n                                        type=\"button\"\r\n                                        onClick={() => {\r\n                                            if (isSelected) {\r\n                                                // If already selected, allow toggling it off OR expanding/collapsing\r\n                                                // Click on the main button area toggles selection\r\n                                                toggleMainDiscipline(discipline);\r\n                                            } else {\r\n                                                // If not selected, select it\r\n                                                toggleMainDiscipline(discipline);\r\n                                            }\r\n                                        }}\r\n                                        style={{\r\n                                            width: '100%',\r\n                                            padding: '1rem',\r\n                                            display: 'flex',\r\n                                            justifyContent: 'space-between',\r\n                                            alignItems: 'center',\r\n                                            background: isSelected ? 'rgba(127, 255, 212, 0.05)' : 'rgba(127, 255, 212, 0.02)',\r\n                                            border: 'none',\r\n                                            color: isSelected ? '#7FFFD4' : '#aaa',\r\n                                            cursor: 'pointer',\r\n                                            textAlign: 'left',\r\n                                            fontSize: '0.95rem',\r\n                                            borderRadius: '12px',\r\n                                            transition: 'all 0.2s',\r\n                                            fontWeight: isSelected ? '600' : '400'\r\n                                        }}\r\n                                    >\r\n                                        <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                                            {isSelected && <FaCheck size={12} color=\"#4CAF50\" />}\r\n                                            {discipline}\r\n                                        </div>\r\n                                        {isSelected && (\r\n                                            <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                                                {nicheCount > 0 && (\r\n                                                    <span style={{ fontSize: '0.75rem', background: '#333', padding: '2px 6px', borderRadius: '10px' }}>\r\n                                                        {nicheCount} niches\r\n                                                    </span>\r\n                                                )}\r\n                                                <button\r\n                                                    type=\"button\"\r\n                                                    onClick={(e) => {\r\n                                                        e.stopPropagation();\r\n                                                        setExpandedDiscipline(isExpanded ? null : discipline);\r\n                                                    }}\r\n                                                    style={{\r\n                                                        background: 'transparent',\r\n                                                        border: 'none',\r\n                                                        color: '#666',\r\n                                                        cursor: 'pointer',\r\n                                                        padding: '0.25rem',\r\n                                                        display: 'flex',\r\n                                                        alignItems: 'center'\r\n                                                    }}\r\n                                                >\r\n                                                    <span style={{ fontSize: '0.8rem' }}>\r\n                                                        {isExpanded ? 'Γû╝' : 'Γû╢'}\r\n                                                    </span>\r\n                                                </button>\r\n                                            </div>\r\n                                        )}\r\n                                    </button>\r\n\r\n                                    {/* Sub-niches Accordion */}\r\n                                    {isExpanded && isSelected && (\r\n                                        <div style={{ padding: '1rem', borderTop: '1px solid #333', background: '#1a1a1a' }}>\r\n                                            <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '0.8rem' }}>\r\n                                                <span style={{ fontSize: '0.8rem', color: '#888' }}>Select specific niches</span>\r\n                                                <span style={{ fontSize: '0.8rem', color: '#888' }}>\r\n                                                    {Object.values(selectedNiches).flat().length} selected\r\n                                                </span>\r\n                                            </div>\r\n                                            <div style={{\r\n                                                display: 'grid',\r\n                                                gridTemplateRows: 'repeat(2, min-content)',\r\n                                                gridAutoFlow: 'column',\r\n                                                gridAutoColumns: 'max-content',\r\n                                                gap: '0.5rem',\r\n                                                rowGap: '0.8rem',\r\n                                                width: '100%',\r\n                                                overflowX: 'auto',\r\n                                                overflowY: 'hidden',\r\n                                                paddingBottom: '0.5rem',\r\n                                                scrollbarWidth: 'thin',\r\n                                                scrollbarColor: 'rgba(127, 255, 212, 0.3) rgba(255, 255, 255, 0.02)'\r\n                                            }}>\r\n                                                {ART_DISCIPLINES[discipline].map(niche => {\r\n                                                    const isNicheSelected = selectedNiches[discipline]?.includes(niche);\r\n                                                    return (\r\n                                                        <button\r\n                                                            key={niche}\r\n                                                            type=\"button\"\r\n                                                            onClick={() => toggleNiche(discipline, niche)}\r\n                                                            style={{\r\n                                                                padding: '0.4rem 0.8rem',\r\n                                                                fontSize: '0.8rem',\r\n                                                                borderRadius: '20px',\r\n                                                                border: isNicheSelected ? '1px solid #7FFFD4' : '1px solid rgba(127, 255, 212, 0.2)',\r\n                                                                background: isNicheSelected ? '#7FFFD4' : 'rgba(127, 255, 212, 0.05)',\r\n                                                                color: isNicheSelected ? '#000' : '#ccc',\r\n                                                                cursor: 'pointer',\r\n                                                                whiteSpace: 'nowrap',\r\n                                                                transition: 'all 0.2s',\r\n                                                                fontWeight: isNicheSelected ? '600' : '400'\r\n                                                            }}\r\n                                                        >\r\n                                                            {niche}\r\n                                                        </button>\r\n                                                    );\r\n                                                })}\r\n                                            </div>\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            );\r\n                        })}\r\n                    </div>\r\n                </>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default DisciplineSelector;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\DisciplinesModal.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { FaTimes } from 'react-icons/fa';\r\n\r\nconst DisciplinesModal = ({ disciplines, onClose }) => {\r\n    const navigate = useNavigate();\r\n\r\n    if (!disciplines || (!disciplines.main?.length && !Object.keys(disciplines.niches || {}).length)) {\r\n        return null;\r\n    }\r\n\r\n    const handleTagClick = (tag) => {\r\n        navigate(`/search?tags=${encodeURIComponent(tag)}`);\r\n        onClose();\r\n    };\r\n\r\n    return (\r\n        <div\r\n            onClick={onClose}\r\n            style={{\r\n                position: 'fixed',\r\n                inset: 0,\r\n                background: 'rgba(0, 0, 0, 0.85)',\r\n                backdropFilter: 'blur(8px)',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'center',\r\n                zIndex: 1000,\r\n                padding: '1rem'\r\n            }}\r\n        >\r\n            <div\r\n                onClick={(e) => e.stopPropagation()}\r\n                style={{\r\n                    background: '#111',\r\n                    borderRadius: '16px',\r\n                    border: '1px solid rgba(127, 255, 212, 0.2)',\r\n                    maxWidth: '500px',\r\n                    width: '100%',\r\n                    maxHeight: '80vh',\r\n                    display: 'flex',\r\n                    flexDirection: 'column',\r\n                    overflow: 'hidden',\r\n                    boxShadow: '0 0 30px rgba(127, 255, 212, 0.1)'\r\n                }}\r\n            >\r\n                {/* Header */}\r\n                <div style={{\r\n                    padding: '1.5rem',\r\n                    borderBottom: '1px solid rgba(127, 255, 212, 0.2)',\r\n                    display: 'flex',\r\n                    justifyContent: 'space-between',\r\n                    alignItems: 'center'\r\n                }}>\r\n                    <h2 style={{\r\n                        margin: 0,\r\n                        fontSize: '1.2rem',\r\n                        fontWeight: '700',\r\n                        color: '#7FFFD4',\r\n                        fontFamily: 'var(--font-family-heading)',\r\n                        letterSpacing: '0.05em',\r\n                        textTransform: 'uppercase'\r\n                    }}>\r\n                        Art Disciplines\r\n                    </h2>\r\n                    <button\r\n                        onClick={onClose}\r\n                        style={{\r\n                            background: 'transparent',\r\n                            border: 'none',\r\n                            color: '#888',\r\n                            cursor: 'pointer',\r\n                            padding: '0.5rem',\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            justifyContent: 'center'\r\n                        }}\r\n                    >\r\n                        <FaTimes size={20} />\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Scrollable Content */}\r\n                <div style={{\r\n                    padding: '1.5rem',\r\n                    overflowY: 'auto',\r\n                    flex: 1\r\n                }}>\r\n                    {disciplines.main?.map(mainDiscipline => {\r\n                        const niches = disciplines.niches?.[mainDiscipline] || [];\r\n\r\n                        return (\r\n                            <div key={mainDiscipline} style={{ marginBottom: '1.5rem' }}>\r\n                                {/* Main Discipline */}\r\n                                <button\r\n                                    onClick={() => handleTagClick(mainDiscipline)}\r\n                                    style={{\r\n                                        padding: '0.6rem 1rem',\r\n                                        fontSize: '0.95rem',\r\n                                        borderRadius: '8px',\r\n                                        border: '1px solid #7FFFD4',\r\n                                        background: 'rgba(127, 255, 212, 0.1)',\r\n                                        color: '#7FFFD4',\r\n                                        cursor: 'pointer',\r\n                                        fontWeight: '600',\r\n                                        marginBottom: niches.length > 0 ? '0.75rem' : '0',\r\n                                        display: 'block',\r\n                                        width: '100%',\r\n                                        textAlign: 'left',\r\n                                        transition: 'all 0.2s',\r\n                                        fontFamily: 'var(--font-family-heading)',\r\n                                        letterSpacing: '0.05em'\r\n                                    }}\r\n                                    onMouseEnter={(e) => {\r\n                                        e.target.style.background = 'rgba(127, 255, 212, 0.2)';\r\n                                        e.target.style.transform = 'translateX(4px)';\r\n                                    }}\r\n                                    onMouseLeave={(e) => {\r\n                                        e.target.style.background = 'rgba(127, 255, 212, 0.1)';\r\n                                        e.target.style.transform = 'translateX(0)';\r\n                                    }}\r\n                                >\r\n                                    {mainDiscipline}\r\n                                </button>\r\n\r\n                                {/* Sub-niches */}\r\n                                {niches.length > 0 && (\r\n                                    <div style={{\r\n                                        display: 'flex',\r\n                                        flexWrap: 'wrap',\r\n                                        gap: '0.5rem',\r\n                                        paddingLeft: '1rem'\r\n                                    }}>\r\n                                        {niches.map(niche => (\r\n                                            <button\r\n                                                key={niche}\r\n                                                onClick={() => handleTagClick(niche)}\r\n                                                style={{\r\n                                                    padding: '0.4rem 0.8rem',\r\n                                                    fontSize: '0.8rem',\r\n                                                    borderRadius: '20px',\r\n                                                    border: '1px solid rgba(127, 255, 212, 0.3)',\r\n                                                    background: 'rgba(127, 255, 212, 0.05)',\r\n                                                    color: '#aaa',\r\n                                                    cursor: 'pointer',\r\n                                                    whiteSpace: 'nowrap',\r\n                                                    transition: 'all 0.2s'\r\n                                                }}\r\n                                                onMouseEnter={(e) => {\r\n                                                    e.target.style.background = 'rgba(127, 255, 212, 0.15)';\r\n                                                    e.target.style.color = '#7FFFD4';\r\n                                                    e.target.style.borderColor = '#7FFFD4';\r\n                                                }}\r\n                                                onMouseLeave={(e) => {\r\n                                                    e.target.style.background = 'rgba(127, 255, 212, 0.05)';\r\n                                                    e.target.style.color = '#aaa';\r\n                                                    e.target.style.borderColor = 'rgba(127, 255, 212, 0.3)';\r\n                                                }}\r\n                                            >\r\n                                                {niche}\r\n                                            </button>\r\n                                        ))}\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        );\r\n                    })}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default DisciplinesModal;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\DropTimer.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useEffect' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useState' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":36},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaCalendar' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":29},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaUsers' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":31,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":38},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaTrophy' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":40,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":48}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\r\nimport { useCountdown } from '@/hooks/useCountdown';\r\nimport { getEventStatus, shouldShowSubmissions, canSubmitToEvent } from '@/core/utils/eventValidation';\r\nimport { FaClock, FaCalendar, FaUsers, FaTrophy } from 'react-icons/fa';\r\n\r\n/**\r\n * DropTimer Component\r\n * Shows countdown to drop reveal time\r\n */\r\nconst DropTimer = ({ event }) => {\r\n    const targetDate = event.dropTime || event.startTime;\r\n    const { days, hours, minutes, seconds, isExpired } = useCountdown(targetDate);\r\n\r\n    let timeLeft = '';\r\n    if (isExpired) {\r\n        timeLeft = 'DROP REVEALED!';\r\n    } else {\r\n        if (days > 0) {\r\n            timeLeft = `${days}d ${hours}h ${minutes}m`;\r\n        } else if (hours > 0) {\r\n            timeLeft = `${hours}h ${minutes}m ${seconds}s`;\r\n        } else {\r\n            timeLeft = `${minutes}m ${seconds}s`;\r\n        }\r\n    }\r\n\r\n    if (!event.isTimedDrop && event.eventType !== 'timed-drop') {\r\n        return null;\r\n    }\r\n\r\n    const showSubmissions = shouldShowSubmissions(event);\r\n\r\n    return (\r\n        <div style={{\r\n            background: showSubmissions ? 'rgba(127, 255, 212, 0.1)' : 'rgba(255, 107, 53, 0.1)',\r\n            border: `1px solid ${showSubmissions ? '#7FFFD4' : '#FF6B35'}`,\r\n            borderRadius: '12px',\r\n            padding: '1.5rem',\r\n            marginBottom: '1.5rem',\r\n            textAlign: 'center'\r\n        }}>\r\n            <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center', gap: '0.5rem', marginBottom: '0.5rem' }}>\r\n                <FaClock size={20} color={showSubmissions ? '#7FFFD4' : '#FF6B35'} />\r\n                <h3 style={{ fontSize: '1.1rem', fontWeight: 'bold', color: showSubmissions ? '#7FFFD4' : '#FF6B35' }}>\r\n                    {showSubmissions ? 'TIMED DROP REVEALED' : 'TIMED DROP'}\r\n                </h3>\r\n            </div>\r\n            <div style={{ fontSize: '2rem', fontWeight: 'bold', color: '#fff', marginBottom: '0.5rem' }}>\r\n                {timeLeft}\r\n            </div>\r\n            <div style={{ fontSize: '0.9rem', color: '#888' }}>\r\n                {showSubmissions ? 'All submissions are now visible' : 'Submissions will reveal at drop time'}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n/**\r\n * EventStatus Component\r\n * Shows event status and timing\r\n */\r\nexport const EventStatus = ({ event }) => {\r\n    const status = getEventStatus(event);\r\n    const { canSubmit, reason } = canSubmitToEvent(event);\r\n\r\n    const statusColors = {\r\n        upcoming: '#FFD700',\r\n        open: '#7FFFD4',\r\n        closed: '#888'\r\n    };\r\n\r\n    const statusLabels = {\r\n        upcoming: 'Upcoming',\r\n        open: 'Open for Submissions',\r\n        closed: 'Closed'\r\n    };\r\n\r\n    return (\r\n        <div style={{\r\n            background: '#111',\r\n            borderRadius: '12px',\r\n            padding: '1.5rem',\r\n            marginBottom: '1.5rem'\r\n        }}>\r\n            <div style={{ display: 'flex', alignItems: 'center', gap: '1rem', marginBottom: '1rem' }}>\r\n                <div style={{\r\n                    background: statusColors[status],\r\n                    color: '#000',\r\n                    padding: '0.5rem 1rem',\r\n                    borderRadius: '20px',\r\n                    fontWeight: 'bold',\r\n                    fontSize: '0.9rem'\r\n                }}>\r\n                    {statusLabels[status]}\r\n                </div>\r\n                {!canSubmit && (\r\n                    <div style={{ fontSize: '0.9rem', color: '#888' }}>\r\n                        {reason}\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '1rem', fontSize: '0.9rem' }}>\r\n                <div>\r\n                    <div style={{ color: '#888', marginBottom: '0.25rem' }}>Starts</div>\r\n                    <div style={{ color: '#fff' }}>{new Date(event.startTime).toLocaleString()}</div>\r\n                </div>\r\n                <div>\r\n                    <div style={{ color: '#888', marginBottom: '0.25rem' }}>Ends</div>\r\n                    <div style={{ color: '#fff' }}>{new Date(event.expiresAt).toLocaleString()}</div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default DropTimer;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\EventCard.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { FaCalendar, FaMapMarkerAlt } from 'react-icons/fa';\r\nimport { formatDateForDisplay } from '@/core/utils/dates';\r\n\r\nconst EventCard = ({ event }) => {\r\n    const navigate = useNavigate();\r\n\r\n    return (\r\n        <div\r\n            onClick={() => navigate(`/event/${event.id}`)}\r\n            style={{\r\n                background: 'rgba(255,255,255,0.03)',\r\n                borderRadius: '12px',\r\n                overflow: 'hidden',\r\n                cursor: 'pointer',\r\n                border: '1px solid rgba(255,255,255,0.05)',\r\n                transition: 'transform 0.2s'\r\n            }}\r\n            onMouseEnter={e => e.currentTarget.style.transform = 'translateY(-4px)'}\r\n            onMouseLeave={e => e.currentTarget.style.transform = 'translateY(0)'}\r\n        >\r\n            <div style={{ aspectRatio: '3/2', background: '#111', position: 'relative' }}>\r\n                {event.coverImage && (\r\n                    <img src={event.coverImage} alt=\"\" style={{ width: '100%', height: '100%', objectFit: 'cover' }} />\r\n                )}\r\n                <div style={{\r\n                    position: 'absolute',\r\n                    top: '1rem',\r\n                    right: '1rem',\r\n                    background: 'rgba(0,0,0,0.8)',\r\n                    borderRadius: '8px',\r\n                    padding: '0.5rem',\r\n                    textAlign: 'center',\r\n                    minWidth: '50px'\r\n                }}>\r\n                    <div style={{ fontSize: '0.75rem', color: 'var(--ice-mint)', fontWeight: 600 }}>\r\n                        {event.date ? new Date(event.date.seconds * 1000).toLocaleString('default', { month: 'short' }).toUpperCase() : 'TBD'}\r\n                    </div>\r\n                    <div style={{ fontSize: '1.2rem', color: '#fff', fontWeight: 700 }}>\r\n                        {event.date ? new Date(event.date.seconds * 1000).getDate() : '--'}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div style={{ padding: '1rem' }}>\r\n                <h4 style={{ margin: '0 0 0.5rem 0', color: '#fff', fontSize: '1.1rem' }}>{event.title}</h4>\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', color: '#888', fontSize: '0.85rem', marginBottom: '0.25rem' }}>\r\n                    <FaMapMarkerAlt size={12} />\r\n                    <span>{event.location || 'Online'}</span>\r\n                </div>\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', color: '#888', fontSize: '0.85rem' }}>\r\n                    <FaCalendar size={12} />\r\n                    <span>{event.date ? formatDateForDisplay(new Date(event.date.seconds * 1000)) : 'Date TBD'}</span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default EventCard;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\EventSubmissionModal.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchUserPosts'. Either include it or remove the dependency array.","line":19,"column":8,"nodeType":"ArrayExpression","endLine":19,"endColumn":29,"suggestions":[{"desc":"Update the dependencies array to be: [isOpen, currentUser, fetchUserPosts]","fix":{"range":[805,826],"text":"[isOpen, currentUser, fetchUserPosts]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport { useAuth } from '@/context/AuthContext';\nimport { useEventSystem } from '@/hooks/useEventSystem';\nimport { collection, query, where, getDocs, orderBy, limit } from 'firebase/firestore';\nimport { db } from '@/firebase';\nimport { FaTimes, FaCheckCircle } from 'react-icons/fa';\n\nconst EventSubmissionModal = ({ isOpen, onClose, eventId, eventTitle, isExpired }) => {\n    const { currentUser } = useAuth();\n    const { submitToEvent, loading: submitting } = useEventSystem();\n    const [posts, setPosts] = useState([]);\n    const [loadingPosts, setLoadingPosts] = useState(false);\n    const [selectedPost, setSelectedPost] = useState(null);\n\n    useEffect(() => {\n        if (isOpen && currentUser) {\n            fetchUserPosts();\n        }\n    }, [isOpen, currentUser]);\n\n    const fetchUserPosts = async () => {\n        setLoadingPosts(true);\n        try {\n            // Fetch user's recent posts to choose from\n            // Supports both 'userId' and 'authorId' for backward compatibility\n            const q = query(\n                collection(db, 'posts'),\n                where('userId', '==', currentUser.uid),\n                orderBy('createdAt', 'desc'),\n                limit(20)\n            );\n            const snapshot = await getDocs(q);\n            const userPosts = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\n            setPosts(userPosts);\n        } catch (err) {\n            console.error(\"Error fetching user posts:\", err);\n        } finally {\n            setLoadingPosts(false);\n        }\n    };\n\n    const handleSubmit = async () => {\n        if (isExpired) {\n            alert(\"This event has ended. You can no longer submit.\");\n            onClose();\n            return;\n        }\n        if (!selectedPost) return;\n        try {\n            await submitToEvent(eventId, selectedPost, currentUser);\n            alert(\"Successfully submitted to \" + eventTitle);\n            onClose();\n            // Optionally trigger a refresh in parent\n        } catch (err) {\n            alert(err.message);\n        }\n    };\n\n    if (!isOpen) return null;\n\n    return (\n        <div style={{\n            position: 'fixed', top: 0, left: 0, right: 0, bottom: 0,\n            background: 'rgba(0,0,0,0.9)', zIndex: 1000,\n            display: 'flex', alignItems: 'center', justifyContent: 'center'\n        }}>\n            <div style={{\n                width: '90%', maxWidth: '600px', maxHeight: '80vh',\n                background: '#111', border: '1px solid #333', borderRadius: '12px',\n                display: 'flex', flexDirection: 'column'\n            }}>\n                <div style={{ padding: '1.5rem', borderBottom: '1px solid #333', display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n                    <h2 style={{ fontSize: '1.2rem', fontWeight: 'bold' }}>Submit to {eventTitle}</h2>\n                    <button onClick={onClose} style={{ background: 'none', border: 'none', color: '#888', cursor: 'pointer', fontSize: '1.2rem' }}><FaTimes /></button>\n                </div>\n\n                <div style={{ padding: '1.5rem', overflowY: 'auto', flex: 1 }}>\n                    <p style={{ color: '#ccc', marginBottom: '1rem' }}>Select a photo from your profile:</p>\n\n                    {loadingPosts ? (\n                        <div style={{ color: '#888', textAlign: 'center' }}>Loading your photos...</div>\n                    ) : (\n                        <div style={{ display: 'grid', gridTemplateColumns: 'repeat(3, 1fr)', gap: '0.5rem' }}>\n                            {posts.map(post => {\n                                const imgUrl = post.imageUrl || post.images?.[0]?.url;\n                                const isSelected = selectedPost?.id === post.id;\n                                return (\n                                    <div\n                                        key={post.id}\n                                        onClick={() => setSelectedPost(post)}\n                                        style={{\n                                            aspectRatio: '1',\n                                            position: 'relative',\n                                            cursor: 'pointer',\n                                            border: isSelected ? '3px solid #7FFFD4' : 'none',\n                                            borderRadius: '4px',\n                                            overflow: 'hidden'\n                                        }}\n                                    >\n                                        <img src={imgUrl} alt=\"\" style={{ width: '100%', height: '100%', objectFit: 'cover', opacity: isSelected ? 1 : 0.7 }} />\n                                        {isSelected && (\n                                            <div style={{ position: 'absolute', top: '5px', right: '5px', color: '#7FFFD4', background: 'rgba(0,0,0,0.5)', borderRadius: '50%' }}>\n                                                <FaCheckCircle />\n                                            </div>\n                                        )}\n                                    </div>\n                                );\n                            })}\n                        </div>\n                    )}\n                    {posts.length === 0 && !loadingPosts && (\n                        <div style={{ textAlign: 'center', color: '#666', padding: '2rem' }}>\n                            You haven't posted any photos yet.\n                        </div>\n                    )}\n                </div>\n\n                <div style={{ padding: '1.5rem', borderTop: '1px solid #333', display: 'flex', justifyContent: 'flex-end', gap: '1rem' }}>\n                    <button onClick={onClose} style={{ padding: '0.8rem 1.5rem', background: 'transparent', color: '#fff', border: '1px solid #333', borderRadius: '8px', cursor: 'pointer' }}>Cancel</button>\n                    <button\n                        onClick={handleSubmit}\n                        disabled={!selectedPost || submitting}\n                        style={{\n                            padding: '0.8rem 1.5rem',\n                            background: !selectedPost ? '#333' : '#7FFFD4',\n                            color: !selectedPost ? '#666' : '#000',\n                            border: 'none', borderRadius: '8px', cursor: !selectedPost ? 'not-allowed' : 'pointer', fontWeight: 'bold'\n                        }}\n                    >\n                        {submitting ? 'Submitting...' : 'Submit Photo'}\n                    </button>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default EventSubmissionModal;\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\ExifModal.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { FaTimes, FaCamera } from 'react-icons/fa';\r\nimport { formatAperture, formatExifDate } from '@/core/utils/exif';\r\n\r\nconst ExifModal = ({ exifData, onClose }) => {\r\n    if (!exifData) return null;\r\n\r\n    const exifFields = [\r\n        { label: 'Camera', key: 'make', format: (val) => val },\r\n        { label: 'Model', key: 'model', format: (val) => val },\r\n        { label: 'Lens', key: 'lens', format: (val) => val },\r\n        { label: 'Focal Length', key: 'focalLength', format: (val) => val },\r\n        { label: 'Aperture', key: 'aperture', format: formatAperture },\r\n        { label: 'ISO', key: 'iso', format: (val) => val },\r\n        { label: 'Shutter Speed', key: 'shutterSpeed', format: (val) => val },\r\n        { label: 'Date Taken', key: 'date', format: formatExifDate }\r\n    ];\r\n\r\n    const availableFields = exifFields.filter(field => exifData[field.key]);\r\n\r\n    if (availableFields.length === 0) return null;\r\n\r\n    return (\r\n        <div\r\n            style={{\r\n                position: 'fixed',\r\n                bottom: 0,\r\n                left: 0,\r\n                right: 0,\r\n                background: 'rgba(0, 0, 0, 0.98)',\r\n                backdropFilter: 'blur(10px)',\r\n                borderTopLeftRadius: '20px',\r\n                borderTopRightRadius: '20px',\r\n                padding: '1.5rem',\r\n                zIndex: 10000,\r\n                maxHeight: '60vh',\r\n                overflowY: 'auto',\r\n                animation: 'slideUp 0.3s ease-out',\r\n                boxShadow: '0 -4px 20px rgba(0,0,0,0.5)',\r\n                border: '1px solid #333',\r\n                borderBottom: 'none'\r\n            }}\r\n            onClick={(e) => {\r\n                // Close when tapping outside the content\r\n                if (e.target === e.currentTarget) onClose();\r\n            }}\r\n        >\r\n            {/* Header */}\r\n            <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', marginBottom: '1.5rem' }}>\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: '0.75rem' }}>\r\n                    <FaCamera size={20} style={{ color: '#4CAF50' }} />\r\n                    <h3 style={{ fontSize: '1.1rem', fontWeight: 'bold', color: '#fff', margin: 0 }}>EXIF Data</h3>\r\n                </div>\r\n                <button\r\n                    onClick={onClose}\r\n                    style={{\r\n                        background: 'transparent',\r\n                        border: 'none',\r\n                        color: '#666',\r\n                        cursor: 'pointer',\r\n                        padding: '0.5rem',\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        justifyContent: 'center'\r\n                    }}\r\n                >\r\n                    <FaTimes size={20} />\r\n                </button>\r\n            </div>\r\n\r\n            {/* EXIF Fields Grid */}\r\n            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(140px, 1fr))', gap: '1rem' }}>\r\n                {availableFields.map(field => (\r\n                    <div key={field.key} style={{ padding: '0.75rem', background: '#111', borderRadius: '8px', border: '1px solid #222' }}>\r\n                        <div style={{ fontSize: '0.7rem', color: '#888', marginBottom: '0.25rem', textTransform: 'uppercase', letterSpacing: '0.5px' }}>\r\n                            {field.label}\r\n                        </div>\r\n                        <div style={{ fontSize: '0.95rem', fontWeight: '500', color: '#fff' }}>\r\n                            {field.format(exifData[field.key])}\r\n                        </div>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n\r\n            <style>{`\r\n                @keyframes slideUp {\r\n                    from {\r\n                        transform: translateY(100%);\r\n                        opacity: 0;\r\n                    }\r\n                    to {\r\n                        transform: translateY(0);\r\n                        opacity: 1;\r\n                    }\r\n                }\r\n            `}</style>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ExifModal;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\FeedPostCard.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { FaImage } from 'react-icons/fa';\r\n\r\nconst FeedPostCard = ({ post, contextPosts }) => {\r\n    const navigate = useNavigate();\r\n\r\n    return (\r\n        <div\r\n            onClick={() => navigate(`/post/${post.id}`, {\r\n                state: {\r\n                    contextPosts: contextPosts,\r\n                    initialIndex: contextPosts ? contextPosts.findIndex(p => p.id === post.id) : 0\r\n                }\r\n            })}\r\n            style={{\r\n                background: 'rgba(255,255,255,0.03)',\r\n                borderRadius: '12px',\r\n                overflow: 'hidden',\r\n                cursor: 'pointer',\r\n                border: '1px solid rgba(255,255,255,0.05)',\r\n                transition: 'transform 0.2s',\r\n                display: 'flex',\r\n                gap: '1rem'\r\n            }}\r\n            onMouseEnter={e => e.currentTarget.style.transform = 'translateY(-4px)'}\r\n            onMouseLeave={e => e.currentTarget.style.transform = 'translateY(0)'}\r\n        >\r\n            <div style={{ width: '200px', height: '200px', flexShrink: 0, background: '#111' }}>\r\n                {post.images?.[0]?.url || post.imageUrl ? (\r\n                    <img src={post.images?.[0]?.url || post.imageUrl} alt=\"\" loading=\"lazy\" style={{ width: '100%', height: '100%', objectFit: 'cover' }} />\r\n                ) : (\r\n                    <div style={{ width: '100%', height: '100%', display: 'flex', alignItems: 'center', justifyContent: 'center' }}><FaImage color=\"#333\" /></div>\r\n                )}\r\n            </div>\r\n        </div >\r\n    );\r\n};\r\n\r\nexport default FeedPostCard;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\FeedSwipeTooltip.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Feed Swipe Tooltip - First-time tooltip for feed switching\r\n * Shows once to teach users about swipe gesture\r\n */\r\n\r\nimport React, { useEffect, useState } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { useFeedStore } from '@/core/store/useFeedStore';\r\n\r\nconst FeedSwipeTooltip = () => {\r\n    const { hasSeenSwipeTooltip, markTooltipSeen } = useFeedStore();\r\n    const [show, setShow] = useState(false);\r\n\r\n    useEffect(() => {\r\n        // Show tooltip after 2 seconds if user hasn't seen it\r\n        if (!hasSeenSwipeTooltip) {\r\n            const timer = setTimeout(() => {\r\n                setShow(true);\r\n            }, 2000);\r\n\r\n            return () => clearTimeout(timer);\r\n        }\r\n    }, [hasSeenSwipeTooltip]);\r\n\r\n    useEffect(() => {\r\n        // Auto-hide after 6 seconds\r\n        if (show) {\r\n            const timer = setTimeout(() => {\r\n                setShow(false);\r\n                markTooltipSeen();\r\n            }, 6000);\r\n\r\n            return () => clearTimeout(timer);\r\n        }\r\n    }, [show, markTooltipSeen]);\r\n\r\n    if (!show || hasSeenSwipeTooltip) return null;\r\n\r\n    return (\r\n        <AnimatePresence>\r\n            <motion.div\r\n                initial={{ opacity: 0, y: -20 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                exit={{ opacity: 0, y: -20 }}\r\n                transition={{ duration: 0.3 }}\r\n                style={{\r\n                    position: 'fixed',\r\n                    top: 'max(4.5rem, calc(env(safe-area-inset-top) + 3.5rem))',\r\n                    left: '50%',\r\n                    transform: 'translateX(-50%)',\r\n                    zIndex: 9999,\r\n                    pointerEvents: 'none'\r\n                }}\r\n            >\r\n                <div\r\n                    style={{\r\n                        background: 'linear-gradient(135deg, rgba(127, 255, 212, 0.95), rgba(0, 206, 209, 0.95))',\r\n                        color: '#000',\r\n                        padding: '0.75rem 1.25rem',\r\n                        borderRadius: '12px',\r\n                        fontSize: '0.9rem',\r\n                        fontWeight: '600',\r\n                        fontFamily: \"'Rajdhani', sans-serif\",\r\n                        letterSpacing: '0.03em',\r\n                        boxShadow: '0 4px 20px rgba(127, 255, 212, 0.4), 0 0 40px rgba(127, 255, 212, 0.2)',\r\n                        backdropFilter: 'blur(10px)',\r\n                        border: '1px solid rgba(255, 255, 255, 0.3)',\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        gap: '0.5rem'\r\n                    }}\r\n                >\r\n                    <span style={{ fontSize: '1.2rem' }}>≡ƒæê</span>\r\n                    <span>Swipe left to view your Social Feed</span>\r\n                    <span style={{ fontSize: '1.2rem' }}>≡ƒæë</span>\r\n                </div>\r\n            </motion.div>\r\n        </AnimatePresence>\r\n    );\r\n};\r\n\r\nexport default FeedSwipeTooltip;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\FeedTypeIndicator.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'getFeedLabel' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":22},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'show'. Either include it or remove the dependency array.","line":18,"column":8,"nodeType":"ArrayExpression","endLine":18,"endColumn":21,"suggestions":[{"desc":"Update the dependencies array to be: [show, switchCount]","fix":{"range":[656,669],"text":"[show, switchCount]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { getFeedLabel } from '@/config/feedConfig';\r\n\r\n/**\r\n * FeedTypeIndicator - Shows which feed is active when switching\r\n * Displays for 1.5 seconds then fades out\r\n */\r\nconst FeedTypeIndicator = ({ feedType, show, switchCount }) => {\r\n    const [visible, setVisible] = useState(false);\r\n\r\n    // Use switchCount to trigger on every switch, not just when show changes\r\n    useEffect(() => {\r\n        if (show && switchCount > 0) {\r\n            setVisible(true);\r\n            const timer = setTimeout(() => setVisible(false), 1500);\r\n            return () => clearTimeout(timer);\r\n        }\r\n    }, [switchCount]); // Trigger on switchCount change\r\n\r\n    if (!visible) return null;\r\n\r\n    return (\r\n        <>\r\n            <style>\r\n                {`\r\n                    @keyframes fadeInOut {\r\n                        0% { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }\r\n                        20% { opacity: 1; transform: translate(-50%, -50%) scale(1); }\r\n                        80% { opacity: 1; transform: translate(-50%, -50%) scale(1); }\r\n                        100% { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }\r\n                    }\r\n                `}\r\n            </style>\r\n            <div style={{\r\n                position: 'fixed',\r\n                top: '50%',\r\n                left: '50%',\r\n                transform: 'translate(-50%, -50%)',\r\n                background: 'rgba(0, 0, 0, 0.95)',\r\n                padding: '2rem 3rem',\r\n                borderRadius: '16px',\r\n                border: '2px solid #7FFFD4',\r\n                boxShadow: '0 0 30px rgba(127, 255, 212, 0.3)',\r\n                zIndex: 9999,\r\n                animation: 'fadeInOut 1.5s ease-in-out',\r\n                backdropFilter: 'blur(10px)'\r\n            }}>\r\n                <h2 style={{\r\n                    color: '#7FFFD4',\r\n                    fontSize: '2rem',\r\n                    fontWeight: 'bold',\r\n                    margin: 0,\r\n                    textAlign: 'center',\r\n                    textShadow: '0 0 10px rgba(127, 255, 212, 0.5)'\r\n                }}>\r\n                    {feedType === 'art' ? 'Art Feed' : 'Social Feed'}\r\n                </h2>\r\n            </div>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default FeedTypeIndicator;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\FilmSprockets.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\n\r\n/**\r\n * FilmSprockets Component\r\n * Wraps content (usually an image) in a container that looks like a strip of film.\r\n * Renders sprocket holes on the left and right sides.\r\n */\r\nconst FilmSprockets = ({ children, className = '', style = {} }) => {\r\n    return (\r\n        <div className={`film-sprocket-container ${className}`} style={style}>\r\n            {/* Left Sprocket Strip */}\r\n            <div className=\"sprocket-strip sprocket-left\"></div>\r\n\r\n            {/* Content Area */}\r\n            <div className=\"sprocket-content\">\r\n                {children}\r\n            </div>\r\n\r\n            {/* Right Sprocket Strip */}\r\n            <div className=\"sprocket-strip sprocket-right\"></div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default FilmSprockets;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\FilmStrip35mm.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\FilmStripCarousel.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useRef } from 'react';\r\nimport '@/styles/film-strip-carousel.css';\r\n\r\n/**\r\n * FilmStripCarousel - Clean, modern film strip UI for post viewer/**\r\n * FilmStripCarousel\r\n * A subtle, aesthetic film strip container for multi-image posts.\r\n * NOT a photorealistic simulation - just a clean, modern UI inspired by film.\r\n */\r\nconst FilmStripCarousel = ({ images = [], className = '', showSprockets = true }) => {\r\n    const scrollRef = useRef(null);\r\n\r\n    return (\r\n        <div className={`film-strip-wrapper ${className} ${!showSprockets ? 'no-sprockets' : ''}`}>\r\n            <div className=\"film-strip-container\">\r\n                {/* Top sprocket border - 8% of container height */}\r\n                {showSprockets && (\r\n                    <div className=\"film-strip-border film-strip-border-top\">\r\n                        <div className=\"sprocket-holes\" />\r\n                    </div>\r\n                )}\r\n\r\n                {/* Image row - 84% of container height */}\r\n                <div className=\"film-strip-images-row\" ref={scrollRef}>\r\n                    {images.map((item, index) => (\r\n                        <div key={index} className=\"film-frame\">\r\n                            {item.url || (typeof item === 'string' && item.match(/^http/)) ? (\r\n                                <img\r\n                                    src={item.url || item}\r\n                                    alt={`Frame ${index + 1}`}\r\n                                    className=\"film-frame-image\"\r\n                                    loading=\"eager\"\r\n                                    decoding=\"async\"\r\n                                />\r\n                            ) : (\r\n                                <div className=\"film-frame-text\">\r\n                                    {item.content || item.text || (typeof item === 'string' ? item : JSON.stringify(item))}\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n\r\n                {/* Bottom sprocket border - 8% of container height */}\r\n                {showSprockets && (\r\n                    <div className=\"film-strip-border film-strip-border-bottom\">\r\n                        <div className=\"sprocket-holes\" />\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default FilmStripCarousel;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\FilmStripPost.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaMapMarkerAlt' is defined but never used. Allowed unused vars must match /^_/u.","line":12,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'priority' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":133,"column":64,"nodeType":"Identifier","messageId":"unusedVar","endLine":133,"endColumn":72}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { doc, getDoc } from 'firebase/firestore';\r\nimport { db } from '@/firebase';\r\nimport '@/styles/film-strip-post.css';\r\nimport DateStampOverlay from './DateStampOverlay';\r\nimport SmartImage from './SmartImage';\r\nimport LikeButton from './LikeButton';\r\nimport PlanetUserIcon from './PlanetUserIcon';\r\nimport PostDetailsSidebar from './PostDetailsSidebar';\r\nimport { renderCosmicUsername } from '@/utils/usernameRenderer';\r\nimport { FaMapMarkerAlt } from 'react-icons/fa';\r\n\r\n// Static sprockets renderer to avoid re-creation\r\nconst Sprockets = React.memo(() => (\r\n    <div className=\"cyber-sprockets\">\r\n        {/* 8 holes per frame is standard for 35mm */}\r\n        {[...Array(8)].map((_, i) => (\r\n            <span key={i}></span>\r\n        ))}\r\n    </div>\r\n));\r\n\r\nconst FilmFrameUnit = React.memo(({ item, index, priority, getStockName, getFrameNumber, getEdgeCode, uiOverlays, postId }) => {\r\n    const [renderedSrc, setRenderedSrc] = useState(null);\r\n    const itemUrl = item.url || item;\r\n    const isUrl = typeof itemUrl === 'string' && (itemUrl.startsWith('http') || itemUrl.startsWith('blob:'));\r\n\r\n    // Cache Key\r\n    const cacheKey = `${postId}_slide_${index}`;\r\n\r\n    useEffect(() => {\r\n        // 1. Check Cache\r\n        import('@/core/film/FilmSlideCache').then(({ FilmSlideCache }) => {\r\n            const cached = FilmSlideCache.get(cacheKey);\r\n            if (cached) {\r\n                setRenderedSrc(cached);\r\n                return;\r\n            }\r\n\r\n            // 2. Render if not cached & visible/near\r\n            if (isUrl && Math.abs(priority) <= 1 && !postId.toString().includes('preview')) {\r\n                import('@/core/film/FilmSlideRenderer').then(({ FilmSlideRenderer }) => {\r\n                    FilmSlideRenderer.renderSlide({\r\n                        postId,\r\n                        slideIndex: index,\r\n                        images: [itemUrl],\r\n                        frameNumber: getFrameNumber(index),\r\n                        edgeCode: getEdgeCode(index)\r\n                    }).then(url => {\r\n                        FilmSlideCache.set(cacheKey, url);\r\n                        setRenderedSrc(url);\r\n                    });\r\n                });\r\n            }\r\n        });\r\n    }, [cacheKey, isUrl, priority, itemUrl, getFrameNumber, getEdgeCode, postId, index]);\r\n\r\n    if (renderedSrc) {\r\n        return (\r\n            <div className=\"cyber-frame-unit\" style={{ background: '#000' }}>\r\n                <SmartImage\r\n                    src={renderedSrc}\r\n                    alt={`Film Frame ${index + 1}`}\r\n                    context=\"filmSlide\"\r\n                    priority={Math.abs(priority) <= 2 ? 'high' : 'normal'}\r\n                    style={{ width: '100%', height: 'auto', display: 'block' }}\r\n                    fillContainer\r\n                />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"cyber-frame-unit\">\r\n            <div className=\"cyber-track top\">\r\n                <span className=\"cyber-micro-text\">{getStockName()}</span>\r\n                <span className=\"cyber-frame-number\">{getFrameNumber(index)}</span>\r\n                <Sprockets />\r\n            </div>\r\n\r\n            <div className=\"cyber-content-row\">\r\n                <div className=\"cyber-marker left\">\r\n                    <span className=\"vertical-text\">{getFrameNumber(index)}</span>\r\n                </div>\r\n\r\n                <div className=\"cyber-image-container\">\r\n                    {isUrl ? (\r\n                        <div style={{ width: '100%', height: '100%', position: 'relative' }}>\r\n                            <SmartImage\r\n                                src={itemUrl}\r\n                                alt={`Frame ${index + 1}`}\r\n                                context=\"feedThumbnail\"\r\n                                className=\"cyber-image\"\r\n                                priority={Math.abs(priority) <= 2 ? 'high' : 'normal'}\r\n                                objectFit=\"cover\"\r\n                                fillContainer={true}\r\n                                style={{ width: '100%', height: '100%' }}\r\n                            />\r\n                            {uiOverlays?.quartzDate && (\r\n                                <DateStampOverlay quartzDate={uiOverlays.quartzDate} />\r\n                            )}\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"cyber-text-fallback\">\r\n                            {item.content || item.text || (typeof item === 'string' ? item : 'VOID')}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                <div className=\"cyber-marker right\">\r\n                    <span className=\"vertical-text\" style={{ opacity: 0 }}>END</span>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"cyber-track bottom\">\r\n                <span className=\"cyber-edge-code\">{getEdgeCode(index)}</span>\r\n                <Sprockets />\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: '4px', position: 'absolute', bottom: '8px', right: '16px' }}>\r\n                    <svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" style={{ flexShrink: 0 }}>\r\n                        <use href=\"#filmPlanetIcon\" />\r\n                    </svg>\r\n                    <span className=\"cyber-micro-text\" style={{ position: 'static' }}>2025</span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n});\r\n\r\n/**\r\n * FilmStripPost - Authentic 35mm Film Edition\r\n */\r\nconst FilmStripPost = ({ post, images = [], uiOverlays = null, priority = 'normal', postId = 'preview' }) => {\r\n    const navigate = useNavigate();\r\n    const [showDetailsSidebar, setShowDetailsSidebar] = useState(false);\r\n    const [authorPhoto, setAuthorPhoto] = useState(\r\n        post?.authorPhotoUrl || post?.userPhotoUrl || post?.photoURL || null\r\n    );\r\n\r\n    // Fetch author photo if missing\r\n    useEffect(() => {\r\n        if (authorPhoto || !post?.userId) return;\r\n        const fetchAuthorPhoto = async () => {\r\n            try {\r\n                const userDoc = await getDoc(doc(db, 'users', post.userId));\r\n                if (userDoc.exists()) {\r\n                    const data = userDoc.data();\r\n                    setAuthorPhoto(data.photoURL || data.avatarUrl || data.profilePicture || null);\r\n                }\r\n            } catch (err) {\r\n                console.error('Error fetching author photo:', err);\r\n            }\r\n        };\r\n        fetchAuthorPhoto();\r\n    }, [authorPhoto, post?.userId]);\r\n\r\n    const handleAuthorClick = () => {\r\n        if (post?.userId) {\r\n            navigate(`/profile/${post.userId}`);\r\n        }\r\n    };\r\n\r\n    const getFrameNumber = (index) => {\r\n        const frameNum = index + 1;\r\n        return frameNum % 2 === 0 ? `${frameNum}` : `${frameNum}A`;\r\n    };\r\n\r\n    const getEdgeCode = (index) => `K${(index + 100).toString()}`;\r\n    const getStockName = () => 'PANOSPACE';\r\n\r\n    useEffect(() => {\r\n        if (!images || images.length === 0) return;\r\n        const initialLoad = images.slice(0, 3);\r\n        import('@/core/image/preloadFilmSlide').then(({ preloadFilmSlide }) => {\r\n            preloadFilmSlide(initialLoad);\r\n        });\r\n    }, [images]);\r\n\r\n    return (\r\n        <div className=\"cyber-film-strip-wrapper\" style={{ position: 'relative' }}>\r\n            {/* Global Defs for Icons */}\r\n            <svg width=\"0\" height=\"0\" style={{ position: 'absolute' }}>\r\n                <defs>\r\n                    <radialGradient id=\"filmPlanetGrad\" cx=\"40%\" cy=\"40%\">\r\n                        <stop offset=\"0%\" style={{ stopColor: '#7FFFD4', stopOpacity: 1 }} />\r\n                        <stop offset=\"100%\" style={{ stopColor: '#00CED1', stopOpacity: 1 }} />\r\n                    </radialGradient>\r\n                    <symbol id=\"filmPlanetIcon\" viewBox=\"0 0 24 24\">\r\n                        <ellipse cx=\"12\" cy=\"12\" rx=\"14\" ry=\"4\" fill=\"none\" stroke=\"#7FFFD4\" strokeWidth=\"1.5\" opacity=\"0.4\" transform=\"rotate(-20 12 12)\" />\r\n                        <circle cx=\"12\" cy=\"12\" r=\"7\" fill=\"url(#filmPlanetGrad)\" opacity=\"0.95\" />\r\n                        <ellipse cx=\"12\" cy=\"12\" rx=\"14\" ry=\"4\" fill=\"none\" stroke=\"#7FFFD4\" strokeWidth=\"1.5\" opacity=\"0.6\" transform=\"rotate(-20 12 12)\" strokeDasharray=\"0,8,20,100\" />\r\n                    </symbol>\r\n                </defs>\r\n            </svg>\r\n\r\n            <div className=\"cyber-film-strip-scroll-container\">\r\n                <div className=\"cyber-leader\"></div>\r\n\r\n                {images.map((item, index) => (\r\n                    <FilmFrameUnit\r\n                        key={index}\r\n                        item={item}\r\n                        index={index}\r\n                        priority={index}\r\n                        getStockName={getStockName}\r\n                        getFrameNumber={getFrameNumber}\r\n                        getEdgeCode={getEdgeCode}\r\n                        uiOverlays={uiOverlays}\r\n                        postId={postId}\r\n                    />\r\n                ))}\r\n\r\n                <div className=\"cyber-leader trailer\"></div>\r\n            </div>\r\n\r\n            {/* Author Info Overlay (Bottom Left) */}\r\n            <div\r\n                className=\"author-overlay\"\r\n                style={{\r\n                    position: 'absolute',\r\n                    bottom: 'max(80px, calc(80px + env(safe-area-inset-bottom)))',\r\n                    left: '20px',\r\n                    display: 'flex',\r\n                    alignItems: 'stretch',\r\n                    background: 'rgba(0, 0, 0, 0.6)',\r\n                    backdropFilter: 'blur(8px)',\r\n                    borderRadius: '8px',\r\n                    zIndex: 10,\r\n                    width: 'fit-content',\r\n                    maxWidth: '300px',\r\n                    border: '1px solid rgba(255,255,255,0.1)',\r\n                    overflow: 'hidden'\r\n                }}\r\n            >\r\n                {/* Author Photo */}\r\n                <div\r\n                    onClick={handleAuthorClick}\r\n                    style={{\r\n                        width: '40px',\r\n                        height: '40px',\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        justifyContent: 'center',\r\n                        background: 'rgba(255,255,255,0.05)',\r\n                        borderRight: '1px solid rgba(255,255,255,0.1)',\r\n                        cursor: 'pointer'\r\n                    }}\r\n                >\r\n                    {authorPhoto ? (\r\n                        <img\r\n                            src={authorPhoto}\r\n                            alt={post?.username}\r\n                            style={{ width: '100%', height: '100%', objectFit: 'cover' }}\r\n                            onError={(e) => { e.target.style.display = 'none'; e.target.nextSibling.style.display = 'flex'; }}\r\n                        />\r\n                    ) : null}\r\n                    <div style={{ display: authorPhoto ? 'none' : 'flex', width: '100%', height: '100%', alignItems: 'center', justifyContent: 'center' }}>\r\n                        <PlanetUserIcon size={28} color=\"#7FFFD4\" />\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Username */}\r\n                <div\r\n                    onClick={(e) => {\r\n                        e.stopPropagation();\r\n                        setShowDetailsSidebar(true);\r\n                    }}\r\n                    style={{\r\n                        padding: '0.4rem 0.8rem',\r\n                        display: 'flex',\r\n                        flexDirection: 'column',\r\n                        justifyContent: 'center',\r\n                        gap: '2px',\r\n                        cursor: 'pointer'\r\n                    }}\r\n                >\r\n                    <span style={{\r\n                        color: '#7FFFD4',\r\n                        fontWeight: '700',\r\n                        fontSize: '0.9rem',\r\n                        fontFamily: '\"Rajdhani\", monospace',\r\n                        letterSpacing: '1px',\r\n                        textTransform: 'uppercase',\r\n                        lineHeight: 1\r\n                    }}>\r\n                        {renderCosmicUsername(post?.username || post?.authorName || 'ANONYMOUS')}\r\n                    </span>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Actions (Bottom Right) */}\r\n            <div className=\"post-actions-container\" style={{\r\n                position: 'absolute',\r\n                bottom: 'max(80px, calc(80px + env(safe-area-inset-bottom)))',\r\n                right: '20px',\r\n                zIndex: 10\r\n            }}>\r\n                <LikeButton postId={post?.id || postId} />\r\n            </div>\r\n\r\n            {/* Post Details Sidebar */}\r\n            <PostDetailsSidebar\r\n                isVisible={showDetailsSidebar}\r\n                onClose={() => setShowDetailsSidebar(false)}\r\n                post={post}\r\n                items={images}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default React.memo(FilmStripPost);\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\FollowButton.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Timestamp' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":69,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":78},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'checkFollowStatus'. Either include it or remove the dependency array.","line":15,"column":8,"nodeType":"ArrayExpression","endLine":15,"endColumn":35,"suggestions":[{"desc":"Update the dependencies array to be: [targetUserId, currentUser, checkFollowStatus]","fix":{"range":[669,696],"text":"[targetUserId, currentUser, checkFollowStatus]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { db } from '@/firebase';\r\nimport { collection, query, where, getDocs, addDoc, deleteDoc, doc, Timestamp, serverTimestamp } from 'firebase/firestore';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { FaUserPlus, FaUserCheck } from 'react-icons/fa';\r\n\r\nconst FollowButton = ({ targetUserId, targetUserName, style = {} }) => {\r\n    const [isFollowing, setIsFollowing] = useState(false);\r\n    const [loading, setLoading] = useState(true);\r\n    const [followDocId, setFollowDocId] = useState(null);\r\n    const { currentUser } = useAuth();\r\n\r\n    useEffect(() => {\r\n        checkFollowStatus();\r\n    }, [targetUserId, currentUser]);\r\n\r\n    const checkFollowStatus = async () => {\r\n        if (!currentUser || currentUser.uid === targetUserId) {\r\n            setLoading(false);\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const q = query(\r\n                collection(db, 'follows'),\r\n                where('followerId', '==', currentUser.uid),\r\n                where('followingId', '==', targetUserId)\r\n            );\r\n            const snapshot = await getDocs(q);\r\n\r\n            if (!snapshot.empty) {\r\n                setIsFollowing(true);\r\n                setFollowDocId(snapshot.docs[0].id);\r\n            } else {\r\n                setIsFollowing(false);\r\n                setFollowDocId(null);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error checking follow status:', error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleFollow = async () => {\r\n        if (!currentUser || loading) return;\r\n\r\n        setLoading(true);\r\n        try {\r\n            if (isFollowing && followDocId) {\r\n                // Unfollow\r\n                await deleteDoc(doc(db, 'follows', followDocId));\r\n                setIsFollowing(false);\r\n                setFollowDocId(null);\r\n            } else {\r\n                // Follow\r\n                const docRef = await addDoc(collection(db, 'follows'), {\r\n                    followerId: currentUser.uid,\r\n                    followerName: currentUser.displayName || 'Anonymous',\r\n                    followingId: targetUserId,\r\n                    followingName: targetUserName || 'User',\r\n                    createdAt: serverTimestamp()\r\n                });\r\n                setIsFollowing(true);\r\n                setFollowDocId(docRef.id);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error toggling follow:', error);\r\n            alert('Failed to update follow status');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    // Don't show button if viewing own profile\r\n    if (!currentUser || currentUser.uid === targetUserId) {\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <button\r\n            onClick={handleFollow}\r\n            disabled={loading}\r\n            style={{\r\n                padding: '0.7rem 1.5rem',\r\n                background: isFollowing\r\n                    ? 'rgba(255,255,255,0.1)'\r\n                    : 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\r\n                color: '#fff',\r\n                border: isFollowing ? '2px solid rgba(255,255,255,0.3)' : 'none',\r\n                borderRadius: '25px',\r\n                fontWeight: '600',\r\n                cursor: loading ? 'not-allowed' : 'pointer',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '0.5rem',\r\n                transition: 'all 0.3s ease',\r\n                opacity: loading ? 0.6 : 1,\r\n                fontSize: '0.95rem',\r\n                backdropFilter: 'blur(10px)',\r\n                ...style // Allow overrides\r\n            }}\r\n            onMouseEnter={(e) => {\r\n                if (!loading && !style.background) e.currentTarget.style.transform = 'translateY(-2px)';\r\n            }}\r\n            onMouseLeave={(e) => {\r\n                if (!style.background) e.currentTarget.style.transform = 'translateY(0)';\r\n            }}\r\n        >\r\n            {isFollowing ? <FaUserCheck /> : <FaUserPlus />}\r\n            {isFollowing ? 'Following' : 'Follow'}\r\n        </button>\r\n    );\r\n};\r\n\r\nexport default FollowButton;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\FollowListModal.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'doc' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":52,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":55},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'getDoc' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":57,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":63},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchUsers'. Either include it or remove the dependency array.","line":19,"column":8,"nodeType":"ArrayExpression","endLine":19,"endColumn":30,"suggestions":[{"desc":"Update the dependencies array to be: [isOpen, userId, type, fetchUsers]","fix":{"range":[724,746],"text":"[isOpen, userId, type, fetchUsers]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { FaTimes } from 'react-icons/fa';\r\nimport { RocketIcon, AstronautIcon } from './SpaceIcons';\r\nimport { db } from '@/firebase';\r\nimport { collection, query, where, getDocs, limit, doc, getDoc } from 'firebase/firestore';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nimport { renderCosmicUsername } from '@/utils/usernameRenderer';\r\n\r\nconst FollowListModal = ({ isOpen, onClose, userId, type = 'followers', title }) => {\r\n    const [users, setUsers] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const navigate = useNavigate();\r\n\r\n    useEffect(() => {\r\n        if (isOpen && userId) {\r\n            fetchUsers();\r\n        }\r\n    }, [isOpen, userId, type]);\r\n\r\n    const fetchUsers = async () => {\r\n        setLoading(true);\r\n        try {\r\n            // 1. Get the relationships\r\n            const relationsRef = collection(db, 'follows');\r\n            let q;\r\n\r\n            if (type === 'followers') {\r\n                q = query(relationsRef, where('followingId', '==', userId), limit(50));\r\n            } else { // following\r\n                q = query(relationsRef, where('followerId', '==', userId), limit(50));\r\n            }\r\n\r\n            const snapshot = await getDocs(q);\r\n            const relationDocs = snapshot.docs.map(d => d.data());\r\n\r\n            // 2. Get the User IDs to fetch\r\n            const userIds = type === 'followers'\r\n                ? relationDocs.map(r => r.followerId)\r\n                : relationDocs.map(r => r.followingId);\r\n\r\n            if (userIds.length === 0) {\r\n                setUsers([]);\r\n                setLoading(false);\r\n                return;\r\n            }\r\n\r\n            // 3. Fetch User Profiles (Batched if needed, here taking simple approach for < 30)\r\n            // Ideally use 'in' query, but sensitive to limit of 30.\r\n            // Loop for now or use 'in' batches. \r\n            // We'll fetching one by one for simplicity in this artifact, or check if we can do 'in'\r\n\r\n            const fetchedUsers = [];\r\n            // Chunking for Firestore 'in' limit of 10-30\r\n            const chunkSize = 10;\r\n            for (let i = 0; i < userIds.length; i += chunkSize) {\r\n                const chunk = userIds.slice(i, i + chunkSize);\r\n                if (chunk.length === 0) continue;\r\n\r\n                const usersQ = query(collection(db, 'users'), where('__name__', 'in', chunk));\r\n                const userSnaps = await getDocs(usersQ);\r\n                userSnaps.forEach(snap => fetchedUsers.push({ id: snap.id, ...snap.data() }));\r\n            }\r\n\r\n            setUsers(fetchedUsers);\r\n\r\n        } catch (error) {\r\n            console.error(\"Error fetching follow list:\", error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    if (!isOpen) return null;\r\n\r\n    return (\r\n        <div style={{\r\n            position: 'fixed',\r\n            inset: 0,\r\n            background: 'rgba(0,0,0,0.85)',\r\n            backdropFilter: 'blur(5px)',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            zIndex: 1200,\r\n            padding: '1rem'\r\n        }}>\r\n            <div style={{\r\n                width: '100%',\r\n                maxWidth: '450px',\r\n                height: '600px',\r\n                maxHeight: '90vh',\r\n                background: '#111',\r\n                borderRadius: '12px',\r\n                display: 'flex',\r\n                flexDirection: 'column',\r\n                border: '1px solid #333',\r\n                overflow: 'hidden'\r\n            }}>\r\n                {/* Header */}\r\n                <div style={{\r\n                    padding: '1rem',\r\n                    borderBottom: '1px solid #222',\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'space-between'\r\n                }}>\r\n                    <h2 style={{ margin: 0, fontSize: '1.1rem', textTransform: 'uppercase', letterSpacing: '0.05em', display: 'flex', alignItems: 'center', gap: '8px' }}>\r\n                        {title ? title : (\r\n                            <>\r\n                                {type === 'followers' ? <AstronautIcon size={20} /> : <RocketIcon size={20} />}\r\n                                {type === 'followers' ? 'Followers' : 'Following'}\r\n                            </>\r\n                        )}\r\n                    </h2>\r\n                    <button onClick={onClose} style={{ background: 'none', border: 'none', color: '#fff', cursor: 'pointer' }}>\r\n                        <FaTimes size={18} />\r\n                    </button>\r\n                </div>\r\n\r\n                {/* List */}\r\n                <div style={{ flex: 1, overflowY: 'auto', padding: '1rem' }}>\r\n                    {loading ? (\r\n                        <div style={{ textAlign: 'center', color: '#666', marginTop: '2rem' }}>Loading...</div>\r\n                    ) : users.length === 0 ? (\r\n                        <div style={{ textAlign: 'center', color: '#666', marginTop: '2rem' }}>\r\n                            No users found.\r\n                        </div>\r\n                    ) : (\r\n                        <div style={{ display: 'flex', flexDirection: 'column', gap: '0.75rem' }}>\r\n                            {users.map(u => {\r\n                                // Theme Logic for List Item\r\n                                const usernameColor = (u.profileTheme?.usernameColor && !u.profileTheme.usernameColor.includes('gradient'))\r\n                                    ? u.profileTheme.usernameColor\r\n                                    : '#FFFFFF';\r\n                                const isGradient = u.profileTheme?.usernameColor?.includes('gradient');\r\n                                const borderColor = u.profileTheme?.borderColor || '#333';\r\n\r\n                                return (\r\n                                    <div\r\n                                        key={u.id}\r\n                                        onClick={() => { onClose(); navigate(`/profile/${u.id}`); }}\r\n                                        style={{\r\n                                            display: 'flex',\r\n                                            alignItems: 'center',\r\n                                            gap: '1rem',\r\n                                            padding: '0.75rem',\r\n                                            background: 'rgba(255,255,255,0.03)',\r\n                                            borderRadius: '8px',\r\n                                            cursor: 'pointer',\r\n                                            border: '1px solid transparent',\r\n                                            transition: 'border-color 0.2s'\r\n                                        }}\r\n                                        onMouseEnter={e => e.currentTarget.style.borderColor = '#444'}\r\n                                        onMouseLeave={e => e.currentTarget.style.borderColor = 'transparent'}\r\n                                    >\r\n                                        {/* PFP */}\r\n                                        <div style={{\r\n                                            width: '40px',\r\n                                            height: '40px',\r\n                                            borderRadius: '12px', // Rounded Square\r\n                                            border: `2px solid ${borderColor}`,\r\n                                            background: '#333',\r\n                                            overflow: 'hidden',\r\n                                            flexShrink: 0\r\n                                        }}>\r\n                                            {u.photoURL ? (\r\n                                                <img src={u.photoURL} alt={u.displayName} style={{ width: '100%', height: '100%', objectFit: 'cover' }} />\r\n                                            ) : (\r\n                                                <div style={{ width: '100%', height: '100%', display: 'flex', alignItems: 'center', justifyContent: 'center', fontSize: '0.8rem', color: '#888' }}>\r\n                                                    {u.displayName?.[0]}\r\n                                                </div>\r\n                                            )}\r\n                                        </div>\r\n\r\n                                        {/* Name */}\r\n                                        <div style={{ flex: 1, overflow: 'hidden' }}>\r\n                                            <div style={{\r\n                                                fontSize: '0.95rem',\r\n                                                fontWeight: 'bold',\r\n                                                whiteSpace: 'nowrap',\r\n                                                overflow: 'hidden',\r\n                                                textOverflow: 'ellipsis',\r\n                                                color: !isGradient ? usernameColor : 'transparent',\r\n                                                background: isGradient ? u.profileTheme.usernameColor : 'none',\r\n                                                WebkitBackgroundClip: isGradient ? 'text' : 'border-box',\r\n                                                WebkitTextFillColor: isGradient ? 'transparent' : (usernameColor),\r\n                                                fontFamily: 'var(--font-family-heading)'\r\n                                            }}>\r\n                                                {u.displayName}\r\n                                            </div>\r\n                                            <div style={{ fontSize: '0.75rem', color: '#666' }}>\r\n                                                @{renderCosmicUsername(u.username)}\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                );\r\n                            })}\r\n                        </div>\r\n                    )\r\n                    }\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default FollowListModal;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\FullscreenViewer.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'items' logical expression could make the dependencies of useEffect Hook (at line 48) change on every render. To fix this, wrap the initialization of 'items' in its own useMemo() Hook.","line":13,"column":9,"nodeType":"VariableDeclarator","endLine":13,"endColumn":48}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\r\nimport { FaTimes, FaChevronLeft, FaChevronRight, FaInfoCircle, FaCamera } from 'react-icons/fa';\r\nimport { formatExifForDisplay } from '@/core/utils/exif';\r\nimport { preloadImage } from '@/core/utils/imageCache';\r\n\r\nconst FullscreenViewer = ({ post, onClose, onNext, onPrev }) => {\r\n    const [currentSlide, setCurrentSlide] = useState(0);\r\n    const [showInfo, setShowInfo] = useState(false);\r\n    const [touchStart, setTouchStart] = useState(null);\r\n    const [isMobile, setIsMobile] = useState(window.innerWidth <= 768);\r\n\r\n    // Normalize items\r\n    let items = post.items || post.slides || [];\r\n    if (items.length === 0) {\r\n        const url = post?.images?.[0]?.url || post.imageUrl || post.shopImageUrl || '';\r\n        if (url) items = [{ type: 'image', url, exif: post.exif || null }];\r\n    }\r\n\r\n    const totalSlides = items.length;\r\n\r\n    // Mobile detection\r\n    useEffect(() => {\r\n        const handleResize = () => setIsMobile(window.innerWidth <= 768);\r\n        window.addEventListener('resize', handleResize);\r\n        return () => window.removeEventListener('resize', handleResize);\r\n    }, []);\r\n\r\n    // Reset slide on post change\r\n    useEffect(() => {\r\n        setCurrentSlide(0);\r\n        setShowInfo(false);\r\n    }, [post.id]);\r\n\r\n    // Preload next/prev images\r\n    useEffect(() => {\r\n        if (!items || items.length <= 1) return;\r\n\r\n        const indicesToPreload = [\r\n            (currentSlide + 1) % items.length,\r\n            (currentSlide - 1 + items.length) % items.length\r\n        ];\r\n\r\n        indicesToPreload.forEach(index => {\r\n            const item = items[index];\r\n            const url = item?.url || (typeof item === 'string' ? item : null);\r\n            if (url) preloadImage(url);\r\n        });\r\n    }, [currentSlide, items]);\r\n\r\n    const handleTouchStart = (e) => setTouchStart(e.targetTouches[0].clientX);\r\n    const handleTouchEnd = (e) => {\r\n        if (!touchStart) return;\r\n        const touchEnd = e.changedTouches[0].clientX;\r\n        const diff = touchStart - touchEnd;\r\n        if (Math.abs(diff) > 50) {\r\n            if (diff > 0) { // Left swipe\r\n                if (currentSlide < totalSlides - 1) setCurrentSlide(c => c + 1);\r\n                else if (onNext) onNext();\r\n            } else { // Right swipe\r\n                if (currentSlide > 0) setCurrentSlide(c => c - 1);\r\n                else if (onPrev) onPrev();\r\n            }\r\n        }\r\n        setTouchStart(null);\r\n    };\r\n\r\n    // Keyboard Navigation\r\n    useEffect(() => {\r\n        const handleKeyDown = (e) => {\r\n            if (e.key === 'Escape') onClose();\r\n            if (e.key === 'ArrowRight') {\r\n                if (currentSlide < totalSlides - 1) setCurrentSlide(c => c + 1);\r\n                else if (onNext) onNext();\r\n            }\r\n            if (e.key === 'ArrowLeft') {\r\n                if (currentSlide > 0) setCurrentSlide(c => c - 1);\r\n                else if (onPrev) onPrev();\r\n            }\r\n        };\r\n        window.addEventListener('keydown', handleKeyDown);\r\n        return () => window.removeEventListener('keydown', handleKeyDown);\r\n    }, [currentSlide, totalSlides, onNext, onPrev, onClose]);\r\n\r\n    if (items.length === 0) {\r\n        return (\r\n            <div style={{ position: 'fixed', inset: 0, background: '#000', display: 'flex', alignItems: 'center', justifyContent: 'center', zIndex: 10000 }}>\r\n                <button onClick={onClose} aria-label=\"Close viewer\" style={{ position: 'absolute', top: '1rem', right: '1rem', width: '60px', height: '60px', borderRadius: '50%', background: 'rgba(255,255,255,0.1)', border: 'none', color: '#fff', fontSize: '1.5rem', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\r\n                    <FaTimes />\r\n                </button>\r\n                <div style={{ color: '#888', fontSize: '1.2rem' }}>No image available</div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const currentItem = items[currentSlide] || {};\r\n    const imageUrl = currentItem.url || post?.images?.[0]?.url || post.imageUrl || post.shopImageUrl || '';\r\n    const exif = currentItem.exif;\r\n    const displayExif = exif ? formatExifForDisplay(exif) : null;\r\n\r\n    return (\r\n        <div\r\n            onTouchStart={handleTouchStart}\r\n            onTouchEnd={handleTouchEnd}\r\n            style={{ position: 'fixed', inset: 0, background: '#000', display: 'flex', alignItems: 'center', justifyContent: 'center', zIndex: 10000, touchAction: 'pan-y' }}\r\n        >\r\n            {/* Close */}\r\n            <button onClick={onClose} aria-label=\"Close viewer\" style={{ position: 'absolute', top: '1rem', right: '1rem', width: '60px', height: '60px', borderRadius: '50%', background: 'rgba(0,0,0,0.8)', border: '1px solid rgba(255,255,255,0.2)', color: '#fff', fontSize: '1.5rem', display: 'flex', alignItems: 'center', justifyContent: 'center', zIndex: 10002, WebkitTapHighlightColor: 'transparent' }}>\r\n                <FaTimes />\r\n            </button>\r\n\r\n            {/* Navigation Arrows - DESKTOP ONLY */}\r\n            {!isMobile && totalSlides > 1 && currentSlide > 0 && (\r\n                <button\r\n                    onClick={() => setCurrentSlide(c => c - 1)}\r\n                    className=\"slide-nav-arrow\"\r\n                    style={{ position: 'absolute', left: '1.5rem', top: '50%', transform: 'translateY(-50%)', width: '40px', height: '40px', background: 'transparent', border: 'none', color: '#fff', fontSize: '1.8rem', display: 'flex', alignItems: 'center', justifyContent: 'center', zIndex: 10002, cursor: 'pointer', opacity: 0.6, transition: 'opacity 0.2s ease, transform 0.2s ease', textShadow: '0 2px 8px rgba(0,0,0,0.8)' }}\r\n                    onMouseEnter={(e) => { e.currentTarget.style.opacity = '1'; e.currentTarget.style.transform = 'translateY(-50%) scale(1.1)'; }}\r\n                    onMouseLeave={(e) => { e.currentTarget.style.opacity = '0.6'; e.currentTarget.style.transform = 'translateY(-50%) scale(1)'; }}\r\n                >\r\n                    <FaChevronLeft />\r\n                </button>\r\n            )}\r\n\r\n            {!isMobile && totalSlides > 1 && currentSlide < totalSlides - 1 && (\r\n                <button\r\n                    onClick={() => setCurrentSlide(c => c + 1)}\r\n                    className=\"slide-nav-arrow\"\r\n                    style={{ position: 'absolute', right: '1.5rem', top: '50%', transform: 'translateY(-50%)', width: '40px', height: '40px', background: 'transparent', border: 'none', color: '#fff', fontSize: '1.8rem', display: 'flex', alignItems: 'center', justifyContent: 'center', zIndex: 10002, cursor: 'pointer', opacity: 0.6, transition: 'opacity 0.2s ease, transform 0.2s ease', textShadow: '0 2px 8px rgba(0,0,0,0.8)' }}\r\n                    onMouseEnter={(e) => { e.currentTarget.style.opacity = '1'; e.currentTarget.style.transform = 'translateY(-50%) scale(1.1)'; }}\r\n                    onMouseLeave={(e) => { e.currentTarget.style.opacity = '0.6'; e.currentTarget.style.transform = 'translateY(-50%) scale(1)'; }}\r\n                >\r\n                    <FaChevronRight />\r\n                </button>\r\n            )}\r\n\r\n            {/* Info Toggle */}\r\n            <button onClick={() => setShowInfo(!showInfo)} aria-label=\"Toggle details\" style={{ position: 'absolute', bottom: '5rem', right: '1rem', width: '50px', height: '50px', borderRadius: '50%', background: showInfo ? '#fff' : 'rgba(0,0,0,0.8)', border: '1px solid rgba(255,255,255,0.2)', color: showInfo ? '#000' : '#fff', fontSize: '1.2rem', display: 'flex', alignItems: 'center', justifyContent: 'center', zIndex: 10002, WebkitTapHighlightColor: 'transparent' }}>\r\n                <FaInfoCircle />\r\n            </button>\r\n\r\n            {/* Main Image */}\r\n            <img\r\n                src={imageUrl}\r\n                alt={post.title || 'Post'}\r\n                loading=\"eager\"\r\n                decoding=\"async\"\r\n                style={{\r\n                    width: '100%',\r\n                    height: 'auto',\r\n                    maxHeight: '100vh',\r\n                    objectFit: 'contain'\r\n                }}\r\n                onError={(e) => { e.target.src = ''; e.target.alt = 'Failed to load'; e.target.style.display = 'none'; }}\r\n            />\r\n\r\n            {/* Slide indicator */}\r\n            {totalSlides > 1 && (\r\n                <div style={{ position: 'absolute', top: '1rem', left: '50%', transform: 'translateX(-50%)', background: 'rgba(0,0,0,0.6)', padding: '0.4rem 0.9rem', borderRadius: '16px', color: '#fff', fontSize: '0.85rem', fontWeight: '500' }}>\r\n                    {currentSlide + 1} / {totalSlides}\r\n                </div>\r\n            )}\r\n\r\n            {/* Info Panel */}\r\n            {showInfo && (\r\n                <div style={{ position: 'absolute', bottom: 0, left: 0, right: 0, background: 'rgba(0,0,0,0.95)', padding: '1.5rem', maxHeight: '60vh', overflowY: 'auto', borderTop: '1px solid rgba(255,255,255,0.1)', zIndex: 10001 }}>\r\n                    <h3 style={{ color: '#fff', fontSize: '1.1rem', marginBottom: '0.5rem' }}>{post.title || 'Untitled'}</h3>\r\n                    <p style={{ color: '#888', fontSize: '0.9rem', marginBottom: '1rem' }}>{post.authorName || 'Anonymous'}</p>\r\n\r\n                    {post.location && (\r\n                        <p style={{ color: '#aaa', fontSize: '0.85rem', marginBottom: '1rem' }}>≡ƒôì {[post.location.city, post.location.state, post.location.country].filter(Boolean).join(', ')}</p>\r\n                    )}\r\n\r\n                    {/* EXIF Data */}\r\n                    {displayExif && (\r\n                        <div style={{ background: 'rgba(255,255,255,0.05)', borderRadius: '12px', padding: '1rem', marginBottom: '1rem', border: '1px solid rgba(255,255,255,0.1)' }}>\r\n                            <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', marginBottom: '1rem', color: '#fff', fontWeight: 'bold' }}>\r\n                                <FaCamera /> Photo Details\r\n                            </div>\r\n                            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(2, 1fr)', gap: '1rem' }}>\r\n                                {displayExif.camera && (\r\n                                    <div style={{ gridColumn: '1 / -1' }}>\r\n                                        <div style={{ color: '#888', fontSize: '0.7rem' }}>Camera</div>\r\n                                        <div style={{ color: '#fff', fontSize: '0.9rem' }}>{displayExif.camera}</div>\r\n                                    </div>\r\n                                )}\r\n                                {displayExif.lens && (\r\n                                    <div style={{ gridColumn: '1 / -1' }}>\r\n                                        <div style={{ color: '#888', fontSize: '0.7rem' }}>Lens</div>\r\n                                        <div style={{ color: '#fff', fontSize: '0.9rem' }}>{displayExif.lens}</div>\r\n                                    </div>\r\n                                )}\r\n                                {displayExif.specs.map((spec, i) => (\r\n                                    <div key={i}>\r\n                                        <div style={{ color: '#888', fontSize: '0.7rem' }}>Spec</div>\r\n                                        <div style={{ color: '#fff', fontSize: '0.9rem' }}>{spec}</div>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n\r\n                    {post.tags && post.tags.length > 0 && (\r\n                        <div style={{ display: 'flex', gap: '0.5rem', flexWrap: 'wrap' }}>\r\n                            {post.tags.map(tag => <span key={tag} style={{ background: '#222', padding: '0.3rem 0.8rem', borderRadius: '12px', fontSize: '0.8rem', color: '#aaa' }}>#{tag}</span>)}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            )}\r\n        </div >\r\n    );\r\n};\r\n\r\nexport default FullscreenViewer;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\FullscreenViewerMobile.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaChevronLeft' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":32},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaChevronRight' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":34,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":48},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'items' logical expression could make the dependencies of useEffect Hook (at line 32) change on every render. To fix this, wrap the initialization of 'items' in its own useMemo() Hook.","line":10,"column":9,"nodeType":"VariableDeclarator","endLine":10,"endColumn":48}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\r\nimport { FaTimes, FaChevronLeft, FaChevronRight, FaInfoCircle } from 'react-icons/fa';\r\nimport { preloadImage } from '@/core/utils/imageCache';\r\n\r\nconst FullscreenViewerMobile = ({ post, onClose, onNext, onPrev }) => {\r\n    const [currentSlide, setCurrentSlide] = useState(0);\r\n    const [showInfo, setShowInfo] = useState(false);\r\n    const [touchStart, setTouchStart] = useState(null);\r\n\r\n    let items = post.items || post.slides || [];\r\n    if (items.length === 0) {\r\n        const url = post?.images?.[0]?.url || post.imageUrl || post.shopImageUrl || '';\r\n        if (url) items = [{ type: 'image', url }];\r\n    }\r\n\r\n    const totalSlides = items.length;\r\n\r\n    // Preload next/prev images\r\n    useEffect(() => {\r\n        if (!items || items.length <= 1) return;\r\n\r\n        const indicesToPreload = [\r\n            (currentSlide + 1) % items.length,\r\n            (currentSlide - 1 + items.length) % items.length\r\n        ];\r\n\r\n        indicesToPreload.forEach(index => {\r\n            const item = items[index];\r\n            const url = item?.url || (typeof item === 'string' ? item : null);\r\n            if (url) preloadImage(url);\r\n        });\r\n    }, [currentSlide, items]);\r\n\r\n    const handleTouchStart = (e) => setTouchStart(e.targetTouches[0].clientX);\r\n    const handleTouchEnd = (e) => {\r\n        if (!touchStart) return;\r\n        const touchEnd = e.changedTouches[0].clientX;\r\n        const diff = touchStart - touchEnd;\r\n        if (Math.abs(diff) > 50) {\r\n            if (diff > 0) { // Left swipe\r\n                if (currentSlide < totalSlides - 1) setCurrentSlide(c => c + 1);\r\n                else if (onNext) onNext();\r\n            } else { // Right swipe\r\n                if (currentSlide > 0) setCurrentSlide(c => c - 1);\r\n                else if (onPrev) onPrev();\r\n            }\r\n        }\r\n        setTouchStart(null);\r\n    };\r\n\r\n    if (items.length === 0) {\r\n        return (\r\n            <div style={{ position: 'fixed', inset: 0, background: '#000', display: 'flex', alignItems: 'center', justifyContent: 'center', zIndex: 10000 }}>\r\n                <button onClick={onClose} style={{ position: 'absolute', top: '1rem', right: '1rem', width: '60px', height: '60px', borderRadius: '50%', background: 'rgba(255,255,255,0.1)', border: 'none', color: '#fff', fontSize: '1.5rem', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\r\n                    <FaTimes />\r\n                </button>\r\n                <div style={{ color: '#888', fontSize: '1.2rem' }}>No image available</div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const currentItem = items[currentSlide] || {};\r\n    const imageUrl = currentItem.url || post?.images?.[0]?.url || post.imageUrl || post.shopImageUrl || '';\r\n\r\n    return (\r\n        <div\r\n            onTouchStart={handleTouchStart}\r\n            onTouchEnd={handleTouchEnd}\r\n            style={{ position: 'fixed', inset: 0, background: '#000', display: 'flex', alignItems: 'center', justifyContent: 'center', zIndex: 10000, touchAction: 'pan-y' }}\r\n        >\r\n            {/* Close */}\r\n            <button onClick={onClose} style={{ position: 'absolute', top: '1rem', right: '1rem', width: '60px', height: '60px', borderRadius: '50%', background: 'rgba(0,0,0,0.8)', border: '1px solid rgba(255,255,255,0.2)', color: '#fff', fontSize: '1.5rem', display: 'flex', alignItems: 'center', justifyContent: 'center', zIndex: 10002, WebkitTapHighlightColor: 'transparent' }}>\r\n                <FaTimes />\r\n            </button>\r\n\r\n            {/* Info */}\r\n            <button onClick={() => setShowInfo(!showInfo)} style={{ position: 'absolute', bottom: '5rem', right: '1rem', width: '50px', height: '50px', borderRadius: '50%', background: 'rgba(0,0,0,0.8)', border: '1px solid rgba(255,255,255,0.2)', color: showInfo ? '#fff' : '#888', fontSize: '1.2rem', display: 'flex', alignItems: 'center', justifyContent: 'center', zIndex: 10002, WebkitTapHighlightColor: 'transparent' }}>\r\n                <FaInfoCircle />\r\n            </button>\r\n\r\n            {/* Image */}\r\n            <img\r\n                src={imageUrl}\r\n                alt={post.title || 'Post'}\r\n                loading=\"eager\"\r\n                decoding=\"async\"\r\n                style={{ maxWidth: '100%', maxHeight: '100vh', objectFit: 'contain' }}\r\n                onError={(e) => { e.target.src = ''; e.target.alt = 'Failed to load'; e.target.style.display = 'none'; }}\r\n            />\r\n\r\n            {/* Slide indicator */}\r\n            {totalSlides > 1 && (\r\n                <div style={{ position: 'absolute', top: '1rem', left: '50%', transform: 'translateX(-50%)', background: 'rgba(0,0,0,0.7)', padding: '0.5rem 1rem', borderRadius: '20px', color: '#fff', fontSize: '0.9rem' }}>\r\n                    {currentSlide + 1} / {totalSlides}\r\n                </div>\r\n            )}\r\n\r\n            {/* Info Panel */}\r\n            {showInfo && (\r\n                <div style={{ position: 'absolute', bottom: 0, left: 0, right: 0, background: 'rgba(0,0,0,0.95)', padding: '1.5rem', maxHeight: '50vh', overflowY: 'auto', borderTop: '1px solid rgba(255,255,255,0.1)' }}>\r\n                    <h3 style={{ color: '#fff', fontSize: '1.1rem', marginBottom: '0.5rem' }}>{post.title || 'Untitled'}</h3>\r\n                    <p style={{ color: '#888', fontSize: '0.9rem', marginBottom: '1rem' }}>{post.authorName || 'Anonymous'}</p>\r\n                    {post.location && (\r\n                        <p style={{ color: '#aaa', fontSize: '0.85rem' }}>≡ƒôì {[post.location.city, post.location.state, post.location.country].filter(Boolean).join(', ')}</p>\r\n                    )}\r\n                    {post.tags && post.tags.length > 0 && (\r\n                        <div style={{ display: 'flex', gap: '0.5rem', flexWrap: 'wrap', marginTop: '1rem' }}>\r\n                            {post.tags.map(tag => <span key={tag} style={{ background: '#222', padding: '0.3rem 0.8rem', borderRadius: '12px', fontSize: '0.8rem', color: '#aaa' }}>#{tag}</span>)}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default FullscreenViewerMobile;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\GlobalErrorBoundary.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used. Allowed unused args must match /^_/u.","line":19,"column":37,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":42}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\n\r\n/**\r\n * GlobalErrorBoundary Component\r\n * Catches runtime errors and displays a themed fallback UI\r\n * Prevents white-screen errors and provides recovery options\r\n */\r\nclass GlobalErrorBoundary extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            hasError: false,\r\n            error: null,\r\n            errorInfo: null,\r\n            errorCount: 0\r\n        };\r\n    }\r\n\r\n    static getDerivedStateFromError(error) {\r\n        // Update state so the next render will show the fallback UI\r\n        return { hasError: true };\r\n    }\r\n\r\n    componentDidCatch(error, errorInfo) {\r\n        // Log error details for debugging\r\n        console.error('GlobalErrorBoundary caught an error:', error, errorInfo);\r\n\r\n        this.setState(prevState => ({\r\n            error,\r\n            errorInfo,\r\n            errorCount: prevState.errorCount + 1\r\n        }));\r\n\r\n        // Optional: Send error to logging service\r\n        // logErrorToService(error, errorInfo);\r\n    }\r\n\r\n    handleReset = () => {\r\n        this.setState({\r\n            hasError: false,\r\n            error: null,\r\n            errorInfo: null\r\n        });\r\n\r\n        // Reload the page to reset the app state\r\n        window.location.href = '/';\r\n    };\r\n\r\n    handleReload = () => {\r\n        window.location.reload();\r\n    };\r\n\r\n    render() {\r\n        if (this.state.hasError) {\r\n            return (\r\n                <div style={{\r\n                    minHeight: '100vh',\r\n                    background: '#000',\r\n                    color: '#fff',\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'center',\r\n                    padding: '2rem',\r\n                    position: 'relative',\r\n                    overflow: 'hidden'\r\n                }}>\r\n                    {/* Animated Stars Background */}\r\n                    <div style={{\r\n                        position: 'absolute',\r\n                        top: 0,\r\n                        left: 0,\r\n                        right: 0,\r\n                        bottom: 0,\r\n                        pointerEvents: 'none',\r\n                        zIndex: 0\r\n                    }}>\r\n                        {[...Array(50)].map((_, i) => (\r\n                            <div\r\n                                key={i}\r\n                                style={{\r\n                                    position: 'absolute',\r\n                                    width: Math.random() * 2 + 1 + 'px',\r\n                                    height: Math.random() * 2 + 1 + 'px',\r\n                                    background: '#7FFFD4',\r\n                                    borderRadius: '50%',\r\n                                    top: Math.random() * 100 + '%',\r\n                                    left: Math.random() * 100 + '%',\r\n                                    opacity: Math.random() * 0.5 + 0.3,\r\n                                    animation: `twinkle ${Math.random() * 3 + 2}s ease-in-out infinite`,\r\n                                    animationDelay: `${Math.random() * 2}s`,\r\n                                    boxShadow: `0 0 ${Math.random() * 3 + 2}px #7FFFD4`\r\n                                }}\r\n                            />\r\n                        ))}\r\n                    </div>\r\n                    <style>{`\r\n                        @keyframes twinkle {\r\n                            0%, 100% { opacity: 0.3; transform: scale(1); }\r\n                            50% { opacity: 1; transform: scale(1.2); }\r\n                        }\r\n                    `}</style>\r\n\r\n                    {/* Error Content */}\r\n                    <div style={{\r\n                        maxWidth: '600px',\r\n                        textAlign: 'center',\r\n                        position: 'relative',\r\n                        zIndex: 1\r\n                    }}>\r\n                        {/* Error Icon */}\r\n                        {/* Error Icon - Red Planet */}\r\n                        <div style={{\r\n                            width: '120px',\r\n                            height: '120px',\r\n                            margin: '0 auto 2rem',\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            justifyContent: 'center',\r\n                            animation: 'pulse 3s ease-in-out infinite'\r\n                        }}>\r\n                            <svg\r\n                                width=\"120\"\r\n                                height=\"120\"\r\n                                viewBox=\"-5 -5 34 34\"\r\n                                style={{\r\n                                    filter: 'drop-shadow(0 0 15px rgba(255, 68, 68, 0.4))',\r\n                                    overflow: 'visible'\r\n                                }}\r\n                            >\r\n                                <defs>\r\n                                    <radialGradient id=\"errorPlanetGradient\" cx=\"40%\" cy=\"40%\">\r\n                                        <stop offset=\"0%\" style={{ stopColor: '#FF4444', stopOpacity: 1 }} />\r\n                                        <stop offset=\"100%\" style={{ stopColor: '#CC0000', stopOpacity: 1 }} />\r\n                                    </radialGradient>\r\n                                    <filter id=\"errorPlanetGlow\" x=\"-50%\" y=\"-50%\" width=\"200%\" height=\"200%\">\r\n                                        <feGaussianBlur stdDeviation=\"3\" result=\"coloredBlur\" />\r\n                                        <feMerge>\r\n                                            <feMergeNode in=\"coloredBlur\" />\r\n                                            <feMergeNode in=\"SourceGraphic\" />\r\n                                        </feMerge>\r\n                                    </filter>\r\n                                </defs>\r\n                                <ellipse cx=\"12\" cy=\"12\" rx=\"14\" ry=\"4\" fill=\"none\" stroke=\"#FF4444\" strokeWidth=\"1.5\" opacity=\"0.4\" transform=\"rotate(-20 12 12)\" />\r\n                                <circle cx=\"12\" cy=\"12\" r=\"7\" fill=\"url(#errorPlanetGradient)\" opacity=\"0.95\" filter=\"url(#errorPlanetGlow)\" />\r\n                                <ellipse cx=\"12\" cy=\"12\" rx=\"14\" ry=\"4\" fill=\"none\" stroke=\"#FF4444\" strokeWidth=\"1.5\" opacity=\"0.6\" transform=\"rotate(-20 12 12)\" strokeDasharray=\"0,8,20,100\" />\r\n                                <circle cx=\"12\" cy=\"12\" r=\"7\" fill=\"none\" stroke=\"#FF4444\" strokeWidth=\"0.5\" opacity=\"0.3\" />\r\n                            </svg>\r\n                        </div>\r\n                        <style>{`\r\n                            @keyframes pulse {\r\n                                0%, 100% { transform: scale(1); }\r\n                                50% { transform: scale(1.05); }\r\n                            }\r\n                        `}</style>\r\n\r\n                        {/* Error Title */}\r\n                        <h1 style={{\r\n                            fontSize: '2.5rem',\r\n                            fontWeight: 'bold',\r\n                            marginBottom: '1rem',\r\n                            background: 'linear-gradient(135deg, #ff4444 0%, #ff6b6b 100%)',\r\n                            WebkitBackgroundClip: 'text',\r\n                            WebkitTextFillColor: 'transparent',\r\n                            backgroundClip: 'text'\r\n                        }}>\r\n                            Oops! Something Went Wrong\r\n                        </h1>\r\n\r\n                        {/* Error Message */}\r\n                        <p style={{\r\n                            fontSize: '1.1rem',\r\n                            color: '#ccc',\r\n                            marginBottom: '2rem',\r\n                            lineHeight: '1.6'\r\n                        }}>\r\n                            We encountered an unexpected error. Don't worry, your data is safe.\r\n                            Try refreshing the page or returning to the home screen.\r\n                        </p>\r\n\r\n                        {/* Error Details (Development Mode) */}\r\n                        {import.meta.env.DEV && this.state.error && (\r\n                            <details style={{\r\n                                marginBottom: '2rem',\r\n                                textAlign: 'left',\r\n                                background: 'rgba(255, 68, 68, 0.05)',\r\n                                border: '1px solid rgba(255, 68, 68, 0.2)',\r\n                                borderRadius: '8px',\r\n                                padding: '1rem',\r\n                                fontSize: '0.9rem',\r\n                                color: '#ff6b6b'\r\n                            }}>\r\n                                <summary style={{\r\n                                    cursor: 'pointer',\r\n                                    fontWeight: 'bold',\r\n                                    marginBottom: '0.5rem'\r\n                                }}>\r\n                                    Error Details (Development Only)\r\n                                </summary>\r\n                                <pre style={{\r\n                                    whiteSpace: 'pre-wrap',\r\n                                    wordBreak: 'break-word',\r\n                                    fontSize: '0.85rem',\r\n                                    margin: '0.5rem 0 0 0',\r\n                                    color: '#ff8888'\r\n                                }}>\r\n                                    {this.state.error.toString()}\r\n                                    {this.state.errorInfo && this.state.errorInfo.componentStack}\r\n                                </pre>\r\n                            </details>\r\n                        )}\r\n\r\n                        {/* Action Buttons */}\r\n                        <div style={{\r\n                            display: 'flex',\r\n                            gap: '1rem',\r\n                            justifyContent: 'center',\r\n                            flexWrap: 'wrap'\r\n                        }}>\r\n                            <button\r\n                                onClick={this.handleReload}\r\n                                style={{\r\n                                    padding: '0.75rem 2rem',\r\n                                    background: '#7FFFD4',\r\n                                    color: '#000',\r\n                                    border: 'none',\r\n                                    borderRadius: '8px',\r\n                                    fontSize: '1rem',\r\n                                    fontWeight: 'bold',\r\n                                    cursor: 'pointer',\r\n                                    transition: 'all 0.2s',\r\n                                    boxShadow: '0 4px 12px rgba(127, 255, 212, 0.3)'\r\n                                }}\r\n                                onMouseEnter={(e) => {\r\n                                    e.target.style.transform = 'translateY(-2px)';\r\n                                    e.target.style.boxShadow = '0 6px 16px rgba(127, 255, 212, 0.4)';\r\n                                }}\r\n                                onMouseLeave={(e) => {\r\n                                    e.target.style.transform = 'translateY(0)';\r\n                                    e.target.style.boxShadow = '0 4px 12px rgba(127, 255, 212, 0.3)';\r\n                                }}\r\n                            >\r\n                                Refresh Page\r\n                            </button>\r\n                            <button\r\n                                onClick={this.handleReset}\r\n                                style={{\r\n                                    padding: '0.75rem 2rem',\r\n                                    background: 'transparent',\r\n                                    color: '#7FFFD4',\r\n                                    border: '2px solid #7FFFD4',\r\n                                    borderRadius: '8px',\r\n                                    fontSize: '1rem',\r\n                                    fontWeight: 'bold',\r\n                                    cursor: 'pointer',\r\n                                    transition: 'all 0.2s'\r\n                                }}\r\n                                onMouseEnter={(e) => {\r\n                                    e.target.style.background = 'rgba(127, 255, 212, 0.1)';\r\n                                    e.target.style.transform = 'translateY(-2px)';\r\n                                }}\r\n                                onMouseLeave={(e) => {\r\n                                    e.target.style.background = 'transparent';\r\n                                    e.target.style.transform = 'translateY(0)';\r\n                                }}\r\n                            >\r\n                                Go to Home\r\n                            </button>\r\n                        </div>\r\n\r\n                        {/* Error Count (Development Mode) */}\r\n                        {import.meta.env.DEV && this.state.errorCount > 1 && (\r\n                            <p style={{\r\n                                marginTop: '1.5rem',\r\n                                fontSize: '0.9rem',\r\n                                color: '#888'\r\n                            }}>\r\n                                Error occurred {this.state.errorCount} times\r\n                            </p>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        return this.props.children;\r\n    }\r\n}\r\n\r\nexport default GlobalErrorBoundary;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\GridPostCard.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isFiltered' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":26,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":26,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { memo } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { FaImage } from 'react-icons/fa';\r\nimport SmartImage from './SmartImage';\r\nimport { getDerivedDate } from '@/core/utils/dates';\r\nimport SpaceCardBadge from './SpaceCardBadge';\r\nimport SoundTagBadge from './SoundTagBadge';\r\nimport { renderCosmicUsername } from '@/utils/usernameRenderer';\r\n\r\nconst GridPostCard = memo(({ post, contextPosts, selectedOrientation, selectedAspectRatio }) => {\r\n    const navigate = useNavigate();\r\n\r\n    // Helper to determine aspect ratio percentage\r\n    const getPaddingBottom = () => {\r\n        if (selectedAspectRatio) {\r\n            const [w, h] = selectedAspectRatio.split(':').map(Number);\r\n            return `${(h / w) * 100}%`;\r\n        }\r\n        if (selectedOrientation === 'landscape') return '56.25%'; // 16:9\r\n        if (selectedOrientation === 'portrait') return '125%'; // 4:5\r\n        if (selectedOrientation === 'square') return '100%'; // 1:1\r\n        return '100%'; // Default square\r\n    };\r\n\r\n    const paddingBottom = getPaddingBottom();\r\n    const isFiltered = selectedOrientation || selectedAspectRatio;\r\n\r\n    // OPTIMIZATION: Prioritize thumbnail URL for grid views\r\n    // Fallback to full URL only if no thumbnail exists\r\n    const displaySrc = post.thumbnailUrl || post.images?.[0]?.thumbnailUrl || post.images?.[0]?.url || post.imageUrl;\r\n    // Use previewUrl for the blur placeholder if available\r\n    const placeholderSrc = post.previewUrl || post.images?.[0]?.previewUrl;\r\n\r\n    return (\r\n        <div\r\n            onClick={() => navigate(`/post/${post.id}`, {\r\n                state: {\r\n                    contextPosts: contextPosts,\r\n                    initialIndex: contextPosts ? contextPosts.findIndex(p => p.id === post.id) : 0\r\n                }\r\n            })}\r\n            style={{\r\n                background: 'rgba(255,255,255,0.03)',\r\n                borderRadius: '0',\r\n                overflow: 'hidden',\r\n                cursor: 'pointer',\r\n                border: '1px solid rgba(255,255,255,0.05)',\r\n                position: 'relative',\r\n                width: '100%',\r\n                transition: 'all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94)'\r\n            }}\r\n            onMouseEnter={e => {\r\n                const pill = e.currentTarget.querySelector('.username-pill');\r\n                if (pill && window.innerWidth >= 768) pill.style.opacity = '1';\r\n                e.currentTarget.style.transform = 'scale(1.015)';\r\n                e.currentTarget.style.boxShadow = '0 10px 30px rgba(0,0,0,0.5)';\r\n                e.currentTarget.style.zIndex = '10';\r\n                e.currentTarget.style.borderColor = 'rgba(127, 255, 212, 0.3)';\r\n                e.currentTarget.style.filter = 'brightness(1.1)';\r\n            }}\r\n            onMouseLeave={e => {\r\n                const pill = e.currentTarget.querySelector('.username-pill');\r\n                if (pill) pill.style.opacity = '0';\r\n                e.currentTarget.style.transform = 'scale(1)';\r\n                e.currentTarget.style.boxShadow = 'none';\r\n                e.currentTarget.style.zIndex = '1';\r\n                e.currentTarget.style.borderColor = 'rgba(255,255,255,0.05)';\r\n                e.currentTarget.style.filter = 'brightness(1)';\r\n            }}\r\n        >\r\n            {/* Container with dynamic aspect ratio */}\r\n            <div style={{\r\n                width: '100%',\r\n                paddingBottom: paddingBottom,\r\n                background: '#111',\r\n                position: 'relative',\r\n                overflow: 'hidden'\r\n            }}>\r\n                <div style={{\r\n                    position: 'absolute',\r\n                    top: 0,\r\n                    left: 0,\r\n                    width: '100%',\r\n                    height: '100%'\r\n                }}>\r\n                    {displaySrc ? (\r\n                        <SmartImage\r\n                            src={displaySrc}\r\n                            previewSrc={placeholderSrc}\r\n                            thumbnailSrc={placeholderSrc} // Use placeholder as thumbnail level\r\n                            alt={post.title || ''}\r\n                            aspectRatio=\"1/1\"\r\n                            objectFit=\"cover\"\r\n                            style={{\r\n                                width: '100%',\r\n                                height: '100%',\r\n                                position: 'absolute',\r\n                                top: 0,\r\n                                left: 0,\r\n                                display: 'block'\r\n                            }}\r\n                            showDateStamp={post.showDateStamp}\r\n                            dateStampStyle={post.dateStampStyle}\r\n                            date={getDerivedDate(post)}\r\n                            eager={false} // Ensure lazy loading\r\n                        />\r\n                    ) : (\r\n                        <div style={{ width: '100%', height: '100%', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\r\n                            <FaImage color=\"#333\" size={40} />\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Digital Goods Badges - Top Left */}\r\n                <div style={{\r\n                    position: 'absolute',\r\n                    top: '10px',\r\n                    left: '10px',\r\n                    display: 'flex',\r\n                    flexDirection: 'column',\r\n                    gap: '4px',\r\n                    zIndex: 2,\r\n                    pointerEvents: 'none'\r\n                }}>\r\n                    {post.spaceCardId && (\r\n                        <div style={{ transform: 'scale(0.8)', transformOrigin: 'top left' }}>\r\n                            <SpaceCardBadge\r\n                                type={post.isSpaceCardCreator ? 'creator' : 'owner'}\r\n                                rarity={post.spaceCardRarity || 'Common'}\r\n                            />\r\n                        </div>\r\n                    )}\r\n                    {post.soundTagId && (\r\n                        <div style={{ transform: 'scale(0.8)', transformOrigin: 'top left' }}>\r\n                            <SoundTagBadge\r\n                                hasSound={true}\r\n                                label=\"\" // No text for grid view\r\n                            />\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Post Type Indicator */}\r\n                {post.postType && post.postType !== 'standard' && (\r\n                    <div\r\n                        style={{\r\n                            position: 'absolute',\r\n                            top: '10px',\r\n                            right: '10px',\r\n                            background: 'rgba(127, 255, 212, 0.9)',\r\n                            color: '#000',\r\n                            padding: '4px 8px',\r\n                            borderRadius: '5px',\r\n                            fontSize: '0.75rem',\r\n                            fontWeight: '600',\r\n                            boxShadow: '0 2px 8px rgba(0, 0, 0, 0.4)',\r\n                            pointerEvents: 'none',\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            gap: '4px',\r\n                            zIndex: 2\r\n                        }}\r\n                    >\r\n                        {post.postType === 'flipbook' && '≡ƒÄ₧∩╕Å'}\r\n                        {post.postType === 'multi-layout' && '≡ƒû╝∩╕Å'}\r\n                        {post.postType === 'pano-stack' && '≡ƒÅö∩╕Å'}\r\n                    </div>\r\n                )}\r\n\r\n                {/* Username pill - hover on desktop, always visible on mobile */}\r\n                <div\r\n                    className=\"username-pill\"\r\n                    style={{\r\n                        position: 'absolute',\r\n                        bottom: '10px',\r\n                        left: '10px',\r\n                        background: 'rgba(0, 0, 0, 0.3)',\r\n                        backdropFilter: 'blur(10px)',\r\n                        WebkitBackdropFilter: 'blur(10px)',\r\n                        color: '#fff',\r\n                        padding: '2px 6px',\r\n                        borderRadius: '4px',\r\n                        fontSize: '0.65rem',\r\n                        fontWeight: '500',\r\n                        textShadow: '0 1px 3px rgba(0, 0, 0, 0.8)',\r\n                        boxShadow: '0 2px 8px rgba(0, 0, 0, 0.3)',\r\n                        border: '1px solid rgba(255, 255, 255, 0.1)',\r\n                        opacity: window.innerWidth < 768 ? '1' : '0',\r\n                        transition: 'opacity 0.2s',\r\n                        pointerEvents: 'none',\r\n                        whiteSpace: 'nowrap',\r\n                        zIndex: 2\r\n                    }}\r\n                >\r\n                    {renderCosmicUsername(post.username || post.authorName || post.displayName || 'Anonymous')}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n});\r\n\r\nexport default GridPostCard;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\HeaderBar.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { FaArrowLeft } from 'react-icons/fa';\r\n\r\n/**\r\n * HeaderBar Component\r\n * \r\n * Reusable header bar with back button and title\r\n * \r\n * @param {string} title - Header title text\r\n * @param {function} onBack - Optional custom back handler (defaults to navigate(-1))\r\n * @param {ReactNode} rightSlot - Optional content for right side of header\r\n * @param {object} style - Optional additional styles for the header container\r\n * @param {string} variant - Style variant: 'default', 'sticky', 'gradient' (default: 'sticky')\r\n */\r\nconst HeaderBar = ({\r\n    title,\r\n    onBack,\r\n    rightSlot,\r\n    style = {},\r\n    variant = 'sticky'\r\n}) => {\r\n    const navigate = useNavigate();\r\n\r\n    const handleBack = () => {\r\n        if (onBack) {\r\n            onBack();\r\n        } else {\r\n            navigate(-1);\r\n        }\r\n    };\r\n\r\n    // Base styles\r\n    const baseStyles = {\r\n        padding: '2rem',\r\n        borderBottom: '1px solid #333',\r\n        background: '#000',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        gap: '1rem'\r\n    };\r\n\r\n    // Variant styles\r\n    const variantStyles = {\r\n        default: {},\r\n        sticky: {\r\n            position: 'sticky',\r\n            top: 0,\r\n            zIndex: 100\r\n        },\r\n        gradient: {\r\n            background: 'linear-gradient(135deg, #1a1a1a 0%, #0a0a0a 100%)',\r\n            borderBottom: '2px solid #7FFFD4',\r\n            position: 'sticky',\r\n            top: 0,\r\n            zIndex: 100\r\n        },\r\n        blur: {\r\n            background: 'rgba(0,0,0,0.8)',\r\n            backdropFilter: 'blur(10px)',\r\n            borderBottom: '1px solid #222',\r\n            position: 'sticky',\r\n            top: 0,\r\n            zIndex: 10\r\n        }\r\n    };\r\n\r\n    const containerStyles = {\r\n        ...baseStyles,\r\n        ...variantStyles[variant],\r\n        ...style\r\n    };\r\n\r\n    return (\r\n        <div style={containerStyles}>\r\n            <button\r\n                onClick={handleBack}\r\n                style={{\r\n                    background: 'transparent',\r\n                    border: 'none',\r\n                    color: '#888',\r\n                    cursor: 'pointer',\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    gap: '0.5rem',\r\n                    fontSize: '0.9rem',\r\n                    padding: 0\r\n                }}\r\n            >\r\n                <FaArrowLeft />\r\n            </button>\r\n            <h1 style={{\r\n                fontSize: '1.2rem',\r\n                margin: 0,\r\n                flex: 1\r\n            }}>\r\n                {title}\r\n            </h1>\r\n            {rightSlot && (\r\n                <div style={{ marginLeft: 'auto' }}>\r\n                    {rightSlot}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default HeaderBar;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\ImageCropper.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaUndo' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":45,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":51}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useRef, useEffect } from 'react';\r\nimport { FaCheck, FaTimes, FaMinus, FaPlus, FaUndo } from 'react-icons/fa';\r\n\r\nconst CROP_SIZE = 280;\r\n\r\nconst ImageCropper = ({ imageSrc, onCrop, onCancel }) => {\r\n    const [offset, setOffset] = useState({ x: 0, y: 0 });\r\n    const [zoom, setZoom] = useState(1);\r\n    const [dragging, setDragging] = useState(false);\r\n    const [dragStart, setDragStart] = useState({ x: 0, y: 0 });\r\n    const [imageSize, setImageSize] = useState({ width: 0, height: 0, naturalWidth: 0, naturalHeight: 0 });\r\n\r\n    const containerRef = useRef(null);\r\n    const imageRef = useRef(null);\r\n\r\n    // Load image size on mount\r\n    useEffect(() => {\r\n        const img = new Image();\r\n        img.src = imageSrc;\r\n        img.onload = () => {\r\n            // Calculate base dimensions to 'cover' the crop area\r\n            const aspect = img.naturalWidth / img.naturalHeight;\r\n            let renderWidth, renderHeight;\r\n\r\n            if (aspect > 1) {\r\n                // Landscape\r\n                renderHeight = CROP_SIZE;\r\n                renderWidth = CROP_SIZE * aspect;\r\n            } else {\r\n                // Portrait\r\n                renderWidth = CROP_SIZE;\r\n                renderHeight = CROP_SIZE / aspect;\r\n            }\r\n\r\n            setImageSize({\r\n                width: renderWidth,\r\n                height: renderHeight,\r\n                naturalWidth: img.naturalWidth,\r\n                naturalHeight: img.naturalHeight\r\n            });\r\n        };\r\n    }, [imageSrc]);\r\n\r\n    const getClientPos = (e) => {\r\n        if (e.touches && e.touches.length > 0) {\r\n            return { x: e.touches[0].clientX, y: e.touches[0].clientY };\r\n        }\r\n        return { x: e.clientX, y: e.clientY };\r\n    };\r\n\r\n    const handleStart = (e) => {\r\n        e.preventDefault();\r\n        const pos = getClientPos(e);\r\n        setDragging(true);\r\n        setDragStart({ x: pos.x - offset.x, y: pos.y - offset.y });\r\n    };\r\n\r\n    const handleMove = (e) => {\r\n        if (!dragging) return;\r\n        const pos = getClientPos(e);\r\n        setOffset({\r\n            x: pos.x - dragStart.x,\r\n            y: pos.y - dragStart.y\r\n        });\r\n    };\r\n\r\n    const handleEnd = () => {\r\n        setDragging(false);\r\n    };\r\n\r\n    const handleCrop = async () => {\r\n        const canvas = document.createElement('canvas');\r\n        const ctx = canvas.getContext('2d');\r\n        const OUTPUT_SIZE = 512;\r\n\r\n        canvas.width = OUTPUT_SIZE;\r\n        canvas.height = OUTPUT_SIZE;\r\n\r\n        // Fill black (optional, mostly covered)\r\n        ctx.fillStyle = '#000';\r\n        ctx.fillRect(0, 0, OUTPUT_SIZE, OUTPUT_SIZE);\r\n\r\n        // Calculate Scale Factor\r\n        // The renderSize (imageSize.width) corresponds to naturalWidth\r\n        // We displayed it in a window of CROP_SIZE (but actually overflowed).\r\n        // The visible center is (CROP_SIZE/2, CROP_SIZE/2)\r\n        // The image center is offsets from that.\r\n\r\n        // Let's use the transform matrix approach which is robust.\r\n        // Screen space: Center is (CROP_SIZE/2, CROP_SIZE/2)\r\n        // Image is drawn at: (CROP_SIZE/2 + offset.x - renderWidth/2) * zoom? \r\n        // Wait, my CSS transform below is: translate(-50%, -50%) translate(offset.x, offset.y) scale(zoom)\r\n        // on an image absolutely positioned at left: 50%, top: 50%.\r\n\r\n        // So visually:\r\n        // The image's center is at (ContainerCenter + Offset).\r\n        // And it is scaled by Zoom.\r\n\r\n        // Mapping to Canvas (OUTPUT_SIZE):\r\n        // Scale ratio S = OUTPUT_SIZE / CROP_SIZE\r\n        // Canvas Center = OUTPUT_SIZE / 2\r\n\r\n        const S = OUTPUT_SIZE / CROP_SIZE;\r\n\r\n        ctx.translate(OUTPUT_SIZE / 2, OUTPUT_SIZE / 2);\r\n        ctx.translate(offset.x * S, offset.y * S);\r\n        ctx.scale(zoom, zoom);\r\n\r\n        // We need to draw the image such that its own center is at (0,0) in current context,\r\n        // scaled by the ratio of (RenderSize / CROP_SIZE) * S ?\r\n        // No. If RenderSize = CROP_SIZE (at zoom 1), it fits exactly.\r\n        // But the natural image is potentially huge.\r\n        // We want to draw the natural image scaled down to \"RenderSize\" effectively.\r\n\r\n        // Scale to map Natural -> CanvasPixels\r\n        // If zoom=1, we want NaturalWidth to take up (RenderWidth * S) pixels.\r\n        // So scale = (RenderWidth * S) / NaturalWidth\r\n\r\n        const drawScale = (imageSize.width * S) / imageSize.naturalWidth;\r\n        ctx.scale(drawScale, drawScale);\r\n\r\n        ctx.drawImage(\r\n            imageRef.current,\r\n            -imageSize.naturalWidth / 2,\r\n            -imageSize.naturalHeight / 2\r\n        );\r\n\r\n        canvas.toBlob((blob) => {\r\n            onCrop(blob);\r\n        }, 'image/jpeg', 0.9);\r\n    };\r\n\r\n    return (\r\n        <div style={{\r\n            position: 'fixed',\r\n            inset: 0,\r\n            background: 'rgba(0,0,0,0.95)',\r\n            zIndex: 99999,\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            alignItems: 'center',\r\n            justifyContent: 'center'\r\n        }}>\r\n            <h3 style={{ color: '#fff', marginBottom: '1rem' }}>Adjust Profile Photo</h3>\r\n\r\n            <div\r\n                ref={containerRef}\r\n                style={{\r\n                    width: CROP_SIZE,\r\n                    height: CROP_SIZE,\r\n                    borderRadius: '40px',\r\n                    border: '2px solid #7FFFD4',\r\n                    overflow: 'hidden',\r\n                    position: 'relative',\r\n                    background: '#222',\r\n                    cursor: dragging ? 'grabbing' : 'grab',\r\n                    touchAction: 'none' // Prevent scrolling\r\n                }}\r\n                onMouseDown={handleStart}\r\n                onMouseMove={handleMove}\r\n                onMouseUp={handleEnd}\r\n                onMouseLeave={handleEnd}\r\n                onTouchStart={handleStart}\r\n                onTouchMove={handleMove}\r\n                onTouchEnd={handleEnd}\r\n            >\r\n                {imageSrc && (\r\n                    <img\r\n                        ref={imageRef}\r\n                        src={imageSrc}\r\n                        alt=\"Crop Preview\"\r\n                        draggable={false}\r\n                        style={{\r\n                            position: 'absolute',\r\n                            left: '50%',\r\n                            top: '50%',\r\n                            width: imageSize.width,\r\n                            height: imageSize.height,\r\n                            transform: `translate(-50%, -50%) translate(${offset.x}px, ${offset.y}px) scale(${zoom})`,\r\n                            transformOrigin: 'center',\r\n                            pointerEvents: 'none', // Let container handle events\r\n                            userSelect: 'none'\r\n                        }}\r\n                    />\r\n                )}\r\n            </div>\r\n\r\n            {/* Controls */}\r\n            <div style={{ marginTop: '2rem', width: '80%', maxWidth: '300px' }}>\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: '1rem', color: '#7FFFD4' }}>\r\n                    <FaMinus size={12} />\r\n                    <input\r\n                        type=\"range\"\r\n                        min=\"1\"\r\n                        max=\"3\"\r\n                        step=\"0.05\"\r\n                        value={zoom}\r\n                        onChange={(e) => setZoom(parseFloat(e.target.value))}\r\n                        style={{ flex: 1, accentColor: '#7FFFD4' }}\r\n                    />\r\n                    <FaPlus size={12} />\r\n                </div>\r\n            </div>\r\n\r\n            <div style={{ marginTop: '2rem', display: 'flex', gap: '1rem' }}>\r\n                <button\r\n                    onClick={onCancel}\r\n                    style={{\r\n                        padding: '0.8rem 1.5rem',\r\n                        background: '#333',\r\n                        color: '#fff',\r\n                        border: 'none',\r\n                        borderRadius: '30px',\r\n                        cursor: 'pointer',\r\n                        fontWeight: 'bold',\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        gap: '0.5rem'\r\n                    }}\r\n                >\r\n                    <FaTimes /> Cancel\r\n                </button>\r\n                <button\r\n                    onClick={handleCrop}\r\n                    style={{\r\n                        padding: '0.8rem 1.5rem',\r\n                        background: '#7FFFD4',\r\n                        color: '#000',\r\n                        border: 'none',\r\n                        borderRadius: '30px',\r\n                        cursor: 'pointer',\r\n                        fontWeight: 'bold',\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        gap: '0.5rem'\r\n                    }}\r\n                >\r\n                    <FaCheck /> Save Photo\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ImageCropper;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\InfiniteGrid.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\InstantPhotoFrame.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { memo } from 'react';\r\n\r\n// --- SEPARATE STYLE CONSTANTS ---\r\n\r\n/* THIN PRESET - Tuned Square/Vertical Hybrid */\r\nconst instantPhotoStyleThin = {\r\n    padding: '2.5% 2.5% 7.5% 2.5%', // Balanced chin\r\n    aspectRatio: '1 / 1.15',\r\n    imageAspectRatio: '1 / 1.05',\r\n    bottomAreaBottom: '1.2%',\r\n    bottomAreaHeight: '6%',\r\n    brandFontSize: '1rem', // Significantly larger\r\n    quartzFontSize: '0.8rem',\r\n    logoWidth: \"28\", // Significantly larger\r\n    logoHeight: \"24\"\r\n};\r\n\r\n/* THICK PRESET - Classic \"Polaroid\" Square Look (UNCHANGED) */\r\nconst instantPhotoStyleThick = {\r\n    padding: '5% 5% 25% 5%',\r\n    aspectRatio: '3.5 / 4.2',\r\n    imageAspectRatio: '1 / 1', // Strict Square\r\n    bottomAreaBottom: '2%',\r\n    bottomAreaHeight: '20%',\r\n    brandFontSize: '1.2rem',\r\n    quartzFontSize: '0.9rem',\r\n    logoWidth: \"34\",\r\n    logoHeight: \"28\"\r\n};\r\n\r\n/**\r\n * PolaroidFrame - Instant Photo Style\r\n * Adds a classic instant photo border with bottom text area.\r\n */\r\nconst InstantPhotoFrame = memo(({ children, quartzDate, style = 'thick' }) => {\r\n    // Select the separate style object based on prop - NO MERGING\r\n    const activeStyle = style === 'thin' ? instantPhotoStyleThin : instantPhotoStyleThick;\r\n\r\n    return (\r\n        <div style={{\r\n            width: '100%',\r\n            height: 'auto', // Allow aspect-ratio to determine height, preventing stretch\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            padding: '0.5rem', // Reduced padding for larger appearance\r\n            boxSizing: 'border-box'\r\n        }}>\r\n            <div className=\"instant-photo-card\" style={{\r\n                background: '#fff',\r\n                padding: activeStyle.padding,\r\n                boxShadow: '0 4px 15px rgba(0,0,0,0.5)',\r\n                width: '100%',\r\n                aspectRatio: activeStyle.aspectRatio,\r\n                display: 'flex',\r\n                flexDirection: 'column',\r\n                alignItems: 'center',\r\n                justifyContent: 'flex-start',\r\n                position: 'relative',\r\n                boxSizing: 'border-box'\r\n            }}>\r\n                {/* Texture overlay */}\r\n                <div style={{\r\n                    position: 'absolute',\r\n                    inset: 0,\r\n                    background: `url(\"data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.03'/%3E%3C/svg%3E\")`,\r\n                    pointerEvents: 'none',\r\n                    zIndex: 2\r\n                }}></div>\r\n\r\n                {/* Inner Image Wrapper - Dynamic Aspect Ratio */}\r\n                <div className=\"polaroid-image-wrapper\" style={{\r\n                    width: '100%',\r\n                    aspectRatio: activeStyle.imageAspectRatio, // 3:4 for Thin, 1:1 for Thick\r\n                    background: '#111',\r\n                    position: 'relative',\r\n                    overflow: 'hidden',\r\n                    border: '1px solid rgba(0,0,0,0.1)'\r\n                }}>\r\n                    {/* Children must object-fit: cover inside this frame */}\r\n                    {children}\r\n                </div>\r\n\r\n                {/* Bottom Text Area */}\r\n                <div style={{\r\n                    position: 'absolute',\r\n                    bottom: activeStyle.bottomAreaBottom,\r\n                    left: '5%',\r\n                    right: '5%',\r\n                    height: activeStyle.bottomAreaHeight,\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'space-between',\r\n                    fontFamily: '\"Courier New\", Courier, monospace',\r\n                    color: '#000',\r\n                    zIndex: 3,\r\n                    padding: '0 1%'\r\n                }}>\r\n                    <span style={{\r\n                        fontSize: activeStyle.brandFontSize,\r\n                        fontWeight: 'bold',\r\n                        letterSpacing: '0.05em',\r\n                        opacity: 1\r\n                    }}>\r\n                        PANOSPACE\r\n                    </span>\r\n\r\n                    {/* Quartz Date on Border */}\r\n                    {quartzDate && (\r\n                        <div style={{\r\n                            fontFamily: '\"DSEG14\", \"DSEG7\", \"Courier New\", monospace',\r\n                            color: quartzDate.color || '#F6D88B',\r\n                            fontSize: activeStyle.quartzFontSize,\r\n                            fontWeight: '700',\r\n                            letterSpacing: '0.05em',\r\n                            opacity: 0.8,\r\n                            textShadow: '0px 1px 1px rgba(0,0,0,0.2)'\r\n                        }}>\r\n                            {quartzDate.text}\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Planet Logo */}\r\n                    <svg width={activeStyle.logoWidth} height={activeStyle.logoHeight} viewBox=\"0 0 32 24\" style={{ opacity: 1 }}>\r\n                        <defs>\r\n                            <radialGradient id=\"instantPlanetGrad\" cx=\"40%\" cy=\"40%\">\r\n                                <stop offset=\"0%\" style={{ stopColor: '#111', stopOpacity: 1 }} />\r\n                                <stop offset=\"100%\" style={{ stopColor: '#000', stopOpacity: 1 }} />\r\n                            </radialGradient>\r\n                        </defs>\r\n                        {/* Centered at 16, 12 to fit in 32 width */}\r\n                        <circle cx=\"16\" cy=\"12\" r=\"7\" fill=\"url(#instantPlanetGrad)\" />\r\n                        <ellipse cx=\"16\" cy=\"12\" rx=\"14\" ry=\"4\" fill=\"none\" stroke=\"#000\" strokeWidth=\"1.8\" transform=\"rotate(-20 16 12)\" />\r\n                    </svg>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n});\r\n\r\nexport default InstantPhotoFrame;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\InstantPhotoPost.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaMapMarkerAlt' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaCamera' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":34},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaInfoCircle' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":36,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":48},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'DateStampOverlay' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":24},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'authorPhoto'. Either include it or remove the dependency array.","line":49,"column":8,"nodeType":"ArrayExpression","endLine":49,"endColumn":14,"suggestions":[{"desc":"Update the dependencies array to be: [authorPhoto, post]","fix":{"range":[2109,2115],"text":"[authorPhoto, post]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { memo, useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { FaMapMarkerAlt, FaCamera, FaInfoCircle } from 'react-icons/fa';\r\nimport PostDetailsSidebar from './PostDetailsSidebar';\r\nimport InstantPhotoFrame from './InstantPhotoFrame';\r\nimport SmartImage from './SmartImage';\r\nimport DateStampOverlay from './DateStampOverlay';\r\nimport LikeButton from './LikeButton';\r\nimport PlanetUserIcon from './PlanetUserIcon';\r\nimport SpaceCardBadge from './SpaceCardBadge';\r\nimport SoundTagBadge from './SoundTagBadge';\r\nimport { db } from '@/firebase';\r\nimport { doc, getDoc } from 'firebase/firestore';\r\nimport { logger } from '@/core/utils/logger';\r\nimport { renderCosmicUsername } from '@/utils/usernameRenderer';\r\nimport '@/styles/film-strip-post.css';\r\n\r\n/**\r\n * InstantPhotoPost\r\n * \r\n * Renders a horizontally scrollable strip of instant photos.\r\n * Fits ~2.5 photos on screen. Includes scrollbar and standard overlays.\r\n */\r\nconst InstantPhotoPost = ({ post, images = [], uiOverlays = null, priority = 'normal' }) => {\r\n    const navigate = useNavigate();\r\n    const [showDetailsSidebar, setShowDetailsSidebar] = useState(false);\r\n    const [authorPhoto, setAuthorPhoto] = useState(\r\n        post?.authorPhotoUrl || post?.userPhotoUrl || post?.userAvatar || post?.profileImage || null\r\n    );\r\n\r\n    // Fetch author photo if missing\r\n    useEffect(() => {\r\n        const fetchAuthorPhoto = async () => {\r\n            if (authorPhoto && authorPhoto.startsWith('http')) return;\r\n            const authorId = post?.userId || post?.authorId || post?.uid;\r\n            if (!authorId) return;\r\n\r\n            try {\r\n                const userDocRef = doc(db, 'users', authorId);\r\n                const userDocSnap = await getDoc(userDocRef);\r\n                if (userDocSnap.exists() && userDocSnap.data().photoURL) {\r\n                    setAuthorPhoto(userDocSnap.data().photoURL);\r\n                }\r\n            } catch (err) {\r\n                logger.warn(\"Error fetching author photo\", err);\r\n            }\r\n        };\r\n        fetchAuthorPhoto();\r\n    }, [post]);\r\n\r\n    const handleAuthorClick = (e) => {\r\n        e.stopPropagation();\r\n        const authorId = post?.userId || post?.authorId || post?.uid;\r\n        if (authorId) navigate(`/profile/${authorId}`);\r\n    };\r\n\r\n    return (\r\n        <div style={{\r\n            width: '100%',\r\n            height: '100%',\r\n            position: 'relative',\r\n            backgroundColor: (post?.atmosphereBackground === 'cinematic-gradient')\r\n                ? 'transparent' // We'll set the gradient on the container or a wrapper\r\n                : '#000',\r\n            background: (post?.atmosphereBackground === 'cinematic-gradient')\r\n                ? `radial-gradient(circle at center, ${post.gradientColor || '#1a4f3d'} 0%, #000000 90%)`\r\n                : '#000',\r\n            overflow: 'hidden'\r\n        }}>\r\n            {/* Scroll Container leveraging Film Strip CSS for the scrollbar */}\r\n            <div className=\"cyber-film-strip-scroll-container\" style={{\r\n                height: '100%',\r\n                width: '100%',\r\n                // Hide scrollbar padding if items fit (<= 3)\r\n                padding: images.length <= 3 ? '0 5vw' : '0 5vw 2rem 5vw',\r\n                gap: '4rem', // Increased spacing\r\n                // Center if 3 or fewer items so they appear in middle of screen\r\n                justifyContent: images.length <= 3 ? 'center' : 'flex-start',\r\n                alignItems: 'center',\r\n                // Explicitly hide scrollbar if compact\r\n                overflowX: images.length <= 3 ? 'hidden' : 'auto'\r\n            }}>\r\n\r\n                {images.map((item, index) => {\r\n                    const url = item.url || item;\r\n                    const isUrl = typeof url === 'string' && (url.startsWith('http') || url.startsWith('blob:'));\r\n                    const instantStyle = uiOverlays?.instantPhotoStyle || 'thick';\r\n\r\n                    return (\r\n                        <div\r\n                            key={index}\r\n                            className={`instant-photo-frame-wrapper ${instantStyle === 'thin' ? 'thin' : ''}`}\r\n                            style={{\r\n                                height: 'auto',\r\n                                display: 'flex',\r\n                                alignItems: 'center',\r\n                                justifyContent: 'center'\r\n                            }}\r\n                        >\r\n                            <InstantPhotoFrame\r\n                                quartzDate={uiOverlays?.quartzDate}\r\n                                style={uiOverlays?.instantPhotoStyle || 'thick'} // Default to 'thick' for legacy posts\r\n                            >\r\n                                {isUrl ? (\r\n                                    <div style={{ position: 'relative', width: '100%', height: '100%' }}>\r\n                                        <SmartImage\r\n                                            src={url}\r\n                                            alt={`Slide ${index + 1}`}\r\n                                            priority={index === 0 ? priority : 'low'}\r\n                                            objectFit=\"cover\"\r\n                                            className=\"polaroid-image\"\r\n                                            style={{ width: '100%', height: '100%' }}\r\n                                        />\r\n                                    </div>\r\n                                ) : (\r\n                                    <div style={{\r\n                                        width: '100%',\r\n                                        height: '100%',\r\n                                        background: '#111',\r\n                                        color: '#fff',\r\n                                        display: 'flex',\r\n                                        alignItems: 'center',\r\n                                        justifyContent: 'center',\r\n                                        padding: '1rem',\r\n                                        textAlign: 'center'\r\n                                    }}>\r\n                                        {item.content || item.text || 'VOID'}\r\n                                    </div>\r\n                                )}\r\n                            </InstantPhotoFrame>\r\n                        </div>\r\n                    );\r\n                })}\r\n\r\n                {/* Spacer at end */}\r\n                <div style={{ flex: '0 0 2rem' }}></div>\r\n            </div>\r\n\r\n            {/* --- OVERLAYS --- */}\r\n\r\n            {/* Badges (Top Right) */}\r\n            <div style={{\r\n                position: 'absolute',\r\n                top: '20px',\r\n                right: '20px',\r\n                display: 'flex',\r\n                flexDirection: 'column',\r\n                gap: '8px',\r\n                zIndex: 20,\r\n                alignItems: 'flex-end',\r\n                pointerEvents: 'none' // Allow clicks through\r\n            }}>\r\n                <div style={{ pointerEvents: 'auto' }}>\r\n                    {post?.spaceCardId && (\r\n                        <SpaceCardBadge\r\n                            type={post.isSpaceCardCreator ? 'creator' : 'owner'}\r\n                            rarity={post.spaceCardRarity || 'Common'}\r\n                        />\r\n                    )}\r\n                </div>\r\n                <div style={{ pointerEvents: 'auto' }}>\r\n                    {post?.soundTagId && (\r\n                        <SoundTagBadge\r\n                            hasSound={true}\r\n                            label={post.soundTagTitle || 'SoundTag'}\r\n                        />\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Title Overlay */}\r\n            {post?.title && (\r\n                <div className=\"post-title-overlay\">\r\n                    <h2 className=\"post-title-text\">{renderCosmicUsername(post.title)}</h2>\r\n                </div>\r\n            )}\r\n\r\n            {/* Author Info (Bottom Left) */}\r\n            <div\r\n                className=\"author-overlay\"\r\n                style={{\r\n                    position: 'absolute',\r\n                    bottom: 'max(80px, calc(80px + env(safe-area-inset-bottom)))',\r\n                    left: '20px',\r\n                    display: 'flex',\r\n                    alignItems: 'stretch',\r\n                    background: 'rgba(0, 0, 0, 0.6)',\r\n                    backdropFilter: 'blur(8px)',\r\n                    borderRadius: '8px',\r\n                    zIndex: 10,\r\n                    width: 'fit-content',\r\n                    maxWidth: '300px',\r\n                    border: '1px solid rgba(255,255,255,0.1)',\r\n                    overflow: 'hidden'\r\n                }}\r\n            >\r\n                {/* Author Photo */}\r\n                <div\r\n                    onClick={handleAuthorClick}\r\n                    style={{\r\n                        width: '40px',\r\n                        height: '40px',\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        justifyContent: 'center',\r\n                        background: 'rgba(255,255,255,0.05)',\r\n                        borderRight: '1px solid rgba(255,255,255,0.1)',\r\n                        cursor: 'pointer'\r\n                    }}\r\n                >\r\n                    {authorPhoto ? (\r\n                        <img\r\n                            src={authorPhoto}\r\n                            alt={post?.username}\r\n                            style={{ width: '100%', height: '100%', objectFit: 'cover' }}\r\n                            onError={(e) => { e.target.style.display = 'none'; e.target.nextSibling.style.display = 'flex'; }}\r\n                        />\r\n                    ) : null}\r\n                    <div style={{ display: authorPhoto ? 'none' : 'flex', width: '100%', height: '100%', alignItems: 'center', justifyContent: 'center' }}>\r\n                        <PlanetUserIcon size={28} color=\"#7FFFD4\" />\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Username */}\r\n                <div\r\n                    onClick={(e) => {\r\n                        e.stopPropagation();\r\n                        setShowDetailsSidebar(true);\r\n                    }}\r\n                    style={{\r\n                        padding: '0.4rem 0.8rem',\r\n                        display: 'flex',\r\n                        flexDirection: 'column',\r\n                        justifyContent: 'center',\r\n                        gap: '2px',\r\n                        cursor: 'pointer'\r\n                    }}\r\n                >\r\n                    <span style={{\r\n                        color: '#7FFFD4',\r\n                        fontWeight: '700',\r\n                        fontSize: '0.9rem',\r\n                        fontFamily: '\"Rajdhani\", monospace',\r\n                        letterSpacing: '1px',\r\n                        textTransform: 'uppercase',\r\n                        lineHeight: 1\r\n                    }}>\r\n                        {renderCosmicUsername(post?.username || post?.authorName || 'ANONYMOUS')}\r\n                    </span>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Actions (Bottom Right) */}\r\n            <div className=\"post-actions-container\">\r\n                {/* Photo count removed */}\r\n                <LikeButton postId={post?.id} />\r\n            </div>\r\n            {/* Sidebar */}\r\n            <PostDetailsSidebar\r\n                isVisible={showDetailsSidebar}\r\n                onClose={() => setShowDetailsSidebar(false)}\r\n                post={post}\r\n                items={images}\r\n            />\r\n\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default memo(InstantPhotoPost);\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\LikeButton.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setDoc' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":32},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'serverTimestamp' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":42,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":57},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'currentUser'. Either include it or remove the dependency array.","line":55,"column":8,"nodeType":"ArrayExpression","endLine":55,"endColumn":49,"suggestions":[{"desc":"Update the dependencies array to be: [postId, currentUser.uid, enableRatings, currentUser]","fix":{"range":[2601,2642],"text":"[postId, currentUser.uid, enableRatings, currentUser]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { db } from '@/firebase';\r\nimport { doc, updateDoc, setDoc, getDoc, serverTimestamp } from 'firebase/firestore';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { usePreferenceLearning } from '@/hooks/usePersonalizedFeed';\r\nimport { FaStar, FaRegStar, FaSmile, FaRegSmile } from 'react-icons/fa';\r\n\r\nconst LikeButton = ({ postId, initialLiked, initialCount, enableRatings = true }) => {\r\n    const { currentUser } = useAuth();\r\n    const [userRating, setUserRating] = useState(0); // User's rating (1-5)\r\n    const [averageRating, setAverageRating] = useState(0);\r\n    const [totalVotes, setTotalVotes] = useState(0);\r\n    const [animating, setAnimating] = useState(false);\r\n    const [hoveredStar, setHoveredStar] = useState(0);\r\n    const [isProcessing, setIsProcessing] = useState(false); // ≡ƒöÆ Double-tap prevention\r\n\r\n    // Legacy like system for non-rated posts\r\n    const [liked, setLiked] = useState(initialLiked || false);\r\n    const [likeCount, setLikeCount] = useState(initialCount || 0);\r\n\r\n    useEffect(() => {\r\n        const fetchRatingStatus = async () => {\r\n            if (!currentUser || !postId) return;\r\n            try {\r\n                const postRef = doc(db, 'posts', postId);\r\n                const postSnap = await getDoc(postRef);\r\n\r\n                if (postSnap.exists()) {\r\n                    const data = postSnap.data();\r\n\r\n                    if (enableRatings) {\r\n                        // Fetch rating data\r\n                        const ratings = data.ratings || {};\r\n                        const userRatingValue = ratings[currentUser.uid] || 0;\r\n                        setUserRating(userRatingValue);\r\n\r\n                        // Calculate average\r\n                        const ratingValues = Object.values(ratings);\r\n                        const total = ratingValues.length;\r\n                        const avg = total > 0 ? ratingValues.reduce((a, b) => a + b, 0) / total : 0;\r\n                        setAverageRating(avg);\r\n                        setTotalVotes(total);\r\n                    } else {\r\n                        // Legacy like system\r\n                        const likes = data.likes || [];\r\n                        setLiked(likes.includes(currentUser.uid));\r\n                        setLikeCount(data.likeCount !== undefined ? data.likeCount : likes.length);\r\n                    }\r\n                }\r\n            } catch (error) {\r\n                console.error('Error fetching rating status:', error);\r\n            }\r\n        };\r\n        fetchRatingStatus();\r\n    }, [postId, currentUser?.uid, enableRatings]);\r\n\r\n    const { trackLike } = usePreferenceLearning();\r\n\r\n    const handleStarClick = async (rating) => {\r\n        setHoveredStar(0); // Fix for sticky hover on mobile\r\n        if (!currentUser) {\r\n            alert('Please log in to rate posts');\r\n            return;\r\n        }\r\n\r\n        // ≡ƒöÆ DOUBLE-TAP PREVENTION\r\n        if (isProcessing) return;\r\n        setIsProcessing(true);\r\n\r\n        setAnimating(true);\r\n        setTimeout(() => setAnimating(false), 400);\r\n\r\n        const previousRating = userRating;\r\n        setUserRating(rating);\r\n\r\n        try {\r\n            const postRef = doc(db, 'posts', postId);\r\n            const postSnap = await getDoc(postRef);\r\n\r\n            if (postSnap.exists()) {\r\n                const data = postSnap.data();\r\n                const ratings = data.ratings || {};\r\n\r\n                // Update user's rating\r\n                ratings[currentUser.uid] = rating;\r\n\r\n                // Calculate new average\r\n                const ratingValues = Object.values(ratings);\r\n                const total = ratingValues.length;\r\n                const avg = ratingValues.reduce((a, b) => a + b, 0) / total;\r\n\r\n                await updateDoc(postRef, {\r\n                    ratings: ratings,\r\n                    averageRating: avg,\r\n                    totalVotes: total\r\n                });\r\n\r\n                setAverageRating(avg);\r\n                setTotalVotes(total);\r\n                trackLike(postId);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error updating rating:', error);\r\n            setUserRating(previousRating);\r\n        } finally {\r\n            // Re-enable after 500ms\r\n            setTimeout(() => setIsProcessing(false), 500);\r\n        }\r\n    };\r\n\r\n    const handleLegacyLike = async () => {\r\n        if (!currentUser) {\r\n            alert('Please log in to like posts');\r\n            return;\r\n        }\r\n\r\n        // ≡ƒöÆ DOUBLE-TAP PREVENTION\r\n        if (isProcessing) return;\r\n        setIsProcessing(true);\r\n\r\n        setAnimating(true);\r\n        setTimeout(() => setAnimating(false), 400);\r\n\r\n        const previousLiked = liked;\r\n        const previousCount = likeCount;\r\n\r\n        setLiked(!liked);\r\n        setLikeCount(prev => liked ? Math.max(0, prev - 1) : prev + 1);\r\n\r\n        try {\r\n            const postRef = doc(db, 'posts', postId);\r\n            const postSnap = await getDoc(postRef);\r\n\r\n            if (postSnap.exists()) {\r\n                const data = postSnap.data();\r\n                const likes = data.likes || [];\r\n\r\n                if (previousLiked) {\r\n                    const newLikes = likes.filter(uid => uid !== currentUser.uid);\r\n                    await updateDoc(postRef, {\r\n                        likes: newLikes,\r\n                        likeCount: newLikes.length\r\n                    });\r\n                } else {\r\n                    const newLikes = [...likes, currentUser.uid];\r\n                    await updateDoc(postRef, {\r\n                        likes: newLikes,\r\n                        likeCount: newLikes.length\r\n                    });\r\n                    trackLike(postId);\r\n                }\r\n            }\r\n        } catch (error) {\r\n            console.error('Error updating like:', error);\r\n            setLiked(previousLiked);\r\n            setLikeCount(previousCount);\r\n        } finally {\r\n            // Re-enable after 500ms\r\n            setTimeout(() => setIsProcessing(false), 500);\r\n        }\r\n    };\r\n\r\n    // Simple smiley mode (non-rated posts)\r\n    if (!enableRatings) {\r\n        return (\r\n            <button\r\n                onClick={handleLegacyLike}\r\n                disabled={isProcessing}\r\n                style={{\r\n                    background: 'transparent',\r\n                    border: 'none',\r\n                    padding: '0.5rem',\r\n                    // Γ£à APPLE 44PX TAP TARGET\r\n                    minWidth: '44px',\r\n                    minHeight: '44px',\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    gap: '0.5rem',\r\n                    cursor: isProcessing ? 'not-allowed' : 'pointer',\r\n                    transition: 'all 0.2s ease',\r\n                    transform: animating ? 'scale(1.2)' : 'scale(1)',\r\n                    color: '#fff',\r\n                    fontSize: '1rem',\r\n                    fontWeight: '500',\r\n                    filter: 'drop-shadow(0 1px 3px rgba(0, 0, 0, 0.8))',\r\n                    opacity: isProcessing ? 0.6 : 1\r\n                }}\r\n                onMouseEnter={(e) => !isProcessing && (e.currentTarget.style.transform = 'scale(1.1)')}\r\n                onMouseLeave={(e) => !isProcessing && (e.currentTarget.style.transform = 'scale(1)')}\r\n            >\r\n                {liked ? (\r\n                    <FaSmile size={24} style={{ color: '#7fffd4', filter: 'drop-shadow(0 0 6px rgba(127, 255, 212, 0.6))' }} />\r\n                ) : (\r\n                    <FaRegSmile size={24} style={{ color: 'rgba(127, 255, 212, 0.5)' }} />\r\n                )}\r\n                <span style={{ color: '#7FFFD4' }}>{likeCount > 0 ? likeCount : ''}</span>\r\n            </button>\r\n        );\r\n    }\r\n\r\n    // 5-Star rating mode (rated posts)\r\n    return (\r\n        <div style={{\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '0.6rem',\r\n            filter: 'drop-shadow(0 1px 3px rgba(0, 0, 0, 0.8))'\r\n        }}>\r\n            {/* Star Rating Input */}\r\n            <div\r\n                style={{\r\n                    display: 'flex',\r\n                    gap: '0.15rem'\r\n                }}\r\n                onMouseLeave={() => setHoveredStar(0)}\r\n            >\r\n                {[1, 2, 3, 4, 5].map((star) => {\r\n                    const isFilled = star <= (hoveredStar || userRating);\r\n\r\n                    return (\r\n                        <div\r\n                            key={star}\r\n                            onClick={() => handleStarClick(star)}\r\n                            onMouseEnter={() => setHoveredStar(star)}\r\n                            style={{\r\n                                cursor: isProcessing ? 'not-allowed' : 'pointer',\r\n                                transition: 'all 0.2s ease',\r\n                                transform: animating && star === userRating ? 'scale(1.3) rotate(15deg)' :\r\n                                    hoveredStar === star ? 'scale(1.15)' : 'scale(1)',\r\n                                filter: isFilled ? 'drop-shadow(0 0 4px rgba(127, 255, 212, 0.6))' : 'none',\r\n                                // Γ£à APPLE 44PX TAP TARGET\r\n                                minWidth: '44px',\r\n                                minHeight: '44px',\r\n                                display: 'flex',\r\n                                alignItems: 'center',\r\n                                justifyContent: 'center',\r\n                                // Negative margin to maintain visual spacing\r\n                                margin: '-14px -14px',\r\n                                opacity: isProcessing ? 0.6 : 1\r\n                            }}\r\n                        >\r\n                            {isFilled ? (\r\n                                <FaStar\r\n                                    size={16}\r\n                                    style={{\r\n                                        color: '#7FFFD4',\r\n                                        filter: 'brightness(1.2)'\r\n                                    }}\r\n                                />\r\n                            ) : (\r\n                                <FaRegStar\r\n                                    size={16}\r\n                                    style={{\r\n                                        color: 'rgba(127, 255, 212, 0.3)',\r\n                                        transition: 'color 0.2s'\r\n                                    }}\r\n                                />\r\n                            )}\r\n                        </div>\r\n                    );\r\n                })}\r\n            </div>\r\n\r\n            {/* Compact Rating Info */}\r\n            {totalVotes > 0 && (\r\n                <span style={{\r\n                    color: '#7FFFD4',\r\n                    fontSize: '0.75rem',\r\n                    fontWeight: '600',\r\n                    letterSpacing: '0.3px',\r\n                    opacity: 0.9\r\n                }}>\r\n                    {averageRating.toFixed(1)} ({totalVotes})\r\n                </span>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default React.memo(LikeButton);\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\MagazineSubmissionBox.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useRef } from 'react';\r\nimport { FaImage, FaTimes, FaCalendar, FaClock, FaUpload, FaCheck } from 'react-icons/fa';\r\nimport { ref, uploadBytes, getDownloadURL } from 'firebase/storage';\r\nimport { storage, db } from '@/firebase';\r\nimport { collection, addDoc, serverTimestamp } from 'firebase/firestore';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { getSubmissionLimit } from '@/core/constants/magazineConfig';\r\nimport { notifyNewSubmission } from '@/services/notificationService';\r\n\r\nconst MagazineSubmissionBox = ({ magazine, gallery, nextIssue }) => {\r\n    const { currentUser } = useAuth();\r\n    const fileInputRef = useRef(null);\r\n    const [images, setImages] = useState([]);\r\n    const [uploading, setUploading] = useState(false);\r\n    const [submitted, setSubmitted] = useState(false);\r\n\r\n    const memberCount = gallery?.members?.length || 0;\r\n    const submissionLimit = getSubmissionLimit(memberCount);\r\n    const submissionDeadline = nextIssue?.scheduledPublishDate?.toDate ? nextIssue.scheduledPublishDate.toDate() : null;\r\n\r\n    // Calculate deadline (1 day before publish date)\r\n    const imageDeadline = submissionDeadline ? new Date(submissionDeadline.getTime() - 24 * 60 * 60 * 1000) : null;\r\n    const now = new Date();\r\n    const isBeforeDeadline = imageDeadline ? now < imageDeadline : false;\r\n\r\n    const handleFileSelect = async (e) => {\r\n        const files = Array.from(e.target.files);\r\n        if (files.length === 0) return;\r\n\r\n        const remainingSlots = submissionLimit - images.length;\r\n        const filesToAdd = files.slice(0, remainingSlots);\r\n\r\n        const newImages = await Promise.all(\r\n            filesToAdd.map(async (file) => {\r\n                const preview = URL.createObjectURL(file);\r\n                return { file, preview, caption: '' };\r\n            })\r\n        );\r\n\r\n        setImages(prev => [...prev, ...newImages]);\r\n    };\r\n\r\n    const removeImage = (index) => {\r\n        setImages(prev => prev.filter((_, i) => i !== index));\r\n    };\r\n\r\n    const updateCaption = (index, caption) => {\r\n        setImages(prev => prev.map((img, i) => i === index ? { ...img, caption } : img));\r\n    };\r\n\r\n    const handleSubmit = async () => {\r\n        if (images.length === 0) {\r\n            alert('Please select at least one image to submit');\r\n            return;\r\n        }\r\n\r\n        if (!isBeforeDeadline) {\r\n            alert('Submission deadline has passed');\r\n            return;\r\n        }\r\n\r\n        try {\r\n            setUploading(true);\r\n\r\n            // Upload images\r\n            const uploadedImages = [];\r\n            for (let i = 0; i < images.length; i++) {\r\n                const image = images[i];\r\n                const fileName = `magazines/${magazine.id}/submissions/${currentUser.uid}/${Date.now()}_${i}_${image.file.name}`;\r\n                const storageRef = ref(storage, fileName);\r\n\r\n                await uploadBytes(storageRef, image.file);\r\n                const imageUrl = await getDownloadURL(storageRef);\r\n\r\n                uploadedImages.push({\r\n                    imageUrl,\r\n                    storagePath: fileName,\r\n                    caption: image.caption,\r\n                    submittedAt: serverTimestamp()\r\n                });\r\n            }\r\n\r\n            // Create submission document\r\n            const submissionData = {\r\n                magazineId: magazine.id,\r\n                issueId: nextIssue.id,\r\n                galleryId: gallery.id,\r\n                userId: currentUser.uid,\r\n                userName: currentUser.displayName || 'Anonymous',\r\n                images: uploadedImages,\r\n                status: 'pending',\r\n                reviewedAt: null,\r\n                submissionDeadline: imageDeadline,\r\n                submittedAt: serverTimestamp()\r\n            };\r\n\r\n            await addDoc(collection(db, 'magazineSubmissions'), submissionData);\r\n\r\n            // Notify magazine creator\r\n            await notifyNewSubmission(\r\n                magazine.ownerId,\r\n                magazine.title,\r\n                currentUser.displayName || 'Anonymous',\r\n                nextIssue.issueNumber\r\n            );\r\n\r\n            setSubmitted(true);\r\n            setImages([]);\r\n            alert('Submission successful! The magazine creator will review your photos.');\r\n        } catch (err) {\r\n            console.error('Error submitting images:', err);\r\n            alert(`Failed to submit: ${err.message}`);\r\n        } finally {\r\n            setUploading(false);\r\n        }\r\n    };\r\n\r\n    if (!magazine?.collaborationEnabled || !gallery || !nextIssue) {\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <div style={{\r\n            background: '#111',\r\n            border: '1px solid #333',\r\n            borderRadius: '12px',\r\n            padding: '1.5rem',\r\n            marginBottom: '2rem'\r\n        }}>\r\n            <div style={{ display: 'flex', alignItems: 'center', gap: '1rem', marginBottom: '1rem' }}>\r\n                <FaImage style={{ color: '#7FFFD4', fontSize: '1.5rem' }} />\r\n                <div>\r\n                    <h3 style={{ margin: 0, fontSize: '1.2rem', color: '#7FFFD4' }}>\r\n                        Magazine Submission: {magazine.title}\r\n                    </h3>\r\n                    <p style={{ margin: '0.25rem 0 0 0', color: '#888', fontSize: '0.9rem' }}>\r\n                        Issue #{nextIssue.issueNumber}\r\n                    </p>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Deadlines */}\r\n            <div style={{ display: 'flex', gap: '1rem', marginBottom: '1.5rem', flexWrap: 'wrap' }}>\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', background: '#000', padding: '0.5rem 1rem', borderRadius: '8px' }}>\r\n                    <FaCalendar style={{ color: '#7FFFD4' }} />\r\n                    <div>\r\n                        <div style={{ fontSize: '0.75rem', color: '#666' }}>Publish Date</div>\r\n                        <div style={{ fontSize: '0.9rem' }}>\r\n                            {submissionDeadline?.toLocaleDateString('en-US', { month: 'short', day: 'numeric' })}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div style={{\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    gap: '0.5rem',\r\n                    background: isBeforeDeadline ? 'rgba(127, 255, 212, 0.1)' : 'rgba(255, 68, 68, 0.1)',\r\n                    padding: '0.5rem 1rem',\r\n                    borderRadius: '8px',\r\n                    border: `1px solid ${isBeforeDeadline ? 'rgba(127, 255, 212, 0.3)' : 'rgba(255, 68, 68, 0.3)'}`\r\n                }}>\r\n                    <FaClock style={{ color: isBeforeDeadline ? '#7FFFD4' : '#ff4444' }} />\r\n                    <div>\r\n                        <div style={{ fontSize: '0.75rem', color: '#666' }}>Submission Deadline</div>\r\n                        <div style={{ fontSize: '0.9rem', color: isBeforeDeadline ? '#7FFFD4' : '#ff4444' }}>\r\n                            {imageDeadline?.toLocaleDateString('en-US', { month: 'short', day: 'numeric' })}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Submission Limit Info */}\r\n            <div style={{\r\n                background: 'rgba(127, 255, 212, 0.1)',\r\n                border: '1px solid rgba(127, 255, 212, 0.3)',\r\n                borderRadius: '8px',\r\n                padding: '0.75rem',\r\n                marginBottom: '1.5rem',\r\n                fontSize: '0.9rem',\r\n                color: '#7FFFD4'\r\n            }}>\r\n                You can submit up to <strong>{submissionLimit}</strong> photo{submissionLimit > 1 ? 's' : ''}\r\n                {' '}(Gallery size: {memberCount} members)\r\n            </div>\r\n\r\n            {submitted ? (\r\n                <div style={{\r\n                    textAlign: 'center',\r\n                    padding: '2rem',\r\n                    background: 'rgba(127, 255, 212, 0.1)',\r\n                    border: '1px solid rgba(127, 255, 212, 0.3)',\r\n                    borderRadius: '8px'\r\n                }}>\r\n                    <FaCheck style={{ fontSize: '3rem', color: '#7FFFD4', marginBottom: '1rem' }} />\r\n                    <h4 style={{ margin: '0 0 0.5rem 0', color: '#7FFFD4' }}>Submission Received!</h4>\r\n                    <p style={{ margin: 0, color: '#888' }}>\r\n                        The magazine creator will review your photos and select the final images for publication.\r\n                    </p>\r\n                </div>\r\n            ) : !isBeforeDeadline ? (\r\n                <div style={{\r\n                    textAlign: 'center',\r\n                    padding: '2rem',\r\n                    background: 'rgba(255, 68, 68, 0.1)',\r\n                    border: '1px solid rgba(255, 68, 68, 0.3)',\r\n                    borderRadius: '8px',\r\n                    color: '#ff4444'\r\n                }}>\r\n                    <FaClock style={{ fontSize: '3rem', marginBottom: '1rem', opacity: 0.5 }} />\r\n                    <h4 style={{ margin: '0 0 0.5rem 0' }}>Submission Deadline Passed</h4>\r\n                    <p style={{ margin: 0, color: '#888' }}>\r\n                        The deadline for this issue was {imageDeadline?.toLocaleDateString()}\r\n                    </p>\r\n                </div>\r\n            ) : (\r\n                <>\r\n                    {/* Image Upload Area */}\r\n                    {images.length === 0 ? (\r\n                        <div\r\n                            onClick={() => fileInputRef.current?.click()}\r\n                            style={{\r\n                                border: '2px dashed #333',\r\n                                borderRadius: '8px',\r\n                                padding: '2rem',\r\n                                textAlign: 'center',\r\n                                cursor: 'pointer',\r\n                                background: '#000',\r\n                                marginBottom: '1rem'\r\n                            }}\r\n                        >\r\n                            <FaUpload style={{ fontSize: '2rem', color: '#666', marginBottom: '1rem' }} />\r\n                            <div style={{ color: '#888' }}>\r\n                                <div style={{ fontWeight: 'bold', marginBottom: '0.5rem' }}>\r\n                                    Click to upload images\r\n                                </div>\r\n                                <div style={{ fontSize: '0.85rem' }}>\r\n                                    Up to {submissionLimit} image{submissionLimit > 1 ? 's' : ''}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    ) : (\r\n                        <div style={{ marginBottom: '1rem' }}>\r\n                            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(150px, 1fr))', gap: '1rem', marginBottom: '1rem' }}>\r\n                                {images.map((img, index) => (\r\n                                    <div key={index} style={{ position: 'relative' }}>\r\n                                        <div style={{\r\n                                            aspectRatio: '1',\r\n                                            background: `url(${img.preview})`,\r\n                                            backgroundSize: 'cover',\r\n                                            backgroundPosition: 'center',\r\n                                            borderRadius: '8px',\r\n                                            border: '1px solid #333'\r\n                                        }} />\r\n                                        <button\r\n                                            onClick={() => removeImage(index)}\r\n                                            style={{\r\n                                                position: 'absolute',\r\n                                                top: '4px',\r\n                                                right: '4px',\r\n                                                background: 'rgba(0,0,0,0.8)',\r\n                                                border: 'none',\r\n                                                borderRadius: '50%',\r\n                                                width: '28px',\r\n                                                height: '28px',\r\n                                                display: 'flex',\r\n                                                alignItems: 'center',\r\n                                                justifyContent: 'center',\r\n                                                cursor: 'pointer',\r\n                                                color: '#fff'\r\n                                            }}\r\n                                        >\r\n                                            <FaTimes />\r\n                                        </button>\r\n                                        <input\r\n                                            type=\"text\"\r\n                                            value={img.caption}\r\n                                            onChange={(e) => updateCaption(index, e.target.value)}\r\n                                            placeholder=\"Caption (optional)\"\r\n                                            style={{\r\n                                                width: '100%',\r\n                                                marginTop: '0.5rem',\r\n                                                padding: '0.5rem',\r\n                                                background: '#000',\r\n                                                border: '1px solid #333',\r\n                                                borderRadius: '4px',\r\n                                                color: '#fff',\r\n                                                fontSize: '0.85rem'\r\n                                            }}\r\n                                        />\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n\r\n                            {images.length < submissionLimit && (\r\n                                <button\r\n                                    onClick={() => fileInputRef.current?.click()}\r\n                                    style={{\r\n                                        width: '100%',\r\n                                        padding: '0.75rem',\r\n                                        background: '#000',\r\n                                        border: '1px dashed #333',\r\n                                        borderRadius: '8px',\r\n                                        color: '#7FFFD4',\r\n                                        cursor: 'pointer',\r\n                                        display: 'flex',\r\n                                        alignItems: 'center',\r\n                                        justifyContent: 'center',\r\n                                        gap: '0.5rem',\r\n                                        fontWeight: 'bold'\r\n                                    }}\r\n                                >\r\n                                    <FaUpload /> Add More ({submissionLimit - images.length} remaining)\r\n                                </button>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Submit Button */}\r\n                    {images.length > 0 && (\r\n                        <button\r\n                            onClick={handleSubmit}\r\n                            disabled={uploading}\r\n                            style={{\r\n                                width: '100%',\r\n                                padding: '1rem',\r\n                                background: uploading ? '#333' : '#7FFFD4',\r\n                                color: uploading ? '#666' : '#000',\r\n                                border: 'none',\r\n                                borderRadius: '8px',\r\n                                fontWeight: 'bold',\r\n                                fontSize: '1rem',\r\n                                cursor: uploading ? 'not-allowed' : 'pointer'\r\n                            }}\r\n                        >\r\n                            {uploading ? 'Submitting...' : 'Submit Photos'}\r\n                        </button>\r\n                    )}\r\n\r\n                    <input\r\n                        ref={fileInputRef}\r\n                        type=\"file\"\r\n                        accept=\"image/*\"\r\n                        multiple\r\n                        onChange={handleFileSelect}\r\n                        style={{ display: 'none' }}\r\n                    />\r\n                </>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default MagazineSubmissionBox;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\ManualExifForm.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaCalendarAlt' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":42},{"ruleId":"react/no-unknown-property","severity":2,"message":"Unknown property 'jsx' found","line":215,"column":14,"nodeType":"JSXAttribute","messageId":"unknownProp","endLine":215,"endColumn":17}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { FaCamera, FaTimes, FaCalendarAlt } from 'react-icons/fa';\r\nimport PanoDateInput from '@/components/common/PanoDateInput';\r\n\r\nimport { validateExifData } from '@/core/utils/exif';\r\n\r\n/**\r\n * Manual EXIF Input Form\r\n * Allows users to manually enter camera metadata when EXIF extraction fails\r\n */\r\nconst ManualExifForm = ({ existingExif, onSave, onCancel, hideCameraLens = false }) => {\r\n  const [formData, setFormData] = useState({\r\n    make: '',\r\n    model: '',\r\n    lensModel: '',\r\n    focalLength: '',\r\n    fNumber: '',\r\n    exposureTime: '',\r\n    iso: '',\r\n    dateTime: '',\r\n  });\r\n\r\n  // Helper to get local ISO string (YYYY-MM-DDTHH:mm) prevents timezone shifting\r\n  const toLocalISOString = (date) => {\r\n    const pad = (num) => num.toString().padStart(2, '0');\r\n    return `${date.getFullYear()}-${pad(date.getMonth() + 1)}-${pad(date.getDate())}T${pad(date.getHours())}:${pad(date.getMinutes())}`;\r\n  };\r\n\r\n  // Pre-fill with existing EXIF if available, or default to now for date\r\n  useEffect(() => {\r\n    // Default to current local time, not UTC\r\n    const defaultDate = toLocalISOString(new Date());\r\n\r\n    if (existingExif) {\r\n      setFormData({\r\n        make: existingExif.make || '',\r\n        model: existingExif.model || '',\r\n        lensModel: existingExif.lensModel || '',\r\n        focalLength: existingExif.focalLength || '',\r\n        fNumber: existingExif.fNumber || '',\r\n        exposureTime: existingExif.exposureTime || '',\r\n        iso: existingExif.iso || '',\r\n        dateTime: existingExif.dateTime || defaultDate,\r\n      });\r\n    } else {\r\n      // Initialize with default date if no existing data\r\n      setFormData(prev => ({ ...prev, dateTime: defaultDate }));\r\n    }\r\n  }, [existingExif]);\r\n\r\n  const handleChange = (field, value) => {\r\n    setFormData(prev => ({ ...prev, [field]: value }));\r\n  };\r\n\r\n  const handleSave = () => {\r\n    // Build EXIF object matching the extracted EXIF structure\r\n    const exifData = {};\r\n\r\n    if (formData.make) exifData.make = formData.make;\r\n    if (formData.model) exifData.model = formData.model;\r\n    if (formData.lensModel) exifData.lensModel = formData.lensModel;\r\n    if (formData.focalLength) exifData.focalLength = Number(formData.focalLength);\r\n    if (formData.fNumber) exifData.fNumber = Number(formData.fNumber);\r\n    if (formData.exposureTime) exifData.exposureTime = formData.exposureTime;\r\n    if (formData.iso) exifData.iso = Number(formData.iso);\r\n    if (formData.dateTime) exifData.dateTime = formData.dateTime;\r\n\r\n    onSave(exifData);\r\n  };\r\n\r\n\r\n\r\n  return (\r\n    <div className=\"manual-exif-form\">\r\n      <div className=\"exif-form-header\">\r\n        <div className=\"exif-form-title\">\r\n          <FaCamera style={{ marginRight: '0.5rem' }} />\r\n          <span>Manual Camera Data</span>\r\n        </div>\r\n        <button\r\n          onClick={onCancel}\r\n          className=\"exif-close-btn\"\r\n          aria-label=\"Close\"\r\n        >\r\n          <FaTimes />\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"exif-form-grid\">\r\n        {/* Camera Make & Model - Hidden if Film Mode */}\r\n        {!hideCameraLens && (\r\n          <>\r\n            <div className=\"exif-form-field\">\r\n              <label>Camera Make</label>\r\n              <input\r\n                type=\"text\"\r\n                value={formData.make}\r\n                onChange={(e) => handleChange('make', e.target.value)}\r\n                placeholder=\"e.g., Canon, Nikon, Sony\"\r\n                className=\"exif-input\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"exif-form-field\">\r\n              <label>Camera Model</label>\r\n              <input\r\n                type=\"text\"\r\n                value={formData.model}\r\n                onChange={(e) => handleChange('model', e.target.value)}\r\n                placeholder=\"e.g., EOS R5, Z9, A7R IV\"\r\n                className=\"exif-input\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"exif-form-field full-width\">\r\n              <label>Lens Model</label>\r\n              <input\r\n                type=\"text\"\r\n                value={formData.lensModel}\r\n                onChange={(e) => handleChange('lensModel', e.target.value)}\r\n                placeholder=\"e.g., RF 24-70mm f/2.8L\"\r\n                className=\"exif-input\"\r\n              />\r\n            </div>\r\n          </>\r\n        )}\r\n\r\n        {/* Focal Length */}\r\n        <div className=\"exif-form-field\">\r\n          <label>Focal Length (mm)</label>\r\n          <input\r\n            type=\"number\"\r\n            value={formData.focalLength}\r\n            onChange={(e) => handleChange('focalLength', e.target.value)}\r\n            placeholder=\"e.g., 50\"\r\n            className=\"exif-input\"\r\n            min=\"1\"\r\n            max=\"2000\"\r\n            step=\"1\"\r\n          />\r\n        </div>\r\n\r\n        {/* Aperture */}\r\n        <div className=\"exif-form-field\">\r\n          <label>Aperture (f-stop)</label>\r\n          <input\r\n            type=\"number\"\r\n            value={formData.fNumber}\r\n            onChange={(e) => handleChange('fNumber', e.target.value)}\r\n            placeholder=\"e.g., 2.8\"\r\n            className=\"exif-input\"\r\n            step=\"0.1\"\r\n            min=\"0.7\"\r\n            max=\"64\"\r\n          />\r\n        </div>\r\n\r\n        {/* Shutter Speed */}\r\n        <div className=\"exif-form-field\">\r\n          <label>Shutter Speed</label>\r\n          <input\r\n            type=\"text\"\r\n            value={formData.exposureTime}\r\n            onChange={(e) => handleChange('exposureTime', e.target.value)}\r\n            placeholder=\"e.g., 1/250 or 2s\"\r\n            className=\"exif-input\"\r\n          />\r\n        </div>\r\n\r\n        {/* ISO */}\r\n        <div className=\"exif-form-field\">\r\n          <label>ISO</label>\r\n          <input\r\n            type=\"number\"\r\n            value={formData.iso}\r\n            onChange={(e) => handleChange('iso', e.target.value)}\r\n            placeholder=\"e.g., 100, 400, 3200\"\r\n            className=\"exif-input\"\r\n            min=\"50\"\r\n            max=\"409600\"\r\n            step=\"50\"\r\n          />\r\n        </div>\r\n\r\n        {/* Shot Date */}\r\n        <div className=\"exif-form-field full-width custom-datepicker-wrapper\">\r\n          <label>Shot Date</label>\r\n          <PanoDateInput\r\n            selected={formData.dateTime ? new Date(formData.dateTime) : new Date()}\r\n            onChange={(date) => handleChange('dateTime', date ? toLocalISOString(date) : '')}\r\n            showTimeSelect\r\n            placeholder=\"Select date & time\"\r\n            popperPlacement=\"top-end\"\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"exif-form-actions\">\r\n        <button\r\n          onClick={onCancel}\r\n          className=\"exif-btn-secondary\"\r\n        >\r\n          Cancel\r\n        </button>\r\n        <button\r\n          onClick={handleSave}\r\n          className=\"exif-btn-primary\"\r\n          disabled={!validateExifData(formData)}\r\n        >\r\n          Save Camera Data\r\n        </button>\r\n      </div>\r\n\r\n      {/* Scoped styles for layout */}\r\n      <style jsx>{`\r\n        .manual-exif-form {\r\n          background: var(--graphite);\r\n          border: 1px solid rgba(255, 255, 255, 0.1);\r\n          border-radius: 12px;\r\n          padding: 1.5rem;\r\n          margin-top: 1rem;\r\n        }\r\n\r\n        .exif-form-header {\r\n          display: flex;\r\n          justify-content: space-between;\r\n          align-items: center;\r\n          margin-bottom: 1.5rem;\r\n          padding-bottom: 1rem;\r\n          border-bottom: 1px solid rgba(255, 255, 255, 0.1);\r\n        }\r\n\r\n        .exif-form-title {\r\n          display: flex;\r\n          align-items: center;\r\n          font-size: 1rem;\r\n          font-weight: 600;\r\n          color: var(--ice-mint);\r\n        }\r\n\r\n        .exif-close-btn {\r\n          background: transparent;\r\n          border: none;\r\n          color: var(--slate);\r\n          cursor: pointer;\r\n          padding: 0.5rem;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          transition: color 0.2s;\r\n        }\r\n\r\n        .exif-close-btn:hover {\r\n          color: #fff;\r\n        }\r\n\r\n        .exif-form-grid {\r\n          display: grid;\r\n          grid-template-columns: 1fr 1fr;\r\n          gap: 1rem;\r\n          margin-bottom: 1.5rem;\r\n        }\r\n\r\n        .exif-form-field {\r\n          display: flex;\r\n          flex-direction: column;\r\n          gap: 0.5rem;\r\n        }\r\n\r\n        .exif-form-field.full-width {\r\n          grid-column: 1 / -1;\r\n        }\r\n\r\n        .exif-form-field label {\r\n          font-size: 0.85rem;\r\n          color: var(--slate);\r\n          font-weight: 500;\r\n        }\r\n\r\n        .exif-input {\r\n          background: rgba(0, 0, 0, 0.3);\r\n          border: 1px solid rgba(255, 255, 255, 0.1);\r\n          border-radius: 8px;\r\n          padding: 0.75rem;\r\n          color: #fff;\r\n          font-size: 0.9rem;\r\n          transition: border-color 0.2s, background 0.2s;\r\n          width: 100%;\r\n        }\r\n\r\n        .exif-input:focus {\r\n          outline: none;\r\n          border-color: var(--ice-mint);\r\n          background: rgba(0, 0, 0, 0.5);\r\n        }\r\n\r\n        .exif-input::placeholder {\r\n          color: rgba(255, 255, 255, 0.3);\r\n        }\r\n\r\n        .exif-form-actions {\r\n          display: flex;\r\n          justify-content: flex-end;\r\n          gap: 1rem;\r\n        }\r\n\r\n        .exif-btn-secondary,\r\n        .exif-btn-primary {\r\n          padding: 0.75rem 1.5rem;\r\n          border-radius: 8px;\r\n          font-size: 0.9rem;\r\n          font-weight: 600;\r\n          cursor: pointer;\r\n          transition: all 0.2s;\r\n          border: none;\r\n        }\r\n\r\n        .exif-btn-secondary {\r\n          background: transparent;\r\n          border: 1px solid rgba(255, 255, 255, 0.2);\r\n        .exif-btn-secondary:hover {\r\n          background: rgba(255, 255, 255, 0.05);\r\n          color: #fff;\r\n        }\r\n\r\n        .exif-btn-primary {\r\n          background: var(--ice-mint);\r\n          color: var(--black);\r\n        }\r\n\r\n        .exif-btn-primary:hover:not(:disabled) {\r\n          background: #7fffd4;\r\n          box-shadow: 0 0 20px rgba(127, 255, 212, 0.3);\r\n        }\r\n\r\n        .exif-btn-primary:disabled {\r\n          opacity: 0.5;\r\n          cursor: not-allowed;\r\n        }\r\n\r\n        @media (max-width: 768px) {\r\n          .exif-form-grid {\r\n            grid-template-columns: 1fr;\r\n          }\r\n\r\n          .exif-form-field.full-width {\r\n            grid-column: 1;\r\n          }\r\n        }\r\n      `}</style>\r\n\r\n      {/* GLOBAL OVERRIDES FOR REACT-DATEPICKER POPAL */}\r\n      <style>{`\r\n         /* Force Input Text Color to Green */\r\n         .custom-datepicker-wrapper input.exif-input {\r\n             color: #7FFFD4 !important;\r\n             font-family: 'Rajdhani', sans-serif !important;\r\n             font-weight: 600 !important;\r\n             letter-spacing: 0.5px !important; /* Tighter letter spacing */\r\n             text-transform: uppercase !important;\r\n             font-size: 0.85rem !important; /* Smaller font to fit date string */\r\n             padding-right: 30px !important; /* Make room for icon */\r\n             white-space: nowrap !important;\r\n             overflow: hidden !important;\r\n             text-overflow: ellipsis !important;\r\n         }\r\n\r\n         /* Main Container */\r\n         .react-datepicker {\r\n            font-family: 'Rajdhani', sans-serif !important;\r\n            background-color: #0f0f0f !important;\r\n            border: 1px solid rgba(127, 255, 212, 0.3) !important;\r\n            border-radius: 12px !important;\r\n            color: #fff !important;\r\n            box-shadow: 0 20px 60px rgba(0,0,0,0.95) !important;\r\n            font-size: 0.9rem !important;\r\n            display: flex !important;\r\n            overflow: hidden !important; /* Clip corners */\r\n         }\r\n         \r\n         /* Remove default triangle/arrow pointer */\r\n         .react-datepicker__triangle {\r\n             display: none !important;\r\n         }\r\n\r\n         /* Header Section (Month/Year) */\r\n         .react-datepicker__header {\r\n            background-color: #161616 !important;\r\n            border-bottom: 1px solid rgba(255,255,255,0.08) !important;\r\n            padding: 12px 0 8px 0 !important;\r\n            position: relative !important;\r\n            width: 280px !important;\r\n         }\r\n         \r\n         /* Time Header Section */\r\n         .react-datepicker__header--time {\r\n             padding-top: 11px !important; /* Text down 1px more */\r\n             padding-bottom: 4px !important; /* Box border UP (reduced padding) */\r\n             padding-left: 0 !important;\r\n             padding-right: 15px !important;\r\n             width: 80px !important;\r\n         }\r\n\r\n         /* Navigation Arrows */\r\n         .react-datepicker__navigation {\r\n             top: 13px !important; /* Vertically align with text */\r\n             height: 24px !important; /* Increase hit area */\r\n             width: 24px !important;\r\n             overflow: visible !important;\r\n         }\r\n         .react-datepicker__navigation--previous { left: 10px !important; }\r\n         .react-datepicker__navigation--next { right: 10px !important; }\r\n         \r\n         .react-datepicker__navigation-icon::before {\r\n             border-color: #7FFFD4 !important;\r\n             border-width: 2px 2px 0 0 !important;\r\n             height: 8px !important;\r\n             width: 8px !important;\r\n             top: 6px !important; /* Center inside button */\r\n             left: 6px !important;\r\n         }\r\n\r\n         /* Header Text */\r\n         .react-datepicker__current-month, \r\n         .react-datepicker-time__header {\r\n            color: #7FFFD4 !important;\r\n            font-family: 'Orbitron', sans-serif !important;\r\n            text-transform: uppercase !important;\r\n            letter-spacing: 2px !important;\r\n            font-size: 0.95rem !important;\r\n            margin: 0 !important;\r\n            line-height: 24px !important; /* Match arrow height */\r\n            display: inline-block !important; /* Ensure line-height works */\r\n         }\r\n\r\n         /* Day Grid Container */\r\n         .react-datepicker__month-container {\r\n            width: 280px !important;\r\n            background: #0f0f0f !important;\r\n         }\r\n         \r\n         .react-datepicker__month {\r\n             margin: 5px 10px 10px 10px !important; /* Tighter margins */\r\n         }\r\n\r\n         /* Day Names Row */\r\n         .react-datepicker__day-names {\r\n             margin-top: 5px !important;\r\n         }\r\n         .react-datepicker__day-name {\r\n            color: rgba(255,255,255,0.4) !important;\r\n            width: 2rem !important;\r\n            line-height: 2rem !important;\r\n            margin: 0.15rem !important;\r\n            font-size: 0.8rem !important;\r\n         }\r\n         \r\n         /* Individual Days */\r\n         .react-datepicker__day {\r\n            color: #fff !important; /* FORCE WHITE TEXT */\r\n            border-radius: 50% !important;\r\n            transition: all 0.2s !important;\r\n            width: 2rem !important;\r\n            line-height: 2rem !important;\r\n            margin: 0.15rem !important;\r\n            font-size: 0.9rem !important;\r\n            background-color: transparent !important;\r\n         }\r\n         \r\n         /* Selected Day & Today */\r\n         .react-datepicker__day:hover {\r\n            background-color: rgba(127, 255, 212, 0.15) !important;\r\n            color: #7FFFD4 !important;\r\n         }\r\n         \r\n         .react-datepicker__day--selected, \r\n         .react-datepicker__day--keyboard-selected {\r\n            background-color: #7FFFD4 !important;\r\n            color: #000 !important; /* Black text on selected */\r\n            font-weight: 700 !important;\r\n            box-shadow: 0 0 15px rgba(127,255,212,0.4) !important; \r\n         }\r\n         \r\n         /* Fix for blue default selection or today */\r\n         .react-datepicker__day--today {\r\n             border: 1px solid rgba(127, 255, 212, 0.5) !important;\r\n             color: #7FFFD4 !important;\r\n         }\r\n         .react-datepicker__day--selected.react-datepicker__day--today {\r\n             background-color: #7FFFD4 !important;\r\n             color: #000 !important;\r\n         }\r\n\r\n         .react-datepicker__day--outside-month {\r\n             color: rgba(255,255,255,0.1) !important;\r\n         }\r\n\r\n         /* Time Container */\r\n         .react-datepicker__time-container {\r\n            border-left: 1px solid rgba(255,255,255,0.08) !important;\r\n            background-color: #0f0f0f !important;\r\n            width: 80px !important;\r\n         }\r\n         \r\n         .react-datepicker__time-box {\r\n             border-radius: 0 !important;\r\n             width: 100% !important;\r\n             margin: 0 !important;\r\n         }\r\n         \r\n         /* Scrollbar Styling for Time List */\r\n         .react-datepicker__time-list {\r\n             background-color: #0f0f0f !important;\r\n             height: 230px !important; /* Reduce height to remove bottom space */\r\n             padding: 0 !important;\r\n         }\r\n         .react-datepicker__time-list::-webkit-scrollbar {\r\n             width: 4px;\r\n             background: #0f0f0f;\r\n         }\r\n         .react-datepicker__time-list::-webkit-scrollbar-thumb {\r\n             background: #333;\r\n             border-radius: 2px;\r\n         }\r\n\r\n         .react-datepicker__time-list-item {\r\n            color: #ccc !important;\r\n            height: 36px !important;\r\n            padding: 0 !important;\r\n            display: flex !important;\r\n            align-items: center !important;\r\n            justify-content: center !important;\r\n            font-size: 0.85rem !important;\r\n            transition: all 0.1s ease;\r\n         }\r\n         \r\n         .react-datepicker__time-list-item:hover {\r\n            background-color: rgba(127, 255, 212, 0.1) !important;\r\n            color: #fff !important;\r\n         }\r\n         \r\n         .react-datepicker__time-list-item--selected {\r\n            background-color: rgba(127, 255, 212, 0.2) !important;\r\n            color: #7FFFD4 !important;\r\n            font-weight: 700 !important;\r\n            border-left: 2px solid #7FFFD4 !important;\r\n         }\r\n      `}</style>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ManualExifForm;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\MobileNavigation.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaUserCircle' is defined but never used. Allowed unused vars must match /^_/u.","line":20,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaEdit' is defined but never used. Allowed unused vars must match /^_/u.","line":23,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaFire' is defined but never used. Allowed unused vars must match /^_/u.","line":26,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":26,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'lastActivity' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":33,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":33,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'toggleCustomFeed' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":51,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":51,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'activeCustomFeedName' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":53,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":53,"endColumn":29},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setTheme' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":55,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":55,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'inactivityTimerRef' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":62,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":62,"endColumn":29},{"ruleId":"no-undef","severity":1,"message":"'setActiveCustomFeed' is not defined.","line":200,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":200,"endColumn":28},{"ruleId":"no-undef","severity":1,"message":"'setCustomFeedEnabled' is not defined.","line":201,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":201,"endColumn":29},{"ruleId":"no-undef","severity":1,"message":"'setCustomFeedEnabled' is not defined.","line":207,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":207,"endColumn":29},{"ruleId":"no-undef","severity":1,"message":"'setActiveCustomFeed' is not defined.","line":208,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":208,"endColumn":28},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'switchStyle' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":270,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":270,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'toggleOptionStyle' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":287,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":287,"endColumn":28}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":15,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef } from 'react';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { useUI } from '@/context/UIContext';\r\nimport { useBlock } from '@/hooks/useBlock';\r\nimport { doc, deleteDoc } from 'firebase/firestore';\r\nimport { db } from '@/firebase';\r\nimport ContextOptionsSection from './ContextOptionsSection';\r\nimport ReportModal from './ReportModal';\r\n\r\nimport { useFeedStore } from '@/core/store/useFeedStore';\r\nimport { useCustomFeeds } from '@/hooks/useCustomFeeds';\r\nimport { useThemeStore } from '@/core/store/useThemeStore';\r\nimport { useTranslation } from 'react-i18next';\r\nimport {\r\n    FaHome,\r\n    FaSearch,\r\n    FaPlusSquare,\r\n    FaCalendarAlt,\r\n    FaUserCircle,\r\n    FaStore,\r\n    FaCog,\r\n    FaEdit,\r\n    FaFilter,\r\n    FaPlus,\r\n    FaFire,\r\n    FaTrophy\r\n} from 'react-icons/fa';\r\n\r\n// Mobile Navigation / Hamburger Menu\r\nconst MobileNavigation = () => {\r\n    const [isOpen, setIsOpen] = useState(false);\r\n    const [lastActivity, setLastActivity] = useState(Date.now());\r\n    const [showReportModal, setShowReportModal] = useState(false);\r\n    const [reportConfig, setReportConfig] = useState({ type: 'post', id: null, title: '' });\r\n\r\n    const navigate = useNavigate();\r\n    const location = useLocation();\r\n    const { currentUser } = useAuth();\r\n    const { activePost } = useUI();\r\n    const { blockUser } = useBlock();\r\n    const { t } = useTranslation();\r\n\r\n    // Store hooks\r\n    const {\r\n        currentFeed,\r\n        toggleFeed,\r\n        followingOnly,\r\n        toggleFollowingOnly,\r\n        customFeedEnabled,\r\n        toggleCustomFeed,\r\n        activeCustomFeedId,\r\n        activeCustomFeedName\r\n    } = useFeedStore();\r\n    const { setTheme, accentColor } = useThemeStore();\r\n\r\n\r\n\r\n    const [showCustomSelector, setShowCustomSelector] = useState(false);\r\n    const [showHubPanel, setShowHubPanel] = useState(false); // New Hub Panel\r\n    const { feeds } = useCustomFeeds();\r\n    const inactivityTimerRef = useRef(null);\r\n\r\n    // Auto-collapse logic REMOVED as per user request\r\n    /*\r\n    useEffect(() => {\r\n        const checkInactivity = () => {\r\n            // Close selector if inactive too\r\n            if ((isOpen || showCustomSelector) && Date.now() - lastActivity > 10000) {\r\n                setIsOpen(false);\r\n                setShowCustomSelector(false);\r\n            }\r\n        };\r\n        inactivityTimerRef.current = setInterval(checkInactivity, 1000);\r\n        return () => clearInterval(inactivityTimerRef.current);\r\n    }, [lastActivity, isOpen, showCustomSelector]);\r\n    */\r\n\r\n    // Close selector when clicking outside\r\n    // Close selector when clicking outside\r\n    useEffect(() => {\r\n        if (!isOpen) {\r\n            setShowCustomSelector(false);\r\n            setShowHubPanel(false);\r\n        }\r\n    }, [isOpen]);\r\n\r\n    // Determine Context\r\n    let resolvedContext = null;\r\n    let resolvedPostOwnerId = null;\r\n    let resolvedProfileUserId = null;\r\n\r\n    if (activePost) {\r\n        resolvedContext = 'post';\r\n        resolvedPostOwnerId = activePost.authorId;\r\n    } else if (location.pathname.startsWith('/post/')) {\r\n        resolvedContext = 'post';\r\n        if (activePost) resolvedPostOwnerId = activePost.authorId;\r\n    } else if (location.pathname.startsWith('/profile/')) {\r\n        resolvedContext = 'profile';\r\n        const parts = location.pathname.split('/');\r\n        const idParam = parts[2];\r\n        resolvedProfileUserId = (idParam === 'me' || !idParam) ? currentUser?.uid : idParam;\r\n    }\r\n\r\n    // Handlers\r\n    const handleEditPost = () => {\r\n        if (!activePost) return;\r\n        setIsOpen(false);\r\n        navigate(`/edit-post/${activePost.id}`);\r\n    };\r\n\r\n    const handleDeletePost = async () => {\r\n        if (!activePost) return;\r\n        if (window.confirm(\"Are you sure you want to delete this post?\")) {\r\n            try {\r\n                await deleteDoc(doc(db, 'posts', activePost.id));\r\n                setIsOpen(false);\r\n                navigate('/');\r\n            } catch (error) {\r\n                console.error(\"Error deleting post:\", error);\r\n                alert(\"Failed to delete post.\");\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleReportPost = () => {\r\n        if (!activePost) return;\r\n        setReportConfig({ type: 'post', id: activePost.id, title: activePost.title || 'Post' });\r\n        setShowReportModal(true);\r\n    };\r\n\r\n    const handleReportProfile = () => {\r\n        if (!resolvedProfileUserId) return;\r\n        setReportConfig({ type: 'user', id: resolvedProfileUserId, title: 'Profile' });\r\n        setShowReportModal(true);\r\n    };\r\n\r\n    const handleBlockUser = async () => {\r\n        if (resolvedContext === 'post' && activePost) {\r\n            // Check if already blocked handled by hook, but explicit confirmation desired\r\n            if (window.confirm(`Block ${activePost.authorName || 'user'}?`)) {\r\n                await blockUser(activePost.authorId);\r\n                setIsOpen(false);\r\n                navigate('/');\r\n            }\r\n        } else if (resolvedContext === 'profile' && resolvedProfileUserId) {\r\n            if (window.confirm(`Block this user?`)) {\r\n                await blockUser(resolvedProfileUserId);\r\n                setIsOpen(false);\r\n                navigate('/');\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleCopyLink = () => {\r\n        const url = window.location.href;\r\n        navigator.clipboard.writeText(url);\r\n        setIsOpen(false);\r\n        alert(\"Link copied to clipboard\");\r\n    };\r\n\r\n    const handleShareProfile = () => {\r\n        const url = window.location.href;\r\n        if (navigator.share) {\r\n            navigator.share({\r\n                title: 'Panospace Profile',\r\n                url: url\r\n            }).catch(console.error);\r\n        } else {\r\n            handleCopyLink();\r\n        }\r\n    };\r\n\r\n    const handleInteraction = () => {\r\n        setLastActivity(Date.now());\r\n    };\r\n\r\n    const handleNavClick = (path) => {\r\n        navigate(path);\r\n        setIsOpen(false);\r\n        handleInteraction();\r\n    };\r\n\r\n    const toggleHubPanel = () => {\r\n        // Toggle Hub, ensure Custom Feeds is closed\r\n        if (!showHubPanel) setShowCustomSelector(false);\r\n        setShowHubPanel(!showHubPanel);\r\n        handleInteraction();\r\n    };\r\n\r\n    const toggleCustomFeedsPanel = () => {\r\n        // Toggle Custom Feeds, ensure Hub is closed\r\n        if (!showCustomSelector) setShowHubPanel(false);\r\n        setShowCustomSelector(!showCustomSelector);\r\n        handleInteraction();\r\n    };\r\n\r\n    const handleCustomFeedSelect = (feedId, feedName) => {\r\n        setActiveCustomFeed(feedId, feedName);\r\n        setCustomFeedEnabled(true);\r\n        setShowCustomSelector(false);\r\n        setIsOpen(false);\r\n    };\r\n\r\n    const handleDisableCustomFeed = () => {\r\n        setCustomFeedEnabled(false);\r\n        setActiveCustomFeed(null, null);\r\n        setShowCustomSelector(false);\r\n        setIsOpen(false);\r\n    };\r\n\r\n    // Close both when opening one? Logic handled in toggles.\r\n\r\n    // Styling\r\n    const menuButtonStyle = {\r\n        position: 'fixed',\r\n        top: 'max(0.75rem, env(safe-area-inset-top))',\r\n        right: '1rem',\r\n        zIndex: 10000,\r\n        cursor: 'pointer',\r\n        transition: 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)',\r\n        transform: isOpen ? 'rotate(90deg)' : 'rotate(0deg)',\r\n        // ... (rest of style inferred to be unchanged if I only replace handlers, but I'm replacing a large block. I must ensure I don't lose the button style definition)\r\n        color: accentColor,\r\n        background: 'transparent',\r\n        width: '44px',\r\n        height: '44px',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        border: 'none',\r\n        outline: 'none',\r\n        filter: `drop-shadow(0 0 6px ${accentColor}80)`\r\n    };\r\n\r\n    const drawerStyle = {\r\n        position: 'fixed',\r\n        top: 0,\r\n        right: isOpen ? 0 : '-320px',\r\n        width: '300px',\r\n        maxWidth: '80vw',\r\n        height: '100vh',\r\n        background: 'rgba(10, 10, 10, 0.95)',\r\n        backdropFilter: 'blur(20px)',\r\n        borderLeft: '1px solid rgba(255, 255, 255, 0.1)',\r\n        boxShadow: '-10px 0 30px rgba(0,0,0,0.8)',\r\n        transition: 'right 0.3s cubic-bezier(0.4, 0, 0.2, 1)',\r\n        zIndex: 9999,\r\n        paddingTop: '80px', // Space for button\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n    };\r\n\r\n    const navItemStyle = {\r\n        padding: '1.2rem 2rem',\r\n        color: '#fff',\r\n        fontSize: '1.1rem',\r\n        fontFamily: 'var(--font-family-heading, sans-serif)',\r\n        letterSpacing: '0.05em',\r\n        textTransform: 'uppercase',\r\n        borderBottom: '1px solid rgba(255,255,255,0.05)',\r\n        cursor: 'pointer',\r\n        transition: 'background 0.2s, color 0.2s',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        gap: '1rem' // Space for icon\r\n    };\r\n\r\n    const switchStyle = {\r\n        position: 'fixed',\r\n        top: 'max(0.75rem, env(safe-area-inset-top))',\r\n        right: '4.5rem',\r\n        zIndex: 10001,\r\n        display: isOpen ? 'flex' : 'none',\r\n        alignItems: 'center',\r\n        background: 'rgba(0,0,0,0.6)',\r\n        backdropFilter: 'blur(10px)',\r\n        borderRadius: '22px',\r\n        padding: '4px',\r\n        border: '1px solid rgba(255,255,255,0.1)',\r\n        height: '44px',\r\n        cursor: 'pointer',\r\n        overflow: 'hidden'\r\n    };\r\n\r\n    const toggleOptionStyle = (isActive, activeColor) => ({\r\n        padding: '0 1rem',\r\n        height: '100%',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        borderRadius: '18px',\r\n        fontSize: '0.85rem',\r\n        fontWeight: '700',\r\n        color: isActive ? '#000' : 'rgba(255,255,255,0.6)',\r\n        background: isActive ? activeColor : 'transparent',\r\n        transition: 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)',\r\n        textTransform: 'uppercase',\r\n        letterSpacing: '0.05em',\r\n        minWidth: '60px'\r\n    });\r\n\r\n    return (\r\n        <>\r\n\r\n\r\n            {/* Hamburger Button */}\r\n            <div\r\n                style={menuButtonStyle}\r\n                onClick={() => { setIsOpen(!isOpen); handleInteraction(); }}\r\n            >\r\n                {isOpen ? (\r\n                    <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\r\n                        <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line>\r\n                        <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line>\r\n                    </svg>\r\n                ) : (\r\n                    <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\r\n                        <line x1=\"3\" y1=\"12\" x2=\"21\" y2=\"12\"></line>\r\n                        <line x1=\"3\" y1=\"6\" x2=\"21\" y2=\"6\"></line>\r\n                        <line x1=\"3\" y1=\"18\" x2=\"21\" y2=\"18\"></line>\r\n                    </svg>\r\n                )}\r\n            </div>\r\n\r\n            {/* Menu Drawer */}\r\n            <div style={drawerStyle} onClick={(e) => e.stopPropagation()}>\r\n\r\n                {/* Left Pane - Sub Options (Feed / Context) */}\r\n                <div style={{\r\n                    width: '60px', // Narrow strip for sub-menu triggers or indicators could go here, \r\n                    // BUT user asked for \"sub box to the left of the first box\".\r\n                    // Let's interpret: \r\n                    // The \"Main Box\" is the navigation list (Right side usually? Or are we splitting the drawer?)\r\n                    // Actually, distinct \"Boxes\" implies a visual separation. \r\n                    // Let's try a layout where a \"Sub Menu\" slides out or sits to the left of the main menu items.\r\n\r\n                    // RE-READING: \"pull up a second menu box, sub box, to the left of the first box\"\r\n                    // Currently the drawer is on the RIGHT. \r\n                    // So \"Left of the first box\" means closer to the center of the screen? Or is the \"First Box\" the main nav?\r\n\r\n                    // Interpretation: When \"Feed Options\" is clicked, instead of a dropdown *inside* the drawer or over it, \r\n                    // A WHOLE NEW PANEL appears to the left of the main drawer.\r\n                    // Let's implement this \"Sidecar\" panel.\r\n                }}>\r\n                </div>\r\n\r\n                {/* We need to render the \"Sidecar\" panel outside of the main drawer div but conditional on state */}\r\n            </div>\r\n\r\n            {/* Sidecar Panel for Feed Options */}\r\n            <div style={{\r\n                position: 'fixed',\r\n                top: 0,\r\n                right: (isOpen && showCustomSelector) ? '300px' : '-320px', // Slides out to the left of the main drawer (which is 300px wide)\r\n                width: '260px',\r\n                height: '100vh',\r\n                background: '#111111', // Solid background color\r\n                // backdropFilter: 'none', // Explicitly remove backdrop filter\r\n                borderLeft: '1px solid rgba(255, 255, 255, 0.1)',\r\n                boxShadow: '-10px 0 30px rgba(0,0,0,0.5)',\r\n                transition: 'right 0.3s cubic-bezier(0.4, 0, 0.2, 1)',\r\n                zIndex: 9999, // Raised to match drawer and sit above backdrop\r\n                paddingTop: '80px',\r\n                display: 'flex',\r\n                flexDirection: 'column',\r\n                pointerEvents: isOpen ? 'auto' : 'none'\r\n            }} onClick={(e) => e.stopPropagation()}>\r\n\r\n                <div style={{ padding: '1rem', borderBottom: '1px solid rgba(255,255,255,0.05)', marginBottom: '0.5rem' }}>\r\n                    <h3 style={{ margin: 0, fontSize: '0.9rem', color: accentColor, letterSpacing: '0.05em' }}>CUSTOM FEEDS</h3>\r\n                </div>\r\n\r\n                {/* App-Curated Feeds Section REMOVED from Custom Panel - Moved to Hub */}\r\n\r\n                <div style={{ fontSize: '0.7rem', color: '#888', padding: '1rem 1rem 0.5rem 1rem' }}>SAVED FEEDS</div>\r\n\r\n                {/* Feeds List */}\r\n                <div style={{\r\n                    flex: 1,\r\n                    overflowY: 'auto',\r\n                    display: 'flex',\r\n                    flexDirection: 'column',\r\n                    gap: '0.2rem',\r\n                    padding: '0 1rem'\r\n                }}>\r\n                    {/* Default / Disable Option */}\r\n                    <button\r\n                        onClick={handleDisableCustomFeed}\r\n                        style={{\r\n                            padding: '0.8rem',\r\n                            borderRadius: '8px',\r\n                            border: 'none',\r\n                            background: !customFeedEnabled ? 'rgba(255,255,255,0.1)' : 'transparent',\r\n                            color: !customFeedEnabled ? '#fff' : 'rgba(255,255,255,0.6)',\r\n                            textAlign: 'left',\r\n                            fontSize: '0.9rem',\r\n                            cursor: 'pointer',\r\n                            transition: 'all 0.2s',\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            justifyContent: 'space-between'\r\n                        }}\r\n                    >\r\n                        <span>Standard Feed</span>\r\n                        {!customFeedEnabled && <div style={{ width: 8, height: 8, borderRadius: '50%', background: accentColor }} />}\r\n                    </button>\r\n\r\n                    {feeds.map(feed => (\r\n                        <button\r\n                            key={feed.id}\r\n                            onClick={() => handleCustomFeedSelect(feed.id, feed.name)}\r\n                            style={{\r\n                                padding: '0.8rem',\r\n                                borderRadius: '8px',\r\n                                border: 'none',\r\n                                background: (customFeedEnabled && activeCustomFeedId === feed.id) ? accentColor : 'transparent',\r\n                                color: (customFeedEnabled && activeCustomFeedId === feed.id) ? '#000' : '#fff',\r\n                                textAlign: 'left',\r\n                                fontSize: '0.9rem',\r\n                                cursor: 'pointer',\r\n                                fontWeight: (customFeedEnabled && activeCustomFeedId === feed.id) ? 'bold' : 'normal',\r\n                                transition: 'all 0.2s',\r\n                                whiteSpace: 'nowrap',\r\n                                overflow: 'hidden',\r\n                                textOverflow: 'ellipsis',\r\n                                display: 'flex',\r\n                                alignItems: 'center',\r\n                                justifyContent: 'space-between'\r\n                            }}\r\n                        >\r\n                            <span>{feed.name}</span>\r\n                            {(customFeedEnabled && activeCustomFeedId === feed.id) && <div style={{ width: 8, height: 8, borderRadius: '50%', background: '#000' }} />}\r\n                        </button>\r\n                    ))}\r\n\r\n                    {feeds.length === 0 && (\r\n                        <div style={{ padding: '1rem', color: 'rgba(255,255,255,0.4)', fontSize: '0.85rem', fontStyle: 'italic', textAlign: 'center' }}>\r\n                            No saved feeds\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                <div style={{ padding: '1rem' }}>\r\n                    <button\r\n                        onClick={() => {\r\n                            navigate('/custom-feeds/create');\r\n                            setIsOpen(false);\r\n                            setShowCustomSelector(false);\r\n                        }}\r\n                        style={{\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            gap: '0.5rem',\r\n                            padding: '0.8rem',\r\n                            background: `${accentColor}20`,\r\n                            border: 'none',\r\n                            borderRadius: '8px',\r\n                            color: accentColor,\r\n                            fontSize: '0.9rem',\r\n                            fontWeight: 'bold',\r\n                            cursor: 'pointer',\r\n                            width: '100%',\r\n                            justifyContent: 'center',\r\n                            transition: 'background 0.2s'\r\n                        }}\r\n                    >\r\n                        <FaPlus size={12} />\r\n                        CREATE NEW\r\n                    </button>\r\n                </div>\r\n\r\n            </div>\r\n\r\n            {/* Hub Panel (New Secondary Panel) - Slides out to the left of the main drawer */}\r\n            {/* Uses same positioning logic as sidecar but controlled by showHubPanel */}\r\n            <div style={{\r\n                position: 'fixed',\r\n                top: 0,\r\n                right: (isOpen && showHubPanel) ? '300px' : '-320px',\r\n                width: '260px',\r\n                height: '100vh',\r\n                background: '#111111',\r\n                borderLeft: '1px solid rgba(255, 255, 255, 0.1)',\r\n                boxShadow: '-10px 0 30px rgba(0,0,0,0.5)',\r\n                transition: 'right 0.3s cubic-bezier(0.4, 0, 0.2, 1)',\r\n                zIndex: 9999,\r\n                paddingTop: '80px',\r\n                display: 'flex',\r\n                flexDirection: 'column',\r\n                pointerEvents: isOpen ? 'auto' : 'none'\r\n            }} onClick={(e) => e.stopPropagation()}>\r\n\r\n                <div style={{ padding: '1rem', borderBottom: '1px solid rgba(255,255,255,0.05)', marginBottom: '0.5rem' }}>\r\n                    <h3 style={{ margin: 0, fontSize: '0.9rem', color: accentColor, letterSpacing: '0.05em' }}>PANO HUB</h3>\r\n                </div>\r\n\r\n                <div style={{ padding: '0 1rem', display: 'flex', flexDirection: 'column', gap: '0.5rem' }}>\r\n\r\n                    {/* Market */}\r\n                    <button\r\n                        onClick={() => handleNavClick('/marketplace')}\r\n                        style={{\r\n                            padding: '0.8rem',\r\n                            borderRadius: '8px',\r\n                            border: '1px solid rgba(255,255,255,0.1)',\r\n                            background: 'rgba(255,255,255,0.03)',\r\n                            color: '#fff',\r\n                            textAlign: 'left',\r\n                            fontSize: '0.9rem',\r\n                            cursor: 'pointer',\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            gap: '0.8rem',\r\n                            transition: 'all 0.2s'\r\n                        }}\r\n                    >\r\n                        <FaStore size={16} color={accentColor} />\r\n                        <div>\r\n                            <div style={{ fontWeight: 'bold' }}>Market</div>\r\n                            <div style={{ fontSize: '0.7rem', color: '#888' }}>Shop prints & gear</div>\r\n                        </div>\r\n                    </button>\r\n\r\n                    {/* Calendar */}\r\n                    <button\r\n                        onClick={() => handleNavClick('/calendar')}\r\n                        style={{\r\n                            padding: '0.8rem',\r\n                            borderRadius: '8px',\r\n                            border: '1px solid rgba(255,255,255,0.1)',\r\n                            background: 'rgba(255,255,255,0.03)',\r\n                            color: '#fff',\r\n                            textAlign: 'left',\r\n                            fontSize: '0.9rem',\r\n                            cursor: 'pointer',\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            gap: '0.8rem',\r\n                            transition: 'all 0.2s'\r\n                        }}\r\n                    >\r\n                        <FaCalendarAlt size={16} color={accentColor} />\r\n                        <div>\r\n                            <div style={{ fontWeight: 'bold' }}>Calendar</div>\r\n                            <div style={{ fontSize: '0.7rem', color: '#888' }}>Events & launches</div>\r\n                        </div>\r\n                    </button>\r\n\r\n                    {/* Events (Hub Link) */}\r\n                    <button\r\n                        onClick={() => handleNavClick('/events/all')}\r\n                        style={{\r\n                            padding: '0.8rem',\r\n                            borderRadius: '8px',\r\n                            border: '1px solid rgba(255,255,255,0.1)',\r\n                            background: 'rgba(255,255,255,0.03)',\r\n                            color: '#fff',\r\n                            textAlign: 'left',\r\n                            fontSize: '0.9rem',\r\n                            cursor: 'pointer',\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            gap: '0.8rem',\r\n                            transition: 'all 0.2s'\r\n                        }}\r\n                    >\r\n                        <FaTrophy size={16} color={accentColor} />\r\n                        <div>\r\n                            <div style={{ fontWeight: 'bold' }}>Events</div>\r\n                            <div style={{ fontSize: '0.7rem', color: '#888' }}>Curated feeds & contests</div>\r\n                        </div>\r\n                    </button>\r\n\r\n                </div>\r\n\r\n            </div>\r\n\r\n            {/* Main Menu Drawer (Active) */}\r\n            <div style={drawerStyle} onClick={(e) => e.stopPropagation()}>\r\n\r\n                {/* Header Items */}\r\n                <div style={{\r\n                    position: 'absolute',\r\n                    top: 'max(0.75rem, env(safe-area-inset-top))',\r\n                    left: '1rem',\r\n                    right: '3.5rem',\r\n                    display: 'flex',\r\n                    flexDirection: 'column',\r\n                    gap: '0.5rem',\r\n                    alignItems: 'center',\r\n                    pointerEvents: 'auto',\r\n                    zIndex: 10002\r\n                }}>\r\n\r\n                    {/* Standard Feed Toggles - Visible when NOT custom feed enabled or always visible but disabled? */}\r\n                    {/* User wants them \"back where they were\". Originally they were separate buttons in the main header of the drawer. */}\r\n\r\n                    <div style={{ display: 'flex', width: '100%', gap: '0.4rem' }}>\r\n                        <button\r\n                            onClick={(e) => {\r\n                                e.stopPropagation();\r\n                                toggleFollowingOnly();\r\n                                handleInteraction();\r\n                            }}\r\n                            style={{\r\n                                flex: 1,\r\n                                padding: '0.35rem 0.5rem',\r\n                                borderRadius: '8px',\r\n                                border: `1px solid ${accentColor}`,\r\n                                background: (followingOnly && !customFeedEnabled) ? accentColor : 'rgba(0,0,0,0.6)',\r\n                                color: (followingOnly && !customFeedEnabled) ? '#000' : accentColor,\r\n                                fontSize: '0.7rem',\r\n                                fontWeight: 'bold',\r\n                                textTransform: 'uppercase',\r\n                                letterSpacing: '0.05em',\r\n                                cursor: customFeedEnabled ? 'default' : 'pointer',\r\n                                transition: 'all 0.2s ease',\r\n                                whiteSpace: 'nowrap',\r\n                                height: '32px',\r\n                                backdropFilter: 'blur(10px)',\r\n                                opacity: customFeedEnabled ? 0.5 : 1,\r\n                                display: 'flex',\r\n                                alignItems: 'center',\r\n                                justifyContent: 'center'\r\n                            }}\r\n                            disabled={customFeedEnabled}\r\n                        >\r\n                            {followingOnly ? 'FOLLOWING' : 'GLOBAL'}\r\n                        </button>\r\n                        <button\r\n                            onClick={(e) => {\r\n                                e.stopPropagation();\r\n                                toggleFeed();\r\n                                handleInteraction();\r\n                            }}\r\n                            style={{\r\n                                flex: 1,\r\n                                padding: '0.35rem 0.5rem',\r\n                                borderRadius: '8px',\r\n                                border: `1px solid ${accentColor}`,\r\n                                background: (currentFeed === 'art' && !customFeedEnabled) ? accentColor : 'rgba(0,0,0,0.6)',\r\n                                color: (currentFeed === 'art' && !customFeedEnabled) ? '#000' : accentColor,\r\n                                fontSize: '0.7rem',\r\n                                fontWeight: 'bold',\r\n                                textTransform: 'uppercase',\r\n                                letterSpacing: '0.05em',\r\n                                cursor: customFeedEnabled ? 'default' : 'pointer',\r\n                                transition: 'all 0.2s ease',\r\n                                whiteSpace: 'nowrap',\r\n                                height: '32px',\r\n                                backdropFilter: 'blur(10px)',\r\n                                opacity: customFeedEnabled ? 0.5 : 1,\r\n                                display: 'flex',\r\n                                alignItems: 'center',\r\n                                justifyContent: 'center'\r\n                            }}\r\n                            disabled={customFeedEnabled}\r\n                        >\r\n                            {currentFeed === 'art' ? 'ART' : 'SOCIAL'}\r\n                        </button>\r\n                    </div>\r\n\r\n                    {/* Hub & Custom Feed Toggles */}\r\n                    <div style={{ display: 'flex', width: '100%', gap: '0.4rem', marginTop: '0.5rem' }}>\r\n                        {/* Hub Button */}\r\n                        <button\r\n                            onClick={(e) => {\r\n                                e.stopPropagation();\r\n                                toggleHubPanel();\r\n                            }}\r\n                            style={{\r\n                                flex: 1,\r\n                                padding: '0.35rem 0.8rem',\r\n                                borderRadius: '8px',\r\n                                border: `1px solid ${accentColor}`,\r\n                                background: showHubPanel ? accentColor : 'rgba(0,0,0,0.6)',\r\n                                color: showHubPanel ? '#000' : accentColor,\r\n                                fontSize: '0.75rem',\r\n                                fontWeight: 'bold',\r\n                                textTransform: 'uppercase',\r\n                                letterSpacing: '0.05em',\r\n                                cursor: 'pointer',\r\n                                transition: 'all 0.2s ease',\r\n                                whiteSpace: 'nowrap',\r\n                                height: '32px',\r\n                                backdropFilter: 'blur(10px)',\r\n                                display: 'flex',\r\n                                alignItems: 'center',\r\n                                justifyContent: 'center',\r\n                                gap: '0.4rem'\r\n                            }}\r\n                        >\r\n                            <FaStore size={12} /> HUB\r\n                        </button>\r\n\r\n                        {/* Custom Feeds Button */}\r\n                        <button\r\n                            onClick={(e) => {\r\n                                e.stopPropagation();\r\n                                toggleCustomFeedsPanel();\r\n                            }}\r\n                            style={{\r\n                                flex: 2, // Larger width\r\n                                padding: '0.35rem 0.8rem',\r\n                                borderRadius: '8px',\r\n                                border: `1px solid ${accentColor}`,\r\n                                background: showCustomSelector ? accentColor : 'rgba(0,0,0,0.6)',\r\n                                color: showCustomSelector ? '#000' : accentColor,\r\n                                fontSize: '0.75rem',\r\n                                fontWeight: 'bold',\r\n                                textTransform: 'uppercase',\r\n                                letterSpacing: '0.05em',\r\n                                cursor: 'pointer',\r\n                                transition: 'all 0.2s ease',\r\n                                whiteSpace: 'nowrap',\r\n                                height: '32px',\r\n                                backdropFilter: 'blur(10px)',\r\n                                display: 'flex',\r\n                                alignItems: 'center',\r\n                                justifyContent: 'center',\r\n                                gap: '0.4rem'\r\n                            }}\r\n                        >\r\n                            <FaFilter size={12} /> CUSTOM FEEDS\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Context Options - Kept in main drawer but visualized as list */}\r\n                <div style={{ marginTop: '90px' }}> {/* Push down below header buttons + toggles */}\r\n                    <ContextOptionsSection\r\n                        currentContext={resolvedContext}\r\n                        postOwnerId={resolvedPostOwnerId}\r\n                        profileUserId={resolvedProfileUserId}\r\n                        onEditPost={handleEditPost}\r\n                        onDeletePost={handleDeletePost}\r\n                        onReportPost={handleReportPost}\r\n                        onReportProfile={handleReportProfile}\r\n                        onBlockUser={handleBlockUser}\r\n                        onCopyLink={handleCopyLink}\r\n                        onShareProfile={handleShareProfile}\r\n                    />\r\n                </div>\r\n\r\n                {/* Main Navigation List */}\r\n                <div style={{\r\n                    flex: 1,\r\n                    overflowY: 'auto',\r\n                    paddingTop: '0.5rem'\r\n                }}>\r\n                    <div onClick={() => handleNavClick('/')} style={navItemStyle}>\r\n                        <FaHome color=\"#7FFFD4\" size={20} />\r\n                        {t('nav.home')}\r\n                    </div>\r\n\r\n                    <div onClick={() => handleNavClick('/search')} style={navItemStyle}>\r\n                        <FaSearch color=\"#7FFFD4\" size={20} />\r\n                        {t('nav.search')}\r\n                    </div>\r\n\r\n                    <div onClick={() => handleNavClick('/create-post')} style={navItemStyle}>\r\n                        <FaPlusSquare color=\"#7FFFD4\" size={20} />\r\n                        {t('nav.create')}\r\n                    </div>\r\n\r\n                    {/* Market and Calendar Removed from Main List (Moved to Hub) */}\r\n\r\n                    <div onClick={() => handleNavClick('/settings')} style={navItemStyle}>\r\n                        <FaCog color=\"#7FFFD4\" size={20} />\r\n                        {t('settings.title')}\r\n                    </div>\r\n                </div>\r\n            </div >\r\n\r\n            {/* Backdrop */}\r\n            {\r\n                isOpen && (\r\n                    <div\r\n                        style={{\r\n                            position: 'fixed',\r\n                            inset: 0,\r\n                            background: 'rgba(0,0,0,0.5)',\r\n                            zIndex: 9997, // Lowered behind panels\r\n                            backdropFilter: 'blur(2px)'\r\n                        }}\r\n                        onClick={() => setIsOpen(false)}\r\n                    />\r\n                )\r\n            }\r\n\r\n            {/* Report Modal Integration */}\r\n            {\r\n                showReportModal && (\r\n                    <ReportModal\r\n                        isOpen={showReportModal}\r\n                        targetType={reportConfig.type}\r\n                        targetId={reportConfig.id}\r\n                        targetTitle={reportConfig.title}\r\n                        onClose={() => setShowReportModal(false)}\r\n                    />\r\n                )\r\n            }\r\n        </>\r\n    );\r\n};\r\n\r\nexport default MobileNavigation;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\ModernIcon.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\n\r\nconst ModernIcon = ({ icon: Icon, size = 24, color = 'var(--ice-mint)', glow = true }) => {\r\n    return (\r\n        <div style={{\r\n            position: 'relative',\r\n            display: 'inline-flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            width: size * 1.8,\r\n            height: size * 1.8,\r\n            borderRadius: '12px',\r\n            background: 'rgba(127, 255, 212, 0.05)',\r\n            border: '1px solid rgba(127, 255, 212, 0.2)',\r\n            backdropFilter: 'blur(4px)',\r\n            boxShadow: glow ? '0 0 10px rgba(127, 255, 212, 0.1), inset 0 0 5px rgba(127, 255, 212, 0.05)' : 'none',\r\n            transition: 'all 0.3s ease'\r\n        }}>\r\n            <Icon\r\n                size={size}\r\n                color={color}\r\n                style={{\r\n                    filter: glow ? 'drop-shadow(0 0 2px rgba(127, 255, 212, 0.5))' : 'none'\r\n                }}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ModernIcon;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\MotionWrapper.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { motion } from 'framer-motion';\r\n\r\n/**\r\n * MotionWrapper - Global page transition wrapper\r\n * Provides subtle fade + slide transitions between routes\r\n * Premium, performant, no layout shifting\r\n */\r\nconst MotionWrapper = ({ children }) => {\r\n    return (\r\n        <motion.div\r\n            initial={{ opacity: 0, y: 10 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            exit={{ opacity: 0, y: -10 }}\r\n            transition={{\r\n                duration: 0.3,\r\n                ease: [0.25, 0.1, 0.25, 1], // Custom cubic-bezier for premium feel\r\n                opacity: { duration: 0.25 },\r\n                y: { duration: 0.3 }\r\n            }}\r\n            style={{\r\n                width: '100%',\r\n                height: '100%',\r\n                willChange: 'opacity, transform' // Performance optimization\r\n            }}\r\n        >\r\n            {children}\r\n        </motion.div>\r\n    );\r\n};\r\n\r\nexport default MotionWrapper;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\MuseumCard.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { FaUniversity } from 'react-icons/fa';\r\n\r\nconst MuseumCard = ({ museum }) => {\r\n    const navigate = useNavigate();\r\n\r\n    return (\r\n        <div\r\n            onClick={() => navigate(`/museums/${museum.id}`)}\r\n            style={{\r\n                background: 'rgba(255,255,255,0.03)',\r\n                borderRadius: '12px',\r\n                overflow: 'hidden',\r\n                cursor: 'pointer',\r\n                border: '1px solid rgba(127, 255, 212, 0.2)', // Greenish border for museums\r\n                transition: 'transform 0.2s',\r\n                position: 'relative'\r\n            }}\r\n            onMouseEnter={e => e.currentTarget.style.transform = 'translateY(-4px)'}\r\n            onMouseLeave={e => e.currentTarget.style.transform = 'translateY(0)'}\r\n        >\r\n            <div style={{ aspectRatio: '16/9', background: '#111', position: 'relative' }}>\r\n                <img\r\n                    src={museum.coverImage || 'https://images.unsplash.com/photo-1566054757965-8c4085344c96?q=80&w=2669&auto=format&fit=crop'} // Museum placeholder\r\n                    alt={museum.title}\r\n                    style={{\r\n                        width: '100%',\r\n                        height: '100%',\r\n                        objectFit: 'cover',\r\n                        opacity: museum.coverImage ? 1 : 0.6\r\n                    }}\r\n                />\r\n                {!museum.coverImage && (\r\n                    <div style={{\r\n                        position: 'absolute',\r\n                        inset: 0,\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        justifyContent: 'center',\r\n                        background: 'rgba(0,0,0,0.3)'\r\n                    }}>\r\n                        <FaUniversity style={{ color: 'rgba(127, 255, 212, 0.5)', fontSize: '3rem' }} />\r\n                    </div>\r\n                )}\r\n\r\n                {/* Museum Badge */}\r\n                <div style={{\r\n                    position: 'absolute',\r\n                    top: '10px',\r\n                    right: '10px',\r\n                    background: 'rgba(0,0,0,0.7)',\r\n                    backdropFilter: 'blur(4px)',\r\n                    padding: '4px 8px',\r\n                    borderRadius: '4px',\r\n                    border: '1px solid rgba(127, 255, 212, 0.4)',\r\n                    color: '#7FFFD4',\r\n                    fontSize: '0.7rem',\r\n                    fontWeight: 'bold',\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    gap: '4px'\r\n                }}>\r\n                    <FaUniversity size={10} /> MUSEUM\r\n                </div>\r\n            </div>\r\n            <div style={{ padding: '1rem' }}>\r\n                <h4 style={{ margin: '0 0 0.5rem 0', color: '#fff', fontSize: '1rem' }}>{museum.title || 'Untitled Museum'}</h4>\r\n                <div style={{ display: 'flex', gap: '1rem', fontSize: '0.8rem', color: '#888' }}>\r\n                    <span>{(museum.galleryIds?.length || 0)} Galleries</span>\r\n                    <span>{(museum.profileIds?.length || 0)} Curators</span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default MuseumCard;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\NotificationBadge.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadUnreadCount'. Either include it or remove the dependency array.","line":19,"column":8,"nodeType":"ArrayExpression","endLine":19,"endColumn":21,"suggestions":[{"desc":"Update the dependencies array to be: [currentUser, loadUnreadCount]","fix":{"range":[690,703],"text":"[currentUser, loadUnreadCount]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { getUnreadCount } from '@/services/notificationService';\r\n\r\nconst NotificationBadge = ({ size = 32, showDot = true }) => {\r\n    const { currentUser } = useAuth();\r\n    const navigate = useNavigate();\r\n    const [unreadCount, setUnreadCount] = useState(0);\r\n\r\n    useEffect(() => {\r\n        if (currentUser) {\r\n            loadUnreadCount();\r\n\r\n            // Poll for updates every 30 seconds\r\n            const interval = setInterval(loadUnreadCount, 30000);\r\n            return () => clearInterval(interval);\r\n        }\r\n    }, [currentUser]);\r\n\r\n    const loadUnreadCount = async () => {\r\n        try {\r\n            const count = await getUnreadCount(currentUser.uid);\r\n            setUnreadCount(count);\r\n        } catch (err) {\r\n            console.error('Error loading unread count:', err);\r\n        }\r\n    };\r\n\r\n    const handleClick = () => {\r\n        navigate('/notifications');\r\n    };\r\n\r\n    if (!currentUser) return null;\r\n\r\n    return (\r\n        <div\r\n            onClick={handleClick}\r\n            style={{\r\n                position: 'relative',\r\n                cursor: 'pointer',\r\n                width: `${size}px`,\r\n                height: `${size}px`\r\n            }}\r\n        >\r\n            {/* Profile Picture */}\r\n            <img\r\n                src={currentUser.photoURL || '/default-avatar.png'}\r\n                alt={currentUser.displayName || 'User'}\r\n                style={{\r\n                    width: '100%',\r\n                    height: '100%',\r\n                    borderRadius: '50%',\r\n                    objectFit: 'cover',\r\n                    border: unreadCount > 0 ? '2px solid #7FFFD4' : '2px solid #333'\r\n                }}\r\n            />\r\n\r\n            {/* Notification Dot */}\r\n            {showDot && unreadCount > 0 && (\r\n                <div\r\n                    style={{\r\n                        position: 'absolute',\r\n                        top: '-2px',\r\n                        right: '-2px',\r\n                        width: '12px',\r\n                        height: '12px',\r\n                        background: '#00ff00',\r\n                        borderRadius: '50%',\r\n                        border: '2px solid #000',\r\n                        boxShadow: '0 0 8px rgba(0, 255, 0, 0.8)',\r\n                        animation: 'pulse 2s infinite'\r\n                    }}\r\n                />\r\n            )}\r\n\r\n            {/* Pulse Animation */}\r\n            <style>{`\r\n                @keyframes pulse {\r\n                    0%, 100% {\r\n                        box-shadow: 0 0 8px rgba(0, 255, 0, 0.8);\r\n                    }\r\n                    50% {\r\n                        box-shadow: 0 0 16px rgba(0, 255, 0, 1);\r\n                    }\r\n                }\r\n            `}</style>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default NotificationBadge;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\OfflineBanner.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef } from 'react';\r\nimport { FaWifi, FaExclamationTriangle } from 'react-icons/fa';\r\nimport useOnlineStatus from '@/hooks/useOnlineStatus';\r\nimport { OfflineQueue } from '@/services/OfflineQueue';\r\nimport { logger } from '@/core/utils/logger';\r\n\r\n/**\r\n * OfflineBanner - Minimal banner shown when connection is lost\r\n * Automatically processes queued actions when connection is restored\r\n */\r\nconst OfflineBanner = () => {\r\n    const isOnline = useOnlineStatus();\r\n    const [queueLength, setQueueLength] = useState(0);\r\n    const [showReconnected, setShowReconnected] = useState(false);\r\n    const prevOnlineRef = useRef(isOnline); // Track previous state\r\n    const hasShownInitialRef = useRef(false); // Track if we've shown initial state\r\n\r\n    useEffect(() => {\r\n        // Update queue length\r\n        const updateQueueLength = () => {\r\n            setQueueLength(OfflineQueue.getQueueLength());\r\n        };\r\n\r\n        updateQueueLength();\r\n        const interval = setInterval(updateQueueLength, 1000);\r\n\r\n        return () => clearInterval(interval);\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        // Skip showing reconnected message on initial mount\r\n        if (!hasShownInitialRef.current) {\r\n            hasShownInitialRef.current = true;\r\n            prevOnlineRef.current = isOnline;\r\n            return;\r\n        }\r\n\r\n        // Only show \"reconnected\" if we were previously offline and are now online\r\n        const wasOffline = prevOnlineRef.current === false;\r\n        const isNowOnline = isOnline === true;\r\n\r\n        if (wasOffline && isNowOnline) {\r\n            // Connection restored - process queue\r\n            const processOfflineQueue = async () => {\r\n                const queueLen = OfflineQueue.getQueueLength();\r\n                if (queueLen > 0) {\r\n                    logger.log(`≡ƒöä Processing ${queueLen} queued actions...`);\r\n                    await OfflineQueue.processQueue();\r\n                    setQueueLength(0);\r\n                }\r\n            };\r\n\r\n            processOfflineQueue();\r\n\r\n            // Show \"reconnected\" message briefly\r\n            setShowReconnected(true);\r\n            const timer = setTimeout(() => setShowReconnected(false), 3000);\r\n\r\n            prevOnlineRef.current = isOnline;\r\n            return () => clearTimeout(timer);\r\n        }\r\n\r\n        // Update previous state\r\n        prevOnlineRef.current = isOnline;\r\n    }, [isOnline]);\r\n\r\n    // Don't show anything if online and no reconnection message\r\n    if (isOnline && !showReconnected) {\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <div style={{\r\n            position: 'fixed',\r\n            top: 0,\r\n            left: 0,\r\n            right: 0,\r\n            zIndex: 9998,\r\n            background: isOnline ? 'rgba(127, 255, 212, 0.95)' : 'rgba(255, 107, 107, 0.95)',\r\n            backdropFilter: 'blur(10px)',\r\n            padding: '0.75rem 1rem',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            gap: '0.5rem',\r\n            fontSize: '0.9rem',\r\n            fontWeight: '500',\r\n            color: isOnline ? '#000' : '#fff',\r\n            boxShadow: '0 2px 8px rgba(0,0,0,0.2)',\r\n            animation: 'slideDown 0.3s ease-out',\r\n            paddingTop: 'max(0.75rem, env(safe-area-inset-top))'\r\n        }}>\r\n            {isOnline ? (\r\n                <>\r\n                    <FaWifi size={16} />\r\n                    <span>Connection restored</span>\r\n                    {queueLength > 0 && (\r\n                        <span style={{ opacity: 0.8, fontSize: '0.85rem' }}>\r\n                            ΓÇó Syncing {queueLength} action{queueLength !== 1 ? 's' : ''}...\r\n                        </span>\r\n                    )}\r\n                </>\r\n            ) : (\r\n                <>\r\n                    <FaExclamationTriangle size={16} />\r\n                    <span>No connection. Some features may not work.</span>\r\n                    {queueLength > 0 && (\r\n                        <span style={{ opacity: 0.8, fontSize: '0.85rem' }}>\r\n                            ΓÇó {queueLength} action{queueLength !== 1 ? 's' : ''} queued\r\n                        </span>\r\n                    )}\r\n                </>\r\n            )}\r\n\r\n            <style>{`\r\n                @keyframes slideDown {\r\n                    from {\r\n                        transform: translateY(-100%);\r\n                        opacity: 0;\r\n                    }\r\n                    to {\r\n                        transform: translateY(0);\r\n                        opacity: 1;\r\n                    }\r\n                }\r\n            `}</style>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default OfflineBanner;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\OrientationGuard.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useState' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useEffect' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":36}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\n\n/**\n * OrientationGuard - Mobile-First Component\n * \n * UPDATED: Allows portrait mode on mobile devices (as intended)\n * Only blocks landscape on very small viewports if needed\n */\nconst OrientationGuard = ({ children }) => {\n  // Just render children without blocking\n  // Mobile portrait is the default and correct mode\n  return <>{children}</>;\n};\n\nexport default OrientationGuard;\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\PSButton.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\n/**\r\n * PanoSpace Button Component\r\n * Standardized button with consistent styling across the app\r\n * \r\n * @param {string} variant - Button style variant: 'mint' | 'dark' | 'glass' | 'ghost' | 'danger'\r\n * @param {boolean} active - Whether button is in active/selected state\r\n * @param {string} size - Button size: 'sm' | 'md' | 'lg'\r\n * @param {boolean} fullWidth - Whether button should take full width\r\n * @param {boolean} disabled - Whether button is disabled\r\n * @param {React.ReactNode} icon - Optional icon to display\r\n * @param {React.ReactNode} children - Button content\r\n * @param {function} onClick - Click handler\r\n * @param {object} style - Additional inline styles to merge\r\n * @param {string} className - Additional CSS classes\r\n */\r\nconst PSButton = ({\r\n    variant = 'mint',\r\n    active = false,\r\n    size = 'md',\r\n    fullWidth = false,\r\n    disabled = false,\r\n    icon = null,\r\n    children,\r\n    onClick,\r\n    onMouseEnter,\r\n    onMouseLeave,\r\n    style = {},\r\n    className = '',\r\n    type = 'button',\r\n    ...rest\r\n}) => {\r\n    // Size configurations\r\n    const sizeStyles = {\r\n        sm: {\r\n            padding: '0.3rem 0.6rem',\r\n            fontSize: '0.75rem',\r\n            gap: '0.3rem'\r\n        },\r\n        md: {\r\n            padding: '0.6rem 1.2rem',\r\n            fontSize: '0.85rem',\r\n            gap: '0.5rem'\r\n        },\r\n        lg: {\r\n            padding: '0.75rem 1.5rem',\r\n            fontSize: '1rem',\r\n            gap: '0.5rem'\r\n        }\r\n    };\r\n\r\n    // Variant configurations\r\n    const variantStyles = {\r\n        mint: {\r\n            background: active ? 'rgba(127, 255, 212, 0.15)' : 'rgba(255, 255, 255, 0.03)',\r\n            color: active ? 'var(--ice-mint)' : 'rgba(255, 255, 255, 0.6)',\r\n            border: active ? '1px solid var(--ice-mint)' : '1px solid rgba(255, 255, 255, 0.08)',\r\n            boxShadow: active ? '0 0 15px rgba(127, 255, 212, 0.2), inset 0 0 10px rgba(127, 255, 212, 0.05)' : 'none',\r\n            hover: {\r\n                background: active ? 'rgba(127, 255, 212, 0.2)' : 'rgba(255, 255, 255, 0.08)',\r\n                color: active ? 'var(--ice-mint)' : '#fff'\r\n            }\r\n        },\r\n        dark: {\r\n            background: active ? 'rgba(127, 255, 212, 0.1)' : '#111',\r\n            color: active ? '#7FFFD4' : '#888',\r\n            border: active ? '1px solid #7FFFD4' : '1px solid #333',\r\n            boxShadow: 'none',\r\n            hover: {\r\n                background: active ? 'rgba(127, 255, 212, 0.15)' : '#1a1a1a',\r\n                color: active ? '#7FFFD4' : '#fff'\r\n            }\r\n        },\r\n        glass: {\r\n            background: active ? 'rgba(127, 255, 212, 0.15)' : 'rgba(0, 0, 0, 0.6)',\r\n            color: active ? 'var(--ice-mint)' : '#fff',\r\n            border: active ? '1px solid var(--ice-mint)' : '1px solid rgba(127, 255, 212, 0.3)',\r\n            backdropFilter: 'blur(10px)',\r\n            boxShadow: active ? '0 0 25px rgba(127, 255, 212, 0.15)' : '0 0 20px rgba(0, 0, 0, 0.5)',\r\n            hover: {\r\n                background: active ? 'rgba(127, 255, 212, 0.2)' : 'rgba(0, 0, 0, 0.8)',\r\n                borderColor: 'var(--ice-mint)',\r\n                boxShadow: '0 0 25px rgba(127, 255, 212, 0.15)'\r\n            }\r\n        },\r\n        ghost: {\r\n            background: 'transparent',\r\n            color: active ? 'var(--ice-mint)' : 'rgba(255, 255, 255, 0.7)',\r\n            border: active ? '1px solid var(--ice-mint)' : '1px solid transparent',\r\n            boxShadow: 'none',\r\n            hover: {\r\n                background: 'rgba(255, 255, 255, 0.05)',\r\n                color: 'var(--ice-mint)',\r\n                border: '1px solid rgba(127, 255, 212, 0.3)'\r\n            }\r\n        },\r\n        danger: {\r\n            background: active ? 'rgba(255, 68, 68, 0.2)' : 'rgba(255, 68, 68, 0.1)',\r\n            color: active ? '#ff4444' : 'rgba(255, 68, 68, 0.8)',\r\n            border: active ? '1px solid #ff4444' : '1px solid rgba(255, 68, 68, 0.3)',\r\n            boxShadow: active ? '0 0 15px rgba(255, 68, 68, 0.2)' : 'none',\r\n            hover: {\r\n                background: 'rgba(255, 68, 68, 0.25)',\r\n                color: '#ff4444',\r\n                borderColor: '#ff4444'\r\n            }\r\n        }\r\n    };\r\n\r\n    const currentSize = sizeStyles[size];\r\n    const currentVariant = variantStyles[variant];\r\n\r\n    const baseStyles = {\r\n        ...currentSize,\r\n        ...currentVariant,\r\n        width: fullWidth ? '100%' : 'auto',\r\n        borderRadius: '8px',\r\n        cursor: disabled ? 'not-allowed' : 'pointer',\r\n        fontWeight: active ? '700' : '500',\r\n        fontFamily: 'var(--font-family-heading)',\r\n        letterSpacing: '0.05em',\r\n        textTransform: 'uppercase',\r\n        transition: 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)',\r\n        display: 'inline-flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        whiteSpace: 'nowrap',\r\n        opacity: disabled ? 0.5 : 1,\r\n        outline: 'none',\r\n        ...style\r\n    };\r\n\r\n    const handleMouseEnter = (e) => {\r\n        if (!disabled && !active && currentVariant.hover) {\r\n            Object.assign(e.currentTarget.style, currentVariant.hover);\r\n        }\r\n        if (onMouseEnter) onMouseEnter(e);\r\n    };\r\n\r\n    const handleMouseLeave = (e) => {\r\n        if (!disabled && !active) {\r\n            e.currentTarget.style.background = currentVariant.background;\r\n            e.currentTarget.style.color = currentVariant.color;\r\n            e.currentTarget.style.borderColor = currentVariant.border?.split(' ')[2] || '';\r\n            if (currentVariant.boxShadow) {\r\n                e.currentTarget.style.boxShadow = currentVariant.boxShadow;\r\n            }\r\n        }\r\n        if (onMouseLeave) onMouseLeave(e);\r\n    };\r\n\r\n    return (\r\n        <button\r\n            type={type}\r\n            onClick={disabled ? undefined : onClick}\r\n            onMouseEnter={handleMouseEnter}\r\n            onMouseLeave={handleMouseLeave}\r\n            style={baseStyles}\r\n            className={className}\r\n            disabled={disabled}\r\n            {...rest}\r\n        >\r\n            {icon && <span style={{ display: 'flex', alignItems: 'center' }}>{icon}</span>}\r\n            {children && <span>{children}</span>}\r\n        </button>\r\n    );\r\n};\r\n\r\nPSButton.propTypes = {\r\n    variant: PropTypes.oneOf(['mint', 'dark', 'glass', 'ghost', 'danger']),\r\n    active: PropTypes.bool,\r\n    size: PropTypes.oneOf(['sm', 'md', 'lg']),\r\n    fullWidth: PropTypes.bool,\r\n    disabled: PropTypes.bool,\r\n    icon: PropTypes.node,\r\n    children: PropTypes.node,\r\n    onClick: PropTypes.func,\r\n    onMouseEnter: PropTypes.func,\r\n    onMouseLeave: PropTypes.func,\r\n    style: PropTypes.object,\r\n    className: PropTypes.string,\r\n    type: PropTypes.string\r\n};\r\n\r\nexport default PSButton;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\PageHeader.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\n/**\r\n * PageHeader Component\r\n * Standardized sticky header for pages with title, optional actions, and progress bar\r\n * \r\n * Common pattern across CreatePost, CreateCollection, Calendar, etc.\r\n */\r\nconst PageHeader = ({\r\n    title,\r\n    leftAction = null,\r\n    rightAction = null,\r\n    showProgress = false,\r\n    progress = 0,\r\n    sticky = true,\r\n    borderBottom = true,\r\n    children = null,\r\n    style = {},\r\n    contentStyle = {},\r\n    bottomSlot = null,\r\n    bottomSlotStyle = {}\r\n}) => {\r\n    return (\r\n        <>\r\n            <style>{`\r\n                .page-header-container {\r\n                    padding: 1rem 2rem;\r\n                    border-bottom: 1px solid #333;\r\n                    display: flex;\r\n                    flex-direction: column;\r\n                    align-items: center;\r\n                    position: sticky;\r\n                    top: 0;\r\n                    background: #000;\r\n                    z-index: 100;\r\n                    padding-top: max(1rem, env(safe-area-inset-top));\r\n                    padding-left: max(2rem, env(safe-area-inset-left));\r\n                    padding-right: max(2rem, env(safe-area-inset-right));\r\n                }\r\n                .page-header-content {\r\n                    display: flex;\r\n                    justify-content: space-between;\r\n                    align-items: center;\r\n                    width: 100%;\r\n                }\r\n                .page-header-title {\r\n                    font-size: 1.2rem;\r\n                    font-weight: bold;\r\n                    margin: 0;\r\n                    text-align: center;\r\n                    white-space: nowrap;\r\n                    overflow: hidden;\r\n                    text-overflow: ellipsis;\r\n                }\r\n                @media (max-width: 768px) {\r\n                    .page-header-container {\r\n                        padding: 0.75rem 1rem;\r\n                        padding-top: max(0.75rem, env(safe-area-inset-top));\r\n                        padding-left: max(1rem, env(safe-area-inset-left));\r\n                        padding-right: max(1rem, env(safe-area-inset-right));\r\n                        width: 100%;\r\n                        max-width: 100vw;\r\n                        box-sizing: border-box;\r\n                        overflow-x: hidden;\r\n                    }\r\n                    .page-header-content {\r\n                        width: 100%;\r\n                        max-width: 100%;\r\n                        box-sizing: border-box;\r\n                        gap: 0.5rem;\r\n                    }\r\n                    .page-header-title {\r\n                        font-size: 1rem;\r\n                        min-width: 0;\r\n                    }\r\n                }\r\n                @media (max-width: 480px) {\r\n                    .page-header-container {\r\n                        padding: 0.5rem 0.75rem;\r\n                        padding-top: max(0.5rem, env(safe-area-inset-top));\r\n                    }\r\n                    .page-header-title {\r\n                        font-size: 0.9rem;\r\n                    }\r\n                }\r\n            `}</style>\r\n            <div\r\n                className=\"page-header-container\"\r\n                style={{\r\n                    borderBottom: borderBottom ? '1px solid #333' : 'none',\r\n                    position: sticky ? 'sticky' : 'relative',\r\n                    top: sticky ? 0 : 'auto',\r\n                    ...style\r\n                }}\r\n            >\r\n                <div\r\n                    className=\"page-header-content\"\r\n                    style={contentStyle}\r\n                >\r\n                    {/* Left Action (e.g., Cancel button) */}\r\n                    {leftAction && <div>{leftAction}</div>}\r\n\r\n                    {/* Title */}\r\n                    <h1\r\n                        className=\"page-header-title\"\r\n                        style={{\r\n                            flex: leftAction && rightAction ? 1 : 'none',\r\n                            textAlign: leftAction && rightAction ? 'center' : 'left'\r\n                        }}\r\n                    >\r\n                        {title}\r\n                    </h1>\r\n\r\n                    {/* Right Action (e.g., Submit button) */}\r\n                    {rightAction && <div>{rightAction}</div>}\r\n\r\n                    {/* Custom children (for complex headers) */}\r\n                    {children}\r\n                </div>\r\n\r\n                {/* Bottom Slot (for tabs/filters inside sticky header) */}\r\n                {bottomSlot && (\r\n                    <div style={{\r\n                        width: '100%',\r\n                        marginTop: '1rem',\r\n                        ...bottomSlotStyle\r\n                    }}>\r\n                        {bottomSlot}\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Progress Bar */}\r\n            {showProgress && (\r\n                <div style={{ width: '100%', height: '4px', background: '#333' }}>\r\n                    <div style={{\r\n                        width: `${progress}%`,\r\n                        height: '100%',\r\n                        background: 'var(--ice-mint)',\r\n                        transition: 'width 0.3s ease'\r\n                    }} />\r\n                </div>\r\n            )}\r\n        </>\r\n    );\r\n};\r\n\r\nPageHeader.propTypes = {\r\n    title: PropTypes.string.isRequired,\r\n    leftAction: PropTypes.node,\r\n    rightAction: PropTypes.node,\r\n    showProgress: PropTypes.bool,\r\n    progress: PropTypes.number,\r\n    sticky: PropTypes.bool,\r\n    borderBottom: PropTypes.bool,\r\n    children: PropTypes.node,\r\n    style: PropTypes.object,\r\n    contentStyle: PropTypes.object,\r\n    bottomSlot: PropTypes.node,\r\n    bottomSlotStyle: PropTypes.object\r\n};\r\n\r\nexport default PageHeader;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\PanoDateInput.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\PlanetUserIcon.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\n\r\n// Custom \"Planet Head\" Default Avatar\r\nconst PlanetUserIcon = ({ size = 32, color = \"#7FFFD4\" }) => (\r\n    <svg width={size} height={size} viewBox=\"0 0 32 32\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n        {/* Torso */}\r\n        <path d=\"M6 31C6 24 10.5 21 16 21C21.5 21 26 24 26 31\" stroke={color} strokeWidth=\"2\" strokeLinecap=\"round\" />\r\n        {/* Planet Head */}\r\n        <circle cx=\"16\" cy=\"12\" r=\"5\" stroke={color} strokeWidth=\"2\" />\r\n        {/* Ring */}\r\n        <ellipse cx=\"16\" cy=\"12\" rx=\"9\" ry=\"2.5\" stroke={color} strokeWidth=\"1.5\" transform=\"rotate(-15 16 12)\" />\r\n    </svg>\r\n);\r\n\r\nexport default PlanetUserIcon;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\Post.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaInfoCircle' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":32},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaUserCircle' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":34,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":46},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaMapMarkerAlt' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":48,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":62},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaTrash' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":64,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":71},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaShoppingBag' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":96,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":109},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FilmStripCarousel' is defined but never used. Allowed unused vars must match /^_/u.","line":8,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'InstantPhotoFrame' is defined but never used. Allowed unused vars must match /^_/u.","line":12,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FollowButton' is defined but never used. Allowed unused vars must match /^_/u.","line":17,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ExifDisplay' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":29,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":29,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'currentUser' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":99,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":99,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'showInfo' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":103,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":103,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setShowInfo' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":103,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":103,"endColumn":33},{"ruleId":"react-hooks/rules-of-hooks","severity":1,"message":"React Hook \"useMemo\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":115,"column":28,"nodeType":"Identifier","endLine":115,"endColumn":35},{"ruleId":"react-hooks/rules-of-hooks","severity":1,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":120,"column":51,"nodeType":"Identifier","endLine":120,"endColumn":59},{"ruleId":"react-hooks/rules-of-hooks","severity":1,"message":"React Hook \"useMemo\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":123,"column":19,"nodeType":"Identifier","endLine":123,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'currentItem' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":136,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":136,"endColumn":22},{"ruleId":"react-hooks/rules-of-hooks","severity":1,"message":"React Hook \"useEffect\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":150,"column":5,"nodeType":"Identifier","endLine":150,"endColumn":14},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'post'. Either include it or remove the dependency array.","line":169,"column":8,"nodeType":"ArrayExpression","endLine":169,"endColumn":32,"suggestions":[{"desc":"Update the dependencies array to be: [post, post.id, setActivePost]","fix":{"range":[6840,6864],"text":"[post, post.id, setActivePost]"}}]},{"ruleId":"react-hooks/rules-of-hooks","severity":1,"message":"React Hook \"useEffect\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":172,"column":5,"nodeType":"Identifier","endLine":172,"endColumn":14},{"ruleId":"react-hooks/rules-of-hooks","severity":1,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":199,"column":43,"nodeType":"Identifier","endLine":199,"endColumn":51},{"ruleId":"react-hooks/rules-of-hooks","severity":1,"message":"React Hook \"useEffect\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":207,"column":5,"nodeType":"Identifier","endLine":207,"endColumn":14},{"ruleId":"react-hooks/rules-of-hooks","severity":1,"message":"React Hook \"useCallback\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":237,"column":26,"nodeType":"Identifier","endLine":237,"endColumn":37},{"ruleId":"react-hooks/rules-of-hooks","severity":1,"message":"React Hook \"useCallback\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":245,"column":25,"nodeType":"Identifier","endLine":245,"endColumn":36},{"ruleId":"react-hooks/rules-of-hooks","severity":1,"message":"React Hook \"useCallback\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":252,"column":24,"nodeType":"Identifier","endLine":252,"endColumn":35},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'handleDelete' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":280,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":280,"endColumn":23},{"ruleId":"react-hooks/rules-of-hooks","severity":1,"message":"React Hook \"useCallback\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":280,"column":26,"nodeType":"Identifier","endLine":280,"endColumn":37},{"ruleId":"react-hooks/rules-of-hooks","severity":1,"message":"React Hook \"useCallback\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":291,"column":23,"nodeType":"Identifier","endLine":291,"endColumn":34},{"ruleId":"react-hooks/rules-of-hooks","severity":1,"message":"React Hook \"useCallback\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":295,"column":23,"nodeType":"Identifier","endLine":295,"endColumn":34},{"ruleId":"react-hooks/rules-of-hooks","severity":1,"message":"React Hook \"useCallback\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":299,"column":31,"nodeType":"Identifier","endLine":299,"endColumn":42},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'handleTagClick' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":303,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":303,"endColumn":25},{"ruleId":"react-hooks/rules-of-hooks","severity":1,"message":"React Hook \"useCallback\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":303,"column":28,"nodeType":"Identifier","endLine":303,"endColumn":39},{"ruleId":"react-hooks/rules-of-hooks","severity":1,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":309,"column":57,"nodeType":"Identifier","endLine":309,"endColumn":65},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'shopLinkTarget' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":310,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":310,"endColumn":26},{"ruleId":"react-hooks/rules-of-hooks","severity":1,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":310,"column":49,"nodeType":"Identifier","endLine":310,"endColumn":57},{"ruleId":"react-hooks/rules-of-hooks","severity":1,"message":"React Hook \"useEffect\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":313,"column":5,"nodeType":"Identifier","endLine":313,"endColumn":14},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'post.spaceCardId'. Either include it or remove the dependency array.","line":368,"column":8,"nodeType":"ArrayExpression","endLine":368,"endColumn":75,"suggestions":[{"desc":"Update the dependencies array to be: [showDetailsSidebar, post.userId, post.authorId, post.uid, post.id, post.spaceCardId]","fix":{"range":[14642,14709],"text":"[showDetailsSidebar, post.userId, post.authorId, post.uid, post.id, post.spaceCardId]"}}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'handleEditPost' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":371,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":371,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'handleReportPost' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":375,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":375,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'handleBlockUser' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":387,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":387,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'handleCopyLink' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":394,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":394,"endColumn":25},{"ruleId":"react-hooks/rules-of-hooks","severity":1,"message":"React Hook \"useEffect\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":400,"column":5,"nodeType":"Identifier","endLine":400,"endColumn":14}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":41,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef, useMemo, useCallback } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { db } from '@/firebase';\r\nimport { doc, deleteDoc, getDoc, collection, query, where, limit, getDocs } from 'firebase/firestore';\r\nimport { FaCamera, FaInfoCircle, FaUserCircle, FaMapMarkerAlt, FaTrash, FaExclamationTriangle, FaShoppingBag } from 'react-icons/fa';\r\nimport LikeButton from './LikeButton';\r\nimport FilmStripCarousel from './FilmStripCarousel';\r\nimport FilmStripPost from './FilmStripPost';\r\nimport InstantPhotoPost from './InstantPhotoPost';\r\nimport PostDetailsSidebar from './PostDetailsSidebar';\r\nimport InstantPhotoFrame from './InstantPhotoFrame';\r\nimport SmartImage from './SmartImage';\r\nimport DateStampOverlay from './DateStampOverlay';\r\nimport SpaceCardBadge from './SpaceCardBadge';\r\nimport SoundTagBadge from './SoundTagBadge';\r\nimport FollowButton from './FollowButton';\r\nimport PlanetUserIcon from './PlanetUserIcon';\r\nimport { useUI } from '@/context/UIContext';\r\nimport '@/styles/Post.css';\r\n\r\nimport { formatExifForDisplay } from '@/core/utils/exif';\r\nimport { isNSFW, getUserNSFWPreference } from '@/core/constants/nsfwTags';\r\nimport { preloadImage } from '@/core/utils/imageCache';\r\nimport { logger } from '@/core/utils/logger';\r\nimport { getQuartzDateStyle } from '@/core/utils/quartzDateUtils';\r\nimport { renderCosmicUsername } from '@/utils/usernameRenderer';\r\n\r\nconst ExifDisplay = React.memo(({ exif }) => {\r\n    const displayData = formatExifForDisplay(exif);\r\n    if (!displayData) return null;\r\n\r\n    return (\r\n        <div style={{\r\n            position: 'absolute',\r\n            bottom: '120px',\r\n            left: '20px',\r\n            background: 'rgba(0,0,0,0.8)',\r\n            backdropFilter: 'blur(10px)',\r\n            padding: '1rem',\r\n            borderRadius: '12px',\r\n            border: '1px solid rgba(255,255,255,0.1)',\r\n            color: '#ccc',\r\n            fontSize: '0.8rem',\r\n            maxWidth: '300px',\r\n            zIndex: 15,\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            gap: '0.5rem'\r\n        }}>\r\n            <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', color: '#fff', fontWeight: 'bold', borderBottom: '1px solid #333', paddingBottom: '0.5rem' }}>\r\n                <FaCamera /> Photography Data\r\n            </div>\r\n            {displayData.camera && <div><strong>Camera:</strong> {displayData.camera}</div>}\r\n            {displayData.lens && <div><strong>Lens:</strong> {displayData.lens}</div>}\r\n            <div style={{ display: 'flex', gap: '1rem' }}>\r\n                {displayData.specs.map((spec, i) => (\r\n                    <div key={i}>{spec}</div>\r\n                ))}\r\n            </div>\r\n            {displayData.date && <div style={{ fontSize: '0.7rem', opacity: 0.7 }}>{displayData.date}</div>}\r\n        </div>\r\n    );\r\n});\r\n\r\n// Wrapper to handle dynamic resizing relative to container\r\n// Uses the window size (since Post is 100vh/100vw) or containerRef if strictly passed\r\nconst QuartzDateWrapper = ({ quartzDate, imageWidth, imageHeight, containerRef }) => {\r\n    // We use window size because Post is full viewport\r\n    // But sticking to containerRef is safer if layout changes\r\n    const [dimensions, setDimensions] = useState({ w: window.innerWidth, h: window.innerHeight });\r\n\r\n    useEffect(() => {\r\n        const handleResize = () => {\r\n            if (containerRef?.current) {\r\n                setDimensions({\r\n                    w: containerRef.current.clientWidth,\r\n                    h: containerRef.current.clientHeight\r\n                });\r\n            } else {\r\n                setDimensions({ w: window.innerWidth, h: window.innerHeight });\r\n            }\r\n        };\r\n\r\n        window.addEventListener('resize', handleResize);\r\n        handleResize(); // Initial\r\n\r\n        return () => window.removeEventListener('resize', handleResize);\r\n    }, [containerRef]);\r\n\r\n    const style = useMemo(() => {\r\n        return getQuartzDateStyle(dimensions.w, dimensions.h, imageWidth || dimensions.w, imageHeight || dimensions.h);\r\n    }, [dimensions.w, dimensions.h, imageWidth, imageHeight]);\r\n\r\n    return <DateStampOverlay quartzDate={quartzDate} style={style} />;\r\n};\r\n\r\nconst Post = ({ post, priority = 'normal' }) => {\r\n    const { currentUser } = useAuth();\r\n    const { setActivePost } = useUI();\r\n    const navigate = useNavigate();\r\n    const containerRef = useRef(null);\r\n    const [showInfo, setShowInfo] = useState(false);\r\n    const [currentSlide, setCurrentSlide] = useState(0);\r\n    const touchStartRef = useRef({ x: null, y: null });\r\n    const touchEndRef = useRef({ x: null, y: null });\r\n\r\n    // STABILITY: Early return if post is null/undefined\r\n    if (!post) {\r\n        logger.warn('Post component received null/undefined post');\r\n        return null;\r\n    }\r\n\r\n    // NSFW Content Detection\r\n    const hasNSFWContent = useMemo(() => {\r\n        return isNSFW(post?.tags);\r\n    }, [post?.tags]);\r\n\r\n    const userPrefersNSFW = getUserNSFWPreference();\r\n    const [showNSFWContent, setShowNSFWContent] = useState(userPrefersNSFW);\r\n\r\n    // Memoize items to prevent recalculation\r\n    const items = useMemo(() => {\r\n        let itemsList = post.images || post.items || post.slides || [];\r\n\r\n        if (itemsList.length === 0) {\r\n            const fallbackUrl = post?.images?.[0]?.url || post.imageUrl || post.shopImageUrl || '';\r\n            if (fallbackUrl) {\r\n                itemsList = [{ type: 'image', url: fallbackUrl }];\r\n            }\r\n        }\r\n\r\n        return itemsList;\r\n    }, [post]);\r\n\r\n    const currentItem = items[currentSlide] || items[0] || {};\r\n    const useFilmStripMode = post.uiOverlays?.sprocketBorder === true;\r\n    const hasInstantBorder = post.uiOverlays?.instantPhotoBorder === true;\r\n\r\n    // Check for special rendering modes first (Top Level)\r\n    if (useFilmStripMode) {\r\n        return <FilmStripPost post={post} images={items} uiOverlays={post.uiOverlays} priority={priority} postId={post.id} />;\r\n    }\r\n\r\n    if (hasInstantBorder) {\r\n        return <InstantPhotoPost post={post} images={items} uiOverlays={post.uiOverlays} priority={priority} />;\r\n    }\r\n\r\n    // Intersection Observer to track active post\r\n    useEffect(() => {\r\n        if (!containerRef.current) return;\r\n\r\n        const observer = new IntersectionObserver(\r\n            (entries) => {\r\n                entries.forEach((entry) => {\r\n                    if (entry.isIntersecting) {\r\n                        setActivePost(post);\r\n                    }\r\n                });\r\n            },\r\n            { threshold: 0.6 }\r\n        );\r\n\r\n        observer.observe(containerRef.current);\r\n\r\n        return () => {\r\n            observer.disconnect();\r\n        };\r\n    }, [post.id, setActivePost]); // Only depend on post.id\r\n\r\n    // EARLY FETCHING: Preload first 3 slides when approaching viewport\r\n    useEffect(() => {\r\n        if (!items || items.length === 0 || !containerRef.current) return;\r\n\r\n        const preloadObserver = new IntersectionObserver(\r\n            (entries) => {\r\n                entries.forEach((entry) => {\r\n                    if (entry.isIntersecting) {\r\n                        // Immediately preload first 3 slides\r\n                        items.slice(0, 3).forEach(item => {\r\n                            const url = item?.url || (typeof item === 'string' ? item : null);\r\n                            if (url && typeof url === 'string') preloadImage(url);\r\n                        });\r\n                        preloadObserver.disconnect();\r\n                    }\r\n                });\r\n            },\r\n            { rootMargin: '50% 0px 50% 0px' } // Start fetching when 50% of screen away\r\n        );\r\n\r\n        preloadObserver.observe(containerRef.current);\r\n        return () => preloadObserver.disconnect();\r\n    }, [items]);\r\n\r\n    // BACKLOG FIX: Fetch Author Photo if missing\r\n    // Old posts might not have the updated author photo URL.\r\n    // We check if it's missing, and if so, fetch the latest public profile.\r\n    // IMPROVED: Check all possible field names for avatar\r\n    const [authorPhoto, setAuthorPhoto] = useState(\r\n        post.authorPhotoUrl ||\r\n        post.userPhotoUrl ||\r\n        post.userAvatar ||\r\n        post.profileImage ||\r\n        null\r\n    );\r\n\r\n    useEffect(() => {\r\n        const fetchAuthorPhoto = async () => {\r\n            // If we already have a valid photo URL, don't fetch.\r\n            if (authorPhoto && authorPhoto.startsWith('http')) return;\r\n\r\n            // Identify the author ID\r\n            const authorId = post.userId || post.authorId || post.uid;\r\n            if (!authorId) return;\r\n\r\n            try {\r\n                const userDocRef = doc(db, 'users', authorId);\r\n                const userDocSnap = await getDoc(userDocRef);\r\n\r\n                if (userDocSnap.exists()) {\r\n                    const userData = userDocSnap.data();\r\n                    if (userData.photoURL) {\r\n                        setAuthorPhoto(userData.photoURL);\r\n                    }\r\n                }\r\n            } catch (err) {\r\n                logger.warn(\"Failed to fetch author photo fallback\", err);\r\n            }\r\n        };\r\n\r\n        fetchAuthorPhoto();\r\n    }, [post.userId, post.authorId, post.uid, authorPhoto]);\r\n\r\n\r\n\r\n    // Touch handlers with refs to avoid re-renders\r\n    const onTouchStart = useCallback((e) => {\r\n        touchStartRef.current = {\r\n            x: e.targetTouches[0].clientX,\r\n            y: e.targetTouches[0].clientY\r\n        };\r\n        touchEndRef.current = { x: null, y: null };\r\n    }, []);\r\n\r\n    const onTouchMove = useCallback((e) => {\r\n        touchEndRef.current = {\r\n            x: e.targetTouches[0].clientX,\r\n            y: e.targetTouches[0].clientY\r\n        };\r\n    }, []);\r\n\r\n    const onTouchEnd = useCallback(() => {\r\n        const start = touchStartRef.current;\r\n        const end = touchEndRef.current;\r\n\r\n        if (!start.x || !end.x) return;\r\n\r\n        const distanceX = start.x - end.x;\r\n        const distanceY = start.y - end.y;\r\n        const minSwipeDistance = 50;\r\n\r\n        // Check if it's more horizontal than vertical\r\n        const isHorizontal = Math.abs(distanceX) > Math.abs(distanceY);\r\n\r\n        if (isHorizontal) {\r\n            const isLeftSwipe = distanceX > minSwipeDistance;\r\n            const isRightSwipe = distanceX < -minSwipeDistance;\r\n\r\n            if (isLeftSwipe && currentSlide < items.length - 1) {\r\n                setCurrentSlide(prev => prev + 1);\r\n            }\r\n            if (isRightSwipe && currentSlide > 0) {\r\n                setCurrentSlide(prev => prev - 1);\r\n            }\r\n        }\r\n    }, [currentSlide, items.length]);\r\n\r\n\r\n\r\n    const handleDelete = useCallback(async () => {\r\n        if (window.confirm(\"Are you sure you want to delete this post? This cannot be undone.\")) {\r\n            try {\r\n                await deleteDoc(doc(db, 'posts', post.id));\r\n            } catch (error) {\r\n                console.error(\"Error deleting post:\", error);\r\n                alert(\"Failed to delete post.\");\r\n            }\r\n        }\r\n    }, [post.id]);\r\n\r\n    const nextSlide = useCallback(() => {\r\n        setCurrentSlide((prev) => (prev + 1) % items.length);\r\n    }, [items.length]);\r\n\r\n    const prevSlide = useCallback(() => {\r\n        setCurrentSlide((prev) => (prev - 1 + items.length) % items.length);\r\n    }, [items.length]);\r\n\r\n    const handleAuthorClick = useCallback(() => {\r\n        navigate(`/profile/${post.userId || post.authorId}`);\r\n    }, [navigate, post.userId, post.authorId]);\r\n\r\n    const handleTagClick = useCallback((tag, e) => {\r\n        e.stopPropagation();\r\n        navigate(`/search?tags=${tag}`);\r\n    }, [navigate]);\r\n\r\n    // State for Details Sidebar\r\n    const [showDetailsSidebar, setShowDetailsSidebar] = useState(false);\r\n    const [shopLinkTarget, setShopLinkTarget] = useState(null); // { type: 'item' | 'profile', id: string }\r\n\r\n    // Check for linked shop item or general shop existence\r\n    useEffect(() => {\r\n        if (showDetailsSidebar) {\r\n            const checkShopStatus = async () => {\r\n                const authorId = post.userId || post.authorId || post.uid;\r\n                if (!authorId) return;\r\n\r\n                try {\r\n                    const shopItemsRef = collection(db, 'shopItems');\r\n\r\n                    logger.log(\"Checking Shop Status for:\", authorId, \"Post:\", post.id, \"SpaceCard:\", post.spaceCardId);\r\n\r\n                    // 1. Check if THIS post is listed (by sourcePostId matching post.id OR post.spaceCardId)\r\n                    // We need to check both because ShopItems can link to either a Post or a SpaceCard.\r\n                    const checks = [post.id];\r\n                    if (post.spaceCardId) checks.push(post.spaceCardId);\r\n\r\n                    const specificItemQuery = query(\r\n                        shopItemsRef,\r\n                        where('ownerId', '==', authorId),\r\n                        where('sourcePostId', 'in', checks),\r\n                        where('status', '==', 'active'),\r\n                        limit(1)\r\n                    );\r\n                    const specificSnapshot = await getDocs(specificItemQuery);\r\n\r\n                    if (!specificSnapshot.empty) {\r\n                        logger.log(\"Found Specific Item:\", specificSnapshot.docs[0].id);\r\n                        setShopLinkTarget({ type: 'item', id: specificSnapshot.docs[0].id });\r\n                        return;\r\n                    } else {\r\n                        logger.log(\"No specific item found.\");\r\n                    }\r\n\r\n                    // 2. Fallback: Check if user has ANY active shop items\r\n                    const generalQuery = query(\r\n                        shopItemsRef,\r\n                        where('ownerId', '==', authorId),\r\n                        where('status', '==', 'active'),\r\n                        limit(1)\r\n                    );\r\n                    const generalSnapshot = await getDocs(generalQuery);\r\n\r\n                    if (!generalSnapshot.empty) {\r\n                        logger.log(\"Found General Shop Items\");\r\n                        setShopLinkTarget({ type: 'profile', id: authorId });\r\n                    } else {\r\n                        logger.log(\"No active shop items found for user.\");\r\n                        setShopLinkTarget(null);\r\n                    }\r\n                } catch (error) {\r\n                    logger.error(\"Error checking shop status:\", error);\r\n                }\r\n            };\r\n            checkShopStatus();\r\n        }\r\n    }, [showDetailsSidebar, post.userId, post.authorId, post.uid, post.id]);\r\n\r\n    // Handlers\r\n    const handleEditPost = () => {\r\n        navigate(`/edit-post/${post.id}`);\r\n    };\r\n\r\n    const handleReportPost = () => {\r\n        // Simple alert or modal trigger - reusing logic from context menu would require props drilling or context\r\n        // For now, implementing basic handlers or relying on parent if needed. \r\n        // But Post.jsx is a child. We might need to dispatch an event or use a global modal.\r\n        // The MobileNavigation has the modals. \r\n        // Let's implement basic alerts or navigation for now, \r\n        // OR better: use the existing handlers if they were passed (they weren't).\r\n        // Since this is a modification of the Post component, and it doesn't have the \"ReportModal\" visible, \r\n        // we might need to rely on the global UI context or just alert for now.\r\n        alert(\"Report feature coming soon\");\r\n    };\r\n\r\n    const handleBlockUser = async () => {\r\n        if (window.confirm(`Block ${post.username || 'user'}?`)) {\r\n            // Dispatch block event or handle via service locally\r\n            alert(\"User blocked\");\r\n        }\r\n    };\r\n\r\n    const handleCopyLink = () => {\r\n        navigator.clipboard.writeText(`${window.location.origin}/post/${post.id}`);\r\n        alert(\"Link copied\");\r\n    };\r\n\r\n    // Preload current, next, prev images for instant swiping\r\n    useEffect(() => {\r\n        if (!items || items.length === 0) return;\r\n\r\n        // Preload Current + Next + Prev\r\n        // We include Current to ensure it's in the Map cache (preventing GC flicker)\r\n        const indicesToPreload = [currentSlide];\r\n\r\n        if (items.length > 1) {\r\n            indicesToPreload.push((currentSlide + 1) % items.length);\r\n            indicesToPreload.push((currentSlide - 1 + items.length) % items.length);\r\n        }\r\n\r\n        indicesToPreload.forEach(index => {\r\n            const item = items[index];\r\n            const url = item?.url || (typeof item === 'string' ? item : null);\r\n            if (url && typeof url === 'string') {\r\n                preloadImage(url);\r\n            }\r\n        });\r\n    }, [currentSlide, items]);\r\n\r\n    // Helper to render content for both Single and Slideshow views\r\n    const renderSlideContent = (item, index) => {\r\n        if (!item) return null;\r\n\r\n        const url = item.url || item;\r\n        const isUrl = typeof url === 'string' && (url.startsWith('http') || url.startsWith('blob:') || url.startsWith('data:'));\r\n\r\n        // --- STANDARD IMAGE RENDERING ---\r\n        if (isUrl) {\r\n            // Eager load current, next, and previous slides (handling wrapping)\r\n            const len = items.length;\r\n            const isNearby =\r\n                index === currentSlide ||\r\n                index === (currentSlide + 1) % len ||\r\n                index === (currentSlide - 1 + len) % len;\r\n\r\n            const imageContent = (\r\n                <div style={{ position: 'relative', width: '100%', height: '100%' }}>\r\n                    <SmartImage\r\n                        src={url}\r\n                        alt={`Slide ${index + 1} `}\r\n                        priority={index === 0 ? priority : 'low'}\r\n                        eager={isNearby}\r\n                        objectFit=\"contain\" // Standard fit\r\n                        style={{ width: '100%', height: '100%', backgroundColor: 'transparent' }}\r\n                    />\r\n                    {post.uiOverlays?.quartzDate && (\r\n                        /* Use dynamic sizing to stick to image even in contain mode */\r\n                        <QuartzDateWrapper\r\n                            quartzDate={post.uiOverlays.quartzDate}\r\n                            imageWidth={item.width}\r\n                            imageHeight={item.height}\r\n                            containerRef={containerRef}\r\n                        />\r\n                    )}\r\n                </div>\r\n            );\r\n\r\n            return imageContent;\r\n        }\r\n\r\n        // --- TEXT/FALLBACK RENDERING ---\r\n        return (\r\n            <div style={{ color: '#fff', fontSize: '1.5rem', padding: '2rem', textAlign: 'center' }}>\r\n                {item.content || item.text || (typeof item === 'string' ? item : JSON.stringify(item))}\r\n            </div>\r\n        );\r\n    };\r\n\r\n    return (\r\n        <div\r\n            ref={containerRef}\r\n            style={{\r\n                height: '100vh',\r\n                width: '100vw',\r\n                scrollSnapAlign: 'start',\r\n                position: 'relative',\r\n                overflow: 'hidden',\r\n                backgroundColor: '#000',\r\n                willChange: 'transform',\r\n                userSelect: 'none',\r\n                WebkitUserSelect: 'none',\r\n                WebkitTouchCallout: 'none'\r\n            }}\r\n            data-testid=\"post-item\"\r\n        >\r\n            {items.length === 0 ? (\r\n                <div style={{\r\n                    width: '100%',\r\n                    height: '100%',\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'center',\r\n                    color: '#888',\r\n                    fontSize: '1.2rem'\r\n                }}>\r\n                    No content available\r\n                </div>\r\n            ) : items.length === 1 ? (\r\n                /* SINGLE IMAGE VIEW */\r\n                (() => {\r\n                    const item = items[0];\r\n                    const aspectRatio = item.aspectRatio || (item.width && item.height ? item.width / item.height : null);\r\n                    const isCinematic = post.atmosphereBackground === 'cinematic-gradient';\r\n\r\n                    return (\r\n                        <div style={{\r\n                            width: '100%',\r\n                            height: '100%',\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            justifyContent: 'center',\r\n                            background: '#000',\r\n                            position: 'relative'\r\n                        }}>\r\n                            {/* Cinematic Gradient Layer */}\r\n                            {isCinematic && (\r\n                                <div style={{\r\n                                    position: 'absolute',\r\n                                    zIndex: 0,\r\n                                    ...(aspectRatio ? {\r\n                                        aspectRatio: `${aspectRatio}`,\r\n                                        width: '100%',\r\n                                        height: '100%',\r\n                                        maxHeight: '100%',\r\n                                        maxWidth: '100%'\r\n                                    } : {\r\n                                        inset: 0\r\n                                    }),\r\n                                    background: `radial-gradient(circle at center, ${post.gradientColor || '#1a4f3d'} 0%, #000000 90%)`\r\n                                }} />\r\n                            )}\r\n\r\n                            {/* Render Image Content */}\r\n                            <div style={{ zIndex: 1, width: '100%', height: '100%', flex: 1 }}>\r\n                                {renderSlideContent(items[0], 0)}\r\n                            </div>\r\n\r\n                            {/* NSFW Warning Overlay */}\r\n                            {hasNSFWContent && !showNSFWContent && (\r\n                                <div\r\n                                    onClick={(e) => {\r\n                                        e.stopPropagation();\r\n                                        setShowNSFWContent(true);\r\n                                    }}\r\n                                    style={{\r\n                                        position: 'absolute',\r\n                                        inset: 0,\r\n                                        background: 'rgba(0,0,0,0.95)',\r\n                                        backdropFilter: 'blur(20px)',\r\n                                        display: 'flex',\r\n                                        flexDirection: 'column',\r\n                                        alignItems: 'center',\r\n                                        justifyContent: 'center',\r\n                                        cursor: 'pointer',\r\n                                        zIndex: 100,\r\n                                        padding: '2rem'\r\n                                    }}\r\n                                >\r\n                                    <FaExclamationTriangle size={64} color=\"#ff6b6b\" style={{ marginBottom: '1.5rem' }} />\r\n                                    <h3 style={{ margin: '0 0 0.5rem 0', fontSize: '1.5rem', color: '#fff' }}>Sensitive Content</h3>\r\n                                    <p style={{ color: '#aaa', marginBottom: '1.5rem', textAlign: 'center', maxWidth: '300px' }}>\r\n                                        This post may contain sensitive or mature material\r\n                                    </p>\r\n                                    <button style={{\r\n                                        padding: '0.75rem 1.5rem',\r\n                                        background: '#7FFFD4',\r\n                                        color: '#000',\r\n                                        border: 'none',\r\n                                        borderRadius: '8px',\r\n                                        fontWeight: 'bold',\r\n                                        cursor: 'pointer',\r\n                                        fontSize: '1rem'\r\n                                    }}>\r\n                                        Tap to View\r\n                                    </button>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    );\r\n                })()\r\n            ) : (\r\n                /* MULTI-IMAGE CAROUSEL */\r\n                <div\r\n                    style={{\r\n                        width: '100%',\r\n                        height: '100%',\r\n                        position: 'relative',\r\n                        overflow: 'hidden'\r\n                    }}\r\n                    onTouchStart={onTouchStart}\r\n                    onTouchMove={onTouchMove}\r\n                    onTouchEnd={onTouchEnd}\r\n                >\r\n                    {/* Slides Container */}\r\n                    <div\r\n                        style={{\r\n                            display: 'flex',\r\n                            width: '100%',\r\n                            height: '100%',\r\n                            transform: `translateX(-${currentSlide * 100}%)`,\r\n                            transition: 'transform 0.3s cubic-bezier(0.2, 0.8, 0.2, 1)'\r\n                        }}\r\n                    >\r\n                        {items.map((item, index) => (\r\n                            <div\r\n                                key={index}\r\n                                style={{\r\n                                    flex: '0 0 100%',\r\n                                    width: '100%',\r\n                                    height: '100%',\r\n                                    position: 'relative',\r\n                                    display: 'flex',\r\n                                    alignItems: 'center',\r\n                                    justifyContent: 'center',\r\n                                    background: '#000'\r\n                                }}\r\n                            >\r\n                                {renderSlideContent(item, index)}\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n\r\n                    {/* Navigation Arrows */}\r\n                    {currentSlide > 0 && (\r\n                        <button\r\n                            onClick={(e) => { e.stopPropagation(); prevSlide(); }}\r\n                            style={{\r\n                                position: 'absolute',\r\n                                left: '10px',\r\n                                top: '50%',\r\n                                transform: 'translateY(-50%)',\r\n                                background: 'transparent',\r\n                                border: 'none',\r\n                                color: 'rgba(255,255,255,0.7)',\r\n                                fontSize: '2.5rem',\r\n                                cursor: 'pointer',\r\n                                zIndex: 20,\r\n                                padding: '1rem',\r\n                                textShadow: '0 2px 4px rgba(0,0,0,0.5)'\r\n                            }}\r\n                        >\r\n                            ΓÇ╣\r\n                        </button>\r\n                    )}\r\n                    {currentSlide < items.length - 1 && (\r\n                        <button\r\n                            onClick={(e) => { e.stopPropagation(); nextSlide(); }}\r\n                            style={{\r\n                                position: 'absolute',\r\n                                right: '10px',\r\n                                top: '50%',\r\n                                transform: 'translateY(-50%)',\r\n                                background: 'transparent',\r\n                                border: 'none',\r\n                                color: 'rgba(255,255,255,0.7)',\r\n                                fontSize: '2.5rem',\r\n                                cursor: 'pointer',\r\n                                zIndex: 20,\r\n                                padding: '1rem',\r\n                                textShadow: '0 2px 4px rgba(0,0,0,0.5)'\r\n                            }}\r\n                        >\r\n                            ΓÇ║\r\n                        </button>\r\n                    )}\r\n\r\n                    {/* NSFW Warning Overlay for Carousel */}\r\n                    {hasNSFWContent && !showNSFWContent && (\r\n                        <div\r\n                            onClick={(e) => {\r\n                                e.stopPropagation();\r\n                                setShowNSFWContent(true);\r\n                            }}\r\n                            style={{\r\n                                position: 'absolute',\r\n                                inset: 0,\r\n                                background: 'rgba(0,0,0,0.95)',\r\n                                backdropFilter: 'blur(20px)',\r\n                                display: 'flex',\r\n                                flexDirection: 'column',\r\n                                alignItems: 'center',\r\n                                justifyContent: 'center',\r\n                                cursor: 'pointer',\r\n                                zIndex: 100,\r\n                                padding: '2rem'\r\n                            }}\r\n                        >\r\n                            <FaExclamationTriangle size={64} color=\"#ff6b6b\" style={{ marginBottom: '1.5rem' }} />\r\n                            <h3 style={{ margin: '0 0 0.5rem 0', fontSize: '1.5rem', color: '#fff' }}>Sensitive Content</h3>\r\n                            <p style={{ color: '#aaa', marginBottom: '1.5rem', textAlign: 'center', maxWidth: '300px' }}>\r\n                                This post may contain sensitive or mature material\r\n                            </p>\r\n                            <button style={{\r\n                                padding: '0.75rem 1.5rem',\r\n                                background: '#7FFFD4',\r\n                                color: '#000',\r\n                                border: 'none',\r\n                                borderRadius: '8px',\r\n                                fontWeight: 'bold',\r\n                                cursor: 'pointer',\r\n                                fontSize: '1rem'\r\n                            }}>\r\n                                Tap to View\r\n                            </button>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            )}\r\n            {/* End of Items Ternary */}\r\n\r\n            {/* Digital Goods Badges */}\r\n            <div style={{\r\n                position: 'absolute',\r\n                top: '20px',\r\n                right: '20px',\r\n                display: 'flex',\r\n                flexDirection: 'column',\r\n                gap: '8px',\r\n                zIndex: 20,\r\n                alignItems: 'flex-end'\r\n            }}>\r\n                {post.spaceCardId && (\r\n                    <SpaceCardBadge\r\n                        type={post.isSpaceCardCreator ? 'creator' : 'owner'}\r\n                        rarity={post.spaceCardRarity || 'Common'}\r\n                    />\r\n                )}\r\n                {post.soundTagId && (\r\n                    <SoundTagBadge\r\n                        hasSound={true}\r\n                        label={post.soundTagTitle || 'SoundTag'}\r\n                        onClick={(e) => {\r\n                            e.stopPropagation();\r\n                            alert(\"SoundTag Preview Coming Soon\");\r\n                        }}\r\n                    />\r\n                )}\r\n            </div>\r\n\r\n            {/* Title Overlay */}\r\n            {post.title && (\r\n                <div className=\"post-title-overlay\">\r\n                    <h2 className=\"post-title-text\">{renderCosmicUsername(post.title)}</h2>\r\n                </div>\r\n            )}\r\n\r\n            {/* Author Info & Location - REDESIGNED */}\r\n            <div\r\n                className=\"author-overlay\"\r\n                style={{\r\n                    position: 'absolute',\r\n                    bottom: 'max(80px, calc(80px + env(safe-area-inset-bottom)))',\r\n                    left: '20px',\r\n                    display: 'flex',\r\n                    alignItems: 'stretch', // Ensure equal height\r\n                    background: 'rgba(0, 0, 0, 0.6)',\r\n                    backdropFilter: 'blur(8px)',\r\n                    borderRadius: '8px',\r\n                    zIndex: 10,\r\n                    width: 'fit-content',\r\n                    maxWidth: '300px',\r\n                    border: '1px solid rgba(255,255,255,0.1)',\r\n                    overflow: 'hidden' // For border radius\r\n                }}\r\n            >\r\n                {/* 1. Profile Picture Button (Left) */}\r\n                <div\r\n                    onClick={(e) => {\r\n                        e.stopPropagation();\r\n                        handleAuthorClick();\r\n                    }}\r\n                    style={{\r\n                        width: '40px', // Fixed square width\r\n                        height: '40px', // Fixed square height\r\n                        padding: '0', // Removing padding to fill the box\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        justifyContent: 'center',\r\n                        background: 'rgba(255,255,255,0.05)',\r\n                        borderRight: '1px solid rgba(255,255,255,0.1)',\r\n                        cursor: 'pointer'\r\n                    }}\r\n                >\r\n                    {authorPhoto && authorPhoto.startsWith('http') ? (\r\n                        <img\r\n                            src={authorPhoto}\r\n                            alt={post.username}\r\n                            style={{\r\n                                width: '100%', // Fill container\r\n                                height: '100%', // Fill container\r\n                                objectFit: 'cover',\r\n                                borderRadius: '0' // Boxy look to fill the container if desired, or keep logic. User said \"fill the whole gray box\". \r\n                                // Since the container (gray box) is square, we make the image square.\r\n                                // If rounding is needed on the container, we should apply it there. \r\n                                // Line 513 sets borderRadius: '8px' on the PARENT author-overlay.\r\n                                // This inner box is the left-most element.\r\n                                // We'll effectively make it fill.\r\n                            }}\r\n                            onError={(e) => {\r\n                                e.target.style.display = 'none';\r\n                                e.target.nextSibling.style.display = 'flex'; // Flex to center icon\r\n                            }}\r\n                        />\r\n                    ) : (\r\n                        <div style={{ width: '100%', height: '100%', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\r\n                            <PlanetUserIcon size={28} color=\"#7FFFD4\" />\r\n                        </div>\r\n                    )}\r\n                    {/* Fallback */}\r\n                    <div style={{ display: 'none', width: '100%', height: '100%', alignItems: 'center', justifyContent: 'center' }}>\r\n                        <PlanetUserIcon size={28} color=\"#7FFFD4\" />\r\n                    </div>\r\n                </div>\r\n\r\n                {/* 2. Username Button (Right) */}\r\n                <div\r\n                    onClick={(e) => {\r\n                        e.stopPropagation();\r\n                        setShowDetailsSidebar(true);\r\n                    }}\r\n                    style={{\r\n                        padding: '0.4rem 0.8rem',\r\n                        display: 'flex',\r\n                        flexDirection: 'column',\r\n                        justifyContent: 'center',\r\n                        gap: '2px',\r\n                        cursor: 'pointer'\r\n                    }}\r\n                >\r\n                    <span style={{\r\n                        color: '#7FFFD4',\r\n                        fontWeight: '700',\r\n                        fontSize: '0.9rem',\r\n                        fontFamily: '\"Rajdhani\", monospace',\r\n                        letterSpacing: '1px',\r\n                        textTransform: 'uppercase',\r\n                        lineHeight: 1\r\n                    }}>\r\n                        {renderCosmicUsername(post.username || post.authorName || 'ANONYMOUS')}\r\n                    </span>\r\n                </div>\r\n            </div>\r\n\r\n            {/* DETAILS SIDEBAR */}\r\n            <PostDetailsSidebar\r\n                isVisible={showDetailsSidebar}\r\n                onClose={() => setShowDetailsSidebar(false)}\r\n                post={post}\r\n                items={items}\r\n                currentSlide={currentSlide}\r\n            />\r\n\r\n\r\n            {/* Like Button & Slide Counter */}\r\n            <div className=\"post-actions-container\">\r\n                {items.length > 1 && !useFilmStripMode && (\r\n                    <div style={{\r\n                        color: 'rgba(255, 255, 255, 0.85)',\r\n                        fontSize: '1rem',\r\n                        fontWeight: '600',\r\n                        fontFamily: '\"Rajdhani\", \"SF Mono\", \"Monaco\", monospace',\r\n                        letterSpacing: '1px',\r\n                        textShadow: '0 2px 8px rgba(0, 0, 0, 0.8)',\r\n                        fontVariantNumeric: 'tabular-nums'\r\n                    }}>\r\n                        {currentSlide + 1}/{items.length}\r\n                    </div>\r\n                )}\r\n                <LikeButton postId={post.id} />\r\n            </div>\r\n\r\n        </div >\r\n    );\r\n};\r\n\r\nexport default React.memo(Post, (prevProps, nextProps) => {\r\n    // Custom comparison to prevent unnecessary re-renders\r\n    return prevProps.post.id === nextProps.post.id &&\r\n        prevProps.priority === nextProps.priority;\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\PostDetailsSidebar.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { db } from '@/firebase';\r\nimport { doc, deleteDoc, collection, query, where, limit, getDocs } from 'firebase/firestore';\r\nimport { FaCamera, FaInfoCircle, FaShoppingBag } from 'react-icons/fa';\r\nimport { logger } from '@/core/utils/logger';\r\nimport { renderCosmicUsername } from '@/utils/usernameRenderer';\r\nimport { formatExifForDisplay } from '@/core/utils/exif';\r\nimport FollowButton from './FollowButton';\r\n\r\nconst PostDetailsSidebar = ({\r\n    isVisible,\r\n    onClose,\r\n    post,\r\n    items = [],\r\n    currentSlide = 0\r\n}) => {\r\n    const navigate = useNavigate();\r\n    const { currentUser } = useAuth();\r\n    const [shopLinkTarget, setShopLinkTarget] = useState(null);\r\n\r\n    // Check for linked shop item or general shop existence\r\n    useEffect(() => {\r\n        if (isVisible && post) {\r\n            const checkShopStatus = async () => {\r\n                const authorId = post.userId || post.authorId || post.uid;\r\n                if (!authorId) return;\r\n\r\n                try {\r\n                    const shopItemsRef = collection(db, 'shopItems');\r\n\r\n                    // 1. Check if THIS post is listed\r\n                    const checks = [post.id];\r\n                    if (post.spaceCardId) checks.push(post.spaceCardId);\r\n\r\n                    const specificItemQuery = query(\r\n                        shopItemsRef,\r\n                        where('ownerId', '==', authorId),\r\n                        where('sourcePostId', 'in', checks),\r\n                        where('status', '==', 'active'),\r\n                        limit(1)\r\n                    );\r\n                    const specificSnapshot = await getDocs(specificItemQuery);\r\n\r\n                    if (!specificSnapshot.empty) {\r\n                        setShopLinkTarget({ type: 'item', id: specificSnapshot.docs[0].id });\r\n                        return;\r\n                    }\r\n\r\n                    // 2. Fallback: Check if user has ANY active shop items\r\n                    const generalQuery = query(\r\n                        shopItemsRef,\r\n                        where('ownerId', '==', authorId),\r\n                        where('status', '==', 'active'),\r\n                        limit(1)\r\n                    );\r\n                    const generalSnapshot = await getDocs(generalQuery);\r\n\r\n                    if (!generalSnapshot.empty) {\r\n                        setShopLinkTarget({ type: 'profile', id: authorId });\r\n                    } else {\r\n                        setShopLinkTarget(null);\r\n                    }\r\n                } catch (error) {\r\n                    logger.error(\"Error checking shop status:\", error);\r\n                }\r\n            };\r\n            checkShopStatus();\r\n        }\r\n    }, [isVisible, post]);\r\n\r\n    const handleEditPost = () => {\r\n        navigate(`/edit-post/${post.id}`);\r\n    };\r\n\r\n    const handleReportPost = () => {\r\n        alert(\"Report feature coming soon\");\r\n    };\r\n\r\n    const handleBlockUser = async () => {\r\n        if (window.confirm(`Block ${post.username || 'user'}?`)) {\r\n            alert(\"User blocked\");\r\n        }\r\n    };\r\n\r\n    const handleCopyLink = () => {\r\n        navigator.clipboard.writeText(`${window.location.origin}/post/${post.id}`);\r\n        alert(\"Link copied\");\r\n    };\r\n\r\n    const handleTagClick = (tag, e) => {\r\n        e.stopPropagation();\r\n        navigate(`/search?tags=${tag}`);\r\n    };\r\n\r\n    if (!isVisible || !post) return null;\r\n\r\n    return (\r\n        <>\r\n            <div\r\n                onClick={(e) => e.stopPropagation()}\r\n                style={{\r\n                    position: 'fixed',\r\n                    top: 0,\r\n                    left: 0,\r\n                    bottom: 0,\r\n                    width: '300px',\r\n                    maxWidth: '80vw',\r\n                    background: 'rgba(10, 10, 10, 0.95)',\r\n                    backdropFilter: 'blur(15px)',\r\n                    borderRight: '1px solid rgba(255, 255, 255, 0.1)',\r\n                    zIndex: 1000,\r\n                    paddingTop: 'max(1rem, env(safe-area-inset-top))',\r\n                    paddingLeft: 'max(2.8rem, env(safe-area-inset-left))',\r\n                    paddingRight: '1.5rem',\r\n                    paddingBottom: '2rem',\r\n                    display: 'flex',\r\n                    flexDirection: 'column',\r\n                    gap: '1.5rem',\r\n                    overflowY: 'auto',\r\n                    animation: 'slideInLeft 0.3s cubic-bezier(0.16, 1, 0.3, 1)'\r\n                }}\r\n            >\r\n                <style>{`\r\n                    @keyframes slideInLeft {\r\n                        from { transform: translateX(-100%); opacity: 0; }\r\n                        to { transform: translateX(0); opacity: 1; }\r\n                    }\r\n                `}</style>\r\n\r\n                {/* Header / Close */}\r\n                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginTop: '0.5rem' }}>\r\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '0.8rem' }}>\r\n                        <h3 style={{ margin: 0, marginLeft: '40px', color: '#7FFFD4', fontFamily: '\"Orbitron\", sans-serif', letterSpacing: '2px', lineHeight: 1 }}>POST INFO</h3>\r\n                    </div>\r\n                    <button\r\n                        onClick={onClose}\r\n                        style={{\r\n                            background: 'none',\r\n                            border: 'none',\r\n                            color: '#7FFFD4',\r\n                            cursor: 'pointer',\r\n                            padding: 0,\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            justifyContent: 'center',\r\n                            width: '24px',\r\n                            height: '24px',\r\n                            filter: 'drop-shadow(0 0 6px rgba(127, 255, 212, 0.5))'\r\n                        }}\r\n                    >\r\n                        <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\r\n                            <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line>\r\n                            <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line>\r\n                        </svg>\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Tags */}\r\n                {post.tags && post.tags.length > 0 && (\r\n                    <div>\r\n                        <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', color: '#fff', fontWeight: 'bold', marginBottom: '0.5rem', fontSize: '0.9rem' }}>\r\n                            <FaInfoCircle color=\"#7FFFD4\" size={14} /> TAGS\r\n                        </div>\r\n                        <div style={{ display: 'flex', gap: '0.5rem', flexWrap: 'wrap' }}>\r\n                            {post.tags.map(tag => (\r\n                                <span\r\n                                    key={tag}\r\n                                    onClick={(e) => handleTagClick(tag, e)}\r\n                                    style={{\r\n                                        background: 'rgba(127, 255, 212, 0.1)',\r\n                                        border: '1px solid rgba(127, 255, 212, 0.3)',\r\n                                        padding: '4px 10px',\r\n                                        borderRadius: '4px',\r\n                                        fontSize: '0.75rem',\r\n                                        color: '#7FFFD4',\r\n                                        cursor: 'pointer',\r\n                                        display: 'flex',\r\n                                        alignItems: 'center',\r\n                                        gap: '2px'\r\n                                    }}\r\n                                >\r\n                                    #{renderCosmicUsername(tag)}\r\n                                </span>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Exif Data */}\r\n                {items[currentSlide]?.exif && (\r\n                    <div>\r\n                        <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', color: '#fff', fontWeight: 'bold', marginBottom: '0.5rem', fontSize: '0.9rem' }}>\r\n                            <FaCamera color=\"#7FFFD4\" size={14} /> SHOT DETAILS\r\n                        </div>\r\n                        <div style={{\r\n                            background: 'rgba(255,255,255,0.03)',\r\n                            padding: '1rem',\r\n                            borderRadius: '8px',\r\n                            fontSize: '0.8rem',\r\n                            color: '#ccc',\r\n                            display: 'flex',\r\n                            flexDirection: 'column',\r\n                            gap: '0.4rem'\r\n                        }}>\r\n                            {formatExifForDisplay(items[currentSlide].exif)?.camera && <div><strong style={{ color: '#fff' }}>Camera:</strong> {formatExifForDisplay(items[currentSlide].exif).camera}</div>}\r\n                            {formatExifForDisplay(items[currentSlide].exif)?.lens && <div><strong style={{ color: '#fff' }}>Lens:</strong> {formatExifForDisplay(items[currentSlide].exif).lens}</div>}\r\n                            <div style={{ display: 'flex', gap: '0.5rem', flexWrap: 'wrap', marginTop: '0.2rem' }}>\r\n                                {formatExifForDisplay(items[currentSlide].exif)?.specs.map((spec, i) => (\r\n                                    <span key={i} style={{ background: '#000', padding: '2px 6px', borderRadius: '4px', fontSize: '0.7rem' }}>{spec}</span>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Post Options */}\r\n                <div style={{ marginTop: 'auto', paddingTop: '2rem', borderTop: '1px solid rgba(255,255,255,0.1)', display: 'flex', flexDirection: 'column', gap: '0.5rem' }}>\r\n\r\n                    {/* Shop Link */}\r\n                    {(shopLinkTarget || currentUser?.uid === (post.userId || post.authorId || post.uid)) && (\r\n                        <button\r\n                            onClick={() => {\r\n                                if (shopLinkTarget?.type === 'item') {\r\n                                    navigate(`/shop/${shopLinkTarget.id}`);\r\n                                } else {\r\n                                    const targetId = post.userId || post.authorId || post.uid;\r\n                                    navigate(`/profile/${targetId}?tab=shop`);\r\n                                }\r\n                            }}\r\n                            style={{\r\n                                padding: '0.8rem',\r\n                                background: 'rgba(127, 255, 212, 0.1)',\r\n                                border: '1px solid #7FFFD4',\r\n                                borderRadius: '4px',\r\n                                color: '#7FFFD4',\r\n                                cursor: 'pointer',\r\n                                textAlign: 'center',\r\n                                marginBottom: '0.5rem',\r\n                                display: 'flex',\r\n                                alignItems: 'center',\r\n                                justifyContent: 'center',\r\n                                gap: '0.5rem',\r\n                                fontWeight: 'bold'\r\n                            }}\r\n                        >\r\n                            <FaShoppingBag />\r\n                            {shopLinkTarget?.type === 'item' ? 'View in Shop' :\r\n                                (currentUser?.uid === (post.userId || post.authorId || post.uid) ? 'My Shop' : 'Visit Shop')}\r\n                        </button>\r\n                    )}\r\n\r\n                    {currentUser?.uid === (post.userId || post.authorId || post.uid) ? (\r\n                        <>\r\n                            <button onClick={handleEditPost} style={{ padding: '0.8rem', background: '#333', border: 'none', borderRadius: '4px', color: '#fff', cursor: 'pointer', textAlign: 'left' }}>\r\n                                Edit Post\r\n                            </button>\r\n                            <button onClick={() => {\r\n                                if (window.confirm(\"Delete this post?\")) {\r\n                                    deleteDoc(doc(db, \"posts\", post.id)).then(() => navigate('/'));\r\n                                }\r\n                            }} style={{ padding: '0.8rem', background: 'rgba(255,0,0,0.2)', border: '1px solid rgba(255,0,0,0.3)', borderRadius: '4px', color: '#ff6b6b', cursor: 'pointer', textAlign: 'left' }}>\r\n                                Delete Post\r\n                            </button>\r\n                        </>\r\n                    ) : (\r\n                        <>\r\n                            <div style={{ marginBottom: '0.5rem' }}>\r\n                                <FollowButton\r\n                                    targetUserId={post.userId || post.authorId || post.uid}\r\n                                    targetUserName={post.username}\r\n                                    style={{\r\n                                        width: '100%',\r\n                                        justifyContent: 'center',\r\n                                        background: 'transparent',\r\n                                        border: '1px solid #7FFFD4',\r\n                                        color: '#7FFFD4',\r\n                                        padding: '0.8rem',\r\n                                        borderRadius: '4px'\r\n                                    }}\r\n                                />\r\n                            </div>\r\n                            <button onClick={handleReportPost} style={{ padding: '0.8rem', background: 'transparent', border: '1px solid #444', borderRadius: '4px', color: '#ccc', cursor: 'pointer', textAlign: 'left' }}>\r\n                                Report Post\r\n                            </button>\r\n                            <button onClick={handleBlockUser} style={{ padding: '0.8rem', background: 'transparent', border: '1px solid #444', borderRadius: '4px', color: '#ccc', cursor: 'pointer', textAlign: 'left' }}>\r\n                                Block User\r\n                            </button>\r\n                        </>\r\n                    )}\r\n                    <button onClick={handleCopyLink} style={{ padding: '0.8rem', background: 'transparent', border: '1px solid #444', borderRadius: '4px', color: '#7FFFD4', cursor: 'pointer', textAlign: 'left' }}>\r\n                        Copy Link\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Backdrop */}\r\n            <div\r\n                onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    onClose();\r\n                }}\r\n                style={{\r\n                    position: 'fixed',\r\n                    inset: 0,\r\n                    background: 'rgba(0,0,0,0.6)',\r\n                    zIndex: 999,\r\n                    backdropFilter: 'blur(2px)'\r\n                }}\r\n            />\r\n        </>\r\n    );\r\n};\r\n\r\nexport default PostDetailsSidebar;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\ProjectCard.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { FaUsers, FaImage, FaHeart } from 'react-icons/fa';\r\n\r\nconst ProjectCard = ({ project, studioId }) => {\r\n    const navigate = useNavigate();\r\n\r\n    return (\r\n        <div\r\n            onClick={() => navigate(`/project/${studioId}/${project.id}`)}\r\n            style={{\r\n                background: '#111',\r\n                border: '1px solid #222',\r\n                borderRadius: '12px',\r\n                overflow: 'hidden',\r\n                cursor: 'pointer',\r\n                transition: 'all 0.2s',\r\n                position: 'relative'\r\n            }}\r\n            onMouseEnter={e => {\r\n                e.currentTarget.style.borderColor = '#7FFFD4';\r\n                e.currentTarget.style.transform = 'translateY(-4px)';\r\n            }}\r\n            onMouseLeave={e => {\r\n                e.currentTarget.style.borderColor = '#222';\r\n                e.currentTarget.style.transform = 'translateY(0)';\r\n            }}\r\n        >\r\n            {/* Temporary Badge */}\r\n            {project.isTemporary && (\r\n                <div style={{\r\n                    position: 'absolute',\r\n                    top: '0.75rem',\r\n                    right: '0.75rem',\r\n                    padding: '0.25rem 0.75rem',\r\n                    background: 'rgba(255, 165, 0, 0.9)',\r\n                    borderRadius: '20px',\r\n                    fontSize: '0.75rem',\r\n                    fontWeight: 'bold',\r\n                    color: '#000',\r\n                    zIndex: 1\r\n                }}>\r\n                    Temporary\r\n                </div>\r\n            )}\r\n\r\n            {/* Content */}\r\n            <div style={{ padding: '1.5rem' }}>\r\n                <h3 style={{\r\n                    margin: '0 0 0.5rem 0',\r\n                    fontSize: '1.25rem',\r\n                    color: '#fff'\r\n                }}>\r\n                    {project.title}\r\n                </h3>\r\n\r\n                {project.description && (\r\n                    <p style={{\r\n                        margin: '0 0 1rem 0',\r\n                        color: '#888',\r\n                        fontSize: '0.9rem',\r\n                        lineHeight: '1.5',\r\n                        display: '-webkit-box',\r\n                        WebkitLineClamp: 2,\r\n                        WebkitBoxOrient: 'vertical',\r\n                        overflow: 'hidden'\r\n                    }}>\r\n                        {project.description}\r\n                    </p>\r\n                )}\r\n\r\n                {/* Stats */}\r\n                <div style={{\r\n                    display: 'flex',\r\n                    gap: '1rem',\r\n                    fontSize: '0.85rem',\r\n                    color: '#666',\r\n                    marginTop: '1rem'\r\n                }}>\r\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                        <FaUsers />\r\n                        <span>{project.contributors?.length || 0}</span>\r\n                    </div>\r\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                        <FaImage />\r\n                        <span>{project.postsCount || 0}</span>\r\n                    </div>\r\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                        <FaHeart />\r\n                        <span>{project.followersCount || 0}</span>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Contributors Preview */}\r\n                {project.contributors && project.contributors.length > 0 && (\r\n                    <div style={{\r\n                        marginTop: '1rem',\r\n                        paddingTop: '1rem',\r\n                        borderTop: '1px solid #222'\r\n                    }}>\r\n                        <div style={{ fontSize: '0.75rem', color: '#666', marginBottom: '0.5rem' }}>\r\n                            Contributors\r\n                        </div>\r\n                        <div style={{ display: 'flex', flexWrap: 'wrap', gap: '0.5rem' }}>\r\n                            {project.contributors.slice(0, 3).map((contributor, index) => (\r\n                                <div key={index} style={{\r\n                                    padding: '0.25rem 0.75rem',\r\n                                    background: 'rgba(127, 255, 212, 0.1)',\r\n                                    border: '1px solid rgba(127, 255, 212, 0.2)',\r\n                                    borderRadius: '20px',\r\n                                    fontSize: '0.75rem',\r\n                                    color: '#7FFFD4'\r\n                                }}>\r\n                                    {contributor.displayName}\r\n                                </div>\r\n                            ))}\r\n                            {project.contributors.length > 3 && (\r\n                                <div style={{\r\n                                    padding: '0.25rem 0.75rem',\r\n                                    background: '#222',\r\n                                    borderRadius: '20px',\r\n                                    fontSize: '0.75rem',\r\n                                    color: '#666'\r\n                                }}>\r\n                                    +{project.contributors.length - 3} more\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ProjectCard;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\PublishShopItemModal.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { FaTimes, FaExclamationTriangle, FaCheck } from 'react-icons/fa';\r\n\r\n/**\r\n * PublishShopItemModal - Copyright confirmation modal for publishing shop items\r\n * \r\n * Shows legal disclaimer and requires explicit confirmation before publishing\r\n */\r\nconst PublishShopItemModal = ({ isOpen, itemTitle, onConfirm, onCancel }) => {\r\n    const [confirmed, setConfirmed] = useState(false);\r\n    const [isPublishing, setIsPublishing] = useState(false);\r\n\r\n    const handlePublish = async () => {\r\n        if (!confirmed) return;\r\n\r\n        setIsPublishing(true);\r\n        try {\r\n            await onConfirm();\r\n        } finally {\r\n            setIsPublishing(false);\r\n            setConfirmed(false);\r\n        }\r\n    };\r\n\r\n    if (!isOpen) return null;\r\n\r\n    return (\r\n        <div style={{\r\n            position: 'fixed',\r\n            top: 0,\r\n            left: 0,\r\n            right: 0,\r\n            bottom: 0,\r\n            background: 'rgba(0, 0, 0, 0.9)',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            zIndex: 2000,\r\n            padding: '1rem'\r\n        }}>\r\n            <div style={{\r\n                background: '#111',\r\n                borderRadius: '12px',\r\n                maxWidth: '500px',\r\n                width: '100%',\r\n                border: '1px solid #333'\r\n            }}>\r\n                {/* Header */}\r\n                <div style={{\r\n                    padding: '1.5rem',\r\n                    borderBottom: '1px solid #333',\r\n                    display: 'flex',\r\n                    justifyContent: 'space-between',\r\n                    alignItems: 'center'\r\n                }}>\r\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '0.75rem' }}>\r\n                        <FaExclamationTriangle style={{ color: '#ffb84d', fontSize: '1.5rem' }} />\r\n                        <h2 style={{ fontSize: '1.25rem', fontWeight: 'bold', color: '#fff', margin: 0 }}>\r\n                            Copyright Confirmation\r\n                        </h2>\r\n                    </div>\r\n                    <button\r\n                        onClick={onCancel}\r\n                        style={{\r\n                            background: 'transparent',\r\n                            border: 'none',\r\n                            color: '#888',\r\n                            cursor: 'pointer',\r\n                            fontSize: '1.5rem'\r\n                        }}\r\n                    >\r\n                        <FaTimes />\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Content */}\r\n                <div style={{ padding: '1.5rem' }}>\r\n                    {itemTitle && (\r\n                        <div style={{\r\n                            marginBottom: '1.5rem',\r\n                            padding: '0.75rem',\r\n                            background: 'rgba(127, 255, 212, 0.05)',\r\n                            border: '1px solid rgba(127, 255, 212, 0.2)',\r\n                            borderRadius: '8px'\r\n                        }}>\r\n                            <div style={{ fontSize: '0.85rem', color: '#888', marginBottom: '0.25rem' }}>\r\n                                Publishing:\r\n                            </div>\r\n                            <div style={{ color: '#7FFFD4', fontWeight: '600' }}>\r\n                                {itemTitle}\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n\r\n                    <div style={{\r\n                        padding: '1.25rem',\r\n                        background: 'rgba(255, 165, 0, 0.1)',\r\n                        border: '1px solid rgba(255, 165, 0, 0.3)',\r\n                        borderRadius: '8px',\r\n                        marginBottom: '1.5rem'\r\n                    }}>\r\n                        <p style={{ color: '#ffb84d', lineHeight: '1.6', margin: '0 0 1rem 0' }}>\r\n                            By publishing this item to your shop, you certify that:\r\n                        </p>\r\n                        <ul style={{ color: '#ccc', lineHeight: '1.8', margin: 0, paddingLeft: '1.5rem' }}>\r\n                            <li>You own all rights to this content</li>\r\n                            <li>This content does not infringe on any copyrights, trademarks, or intellectual property</li>\r\n                            <li>You have the legal right to sell this content</li>\r\n                            <li>You accept full responsibility for any copyright claims or legal issues</li>\r\n                        </ul>\r\n                    </div>\r\n\r\n                    {/* Confirmation Checkbox */}\r\n                    <label style={{\r\n                        display: 'flex',\r\n                        alignItems: 'flex-start',\r\n                        gap: '0.75rem',\r\n                        cursor: 'pointer',\r\n                        padding: '1rem',\r\n                        background: '#222',\r\n                        borderRadius: '8px',\r\n                        border: confirmed ? '1px solid #7FFFD4' : '1px solid #333',\r\n                        marginBottom: '1.5rem',\r\n                        transition: 'all 0.2s'\r\n                    }}>\r\n                        <input\r\n                            type=\"checkbox\"\r\n                            checked={confirmed}\r\n                            onChange={(e) => setConfirmed(e.target.checked)}\r\n                            style={{\r\n                                width: '20px',\r\n                                height: '20px',\r\n                                cursor: 'pointer',\r\n                                marginTop: '2px'\r\n                            }}\r\n                        />\r\n                        <div>\r\n                            <div style={{ color: '#fff', fontWeight: '600', marginBottom: '0.25rem' }}>\r\n                                I certify the above statements are true\r\n                            </div>\r\n                            <div style={{ color: '#888', fontSize: '0.85rem' }}>\r\n                                False certification may result in account suspension and legal action\r\n                            </div>\r\n                        </div>\r\n                    </label>\r\n\r\n                    {/* Actions */}\r\n                    <div style={{ display: 'flex', gap: '1rem', justifyContent: 'flex-end' }}>\r\n                        <button\r\n                            onClick={onCancel}\r\n                            disabled={isPublishing}\r\n                            style={{\r\n                                padding: '0.75rem 1.5rem',\r\n                                background: '#333',\r\n                                border: 'none',\r\n                                borderRadius: '8px',\r\n                                color: '#fff',\r\n                                cursor: isPublishing ? 'not-allowed' : 'pointer',\r\n                                fontWeight: '600',\r\n                                opacity: isPublishing ? 0.5 : 1\r\n                            }}\r\n                        >\r\n                            Cancel\r\n                        </button>\r\n                        <button\r\n                            onClick={handlePublish}\r\n                            disabled={!confirmed || isPublishing}\r\n                            style={{\r\n                                padding: '0.75rem 1.5rem',\r\n                                background: confirmed ? '#7FFFD4' : '#444',\r\n                                border: 'none',\r\n                                borderRadius: '8px',\r\n                                color: confirmed ? '#000' : '#666',\r\n                                cursor: (!confirmed || isPublishing) ? 'not-allowed' : 'pointer',\r\n                                fontWeight: 'bold',\r\n                                opacity: isPublishing ? 0.5 : 1,\r\n                                display: 'flex',\r\n                                alignItems: 'center',\r\n                                gap: '0.5rem'\r\n                            }}\r\n                        >\r\n                            {isPublishing ? (\r\n                                <>Publishing...</>\r\n                            ) : (\r\n                                <>\r\n                                    <FaCheck /> Publish Item\r\n                                </>\r\n                            )}\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default PublishShopItemModal;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\ReportModal.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"react-hooks/rules-of-hooks","severity":1,"message":"React Hook \"useAuth\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":9,"column":29,"nodeType":"Identifier","endLine":9,"endColumn":36},{"ruleId":"react-hooks/rules-of-hooks","severity":1,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":10,"column":53,"nodeType":"Identifier","endLine":10,"endColumn":61},{"ruleId":"react-hooks/rules-of-hooks","severity":1,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":11,"column":49,"nodeType":"Identifier","endLine":11,"endColumn":57},{"ruleId":"react-hooks/rules-of-hooks","severity":1,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":12,"column":33,"nodeType":"Identifier","endLine":12,"endColumn":41},{"ruleId":"react-hooks/rules-of-hooks","severity":1,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":13,"column":41,"nodeType":"Identifier","endLine":13,"endColumn":49},{"ruleId":"react-hooks/rules-of-hooks","severity":1,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":14,"column":39,"nodeType":"Identifier","endLine":14,"endColumn":47}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { FaTimes, FaFlag, FaExclamationTriangle } from 'react-icons/fa';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { ModerationService } from '@/services/ModerationService';\r\nimport { REPORT_CATEGORIES, REPORT_REASONS } from '@/core/constants/moderationConstants';\r\n\r\nconst ReportModal = ({ isOpen, targetType, targetId, targetTitle, onClose }) => {\r\n    if (!isOpen) return null;\r\n    const { currentUser } = useAuth();\r\n    const [selectedCategory, setSelectedCategory] = useState('');\r\n    const [selectedReason, setSelectedReason] = useState('');\r\n    const [detail, setDetail] = useState('');\r\n    const [submitting, setSubmitting] = useState(false);\r\n    const [submitted, setSubmitted] = useState(false);\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n\r\n        if (!selectedCategory || !selectedReason) {\r\n            alert('Please select a category and reason');\r\n            return;\r\n        }\r\n\r\n        setSubmitting(true);\r\n        try {\r\n            await ModerationService.reportContent(targetType, targetId, {\r\n                reporterUid: currentUser.uid,\r\n                reporterName: currentUser.displayName || currentUser.email,\r\n                category: selectedCategory,\r\n                reason: selectedReason,\r\n                detail\r\n            });\r\n\r\n            // Update moderation flags\r\n            await ModerationService.checkReportThresholds(targetType, targetId);\r\n\r\n            setSubmitted(true);\r\n            setTimeout(() => {\r\n                onClose();\r\n            }, 2000);\r\n        } catch (error) {\r\n            console.error('Error submitting report:', error);\r\n            alert(error.message || 'Failed to submit report');\r\n        } finally {\r\n            setSubmitting(false);\r\n        }\r\n    };\r\n\r\n    const categories = [\r\n        { id: REPORT_CATEGORIES.SAFETY, label: 'Safety & Content', icon: 'ΓÜá∩╕Å' },\r\n        { id: REPORT_CATEGORIES.ART_INTEGRITY, label: 'Art Integrity', icon: '≡ƒÄ¿' },\r\n        { id: REPORT_CATEGORIES.TAG_MISUSE, label: 'Tag Misuse', icon: '≡ƒÅ╖∩╕Å' },\r\n        { id: REPORT_CATEGORIES.MARKETPLACE_FRAUD, label: 'Marketplace Fraud', icon: '≡ƒÆ░' }\r\n    ];\r\n\r\n    if (submitted) {\r\n        return (\r\n            <div style={{\r\n                position: 'fixed',\r\n                inset: 0,\r\n                background: 'rgba(0,0,0,0.9)',\r\n                backdropFilter: 'blur(10px)',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'center',\r\n                zIndex: 2000,\r\n                padding: '1rem'\r\n            }}>\r\n                <div style={{\r\n                    background: '#1a1a1a',\r\n                    border: '1px solid #7FFFD4',\r\n                    borderRadius: '16px',\r\n                    padding: '3rem',\r\n                    textAlign: 'center',\r\n                    maxWidth: '400px'\r\n                }}>\r\n                    <div style={{ fontSize: '3rem', marginBottom: '1rem' }}>Γ£ô</div>\r\n                    <h3 style={{ margin: '0 0 0.5rem 0', color: '#7FFFD4' }}>Report Submitted</h3>\r\n                    <p style={{ color: '#888', margin: 0 }}>Thank you for helping keep PanoSpace safe</p>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div style={{\r\n            position: 'fixed',\r\n            inset: 0,\r\n            background: 'rgba(0,0,0,0.9)',\r\n            backdropFilter: 'blur(10px)',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            zIndex: 2000,\r\n            padding: '1rem'\r\n        }}>\r\n            <div style={{\r\n                background: '#1a1a1a',\r\n                border: '1px solid #333',\r\n                borderRadius: '16px',\r\n                width: '100%',\r\n                maxWidth: '500px',\r\n                maxHeight: '90vh',\r\n                display: 'flex',\r\n                flexDirection: 'column',\r\n                overflow: 'hidden'\r\n            }}>\r\n                {/* Header */}\r\n                <div style={{\r\n                    padding: '1.5rem',\r\n                    borderBottom: '1px solid #333',\r\n                    display: 'flex',\r\n                    justifyContent: 'space-between',\r\n                    alignItems: 'center'\r\n                }}>\r\n                    <h2 style={{ margin: 0, fontSize: '1.5rem', display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                        <FaFlag color=\"#ff6b6b\" /> Report Content\r\n                    </h2>\r\n                    <button onClick={onClose} style={{\r\n                        background: 'transparent',\r\n                        border: 'none',\r\n                        color: '#888',\r\n                        cursor: 'pointer',\r\n                        fontSize: '1.5rem'\r\n                    }}>\r\n                        <FaTimes />\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Content */}\r\n                <form onSubmit={handleSubmit} style={{ flex: 1, overflowY: 'auto', padding: '1.5rem', display: 'flex', flexDirection: 'column', gap: '1.5rem' }}>\r\n                    {targetTitle && (\r\n                        <div style={{\r\n                            padding: '1rem',\r\n                            background: '#222',\r\n                            borderRadius: '8px',\r\n                            fontSize: '0.9rem',\r\n                            color: '#888'\r\n                        }}>\r\n                            Reporting: <strong style={{ color: '#fff' }}>{targetTitle}</strong>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Category Selection */}\r\n                    <div>\r\n                        <label style={{ display: 'block', marginBottom: '0.75rem', fontWeight: '600' }}>\r\n                            Why are you reporting this?\r\n                        </label>\r\n                        <div style={{ display: 'grid', gap: '0.75rem' }}>\r\n                            {categories.map(cat => (\r\n                                <button\r\n                                    key={cat.id}\r\n                                    type=\"button\"\r\n                                    onClick={() => {\r\n                                        setSelectedCategory(cat.id);\r\n                                        setSelectedReason('');\r\n                                    }}\r\n                                    style={{\r\n                                        padding: '1rem',\r\n                                        background: selectedCategory === cat.id ? 'rgba(127, 255, 212, 0.1)' : '#222',\r\n                                        border: selectedCategory === cat.id ? '2px solid #7FFFD4' : '1px solid #333',\r\n                                        borderRadius: '8px',\r\n                                        color: '#fff',\r\n                                        cursor: 'pointer',\r\n                                        textAlign: 'left',\r\n                                        display: 'flex',\r\n                                        alignItems: 'center',\r\n                                        gap: '0.75rem',\r\n                                        fontSize: '1rem',\r\n                                        fontWeight: selectedCategory === cat.id ? '600' : '400'\r\n                                    }}\r\n                                >\r\n                                    <span style={{ fontSize: '1.5rem' }}>{cat.icon}</span>\r\n                                    {cat.label}\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Reason Selection */}\r\n                    {selectedCategory && (\r\n                        <div>\r\n                            <label style={{ display: 'block', marginBottom: '0.75rem', fontWeight: '600' }}>\r\n                                Select specific reason\r\n                            </label>\r\n                            <select\r\n                                value={selectedReason}\r\n                                onChange={(e) => setSelectedReason(e.target.value)}\r\n                                required\r\n                                style={{\r\n                                    width: '100%',\r\n                                    padding: '0.75rem',\r\n                                    background: '#222',\r\n                                    border: '1px solid #333',\r\n                                    borderRadius: '8px',\r\n                                    color: '#fff',\r\n                                    fontSize: '1rem'\r\n                                }}\r\n                            >\r\n                                <option value=\"\">Choose a reason...</option>\r\n                                {Object.entries(REPORT_REASONS[selectedCategory]).map(([key, value]) => (\r\n                                    <option key={key} value={key}>{value.label}</option>\r\n                                ))}\r\n                            </select>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Additional Details */}\r\n                    {selectedReason && (\r\n                        <div>\r\n                            <label style={{ display: 'block', marginBottom: '0.75rem', fontWeight: '600' }}>\r\n                                Additional details (optional)\r\n                            </label>\r\n                            <textarea\r\n                                value={detail}\r\n                                onChange={(e) => setDetail(e.target.value)}\r\n                                placeholder=\"Provide any additional context...\"\r\n                                rows={4}\r\n                                style={{\r\n                                    width: '100%',\r\n                                    padding: '0.75rem',\r\n                                    background: '#222',\r\n                                    border: '1px solid #333',\r\n                                    borderRadius: '8px',\r\n                                    color: '#fff',\r\n                                    fontSize: '1rem',\r\n                                    resize: 'vertical'\r\n                                }}\r\n                            />\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Warning */}\r\n                    <div style={{\r\n                        padding: '1rem',\r\n                        background: 'rgba(255, 107, 107, 0.1)',\r\n                        border: '1px solid rgba(255, 107, 107, 0.3)',\r\n                        borderRadius: '8px',\r\n                        display: 'flex',\r\n                        gap: '0.75rem',\r\n                        fontSize: '0.85rem',\r\n                        color: '#ff6b6b'\r\n                    }}>\r\n                        <FaExclamationTriangle style={{ flexShrink: 0, marginTop: '2px' }} />\r\n                        <div>\r\n                            False reports may result in restrictions on your account. Only report content that violates our guidelines.\r\n                        </div>\r\n                    </div>\r\n                </form>\r\n\r\n                {/* Footer */}\r\n                <div style={{\r\n                    padding: '1.5rem',\r\n                    borderTop: '1px solid #333',\r\n                    display: 'flex',\r\n                    gap: '1rem'\r\n                }}>\r\n                    <button\r\n                        onClick={onClose}\r\n                        type=\"button\"\r\n                        style={{\r\n                            flex: 1,\r\n                            padding: '0.75rem',\r\n                            background: '#333',\r\n                            border: '1px solid #444',\r\n                            borderRadius: '8px',\r\n                            color: '#fff',\r\n                            cursor: 'pointer',\r\n                            fontWeight: '600'\r\n                        }}\r\n                    >\r\n                        Cancel\r\n                    </button>\r\n                    <button\r\n                        onClick={handleSubmit}\r\n                        disabled={!selectedCategory || !selectedReason || submitting}\r\n                        style={{\r\n                            flex: 1,\r\n                            padding: '0.75rem',\r\n                            background: (!selectedCategory || !selectedReason || submitting) ? '#333' : '#ff6b6b',\r\n                            border: 'none',\r\n                            borderRadius: '8px',\r\n                            color: (!selectedCategory || !selectedReason || submitting) ? '#666' : '#fff',\r\n                            cursor: (!selectedCategory || !selectedReason || submitting) ? 'not-allowed' : 'pointer',\r\n                            fontWeight: '600'\r\n                        }}\r\n                    >\r\n                        {submitting ? 'Submitting...' : 'Submit Report'}\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ReportModal;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\SEO.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { Helmet } from 'react-helmet-async';\r\n\r\nconst SEO = ({\r\n    title = 'Panospace',\r\n    description = 'A professional social platform for photographers and visual artists.',\r\n    name = 'Panospace Team',\r\n    type = 'website'\r\n}) => {\r\n    return (\r\n        <Helmet>\r\n            { /* Standard metadata tags */}\r\n            <title>{title} | Panospace</title>\r\n            <meta name='description' content={description} />\r\n\r\n            { /* End standard metadata tags */}\r\n            { /* Facebook tags */}\r\n            <meta property=\"og:type\" content={type} />\r\n            <meta property=\"og:title\" content={title} />\r\n            <meta property=\"og:description\" content={description} />\r\n            { /* End Facebook tags */}\r\n\r\n            { /* Twitter tags */}\r\n            <meta name=\"twitter:creator\" content={name} />\r\n            <meta name=\"twitter:card\" content={type} />\r\n            <meta name=\"twitter:title\" content={title} />\r\n            <meta name=\"twitter:description\" content={description} />\r\n            { /* End Twitter tags */}\r\n        </Helmet>\r\n    );\r\n}\r\n\r\nexport default SEO;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\SearchEmojiPicker.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useRef, useEffect } from 'react';\r\nimport { ALL_PICKER_EMOJIS } from '@/utils/emojiToCodeMap';\r\n\r\nconst SearchEmojiPicker = ({ visible, onSelect, isMobile }) => {\r\n    const scrollContainerRef = useRef(null);\r\n\r\n    // Handle horizontal scroll with wheel on desktop\r\n    useEffect(() => {\r\n        const el = scrollContainerRef.current;\r\n        if (!el) return;\r\n\r\n        const handleWheel = (e) => {\r\n            if (e.deltaY !== 0) {\r\n                e.preventDefault();\r\n                el.scrollLeft += e.deltaY;\r\n            }\r\n        };\r\n\r\n        el.addEventListener('wheel', handleWheel, { passive: false });\r\n        // Clean up\r\n        return () => el.removeEventListener('wheel', handleWheel);\r\n    }, []);\r\n\r\n    if (!visible) return null;\r\n\r\n    return (\r\n        <div\r\n            className=\"search-emoji-picker\"\r\n            style={{\r\n                position: 'absolute',\r\n                top: '100%',\r\n                left: 0,\r\n                right: 0,\r\n                height: '60px',\r\n                background: 'rgba(10, 10, 12, 0.9)',\r\n                backdropFilter: 'blur(15px)',\r\n                WebkitBackdropFilter: 'blur(15px)',\r\n                zIndex: 40, // Below header content (z-50) but presumably above page content\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                padding: '0 1rem',\r\n                borderTop: '1px solid rgba(255,255,255,0.05)',\r\n                borderBottom: '1px solid rgba(127, 255, 212, 0.2)',\r\n                boxShadow: '0 10px 30px rgba(0,0,0,0.8)',\r\n                animation: 'slideDown 0.25s cubic-bezier(0.16, 1, 0.3, 1)',\r\n                overflowX: 'auto',\r\n                scrollbarWidth: 'none',\r\n                msOverflowStyle: 'none',\r\n                WebkitOverflowScrolling: 'touch',\r\n                pointerEvents: 'auto',\r\n            }}\r\n            // Prevent clicks from engaging other elements\r\n            onMouseDown={(e) => e.stopPropagation()}\r\n            onTouchStart={(e) => e.stopPropagation()}\r\n        >\r\n            <style>{`\r\n                .search-emoji-picker::-webkit-scrollbar { display: none; }\r\n                @keyframes slideDown {\r\n                    from { transform: translateY(-10px); opacity: 0; }\r\n                    to { transform: translateY(0); opacity: 1; }\r\n                }\r\n            `}</style>\r\n\r\n            <div\r\n                ref={scrollContainerRef}\r\n                style={{\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    gap: isMobile ? '12px' : '16px',\r\n                    height: '100%',\r\n                    paddingRight: '1rem', // Safety padding\r\n                    minWidth: 'min-content'\r\n                }}\r\n            >\r\n                {ALL_PICKER_EMOJIS.map((emoji) => (\r\n                    <button\r\n                        key={emoji}\r\n                        onClick={(e) => {\r\n                            e.preventDefault();\r\n                            e.stopPropagation();\r\n                            onSelect(emoji);\r\n                        }}\r\n                        // Prevent focus loss when clicking\r\n                        onMouseDown={(e) => e.preventDefault()}\r\n                        style={{\r\n                            background: 'rgba(255, 255, 255, 0.05)',\r\n                            border: '1px solid rgba(255, 255, 255, 0.1)',\r\n                            borderRadius: '12px',\r\n                            minWidth: isMobile ? '44px' : '36px',\r\n                            height: isMobile ? '44px' : '36px',\r\n                            fontSize: isMobile ? '1.5rem' : '1.2rem',\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            justifyContent: 'center',\r\n                            cursor: 'pointer',\r\n                            flexShrink: 0,\r\n                            transition: 'all 0.2s cubic-bezier(0.34, 1.56, 0.64, 1)', // Bouncy\r\n                            color: '#fff',\r\n                            textShadow: '0 0 10px rgba(127, 255, 212, 0.2)',\r\n                            appearance: 'none',\r\n                            WebkitAppearance: 'none',\r\n                            outline: 'none',\r\n                            userSelect: 'none'\r\n                        }}\r\n                        onMouseEnter={(e) => {\r\n                            if (!isMobile) {\r\n                                e.currentTarget.style.background = 'rgba(127, 255, 212, 0.2)';\r\n                                e.currentTarget.style.borderColor = '#7FFFD4';\r\n                                e.currentTarget.style.transform = 'scale(1.15) translateY(-2px)';\r\n                                e.currentTarget.style.boxShadow = '0 5px 15px rgba(127, 255, 212, 0.3)';\r\n                            }\r\n                        }}\r\n                        onMouseLeave={(e) => {\r\n                            if (!isMobile) {\r\n                                e.currentTarget.style.background = 'rgba(255, 255, 255, 0.05)';\r\n                                e.currentTarget.style.borderColor = 'rgba(255, 255, 255, 0.1)';\r\n                                e.currentTarget.style.transform = 'scale(1) translateY(0)';\r\n                                e.currentTarget.style.boxShadow = 'none';\r\n                            }\r\n                        }}\r\n                    >\r\n                        {emoji}\r\n                    </button>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default SearchEmojiPicker;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\SearchPanels.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useEffect' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":36},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'formatDateForDisplay' is defined but never used. Allowed unused vars must match /^_/u.","line":9,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":30},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'formatDateForInput' is defined but never used. Allowed unused vars must match /^_/u.","line":9,"column":32,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":50},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaFilter' is defined but never used. Allowed unused vars must match /^_/u.","line":10,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaCalendar' is defined but never used. Allowed unused vars must match /^_/u.","line":10,"column":49,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":59},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaFilm' is defined but never used. Allowed unused vars must match /^_/u.","line":10,"column":79,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":85},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'resultsCount' is defined but never used. Allowed unused args must match /^_/u.","line":30,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":30,"endColumn":17}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef } from 'react';\r\nimport StarBackground from './StarBackground';\r\nimport TagFilterPanel from './TagFilterPanel';\r\nimport ModernIcon from './ModernIcon';\r\nimport CustomDropdown from './CustomDropdown';\r\nimport { TAG_CATEGORIES } from '@/core/constants/tagCategories';\r\nimport { PARKS_DATA } from '@/core/constants/parksData';\r\nimport { CAMERA_MODELS, FILM_STOCKS, ASPECT_RATIOS, ORIENTATIONS } from '@/core/constants/searchFilters';\r\nimport { formatDateForDisplay, formatDateForInput } from '@/core/utils/dates';\r\nimport { FaFilter, FaTimes, FaMountain, FaTree, FaCalendar, FaCamera, FaCrop, FaFilm, FaChevronDown, FaChevronUp } from 'react-icons/fa';\r\nimport CurrentAppEventsBox from '@/components/search/CurrentAppEventsBox';\r\nimport PanoDateInput from '@/components/common/PanoDateInput';\r\n\r\nconst SearchPanels = ({\r\n    selectedTags,\r\n    onTagToggle,\r\n    selectedPark,\r\n    onParkSelect,\r\n    selectedDate,\r\n    onDateSelect,\r\n    selectedCamera,\r\n    onCameraSelect,\r\n    selectedFilm,\r\n    onFilmSelect,\r\n    selectedOrientation,\r\n    onOrientationSelect,\r\n    selectedAspectRatio,\r\n    onAspectRatioSelect,\r\n    onClearAll,\r\n    resultsCount,\r\n    currentMode = 'posts',\r\n    isMobileFiltersOpen,\r\n    onMobileFilterToggle,\r\n    onScroll,\r\n    children\r\n}) => {\r\n    const [expandedPanels, setExpandedPanels] = useState({\r\n        date: true,\r\n        parks: false,\r\n        gear: false,\r\n        composition: false,\r\n        art_types: true,\r\n        environment: true,\r\n        color: true,\r\n        aesthetics: true,\r\n        location: true,\r\n        objects: true,\r\n        technique: true,\r\n        portraits: true,\r\n        animals: true,\r\n        time: true\r\n    });\r\n\r\n    const [parkType, setParkType] = useState('national'); // Track national vs state parks\r\n    const sidebarRef = useRef(null);\r\n\r\n\r\n\r\n    const togglePanel = (panelId) => {\r\n        setExpandedPanels(prev => ({\r\n            ...prev,\r\n            [panelId]: !prev[panelId]\r\n        }));\r\n    };\r\n\r\n    // Close mobile filters when results change (optional UX choice, keeping open for now allows multi-select)\r\n\r\n    return (\r\n        <div className=\"search-panels-layout\" style={{\r\n            display: 'flex',\r\n            height: 'calc(100vh - 60px)', // Adjust based on header height\r\n            overflow: 'hidden',\r\n            position: 'relative'\r\n        }}>\r\n            {/* Desktop Sidebar / Mobile Drawer */}\r\n            <aside\r\n                ref={sidebarRef}\r\n                className={`filters-sidebar ${isMobileFiltersOpen ? 'mobile-open' : ''}`}\r\n                style={{\r\n                    width: '320px',\r\n                    background: '#000',\r\n                    border: '1px solid #7FFFD4',\r\n                    boxShadow: '0 0 20px rgba(127, 255, 212, 0.3), 10px 0 40px rgba(0, 0, 0, 0.6)',\r\n                    display: 'flex',\r\n                    flexDirection: 'column',\r\n                    flexShrink: 0,\r\n                    transition: 'transform 0.3s cubic-bezier(0.4, 0, 0.2, 1)',\r\n                    zIndex: 100,\r\n                    position: 'relative',\r\n                    overflow: 'hidden'\r\n                }}\r\n            >\r\n                {/* Animated Stars Background */}\r\n                <StarBackground />\r\n\r\n                {/* Distant Galaxy Effect */}\r\n                <div style={{\r\n                    position: 'absolute',\r\n                    top: '30%',\r\n                    left: '50%',\r\n                    transform: 'translate(-50%, -50%)',\r\n                    width: '400px',\r\n                    height: '400px',\r\n                    background: 'radial-gradient(ellipse at center, rgba(127, 255, 212, 0.08) 0%, rgba(76, 201, 240, 0.05) 30%, transparent 70%)',\r\n                    filter: 'blur(40px)',\r\n                    opacity: 0.6,\r\n                    pointerEvents: 'none',\r\n                    zIndex: 0,\r\n                    animation: 'galaxyRotate 20s linear infinite'\r\n                }}>\r\n                    <div style={{\r\n                        position: 'absolute',\r\n                        top: '50%',\r\n                        left: '50%',\r\n                        transform: 'translate(-50%, -50%) rotate(45deg)',\r\n                        width: '300px',\r\n                        height: '100px',\r\n                        background: 'radial-gradient(ellipse at center, rgba(127, 255, 212, 0.1) 0%, transparent 70%)',\r\n                        filter: 'blur(30px)'\r\n                    }}></div>\r\n                </div>\r\n\r\n                <style>{`\r\n                    @keyframes twinkle {\r\n                        0%, 100% { opacity: 0.2; }\r\n                        50% { opacity: 0.6; }\r\n                    }\r\n                    @keyframes galaxyRotate {\r\n                        from { transform: translate(-50%, -50%) rotate(0deg); }\r\n                        to { transform: translate(-50%, -50%) rotate(360deg); }\r\n                    }\r\n                `}</style>\r\n                <div className=\"filters-header\" style={{\r\n                    padding: 'max(1rem, env(safe-area-inset-top)) 1.5rem 1rem 1.5rem',\r\n                    borderBottom: '1px solid rgba(255, 255, 255, 0.1)',\r\n                    display: 'flex',\r\n                    justifyContent: 'space-between',\r\n                    alignItems: 'center'\r\n                }}>\r\n                    <h2\r\n                        onClick={() => {\r\n                            // Tapping the title closes the panel on mobile\r\n                            if (isMobileFiltersOpen) {\r\n                                onMobileFilterToggle(false);\r\n                            }\r\n                        }}\r\n                        style={{\r\n                            fontSize: '1.2rem',\r\n                            fontWeight: 800,\r\n                            margin: 0,\r\n                            fontFamily: 'var(--font-family-heading)',\r\n                            letterSpacing: '0.1em',\r\n                            textTransform: 'uppercase',\r\n                            background: 'linear-gradient(135deg, #ffffff 0%, #7FFFD4 100%)',\r\n                            WebkitBackgroundClip: 'text',\r\n                            WebkitTextFillColor: 'transparent',\r\n                            backgroundClip: 'text',\r\n                            color: 'transparent',\r\n                            filter: 'drop-shadow(0 0 8px rgba(127, 255, 212, 0.3))',\r\n                            cursor: 'pointer',\r\n                            userSelect: 'none',\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            gap: '0.5rem'\r\n                        }}\r\n                    >\r\n                        <span style={{ fontSize: '1rem', opacity: 0.8 }}>ΓåÉ</span>\r\n                        Filters\r\n                    </h2>\r\n                    {(selectedTags.length > 0 || selectedPark || selectedDate || selectedCamera || selectedFilm || selectedOrientation || selectedAspectRatio) && (\r\n                        <button\r\n                            onClick={onClearAll}\r\n                            style={{\r\n                                background: 'transparent',\r\n                                border: 'none',\r\n                                color: 'var(--ice-mint)',\r\n                                fontSize: '0.8rem',\r\n                                cursor: 'pointer',\r\n                                textDecoration: 'none',\r\n                                borderBottom: '1px solid var(--ice-mint)',\r\n                                padding: '0',\r\n                                lineHeight: '1.2',\r\n                                opacity: 0.8,\r\n                                transition: 'opacity 0.2s'\r\n                            }}\r\n                            onMouseEnter={(e) => e.target.style.opacity = '1'}\r\n                            onMouseLeave={(e) => e.target.style.opacity = '0.8'}\r\n                        >\r\n                            CLEAR ALL\r\n                        </button>\r\n                    )}\r\n                    <button\r\n                        className=\"mobile-close-btn\"\r\n                        onClick={() => onMobileFilterToggle(false)}\r\n                        style={{ display: 'none' }} // Visible only on mobile via CSS\r\n                    >\r\n                        <FaTimes />\r\n                    </button>\r\n                </div>\r\n\r\n                <div className=\"filters-content\" style={{\r\n                    flex: 1,\r\n                    overflowY: 'auto',\r\n                    overflowX: 'hidden', // Prevent horizontal scrolling completely\r\n                    padding: '0.5rem max(1.5rem, env(safe-area-inset-left)) 1.5rem max(1.5rem, env(safe-area-inset-right))'\r\n                }}>\r\n\r\n                    {/* Current App Events Box */}\r\n                    {(currentMode === 'posts' || currentMode === 'events') && (\r\n                        <CurrentAppEventsBox />\r\n                    )}\r\n\r\n                    {/* Date Filter Panel - Show for Posts and Events */}\r\n                    {(currentMode === 'posts' || currentMode === 'events') && (\r\n                        <div style={{ marginBottom: '0.8rem' }}>\r\n                            <div style={{ position: 'relative', width: '100%', boxSizing: 'border-box' }}>\r\n                                <PanoDateInput\r\n                                    selected={selectedDate}\r\n                                    onChange={(date) => onDateSelect(date)}\r\n                                    placeholder=\"Filter by Date\"\r\n                                    isClearable\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Parks Filter Panel - Show for Posts and Events */}\r\n                    {(currentMode === 'posts' || currentMode === 'events') && (\r\n                        <div style={{\r\n                            marginBottom: '0.8rem',\r\n                            background: 'rgba(0, 0, 0, 0.4)',\r\n                            borderRadius: '16px',\r\n                            border: '1px solid rgba(127, 255, 212, 0.3)',\r\n                            boxShadow: '0 4px 24px rgba(0, 0, 0, 0.4), inset 0 0 20px rgba(127, 255, 212, 0.05)',\r\n                            backdropFilter: 'blur(12px)',\r\n                            WebkitBackdropFilter: 'blur(12px)',\r\n                            overflow: 'hidden'\r\n                        }}>\r\n                            <div\r\n                                onClick={() => togglePanel('parks')}\r\n                                style={{\r\n                                    padding: '0.8rem 1.2rem',\r\n                                    display: 'flex',\r\n                                    justifyContent: 'space-between',\r\n                                    alignItems: 'center',\r\n                                    cursor: 'pointer',\r\n                                    borderBottom: expandedPanels.parks ? '1px solid rgba(255, 255, 255, 0.03)' : 'none'\r\n                                }}\r\n                            >\r\n                                <div style={{ display: 'flex', alignItems: 'center', gap: '0.8rem' }}>\r\n                                    <ModernIcon icon={FaMountain} size={14} />\r\n                                    <span style={{ fontWeight: 700, color: '#fff', fontFamily: 'var(--font-family-heading)', letterSpacing: '0.08em', textTransform: 'uppercase', fontSize: '0.85rem', textShadow: '0 0 10px rgba(255, 255, 255, 0.1)' }}>Parks</span>\r\n                                </div>\r\n                                <FaChevronDown size={10} color=\"rgba(255, 255, 255, 0.3)\" style={{ display: expandedPanels.parks ? 'none' : 'block' }} />\r\n                                <FaChevronUp size={10} color=\"var(--ice-mint)\" style={{ display: expandedPanels.parks ? 'block' : 'none' }} />\r\n                            </div>\r\n                            {expandedPanels.parks && (\r\n                                <div style={{ padding: '0.5rem 1.2rem 1rem 1.2rem' }}>\r\n                                    {/* National/State Toggle */}\r\n                                    <div style={{\r\n                                        display: 'flex',\r\n                                        gap: '0.5rem',\r\n                                        marginBottom: '1rem',\r\n                                        background: 'rgba(0, 0, 0, 0.3)',\r\n                                        padding: '0.3rem',\r\n                                        borderRadius: '8px',\r\n                                        border: '1px solid rgba(255, 255, 255, 0.05)'\r\n                                    }}>\r\n                                        <button\r\n                                            onClick={() => setParkType('national')}\r\n                                            style={{\r\n                                                flex: 1,\r\n                                                padding: '0.5rem',\r\n                                                background: parkType === 'national' ? 'rgba(127, 255, 212, 0.15)' : 'transparent',\r\n                                                border: parkType === 'national' ? '1px solid var(--ice-mint)' : '1px solid transparent',\r\n                                                borderRadius: '6px',\r\n                                                color: parkType === 'national' ? 'var(--ice-mint)' : '#ffffff',\r\n                                                cursor: 'pointer',\r\n                                                fontSize: '0.75rem',\r\n                                                fontWeight: parkType === 'national' ? 700 : 400,\r\n                                                textTransform: 'uppercase',\r\n                                                letterSpacing: '0.05em',\r\n                                                transition: 'all 0.2s',\r\n                                                fontFamily: 'var(--font-family-mono)'\r\n                                            }}\r\n                                        >\r\n                                            National\r\n                                        </button>\r\n                                        <button\r\n                                            onClick={() => setParkType('state')}\r\n                                            style={{\r\n                                                flex: 1,\r\n                                                padding: '0.5rem',\r\n                                                background: parkType === 'state' ? 'rgba(127, 255, 212, 0.15)' : 'transparent',\r\n                                                border: parkType === 'state' ? '1px solid var(--ice-mint)' : '1px solid transparent',\r\n                                                borderRadius: '6px',\r\n                                                color: parkType === 'state' ? 'var(--ice-mint)' : '#ffffff',\r\n                                                cursor: 'pointer',\r\n                                                fontSize: '0.75rem',\r\n                                                fontWeight: parkType === 'state' ? 700 : 400,\r\n                                                textTransform: 'uppercase',\r\n                                                letterSpacing: '0.05em',\r\n                                                transition: 'all 0.2s',\r\n                                                fontFamily: 'var(--font-family-mono)'\r\n                                            }}\r\n                                        >\r\n                                            State\r\n                                        </button>\r\n                                    </div>\r\n\r\n                                    {/* Parks Grid */}\r\n                                    <div className=\"parks-grid\" style={{\r\n                                        display: 'grid',\r\n                                        gridTemplateRows: 'repeat(2, min-content)',\r\n                                        gridAutoFlow: 'column',\r\n                                        gridAutoColumns: 'max-content',\r\n                                        gap: '0.4rem',\r\n                                        rowGap: '0.5rem',\r\n                                        width: '100%',\r\n                                        overflowX: 'auto',\r\n                                        overflowY: 'hidden',\r\n                                        paddingBottom: '0.5rem',\r\n                                        scrollbarWidth: 'thin',\r\n                                        scrollbarColor: 'rgba(127, 255, 212, 0.3) rgba(255, 255, 255, 0.02)',\r\n                                        touchAction: 'auto' // Allow both horizontal and vertical scrolling\r\n                                    }}>\r\n                                        <button\r\n                                            onClick={() => onParkSelect(null)}\r\n                                            style={{\r\n                                                padding: '0.4rem 0.65rem',\r\n                                                background: !selectedPark ? 'rgba(127, 255, 212, 0.1)' : 'rgba(255, 255, 255, 0.03)',\r\n                                                border: !selectedPark ? '1px solid var(--ice-mint)' : '1px solid rgba(255, 255, 255, 0.08)',\r\n                                                borderRadius: '6px',\r\n                                                color: !selectedPark ? 'var(--ice-mint)' : '#ffffff',\r\n                                                cursor: 'pointer',\r\n                                                fontSize: '0.7rem',\r\n                                                textAlign: 'left',\r\n                                                transition: 'all 0.2s',\r\n                                                fontFamily: 'var(--font-family-mono)',\r\n                                                letterSpacing: '0.05em',\r\n                                                textTransform: 'uppercase',\r\n                                                whiteSpace: 'nowrap'\r\n                                            }}\r\n                                        >\r\n                                            All Parks\r\n                                        </button>\r\n                                        {PARKS_DATA.filter(park => park.parkType === parkType).map(park => (\r\n                                            <button\r\n                                                key={park.parkId}\r\n                                                onClick={() => onParkSelect(park.parkId)}\r\n                                                style={{\r\n                                                    padding: '0.4rem 0.65rem',\r\n                                                    background: selectedPark === park.parkId ? 'rgba(127, 255, 212, 0.1)' : 'rgba(255, 255, 255, 0.03)',\r\n                                                    border: selectedPark === park.parkId ? '1px solid var(--ice-mint)' : '1px solid rgba(255, 255, 255, 0.08)',\r\n                                                    borderRadius: '6px',\r\n                                                    color: selectedPark === park.parkId ? 'var(--ice-mint)' : '#ffffff',\r\n                                                    cursor: 'pointer',\r\n                                                    fontSize: '0.7rem',\r\n                                                    textAlign: 'left',\r\n                                                    transition: 'all 0.2s',\r\n                                                    display: 'flex',\r\n                                                    alignItems: 'center',\r\n                                                    gap: '0.35rem',\r\n                                                    fontFamily: 'var(--font-family-mono)',\r\n                                                    letterSpacing: '0.05em',\r\n                                                    textTransform: 'uppercase',\r\n                                                    whiteSpace: 'nowrap'\r\n                                                }}\r\n                                            >\r\n                                                {park.parkType === 'national' ? <ModernIcon icon={FaMountain} size={12} glow={false} /> : <ModernIcon icon={FaTree} size={12} glow={false} />}\r\n                                                <span>{park.parkName}</span>\r\n                                            </button>\r\n                                        ))}\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Gear Filter Panel - Show for Posts only */}\r\n                    {currentMode === 'posts' && (\r\n                        <div style={{\r\n                            marginBottom: '0.8rem',\r\n                            background: 'rgba(0, 0, 0, 0.4)',\r\n                            borderRadius: '16px',\r\n                            border: '1px solid rgba(127, 255, 212, 0.3)',\r\n                            boxShadow: '0 4px 24px rgba(0, 0, 0, 0.4), inset 0 0 20px rgba(127, 255, 212, 0.05)',\r\n                            backdropFilter: 'blur(12px)',\r\n                            WebkitBackdropFilter: 'blur(12px)',\r\n                            overflow: 'hidden'\r\n                        }}>\r\n                            <div\r\n                                onClick={() => togglePanel('gear')}\r\n                                style={{\r\n                                    padding: '0.8rem 1.2rem',\r\n                                    display: 'flex',\r\n                                    justifyContent: 'space-between',\r\n                                    alignItems: 'center',\r\n                                    cursor: 'pointer',\r\n                                    borderBottom: expandedPanels.gear ? '1px solid rgba(255, 255, 255, 0.03)' : 'none'\r\n                                }}\r\n                            >\r\n                                <div style={{ display: 'flex', alignItems: 'center', gap: '0.8rem' }}>\r\n                                    <ModernIcon icon={FaCamera} size={14} />\r\n                                    <span style={{ fontWeight: 700, color: '#fff', fontFamily: 'var(--font-family-heading)', letterSpacing: '0.08em', textTransform: 'uppercase', fontSize: '0.85rem', textShadow: '0 0 10px rgba(255, 255, 255, 0.1)' }}>Gear & Film</span>\r\n                                </div>\r\n                                <FaChevronDown size={10} color=\"rgba(255, 255, 255, 0.3)\" style={{ display: expandedPanels.gear ? 'none' : 'block' }} />\r\n                                <FaChevronUp size={10} color=\"var(--ice-mint)\" style={{ display: expandedPanels.gear ? 'block' : 'none' }} />\r\n                            </div>\r\n                            {expandedPanels.gear && (\r\n                                <div style={{ padding: '0.5rem 1.2rem 1rem 1.2rem', display: 'flex', flexDirection: 'column', gap: '1rem' }}>\r\n                                    {/* Camera Select */}\r\n                                    <div>\r\n                                        <label style={{ display: 'block', color: '#ffffff', fontSize: '0.75rem', marginBottom: '0.5rem', fontFamily: 'var(--font-family-mono)', letterSpacing: '0.05em' }}>CAMERA SYSTEM</label>\r\n                                        <CustomDropdown\r\n                                            value={selectedCamera || ''}\r\n                                            onChange={(value) => onCameraSelect(value || null)}\r\n                                            options={[{ id: '', label: 'Any Camera' }, ...CAMERA_MODELS]}\r\n                                            placeholder=\"Any Camera\"\r\n                                        />\r\n                                    </div>\r\n\r\n                                    {/* Film Stock Select */}\r\n                                    <div>\r\n                                        <label style={{ display: 'block', color: '#ffffff', fontSize: '0.75rem', marginBottom: '0.5rem', fontFamily: 'var(--font-family-mono)', letterSpacing: '0.05em' }}>FILM STOCK</label>\r\n                                        <CustomDropdown\r\n                                            value={selectedFilm || ''}\r\n                                            onChange={(value) => onFilmSelect(value || null)}\r\n                                            options={[{ id: '', label: 'Any Film' }, ...FILM_STOCKS]}\r\n                                            placeholder=\"Any Film\"\r\n                                        />\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Composition Filter Panel - Show for Posts only */}\r\n                    {currentMode === 'posts' && (\r\n                        <div style={{\r\n                            marginBottom: '0.8rem',\r\n                            background: 'rgba(0, 0, 0, 0.4)',\r\n                            borderRadius: '16px',\r\n                            border: '1px solid rgba(127, 255, 212, 0.3)',\r\n                            boxShadow: '0 4px 24px rgba(0, 0, 0, 0.4), inset 0 0 20px rgba(127, 255, 212, 0.05)',\r\n                            backdropFilter: 'blur(12px)',\r\n                            WebkitBackdropFilter: 'blur(12px)',\r\n                            overflow: 'hidden'\r\n                        }}>\r\n                            <div\r\n                                onClick={() => togglePanel('composition')}\r\n                                style={{\r\n                                    padding: '0.8rem 1.2rem',\r\n                                    display: 'flex',\r\n                                    justifyContent: 'space-between',\r\n                                    alignItems: 'center',\r\n                                    cursor: 'pointer',\r\n                                    borderBottom: expandedPanels.composition ? '1px solid rgba(255, 255, 255, 0.03)' : 'none'\r\n                                }}\r\n                            >\r\n                                <div style={{ display: 'flex', alignItems: 'center', gap: '0.8rem' }}>\r\n                                    <ModernIcon icon={FaCrop} size={14} />\r\n                                    <span style={{ fontWeight: 700, color: '#fff', fontFamily: 'var(--font-family-heading)', letterSpacing: '0.08em', textTransform: 'uppercase', fontSize: '0.85rem', textShadow: '0 0 10px rgba(255, 255, 255, 0.1)' }}>Composition</span>\r\n                                </div>\r\n                                <FaChevronDown size={10} color=\"rgba(255, 255, 255, 0.3)\" style={{ display: expandedPanels.composition ? 'none' : 'block' }} />\r\n                                <FaChevronUp size={10} color=\"var(--ice-mint)\" style={{ display: expandedPanels.composition ? 'block' : 'none' }} />\r\n                            </div>\r\n                            {expandedPanels.composition && (\r\n                                <div style={{ padding: '0.5rem 1.2rem 1rem 1.2rem', display: 'flex', flexDirection: 'column', gap: '1rem' }}>\r\n                                    {/* Orientation Select */}\r\n                                    <div>\r\n                                        <label style={{ display: 'block', color: '#ffffff', fontSize: '0.75rem', marginBottom: '0.5rem', fontFamily: 'var(--font-family-mono)', letterSpacing: '0.05em' }}>ORIENTATION</label>\r\n                                        <div style={{ display: 'flex', gap: '0.5rem' }}>\r\n                                            {ORIENTATIONS.map(opt => (\r\n                                                <button\r\n                                                    key={opt.id}\r\n                                                    onClick={() => onOrientationSelect(selectedOrientation === opt.id ? null : opt.id)}\r\n                                                    style={{\r\n                                                        flex: 1,\r\n                                                        padding: '0.5rem',\r\n                                                        background: selectedOrientation === opt.id ? 'rgba(127, 255, 212, 0.1)' : 'rgba(255, 255, 255, 0.03)',\r\n                                                        border: selectedOrientation === opt.id ? '1px solid var(--ice-mint)' : '1px solid rgba(255, 255, 255, 0.08)',\r\n                                                        borderRadius: '8px',\r\n                                                        color: selectedOrientation === opt.id ? 'var(--ice-mint)' : '#ffffff',\r\n                                                        fontSize: '0.8rem',\r\n                                                        cursor: 'pointer',\r\n                                                        fontFamily: 'var(--font-family-mono)',\r\n                                                        transition: 'all 0.2s'\r\n                                                    }}\r\n                                                >\r\n                                                    {opt.label}\r\n                                                </button>\r\n                                            ))}\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    {/* Aspect Ratio Select */}\r\n                                    <div>\r\n                                        <label style={{ display: 'block', color: '#ffffff', fontSize: '0.75rem', marginBottom: '0.5rem', fontFamily: 'var(--font-family-mono)', letterSpacing: '0.05em' }}>ASPECT RATIO</label>\r\n                                        <CustomDropdown\r\n                                            value={selectedAspectRatio || ''}\r\n                                            onChange={(value) => onAspectRatioSelect(value || null)}\r\n                                            options={[{ id: '', label: 'Any Ratio' }, ...ASPECT_RATIOS]}\r\n                                            placeholder=\"Any Ratio\"\r\n                                        />\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n\r\n\r\n                    <TagFilterPanel\r\n                        category={TAG_CATEGORIES.ART_TYPES}\r\n                        selectedTags={selectedTags}\r\n                        onTagToggle={onTagToggle}\r\n                        isExpanded={expandedPanels.art_types}\r\n                        onToggleExpand={() => togglePanel('art_types')}\r\n                    />\r\n                    <TagFilterPanel\r\n                        category={TAG_CATEGORIES.ENVIRONMENT}\r\n                        selectedTags={selectedTags}\r\n                        onTagToggle={onTagToggle}\r\n                        isExpanded={expandedPanels.environment}\r\n                        onToggleExpand={() => togglePanel('environment')}\r\n                    />\r\n                    <TagFilterPanel\r\n                        category={TAG_CATEGORIES.COLOR}\r\n                        selectedTags={selectedTags}\r\n                        onTagToggle={onTagToggle}\r\n                        isExpanded={expandedPanels.color}\r\n                        onToggleExpand={() => togglePanel('color')}\r\n                    />\r\n                    <TagFilterPanel\r\n                        category={TAG_CATEGORIES.AESTHETICS}\r\n                        selectedTags={selectedTags}\r\n                        onTagToggle={onTagToggle}\r\n                        isExpanded={expandedPanels.aesthetics}\r\n                        onToggleExpand={() => togglePanel('aesthetics')}\r\n                    />\r\n                    <TagFilterPanel\r\n                        category={TAG_CATEGORIES.LOCATION}\r\n                        selectedTags={selectedTags}\r\n                        onTagToggle={onTagToggle}\r\n                        isExpanded={expandedPanels.location}\r\n                        onToggleExpand={() => togglePanel('location')}\r\n                    />\r\n                    <TagFilterPanel\r\n                        category={TAG_CATEGORIES.OBJECTS}\r\n                        selectedTags={selectedTags}\r\n                        onTagToggle={onTagToggle}\r\n                        isExpanded={expandedPanels.objects}\r\n                        onToggleExpand={() => togglePanel('objects')}\r\n                    />\r\n                    <TagFilterPanel\r\n                        category={TAG_CATEGORIES.TECHNIQUE}\r\n                        selectedTags={selectedTags}\r\n                        onTagToggle={onTagToggle}\r\n                        isExpanded={expandedPanels.technique}\r\n                        onToggleExpand={() => togglePanel('technique')}\r\n                    />\r\n                    <TagFilterPanel\r\n                        category={TAG_CATEGORIES.PORTRAITS}\r\n                        selectedTags={selectedTags}\r\n                        onTagToggle={onTagToggle}\r\n                        isExpanded={expandedPanels.portraits}\r\n                        onToggleExpand={() => togglePanel('portraits')}\r\n                    />\r\n                    <TagFilterPanel\r\n                        category={TAG_CATEGORIES.ANIMALS}\r\n                        selectedTags={selectedTags}\r\n                        onTagToggle={onTagToggle}\r\n                        isExpanded={expandedPanels.animals}\r\n                        onToggleExpand={() => togglePanel('animals')}\r\n                    />\r\n                    <TagFilterPanel\r\n                        category={TAG_CATEGORIES.TIME}\r\n                        selectedTags={selectedTags}\r\n                        onTagToggle={onTagToggle}\r\n                        isExpanded={expandedPanels.time}\r\n                        onToggleExpand={() => togglePanel('time')}\r\n                    />\r\n                </div>\r\n            </aside>\r\n\r\n            {/* Main Content Area */}\r\n            <main className=\"search-results-area\" style={{\r\n                flex: 1,\r\n                display: 'flex',\r\n                flexDirection: 'column',\r\n                overflow: 'hidden',\r\n                background: 'var(--black)'\r\n            }}>\r\n\r\n\r\n                {/* Results Content */}\r\n                <div\r\n                    style={{ flex: 1, overflowY: 'auto', padding: '0' }}\r\n                    onScroll={onScroll}\r\n\r\n                >\r\n                    {children}\r\n                </div>\r\n            </main>\r\n\r\n            <style>{`\r\n                /* Custom Scrollbar for Horizontal Grids */\r\n                .parks-grid::-webkit-scrollbar,\r\n                .tags-grid::-webkit-scrollbar {\r\n                    height: 4px;\r\n                }\r\n                .parks-grid::-webkit-scrollbar-track,\r\n                .tags-grid::-webkit-scrollbar-track {\r\n                    background: rgba(255, 255, 255, 0.02);\r\n                    border-radius: 3px;\r\n                }\r\n                .parks-grid::-webkit-scrollbar-thumb,\r\n                .tags-grid::-webkit-scrollbar-thumb {\r\n                    background: rgba(127, 255, 212, 0.3);\r\n                    border-radius: 3px;\r\n                }\r\n                .parks-grid::-webkit-scrollbar-thumb:hover,\r\n                .tags-grid::-webkit-scrollbar-thumb:hover {\r\n                    background: rgba(127, 255, 212, 0.5);\r\n                }\r\n\r\n\r\n\r\n                @media (max-width: 768px) {\r\n                    .filters-sidebar {\r\n                        position: fixed !important;\r\n                        top: 0;\r\n                        left: 0;\r\n                        bottom: 0;\r\n                        width: 100% !important;\r\n                        transform: translateX(-100%);\r\n                        background: rgba(0, 0, 0, 0.95) !important;\r\n                        backdrop-filter: blur(10px);\r\n                        flex-shrink: 0 !important;\r\n                        z-index: 9999 !important;\r\n                    }\r\n                    \r\n                    .filters-sidebar.mobile-open {\r\n                        transform: translateX(0);\r\n                    }\r\n\r\n                    .mobile-close-btn {\r\n                        display: block !important;\r\n                        background: none;\r\n                        border: none;\r\n                        color: #fff;\r\n                        font-size: 1.2rem;\r\n                        cursor: pointer;\r\n                    }\r\n\r\n\r\n                    \r\n                    .search-panels-layout {\r\n                        display: block !important;\r\n                    }\r\n                    \r\n                    .search-results-area {\r\n                        width: 100% !important;\r\n                        height: 100% !important;\r\n                        flex: none !important;\r\n                    }\r\n                }\r\n                \r\n                /* Also hide sidebar in landscape mode on mobile/tablet */\r\n                @media (max-height: 768px) and (orientation: landscape) {\r\n                    .filters-sidebar {\r\n                        position: fixed !important;\r\n                        top: 0;\r\n                        left: 0;\r\n                        bottom: 0;\r\n                        width: 100% !important;\r\n                        transform: translateX(-100%);\r\n                        background: rgba(0, 0, 0, 0.95) !important;\r\n                        backdrop-filter: blur(10px);\r\n                        flex-shrink: 0 !important;\r\n                        z-index: 9999 !important;\r\n                    }\r\n                    \r\n                    .filters-sidebar.mobile-open {\r\n                        transform: translateX(0);\r\n                    }\r\n\r\n                    .mobile-close-btn {\r\n                        display: block !important;\r\n                        background: none;\r\n                        border: none;\r\n                        color: #fff;\r\n                        font-size: 1.2rem;\r\n                        cursor: pointer;\r\n                    }\r\n                    \r\n                    .search-panels-layout {\r\n                        display: block !important;\r\n                    }\r\n                    \r\n                    .search-results-area {\r\n                        width: 100% !important;\r\n                        height: 100% !important;\r\n                        flex: none !important;\r\n                    }\r\n                }\r\n            `}</style>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default SearchPanels;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\SettingsModal.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { FaTimes, FaCog, FaSignOutAlt, FaUser } from 'react-icons/fa';\r\n\r\nconst SettingsModal = ({ isOpen, onClose, onLogout }) => {\r\n    const navigate = useNavigate();\r\n\r\n    if (!isOpen) return null;\r\n\r\n    const handleEditProfile = () => {\r\n        navigate('/edit-profile');\r\n        onClose();\r\n    };\r\n\r\n    const handleLogout = async () => {\r\n        await onLogout();\r\n        onClose();\r\n    };\r\n\r\n    return (\r\n        <div style={{\r\n            position: 'fixed',\r\n            top: 0,\r\n            left: 0,\r\n            right: 0,\r\n            bottom: 0,\r\n            background: 'rgba(0, 0, 0, 0.85)',\r\n            backdropFilter: 'blur(5px)',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            zIndex: 1100,\r\n            padding: '1rem'\r\n        }} onClick={onClose}>\r\n            <div style={{\r\n                background: '#111',\r\n                borderRadius: '16px',\r\n                padding: '2rem',\r\n                maxWidth: '400px',\r\n                width: '100%',\r\n                border: '1px solid #333',\r\n                position: 'relative'\r\n            }} onClick={(e) => e.stopPropagation()}>\r\n                {/* Close Button */}\r\n                <button\r\n                    onClick={onClose}\r\n                    style={{\r\n                        position: 'absolute',\r\n                        top: '1rem',\r\n                        right: '1rem',\r\n                        background: 'transparent',\r\n                        border: 'none',\r\n                        color: '#888',\r\n                        cursor: 'pointer',\r\n                        fontSize: '1.2rem'\r\n                    }}\r\n                >\r\n                    <FaTimes />\r\n                </button>\r\n\r\n                {/* Header */}\r\n                <div style={{\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    gap: '0.75rem',\r\n                    marginBottom: '2rem'\r\n                }}>\r\n                    <FaCog size={24} color=\"#fff\" />\r\n                    <h2 style={{ margin: 0, color: '#fff', fontSize: '1.5rem' }}>Settings</h2>\r\n                </div>\r\n\r\n                {/* Menu Items */}\r\n                <div style={{ display: 'flex', flexDirection: 'column', gap: '0.5rem' }}>\r\n                    <button\r\n                        onClick={handleEditProfile}\r\n                        style={{\r\n                            padding: '1rem',\r\n                            background: '#1a1a1a',\r\n                            border: '1px solid #333',\r\n                            borderRadius: '8px',\r\n                            color: '#fff',\r\n                            cursor: 'pointer',\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            gap: '0.75rem',\r\n                            fontSize: '1rem',\r\n                            transition: 'all 0.2s'\r\n                        }}\r\n                        onMouseEnter={(e) => e.currentTarget.style.background = '#222'}\r\n                        onMouseLeave={(e) => e.currentTarget.style.background = '#1a1a1a'}\r\n                    >\r\n                        <FaUser />\r\n                        <span>Edit Profile</span>\r\n                    </button>\r\n\r\n                    <button\r\n                        onClick={handleLogout}\r\n                        style={{\r\n                            padding: '1rem',\r\n                            background: 'rgba(255, 68, 68, 0.1)',\r\n                            border: '1px solid rgba(255, 68, 68, 0.3)',\r\n                            borderRadius: '8px',\r\n                            color: '#ff4444',\r\n                            cursor: 'pointer',\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            gap: '0.75rem',\r\n                            fontSize: '1rem',\r\n                            transition: 'all 0.2s'\r\n                        }}\r\n                        onMouseEnter={(e) => e.currentTarget.style.background = 'rgba(255, 68, 68, 0.15)'}\r\n                        onMouseLeave={(e) => e.currentTarget.style.background = 'rgba(255, 68, 68, 0.1)'}\r\n                    >\r\n                        <FaSignOutAlt />\r\n                        <span>Sign Out</span>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default SettingsModal;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\ShopSetupGate.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { ShopService } from '@/core/services/firestore/studios.service';\r\n\r\n/**\r\n * ShopSetupGate - Wrapper component that enforces shop setup requirement\r\n * \r\n * Usage:\r\n * <ShopSetupGate>\r\n *   <PublishButton />\r\n * </ShopSetupGate>\r\n * \r\n * If shop setup is incomplete and user cannot bypass, redirects to /shop/setup\r\n * Otherwise, renders children\r\n */\r\nconst ShopSetupGate = ({ children, fallback = null }) => {\r\n    const { currentUser } = useAuth();\r\n    const navigate = useNavigate();\r\n    const [isChecking, setIsChecking] = useState(true);\r\n    const [canAccess, setCanAccess] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const checkAccess = async () => {\r\n            if (!currentUser) {\r\n                setCanAccess(false);\r\n                setIsChecking(false);\r\n                return;\r\n            }\r\n\r\n            try {\r\n                const { isComplete, canBypass } = await ShopService.checkShopSetup(\r\n                    currentUser.uid,\r\n                    currentUser.email\r\n                );\r\n\r\n                if (isComplete || canBypass) {\r\n                    setCanAccess(true);\r\n                } else {\r\n                    // Redirect to shop setup\r\n                    navigate('/shop/setup');\r\n                }\r\n            } catch (error) {\r\n                console.error('Error checking shop setup:', error);\r\n                setCanAccess(false);\r\n            } finally {\r\n                setIsChecking(false);\r\n            }\r\n        };\r\n\r\n        checkAccess();\r\n    }, [currentUser, navigate]);\r\n\r\n    if (isChecking) {\r\n        return fallback || (\r\n            <div style={{\r\n                padding: '2rem',\r\n                textAlign: 'center',\r\n                color: '#888'\r\n            }}>\r\n                Checking shop setup...\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (!canAccess) {\r\n        return fallback || null;\r\n    }\r\n\r\n    return <>{children}</>;\r\n};\r\n\r\nexport default ShopSetupGate;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\ShopShelfRow.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'SpaceCardComponent' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":26}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useRef } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { FaShoppingCart, FaImage } from 'react-icons/fa';\r\nimport SpaceCardComponent from './SpaceCardComponent';\r\n\r\nconst ShopShelfRow = ({ items, kind }) => {\r\n    const navigate = useNavigate();\r\n    const scrollRef = useRef(null);\r\n\r\n    // Simple drag-to-scroll (optional fallback to just css snap)\r\n\r\n    if (!items || items.length === 0) {\r\n        return (\r\n            <div style={{\r\n                padding: '2rem',\r\n                border: '1px dashed #333',\r\n                borderRadius: '12px',\r\n                textAlign: 'center',\r\n                color: '#666',\r\n                display: 'flex',\r\n                flexDirection: 'column',\r\n                alignItems: 'center',\r\n                justifyContent: 'center',\r\n                gap: '0.5rem',\r\n                minHeight: '150px'\r\n            }}>\r\n                <FaImage size={24} style={{ opacity: 0.5 }} />\r\n                <span>No active items for sale.</span>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div\r\n            ref={scrollRef}\r\n            style={{\r\n                display: 'grid',\r\n                // 2 rows, auto columns based on exact width\r\n                gridTemplateRows: 'repeat(2, auto)',\r\n                gridAutoFlow: 'column',\r\n                gridAutoColumns: kind === 'spacecard' ? '140px' : '200px',\r\n                gap: '1rem',\r\n                overflowX: 'auto',\r\n                paddingBottom: '1rem',\r\n                scrollSnapType: 'x mandatory',\r\n                maskImage: 'linear-gradient(to right, black 90%, transparent 100%)'\r\n            }}\r\n            className=\"hide-scrollbar\"\r\n        >\r\n            {items.map(item => {\r\n                // Determine display price\r\n                const displayPrice = item.priceCents\r\n                    ? `$${(item.priceCents / 100).toFixed(2)}`\r\n                    : (item.printSizes?.[0]?.price ? `$${item.printSizes[0].price}` : '$-.--');\r\n\r\n                return (\r\n                    <div\r\n                        key={item.id}\r\n                        onClick={() => navigate(`/shop/${item.id}`)}\r\n                        style={{\r\n                            scrollSnapAlign: 'start',\r\n                            cursor: 'pointer',\r\n                            position: 'relative'\r\n                        }}\r\n                    >\r\n                        {kind === 'spacecard' ? (\r\n                            <div style={{ transform: 'scale(1)', transformOrigin: 'top left' }}>\r\n                                {/* Adapt SpaceCardComponent to simple preview */}\r\n                                <div style={{\r\n                                    aspectRatio: '2/3',\r\n                                    borderRadius: '12px',\r\n                                    overflow: 'hidden',\r\n                                    position: 'relative',\r\n                                    border: '1px solid #333'\r\n                                }}>\r\n                                    <img\r\n                                        src={item.imageUrl}\r\n                                        alt={item.title}\r\n                                        style={{ width: '100%', height: '100%', objectFit: 'cover' }}\r\n                                    />\r\n                                    <div style={{\r\n                                        position: 'absolute',\r\n                                        bottom: 0,\r\n                                        left: 0,\r\n                                        right: 0,\r\n                                        padding: '0.5rem',\r\n                                        background: 'linear-gradient(to top, rgba(0,0,0,0.9), transparent)',\r\n                                        color: '#fff',\r\n                                        fontSize: '0.8rem',\r\n                                        fontWeight: 'bold'\r\n                                    }}>\r\n                                        {displayPrice}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        ) : (\r\n                            // Print Item Card\r\n                            <div style={{\r\n                                width: '100%',\r\n                                aspectRatio: '1',\r\n                                borderRadius: '12px',\r\n                                overflow: 'hidden',\r\n                                position: 'relative',\r\n                                border: '1px solid #333'\r\n                            }}>\r\n                                <img\r\n                                    src={item.imageUrl}\r\n                                    alt={item.title}\r\n                                    style={{ width: '100%', height: '100%', objectFit: 'cover' }}\r\n                                />\r\n                                <div style={{\r\n                                    position: 'absolute',\r\n                                    bottom: 0,\r\n                                    left: 0,\r\n                                    right: 0,\r\n                                    padding: '0.5rem',\r\n                                    background: 'linear-gradient(to top, rgba(0,0,0,0.9), transparent)',\r\n                                    color: '#fff',\r\n                                    display: 'flex',\r\n                                    justifyContent: 'space-between',\r\n                                    alignItems: 'center'\r\n                                }}>\r\n                                    <span style={{ fontSize: '0.9rem', fontWeight: 'bold' }}>{displayPrice}</span>\r\n                                    <div style={{\r\n                                        width: '24px',\r\n                                        height: '24px',\r\n                                        background: 'rgba(255,255,255,0.2)',\r\n                                        borderRadius: '50%',\r\n                                        display: 'flex',\r\n                                        alignItems: 'center',\r\n                                        justifyContent: 'center'\r\n                                    }}>\r\n                                        <FaShoppingCart size={10} color=\"#fff\" />\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                );\r\n            })}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ShopShelfRow;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\SkeletonPost.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\n\r\nconst SkeletonPost = () => {\r\n    return (\r\n        <div style={{\r\n            height: '100vh',\r\n            width: '100vw',\r\n            scrollSnapAlign: 'start',\r\n            position: 'relative',\r\n            background: '#0a0a0a',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center'\r\n        }}>\r\n            {/* Image skeleton */}\r\n            <div style={{\r\n                width: '100%',\r\n                height: '100%',\r\n                background: 'linear-gradient(90deg, #1a1a1a 25%, #2a2a2a 50%, #1a1a1a 75%)',\r\n                backgroundSize: '200% 100%',\r\n                animation: 'shimmer 1.5s infinite'\r\n            }} />\r\n\r\n            {/* Author overlay skeleton */}\r\n            <div style={{\r\n                position: 'absolute',\r\n                bottom: '100px',\r\n                left: '2rem',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '1rem'\r\n            }}>\r\n                <div style={{\r\n                    width: '40px',\r\n                    height: '40px',\r\n                    borderRadius: '50%',\r\n                    background: '#2a2a2a'\r\n                }} />\r\n                <div style={{\r\n                    width: '120px',\r\n                    height: '20px',\r\n                    borderRadius: '4px',\r\n                    background: '#2a2a2a'\r\n                }} />\r\n            </div>\r\n\r\n            <style>{`\r\n        @keyframes shimmer {\r\n          0% { background-position: 200% 0; }\r\n          100% { background-position: -200% 0; }\r\n        }\r\n      `}</style>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default SkeletonPost;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\SmartImage.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useCallback' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":46,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":57},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'effectiveEager'. Either include it or remove the dependency array.","line":137,"column":8,"nodeType":"ArrayExpression","endLine":137,"endColumn":32,"suggestions":[{"desc":"Update the dependencies array to be: [eager, effectiveEager, keepLoaded, src]","fix":{"range":[4595,4619],"text":"[eager, effectiveEager, keepLoaded, src]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef, useCallback } from 'react';\r\nimport DateStampOverlay from './DateStampOverlay';\r\n\r\n// Polyfill for Safari and unsupported browsers\r\nconst safeRequestIdleCallback =\r\n    typeof window !== 'undefined' && window.requestIdleCallback ||\r\n    function (cb) {\r\n        return setTimeout(() => cb({ timeRemaining: () => 1 }), 1);\r\n    };\r\n\r\n// --- Global Scroll State Management ---\r\n// We track scrolling globally to pause L2 loading during active scrolls\r\nlet isScrolling = false;\r\nlet scrollTimeout = null;\r\nconst listeners = new Set();\r\n\r\nconst updateScrollState = (scrolling) => {\r\n    isScrolling = scrolling;\r\n    listeners.forEach(listener => listener(scrolling));\r\n};\r\n\r\nif (typeof window !== 'undefined') {\r\n    window.addEventListener('scroll', () => {\r\n        if (!isScrolling) updateScrollState(true);\r\n\r\n        if (scrollTimeout) clearTimeout(scrollTimeout);\r\n\r\n        scrollTimeout = setTimeout(() => {\r\n            updateScrollState(false);\r\n        }, 150); // 150ms debounce for scroll end\r\n    }, { passive: true });\r\n}\r\n\r\n// --- Priority Queue for L2 Loading ---\r\n// Simple FIFO queue processed only when idle\r\nconst loadQueue = [];\r\nlet queueProcessorRunning = false;\r\n\r\nconst processQueue = (deadline) => {\r\n    while (deadline.timeRemaining() > 1 && loadQueue.length > 0 && !isScrolling) {\r\n        const task = loadQueue.shift();\r\n        task();\r\n    }\r\n\r\n    if (loadQueue.length > 0) {\r\n        if (!isScrolling) {\r\n            safeRequestIdleCallback(processQueue);\r\n        } else {\r\n            // Check back later if scrolling\r\n            setTimeout(() => {\r\n                safeRequestIdleCallback(processQueue);\r\n            }, 200);\r\n        }\r\n    } else {\r\n        queueProcessorRunning = false;\r\n    }\r\n};\r\n\r\nconst enqueueL2Load = (callback) => {\r\n    loadQueue.push(callback);\r\n    if (!queueProcessorRunning) {\r\n        queueProcessorRunning = true;\r\n        safeRequestIdleCallback(processQueue);\r\n    }\r\n};\r\n\r\nimport { isImageLoaded, markImageLoaded } from '@/core/utils/imageCache';\r\n\r\n// --- SmartImage Component ---\r\nconst SmartImage = ({\r\n    src,\r\n    previewSrc,\r\n    thumbnailSrc,\r\n    alt,\r\n    className,\r\n    style,\r\n    aspectRatio = '1/1',\r\n    priority = 'normal',\r\n    eager = false, // NEW: Force eager loading (bypass observers)\r\n    objectFit = 'cover',\r\n    showDateStamp = false,\r\n    dateStampStyle = 'panospace',\r\n    date = null,\r\n    keepLoaded = false\r\n}) => {\r\n    const containerRef = useRef(null);\r\n\r\n    // Data URIs are already full images, treat them as eager/loaded\r\n    const isDataUri = src && typeof src === 'string' && src.startsWith('data:');\r\n    const effectiveEager = eager || isDataUri;\r\n\r\n    // Initial state: If cached, eager, or data URI, start at Level 2 (Full Res) logic immediately\r\n    const initialState = (effectiveEager || isImageLoaded(src)) ? 2 : 0;\r\n    const initialL2 = (effectiveEager || isImageLoaded(src));\r\n\r\n    const [loadLevel, setLoadLevel] = useState(initialState);\r\n    const [isL2Loaded, setIsL2Loaded] = useState(initialL2);\r\n    const [isVisible, setIsVisible] = useState(effectiveEager); // Eager = always visible effectively\r\n\r\n    const currentSrc = isL2Loaded ? src : (loadLevel >= 1 && previewSrc ? previewSrc : thumbnailSrc);\r\n\r\n    // Observers\r\n    useEffect(() => {\r\n        if (!containerRef.current || effectiveEager) return; // Skip observers if eager or data URI\r\n\r\n        const virtualizerObserver = new IntersectionObserver(\r\n            (entries) => {\r\n                entries.forEach(entry => {\r\n                    if (entry.isIntersecting) {\r\n                        setLoadLevel(prev => Math.max(prev, 1));\r\n                    } else if (!keepLoaded && !isImageLoaded(src)) {\r\n                        // Only unload if NOT cached and NOT keepLoaded\r\n                        setLoadLevel(0);\r\n                        setIsL2Loaded(false);\r\n                    }\r\n                });\r\n            },\r\n            { rootMargin: '100% 0px 100% 0px' }\r\n        );\r\n\r\n        const visibilityObserver = new IntersectionObserver(\r\n            (entries) => {\r\n                entries.forEach(entry => {\r\n                    if (entry.isIntersecting) setIsVisible(true);\r\n                });\r\n            },\r\n            { rootMargin: '0px', threshold: 0.1 }\r\n        );\r\n\r\n        virtualizerObserver.observe(containerRef.current);\r\n        visibilityObserver.observe(containerRef.current);\r\n\r\n        return () => {\r\n            virtualizerObserver.disconnect();\r\n            visibilityObserver.disconnect();\r\n        };\r\n    }, [eager, keepLoaded, src]);\r\n\r\n    // Handle L2 Loading\r\n    useEffect(() => {\r\n        if (isL2Loaded) {\r\n            markImageLoaded(src); // Ensure cache is marked\r\n            return;\r\n        }\r\n\r\n        // Trigger load if: Eager OR (Visible AND Level >= 1)\r\n        const shouldLoad = eager || (isVisible && loadLevel >= 1);\r\n\r\n        if (shouldLoad) {\r\n            const loadL2 = () => {\r\n                const img = new Image();\r\n                img.src = src;\r\n                img.decode().then(() => {\r\n                    if (containerRef.current) {\r\n                        setIsL2Loaded(true);\r\n                        setLoadLevel(2);\r\n                        markImageLoaded(src);\r\n                    }\r\n                }).catch(() => {\r\n                    // Fallback to normal load\r\n                    img.onload = () => {\r\n                        if (containerRef.current) {\r\n                            setIsL2Loaded(true);\r\n                            setLoadLevel(2);\r\n                            markImageLoaded(src);\r\n                        }\r\n                    };\r\n                });\r\n            };\r\n\r\n            if (priority === 'high' || eager) {\r\n                loadL2();\r\n            } else {\r\n                enqueueL2Load(loadL2);\r\n            }\r\n        }\r\n    }, [isVisible, loadLevel, isL2Loaded, src, priority, eager]);\r\n\r\n    const imageStyle = {\r\n        width: '100%',\r\n        height: '100%',\r\n        objectFit: objectFit,\r\n        transition: 'opacity 0.3s ease-out, filter 0.3s ease-out',\r\n        opacity: loadLevel > 0 ? 1 : 0.5,\r\n        // If cached/eager, no blur. Else blur.\r\n        filter: isL2Loaded ? 'blur(0)' : (loadLevel === 1 ? 'blur(4px)' : 'blur(10px)'),\r\n        willChange: 'opacity, filter',\r\n        ...style\r\n    };\r\n\r\n    const containerStyle = {\r\n        position: 'relative',\r\n        overflow: 'hidden',\r\n        backgroundColor: 'transparent',\r\n        width: '100%',\r\n        height: aspectRatio === 'auto' ? 'auto' : '100%'\r\n    };\r\n\r\n    if (!style?.width && !style?.height && !style?.position) {\r\n        containerStyle.aspectRatio = aspectRatio;\r\n    }\r\n\r\n    return (\r\n        <div\r\n            ref={containerRef}\r\n            className={`smart-image-container ${className || ''}`}\r\n            style={containerStyle}\r\n        >\r\n            {(loadLevel > 0 || thumbnailSrc || eager) && (\r\n                <img\r\n                    src={currentSrc || src}\r\n                    alt={alt}\r\n                    style={imageStyle}\r\n                    loading={eager ? \"eager\" : \"lazy\"}\r\n                    decoding=\"async\"\r\n                    onLoad={(e) => {\r\n                        if (e.target.src === src) {\r\n                            setIsL2Loaded(true);\r\n                            setLoadLevel(2);\r\n                            markImageLoaded(src);\r\n                        }\r\n                    }}\r\n                />\r\n            )}\r\n\r\n            {/* Loading Indicator only if strictly NOT loaded and lazy */}\r\n            {loadLevel === 0 && !thumbnailSrc && !eager && (\r\n                <div style={{\r\n                    width: '100%',\r\n                    height: '100%',\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'center',\r\n                    color: '#333'\r\n                }}>\r\n                    <div className=\"loading-pulse\" style={{\r\n                        width: '100%',\r\n                        height: '100%',\r\n                        background: 'linear-gradient(90deg, #1a1a1a 0%, #222 50%, #1a1a1a 100%)',\r\n                        backgroundSize: '200% 100%',\r\n                        animation: 'pulse 1.5s infinite'\r\n                    }} />\r\n                </div>\r\n            )}\r\n\r\n            <style>{`\r\n                @keyframes pulse {\r\n                    0% { background-position: 200% 0; }\r\n                    100% { background-position: -200% 0; }\r\n                }\r\n            `}</style>\r\n\r\n            {showDateStamp && (isVisible || eager) && (\r\n                <DateStampOverlay date={date} styleName={dateStampStyle} />\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default React.memo(SmartImage);\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\SoundTagBadge.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { FaMusic, FaWaveSquare } from 'react-icons/fa';\r\n\r\nconst SoundTagBadge = ({ hasSound = false, label = 'SoundTag', onClick, className = '' }) => {\r\n    if (!hasSound) return null;\r\n\r\n    const styles = {\r\n        container: {\r\n            display: 'inline-flex',\r\n            alignItems: 'center',\r\n            gap: '6px',\r\n            padding: '4px 8px',\r\n            borderRadius: '12px',\r\n            fontSize: '0.75rem',\r\n            fontWeight: '600',\r\n            background: 'rgba(0, 255, 157, 0.1)', // PanoSpace Green tint\r\n            border: '1px solid #00FF9D',\r\n            color: '#00FF9D',\r\n            backdropFilter: 'blur(4px)',\r\n            cursor: onClick ? 'pointer' : 'default',\r\n            transition: 'all 0.2s ease'\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div\r\n            style={styles.container}\r\n            className={className}\r\n            onClick={onClick}\r\n            title=\"Attached SoundTag\"\r\n        >\r\n            <FaMusic size={10} />\r\n            <span>{label}</span>\r\n            <FaWaveSquare size={10} style={{ opacity: 0.7 }} />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default SoundTagBadge;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\SpaceCard.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { FaRocket } from 'react-icons/fa';\r\n\r\nconst SpaceCard = ({ spacecard }) => {\r\n    const navigate = useNavigate();\r\n\r\n    return (\r\n        <div\r\n            onClick={() => navigate(`/spacecard/${spacecard.id}`)}\r\n            style={{\r\n                background: 'linear-gradient(135deg, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0.01) 100%)',\r\n                borderRadius: '16px',\r\n                padding: '1.5rem',\r\n                cursor: 'pointer',\r\n                border: '1px solid rgba(255,255,255,0.1)',\r\n                transition: 'all 0.2s',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '1rem'\r\n            }}\r\n            onMouseEnter={e => {\r\n                e.currentTarget.style.transform = 'translateY(-4px)';\r\n                e.currentTarget.style.borderColor = 'var(--ice-mint)';\r\n            }}\r\n            onMouseLeave={e => {\r\n                e.currentTarget.style.transform = 'translateY(0)';\r\n                e.currentTarget.style.borderColor = 'rgba(255,255,255,0.1)';\r\n            }}\r\n        >\r\n            <div style={{\r\n                width: '48px',\r\n                height: '48px',\r\n                borderRadius: '12px',\r\n                background: 'rgba(127, 255, 212, 0.1)',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'center',\r\n                color: 'var(--ice-mint)'\r\n            }}>\r\n                <FaRocket size={20} />\r\n            </div>\r\n            <div>\r\n                <h4 style={{ margin: '0 0 0.25rem 0', color: '#fff', fontSize: '1.1rem' }}>{spacecard.title}</h4>\r\n                <p style={{ margin: 0, fontSize: '0.9rem', color: '#888' }}>{spacecard.description}</p>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default SpaceCard;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\SpaceCardBadge.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { FaRocket, FaCrown } from 'react-icons/fa';\r\nimport { RARITY_TIERS } from '@/services/SpaceCardService';\r\n\r\nconst SpaceCardBadge = ({ type = 'owner', rarity = 'Common', className = '' }) => {\r\n    const rarityInfo = RARITY_TIERS[rarity] || RARITY_TIERS.Common;\r\n\r\n    const styles = {\r\n        container: {\r\n            display: 'inline-flex',\r\n            alignItems: 'center',\r\n            gap: '6px',\r\n            padding: '4px 8px',\r\n            borderRadius: '12px',\r\n            fontSize: '0.75rem',\r\n            fontWeight: '600',\r\n            background: 'rgba(0, 0, 0, 0.6)',\r\n            border: `1px solid ${rarityInfo.color}`,\r\n            color: rarityInfo.color,\r\n            backdropFilter: 'blur(4px)',\r\n            boxShadow: rarityInfo.glow ? `0 0 8px ${rarityInfo.color}40` : 'none',\r\n            ...((rarityInfo.holographic) && {\r\n                background: `linear-gradient(135deg, ${rarityInfo.color}20, rgba(255,255,255,0.1), ${rarityInfo.color}20)`,\r\n                backgroundSize: '200% 200%',\r\n                animation: 'holoShift 3s ease infinite'\r\n            })\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div style={styles.container} className={className} title={`${rarity} SpaceCard ${type === 'creator' ? 'Creator' : 'Owner'}`}>\r\n            {type === 'creator' ? <FaCrown size={10} /> : <FaRocket size={10} />}\r\n            <span>{type === 'creator' ? 'CREATOR' : 'OWNER'}</span>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default SpaceCardBadge;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\SpaceCardComponent.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { FaStar, FaShoppingCart, FaUser } from 'react-icons/fa';\r\nimport { RARITY_TIERS } from '@/services/SpaceCardService';\r\n\r\n// Add keyframes for iridescent border animation\r\nconst styleSheet = document.styleSheets[0];\r\nconst keyframes = `\r\n@keyframes iridescent-border {\r\n    0% { border-color: #FF00FF; box-shadow: 0 0 20px #FF00FF, inset 0 0 20px rgba(255,0,255,0.3); }\r\n    16% { border-color: #FF0080; box-shadow: 0 0 20px #FF0080, inset 0 0 20px rgba(255,0,128,0.3); }\r\n    33% { border-color: #FF0000; box-shadow: 0 0 20px #FF0000, inset 0 0 20px rgba(255,0,0,0.3); }\r\n    50% { border-color: #FFD700; box-shadow: 0 0 20px #FFD700, inset 0 0 20px rgba(255,215,0,0.3); }\r\n    66% { border-color: #00FFFF; box-shadow: 0 0 20px #00FFFF, inset 0 0 20px rgba(0,255,255,0.3); }\r\n    83% { border-color: #0080FF; box-shadow: 0 0 20px #0080FF, inset 0 0 20px rgba(0,128,255,0.3); }\r\n    100% { border-color: #FF00FF; box-shadow: 0 0 20px #FF00FF, inset 0 0 20px rgba(255,0,255,0.3); }\r\n}\r\n\r\n@keyframes holographic {\r\n    0% { background-position: 0% 50%; }\r\n    50% { background-position: 100% 50%; }\r\n    100% { background-position: 0% 50%; }\r\n}\r\n`;\r\n\r\ntry {\r\n    styleSheet.insertRule(keyframes, styleSheet.cssRules.length);\r\n} catch (e) {\r\n    // Animation already exists or error inserting\r\n}\r\n\r\nconst SpaceCardComponent = ({ card, ownership, showPrice = false, compact = false }) => {\r\n    const navigate = useNavigate();\r\n    const [isFlipped, setIsFlipped] = useState(false);\r\n\r\n    const handleClick = () => {\r\n        if (card.images.back) {\r\n            setIsFlipped(!isFlipped);\r\n        } else {\r\n            navigate(`/cards/${card.id}`);\r\n        }\r\n    };\r\n\r\n    const rarityStyle = RARITY_TIERS[card.rarity] || RARITY_TIERS.Common;\r\n    const isMythic = card.rarity === 'mythic' || card.rarity === 'Mythic';\r\n\r\n    return (\r\n        <div\r\n            onClick={handleClick}\r\n            style={{\r\n                position: 'relative',\r\n                aspectRatio: '2.5/3.5',\r\n                cursor: 'pointer',\r\n                perspective: '1000px'\r\n            }}\r\n        >\r\n            <div style={{\r\n                position: 'relative',\r\n                width: '100%',\r\n                height: '100%',\r\n                transformStyle: 'preserve-3d',\r\n                transition: 'transform 0.6s',\r\n                transform: isFlipped ? 'rotateY(180deg)' : 'rotateY(0deg)'\r\n            }}>\r\n                {/* Front */}\r\n                <div style={{\r\n                    position: 'absolute',\r\n                    width: '100%',\r\n                    height: '100%',\r\n                    backfaceVisibility: 'hidden',\r\n                    borderRadius: '12px',\r\n                    overflow: 'hidden',\r\n                    border: isMythic ? '4px solid #FF00FF' : rarityStyle.border,\r\n                    boxShadow: rarityStyle.glow ? `0 0 20px ${rarityStyle.color}` : '0 4px 8px rgba(0,0,0,0.3)',\r\n                    background: '#000',\r\n                    animation: isMythic ? 'iridescent-border 3s ease-in-out infinite' : 'none'\r\n                }}>\r\n                    <img\r\n                        src={card.images.front}\r\n                        alt={card.title}\r\n                        style={{\r\n                            width: '100%',\r\n                            height: '100%',\r\n                            objectFit: 'cover'\r\n                        }}\r\n                    />\r\n\r\n                    {/* Overlay Info */}\r\n                    <div style={{\r\n                        position: 'absolute',\r\n                        bottom: 0,\r\n                        left: 0,\r\n                        right: 0,\r\n                        background: 'linear-gradient(to top, rgba(0,0,0,0.9), transparent)',\r\n                        padding: '1rem 0.75rem 0.75rem',\r\n                        color: '#fff'\r\n                    }}>\r\n                        <div style={{ fontSize: compact ? '0.8rem' : '0.9rem', fontWeight: '600', marginBottom: '0.25rem' }}>\r\n                            {card.title}\r\n                        </div>\r\n                        <div style={{ fontSize: '0.7rem', color: '#aaa', display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                            <FaUser size={10} />\r\n                            {card.creatorName}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Rarity Badge */}\r\n                    <div style={{\r\n                        position: 'absolute',\r\n                        top: '0.5rem',\r\n                        right: '0.5rem',\r\n                        background: rarityStyle.color,\r\n                        color: '#000',\r\n                        padding: '0.25rem 0.5rem',\r\n                        borderRadius: '4px',\r\n                        fontSize: '0.7rem',\r\n                        fontWeight: 'bold',\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        gap: '0.25rem'\r\n                    }}>\r\n                        <FaStar size={10} />\r\n                        {card.rarity}\r\n                    </div>\r\n\r\n                    {/* Edition Number */}\r\n                    {ownership && (\r\n                        <div style={{\r\n                            position: 'absolute',\r\n                            top: '0.5rem',\r\n                            left: '0.5rem',\r\n                            background: 'rgba(0,0,0,0.8)',\r\n                            color: '#fff',\r\n                            padding: '0.25rem 0.5rem',\r\n                            borderRadius: '4px',\r\n                            fontSize: '0.7rem',\r\n                            fontWeight: 'bold'\r\n                        }}>\r\n                            {ownership.isCreatorCopy ? 'Creator' : `#${ownership.editionNumber}`}\r\n                            {card.editionSize && !ownership.isCreatorCopy && `/${card.editionSize}`}\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* For Sale Indicator */}\r\n                    {ownership?.forSale && (\r\n                        <div style={{\r\n                            position: 'absolute',\r\n                            top: '0.5rem',\r\n                            left: '50%',\r\n                            transform: 'translateX(-50%)',\r\n                            background: '#7FFFD4',\r\n                            color: '#000',\r\n                            padding: '0.25rem 0.75rem',\r\n                            borderRadius: '12px',\r\n                            fontSize: '0.7rem',\r\n                            fontWeight: 'bold',\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            gap: '0.25rem'\r\n                        }}>\r\n                            <FaShoppingCart size={10} />\r\n                            ${ownership.salePrice}\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Price (for marketplace) */}\r\n                    {showPrice && !ownership?.forSale && card.basePrice > 0 && (\r\n                        <div style={{\r\n                            position: 'absolute',\r\n                            bottom: '3.5rem',\r\n                            left: '0.75rem',\r\n                            background: 'rgba(127, 255, 212, 0.9)',\r\n                            color: '#000',\r\n                            padding: '0.5rem 0.75rem',\r\n                            borderRadius: '8px',\r\n                            fontSize: '0.9rem',\r\n                            fontWeight: 'bold'\r\n                        }}>\r\n                            ${card.basePrice}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Back (if exists) */}\r\n                {card.images.back && (\r\n                    <div style={{\r\n                        position: 'absolute',\r\n                        width: '100%',\r\n                        height: '100%',\r\n                        backfaceVisibility: 'hidden',\r\n                        transform: 'rotateY(180deg)',\r\n                        borderRadius: '12px',\r\n                        overflow: 'hidden',\r\n                        border: isMythic ? '4px solid #FF00FF' : rarityStyle.border,\r\n                        boxShadow: rarityStyle.glow ? `0 0 20px ${rarityStyle.color}` : '0 4px 8px rgba(0,0,0,0.3)',\r\n                        background: '#000',\r\n                        animation: isMythic ? 'iridescent-border 3s ease-in-out infinite' : 'none'\r\n                    }}>\r\n                        <img\r\n                            src={card.images.back}\r\n                            alt={`${card.title} - Back`}\r\n                            style={{\r\n                                width: '100%',\r\n                                height: '100%',\r\n                                objectFit: 'cover'\r\n                            }}\r\n                        />\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Holographic Effect for Mythic */}\r\n            {card.rarity === 'Mythic' && (\r\n                <div style={{\r\n                    position: 'absolute',\r\n                    inset: 0,\r\n                    borderRadius: '12px',\r\n                    background: 'linear-gradient(45deg, transparent 30%, rgba(255,0,255,0.3) 50%, transparent 70%)',\r\n                    backgroundSize: '200% 200%',\r\n                    animation: 'holographic 3s ease infinite',\r\n                    pointerEvents: 'none'\r\n                }} />\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default SpaceCardComponent;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\SpaceIcons.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { FaRocket } from 'react-icons/fa';\r\n\r\nexport const RocketIcon = ({ size = 24, color = \"currentColor\" }) => (\r\n    <FaRocket size={size} color={color} />\r\n);\r\n\r\nexport const AstronautIcon = ({ size = 24, color = \"currentColor\" }) => (\r\n    <svg width={size} height={size} viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" style={{ minWidth: size }}>\r\n        <path\r\n            fillRule=\"evenodd\"\r\n            clipRule=\"evenodd\"\r\n            d=\"M12 1.25c-5.185 0-9.51 3.86-9.967 8.973A3.75 3.75 0 0 0 .75 13.75c0 1.96 1.503 3.57 3.415 3.735C5.7 20.84 8.6 22.75 12 22.75c3.4 0 6.3-1.91 7.835-5.265 1.912-.165 3.415-1.775 3.415-3.735a3.75 3.75 0 0 0-1.283-3.527C21.51 3.51 17.185 1.25 12 1.25zM12 5a6 6 0 0 0-6 6c0 3.314 2.686 6 6 6s6-2.686 6-6a6 6 0 0 0-6-6z\"\r\n            fill={color}\r\n        />\r\n    </svg>\r\n);\r\n\r\nexport const PlanetIcon = ({ size = 24, color = \"currentColor\" }) => (\r\n    <svg width={size} height={size} viewBox=\"0 0 32 32\" xmlns=\"http://www.w3.org/2000/svg\">\r\n        <g transform=\"rotate(-20 16 16)\">\r\n            <ellipse cx=\"16\" cy=\"16\" rx=\"11\" ry=\"3\" fill=\"none\" stroke={color} strokeWidth=\"2\" opacity=\"0.5\" />\r\n            <circle cx=\"16\" cy=\"16\" r=\"6\" fill={color} />\r\n            <ellipse cx=\"16\" cy=\"16\" rx=\"11\" ry=\"3\" fill=\"none\" stroke={color} strokeWidth=\"2\" strokeDasharray=\"4 6\" />\r\n        </g>\r\n    </svg>\r\n);\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\StarBackground.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo has an unnecessary dependency: 'isMobile'. Either exclude it or remove the dependency array.","line":62,"column":8,"nodeType":"ArrayExpression","endLine":62,"endColumn":18,"suggestions":[{"desc":"Update the dependencies array to be: []","fix":{"range":[2646,2656],"text":"[]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useMemo, useState, useEffect } from 'react';\r\n\r\nconst StarBackground = ({ starColor = '#7FFFD4', transparent = false, maskTop = false }) => {\r\n    // Detect if device is mobile to save battery\r\n    const [isMobile, setIsMobile] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const checkMobile = () => {\r\n            const mobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)\r\n                || window.innerWidth < 768;\r\n            setIsMobile(mobile);\r\n        };\r\n\r\n        checkMobile();\r\n        window.addEventListener('resize', checkMobile);\r\n        return () => window.removeEventListener('resize', checkMobile);\r\n    }, []);\r\n\r\n    // Create multiple layers of stars with different depths\r\n    const starLayers = useMemo(() => {\r\n        // Generate stars for all devices\r\n        // if (isMobile) return { far: [], mid: [], near: [], hidden: [] };\r\n\r\n        return {\r\n            far: [...Array(30)].map((_, i) => ({\r\n                id: `far-${i}`,\r\n                size: Math.random() * 1 + 0.5,\r\n                top: Math.random() * 100,\r\n                left: Math.random() * 100,\r\n                animationDuration: Math.random() * 5 + 8, // 8-13s\r\n                animationDelay: Math.random() * 5,\r\n                opacity: Math.random() * 0.3 + 0.2\r\n            })),\r\n            mid: [...Array(25)].map((_, i) => ({\r\n                id: `mid-${i}`,\r\n                size: Math.random() * 1.5 + 0.8,\r\n                top: Math.random() * 100,\r\n                left: Math.random() * 100,\r\n                animationDuration: Math.random() * 5 + 6, // 6-11s\r\n                animationDelay: Math.random() * 4,\r\n                opacity: Math.random() * 0.4 + 0.3\r\n            })),\r\n            near: [...Array(15)].map((_, i) => ({\r\n                id: `near-${i}`,\r\n                size: Math.random() * 2 + 1,\r\n                top: Math.random() * 100,\r\n                left: Math.random() * 100,\r\n                animationDuration: Math.random() * 4 + 5, // 5-9s\r\n                animationDelay: Math.random() * 3,\r\n                opacity: Math.random() * 0.6 + 0.4\r\n            })),\r\n            hidden: [...Array(20)].map((_, i) => ({ // New layer for emerging stars\r\n                id: `hidden-${i}`,\r\n                size: Math.random() * 1.5 + 0.5,\r\n                top: Math.random() * 100,\r\n                left: Math.random() * 100,\r\n                animationDuration: Math.random() * 10 + 15, // 15-25s (rare)\r\n                animationDelay: Math.random() * 20,\r\n                opacity: 0 // Start invisible\r\n            }))\r\n        };\r\n    }, [isMobile]);\r\n\r\n    return (\r\n        <div style={{\r\n            position: 'absolute',\r\n            top: 0,\r\n            left: 0,\r\n            width: '100%',\r\n            height: '100%',\r\n            pointerEvents: 'none',\r\n            zIndex: 0,\r\n            overflow: 'hidden',\r\n            background: transparent ? 'transparent' : 'radial-gradient(ellipse at center, rgba(10, 10, 20, 0.3) 0%, rgba(0, 0, 0, 0.95) 70%, #000 100%)',\r\n            maskImage: maskTop ? 'linear-gradient(to bottom, black 0%, black 40%, transparent 60%)' : 'none',\r\n            WebkitMaskImage: maskTop ? 'linear-gradient(to bottom, black 0%, black 40%, transparent 60%)' : 'none'\r\n        }}>\r\n            {/* Condition removed to show on mobile */}\r\n            <>\r\n                <style>{`\r\n                        @keyframes slow-twinkle {\r\n                            0% { opacity: 0.7; transform: scale(1); }\r\n                            80% { opacity: 0.7; transform: scale(1); }\r\n                            90% { opacity: 1; transform: scale(1.3); box-shadow: 0 0 8px ${starColor}; }\r\n                            100% { opacity: 0.7; transform: scale(1); }\r\n                        }\r\n                        @keyframes emerge-twinkle {\r\n                            0%, 85%, 100% { opacity: 0; transform: scale(0.5); }\r\n                            92% { opacity: 1; transform: scale(1.2); box-shadow: 0 0 6px ${starColor}; }\r\n                        }\r\n                        .star-item {\r\n                            position: absolute;\r\n                            background: ${starColor};\r\n                            border-radius: 50%;\r\n                            backface-visibility: hidden;\r\n                            transform: translateZ(0);\r\n                        }\r\n                        .star-far {\r\n                            box-shadow: 0 0 2px ${starColor};\r\n                        }\r\n                        .star-mid {\r\n                            box-shadow: 0 0 4px ${starColor};\r\n                        }\r\n                        .star-near {\r\n                            box-shadow: 0 0 6px ${starColor}, 0 0 12px ${starColor};\r\n                        }\r\n                        .star-hidden {\r\n                            box-shadow: 0 0 4px ${starColor};\r\n                        }\r\n                    `}</style>\r\n\r\n                {/* Far layer - steady background stars */}\r\n                {starLayers.far.map((star) => (\r\n                    <div\r\n                        key={star.id}\r\n                        className=\"star-item star-far\"\r\n                        style={{\r\n                            width: `${star.size}px`,\r\n                            height: `${star.size}px`,\r\n                            top: `${star.top}%`,\r\n                            left: `${star.left}%`,\r\n                            opacity: 0.6,\r\n                            animation: `slow-twinkle ${Math.random() * 10 + 12}s ease-in-out infinite`,\r\n                            animationDelay: `${Math.random() * 20}s`\r\n                        }}\r\n                    />\r\n                ))}\r\n\r\n                {/* Mid layer - occasional twinkle */}\r\n                {starLayers.mid.map((star) => (\r\n                    <div\r\n                        key={star.id}\r\n                        className=\"star-item star-mid\"\r\n                        style={{\r\n                            width: `${star.size}px`,\r\n                            height: `${star.size}px`,\r\n                            top: `${star.top}%`,\r\n                            left: `${star.left}%`,\r\n                            opacity: 0.7,\r\n                            animation: `slow-twinkle ${Math.random() * 8 + 10}s ease-in-out infinite`,\r\n                            animationDelay: `${Math.random() * 15}s`\r\n                        }}\r\n                    />\r\n                ))}\r\n\r\n                {/* Near layer - brighter, more active */}\r\n                {starLayers.near.map((star) => (\r\n                    <div\r\n                        key={star.id}\r\n                        className=\"star-item star-near\"\r\n                        style={{\r\n                            width: `${star.size}px`,\r\n                            height: `${star.size}px`,\r\n                            top: `${star.top}%`,\r\n                            left: `${star.left}%`,\r\n                            opacity: 0.8,\r\n                            animation: `slow-twinkle ${Math.random() * 6 + 8}s ease-in-out infinite`,\r\n                            animationDelay: `${Math.random() * 10}s`\r\n                        }}\r\n                    />\r\n                ))}\r\n\r\n                {/* Hidden layer - emerge from nowhere */}\r\n                {starLayers.hidden.map((star) => (\r\n                    <div\r\n                        key={star.id}\r\n                        className=\"star-item star-hidden\"\r\n                        style={{\r\n                            width: `${star.size}px`,\r\n                            height: `${star.size}px`,\r\n                            top: `${star.top}%`,\r\n                            left: `${star.left}%`,\r\n                            opacity: 0,\r\n                            animation: `emerge-twinkle ${star.animationDuration}s ease-in-out infinite`,\r\n                            animationDelay: `${star.animationDelay}s`\r\n                        }}\r\n                    />\r\n                ))}\r\n            </>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default React.memo(StarBackground);\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\TagFilterPanel.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"react-hooks/rules-of-hooks","severity":1,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":18,"column":47,"nodeType":"Identifier","endLine":18,"endColumn":55},{"ruleId":"react-hooks/rules-of-hooks","severity":1,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":19,"column":49,"nodeType":"Identifier","endLine":19,"endColumn":57}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { FaCheck, FaChevronDown, FaChevronUp } from 'react-icons/fa';\r\n\r\nconst TagFilterPanel = ({\r\n    category,\r\n    selectedTags = [],\r\n    onTagToggle,\r\n    isExpanded = true,\r\n    onToggleExpand\r\n}) => {\r\n    if (!category) return null;\r\n\r\n    // Get subcategories\r\n    const subcategories = category.subcategories || {};\r\n    const firstLevelNames = Object.keys(subcategories);\r\n\r\n    // State for 2-level navigation\r\n    const [selectedFirst, setSelectedFirst] = useState(null);\r\n    const [selectedSecond, setSelectedSecond] = useState(null);\r\n\r\n    // Build breadcrumb path\r\n    const selectedPath = selectedSecond\r\n        ? [selectedFirst, selectedSecond]\r\n        : selectedFirst\r\n            ? [selectedFirst]\r\n            : [];\r\n\r\n    // Determine what to render\r\n    let contentToRender = null;\r\n\r\n    if (!selectedFirst) {\r\n        // Show first-level subcategories\r\n        contentToRender = firstLevelNames;\r\n    } else if (selectedFirst && !selectedSecond) {\r\n        // Show second-level options (children of selectedFirst)\r\n        const firstLevelData = subcategories[selectedFirst];\r\n        if (Array.isArray(firstLevelData)) {\r\n            // Simple array - these are the tags\r\n            contentToRender = firstLevelData;\r\n        } else {\r\n            // Has second level - show second-level subcategories\r\n            contentToRender = firstLevelData;\r\n        }\r\n    } else {\r\n        // Show tags (children of selectedSecond)\r\n        const firstLevelData = subcategories[selectedFirst];\r\n        contentToRender = firstLevelData[selectedSecond] || firstLevelData;\r\n    }\r\n\r\n    // Check if current level has tags (not subcategories)\r\n    const isTagLevel = selectedFirst && Array.isArray(subcategories[selectedFirst]);\r\n\r\n    return (\r\n        <>\r\n            <style>{`\r\n                .tags-grid::-webkit-scrollbar,\r\n                .subcategory-row::-webkit-scrollbar {\r\n                    height: 4px;\r\n                }\r\n                .tags-grid::-webkit-scrollbar-track,\r\n                .subcategory-row::-webkit-scrollbar-track {\r\n                    background: rgba(255, 255, 255, 0.02);\r\n                    border-radius: 3px;\r\n                }\r\n                .tags-grid::-webkit-scrollbar-thumb,\r\n                .subcategory-row::-webkit-scrollbar-thumb {\r\n                    background: rgba(127, 255, 212, 0.3);\r\n                    border-radius: 3px;\r\n                }\r\n                .tags-grid::-webkit-scrollbar-thumb:hover,\r\n                .subcategory-row::-webkit-scrollbar-thumb:hover {\r\n                    background: rgba(127, 255, 212, 0.5);\r\n                }\r\n            `}</style>\r\n            <div className=\"tag-filter-panel\" style={{\r\n                marginBottom: '0.8rem',\r\n                background: 'rgba(0, 0, 0, 0.4)',\r\n                borderRadius: '12px',\r\n                border: '1px solid rgba(127, 255, 212, 0.3)',\r\n                boxShadow: '0 4px 24px rgba(0, 0, 0, 0.4), inset 0 0 20px rgba(127, 255, 212, 0.05)',\r\n                backdropFilter: 'blur(12px)',\r\n                WebkitBackdropFilter: 'blur(12px)',\r\n                overflow: 'hidden',\r\n                transition: 'all 0.3s ease',\r\n                width: '100%',\r\n                boxSizing: 'border-box'\r\n            }}>\r\n                <div\r\n                    className=\"panel-header\"\r\n                    onClick={onToggleExpand}\r\n                    style={{\r\n                        padding: '0.8rem 1.2rem',\r\n                        display: 'flex',\r\n                        justifyContent: 'space-between',\r\n                        alignItems: 'center',\r\n                        cursor: 'pointer',\r\n                        userSelect: 'none',\r\n                        borderBottom: isExpanded ? '1px solid rgba(255, 255, 255, 0.03)' : 'none',\r\n                        boxSizing: 'border-box'\r\n                    }}\r\n                >\r\n                    <span style={{\r\n                        fontWeight: 700,\r\n                        color: 'var(--ice-mint)',\r\n                        fontFamily: 'var(--font-family-heading)',\r\n                        letterSpacing: '0.15em',\r\n                        textTransform: 'uppercase',\r\n                        fontSize: '0.75rem',\r\n                        textShadow: '0 0 10px rgba(127, 255, 212, 0.2)'\r\n                    }}>\r\n                        {category.label}\r\n                    </span>\r\n                    {isExpanded ?\r\n                        <FaChevronUp size={10} color=\"var(--ice-mint)\" style={{ opacity: 0.8, filter: 'drop-shadow(0 0 5px rgba(127, 255, 212, 0.5))', flexShrink: 0, marginLeft: '0.5rem' }} /> :\r\n                        <FaChevronDown size={10} color=\"rgba(255, 255, 255, 0.3)\" style={{ flexShrink: 0, marginLeft: '0.5rem' }} />\r\n                    }\r\n                </div>\r\n\r\n                {isExpanded && (\r\n                    <div className=\"panel-content\" style={{\r\n                        padding: '0.5rem 1.2rem 1rem 1.2rem',\r\n                        width: '100%',\r\n                        boxSizing: 'border-box',\r\n                        overflow: 'hidden'\r\n                    }}>\r\n                        {/* Breadcrumb / Subcategory Row */}\r\n                        <div className=\"subcategory-row\" style={{\r\n                            display: 'flex',\r\n                            gap: '0.4rem',\r\n                            marginBottom: '0.7rem',\r\n                            overflowX: 'auto',\r\n                            overflowY: 'hidden',\r\n                            paddingBottom: '0.3rem',\r\n                            scrollbarWidth: 'thin',\r\n                            scrollbarColor: 'rgba(127, 255, 212, 0.3) rgba(255, 255, 255, 0.02)',\r\n                            WebkitOverflowScrolling: 'touch'\r\n                        }}>\r\n                            {selectedPath.length > 0 ? (\r\n                                // Show breadcrumb path\r\n                                selectedPath.map((pathItem, index) => (\r\n                                    <button\r\n                                        key={pathItem}\r\n                                        onClick={() => {\r\n                                            if (index === 0) {\r\n                                                // Clicked first level - clear all\r\n                                                setSelectedFirst(null);\r\n                                                setSelectedSecond(null);\r\n                                            } else if (index === 1) {\r\n                                                // Clicked second level - clear only second\r\n                                                setSelectedSecond(null);\r\n                                            }\r\n                                        }}\r\n                                        style={{\r\n                                            background: 'rgba(127, 255, 212, 0.2)',\r\n                                            border: '1px solid var(--ice-mint)',\r\n                                            color: 'var(--ice-mint)',\r\n                                            padding: '0.35rem 0.65rem',\r\n                                            borderRadius: '6px',\r\n                                            fontSize: '0.65rem',\r\n                                            cursor: 'pointer',\r\n                                            whiteSpace: 'nowrap',\r\n                                            fontFamily: 'var(--font-family-mono)',\r\n                                            letterSpacing: '0.05em',\r\n                                            textTransform: 'uppercase',\r\n                                            fontWeight: 600,\r\n                                            transition: 'all 0.2s ease',\r\n                                            boxShadow: '0 0 10px rgba(127, 255, 212, 0.2)'\r\n                                        }}\r\n                                    >\r\n                                        {pathItem}\r\n                                    </button>\r\n                                ))\r\n                            ) : (\r\n                                // Show first-level subcategories\r\n                                firstLevelNames.map(subcat => (\r\n                                    <button\r\n                                        key={subcat}\r\n                                        onClick={() => setSelectedFirst(subcat)}\r\n                                        style={{\r\n                                            background: 'rgba(255, 255, 255, 0.05)',\r\n                                            border: '1px solid rgba(255, 255, 255, 0.1)',\r\n                                            color: 'rgba(255, 255, 255, 0.7)',\r\n                                            padding: '0.35rem 0.65rem',\r\n                                            borderRadius: '6px',\r\n                                            fontSize: '0.65rem',\r\n                                            cursor: 'pointer',\r\n                                            whiteSpace: 'nowrap',\r\n                                            fontFamily: 'var(--font-family-mono)',\r\n                                            letterSpacing: '0.05em',\r\n                                            textTransform: 'uppercase',\r\n                                            fontWeight: 500,\r\n                                            transition: 'all 0.2s ease'\r\n                                        }}\r\n                                    >\r\n                                        {subcat}\r\n                                    </button>\r\n                                ))\r\n                            )}\r\n                        </div>\r\n\r\n                        {/* Content Row - Second-level subcategories OR Tags */}\r\n                        {selectedFirst && (\r\n                            <div className=\"tags-grid\" style={{\r\n                                display: 'grid',\r\n                                gridTemplateRows: 'repeat(2, min-content)',\r\n                                gridAutoFlow: 'column',\r\n                                gridAutoColumns: 'max-content',\r\n                                gap: '0.4rem',\r\n                                rowGap: '0.5rem',\r\n                                width: '100%',\r\n                                overflowX: 'auto',\r\n                                overflowY: 'hidden',\r\n                                paddingBottom: '0.5rem',\r\n                                scrollbarWidth: 'thin',\r\n                                scrollbarColor: 'rgba(127, 255, 212, 0.3) rgba(255, 255, 255, 0.02)',\r\n                                touchAction: 'pan-y pan-x',\r\n                                WebkitOverflowScrolling: 'touch'\r\n                            }}>\r\n                                {isTagLevel || selectedSecond ? (\r\n                                    // Render tags\r\n                                    (Array.isArray(contentToRender) ? contentToRender : []).map(tag => {\r\n                                        const isSelected = selectedTags.includes(tag);\r\n                                        return (\r\n                                            <button\r\n                                                key={tag}\r\n                                                onClick={() => onTagToggle(tag)}\r\n                                                style={{\r\n                                                    background: isSelected ? 'rgba(127, 255, 212, 0.15)' : 'rgba(255, 255, 255, 0.03)',\r\n                                                    border: isSelected ? '1px solid var(--ice-mint)' : '1px solid rgba(255, 255, 255, 0.08)',\r\n                                                    color: isSelected ? 'var(--ice-mint)' : '#ffffff',\r\n                                                    padding: '0.5rem 0.9rem',\r\n                                                    borderRadius: '6px',\r\n                                                    fontSize: '0.72rem',\r\n                                                    cursor: 'pointer',\r\n                                                    display: 'inline-flex',\r\n                                                    alignItems: 'center',\r\n                                                    gap: '0.4rem',\r\n                                                    transition: 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)',\r\n                                                    whiteSpace: 'nowrap',\r\n                                                    fontFamily: 'var(--font-family-mono)',\r\n                                                    letterSpacing: '0.05em',\r\n                                                    textTransform: 'uppercase',\r\n                                                    fontWeight: isSelected ? 600 : 400,\r\n                                                    boxShadow: isSelected ? '0 0 15px rgba(127, 255, 212, 0.15), inset 0 0 10px rgba(127, 255, 212, 0.05)' : 'none',\r\n                                                    position: 'relative',\r\n                                                    overflow: 'visible',\r\n                                                    backdropFilter: 'blur(5px)',\r\n                                                    minWidth: 'fit-content',\r\n                                                    width: 'auto'\r\n                                                }}\r\n                                                onMouseEnter={(e) => {\r\n                                                    if (!isSelected) {\r\n                                                        e.currentTarget.style.background = 'rgba(255, 255, 255, 0.08)';\r\n                                                        e.currentTarget.style.borderColor = 'rgba(255, 255, 255, 0.2)';\r\n                                                        e.currentTarget.style.color = '#fff';\r\n                                                        e.currentTarget.style.boxShadow = '0 0 10px rgba(255, 255, 255, 0.05)';\r\n                                                    }\r\n                                                }}\r\n                                                onMouseLeave={(e) => {\r\n                                                    if (!isSelected) {\r\n                                                        e.currentTarget.style.background = 'rgba(255, 255, 255, 0.03)';\r\n                                                        e.currentTarget.style.borderColor = 'rgba(255, 255, 255, 0.08)';\r\n                                                        e.currentTarget.style.color = 'rgba(255, 255, 255, 0.95)';\r\n                                                        e.currentTarget.style.boxShadow = 'none';\r\n                                                    }\r\n                                                }}\r\n                                            >\r\n                                                {isSelected && <FaCheck size={9} style={{ filter: 'drop-shadow(0 0 2px var(--ice-mint))' }} />}\r\n                                                {tag}\r\n                                            </button>\r\n                                        );\r\n                                    })\r\n                                ) : (\r\n                                    // Render second-level subcategories\r\n                                    Object.keys(contentToRender || {}).map(secondLevel => (\r\n                                        <button\r\n                                            key={secondLevel}\r\n                                            onClick={() => setSelectedSecond(secondLevel)}\r\n                                            style={{\r\n                                                background: 'rgba(255, 255, 255, 0.05)',\r\n                                                border: '1px solid rgba(255, 255, 255, 0.1)',\r\n                                                color: 'rgba(255, 255, 255, 0.7)',\r\n                                                padding: '0.5rem 0.9rem',\r\n                                                borderRadius: '6px',\r\n                                                fontSize: '0.72rem',\r\n                                                cursor: 'pointer',\r\n                                                whiteSpace: 'nowrap',\r\n                                                fontFamily: 'var(--font-family-mono)',\r\n                                                letterSpacing: '0.05em',\r\n                                                textTransform: 'uppercase',\r\n                                                fontWeight: 500,\r\n                                                transition: 'all 0.2s ease',\r\n                                                minWidth: 'fit-content',\r\n                                                width: 'auto'\r\n                                            }}\r\n                                        >\r\n                                            {secondLevel}\r\n                                        </button>\r\n                                    ))\r\n                                )}\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default TagFilterPanel;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\Toast.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect } from 'react';\r\nimport { FaCheckCircle, FaTimes } from 'react-icons/fa';\r\n\r\nconst Toast = ({ message, type = 'success', onClose }) => {\r\n    useEffect(() => {\r\n        const timer = setTimeout(() => {\r\n            onClose();\r\n        }, 3000);\r\n        return () => clearTimeout(timer);\r\n    }, [onClose]);\r\n\r\n    return (\r\n        <div style={{\r\n            position: 'fixed',\r\n            top: '2rem',\r\n            right: '2rem',\r\n            background: type === 'success' ? 'rgba(34, 197, 94, 0.95)' : 'rgba(239, 68, 68, 0.95)',\r\n            backdropFilter: 'blur(20px)',\r\n            color: '#fff',\r\n            padding: '1rem 1.5rem',\r\n            borderRadius: '12px',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '1rem',\r\n            boxShadow: '0 10px 40px rgba(0, 0, 0, 0.3)',\r\n            zIndex: 10000,\r\n            animation: 'slideInDown 0.3s ease-out',\r\n            minWidth: '300px'\r\n        }}>\r\n            <FaCheckCircle size={24} />\r\n            <span style={{ flex: 1, fontWeight: '500' }}>{message}</span>\r\n            <button\r\n                onClick={onClose}\r\n                style={{\r\n                    background: 'transparent',\r\n                    border: 'none',\r\n                    color: '#fff',\r\n                    cursor: 'pointer',\r\n                    padding: '0.25rem',\r\n                    display: 'flex',\r\n                    alignItems: 'center'\r\n                }}\r\n            >\r\n                <FaTimes size={16} />\r\n            </button>\r\n            <style>{`\r\n                @keyframes slideInDown {\r\n                    from {\r\n                        opacity: 0;\r\n                        transform: translateY(-20px);\r\n                    }\r\n                    to {\r\n                        opacity: 1;\r\n                        transform: translateY(0);\r\n                    }\r\n                }\r\n            `}</style>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Toast;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\ToastManager.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { useToast } from '@/context/ToastContext';\r\nimport './ToastManager.css';\r\n\r\nconst ToastManager = () => {\r\n    const { toasts, removeToast } = useToast();\r\n\r\n    return (\r\n        <div className=\"toast-container\">\r\n            {toasts.map(toast => (\r\n                <Toast\r\n                    key={toast.id}\r\n                    toast={toast}\r\n                    onClose={() => removeToast(toast.id)}\r\n                />\r\n            ))}\r\n        </div>\r\n    );\r\n};\r\n\r\nconst Toast = ({ toast, onClose }) => {\r\n    const getIcon = () => {\r\n        switch (toast.type) {\r\n            case 'success':\r\n                return 'Γ£ô';\r\n            case 'error':\r\n                return 'Γ£ò';\r\n            case 'warning':\r\n                return 'ΓÜá';\r\n            case 'info':\r\n            default:\r\n                return 'Γä╣';\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className={`toast toast-${toast.type}`}>\r\n            <div className=\"toast-icon\">{getIcon()}</div>\r\n            <div className=\"toast-message\">{toast.message}</div>\r\n            <button className=\"toast-close\" onClick={onClose} aria-label=\"Close\">\r\n                ├ù\r\n            </button>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ToastManager;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\UserCard.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport PlanetUserIcon from '@/components/PlanetUserIcon';\r\n\r\nimport { renderCosmicUsername } from '@/utils/usernameRenderer';\r\n\r\nconst UserCard = ({ user }) => {\r\n    const navigate = useNavigate();\r\n    return (\r\n        <div\r\n            onClick={() => navigate(`/profile/${user.id}`)}\r\n            style={{\r\n                background: 'rgba(255,255,255,0.03)',\r\n                borderRadius: '12px',\r\n                padding: '1.5rem',\r\n                cursor: 'pointer',\r\n                border: '1px solid rgba(255,255,255,0.05)',\r\n                transition: 'transform 0.2s',\r\n                textAlign: 'center'\r\n            }}\r\n            onMouseEnter={e => e.currentTarget.style.transform = 'translateY(-4px)'}\r\n            onMouseLeave={e => e.currentTarget.style.transform = 'translateY(0)'}\r\n        >\r\n            <div style={{\r\n                width: '80px',\r\n                height: '80px',\r\n                borderRadius: '20px', // Updated to match Profile (rounded square)\r\n                overflow: 'hidden',\r\n                background: '#333',\r\n                margin: '0 auto 1rem auto',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'center'\r\n            }}>\r\n                {user.photoURL ? (\r\n                    <img\r\n                        src={user.photoURL}\r\n                        alt={user.displayName}\r\n                        loading=\"lazy\"\r\n                        style={{ width: '100%', height: '100%', objectFit: 'cover' }}\r\n                    />\r\n                ) : (\r\n                    <PlanetUserIcon size={56} color={user.profileTheme?.usernameColor || '#7FFFD4'} />\r\n                )}\r\n            </div>\r\n            <h4 style={{ margin: '0 0 0.25rem 0', color: '#fff', fontSize: '1rem' }}>\r\n                {renderCosmicUsername(user.username || user.displayName || 'User')}\r\n            </h4>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default UserCard;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\WalletDisplay.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"react-hooks/rules-of-hooks","severity":1,"message":"React Hook \"useEffect\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":27,"column":5,"nodeType":"Identifier","endLine":27,"endColumn":14},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchBalance'. Either include it or remove the dependency array.","line":29,"column":8,"nodeType":"ArrayExpression","endLine":29,"endColumn":16,"suggestions":[{"desc":"Update the dependencies array to be: [fetchBalance, userId]","fix":{"range":[1020,1028],"text":"[fetchBalance, userId]"}}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'amount' is defined but never used. Allowed unused args must match /^_/u.","line":31,"column":31,"nodeType":"Identifier","messageId":"unusedVar","endLine":31,"endColumn":37}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { FaWallet, FaPlus } from 'react-icons/fa';\r\nimport { WalletService } from '@/services/WalletService';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport AddFundsModal from './monetization/AddFundsModal';\r\n\r\nconst WalletDisplay = ({ userId }) => {\r\n    const { currentUser } = useAuth();\r\n    const [balance, setBalance] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [showAddFunds, setShowAddFunds] = useState(false);\r\n\r\n    // Only show for the logged-in user\r\n    if (!currentUser || currentUser.uid !== userId) return null;\r\n\r\n    const fetchBalance = async () => {\r\n        try {\r\n            const wallet = await WalletService.getWallet(userId);\r\n            setBalance(wallet ? wallet.balance : 0);\r\n        } catch (err) {\r\n            console.error(\"Error fetching wallet:\", err);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchBalance();\r\n    }, [userId]);\r\n\r\n    const handleFundsAdded = (amount) => {\r\n        fetchBalance(); // Refresh balance immediately\r\n        // Optional: Show a toast notification here\r\n    };\r\n\r\n    if (loading) return null;\r\n\r\n    return (\r\n        <>\r\n            <div style={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '0.5rem',\r\n                background: 'rgba(0,0,0,0.3)',\r\n                padding: '0.4rem 0.8rem',\r\n                borderRadius: '20px',\r\n                border: '1px solid rgba(127, 255, 212, 0.2)',\r\n                fontSize: '0.9rem',\r\n                color: '#7FFFD4',\r\n                cursor: 'pointer',\r\n                transition: 'all 0.2s'\r\n            }}\r\n                onClick={() => setShowAddFunds(true)}\r\n                title=\"Add Funds to Wallet\"\r\n            >\r\n                <FaWallet size={14} />\r\n                <span style={{ fontWeight: 'bold' }}>${balance?.toFixed(2) || '0.00'}</span>\r\n                <div style={{\r\n                    width: '18px',\r\n                    height: '18px',\r\n                    background: 'rgba(127, 255, 212, 0.2)',\r\n                    borderRadius: '50%',\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'center',\r\n                    marginLeft: '0.2rem'\r\n                }}>\r\n                    <FaPlus size={8} color=\"#7FFFD4\" />\r\n                </div>\r\n            </div>\r\n\r\n            {showAddFunds && (\r\n                <AddFundsModal\r\n                    currentBalance={balance}\r\n                    onClose={() => setShowAddFunds(false)}\r\n                    onSuccess={handleFundsAdded}\r\n                />\r\n            )}\r\n        </>\r\n    );\r\n};\r\n\r\nexport default WalletDisplay;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\WalletModal.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaHistory' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":29},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'formatPrice' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { FaWallet, FaHistory, FaArrowUp, FaArrowDown, FaTimes, FaPlus } from 'react-icons/fa';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { WalletService } from '@/services/WalletService';\r\nimport { formatPrice } from '@/core/utils/helpers';\r\nimport useModalEscape from '@/hooks/useModalEscape';\r\nimport StarBackground from './StarBackground';\r\n\r\nconst WalletModal = ({ onClose }) => {\r\n    const { currentUser } = useAuth();\r\n    const [wallet, setWallet] = useState(null);\r\n    const [transactions, setTransactions] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [activeTab, setActiveTab] = useState('balance'); // 'balance' or 'history'\r\n\r\n    useEffect(() => {\r\n        const fetchData = async () => {\r\n            if (currentUser) {\r\n                setLoading(true);\r\n                try {\r\n                    const [walletData, txData] = await Promise.all([\r\n                        WalletService.getWallet(currentUser.uid),\r\n                        WalletService.getTransactions(currentUser.uid)\r\n                    ]);\r\n                    setWallet(walletData);\r\n                    setTransactions(txData);\r\n                } catch (error) {\r\n                    console.error(\"Error loading wallet data:\", error);\r\n                } finally {\r\n                    setLoading(false);\r\n                }\r\n            }\r\n        };\r\n        fetchData();\r\n    }, [currentUser]);\r\n\r\n    // Modal escape handling\r\n    const { handleBackdropClick } = useModalEscape(true, onClose);\r\n\r\n    const handleAddFunds = async () => {\r\n        // Mock Deposit\r\n        const amount = 100; // $100\r\n        if (window.confirm(`Add $${amount} to your wallet (Test Mode)?`)) {\r\n            try {\r\n                await WalletService.addFunds(currentUser.uid, amount, 'deposit', 'Test Deposit');\r\n                alert(\"Funds added!\");\r\n                // Refresh data\r\n                const [walletData, txData] = await Promise.all([\r\n                    WalletService.getWallet(currentUser.uid),\r\n                    WalletService.getTransactions(currentUser.uid)\r\n                ]);\r\n                setWallet(walletData);\r\n                setTransactions(txData);\r\n            } catch (error) {\r\n                alert(\"Failed to add funds\");\r\n            }\r\n        }\r\n    };\r\n\r\n    if (!currentUser) return null;\r\n\r\n    return (\r\n        <div\r\n            onClick={handleBackdropClick}\r\n            style={{\r\n                position: 'fixed',\r\n                inset: 0,\r\n                background: 'rgba(0,0,0,0.8)',\r\n                backdropFilter: 'blur(8px)',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'center',\r\n                zIndex: 2000\r\n            }}\r\n        >\r\n            <div\r\n                onClick={(e) => e.stopPropagation()}\r\n                style={{\r\n                    background: '#0a0a0a',\r\n                    border: '1px solid #333',\r\n                    borderRadius: '16px',\r\n                    width: '90%',\r\n                    maxWidth: '500px',\r\n                    maxHeight: '80vh',\r\n                    display: 'flex',\r\n                    flexDirection: 'column',\r\n                    overflow: 'hidden',\r\n                    boxShadow: '0 20px 50px rgba(0,0,0,0.8)',\r\n                    position: 'relative'\r\n                }}>\r\n\r\n                {/* Star Background */}\r\n                <StarBackground starColor=\"#7FFFD4\" />\r\n\r\n                {/* Header */}\r\n                <div style={{\r\n                    padding: '1.5rem',\r\n                    borderBottom: '1px solid #333',\r\n                    display: 'flex',\r\n                    justifyContent: 'space-between',\r\n                    alignItems: 'center',\r\n                    position: 'relative',\r\n                    zIndex: 1\r\n                }}>\r\n                    <h2 style={{ margin: 0, display: 'flex', alignItems: 'center', gap: '0.75rem', fontSize: '1.25rem' }}>\r\n                        <FaWallet style={{ color: '#7FFFD4' }} /> My Wallet\r\n                    </h2>\r\n                    <button\r\n                        onClick={onClose}\r\n                        style={{\r\n                            background: 'transparent',\r\n                            border: 'none',\r\n                            color: '#888',\r\n                            cursor: 'pointer',\r\n                            fontSize: '1.2rem',\r\n                            minWidth: '44px',\r\n                            minHeight: '44px',\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            justifyContent: 'center',\r\n                            padding: '10px'\r\n                        }}\r\n                        aria-label=\"Close wallet\"\r\n                    >\r\n                        <FaTimes />\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Tabs */}\r\n                <div style={{ display: 'flex', borderBottom: '1px solid #333', position: 'relative', zIndex: 1 }}>\r\n                    <button\r\n                        onClick={() => setActiveTab('balance')}\r\n                        style={{\r\n                            flex: 1,\r\n                            padding: '1rem',\r\n                            background: activeTab === 'balance' ? 'rgba(127, 255, 212, 0.05)' : 'transparent',\r\n                            border: 'none',\r\n                            borderBottom: activeTab === 'balance' ? '2px solid #7FFFD4' : '2px solid transparent',\r\n                            color: activeTab === 'balance' ? '#7FFFD4' : '#888',\r\n                            cursor: 'pointer',\r\n                            fontWeight: '600',\r\n                            transition: 'all 0.2s'\r\n                        }}\r\n                    >\r\n                        Balance\r\n                    </button>\r\n                    <button\r\n                        onClick={() => setActiveTab('history')}\r\n                        style={{\r\n                            flex: 1,\r\n                            padding: '1rem',\r\n                            background: activeTab === 'history' ? 'rgba(127, 255, 212, 0.05)' : 'transparent',\r\n                            border: 'none',\r\n                            borderBottom: activeTab === 'history' ? '2px solid #7FFFD4' : '2px solid transparent',\r\n                            color: activeTab === 'history' ? '#7FFFD4' : '#888',\r\n                            cursor: 'pointer',\r\n                            fontWeight: '600',\r\n                            transition: 'all 0.2s'\r\n                        }}\r\n                    >\r\n                        History\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Content */}\r\n                <div style={{ padding: '1.5rem', overflowY: 'auto', flex: 1, position: 'relative', zIndex: 1 }}>\r\n                    {loading ? (\r\n                        <div style={{ textAlign: 'center', padding: '2rem', color: '#888' }}>Loading wallet data...</div>\r\n                    ) : activeTab === 'balance' ? (\r\n                        <div style={{ display: 'flex', flexDirection: 'column', gap: '1.5rem' }}>\r\n                            <div style={{\r\n                                background: 'linear-gradient(135deg, #2a2a2a 0%, #1a1a1a 100%)',\r\n                                padding: '2rem',\r\n                                borderRadius: '12px',\r\n                                textAlign: 'center',\r\n                                border: '1px solid #333'\r\n                            }}>\r\n                                <div style={{ color: '#888', marginBottom: '0.5rem', fontSize: '0.9rem' }}>Available Balance</div>\r\n                                <div style={{ fontSize: '2.5rem', fontWeight: 'bold', color: '#fff' }}>\r\n                                    ${wallet?.balance?.toFixed(2) || '0.00'}\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '1rem' }}>\r\n                                <div style={{ background: '#222', padding: '1rem', borderRadius: '8px', border: '1px solid #333' }}>\r\n                                    <div style={{ color: '#888', fontSize: '0.8rem', marginBottom: '0.25rem' }}>Lifetime Earnings</div>\r\n                                    <div style={{ fontSize: '1.1rem', fontWeight: 'bold', color: '#7FFFD4' }}>\r\n                                        +${wallet?.lifetimeEarnings?.toFixed(2) || '0.00'}\r\n                                    </div>\r\n                                </div>\r\n                                <div style={{ background: '#222', padding: '1rem', borderRadius: '8px', border: '1px solid #333' }}>\r\n                                    <div style={{ color: '#888', fontSize: '0.8rem', marginBottom: '0.25rem' }}>Lifetime Spent</div>\r\n                                    <div style={{ fontSize: '1.1rem', fontWeight: 'bold', color: '#ff6b6b' }}>\r\n                                        -${wallet?.lifetimeSpent?.toFixed(2) || '0.00'}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div style={{ display: 'flex', gap: '1rem', marginTop: '1rem' }}>\r\n                                <button\r\n                                    onClick={handleAddFunds}\r\n                                    style={{\r\n                                        flex: 1,\r\n                                        padding: '1rem',\r\n                                        background: '#7FFFD4',\r\n                                        color: '#000',\r\n                                        border: 'none',\r\n                                        borderRadius: '8px',\r\n                                        fontWeight: 'bold',\r\n                                        cursor: 'pointer',\r\n                                        display: 'flex',\r\n                                        alignItems: 'center',\r\n                                        justifyContent: 'center',\r\n                                        gap: '0.5rem'\r\n                                    }}\r\n                                >\r\n                                    <FaPlus /> Add Funds\r\n                                </button>\r\n                                <button\r\n                                    disabled={!wallet?.balance || wallet.balance < 25}\r\n                                    title={(!wallet?.balance || wallet.balance < 25) ? \"Minimum withdrawal is $25\" : \"Withdraw funds\"}\r\n                                    style={{\r\n                                        flex: 1,\r\n                                        padding: '1rem',\r\n                                        background: '#333',\r\n                                        color: '#fff',\r\n                                        border: '1px solid #444',\r\n                                        borderRadius: '8px',\r\n                                        fontWeight: 'bold',\r\n                                        cursor: (!wallet?.balance || wallet.balance < 25) ? 'not-allowed' : 'pointer',\r\n                                        opacity: (!wallet?.balance || wallet.balance < 25) ? 0.5 : 1\r\n                                    }}\r\n                                >\r\n                                    Withdraw\r\n                                </button>\r\n                            </div>\r\n                            {(!wallet?.balance || wallet.balance < 25) && (\r\n                                <div style={{ textAlign: 'center', color: '#666', fontSize: '0.8rem' }}>\r\n                                    Minimum withdrawal amount is $25.00\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    ) : (\r\n                        <div style={{ display: 'flex', flexDirection: 'column', gap: '0.5rem' }}>\r\n                            {transactions.length === 0 ? (\r\n                                <div style={{ textAlign: 'center', color: '#666', padding: '2rem' }}>No transactions yet</div>\r\n                            ) : (\r\n                                transactions.map(tx => (\r\n                                    <div key={tx.id} style={{\r\n                                        background: '#222',\r\n                                        padding: '1rem',\r\n                                        borderRadius: '8px',\r\n                                        display: 'flex',\r\n                                        justifyContent: 'space-between',\r\n                                        alignItems: 'center',\r\n                                        border: '1px solid #333'\r\n                                    }}>\r\n                                        <div style={{ display: 'flex', alignItems: 'center', gap: '1rem' }}>\r\n                                            <div style={{\r\n                                                width: '40px',\r\n                                                height: '40px',\r\n                                                borderRadius: '50%',\r\n                                                background: tx.amount > 0 ? 'rgba(127, 255, 212, 0.1)' : 'rgba(255, 107, 107, 0.1)',\r\n                                                display: 'flex',\r\n                                                alignItems: 'center',\r\n                                                justifyContent: 'center',\r\n                                                color: tx.amount > 0 ? '#7FFFD4' : '#ff6b6b'\r\n                                            }}>\r\n                                                {tx.amount > 0 ? <FaArrowUp /> : <FaArrowDown />}\r\n                                            </div>\r\n                                            <div>\r\n                                                <div style={{ fontWeight: 'bold', color: '#fff' }}>{tx.description}</div>\r\n                                                <div style={{ fontSize: '0.8rem', color: '#666' }}>\r\n                                                    {tx.createdAt?.toLocaleDateString()} ΓÇó {tx.type.toUpperCase()}\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div style={{\r\n                                            fontWeight: 'bold',\r\n                                            color: tx.amount > 0 ? '#7FFFD4' : '#ff6b6b',\r\n                                            fontSize: '1.1rem'\r\n                                        }}>\r\n                                            {tx.amount > 0 ? '+' : ''}${Math.abs(tx.amount).toFixed(2)}\r\n                                        </div>\r\n                                    </div>\r\n                                ))\r\n                            )}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default WalletModal;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\common\\CosmicEmojiPicker.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useRef, useEffect } from 'react';\r\nimport { ALL_PICKER_EMOJIS } from '@/utils/emojiToCodeMap';\r\n\r\n/**\r\n * CosmicEmojiPicker\r\n * Generic horizontal scroll emoji picker for PanoSpace custom emojis.\r\n */\r\nconst CosmicEmojiPicker = ({ visible, onSelect, style = {} }) => {\r\n    const scrollContainerRef = useRef(null);\r\n\r\n    // Desktop horizontal scroll support\r\n    useEffect(() => {\r\n        const el = scrollContainerRef.current;\r\n        if (!el) return;\r\n\r\n        const handleWheel = (e) => {\r\n            if (e.deltaY !== 0) {\r\n                e.preventDefault();\r\n                el.scrollLeft += e.deltaY;\r\n            }\r\n        };\r\n\r\n        el.addEventListener('wheel', handleWheel, { passive: false });\r\n        // Clean up\r\n        return () => el.removeEventListener('wheel', handleWheel);\r\n    }, []);\r\n\r\n    if (!visible) return null;\r\n\r\n    return (\r\n        <div\r\n            className=\"cosmic-emoji-picker\"\r\n            style={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                padding: '0 0.5rem',\r\n                overflowX: 'auto',\r\n                WebkitOverflowScrolling: 'touch',\r\n                pointerEvents: 'auto',\r\n                background: 'rgba(20, 20, 25, 0.95)',\r\n                border: '1px solid rgba(255,255,255,0.1)',\r\n                borderRadius: '8px',\r\n                height: '50px',\r\n                width: '100%',\r\n                maxWidth: '100%',\r\n                boxSizing: 'border-box',\r\n                zIndex: 100,\r\n                ...style\r\n            }}\r\n            onMouseDown={(e) => e.stopPropagation()}\r\n            onTouchStart={(e) => e.stopPropagation()}\r\n        >\r\n\r\n\r\n            <div ref={scrollContainerRef} style={{ display: 'flex', gap: '8px', height: '100%', alignItems: 'center', minWidth: 'min-content' }}>\r\n                {ALL_PICKER_EMOJIS.map((emoji) => (\r\n                    <button\r\n                        key={emoji}\r\n                        onClick={(e) => {\r\n                            e.preventDefault();\r\n                            e.stopPropagation();\r\n                            onSelect(emoji);\r\n                        }}\r\n                        onMouseDown={(e) => e.preventDefault()}\r\n                        style={{\r\n                            background: 'transparent',\r\n                            border: '1px solid rgba(255,255,255,0.05)',\r\n                            color: '#fff',\r\n                            fontSize: '1.4rem',\r\n                            cursor: 'pointer',\r\n                            padding: '0',\r\n                            width: '36px',\r\n                            height: '36px',\r\n                            borderRadius: '6px',\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            justifyContent: 'center',\r\n                            transition: 'all 0.1s',\r\n                            flexShrink: 0\r\n                        }}\r\n                        onMouseEnter={(e) => {\r\n                            e.currentTarget.style.background = 'rgba(255,255,255,0.1)';\r\n                            e.currentTarget.style.transform = 'scale(1.1)';\r\n                        }}\r\n                        onMouseLeave={(e) => {\r\n                            e.currentTarget.style.background = 'transparent';\r\n                            e.currentTarget.style.transform = 'scale(1)';\r\n                        }}\r\n                    >\r\n                        {emoji}\r\n                    </button>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CosmicEmojiPicker;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\common\\CosmicText.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { renderCosmicUsername } from '@/utils/usernameRenderer';\r\n\r\n/**\r\n * CosmicText\r\n * Renders text with PanoSpace custom emojis mixed in.\r\n * reusable wrapper around usernameRenderer logic.\r\n */\r\nconst CosmicText = ({ text, color, glow, style, className }) => {\r\n    return (\r\n        <span className={className} style={{ display: 'inline-flex', alignItems: 'center', ...style }}>\r\n            {renderCosmicUsername(text, color, glow)}\r\n        </span>\r\n    );\r\n};\r\n\r\nexport default CosmicText;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\common\\PanoDateInput.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, forwardRef } from 'react';\r\nimport DatePicker from 'react-datepicker';\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\nimport { FaCalendarAlt } from 'react-icons/fa';\r\n\r\n/**\r\n * PanoDateInput\r\n * A reusable date picker component following the PanoSpace design system.\r\n * \r\n * Props:\r\n * - selected: Date object or null\r\n * - onChange: (date: Date) => void\r\n * - placeholder: string\r\n * - showTimeSelect: boolean (default false)\r\n * - dateFormat: string (default 'MMM d, yyyy')\r\n * - className: string (optional wrapper class)\r\n * - ...other datepicker props\r\n */\r\n\r\n// Custom Input Component\r\nconst CustomInput = forwardRef(({ value, onClick, onChange, isOpen, placeholder, readOnly }, ref) => (\r\n    <div className={`pano-date-input-wrapper ${isOpen ? 'active' : ''}`} onClick={onClick} ref={ref}>\r\n        <input\r\n            value={value}\r\n            onChange={onChange}\r\n            className=\"pano-date-input\"\r\n            placeholder={placeholder}\r\n            readOnly={readOnly}\r\n        />\r\n        <div className=\"calendar-icon-btn\">\r\n            <FaCalendarAlt />\r\n        </div>\r\n    </div>\r\n));\r\n\r\nconst PanoDateInput = ({\r\n    selected,\r\n    onChange,\r\n    placeholder = \"Select Date\",\r\n    showTimeSelect = false,\r\n    dateFormat = \"MMM d, yyyy\",\r\n    className = \"\",\r\n    readOnly = true, // Default to true to force picker use\r\n    ...props\r\n}) => {\r\n    const [isOpen, setIsOpen] = useState(false);\r\n\r\n    // Helper to ensure we don't pass invalid props to DatePicker \r\n    // or handle specific logic if needed.\r\n\r\n    const handleChange = (date) => {\r\n        onChange(date);\r\n        setIsOpen(false);\r\n    };\r\n\r\n    return (\r\n        <div className={`pano-date-input-container ${className}`}>\r\n            <DatePicker\r\n                selected={selected}\r\n                onChange={handleChange}\r\n                open={isOpen}\r\n                onInputClick={() => setIsOpen(!isOpen)}\r\n                onClickOutside={() => setIsOpen(false)}\r\n                showTimeSelect={showTimeSelect}\r\n                timeFormat=\"h:mm aa\"\r\n                timeIntervals={15}\r\n                dateFormat={showTimeSelect ? \"MMM d, yyyy h:mm aa\" : dateFormat}\r\n                placeholderText={placeholder}\r\n                customInput={<CustomInput isOpen={isOpen} placeholder={placeholder} readOnly={readOnly} />}\r\n                calendarClassName=\"panospace-calendar\"\r\n                dayClassName={() => \"panospace-day\"}\r\n                popperClassName=\"panospace-popper\"\r\n                popperPlacement=\"bottom-start\" // Default placement\r\n                {...props}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default PanoDateInput;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\common\\SmartImage.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\contests\\ContestEntryModal.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { FaTrophy, FaTimes, FaCheck, FaExclamationTriangle, FaWallet } from 'react-icons/fa';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { useContestEntry } from '@/hooks/useContestEntry';\r\nimport { WalletService } from '@/services/WalletService';\r\n\r\nconst ContestEntryModal = ({ contest, post, onClose, onSuccess }) => {\r\n    const { currentUser } = useAuth();\r\n    const { enterContest, loading, error } = useContestEntry();\r\n    const [walletBalance, setWalletBalance] = useState(0);\r\n    const [validationErrors, setValidationErrors] = useState([]);\r\n    const [submitting, setSubmitting] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const fetchWallet = async () => {\r\n            if (currentUser) {\r\n                const wallet = await WalletService.getWallet(currentUser.uid);\r\n                setWalletBalance(wallet?.balance || 0);\r\n            }\r\n        };\r\n        fetchWallet();\r\n    }, [currentUser]);\r\n\r\n    useEffect(() => {\r\n        // Client-side validation checks\r\n        const errors = [];\r\n\r\n        if (contest.requireOriginalContent && post.isResold) {\r\n            errors.push('Contest requires original content only');\r\n        }\r\n\r\n        if (!contest.allowAIArt && post.isAIGenerated) {\r\n            errors.push('AI-generated art not allowed');\r\n        }\r\n\r\n        if (contest.requiredTags && contest.requiredTags.length > 0) {\r\n            const postTags = (post.tags || []).map(t => t.toLowerCase());\r\n            const hasAllTags = contest.requiredTags.every(tag =>\r\n                postTags.includes(tag.toLowerCase())\r\n            );\r\n            if (!hasAllTags) {\r\n                errors.push(`Missing required tags: ${contest.requiredTags.join(', ')}`);\r\n            }\r\n        }\r\n\r\n        if (contest.entryType === 'paid' && walletBalance < contest.entryFee) {\r\n            errors.push('Insufficient wallet balance');\r\n        }\r\n\r\n        setValidationErrors(errors);\r\n    }, [contest, post, walletBalance]);\r\n\r\n    const handleSubmit = async () => {\r\n        if (validationErrors.length > 0) {\r\n            return;\r\n        }\r\n\r\n        setSubmitting(true);\r\n        try {\r\n            await enterContest(post.id, contest.id);\r\n            if (onSuccess) onSuccess();\r\n            onClose();\r\n        } catch (err) {\r\n            console.error('Entry error:', err);\r\n        } finally {\r\n            setSubmitting(false);\r\n        }\r\n    };\r\n\r\n    const canSubmit = validationErrors.length === 0 && !loading && !submitting;\r\n\r\n    return (\r\n        <div style={{\r\n            position: 'fixed',\r\n            top: 0,\r\n            left: 0,\r\n            right: 0,\r\n            bottom: 0,\r\n            background: 'rgba(0,0,0,0.9)',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            zIndex: 1000,\r\n            padding: '2rem'\r\n        }}>\r\n            <div style={{\r\n                background: '#111',\r\n                borderRadius: '16px',\r\n                maxWidth: '600px',\r\n                width: '100%',\r\n                maxHeight: '90vh',\r\n                overflow: 'auto',\r\n                border: '2px solid #333'\r\n            }}>\r\n                {/* Header */}\r\n                <div style={{\r\n                    padding: '1.5rem',\r\n                    borderBottom: '1px solid #222',\r\n                    display: 'flex',\r\n                    justifyContent: 'space-between',\r\n                    alignItems: 'center'\r\n                }}>\r\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '0.75rem' }}>\r\n                        <FaTrophy style={{ color: '#FFD700', fontSize: '1.5rem' }} />\r\n                        <h2 style={{ margin: 0, fontSize: '1.5rem', color: '#fff' }}>Enter Contest</h2>\r\n                    </div>\r\n                    <button\r\n                        onClick={onClose}\r\n                        style={{\r\n                            background: 'transparent',\r\n                            border: 'none',\r\n                            color: '#888',\r\n                            cursor: 'pointer',\r\n                            fontSize: '1.5rem',\r\n                            padding: '0.5rem'\r\n                        }}\r\n                    >\r\n                        <FaTimes />\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Contest Info */}\r\n                <div style={{ padding: '1.5rem', borderBottom: '1px solid #222' }}>\r\n                    <h3 style={{ margin: '0 0 0.5rem 0', color: '#fff' }}>{contest.title}</h3>\r\n                    <p style={{ margin: '0 0 1rem 0', color: '#aaa', fontSize: '0.9rem' }}>\r\n                        {contest.description}\r\n                    </p>\r\n                    <div style={{ display: 'flex', gap: '1rem', flexWrap: 'wrap' }}>\r\n                        <div style={{\r\n                            padding: '0.5rem 1rem',\r\n                            background: 'rgba(127, 255, 212, 0.1)',\r\n                            borderRadius: '8px',\r\n                            border: '1px solid var(--ice-mint)'\r\n                        }}>\r\n                            <div style={{ fontSize: '0.75rem', color: '#888' }}>Prize Pool</div>\r\n                            <div style={{ fontSize: '1.2rem', fontWeight: 'bold', color: 'var(--ice-mint)' }}>\r\n                                ${contest.totalPrizePool || contest.prizePool}\r\n                            </div>\r\n                        </div>\r\n                        {contest.entryType === 'paid' && (\r\n                            <div style={{\r\n                                padding: '0.5rem 1rem',\r\n                                background: 'rgba(255, 215, 0, 0.1)',\r\n                                borderRadius: '8px',\r\n                                border: '1px solid #FFD700'\r\n                            }}>\r\n                                <div style={{ fontSize: '0.75rem', color: '#888' }}>Entry Fee</div>\r\n                                <div style={{ fontSize: '1.2rem', fontWeight: 'bold', color: '#FFD700' }}>\r\n                                    ${contest.entryFee}\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Post Preview */}\r\n                <div style={{ padding: '1.5rem', borderBottom: '1px solid #222' }}>\r\n                    <h4 style={{ margin: '0 0 1rem 0', color: '#fff' }}>Your Entry</h4>\r\n                    <div style={{ display: 'flex', gap: '1rem', alignItems: 'center' }}>\r\n                        <img\r\n                            src={post.imageUrl || post.items?.[0]?.url}\r\n                            alt={post.title}\r\n                            style={{\r\n                                width: '100px',\r\n                                height: '100px',\r\n                                objectFit: 'cover',\r\n                                borderRadius: '8px'\r\n                            }}\r\n                        />\r\n                        <div style={{ flex: 1 }}>\r\n                            <div style={{ fontWeight: 'bold', color: '#fff', marginBottom: '0.25rem' }}>\r\n                                {post.title || 'Untitled'}\r\n                            </div>\r\n                            <div style={{ fontSize: '0.85rem', color: '#888' }}>\r\n                                {post.tags?.slice(0, 3).map(tag => `#${tag}`).join(' ')}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Validation Status */}\r\n                <div style={{ padding: '1.5rem' }}>\r\n                    <h4 style={{ margin: '0 0 1rem 0', color: '#fff' }}>Entry Requirements</h4>\r\n                    <div style={{ display: 'flex', flexDirection: 'column', gap: '0.75rem' }}>\r\n                        {validationErrors.length === 0 ? (\r\n                            <div style={{\r\n                                display: 'flex',\r\n                                alignItems: 'center',\r\n                                gap: '0.5rem',\r\n                                padding: '0.75rem',\r\n                                background: 'rgba(0, 255, 0, 0.1)',\r\n                                borderRadius: '8px',\r\n                                color: '#0f0'\r\n                            }}>\r\n                                <FaCheck />\r\n                                <span>All requirements met!</span>\r\n                            </div>\r\n                        ) : (\r\n                            validationErrors.map((err, idx) => (\r\n                                <div key={idx} style={{\r\n                                    display: 'flex',\r\n                                    alignItems: 'center',\r\n                                    gap: '0.5rem',\r\n                                    padding: '0.75rem',\r\n                                    background: 'rgba(255, 0, 0, 0.1)',\r\n                                    borderRadius: '8px',\r\n                                    color: '#ff4444'\r\n                                }}>\r\n                                    <FaExclamationTriangle />\r\n                                    <span>{err}</span>\r\n                                </div>\r\n                            ))\r\n                        )}\r\n                    </div>\r\n\r\n                    {contest.entryType === 'paid' && (\r\n                        <div style={{\r\n                            marginTop: '1rem',\r\n                            padding: '0.75rem',\r\n                            background: 'rgba(255, 255, 255, 0.05)',\r\n                            borderRadius: '8px',\r\n                            display: 'flex',\r\n                            justifyContent: 'space-between',\r\n                            alignItems: 'center'\r\n                        }}>\r\n                            <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', color: '#aaa' }}>\r\n                                <FaWallet />\r\n                                <span>Wallet Balance:</span>\r\n                            </div>\r\n                            <span style={{ fontWeight: 'bold', color: walletBalance >= contest.entryFee ? 'var(--ice-mint)' : '#ff4444' }}>\r\n                                ${walletBalance.toFixed(2)}\r\n                            </span>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Actions */}\r\n                <div style={{\r\n                    padding: '1.5rem',\r\n                    borderTop: '1px solid #222',\r\n                    display: 'flex',\r\n                    gap: '1rem',\r\n                    justifyContent: 'flex-end'\r\n                }}>\r\n                    <button\r\n                        onClick={onClose}\r\n                        style={{\r\n                            padding: '0.75rem 1.5rem',\r\n                            background: '#222',\r\n                            border: '1px solid #333',\r\n                            borderRadius: '8px',\r\n                            color: '#fff',\r\n                            cursor: 'pointer',\r\n                            fontSize: '1rem'\r\n                        }}\r\n                    >\r\n                        Cancel\r\n                    </button>\r\n                    <button\r\n                        onClick={handleSubmit}\r\n                        disabled={!canSubmit}\r\n                        style={{\r\n                            padding: '0.75rem 1.5rem',\r\n                            background: canSubmit ? 'var(--ice-mint)' : '#333',\r\n                            border: 'none',\r\n                            borderRadius: '8px',\r\n                            color: canSubmit ? '#000' : '#666',\r\n                            cursor: canSubmit ? 'pointer' : 'not-allowed',\r\n                            fontSize: '1rem',\r\n                            fontWeight: 'bold'\r\n                        }}\r\n                    >\r\n                        {submitting ? 'Submitting...' : 'Enter Contest'}\r\n                    </button>\r\n                </div>\r\n\r\n                {error && (\r\n                    <div style={{\r\n                        padding: '1rem 1.5rem',\r\n                        background: 'rgba(255, 0, 0, 0.1)',\r\n                        borderTop: '1px solid rgba(255, 0, 0, 0.3)',\r\n                        color: '#ff4444'\r\n                    }}>\r\n                        {error}\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ContestEntryModal;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\create-collection\\CollectionFields.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\n\r\n/**\r\n * CollectionFields Component\r\n * Renders the title and description input fields\r\n */\r\nconst CollectionFields = ({\r\n    creationMode,\r\n    title,\r\n    setTitle\r\n}) => {\r\n    const getPlaceholder = () => {\r\n        switch (creationMode) {\r\n            case 'museum':\r\n                return 'e.g., Street Photography Museum';\r\n            case 'gallery':\r\n                return 'e.g., Summer 2024 Studio';\r\n            case 'magazine':\r\n                return 'e.g., Monthly Photography Magazine';\r\n            default:\r\n                return 'e.g., Summer 2024 Collection';\r\n        }\r\n    };\r\n\r\n    const getLabel = () => {\r\n        switch (creationMode) {\r\n            case 'museum':\r\n                return 'Museum Title *';\r\n            case 'gallery':\r\n                return 'Studio Title *';\r\n            case 'magazine':\r\n                return 'Magazine Title *';\r\n            default:\r\n                return 'Collection Title *';\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <label style={{\r\n                display: 'block',\r\n                marginBottom: '0.5rem',\r\n                color: '#ccc',\r\n                fontWeight: '600'\r\n            }}>\r\n                {getLabel()}\r\n            </label>\r\n            <input\r\n                type=\"text\"\r\n                value={title}\r\n                onChange={(e) => setTitle(e.target.value)}\r\n                placeholder={getPlaceholder()}\r\n                style={{\r\n                    width: '100%',\r\n                    padding: '0.75rem',\r\n                    background: '#111',\r\n                    border: '1px solid #333',\r\n                    borderRadius: '8px',\r\n                    color: '#fff',\r\n                    fontSize: '1rem'\r\n                }}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CollectionFields;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\create-collection\\CollectionModePanel.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { FaGlobe, FaUsers, FaLock, FaStore, FaTag } from 'react-icons/fa';\r\nimport { getPrintifyProducts, PRINT_TIERS, calculateBundlePricing } from '@/domain/shop/pricing';\r\n\r\nconst PRINT_SIZES = getPrintifyProducts();\r\n\r\nconst CollectionModePanel = ({\r\n    description,\r\n    setDescription,\r\n    visibility,\r\n    setVisibility,\r\n    postToFeed,\r\n    setPostToFeed,\r\n    showInStore,\r\n    setShowInStore,\r\n    productTier,\r\n    setProductTier,\r\n    defaultSizeId,\r\n    setDefaultSizeId,\r\n    images,\r\n    setImages,\r\n    creationMode\r\n}) => {\r\n    return (\r\n        <>\r\n            <div>\r\n                <label style={{ display: 'block', marginBottom: '0.5rem', color: '#ccc', fontWeight: '600' }}>\r\n                    Description\r\n                </label>\r\n                <textarea\r\n                    value={description}\r\n                    onChange={(e) => setDescription(e.target.value)}\r\n                    placeholder={`Describe this ${creationMode}...`}\r\n                    rows={4}\r\n                    style={{\r\n                        width: '100%',\r\n                        padding: '0.75rem',\r\n                        background: '#111',\r\n                        border: '1px solid #333',\r\n                        borderRadius: '8px',\r\n                        color: '#fff',\r\n                        fontSize: '1rem',\r\n                        resize: 'vertical'\r\n                    }}\r\n                />\r\n            </div>\r\n\r\n            <div>\r\n                <label style={{ display: 'block', marginBottom: '0.5rem', color: '#ccc', fontWeight: '600' }}>\r\n                    Visibility\r\n                </label>\r\n                <div style={{ display: 'flex', gap: '0.5rem' }}>\r\n                    {[\r\n                        { value: 'public', icon: FaGlobe, label: 'Public' },\r\n                        { value: 'followers', icon: FaUsers, label: 'Followers' },\r\n                        { value: 'private', icon: FaLock, label: 'Private' }\r\n                    ].map(({ value, icon: Icon, label }) => (\r\n                        <button\r\n                            key={value}\r\n                            type=\"button\"\r\n                            onClick={() => setVisibility(value)}\r\n                            style={{\r\n                                flex: 1,\r\n                                padding: '0.75rem',\r\n                                background: visibility === value ? 'rgba(127, 255, 212, 0.2)' : '#111',\r\n                                border: visibility === value ? '1px solid #7FFFD4' : '1px solid #333',\r\n                                borderRadius: '8px',\r\n                                color: visibility === value ? '#7FFFD4' : '#888',\r\n                                cursor: 'pointer',\r\n                                display: 'flex',\r\n                                alignItems: 'center',\r\n                                justifyContent: 'center',\r\n                                gap: '0.5rem',\r\n                                fontWeight: '600'\r\n                            }}\r\n                        >\r\n                            <Icon /> {label}\r\n                        </button>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Post to Feed */}\r\n            <div>\r\n                <label style={{ display: 'flex', alignItems: 'center', gap: '0.75rem', cursor: 'pointer' }}>\r\n                    <input\r\n                        type=\"checkbox\"\r\n                        checked={postToFeed}\r\n                        onChange={(e) => setPostToFeed(e.target.checked)}\r\n                        style={{ width: '20px', height: '20px', cursor: 'pointer' }}\r\n                    />\r\n                    <div>\r\n                        <div style={{ fontWeight: '600', color: '#ccc' }}>Post to Feed</div>\r\n                        <div style={{ fontSize: '0.85rem', color: '#666', marginTop: '0.25rem' }}>\r\n                            Posts added to this {creationMode} will appear in the global feed\r\n                        </div>\r\n                    </div>\r\n                </label>\r\n            </div>\r\n\r\n            {/* Shop Settings */}\r\n            <>\r\n                <label style={{ display: 'flex', alignItems: 'center', gap: '0.75rem', cursor: 'pointer', marginBottom: '1rem' }}>\r\n                    <input\r\n                        type=\"checkbox\"\r\n                        checked={showInStore}\r\n                        onChange={(e) => setShowInStore(e.target.checked)}\r\n                        style={{ width: '20px', height: '20px', cursor: 'pointer' }}\r\n                    />\r\n                    <FaStore style={{ color: '#7FFFD4' }} />\r\n                    <div>\r\n                        <div style={{ fontWeight: '600' }}>Show in Store</div>\r\n                        <div style={{ fontSize: '0.85rem', color: '#666' }}>\r\n                            Make this {creationMode} available for purchase\r\n                        </div>\r\n                    </div>\r\n                </label>\r\n\r\n                {showInStore && (\r\n                    <>\r\n                        <div style={{ marginBottom: '1rem' }}>\r\n                            <label style={{ display: 'block', marginBottom: '0.5rem', color: '#ccc', fontSize: '0.9rem' }}>\r\n                                Print Quality\r\n                            </label>\r\n                            <div style={{ display: 'flex', gap: '0.5rem' }}>\r\n                                <button\r\n                                    type=\"button\"\r\n                                    onClick={() => setProductTier(PRINT_TIERS.ECONOMY)}\r\n                                    style={{\r\n                                        flex: 1,\r\n                                        padding: '0.75rem',\r\n                                        background: productTier === PRINT_TIERS.ECONOMY ? 'rgba(127, 255, 212, 0.2)' : '#222',\r\n                                        border: productTier === PRINT_TIERS.ECONOMY ? '1px solid #7FFFD4' : '1px solid #333',\r\n                                        borderRadius: '8px',\r\n                                        color: productTier === PRINT_TIERS.ECONOMY ? '#7FFFD4' : '#888',\r\n                                        cursor: 'pointer',\r\n                                        fontSize: '0.9rem',\r\n                                        fontWeight: '600'\r\n                                    }}\r\n                                >\r\n                                    Economy\r\n                                </button>\r\n                                <button\r\n                                    type=\"button\"\r\n                                    onClick={() => setProductTier(PRINT_TIERS.PREMIUM)}\r\n                                    style={{\r\n                                        flex: 1,\r\n                                        padding: '0.75rem',\r\n                                        background: productTier === PRINT_TIERS.PREMIUM ? 'rgba(127, 255, 212, 0.2)' : '#222',\r\n                                        border: productTier === PRINT_TIERS.PREMIUM ? '1px solid #7FFFD4' : '1px solid #333',\r\n                                        borderRadius: '8px',\r\n                                        color: productTier === PRINT_TIERS.PREMIUM ? '#7FFFD4' : '#888',\r\n                                        cursor: 'pointer',\r\n                                        fontSize: '0.9rem',\r\n                                        fontWeight: '600'\r\n                                    }}\r\n                                >\r\n                                    Premium\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div style={{ marginBottom: '1rem' }}>\r\n                            <label style={{ display: 'block', marginBottom: '0.5rem', color: '#ccc', fontSize: '0.9rem' }}>\r\n                                Default Print Size\r\n                            </label>\r\n                            <select\r\n                                value={defaultSizeId}\r\n                                onChange={(e) => {\r\n                                    const newSizeId = e.target.value;\r\n                                    setDefaultSizeId(newSizeId);\r\n                                    setImages(prev => prev.map(img => ({\r\n                                        ...img,\r\n                                        sizeId: newSizeId,\r\n                                        sizeLabel: PRINT_SIZES.find(s => s.id === newSizeId)?.label || newSizeId\r\n                                    })));\r\n                                }}\r\n                                style={{\r\n                                    width: '100%',\r\n                                    padding: '0.75rem',\r\n                                    background: '#222',\r\n                                    border: '1px solid #333',\r\n                                    borderRadius: '8px',\r\n                                    color: '#fff',\r\n                                    fontSize: '0.9rem'\r\n                                }}\r\n                            >\r\n                                {PRINT_SIZES.map(size => (\r\n                                    <option key={size.id} value={size.id}>\r\n                                        {size.label}\r\n                                    </option>\r\n                                ))}\r\n                            </select>\r\n                        </div>\r\n\r\n                        {images.length > 0 && (() => {\r\n                            const pricing = calculateBundlePricing(\r\n                                images.map(img => ({\r\n                                    sizeId: img.sizeId,\r\n                                    sizeLabel: img.sizeLabel\r\n                                })),\r\n                                productTier\r\n                            );\r\n\r\n                            return (\r\n                                <div style={{\r\n                                    padding: '1rem',\r\n                                    background: 'rgba(127, 255, 212, 0.1)',\r\n                                    border: '1px solid rgba(127, 255, 212, 0.3)',\r\n                                    borderRadius: '8px',\r\n                                    marginTop: '1rem'\r\n                                }}>\r\n                                    <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', marginBottom: '0.75rem' }}>\r\n                                        <FaTag style={{ color: '#7FFFD4' }} />\r\n                                        <div style={{ fontWeight: 'bold', color: '#7FFFD4' }}>Bundle Pricing</div>\r\n                                    </div>\r\n\r\n                                    <div style={{ fontSize: '0.85rem', color: '#ccc', lineHeight: '1.6' }}>\r\n                                        <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '0.5rem' }}>\r\n                                            <span>If bought separately:</span>\r\n                                            <span style={{ fontWeight: '600' }}>${pricing.baseCollectionPrice.toFixed(2)}</span>\r\n                                        </div>\r\n                                        <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '0.5rem', color: '#7FFFD4' }}>\r\n                                            <span>Bundle discount ({pricing.bundleDiscountPercent}%):</span>\r\n                                            <span style={{ fontWeight: '600' }}>-${pricing.savingsAmount.toFixed(2)}</span>\r\n                                        </div>\r\n                                        <div style={{\r\n                                            display: 'flex',\r\n                                            justifyContent: 'space-between',\r\n                                            paddingTop: '0.75rem',\r\n                                            borderTop: '1px solid rgba(127, 255, 212, 0.3)',\r\n                                            fontSize: '1.1rem',\r\n                                            fontWeight: 'bold',\r\n                                            color: '#fff'\r\n                                        }}>\r\n                                            <span>Bundle Price:</span>\r\n                                            <span>${pricing.finalBundlePrice.toFixed(2)}</span>\r\n                                        </div>\r\n                                        <div style={{ marginTop: '0.75rem', fontSize: '0.8rem', color: '#888', fontStyle: 'italic' }}>\r\n                                            Γ£ô Pricing automatically calculated<br />\r\n                                            Γ£ô Artist & platform margins protected\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n\r\n                            );\r\n                        })()}\r\n                    </>\r\n                )}\r\n            </>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default CollectionModePanel;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\create-collection\\GalleryModePanel.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport CollectionModePanel from './CollectionModePanel';\r\n\r\nconst StudioModePanel = (props) => {\r\n    return <CollectionModePanel {...props} />;\r\n};\r\n\r\nexport default StudioModePanel;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\create-collection\\ImageUploadPanel.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { FaImage, FaTimes, FaPlus, FaBook, FaUniversity } from 'react-icons/fa';\r\n\r\nconst ImageUploadPanel = ({\r\n    images,\r\n    activeImageIndex,\r\n    setActiveImageIndex,\r\n    removeImage,\r\n    handleFileSelect,\r\n    fileInputRef,\r\n    creationMode\r\n}) => {\r\n    const activeImage = images[activeImageIndex];\r\n\r\n    return (\r\n        <div>\r\n            {creationMode === 'magazine' ? (\r\n                /* Magazine Mode - Image Upload Preview */\r\n                <div style={{\r\n                    aspectRatio: '0.7727', // 8.5:11 magazine ratio\r\n                    background: images.length > 0 ? `url(${images[0].preview})` : '#111',\r\n                    backgroundSize: 'contain',\r\n                    backgroundRepeat: 'no-repeat',\r\n                    backgroundPosition: 'center',\r\n                    border: '2px solid #333',\r\n                    borderRadius: '12px',\r\n                    display: 'flex',\r\n                    flexDirection: 'column',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'center',\r\n                    gap: '1rem',\r\n                    position: 'relative'\r\n                }}>\r\n                    {images.length === 0 && (\r\n                        <>\r\n                            <FaBook style={{ fontSize: '4rem', color: '#7FFFD4', opacity: 0.5 }} />\r\n                            <div style={{ color: '#888', textAlign: 'center', fontSize: '0.9rem' }}>\r\n                                Magazine Preview\r\n                                <div style={{ fontSize: '0.75rem', marginTop: '0.5rem' }}>8.5\" ├ù 11\" Aspect Ratio</div>\r\n                            </div>\r\n                        </>\r\n                    )}\r\n                </div>\r\n            ) : creationMode === 'museum' ? (\r\n                /* Museum Mode - Image Upload Preview */\r\n                <div style={{\r\n                    aspectRatio: '3/2',\r\n                    background: images.length > 0 ? `url(${images[0].preview})` : '#111',\r\n                    backgroundSize: 'contain',\r\n                    backgroundRepeat: 'no-repeat',\r\n                    backgroundPosition: 'center',\r\n                    border: '2px solid #333',\r\n                    borderRadius: '12px',\r\n                    display: 'flex',\r\n                    flexDirection: 'column',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'center',\r\n                    gap: '1rem',\r\n                    position: 'relative'\r\n                }}>\r\n                    {images.length === 0 && (\r\n                        <>\r\n                            <FaUniversity style={{ fontSize: '4rem', color: '#7FFFD4', opacity: 0.5 }} />\r\n                            <div style={{ color: '#888', textAlign: 'center', fontSize: '0.9rem' }}>\r\n                                Museum Preview\r\n                            </div>\r\n                        </>\r\n                    )}\r\n                </div>\r\n            ) : images.length === 0 ? (\r\n                <div\r\n                    onClick={() => fileInputRef.current?.click()}\r\n                    style={{\r\n                        aspectRatio: '3/2',\r\n                        background: '#111',\r\n                        border: '2px dashed #333',\r\n                        borderRadius: '12px',\r\n                        display: 'flex',\r\n                        flexDirection: 'column',\r\n                        alignItems: 'center',\r\n                        justifyContent: 'center',\r\n                        cursor: 'pointer',\r\n                        gap: '1rem'\r\n                    }}\r\n                >\r\n                    <FaImage style={{ fontSize: '3rem', color: '#666' }} />\r\n                    <div style={{ color: '#888', textAlign: 'center' }}>\r\n                        <div style={{ fontWeight: 'bold', marginBottom: '0.5rem' }}>\r\n                            Add Images to {creationMode === 'gallery' ? 'Studio' : 'Collection'}\r\n                        </div>\r\n                        <div style={{ fontSize: '0.9rem' }}>1-10 images required</div>\r\n                    </div>\r\n                </div>\r\n            ) : (\r\n                <>\r\n                    <div style={{\r\n                        aspectRatio: activeImage?.aspectRatio || '3/2',\r\n                        background: '#111',\r\n                        borderRadius: '12px',\r\n                        overflow: 'hidden',\r\n                        marginBottom: '1rem'\r\n                    }}>\r\n                        <img\r\n                            src={activeImage?.preview}\r\n                            alt=\"\"\r\n                            style={{ width: '100%', height: '100%', objectFit: 'contain' }}\r\n                        />\r\n                    </div>\r\n\r\n                    <div style={{ display: 'flex', gap: '0.5rem', overflowX: 'auto', paddingBottom: '0.5rem' }}>\r\n                        {images.map((img, index) => (\r\n                            <div\r\n                                key={index}\r\n                                onClick={() => setActiveImageIndex(index)}\r\n                                style={{\r\n                                    position: 'relative',\r\n                                    width: '80px',\r\n                                    height: '80px',\r\n                                    flexShrink: 0,\r\n                                    border: activeImageIndex === index ? '2px solid #7FFFD4' : '2px solid transparent',\r\n                                    borderRadius: '8px',\r\n                                    overflow: 'hidden',\r\n                                    cursor: 'pointer'\r\n                                }}\r\n                            >\r\n                                <img\r\n                                    src={img.preview}\r\n                                    alt=\"\"\r\n                                    style={{ width: '100%', height: '100%', objectFit: 'cover' }}\r\n                                />\r\n                                <button\r\n                                    onClick={(e) => {\r\n                                        e.stopPropagation();\r\n                                        removeImage(index);\r\n                                    }}\r\n                                    style={{\r\n                                        position: 'absolute',\r\n                                        top: '4px',\r\n                                        right: '4px',\r\n                                        background: 'rgba(0,0,0,0.7)',\r\n                                        border: 'none',\r\n                                        borderRadius: '50%',\r\n                                        width: '24px',\r\n                                        height: '24px',\r\n                                        display: 'flex',\r\n                                        alignItems: 'center',\r\n                                        justifyContent: 'center',\r\n                                        cursor: 'pointer',\r\n                                        color: '#fff'\r\n                                    }}\r\n                                >\r\n                                    <FaTimes />\r\n                                </button>\r\n                            </div>\r\n                        ))}\r\n                        {images.length < 10 && (\r\n                            <div\r\n                                onClick={() => fileInputRef.current?.click()}\r\n                                style={{\r\n                                    width: '80px',\r\n                                    height: '80px',\r\n                                    flexShrink: 0,\r\n                                    border: '2px dashed #333',\r\n                                    borderRadius: '8px',\r\n                                    display: 'flex',\r\n                                    alignItems: 'center',\r\n                                    justifyContent: 'center',\r\n                                    cursor: 'pointer',\r\n                                    color: '#666'\r\n                                }}\r\n                            >\r\n                                <FaPlus />\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </>\r\n            )}\r\n\r\n            <input\r\n                ref={fileInputRef}\r\n                type=\"file\"\r\n                accept=\"image/*\"\r\n                multiple\r\n                onChange={handleFileSelect}\r\n                style={{ display: 'none' }}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ImageUploadPanel;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\create-collection\\MagazineModePanel.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { FaImage, FaCalendar, FaClock, FaGlobe, FaUsers, FaLock } from 'react-icons/fa';\r\nimport { RELEASE_FREQUENCIES } from '@/core/constants/magazineConfig';\r\n\r\nconst MagazineModePanel = ({\r\n    images,\r\n    fileInputRef,\r\n    releaseFrequency,\r\n    setReleaseFrequency,\r\n    releaseDay,\r\n    setReleaseDay,\r\n    releaseTime,\r\n    setReleaseTime,\r\n    linkedGalleryId,\r\n    setLinkedGalleryId,\r\n    description,\r\n    setDescription,\r\n    visibility,\r\n    setVisibility\r\n}) => {\r\n    return (\r\n        <>\r\n            {/* Cover Image Upload */}\r\n            <div>\r\n                <label style={{ display: 'block', marginBottom: '0.5rem', color: '#ccc', fontWeight: '600' }}>\r\n                    Cover Image (Optional)\r\n                </label>\r\n                <div\r\n                    onClick={() => fileInputRef.current?.click()}\r\n                    style={{\r\n                        width: '100%',\r\n                        padding: '0.75rem',\r\n                        background: '#111',\r\n                        border: '1px dashed #333',\r\n                        borderRadius: '8px',\r\n                        color: '#888',\r\n                        fontSize: '0.9rem',\r\n                        cursor: 'pointer',\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        gap: '0.5rem'\r\n                    }}\r\n                >\r\n                    <FaImage />\r\n                    {images.length > 0 ? 'Change Cover Image' : 'Upload Cover Image'}\r\n                </div>\r\n                {images.length > 0 && (\r\n                    <div style={{ marginTop: '0.5rem', fontSize: '0.8rem', color: '#7FFFD4' }}>\r\n                        Selected: {images[0].file.name}\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Release Frequency */}\r\n            <div>\r\n                <label style={{ display: 'block', marginBottom: '0.5rem', color: '#ccc', fontWeight: '600' }}>\r\n                    Release Frequency *\r\n                </label>\r\n                <div style={{ display: 'flex', gap: '0.5rem' }}>\r\n                    {RELEASE_FREQUENCIES.map(({ value, label }) => (\r\n                        <button\r\n                            key={value}\r\n                            type=\"button\"\r\n                            onClick={() => setReleaseFrequency(value)}\r\n                            style={{\r\n                                flex: 1,\r\n                                padding: '0.75rem',\r\n                                background: releaseFrequency === value ? 'rgba(127, 255, 212, 0.2)' : '#111',\r\n                                border: releaseFrequency === value ? '1px solid #7FFFD4' : '1px solid #333',\r\n                                borderRadius: '8px',\r\n                                color: releaseFrequency === value ? '#7FFFD4' : '#888',\r\n                                cursor: 'pointer',\r\n                                fontWeight: '600',\r\n                                fontSize: '0.9rem'\r\n                            }}\r\n                        >\r\n                            {label}\r\n                        </button>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Release Day */}\r\n            <div>\r\n                <label style={{ display: 'block', marginBottom: '0.5rem', color: '#ccc', fontWeight: '600' }}>\r\n                    <FaCalendar style={{ marginRight: '0.5rem' }} />\r\n                    Release Day of Month *\r\n                </label>\r\n                <input\r\n                    type=\"number\"\r\n                    min=\"1\"\r\n                    max=\"31\"\r\n                    value={releaseDay}\r\n                    onChange={(e) => setReleaseDay(parseInt(e.target.value) || 1)}\r\n                    style={{\r\n                        width: '100%',\r\n                        padding: '0.75rem',\r\n                        background: '#111',\r\n                        border: '1px solid #333',\r\n                        borderRadius: '8px',\r\n                        color: '#fff',\r\n                        fontSize: '1rem'\r\n                    }}\r\n                />\r\n                <div style={{ fontSize: '0.75rem', color: '#666', marginTop: '0.25rem' }}>\r\n                    Day 1-31 (if month doesn't have this day, it will use the last day)\r\n                </div>\r\n            </div>\r\n\r\n            {/* Release Time */}\r\n            <div>\r\n                <label style={{ display: 'block', marginBottom: '0.5rem', color: '#ccc', fontWeight: '600' }}>\r\n                    <FaClock style={{ marginRight: '0.5rem' }} />\r\n                    Release Time *\r\n                </label>\r\n                <input\r\n                    type=\"time\"\r\n                    value={releaseTime}\r\n                    onChange={(e) => setReleaseTime(e.target.value)}\r\n                    style={{\r\n                        width: '100%',\r\n                        padding: '0.75rem',\r\n                        background: '#111',\r\n                        border: '1px solid #333',\r\n                        borderRadius: '8px',\r\n                        color: '#fff',\r\n                        fontSize: '1rem'\r\n                    }}\r\n                />\r\n            </div>\r\n\r\n            {/* Gallery Link (Optional) */}\r\n            <div>\r\n                <label style={{ display: 'block', marginBottom: '0.5rem', color: '#ccc', fontWeight: '600' }}>\r\n                    Link to Studio (Optional)\r\n                </label>\r\n                <input\r\n                    type=\"text\"\r\n                    value={linkedGalleryId}\r\n                    onChange={(e) => setLinkedGalleryId(e.target.value)}\r\n                    placeholder=\"Enter Studio ID to link...\"\r\n                    style={{\r\n                        width: '100%',\r\n                        padding: '0.75rem',\r\n                        background: '#111',\r\n                        border: '1px solid #333',\r\n                        borderRadius: '8px',\r\n                        color: '#fff',\r\n                        fontSize: '1rem'\r\n                    }}\r\n                />\r\n                <div style={{ fontSize: '0.75rem', color: '#666', marginTop: '0.25rem' }}>\r\n                    Linking a studio allows contributors to submit photos to your magazine issues.\r\n                </div>\r\n            </div>\r\n\r\n            {/* Description */}\r\n            <div>\r\n                <label style={{ display: 'block', marginBottom: '0.5rem', color: '#ccc', fontWeight: '600' }}>\r\n                    Description\r\n                </label>\r\n                <textarea\r\n                    value={description}\r\n                    onChange={(e) => setDescription(e.target.value)}\r\n                    placeholder=\"Describe this magazine...\"\r\n                    rows={4}\r\n                    style={{\r\n                        width: '100%',\r\n                        padding: '0.75rem',\r\n                        background: '#111',\r\n                        border: '1px solid #333',\r\n                        borderRadius: '8px',\r\n                        color: '#fff',\r\n                        fontSize: '1rem',\r\n                        resize: 'vertical'\r\n                    }}\r\n                />\r\n            </div>\r\n\r\n            {/* Visibility */}\r\n            <div>\r\n                <label style={{ display: 'block', marginBottom: '0.5rem', color: '#ccc', fontWeight: '600' }}>\r\n                    Visibility\r\n                </label>\r\n                <div style={{ display: 'flex', gap: '0.5rem' }}>\r\n                    {[\r\n                        { value: 'public', icon: FaGlobe, label: 'Public' },\r\n                        { value: 'followers', icon: FaUsers, label: 'Followers' },\r\n                        { value: 'private', icon: FaLock, label: 'Private' }\r\n                    ].map(({ value, icon: Icon, label }) => (\r\n                        <button\r\n                            key={value}\r\n                            type=\"button\"\r\n                            onClick={() => setVisibility(value)}\r\n                            style={{\r\n                                flex: 1,\r\n                                padding: '0.75rem',\r\n                                background: visibility === value ? 'rgba(127, 255, 212, 0.2)' : '#111',\r\n                                border: visibility === value ? '1px solid #7FFFD4' : '1px solid #333',\r\n                                borderRadius: '8px',\r\n                                color: visibility === value ? '#7FFFD4' : '#888',\r\n                                cursor: 'pointer',\r\n                                display: 'flex',\r\n                                alignItems: 'center',\r\n                                justifyContent: 'center',\r\n                                gap: '0.5rem',\r\n                                fontWeight: '600'\r\n                            }}\r\n                        >\r\n                            <Icon /> {label}\r\n                        </button>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default MagazineModePanel;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\create-collection\\ModeSelector.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { FaLayerGroup, FaTh, FaBuilding, FaBookOpen } from 'react-icons/fa';\r\n\r\nconst ModeSelector = ({ creationMode, setCreationMode, noPadding = false }) => {\r\n    const modes = [\r\n        { id: 'collection', label: 'Collection', icon: FaLayerGroup },\r\n        { id: 'gallery', label: 'Studio', icon: FaTh },\r\n        { id: 'museum', label: 'Museum', icon: FaBuilding },\r\n        { id: 'magazine', label: 'Magazine', icon: FaBookOpen }\r\n    ];\r\n\r\n    return (\r\n        <div style={{\r\n            display: 'flex',\r\n            gap: '0.5rem',\r\n            padding: noPadding ? '0' : '0 1rem 1rem 1rem',\r\n            overflowX: 'auto',\r\n            scrollbarWidth: 'none',\r\n            msOverflowStyle: 'none',\r\n            WebkitOverflowScrolling: 'touch',\r\n            borderBottom: noPadding ? 'none' : '1px solid rgba(255,255,255,0.1)'\r\n        }}>\r\n            {modes.map((mode) => {\r\n                const isActive = creationMode === mode.id;\r\n                const Icon = mode.icon;\r\n\r\n                return (\r\n                    <button\r\n                        key={mode.id}\r\n                        onClick={() => setCreationMode(mode.id)}\r\n                        style={{\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            gap: '0.5rem',\r\n                            padding: '0.6rem 1rem',\r\n                            background: isActive ? 'rgba(127, 255, 212, 0.1)' : 'transparent',\r\n                            border: isActive ? '1px solid #7FFFD4' : '1px solid transparent',\r\n                            borderRadius: '20px',\r\n                            color: isActive ? '#7FFFD4' : '#888',\r\n                            cursor: 'pointer',\r\n                            fontSize: '0.9rem',\r\n                            fontWeight: isActive ? '600' : '400',\r\n                            whiteSpace: 'nowrap',\r\n                            transition: 'all 0.2s ease',\r\n                            fontFamily: 'var(--font-family-heading)'\r\n                        }}\r\n                    >\r\n                        <Icon size={14} />\r\n                        {mode.label}\r\n                    </button>\r\n                );\r\n            })}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ModeSelector;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\create-collection\\MuseumModePanel.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { FaImage, FaGlobe, FaUsers, FaLock } from 'react-icons/fa';\r\n\r\nconst MuseumModePanel = ({\r\n    images,\r\n    fileInputRef,\r\n    description,\r\n    setDescription,\r\n    visibility,\r\n    setVisibility\r\n}) => {\r\n    return (\r\n        <>\r\n            <div>\r\n                <label style={{ display: 'block', marginBottom: '0.5rem', color: '#ccc', fontWeight: '600' }}>\r\n                    Cover Image (Optional)\r\n                </label>\r\n                <div\r\n                    onClick={() => fileInputRef.current?.click()}\r\n                    style={{\r\n                        width: '100%',\r\n                        padding: '0.75rem',\r\n                        background: '#111',\r\n                        border: '1px dashed #333',\r\n                        borderRadius: '8px',\r\n                        color: '#888',\r\n                        fontSize: '0.9rem',\r\n                        cursor: 'pointer',\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        gap: '0.5rem'\r\n                    }}\r\n                >\r\n                    <FaImage />\r\n                    {images.length > 0 ? 'Change Cover Image' : 'Upload Cover Image'}\r\n                </div>\r\n                {images.length > 0 && (\r\n                    <div style={{ marginTop: '0.5rem', fontSize: '0.8rem', color: '#7FFFD4' }}>\r\n                        Selected: {images[0].file.name}\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Description */}\r\n            <div>\r\n                <label style={{ display: 'block', marginBottom: '0.5rem', color: '#ccc', fontWeight: '600' }}>\r\n                    Description\r\n                </label>\r\n                <textarea\r\n                    value={description}\r\n                    onChange={(e) => setDescription(e.target.value)}\r\n                    placeholder=\"Describe this museum...\"\r\n                    rows={4}\r\n                    style={{\r\n                        width: '100%',\r\n                        padding: '0.75rem',\r\n                        background: '#111',\r\n                        border: '1px solid #333',\r\n                        borderRadius: '8px',\r\n                        color: '#fff',\r\n                        fontSize: '1rem',\r\n                        resize: 'vertical'\r\n                    }}\r\n                />\r\n            </div>\r\n\r\n            {/* Visibility */}\r\n            <div>\r\n                <label style={{ display: 'block', marginBottom: '0.5rem', color: '#ccc', fontWeight: '600' }}>\r\n                    Visibility\r\n                </label>\r\n                <div style={{ display: 'flex', gap: '0.5rem' }}>\r\n                    {[\r\n                        { value: 'public', icon: FaGlobe, label: 'Public' },\r\n                        { value: 'followers', icon: FaUsers, label: 'Followers' },\r\n                        { value: 'private', icon: FaLock, label: 'Private' }\r\n                    ].map(({ value, icon: Icon, label }) => (\r\n                        <button\r\n                            key={value}\r\n                            type=\"button\"\r\n                            onClick={() => setVisibility(value)}\r\n                            style={{\r\n                                flex: 1,\r\n                                padding: '0.75rem',\r\n                                background: visibility === value ? 'rgba(127, 255, 212, 0.2)' : '#111',\r\n                                border: visibility === value ? '1px solid #7FFFD4' : '1px solid #333',\r\n                                borderRadius: '8px',\r\n                                color: visibility === value ? '#7FFFD4' : '#888',\r\n                                cursor: 'pointer',\r\n                                display: 'flex',\r\n                                alignItems: 'center',\r\n                                justifyContent: 'center',\r\n                                gap: '0.5rem',\r\n                                fontWeight: '600'\r\n                            }}\r\n                        >\r\n                            <Icon /> {label}\r\n                        </button>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default MuseumModePanel;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\create-collection\\SubmitBar.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\n\r\n/**\r\n * SubmitBar Component\r\n * Renders the status indicator showing image count and validation state\r\n */\r\nconst SubmitBar = ({ creationMode, images }) => {\r\n    const isMuseum = creationMode === 'museum';\r\n    const isMagazine = creationMode === 'magazine';\r\n    const hasImages = images.length > 0;\r\n    const isValid = isMuseum || isMagazine || hasImages;\r\n\r\n    return (\r\n        <div style={{\r\n            padding: '1rem',\r\n            background: isValid ? 'rgba(127, 255, 212, 0.1)' : 'rgba(255, 68, 68, 0.1)',\r\n            border: `1px solid ${isValid ? 'rgba(127, 255, 212, 0.3)' : 'rgba(255, 68, 68, 0.3)'}`,\r\n            borderRadius: '8px',\r\n            color: isValid ? '#7FFFD4' : '#ff4444',\r\n            fontSize: '0.9rem'\r\n        }}>\r\n            {isMuseum ? (\r\n                <div>\r\n                    <div style={{ fontWeight: 'bold', marginBottom: '0.5rem' }}>\r\n                        Ready to Create Museum\r\n                    </div>\r\n                    <div style={{ fontSize: '0.85rem' }}>\r\n                        Museums can contain studios and profiles\r\n                    </div>\r\n                </div>\r\n            ) : isMagazine ? (\r\n                <div>\r\n                    <div style={{ fontWeight: 'bold', marginBottom: '0.5rem' }}>\r\n                        Ready to Create Magazine\r\n                    </div>\r\n                    <div style={{ fontSize: '0.85rem' }}>\r\n                        Configure your magazine settings and schedule\r\n                    </div>\r\n                </div>\r\n            ) : (\r\n                <>\r\n                    {images.length} / 10 images added\r\n                    {images.length === 0 && (\r\n                        <div style={{ marginTop: '0.5rem', fontSize: '0.85rem' }}>\r\n                            Add at least 1 image to create {creationMode === 'gallery' ? 'studio' : creationMode}\r\n                        </div>\r\n                    )}\r\n                </>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default SubmitBar;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\create-post\\CollectionSelector.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { FaLayerGroup } from 'react-icons/fa';\r\n\r\n/**\r\n * CollectionSelector Component\r\n * \r\n * Displays a dropdown to select a collection for the post,\r\n * with an option to also show the post in the user's profile.\r\n * \r\n * @param {Array} collections - Array of available collection objects\r\n * @param {string} selectedCollectionId - ID of the currently selected collection\r\n * @param {Function} setSelectedCollectionId - Handler to update selected collection\r\n * @param {boolean} showInProfile - Whether to also show in profile\r\n * @param {Function} setShowInProfile - Handler to toggle show in profile\r\n */\r\nconst CollectionSelector = ({\r\n    collections,\r\n    selectedCollectionId,\r\n    setSelectedCollectionId,\r\n    showInProfile,\r\n    setShowInProfile\r\n}) => {\r\n    return (\r\n        <div className=\"form-section\" style={{ padding: '0.75rem' }}>\r\n            <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', marginBottom: '0.5rem' }}>\r\n                <h3 style={{ margin: 0, fontSize: '1rem', display: 'flex', alignItems: 'center' }}>\r\n                    <FaLayerGroup style={{ marginRight: '0.5rem', color: '#7FFFD4' }} />\r\n                    Collection\r\n                </h3>\r\n                {selectedCollectionId && (\r\n                    <label style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', cursor: 'pointer', fontSize: '0.8rem' }}>\r\n                        <input\r\n                            type=\"checkbox\"\r\n                            checked={showInProfile}\r\n                            onChange={(e) => setShowInProfile(e.target.checked)}\r\n                            style={{ width: '14px', height: '14px' }}\r\n                        />\r\n                        Also show in profile\r\n                    </label>\r\n                )}\r\n            </div>\r\n\r\n            <div style={{ position: 'relative' }}>\r\n                <select\r\n                    value={selectedCollectionId}\r\n                    onChange={(e) => setSelectedCollectionId(e.target.value)}\r\n                    className=\"form-input\"\r\n                    style={{\r\n                        width: '100%',\r\n                        padding: '0.6rem',\r\n                        fontSize: '0.9rem',\r\n                        appearance: 'none',\r\n                        background: 'transparent',\r\n                        border: '1px solid rgba(127, 255, 212, 0.3)',\r\n                        borderRadius: '8px',\r\n                        color: '#fff',\r\n                        cursor: 'pointer'\r\n                    }}\r\n                >\r\n                    <option value=\"\" style={{ background: '#000' }}>Select a collection (optional)...</option>\r\n                    {collections.map(collection => (\r\n                        <option key={collection.id} value={collection.id} style={{ background: '#000' }}>\r\n                            {collection.title}\r\n                        </option>\r\n                    ))}\r\n                    <option value=\"new\" style={{ background: '#000', color: 'var(--ice-mint)' }}>+ Create New Collection</option>\r\n                </select>\r\n                <div style={{\r\n                    position: 'absolute',\r\n                    right: '12px',\r\n                    top: '50%',\r\n                    transform: 'translateY(-50%)',\r\n                    pointerEvents: 'none',\r\n                    color: 'var(--ice-mint)',\r\n                    fontSize: '0.7rem'\r\n                }}>\r\n                    Γû╝\r\n                </div>\r\n            </div>\r\n\r\n            {selectedCollectionId && (() => {\r\n                const selectedCollection = collections.find(c => c.id === selectedCollectionId);\r\n                return selectedCollection ? (\r\n                    <div style={{ marginTop: '0.5rem', fontSize: '0.75rem', color: '#888', display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                        <span>≡ƒôî {selectedCollection.title}</span>\r\n                        <span style={{ color: '#444' }}>|</span>\r\n                        <span>{selectedCollection.postToFeed ? 'Visible in Feed' : 'Hidden from Feed'}</span>\r\n                    </div>\r\n                ) : null;\r\n            })()}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CollectionSelector;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\create-post\\FilmOptionsPanel.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { FaMagic } from 'react-icons/fa';\r\nimport { FILM_STOCKS, FILM_FORMATS, COMMON_FILM_ISOS } from '@/core/constants/filmStocks';\r\nimport { generateQuartzDateString, QUARTZ_DATE_FORMATS } from '@/core/utils/exif';\r\n\r\n/**\r\n * FilmOptionsPanel Component\r\n * \r\n * Displays film photography settings with:\r\n * - Master toggle for film mode\r\n * - Film stock, format, and ISO selectors\r\n * - Camera and lens overrides\r\n * - Quartz date stamp options\r\n * - Film strip border toggle\r\n * \r\n * @param {Object} filmMetadata - Film metadata state object\r\n * @param {Function} setFilmMetadata - Handler to update film metadata\r\n * @param {boolean} enableQuartzDate - Whether quartz date is enabled\r\n * @param {Function} setEnableQuartzDate - Handler to toggle quartz date\r\n * @param {string} quartzDateString - Date string for quartz stamp\r\n * @param {Function} setQuartzDateString - Handler to update date string\r\n * @param {string} quartzColor - Color for quartz date\r\n * @param {Function} setQuartzColor - Handler to update quartz color\r\n * @param {string} quartzDateFormat - Format for quartz date\r\n * @param {Function} setQuartzDateFormat - Handler to update date format\r\n * @param {boolean} enableSprocketOverlay - Whether film border is enabled\r\n * @param {Function} setEnableSprocketOverlay - Handler to toggle film border\r\n * @param {boolean} enableInstantPhotoOverlay - Whether instant photo border is enabled\r\n * @param {Function} setEnableInstantPhotoOverlay - Handler to toggle instant photo border\r\n * @param {number} instantPhotoCount - Number of instant photos per slide (1-3)\r\n * @param {Function} setInstantPhotoCount - Handler to set count\r\n */\r\nconst FilmOptionsPanel = ({\r\n    filmMetadata,\r\n    setFilmMetadata,\r\n    enableQuartzDate,\r\n    setEnableQuartzDate,\r\n    quartzDateString,\r\n    setQuartzDateString,\r\n    quartzColor,\r\n    setQuartzColor,\r\n    quartzDateFormat,\r\n    setQuartzDateFormat,\r\n    enableSprocketOverlay,\r\n    setEnableSprocketOverlay,\r\n    enableInstantPhotoOverlay,\r\n    setEnableInstantPhotoOverlay,\r\n    instantPhotoStyle,\r\n    setInstantPhotoStyle\r\n}) => {\r\n    return (\r\n        <div className=\"form-section\">\r\n            {/* Master Toggle */}\r\n            <label style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', cursor: 'pointer', marginBottom: filmMetadata.isFilm ? '0.75rem' : 0 }}>\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                    <FaMagic style={{ color: '#7FFFD4' }} />\r\n                    <span style={{ fontWeight: '600', fontSize: '1rem' }}>Film Photography</span>\r\n                </div>\r\n                <div style={{ position: 'relative', width: '40px', height: '20px' }}>\r\n                    <input\r\n                        type=\"checkbox\"\r\n                        checked={filmMetadata.isFilm}\r\n                        onChange={(e) => setFilmMetadata({ ...filmMetadata, isFilm: e.target.checked })}\r\n                        style={{ opacity: 0, width: 0, height: 0 }}\r\n                    />\r\n                    <div style={{\r\n                        position: 'absolute', top: 0, left: 0, right: 0, bottom: 0,\r\n                        background: filmMetadata.isFilm ? '#7FFFD4' : '#333',\r\n                        borderRadius: '20px', transition: '0.3s'\r\n                    }}></div>\r\n                    <div style={{\r\n                        position: 'absolute', top: '2px', left: filmMetadata.isFilm ? '22px' : '2px',\r\n                        width: '16px', height: '16px', background: '#fff',\r\n                        borderRadius: '50%', transition: '0.3s'\r\n                    }}></div>\r\n                </div>\r\n            </label>\r\n\r\n            {filmMetadata.isFilm && (\r\n                <div style={{ animation: 'fadeIn 0.3s ease-in-out' }}>\r\n                    {/* Metadata Row - Compact */}\r\n                    <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr 1fr', gap: '0.5rem', marginBottom: '0.5rem' }}>\r\n                        <select\r\n                            value={filmMetadata.stock}\r\n                            onChange={(e) => setFilmMetadata({ ...filmMetadata, stock: e.target.value })}\r\n                            className=\"form-input\"\r\n                            style={{ padding: '0.4rem', fontSize: '0.85rem', background: 'rgba(0,0,0,0.3)', border: '1px solid rgba(127, 255, 212, 0.3)', color: '#fff' }}\r\n                        >\r\n                            <option value=\"\" style={{ background: '#000' }}>Stock...</option>\r\n                            {FILM_STOCKS.map(stock => <option key={stock} value={stock} style={{ background: '#000' }}>{stock}</option>)}\r\n                        </select>\r\n                        <select\r\n                            value={filmMetadata.format}\r\n                            onChange={(e) => setFilmMetadata({ ...filmMetadata, format: e.target.value })}\r\n                            className=\"form-input\"\r\n                            style={{ padding: '0.4rem', fontSize: '0.85rem', background: 'rgba(0,0,0,0.3)', border: '1px solid rgba(127, 255, 212, 0.3)', color: '#fff' }}\r\n                        >\r\n                            <option value=\"\" style={{ background: '#000' }}>Format...</option>\r\n                            {FILM_FORMATS.map(fmt => <option key={fmt} value={fmt} style={{ background: '#000' }}>{fmt}</option>)}\r\n                        </select>\r\n                        <select\r\n                            value={filmMetadata.iso}\r\n                            onChange={(e) => setFilmMetadata({ ...filmMetadata, iso: e.target.value })}\r\n                            className=\"form-input\"\r\n                            style={{ padding: '0.4rem', fontSize: '0.85rem', background: 'rgba(0,0,0,0.3)', border: '1px solid rgba(127, 255, 212, 0.3)', color: '#fff' }}\r\n                        >\r\n                            <option value=\"\" style={{ background: '#000' }}>ISO...</option>\r\n                            {COMMON_FILM_ISOS.map(iso => <option key={iso} value={iso} style={{ background: '#000' }}>{iso}</option>)}\r\n                        </select>\r\n                    </div>\r\n\r\n                    {/* Secondary Metadata Row */}\r\n                    <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '0.5rem', marginBottom: '1rem' }}>\r\n                        <input\r\n                            type=\"text\"\r\n                            placeholder=\"Camera (e.g. Canon AE-1)\"\r\n                            value={filmMetadata.cameraOverride}\r\n                            onChange={(e) => setFilmMetadata({ ...filmMetadata, cameraOverride: e.target.value })}\r\n                            className=\"form-input\"\r\n                            style={{ padding: '0.4rem', fontSize: '0.85rem', background: 'rgba(0,0,0,0.3)', border: '1px solid rgba(127, 255, 212, 0.3)', color: '#fff' }}\r\n                        />\r\n                        <input\r\n                            type=\"text\"\r\n                            placeholder=\"Lens (e.g. 50mm f/1.8)\"\r\n                            value={filmMetadata.lensOverride}\r\n                            onChange={(e) => setFilmMetadata({ ...filmMetadata, lensOverride: e.target.value })}\r\n                            className=\"form-input\"\r\n                            style={{ padding: '0.4rem', fontSize: '0.85rem', background: 'rgba(0,0,0,0.3)', border: '1px solid rgba(127, 255, 212, 0.3)', color: '#fff' }}\r\n                        />\r\n                    </div>\r\n\r\n                    {/* Visuals Subsection (Quartz Only) */}\r\n                    <div style={{ background: 'rgba(0,0,0,0.3)', padding: '0.75rem', borderRadius: '8px', border: '1px solid rgba(127, 255, 212, 0.2)' }}>\r\n                        <div style={{ fontSize: '0.75rem', textTransform: 'uppercase', letterSpacing: '1px', color: 'var(--ice-mint)', marginBottom: '0.5rem', opacity: 0.8 }}>\r\n                            Visuals\r\n                        </div>\r\n\r\n                        <div style={{ display: 'flex', gap: '1rem', flexWrap: 'wrap' }}>\r\n                            {/* Date Stamp Toggle */}\r\n                            <div style={{ flex: 1.5, minWidth: '160px' }}>\r\n                                <label style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', cursor: 'pointer', fontSize: '0.9rem', lineHeight: '1' }}>\r\n                                    <input\r\n                                        type=\"checkbox\"\r\n                                        checked={enableQuartzDate}\r\n                                        onChange={(e) => setEnableQuartzDate(e.target.checked)}\r\n                                        style={{ width: '18px', height: '18px', margin: 0, flexShrink: 0 }}\r\n                                    />\r\n                                    <span style={{ marginTop: '1px' }}>Quartz Date Stamp</span>\r\n                                </label>\r\n\r\n                                {enableQuartzDate && (\r\n                                    <div style={{ marginTop: '0.5rem' }}>\r\n                                        <input\r\n                                            type=\"text\"\r\n                                            value={quartzDateString}\r\n                                            onChange={(e) => setQuartzDateString(e.target.value)}\r\n                                            className=\"form-input\"\r\n                                            placeholder=\"D M 'Y\"\r\n                                            style={{ padding: '0.3rem', fontSize: '0.8rem', width: '100%', marginBottom: '0.5rem', background: 'rgba(0,0,0,0.3)', border: '1px solid rgba(127, 255, 212, 0.3)', color: '#fff' }}\r\n                                        />\r\n                                        <div style={{ display: 'flex', gap: '0.5rem', alignItems: 'center' }}>\r\n                                            <span style={{ fontSize: '0.75rem', color: '#888' }}>Color:</span>\r\n                                            <button\r\n                                                type=\"button\"\r\n                                                onClick={() => setQuartzColor('#7FFFD4')}\r\n                                                style={{\r\n                                                    width: '28px',\r\n                                                    height: '28px',\r\n                                                    background: '#7FFFD4',\r\n                                                    border: quartzColor === '#7FFFD4' ? '2px solid #fff' : '1px solid #333',\r\n                                                    borderRadius: '4px',\r\n                                                    cursor: 'pointer',\r\n                                                    boxShadow: quartzColor === '#7FFFD4' ? '0 0 8px #7FFFD4' : 'none'\r\n                                                }}\r\n                                                title=\"PanoSpace Green\"\r\n                                            />\r\n                                            <button\r\n                                                type=\"button\"\r\n                                                onClick={() => setQuartzColor('#FF4500')}\r\n                                                style={{\r\n                                                    width: '28px',\r\n                                                    height: '28px',\r\n                                                    background: '#FF4500',\r\n                                                    border: quartzColor === '#FF4500' ? '2px solid #fff' : '1px solid #333',\r\n                                                    borderRadius: '4px',\r\n                                                    cursor: 'pointer',\r\n                                                    boxShadow: quartzColor === '#FF4500' ? '0 0 8px #FF4500' : 'none'\r\n                                                }}\r\n                                                title=\"Film Orange\"\r\n                                            />\r\n                                            <input\r\n                                                type=\"color\"\r\n                                                value={quartzColor}\r\n                                                onChange={(e) => setQuartzColor(e.target.value)}\r\n                                                style={{\r\n                                                    width: '28px',\r\n                                                    height: '28px',\r\n                                                    border: '1px solid #333',\r\n                                                    borderRadius: '4px',\r\n                                                    background: 'none',\r\n                                                    cursor: 'pointer'\r\n                                                }}\r\n                                                title=\"Custom Color\"\r\n                                            />\r\n                                        </div>\r\n                                        <div style={{ marginTop: '0.5rem' }}>\r\n                                            <label style={{ fontSize: '0.75rem', color: '#888', display: 'block', marginBottom: '0.25rem' }}>Date Format:</label>\r\n\r\n\r\n                                            <select\r\n                                                value={quartzDateFormat}\r\n                                                onChange={(e) => {\r\n                                                    const newFormat = e.target.value;\r\n                                                    setQuartzDateFormat(newFormat);\r\n                                                    // Auto-update the text string based on format\r\n                                                    const newText = generateQuartzDateString(newFormat);\r\n                                                    setQuartzDateString(newText);\r\n                                                }}\r\n                                                className=\"form-input\"\r\n                                                style={{ padding: '0.3rem', fontSize: '0.8rem', width: '100%', background: 'rgba(0,0,0,0.3)', border: '1px solid rgba(127, 255, 212, 0.3)', color: '#fff' }}\r\n                                            >\r\n                                                {QUARTZ_DATE_FORMATS.map(fmt => (\r\n                                                    <option key={fmt.value} value={fmt.value} style={{ background: '#000' }}>{fmt.label}</option>\r\n                                                ))}\r\n                                            </select>\r\n                                        </div>\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n\r\n                            {/* Borders Column */}\r\n                            <div style={{ flex: 1, minWidth: '140px', display: 'flex', flexDirection: 'column', gap: '0.8rem' }}>\r\n                                {/* Film Border Toggle */}\r\n                                <label style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', cursor: 'pointer', fontSize: '0.9rem', lineHeight: '1' }}>\r\n                                    <input\r\n                                        type=\"checkbox\"\r\n                                        checked={enableSprocketOverlay}\r\n                                        onChange={(e) => setEnableSprocketOverlay(e.target.checked)}\r\n                                        style={{ width: '18px', height: '18px', margin: 0, flexShrink: 0 }}\r\n                                    />\r\n                                    <span style={{ marginTop: '1px' }}>Film Strip Border</span>\r\n                                </label>\r\n\r\n                                {/* Instant Photo Toggle */}\r\n                                <label style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', cursor: 'pointer', fontSize: '0.9rem', lineHeight: '1' }}>\r\n                                    <input\r\n                                        type=\"checkbox\"\r\n                                        checked={enableInstantPhotoOverlay}\r\n                                        onChange={(e) => setEnableInstantPhotoOverlay(e.target.checked)}\r\n                                        style={{ width: '18px', height: '18px', margin: 0, flexShrink: 0 }}\r\n                                    />\r\n                                    <span style={{ marginTop: '1px' }}>Instant Photo UI</span>\r\n                                </label>\r\n\r\n                                {enableInstantPhotoOverlay && (\r\n                                    <div style={{ paddingLeft: '1.5rem', display: 'flex', gap: '0.5rem', marginTop: '-0.2rem' }}>\r\n                                        <button\r\n                                            type=\"button\"\r\n                                            onClick={() => setInstantPhotoStyle('thin')}\r\n                                            style={{\r\n                                                padding: '0.3rem 0.6rem',\r\n                                                fontSize: '0.75rem',\r\n                                                background: instantPhotoStyle === 'thin' ? 'rgba(127, 255, 212, 0.2)' : 'rgba(255,255,255,0.05)',\r\n                                                border: instantPhotoStyle === 'thin' ? '1px solid #7FFFD4' : '1px solid rgba(255,255,255,0.2)',\r\n                                                color: instantPhotoStyle === 'thin' ? '#7FFFD4' : '#aaa',\r\n                                                borderRadius: '4px',\r\n                                                cursor: 'pointer'\r\n                                            }}\r\n                                        >\r\n                                            Thin Border\r\n                                        </button>\r\n                                        <button\r\n                                            type=\"button\"\r\n                                            onClick={() => setInstantPhotoStyle('thick')}\r\n                                            style={{\r\n                                                padding: '0.3rem 0.6rem',\r\n                                                fontSize: '0.75rem',\r\n                                                background: instantPhotoStyle === 'thick' ? 'rgba(127, 255, 212, 0.2)' : 'rgba(255,255,255,0.05)',\r\n                                                border: instantPhotoStyle === 'thick' ? '1px solid #7FFFD4' : '1px solid rgba(255,255,255,0.2)',\r\n                                                color: instantPhotoStyle === 'thick' ? '#7FFFD4' : '#aaa',\r\n                                                borderRadius: '4px',\r\n                                                cursor: 'pointer'\r\n                                            }}\r\n                                        >\r\n                                            Thick Border\r\n                                        </button>\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default FilmOptionsPanel;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\create-post\\ImageCarousel.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaImage' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'updateSlide' is defined but never used. Allowed unused args must match /^_/u.","line":36,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":36,"endColumn":16}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { FaImage, FaTimes, FaCamera, FaPlus } from 'react-icons/fa';\r\nimport ThumbnailStrip from './ThumbnailStrip';\r\n\r\n/**\r\n * ImageCarousel Component\r\n * \r\n * Displays the main image carousel with:\r\n * - Empty state when no images\r\n * - Swipeable carousel track\r\n * - Remove button on each slide\r\n * - Shop toggle checkbox\r\n * - EXIF badge indicator\r\n * - Thumbnail strip\r\n * - Add more photos button\r\n * \r\n * @param {Array} slides - Array of slide objects\r\n * @param {number} activeSlideIndex - Index of currently active slide\r\n * @param {Function} setActiveSlideIndex - Handler to change active slide\r\n * @param {Function} removeSlide - Handler to remove a slide\r\n * @param {Function} updateSlide - Handler to update slide properties\r\n * @param {Function} onTouchStart - Touch start handler for swipe\r\n * @param {Function} onTouchMove - Touch move handler for swipe\r\n * @param {Function} onTouchEnd - Touch end handler for swipe\r\n * @param {Function} handleDragStart - Drag start handler for thumbnails\r\n * @param {Function} handleDragOver - Drag over handler for thumbnails\r\n * @param {Function} handleDrop - Drop handler for thumbnails\r\n * @param {Function} moveSlide - Handler to move slide left/right\r\n * @param {Function} onAddMoreClick - Handler when \"Add Another Photo\" is clicked\r\n */\r\nconst ImageCarousel = ({\r\n    slides,\r\n    activeSlideIndex,\r\n    setActiveSlideIndex,\r\n    removeSlide,\r\n    updateSlide,\r\n    onTouchStart,\r\n    onTouchMove,\r\n    onTouchEnd,\r\n    handleDragStart,\r\n    handleDragOver,\r\n    handleDrop,\r\n    moveSlide,\r\n    onAddMoreClick\r\n}) => {\r\n    // Empty state - no slides yet\r\n    if (slides.length === 0) {\r\n        return (\r\n            <div className=\"empty-state\" onClick={onAddMoreClick}>\r\n                {/* Subtle floating elements */}\r\n                <div style={{ position: 'absolute', top: '15%', left: '15%', width: '3px', height: '3px', background: 'var(--ice-mint)', borderRadius: '50%', boxShadow: '0 0 8px rgba(127, 255, 212, 0.6)', animation: 'float 3s infinite ease-in-out', opacity: 0.6 }}></div>\r\n                <div style={{ position: 'absolute', top: '25%', right: '20%', width: '2px', height: '2px', background: '#fff', borderRadius: '50%', boxShadow: '0 0 4px #fff', animation: 'float 4s infinite ease-in-out', animationDelay: '1s', opacity: 0.4 }}></div>\r\n                <div style={{ position: 'absolute', bottom: '20%', left: '25%', width: '2px', height: '2px', background: 'var(--ice-mint)', borderRadius: '50%', boxShadow: '0 0 6px rgba(127, 255, 212, 0.5)', animation: 'pulse 2s infinite', opacity: 0.5 }}></div>\r\n\r\n                <FaPlus size={32} color=\"var(--ice-mint)\" style={{ filter: 'drop-shadow(0 0 10px rgba(127, 255, 212, 0.5))' }} />\r\n                <p style={{ color: 'var(--ice-mint)', marginTop: '1rem', fontWeight: '700', letterSpacing: '0.1em', textTransform: 'uppercase' }}>Add Photos</p>\r\n                <span style={{ fontSize: '0.8rem', color: 'rgba(127, 255, 212, 0.6)', marginTop: '0.5rem' }}>\r\n                    or drag and drop\r\n                </span>\r\n                <div style={{\r\n                    marginTop: '1.5rem',\r\n                    fontSize: '0.65rem',\r\n                    color: 'rgba(255,255,255,0.4)',\r\n                    borderTop: '1px solid rgba(255,255,255,0.1)',\r\n                    paddingTop: '0.8rem',\r\n                    display: 'flex',\r\n                    gap: '0.8rem',\r\n                    fontFamily: 'var(--font-family-mono)',\r\n                    letterSpacing: '0.05em'\r\n                }}>\r\n                    <span>300 DPI RECOMMENDED</span>\r\n                    <span>ΓÇó</span>\r\n                    <span>RAW SUPPORTED</span>\r\n                    <span>ΓÇó</span>\r\n                    <span>UP TO 10 SLIDES</span>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // Carousel with slides\r\n    return (\r\n        <div className=\"carousel-container\">\r\n            <div\r\n                className=\"carousel-track\"\r\n                onTouchStart={onTouchStart}\r\n                onTouchMove={onTouchMove}\r\n                onTouchEnd={onTouchEnd}\r\n                style={{\r\n                    transform: `translateX(-${activeSlideIndex * 100}%)`,\r\n                    transition: 'transform 0.3s ease-out'\r\n                }}\r\n            >\r\n                {slides.map((slide, idx) => (\r\n                    <div key={idx} className=\"carousel-slide\">\r\n                        <img src={slide.preview} alt={`Slide ${idx + 1}`} />\r\n\r\n                        <div className=\"carousel-overlay\">\r\n                            <button\r\n                                className=\"slide-remove-btn\"\r\n                                onClick={(e) => {\r\n                                    e.stopPropagation();\r\n                                    removeSlide(idx, e);\r\n                                }}\r\n                            >\r\n                                <FaTimes />\r\n                            </button>\r\n\r\n                            <div className=\"overlay-bottom-bar\">\r\n                                {(slide.exif || slide.manualExif) ? (\r\n                                    <span className=\"exif-badge\"><FaCamera /></span>\r\n                                ) : <div></div>}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n\r\n            {/* Thumbnail Scrollbar with Reorder Controls */}\r\n            <ThumbnailStrip\r\n                slides={slides}\r\n                activeSlideIndex={activeSlideIndex}\r\n                setActiveSlideIndex={setActiveSlideIndex}\r\n                handleDragStart={handleDragStart}\r\n                handleDragOver={handleDragOver}\r\n                handleDrop={handleDrop}\r\n                moveSlide={moveSlide}\r\n            />\r\n\r\n            {/* Add More Button */}\r\n            <button\r\n                className=\"add-more-carousel-btn\"\r\n                onClick={onAddMoreClick}\r\n            >\r\n                <FaPlus /> Add Another Photo\r\n            </button>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ImageCarousel;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\create-post\\ManualExifEditor.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { FaCamera } from 'react-icons/fa';\r\nimport ManualExifForm from '@/components/ManualExifForm';\r\nimport { formatCameraModel } from '@/core/utils/exif';\r\n\r\n/**\r\n * ManualExifEditor Component\r\n * \r\n * Displays EXIF/camera data controls with:\r\n * - Header with edit/add button\r\n * - Display of existing EXIF data\r\n * - Manual EXIF form when editing\r\n * \r\n * @param {Object} activeSlide - The currently active slide object\r\n * @param {number} activeSlideIndex - Index of active slide\r\n * @param {Object} showManualExif - Object mapping slide indices to show/hide state\r\n * @param {Function} setShowManualExif - Handler to toggle EXIF form visibility\r\n * @param {Function} handleManualExifSave - Handler to save EXIF data\r\n * @param {boolean} hasExif - Whether slide has EXIF data\r\n */\r\nconst ManualExifEditor = ({\r\n    activeSlide,\r\n    activeSlideIndex,\r\n    showManualExif,\r\n    setShowManualExif,\r\n    handleManualExifSave,\r\n    hasExif\r\n}) => {\r\n    return (\r\n        <div className=\"exif-section\">\r\n            <div className=\"exif-header\" style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '1rem' }}>\r\n                <span style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', fontWeight: '600', color: '#7FFFD4' }}>\r\n                    <FaCamera /> Camera Data\r\n                </span>\r\n                <button\r\n                    className=\"btn-edit-exif\"\r\n                    onClick={() => setShowManualExif(prev => ({ ...prev, [activeSlideIndex]: true }))}\r\n                    style={{\r\n                        background: 'rgba(127, 255, 212, 0.1)',\r\n                        border: '1px solid rgba(127, 255, 212, 0.3)',\r\n                        borderRadius: '6px',\r\n                        color: '#7FFFD4',\r\n                        padding: '0.4rem 0.8rem',\r\n                        fontSize: '0.75rem',\r\n                        fontWeight: '600',\r\n                        cursor: 'pointer',\r\n                        transition: 'all 0.2s',\r\n                        textTransform: 'uppercase',\r\n                        letterSpacing: '0.5px'\r\n                    }}\r\n                    onMouseEnter={e => {\r\n                        e.target.style.background = 'rgba(127, 255, 212, 0.2)';\r\n                        e.target.style.borderColor = '#7FFFD4';\r\n                    }}\r\n                    onMouseLeave={e => {\r\n                        e.target.style.background = 'rgba(127, 255, 212, 0.1)';\r\n                        e.target.style.borderColor = 'rgba(127, 255, 212, 0.3)';\r\n                    }}\r\n                >\r\n                    {hasExif ? 'Edit Data' : 'Add Data'}\r\n                </button>\r\n            </div>\r\n\r\n            {hasExif && !showManualExif[activeSlideIndex] && (\r\n                <div className=\"exif-display\">\r\n                    {formatCameraModel(\r\n                        activeSlide.exif?.make || activeSlide.manualExif?.make,\r\n                        activeSlide.exif?.model || activeSlide.manualExif?.model\r\n                    )}\r\n                </div>\r\n            )}\r\n\r\n            {showManualExif[activeSlideIndex] && (\r\n                <ManualExifForm\r\n                    existingExif={activeSlide.manualExif || activeSlide.exif}\r\n                    onSave={handleManualExifSave}\r\n                    onCancel={() => setShowManualExif(prev => ({ ...prev, [activeSlideIndex]: false }))}\r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ManualExifEditor;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\create-post\\RatingSystemSelector.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { FaSmile, FaStar } from 'react-icons/fa';\r\n\r\n/**\r\n * RatingSystemSelector Component\r\n * \r\n * Displays a toggle to choose between standard \"Smiley\" likes\r\n * or a 5-star rating system for the post.\r\n * \r\n * @param {boolean} enableRatings - Whether 5-star ratings are enabled\r\n * @param {Function} setEnableRatings - Handler to toggle rating system\r\n */\r\nconst RatingSystemSelector = ({\r\n    enableRatings,\r\n    setEnableRatings\r\n}) => {\r\n    return (\r\n        <div className=\"form-section\" style={{ padding: '0.75rem 0.75rem 0.6rem', display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\r\n            <div style={{ display: 'flex', flexDirection: 'column' }}>\r\n                <span style={{ fontWeight: '600', fontSize: '0.95rem' }}>Rating System</span>\r\n                <span style={{ fontSize: '0.75rem', color: '#888' }}>\r\n                    {enableRatings ? 'Users can rate 1-5 stars' : 'Standard like button'}\r\n                </span>\r\n            </div>\r\n            <div style={{ display: 'flex', gap: '0.5rem' }}>\r\n                <button\r\n                    type=\"button\"\r\n                    onClick={() => setEnableRatings(false)}\r\n                    style={{\r\n                        padding: '0.4rem 0.8rem',\r\n                        borderRadius: '6px',\r\n                        border: !enableRatings ? '1px solid #7FFFD4' : '1px solid #333',\r\n                        background: !enableRatings ? 'rgba(127, 255, 212, 0.1)' : 'transparent',\r\n                        color: !enableRatings ? '#7FFFD4' : '#666',\r\n                        cursor: 'pointer',\r\n                        fontSize: '0.85rem',\r\n                        fontWeight: '600',\r\n                        transition: 'all 0.2s',\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        gap: '0.5rem'\r\n                    }}\r\n                >\r\n                    <FaSmile size={16} /> Smiley\r\n                </button>\r\n                <button\r\n                    type=\"button\"\r\n                    onClick={() => setEnableRatings(true)}\r\n                    style={{\r\n                        padding: '0.4rem 0.8rem',\r\n                        borderRadius: '6px',\r\n                        border: enableRatings ? '1px solid #7FFFD4' : '1px solid #333',\r\n                        background: enableRatings ? 'rgba(127, 255, 212, 0.1)' : 'transparent',\r\n                        color: enableRatings ? '#7FFFD4' : '#666',\r\n                        cursor: 'pointer',\r\n                        fontSize: '0.85rem',\r\n                        fontWeight: '600',\r\n                        transition: 'all 0.2s',\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        gap: '0.5rem'\r\n                    }}\r\n                >\r\n                    <FaStar size={16} /> 5-Star\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default RatingSystemSelector;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\create-post\\ShopConfiguration.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { PRINT_TIERS } from '@/domain/shop/pricing';\r\n\r\n/**\r\n * ShopConfiguration Component\r\n * \r\n * Displays shop/print settings for the active image with:\r\n * - Header with \"Add All to Shop\" button\r\n * - Toggle to sell current image\r\n * - Copyright warning\r\n * - Product tier selection (Economy, Premium, Limited)\r\n * - Stickers add-on option\r\n * \r\n * @param {Object} activeSlide - The currently active slide object\r\n * @param {number} activeSlideIndex - Index of active slide\r\n * @param {Array} slides - All slides array\r\n * @param {Function} updateSlide - Handler to update slide properties\r\n * @param {Function} handleAddAllToShop - Handler to add/remove all slides from shop\r\n */\r\nconst ShopConfiguration = ({\r\n    activeSlide,\r\n    activeSlideIndex,\r\n    slides,\r\n    updateSlide,\r\n    handleAddAllToShop\r\n}) => {\r\n    return (\r\n        <div style={{ marginTop: '1rem', padding: '1rem', background: '#111', borderRadius: '8px' }}>\r\n            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '1rem' }}>\r\n                <h4 style={{ color: '#7FFFD4', margin: 0 }}>Shop Configuration</h4>\r\n                <button\r\n                    type=\"button\"\r\n                    onClick={handleAddAllToShop}\r\n                    style={{\r\n                        background: 'transparent',\r\n                        border: '1px solid #7FFFD4',\r\n                        color: '#7FFFD4',\r\n                        padding: '0.3rem 0.8rem',\r\n                        borderRadius: '4px',\r\n                        fontSize: '0.8rem',\r\n                        cursor: 'pointer'\r\n                    }}\r\n                >\r\n                    {slides.every(s => s.addToShop) ? 'Remove All from Shop' : 'Add All to Shop'}\r\n                </button>\r\n            </div>\r\n\r\n            <label style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', cursor: 'pointer', marginBottom: '1rem' }}>\r\n                <input\r\n                    type=\"checkbox\"\r\n                    checked={activeSlide.addToShop}\r\n                    onChange={(e) => updateSlide(activeSlideIndex, { addToShop: e.target.checked })}\r\n                    style={{ width: '18px', height: '18px' }}\r\n                />\r\n                Sell this image\r\n            </label>\r\n\r\n            {/* Copyright Warning for Shop Items */}\r\n            {activeSlide.addToShop && (\r\n                <div style={{\r\n                    marginBottom: '1rem',\r\n                    padding: '0.75rem',\r\n                    background: 'rgba(127, 255, 212, 0.1)',\r\n                    border: '1px solid rgba(127, 255, 212, 0.3)',\r\n                    borderRadius: '6px',\r\n                    fontSize: '0.75rem',\r\n                    color: '#7FFFD4',\r\n                    lineHeight: '1.4'\r\n                }}>\r\n                    Γä╣∩╕Å <strong>Shop Draft:</strong> This will create a shop draft. Visit your Shop Drafts page to publish it after confirming copyright ownership.\r\n                </div>\r\n            )}\r\n\r\n            {activeSlide.addToShop && (\r\n                <div style={{ display: 'grid', gridTemplateColumns: 'repeat(4, 1fr)', gap: '0.5rem' }}>\r\n                    <button\r\n                        onClick={() => updateSlide(activeSlideIndex, { productTier: PRINT_TIERS.ECONOMY })}\r\n                        style={{\r\n                            padding: '0.5rem',\r\n                            background: activeSlide.productTier === PRINT_TIERS.ECONOMY ? 'rgba(127, 255, 212, 0.2)' : '#222',\r\n                            color: activeSlide.productTier === PRINT_TIERS.ECONOMY ? '#7FFFD4' : '#888',\r\n                            border: activeSlide.productTier === PRINT_TIERS.ECONOMY ? '1px solid #7FFFD4' : '1px solid #333',\r\n                            borderRadius: '6px',\r\n                            fontSize: '0.8rem',\r\n                            cursor: 'pointer'\r\n                        }}\r\n                    >\r\n                        Economy\r\n                    </button>\r\n                    <button\r\n                        onClick={() => updateSlide(activeSlideIndex, { productTier: PRINT_TIERS.PREMIUM })}\r\n                        style={{\r\n                            padding: '0.5rem',\r\n                            background: activeSlide.productTier === PRINT_TIERS.PREMIUM ? 'rgba(127, 255, 212, 0.2)' : '#222',\r\n                            color: activeSlide.productTier === PRINT_TIERS.PREMIUM ? '#7FFFD4' : '#888',\r\n                            border: activeSlide.productTier === PRINT_TIERS.PREMIUM ? '1px solid #7FFFD4' : '1px solid #333',\r\n                            borderRadius: '6px',\r\n                            fontSize: '0.8rem',\r\n                            cursor: 'pointer'\r\n                        }}\r\n                    >\r\n                        Premium\r\n                    </button>\r\n                    <button\r\n                        onClick={() => updateSlide(activeSlideIndex, { productTier: PRINT_TIERS.LIMITED })}\r\n                        style={{\r\n                            padding: '0.5rem',\r\n                            background: activeSlide.productTier === PRINT_TIERS.LIMITED ? 'rgba(127, 255, 212, 0.2)' : '#222',\r\n                            color: activeSlide.productTier === PRINT_TIERS.LIMITED ? '#7FFFD4' : '#888',\r\n                            border: activeSlide.productTier === PRINT_TIERS.LIMITED ? '1px solid #7FFFD4' : '1px solid #333',\r\n                            borderRadius: '6px',\r\n                            fontSize: '0.8rem',\r\n                            cursor: 'pointer'\r\n                        }}\r\n                    >\r\n                        Limited\r\n                    </button>\r\n                    <button\r\n                        onClick={() => updateSlide(activeSlideIndex, { includeStickers: !activeSlide.includeStickers })}\r\n                        style={{\r\n                            padding: '0.5rem',\r\n                            background: activeSlide.includeStickers ? 'rgba(127, 255, 212, 0.2)' : '#222',\r\n                            color: activeSlide.includeStickers ? '#7FFFD4' : '#888',\r\n                            border: activeSlide.includeStickers ? '1px solid #7FFFD4' : '1px solid #333',\r\n                            borderRadius: '6px',\r\n                            fontSize: '0.8rem',\r\n                            cursor: 'pointer'\r\n                        }}\r\n                    >\r\n                        + Stickers\r\n                    </button>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ShopConfiguration;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\create-post\\TagCategoryPanel.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { FaPlus, FaTimes, FaHashtag, FaSmile } from 'react-icons/fa';\r\nimport TagFilterPanel from '@/components/TagFilterPanel';\r\nimport { TAG_CATEGORIES, ALL_TAGS } from '@/core/constants/tagCategories';\r\nimport CosmicEmojiPicker from '@/components/common/CosmicEmojiPicker';\r\nimport CosmicText from '@/components/common/CosmicText';\r\nimport { emojiToCode } from '@/utils/emojiToCodeMap';\r\n\r\n/**\r\n * TagCategoryPanel Component\r\n * \r\n * Displays the tag selection interface with:\r\n * - Custom tag input\r\n * - Section header and description\r\n * - Multiple tag category panels\r\n * - Expandable/collapsible categories\r\n * \r\n * @param {Array} tags - Array of selected tag strings\r\n * @param {Function} handleTagToggle - Handler to toggle tag selection\r\n * @param {Object} expandedCategories - Object mapping category IDs to expanded state\r\n * @param {Function} toggleCategory - Handler to toggle category expansion\r\n */\r\nconst TagCategoryPanel = ({\r\n    tags,\r\n    handleTagToggle,\r\n    expandedCategories,\r\n    toggleCategory\r\n}) => {\r\n    const [customTagInput, setCustomTagInput] = useState('');\r\n    const [showEmojiPicker, setShowEmojiPicker] = useState(false);\r\n\r\n    // Filter tags to find ones that are NOT in the standard list\r\n    // We use a Set for faster lookups\r\n    const standardTagsSet = new Set(ALL_TAGS);\r\n    const customTags = tags.filter(tag => !standardTagsSet.has(tag));\r\n\r\n    const handleAddCustomTag = (e) => {\r\n        e.preventDefault();\r\n        if (!customTagInput.trim()) return;\r\n\r\n        let input = customTagInput;\r\n        // Convert emojis to codes\r\n        Object.entries(emojiToCode).forEach(([emoji, code]) => {\r\n            input = input.split(emoji).join(code);\r\n        });\r\n\r\n        // Normalize: lowercase, trim, replace spaces with dashes\r\n        const normalizedTag = input\r\n            .toLowerCase()\r\n            .trim()\r\n            .replace(/\\s+/g, '-');\r\n\r\n        if (normalizedTag) {\r\n            handleTagToggle(normalizedTag);\r\n            setCustomTagInput('');\r\n        }\r\n    };\r\n\r\n    const handleKeyDown = (e) => {\r\n        if (e.key === 'Enter') {\r\n            e.preventDefault();\r\n            handleAddCustomTag(e);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"form-section\" style={{ marginTop: '2rem' }}>\r\n            <h3>Tags & Categories</h3>\r\n            <p className=\"field-hint\" style={{ marginBottom: '1rem' }}>\r\n                Select tags or add your own to help people find your work.\r\n            </p>\r\n\r\n            {/* Custom Tag Input */}\r\n            <div className=\"custom-tag-input-container\" style={{ marginBottom: '1.5rem' }}>\r\n                <div style={{\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    background: 'rgba(255, 255, 255, 0.05)',\r\n                    border: '1px solid rgba(255, 255, 255, 0.1)',\r\n                    borderRadius: '8px',\r\n                    padding: '0.5rem 1rem',\r\n                    transition: 'all 0.2s ease'\r\n                }}>\r\n                    <FaHashtag color=\"rgba(255, 255, 255, 0.3)\" size={14} style={{ marginRight: '0.5rem' }} />\r\n                    <input\r\n                        type=\"text\"\r\n                        value={customTagInput}\r\n                        onChange={(e) => setCustomTagInput(e.target.value)}\r\n                        onKeyDown={handleKeyDown}\r\n                        placeholder=\"Add custom tag...\"\r\n                        style={{\r\n                            background: 'transparent',\r\n                            border: 'none',\r\n                            color: '#fff',\r\n                            fontSize: '0.9rem',\r\n                            width: '100%',\r\n                            outline: 'none',\r\n                            fontFamily: 'var(--font-family-mono)'\r\n                        }}\r\n                    />\r\n                    <button\r\n                        onClick={() => setShowEmojiPicker(!showEmojiPicker)}\r\n                        style={{\r\n                            background: 'transparent',\r\n                            color: showEmojiPicker ? 'var(--ice-mint)' : 'rgba(255, 255, 255, 0.5)',\r\n                            border: 'none',\r\n                            cursor: 'pointer',\r\n                            display: 'flex', alignItems: 'center', justifyContent: 'center',\r\n                            width: '24px', height: '24px', marginRight: '0.5rem' // Margin before Plus\r\n                        }}\r\n                    >\r\n                        <FaSmile size={16} />\r\n                    </button>\r\n                    <button\r\n                        onClick={handleAddCustomTag}\r\n                        disabled={!customTagInput.trim()}\r\n                        style={{\r\n                            background: customTagInput.trim() ? 'var(--ice-mint)' : 'rgba(255, 255, 255, 0.1)',\r\n                            color: customTagInput.trim() ? '#000' : 'rgba(255, 255, 255, 0.3)',\r\n                            border: 'none',\r\n                            borderRadius: '4px',\r\n                            width: '24px',\r\n                            height: '24px',\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            justifyContent: 'center',\r\n                            cursor: customTagInput.trim() ? 'pointer' : 'default',\r\n                            transition: 'all 0.2s ease',\r\n                            marginLeft: '0.2rem'\r\n                        }}\r\n                    >\r\n                        <FaPlus size={10} />\r\n                    </button>\r\n                </div>\r\n\r\n                <CosmicEmojiPicker\r\n                    visible={showEmojiPicker}\r\n                    onSelect={(emoji) => setCustomTagInput(prev => prev + emoji)}\r\n                    style={{ marginBottom: '1rem' }}\r\n                />\r\n\r\n                {/* Display Custom Tags */}\r\n                {customTags.length > 0 && (\r\n                    <div className=\"custom-tags-list\" style={{\r\n                        display: 'flex',\r\n                        flexWrap: 'wrap',\r\n                        gap: '0.5rem',\r\n                        marginTop: '0.8rem'\r\n                    }}>\r\n                        {customTags.map(tag => (\r\n                            <button\r\n                                key={tag}\r\n                                onClick={() => handleTagToggle(tag)}\r\n                                style={{\r\n                                    background: 'rgba(127, 255, 212, 0.15)',\r\n                                    border: '1px solid var(--ice-mint)',\r\n                                    color: 'var(--ice-mint)',\r\n                                    padding: '0.4rem 0.8rem',\r\n                                    borderRadius: '6px',\r\n                                    fontSize: '0.75rem',\r\n                                    cursor: 'pointer',\r\n                                    display: 'inline-flex',\r\n                                    alignItems: 'center',\r\n                                    gap: '0.4rem',\r\n                                    transition: 'all 0.2s ease',\r\n                                    fontFamily: 'var(--font-family-mono)',\r\n                                    textTransform: 'uppercase',\r\n                                    fontWeight: 600,\r\n                                    boxShadow: '0 0 10px rgba(127, 255, 212, 0.1)'\r\n                                }}\r\n                            >\r\n\r\n                                <CosmicText text={tag} />\r\n                                <FaTimes size={10} style={{ opacity: 0.7 }} />\r\n                            </button>\r\n                        ))}\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            <div className=\"tags-container\" style={{\r\n                width: '100%',\r\n                maxWidth: '100%',\r\n                boxSizing: 'border-box',\r\n                overflow: 'hidden'\r\n            }}>\r\n\r\n                {Object.values(TAG_CATEGORIES)\r\n                    .map(category => (\r\n                        <TagFilterPanel\r\n                            key={category.id}\r\n                            category={category}\r\n                            selectedTags={tags}\r\n                            onTagToggle={handleTagToggle}\r\n                            isExpanded={expandedCategories[category.id]}\r\n                            onToggleExpand={() => toggleCategory(category.id)}\r\n                        />\r\n                    ))}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default TagCategoryPanel;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\create-post\\ThumbnailStrip.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\n\r\n/**\r\n * ThumbnailStrip Component\r\n * \r\n * Displays a horizontal scrollbar of image thumbnails with:\r\n * - Active slide indicator\r\n * - Drag-and-drop reordering\r\n * - Left/Right arrow buttons for reordering\r\n * - Click to select thumbnail\r\n * \r\n * @param {Array} slides - Array of slide objects with preview URLs\r\n * @param {number} activeSlideIndex - Index of currently active slide\r\n * @param {Function} setActiveSlideIndex - Handler to change active slide\r\n * @param {Function} handleDragStart - Drag start handler\r\n * @param {Function} handleDragOver - Drag over handler\r\n * @param {Function} handleDrop - Drop handler\r\n * @param {Function} moveSlide - Handler to move slide left or right\r\n */\r\nconst ThumbnailStrip = ({\r\n    slides,\r\n    activeSlideIndex,\r\n    setActiveSlideIndex,\r\n    handleDragStart,\r\n    handleDragOver,\r\n    handleDrop,\r\n    moveSlide\r\n}) => {\r\n    // Only show if there's more than one slide\r\n    if (slides.length <= 1) return null;\r\n\r\n    return (\r\n        <div className=\"thumbnail-scrollbar\">\r\n            {slides.map((slide, idx) => (\r\n                <div\r\n                    key={idx}\r\n                    className={`thumbnail ${idx === activeSlideIndex ? 'active' : ''}`}\r\n                    draggable\r\n                    onDragStart={(e) => handleDragStart(e, idx)}\r\n                    onDragOver={handleDragOver}\r\n                    onDrop={(e) => handleDrop(e, idx)}\r\n                    onClick={() => setActiveSlideIndex(idx)}\r\n                    style={{ position: 'relative', cursor: 'grab' }}\r\n                >\r\n                    <img\r\n                        src={slide.preview}\r\n                        alt={`Thumbnail ${idx + 1}`}\r\n                        draggable={false}\r\n                        style={{ width: '100%', height: '100%', objectFit: 'contain' }}\r\n                    />\r\n                    {idx === activeSlideIndex && (\r\n                        <div className=\"thumbnail-indicator\" />\r\n                    )}\r\n                    {/* Reorder arrows */}\r\n                    <div style={{\r\n                        position: 'absolute',\r\n                        top: '2px',\r\n                        right: '2px',\r\n                        display: 'flex',\r\n                        gap: '2px',\r\n                        opacity: 0.8\r\n                    }}>\r\n                        {idx > 0 && (\r\n                            <button\r\n                                type=\"button\"\r\n                                onClick={(e) => {\r\n                                    e.stopPropagation();\r\n                                    moveSlide(idx, 'left');\r\n                                }}\r\n                                style={{\r\n                                    background: 'rgba(0,0,0,0.7)',\r\n                                    border: 'none',\r\n                                    borderRadius: '3px',\r\n                                    color: '#7FFFD4',\r\n                                    width: '18px',\r\n                                    height: '18px',\r\n                                    display: 'flex',\r\n                                    alignItems: 'center',\r\n                                    justifyContent: 'center',\r\n                                    cursor: 'pointer',\r\n                                    fontSize: '10px'\r\n                                }}\r\n                                title=\"Move left\"\r\n                            >\r\n                                ΓåÉ\r\n                            </button>\r\n                        )}\r\n                        {idx < slides.length - 1 && (\r\n                            <button\r\n                                type=\"button\"\r\n                                onClick={(e) => {\r\n                                    e.stopPropagation();\r\n                                    moveSlide(idx, 'right');\r\n                                }}\r\n                                style={{\r\n                                    background: 'rgba(0,0,0,0.7)',\r\n                                    border: 'none',\r\n                                    borderRadius: '3px',\r\n                                    color: '#7FFFD4',\r\n                                    width: '18px',\r\n                                    height: '18px',\r\n                                    display: 'flex',\r\n                                    alignItems: 'center',\r\n                                    justifyContent: 'center',\r\n                                    cursor: 'pointer',\r\n                                    fontSize: '10px'\r\n                                }}\r\n                                title=\"Move right\"\r\n                            >\r\n                                ΓåÆ\r\n                            </button>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            ))}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ThumbnailStrip;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\edit-profile\\BannerColorSelector.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { ALL_COLORS } from '@/core/constants/colorPacks';\r\n\r\nconst BannerColorSelector = ({ selectedColor, onSelect }) => {\r\n\r\n    // Filter out black if needed? The UI shows black as valid. \r\n    // Usually neon/accent colors should not be black.\r\n    // prompt says \"Only use the existing PanoSpace theme colors... NO additional colors.\"\r\n    // ALL_COLORS includes 'event-horizon-black' which might be invisible on black bg.\r\n    // I will filter out black.\r\n    const displayColors = ALL_COLORS.filter(c => c.color !== '#000000');\r\n\r\n    return (\r\n        <div className=\"banner-color-scroll\" style={{\r\n            display: 'flex',\r\n            gap: '12px',\r\n            overflowX: 'auto',\r\n            padding: '4px 0 12px 0',\r\n            WebkitOverflowScrolling: 'touch'\r\n        }}>\r\n            <style>{`\r\n                .banner-color-scroll::-webkit-scrollbar { height: 6px; }\r\n                .banner-color-scroll::-webkit-scrollbar-track { background: rgba(255,255,255,0.05); border-radius: 3px; }\r\n                .banner-color-scroll::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.2); border-radius: 3px; }\r\n                .banner-color-scroll::-webkit-scrollbar-thumb:hover { background: rgba(255,255,255,0.3); }\r\n            `}</style>\r\n\r\n            {displayColors.map((opt) => {\r\n                const isSelected = selectedColor === opt.color;\r\n\r\n                return (\r\n                    <button\r\n                        key={opt.id}\r\n                        type=\"button\" // Prevent form submission\r\n                        onClick={() => onSelect(opt.color)}\r\n                        style={{\r\n                            flex: '0 0 auto',\r\n                            display: 'flex',\r\n                            flexDirection: 'column',\r\n                            alignItems: 'center',\r\n                            gap: '6px',\r\n                            background: 'transparent',\r\n                            border: 'none',\r\n                            cursor: 'pointer',\r\n                            padding: 0\r\n                        }}\r\n                        title={opt.name}\r\n                    >\r\n                        {/* Circle */}\r\n                        <div style={{\r\n                            width: '36px',\r\n                            height: '36px',\r\n                            borderRadius: '50%',\r\n                            background: opt.color,\r\n                            border: isSelected ? `2px solid #fff` : '2px solid rgba(255,255,255,0.1)',\r\n                            boxShadow: isSelected ? `0 0 10px ${opt.color}` : 'none',\r\n                            transition: 'all 0.2s',\r\n                            // Handle gradients if present in ALL_COLORS\r\n                            backgroundImage: opt.color.includes('gradient') ? opt.color : 'none'\r\n                        }} />\r\n                    </button>\r\n                );\r\n            })}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default BannerColorSelector;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\edit-profile\\BannerTypeSelector.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useRef' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":23}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useRef, useState } from 'react';\r\nimport { BANNER_TYPES } from '@/core/constants/bannerThemes';\r\n\r\nconst BannerTypeSelector = ({ selectedType, onSelect }) => {\r\n    const [activeCategory, setActiveCategory] = useState('City');\r\n\r\n    const getCategory = (id) => {\r\n        if (id.startsWith('city') || id === 'panospace_beyond') return 'City';\r\n        if (id.startsWith('ocean') || id === 'underwaterY2K') return 'Ocean';\r\n        if (['stars', 'nebula', 'orbital'].includes(id)) return 'Cosmic';\r\n        return 'Abstract';\r\n    };\r\n\r\n    const categories = ['City', 'Ocean', 'Cosmic', 'Abstract'];\r\n\r\n    // Filter and sort to keep the selected item visible if possible, or just standard filter\r\n    const filteredTypes = BANNER_TYPES.filter(t => getCategory(t.id) === activeCategory);\r\n\r\n    return (\r\n        <div style={{ display: 'flex', flexDirection: 'column', gap: '12px' }}>\r\n            {/* Category Pills */}\r\n            <div style={{ display: 'flex', gap: '8px', overflowX: 'auto', paddingBottom: '4px' }}>\r\n                {categories.map(cat => (\r\n                    <button\r\n                        key={cat}\r\n                        type=\"button\"\r\n                        onClick={() => setActiveCategory(cat)}\r\n                        style={{\r\n                            padding: '6px 12px',\r\n                            borderRadius: '20px',\r\n                            border: '1px solid',\r\n                            borderColor: activeCategory === cat ? '#7FFFD4' : 'rgba(255,255,255,0.2)',\r\n                            background: activeCategory === cat ? 'rgba(127, 255, 212, 0.1)' : 'transparent',\r\n                            color: activeCategory === cat ? '#7FFFD4' : '#888',\r\n                            fontSize: '0.8rem',\r\n                            fontWeight: '600',\r\n                            cursor: 'pointer',\r\n                            whiteSpace: 'nowrap',\r\n                            transition: 'all 0.2s'\r\n                        }}\r\n                    >\r\n                        {cat}\r\n                    </button>\r\n                ))}\r\n            </div>\r\n\r\n            {/* Scrollable List */}\r\n            <div\r\n                className=\"banner-type-scroll\"\r\n                style={{\r\n                    display: 'flex',\r\n                    gap: '12px',\r\n                    overflowX: 'auto',\r\n                    padding: '4px 0 12px 0',\r\n                    WebkitOverflowScrolling: 'touch',\r\n                    minHeight: '80px' // Prevent layout shift\r\n                }}>\r\n                <style>{`\r\n                    .banner-type-scroll::-webkit-scrollbar { height: 6px; }\r\n                    .banner-type-scroll::-webkit-scrollbar-track { background: rgba(255,255,255,0.05); border-radius: 3px; }\r\n                    .banner-type-scroll::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.2); border-radius: 3px; }\r\n                    .banner-type-scroll::-webkit-scrollbar-thumb:hover { background: rgba(255,255,255,0.3); }\r\n                `}</style>\r\n\r\n                {filteredTypes.map((type) => {\r\n                    const isSelected = selectedType === type.id;\r\n\r\n                    return (\r\n                        <button\r\n                            key={type.id}\r\n                            type=\"button\" // Prevent form submission\r\n                            onClick={() => onSelect(type.id)}\r\n                            style={{\r\n                                flex: '0 0 auto',\r\n                                display: 'flex',\r\n                                flexDirection: 'column',\r\n                                alignItems: 'center',\r\n                                gap: '8px',\r\n                                background: 'transparent',\r\n                                border: 'none',\r\n                                cursor: 'pointer',\r\n                                outline: 'none',\r\n                                padding: 0\r\n                            }}\r\n                        >\r\n                            {/* Thumbnail */}\r\n                            <div style={{\r\n                                width: '90px',\r\n                                height: '50px',\r\n                                borderRadius: '8px',\r\n                                background: type.previewGradient,\r\n                                border: isSelected ? '2px solid #7FFFD4' : '1px solid rgba(255,255,255,0.2)',\r\n                                boxShadow: isSelected ? '0 0 15px rgba(127, 255, 212, 0.3)' : 'none',\r\n                                transition: 'all 0.2s',\r\n                                position: 'relative',\r\n                                overflow: 'hidden'\r\n                            }}>\r\n                                {/* Stylized Visuals */}\r\n                                {type.id === 'neonGrid' && (\r\n                                    <div style={{\r\n                                        position: 'absolute',\r\n                                        bottom: 0,\r\n                                        left: 0,\r\n                                        right: 0,\r\n                                        height: '50%',\r\n                                        background: `\r\n                                            linear-gradient(transparent 95%, rgba(255,255,255,0.3) 95%),\r\n                                            linear-gradient(90deg, transparent 95%, rgba(255,255,255,0.3) 95%)\r\n                                        `,\r\n                                        backgroundSize: '10px 10px',\r\n                                        transform: 'perspective(20px) rotateX(45deg)'\r\n                                    }} />\r\n                                )}\r\n                                {type.id === 'stars' && (\r\n                                    <div style={{\r\n                                        position: 'absolute', inset: 0,\r\n                                        backgroundImage: 'radial-gradient(white 1px, transparent 1px)',\r\n                                        backgroundSize: '15px 15px',\r\n                                        opacity: 0.5\r\n                                    }} />\r\n                                )}\r\n                            </div>\r\n\r\n                            {/* Label */}\r\n                            <span style={{\r\n                                color: isSelected ? '#7FFFD4' : '#888',\r\n                                fontSize: '0.75rem',\r\n                                fontWeight: isSelected ? '700' : '500',\r\n                                whiteSpace: 'nowrap'\r\n                            }}>\r\n                                {type.label}\r\n                            </span>\r\n                        </button>\r\n                    );\r\n                })}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default BannerTypeSelector;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\feed\\VirtualizedPostContainer.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useCallback' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":55,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":66}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useRef, useState, useEffect, useMemo, useCallback } from 'react';\r\nimport { PostPrefetchManager } from '@/core/prefetch/PostPrefetchManager';\r\n\r\n/**\r\n * VirtualizedPostContainer\r\n * \r\n * Renders a massive scrollable area but only mounts ~3 post components at a time.\r\n * Uses CSS translate3d for GPU-accelerated positioning.\r\n * Handles aggressive preloading of off-screen content.\r\n */\r\nconst VirtualizedPostContainer = ({ posts, renderPost, initialIndex = 0 }) => {\r\n    const containerRef = useRef(null);\r\n    const [currentIndex, setCurrentIndex] = useState(initialIndex);\r\n\r\n    // Handle Scroll & Index Calculation\r\n    useEffect(() => {\r\n        const container = containerRef.current;\r\n        if (!container) return;\r\n\r\n        let ticking = false;\r\n\r\n        const handleScroll = () => {\r\n            if (!ticking) {\r\n                window.requestAnimationFrame(() => {\r\n                    if (container) {\r\n                        const scrollTop = container.scrollTop;\r\n                        const height = window.innerHeight;\r\n                        const index = Math.round(scrollTop / height);\r\n\r\n                        if (index !== currentIndex) {\r\n                            setCurrentIndex(index);\r\n                        }\r\n                    }\r\n                    ticking = false;\r\n                });\r\n                ticking = true;\r\n            }\r\n        };\r\n\r\n        container.addEventListener('scroll', handleScroll, { passive: true });\r\n\r\n        // Restore initial scroll position\r\n        if (initialIndex > 0 && container.scrollTop === 0) {\r\n            container.scrollTop = initialIndex * window.innerHeight;\r\n        }\r\n\r\n        return () => container.removeEventListener('scroll', handleScroll);\r\n    }, [currentIndex, initialIndex]);\r\n\r\n    // PRELOADER: Aggressively fetch next/prev post content\r\n    useEffect(() => {\r\n        // Window: Preload Next 2 posts, Prev 1 post\r\n        // We prioritize Next 1 -> Prev 1 -> Next 2\r\n        const nextPost = posts[currentIndex + 1];\r\n        const prevPost = posts[currentIndex - 1];\r\n        const nextNextPost = posts[currentIndex + 2];\r\n\r\n        if (nextPost) PostPrefetchManager.preloadPost(nextPost);\r\n        if (prevPost) PostPrefetchManager.preloadPost(prevPost);\r\n\r\n        const timer = setTimeout(() => {\r\n            if (nextNextPost) PostPrefetchManager.preloadPost(nextNextPost);\r\n        }, 1000); // Delay slightly to prioritize immediate neighbors\r\n\r\n        return () => clearTimeout(timer);\r\n\r\n    }, [currentIndex, posts]);\r\n\r\n    // Calculate total scroll height\r\n    const totalHeight = `${posts.length * 100}vh`;\r\n\r\n    // Determine render window\r\n    // We render [current - 1, current, current + 1]\r\n    // And keeping them mounted allows for smooth swipe gestures.\r\n    // Adding 'buffer' if needed, but 3 is minimal and safe.\r\n    const visibleIndices = useMemo(() => {\r\n        const indices = [];\r\n        const buffer = 1; // 1 above, 1 below\r\n        for (let i = currentIndex - buffer; i <= currentIndex + buffer; i++) {\r\n            if (i >= 0 && i < posts.length) {\r\n                indices.push(i);\r\n            }\r\n        }\r\n        return indices;\r\n    }, [currentIndex, posts.length]);\r\n\r\n    return (\r\n        <div\r\n            ref={containerRef}\r\n            className=\"no-scrollbar\"\r\n            style={{\r\n                height: '100vh',\r\n                width: '100vw',\r\n                overflowY: 'scroll',\r\n                scrollSnapType: 'y mandatory',\r\n                position: 'relative',\r\n                scrollBehavior: 'smooth',\r\n                willChange: 'scroll-position'\r\n            }}\r\n        >\r\n            {/* Phantom Spacer for Scrollbar */}\r\n            <div style={{ height: totalHeight, width: '1px', position: 'absolute', top: 0, left: 0, pointerEvents: 'none' }} />\r\n\r\n            {/* Rendered Items */}\r\n            {visibleIndices.map(index => {\r\n                const post = posts[index];\r\n                const isCurrent = index === currentIndex;\r\n\r\n                return (\r\n                    <div\r\n                        key={post.id} // Stable key ensures component reuse if possible, or correct unmount\r\n                        style={{\r\n                            position: 'absolute',\r\n                            top: 0,\r\n                            left: 0,\r\n                            width: '100%',\r\n                            height: '100vh',\r\n                            // GPU Acceleration:\r\n                            transform: `translate3d(0, ${index * 100}vh, 0)`,\r\n                            willChange: 'transform',\r\n                            // Snap formatting to ensure native snap catches this absolute box\r\n                            scrollSnapAlign: 'start',\r\n                            scrollSnapStop: 'always',\r\n                            // Accessibility / Visibility optimization\r\n                            visibility: 'visible',\r\n                            pointerEvents: 'auto'\r\n                        }}\r\n                    >\r\n                        {renderPost(post, index, isCurrent)}\r\n                    </div>\r\n                );\r\n            })}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default React.memo(VirtualizedPostContainer);\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\galleries\\AddToGalleryModal.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadGalleries'. Either include it or remove the dependency array.","line":17,"column":8,"nodeType":"ArrayExpression","endLine":17,"endColumn":21,"suggestions":[{"desc":"Update the dependencies array to be: [currentUser, loadGalleries]","fix":{"range":[832,845],"text":"[currentUser, loadGalleries]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { getMemberGalleries, addPostToGallery, addCollectionToGallery, validateContentForGallery } from '@/core/services/firestore/studios.service';\r\nimport { FaTimes, FaCheck, FaExclamationTriangle } from 'react-icons/fa';\r\nimport './AddToGalleryModal.css';\r\n\r\nconst AddToGalleryModal = ({ contentId, contentType, content, onClose }) => {\r\n    const { currentUser } = useAuth();\r\n    const [galleries, setGalleries] = useState([]);\r\n    const [selectedGallery, setSelectedGallery] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [adding, setAdding] = useState(false);\r\n    const [validationResults, setValidationResults] = useState({});\r\n\r\n    useEffect(() => {\r\n        loadGalleries();\r\n    }, [currentUser]);\r\n\r\n    const loadGalleries = async () => {\r\n        try {\r\n            setLoading(true);\r\n            const memberGalleries = await getMemberGalleries(currentUser.uid);\r\n\r\n            // Filter galleries based on content type\r\n            const filteredGalleries = memberGalleries.filter(gallery => {\r\n                if (contentType === 'post') {\r\n                    return gallery.contentType === 'posts' || gallery.contentType === 'both';\r\n                } else if (contentType === 'collection') {\r\n                    return gallery.contentType === 'collections' || gallery.contentType === 'both';\r\n                }\r\n                return false;\r\n            });\r\n\r\n            setGalleries(filteredGalleries);\r\n\r\n            // Validate content against each gallery's criteria\r\n            const results = {};\r\n            filteredGalleries.forEach(gallery => {\r\n                results[gallery.id] = validateContentForGallery(gallery, content);\r\n            });\r\n            setValidationResults(results);\r\n        } catch (error) {\r\n            console.error('Error loading galleries:', error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleAddToGallery = async () => {\r\n        if (!selectedGallery) return;\r\n\r\n        try {\r\n            setAdding(true);\r\n\r\n            if (contentType === 'post') {\r\n                await addPostToGallery(selectedGallery, contentId, currentUser.uid);\r\n            } else if (contentType === 'collection') {\r\n                await addCollectionToGallery(selectedGallery, contentId, currentUser.uid);\r\n            }\r\n\r\n            onClose(true); // Pass true to indicate success\r\n        } catch (error) {\r\n            console.error('Error adding to gallery:', error);\r\n            alert(`Failed to add to gallery: ${error.message}`);\r\n        } finally {\r\n            setAdding(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"add-to-gallery-overlay\" onClick={onClose}>\r\n            <div className=\"add-to-gallery-modal\" onClick={(e) => e.stopPropagation()}>\r\n                <div className=\"modal-header\">\r\n                    <h2>Add to Studio</h2>\r\n                    <button onClick={onClose} className=\"close-btn\">\r\n                        <FaTimes />\r\n                    </button>\r\n                </div>\r\n\r\n                <div className=\"modal-body\">\r\n                    {loading ? (\r\n                        <div className=\"loading-state\">\r\n                            <div className=\"spinner\"></div>\r\n                            <p>Loading your studios...</p>\r\n                        </div>\r\n                    ) : galleries.length === 0 ? (\r\n                        <div className=\"empty-state\">\r\n                            <p>You're not a member of any studios yet</p>\r\n                            <span>Join or create a studio to add {contentType}s</span>\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"galleries-list\">\r\n                            {galleries.map(gallery => {\r\n                                const validation = validationResults[gallery.id];\r\n                                const isValid = validation?.valid !== false;\r\n\r\n                                return (\r\n                                    <label\r\n                                        key={gallery.id}\r\n                                        className={`gallery-item ${!isValid ? 'invalid' : ''} ${selectedGallery === gallery.id ? 'selected' : ''}`}\r\n                                    >\r\n                                        <input\r\n                                            type=\"radio\"\r\n                                            name=\"gallery\"\r\n                                            value={gallery.id}\r\n                                            checked={selectedGallery === gallery.id}\r\n                                            onChange={() => setSelectedGallery(gallery.id)}\r\n                                            disabled={!isValid}\r\n                                        />\r\n                                        <div className=\"gallery-item-content\">\r\n                                            <div className=\"gallery-item-header\">\r\n                                                <strong>{gallery.title}</strong>\r\n                                                {isValid ? (\r\n                                                    <FaCheck className=\"valid-icon\" />\r\n                                                ) : (\r\n                                                    <FaExclamationTriangle className=\"invalid-icon\" />\r\n                                                )}\r\n                                            </div>\r\n                                            {gallery.description && (\r\n                                                <p className=\"gallery-description\">{gallery.description}</p>\r\n                                            )}\r\n                                            {!isValid && (\r\n                                                <span className=\"validation-error\">\r\n                                                    {validation.reason}\r\n                                                </span>\r\n                                            )}\r\n                                            <div className=\"gallery-meta\">\r\n                                                <span>{gallery.postsCount || 0} posts</span>\r\n                                                <span>ΓÇó</span>\r\n                                                <span>{gallery.membersCount || 0} members</span>\r\n                                            </div>\r\n                                        </div>\r\n                                    </label>\r\n                                );\r\n                            })}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                <div className=\"modal-footer\">\r\n                    <button onClick={onClose} className=\"cancel-btn\">\r\n                        Cancel\r\n                    </button>\r\n                    <button\r\n                        onClick={handleAddToGallery}\r\n                        disabled={!selectedGallery || adding}\r\n                        className=\"add-btn\"\r\n                    >\r\n                        {adding ? 'Adding...' : 'Add to Studio'}\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AddToGalleryModal;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\galleries\\InviteMembersModal.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadFollowings'. Either include it or remove the dependency array.","line":19,"column":8,"nodeType":"ArrayExpression","endLine":19,"endColumn":21,"suggestions":[{"desc":"Update the dependencies array to be: [currentUser, loadFollowings]","fix":{"range":[865,878],"text":"[currentUser, loadFollowings]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { inviteMembers } from '@/core/services/firestore/studios.service';\r\nimport { collection, query, where, getDocs } from 'firebase/firestore';\r\nimport { db } from '@/firebase';\r\nimport { FaTimes, FaSearch, FaUserPlus } from 'react-icons/fa';\r\nimport './InviteMembersModal.css';\r\n\r\nconst InviteMembersModal = ({ galleryId, onClose, existingMembers = [], pendingInvites = [] }) => {\r\n    const { currentUser } = useAuth();\r\n    const [followings, setFollowings] = useState([]);\r\n    const [selectedUsers, setSelectedUsers] = useState([]);\r\n    const [searchQuery, setSearchQuery] = useState('');\r\n    const [loading, setLoading] = useState(true);\r\n    const [sending, setSending] = useState(false);\r\n\r\n    useEffect(() => {\r\n        loadFollowings();\r\n    }, [currentUser]);\r\n\r\n    const loadFollowings = async () => {\r\n        try {\r\n            setLoading(true);\r\n            // Get users that current user follows\r\n            const followsQuery = query(\r\n                collection(db, 'follows'),\r\n                where('followerId', '==', currentUser.uid)\r\n            );\r\n            const followsSnapshot = await getDocs(followsQuery);\r\n\r\n            // Get user details for each following\r\n            const followingIds = followsSnapshot.docs.map(doc => doc.data().followingId);\r\n\r\n            if (followingIds.length === 0) {\r\n                setFollowings([]);\r\n                setLoading(false);\r\n                return;\r\n            }\r\n\r\n            // Fetch user details in batches of 10\r\n            const batchSize = 10;\r\n            const userPromises = [];\r\n\r\n            for (let i = 0; i < followingIds.length; i += batchSize) {\r\n                const batch = followingIds.slice(i, i + batchSize);\r\n                const usersQuery = query(\r\n                    collection(db, 'users'),\r\n                    where('__name__', 'in', batch)\r\n                );\r\n                userPromises.push(getDocs(usersQuery));\r\n            }\r\n\r\n            const userSnapshots = await Promise.all(userPromises);\r\n            const users = [];\r\n\r\n            userSnapshots.forEach(snapshot => {\r\n                snapshot.docs.forEach(doc => {\r\n                    const userData = { id: doc.id, ...doc.data() };\r\n                    // Filter out users already in gallery or with pending invites\r\n                    if (!existingMembers.includes(doc.id) && !pendingInvites.includes(doc.id)) {\r\n                        users.push(userData);\r\n                    }\r\n                });\r\n            });\r\n\r\n            setFollowings(users);\r\n        } catch (error) {\r\n            console.error('Error loading followings:', error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleToggleUser = (userId) => {\r\n        setSelectedUsers(prev =>\r\n            prev.includes(userId)\r\n                ? prev.filter(id => id !== userId)\r\n                : [...prev, userId]\r\n        );\r\n    };\r\n\r\n    const handleSelectAll = () => {\r\n        const filtered = getFilteredFollowings();\r\n        if (selectedUsers.length === filtered.length) {\r\n            setSelectedUsers([]);\r\n        } else {\r\n            setSelectedUsers(filtered.map(u => u.id));\r\n        }\r\n    };\r\n\r\n    const handleSendInvites = async () => {\r\n        if (selectedUsers.length === 0) return;\r\n\r\n        try {\r\n            setSending(true);\r\n            await inviteMembers(galleryId, selectedUsers, currentUser.uid);\r\n            onClose(true); // Pass true to indicate invites were sent\r\n        } catch (error) {\r\n            console.error('Error sending invites:', error);\r\n            alert('Failed to send invites. Please try again.');\r\n        } finally {\r\n            setSending(false);\r\n        }\r\n    };\r\n\r\n    const getFilteredFollowings = () => {\r\n        if (!searchQuery.trim()) return followings;\r\n\r\n        const query = searchQuery.toLowerCase();\r\n        return followings.filter(user =>\r\n            user.username?.toLowerCase().includes(query) ||\r\n            user.displayName?.toLowerCase().includes(query)\r\n        );\r\n    };\r\n\r\n    const filteredFollowings = getFilteredFollowings();\r\n\r\n    return (\r\n        <div className=\"invite-modal-overlay\" onClick={onClose}>\r\n            <div className=\"invite-modal\" onClick={(e) => e.stopPropagation()}>\r\n                <div className=\"invite-modal-header\">\r\n                    <h2><FaUserPlus /> Invite Members</h2>\r\n                    <button onClick={onClose} className=\"close-btn\">\r\n                        <FaTimes />\r\n                    </button>\r\n                </div>\r\n\r\n                <div className=\"invite-modal-body\">\r\n                    {/* Search Bar */}\r\n                    <div className=\"search-bar\">\r\n                        <FaSearch />\r\n                        <input\r\n                            type=\"text\"\r\n                            placeholder=\"Search your followings...\"\r\n                            value={searchQuery}\r\n                            onChange={(e) => setSearchQuery(e.target.value)}\r\n                        />\r\n                    </div>\r\n\r\n                    {/* Select All */}\r\n                    {filteredFollowings.length > 0 && (\r\n                        <div className=\"select-all\">\r\n                            <label>\r\n                                <input\r\n                                    type=\"checkbox\"\r\n                                    checked={selectedUsers.length === filteredFollowings.length && filteredFollowings.length > 0}\r\n                                    onChange={handleSelectAll}\r\n                                />\r\n                                <span>Select All ({filteredFollowings.length})</span>\r\n                            </label>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* User List */}\r\n                    <div className=\"users-list\">\r\n                        {loading ? (\r\n                            <div className=\"loading-state\">\r\n                                <div className=\"spinner\"></div>\r\n                                <p>Loading your followings...</p>\r\n                            </div>\r\n                        ) : filteredFollowings.length === 0 ? (\r\n                            <div className=\"empty-state\">\r\n                                {followings.length === 0 ? (\r\n                                    <>\r\n                                        <p>You're not following anyone yet</p>\r\n                                        <span>Follow users to invite them to galleries</span>\r\n                                    </>\r\n                                ) : (\r\n                                    <>\r\n                                        <p>No users found</p>\r\n                                        <span>Try a different search term</span>\r\n                                    </>\r\n                                )}\r\n                            </div>\r\n                        ) : (\r\n                            filteredFollowings.map(user => (\r\n                                <label key={user.id} className=\"user-item\">\r\n                                    <input\r\n                                        type=\"checkbox\"\r\n                                        checked={selectedUsers.includes(user.id)}\r\n                                        onChange={() => handleToggleUser(user.id)}\r\n                                    />\r\n                                    <img\r\n                                        src={user.photoURL || '/default-avatar.png'}\r\n                                        alt={user.username}\r\n                                        className=\"user-avatar\"\r\n                                    />\r\n                                    <div className=\"user-info\">\r\n                                        <strong>{user.displayName || user.username}</strong>\r\n                                        <span>@{user.username}</span>\r\n                                    </div>\r\n                                </label>\r\n                            ))\r\n                        )}\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"invite-modal-footer\">\r\n                    <button onClick={onClose} className=\"cancel-btn\">\r\n                        Cancel\r\n                    </button>\r\n                    <button\r\n                        onClick={handleSendInvites}\r\n                        disabled={selectedUsers.length === 0 || sending}\r\n                        className=\"send-btn\"\r\n                    >\r\n                        {sending ? 'Sending...' : `Send Invites (${selectedUsers.length})`}\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default InviteMembersModal;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\monetization\\AddFundsModal.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaGem' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":51,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":56},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'checkUserStatus'. Either include it or remove the dependency array.","line":37,"column":8,"nodeType":"ArrayExpression","endLine":37,"endColumn":21,"suggestions":[{"desc":"Update the dependencies array to be: [checkUserStatus, currentUser]","fix":{"range":[1494,1507],"text":"[checkUserStatus, currentUser]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useMemo } from 'react';\r\nimport { FaTimes, FaWallet, FaCreditCard, FaLock, FaGem, FaRocket } from 'react-icons/fa';\r\nimport { WalletService } from '@/services/WalletService';\r\nimport { subscribeToUltra, getUserTier, USER_TIERS } from '@/core/services/firestore/monetization.service';\r\nimport { useAuth } from '@/context/AuthContext';\r\n\r\nconst PRESET_AMOUNTS = [10, 25, 50, 100];\r\n\r\nconst AddFundsModal = ({ onClose, onSuccess, currentBalance }) => {\r\n    const { currentUser } = useAuth();\r\n    const [selectedAmount, setSelectedAmount] = useState(25);\r\n    const [customAmount, setCustomAmount] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n    const [subscribing, setSubscribing] = useState(false);\r\n    const [error, setError] = useState('');\r\n    const [isSpaceCreator, setIsSpaceCreator] = useState(false);\r\n\r\n    // Generate stars once and memoize them\r\n    const stars = useMemo(() => {\r\n        return [...Array(80)].map((_, i) => ({\r\n            id: i,\r\n            width: Math.random() * 2 + 1,\r\n            height: Math.random() * 2 + 1,\r\n            top: Math.random() * 100,\r\n            left: Math.random() * 100,\r\n            opacity: Math.random() * 0.5 + 0.3,\r\n            duration: Math.random() * 3 + 2,\r\n            delay: Math.random() * 2,\r\n            glow: Math.random() * 3 + 2\r\n        }));\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (currentUser) {\r\n            checkUserStatus();\r\n        }\r\n    }, [currentUser]);\r\n\r\n    const checkUserStatus = async () => {\r\n        const tier = await getUserTier(currentUser.uid);\r\n        setIsSpaceCreator(tier === USER_TIERS.ULTRA || tier === USER_TIERS.PARTNER);\r\n    };\r\n\r\n    const handleSubscribe = async () => {\r\n        if (currentBalance < 5) {\r\n            setError(\"Insufficient wallet balance. Please add funds first.\");\r\n            return;\r\n        }\r\n\r\n        setSubscribing(true);\r\n        setError('');\r\n\r\n        try {\r\n            await subscribeToUltra(currentUser.uid);\r\n            setIsSpaceCreator(true);\r\n            onSuccess?.(0); // Refresh balance (0 added, but balance changed)\r\n        } catch (err) {\r\n            console.error(\"Subscription failed:\", err);\r\n            setError(err.message || \"Failed to subscribe.\");\r\n        } finally {\r\n            setSubscribing(false);\r\n        }\r\n    };\r\n\r\n    const handleAmountSelect = (amount) => {\r\n        setSelectedAmount(amount);\r\n        setCustomAmount('');\r\n    };\r\n\r\n    const handleCustomChange = (e) => {\r\n        const val = e.target.value;\r\n        if (val === '' || /^\\d*\\.?\\d{0,2}$/.test(val)) {\r\n            setCustomAmount(val);\r\n            setSelectedAmount(null);\r\n        }\r\n    };\r\n\r\n    const getFinalAmount = () => {\r\n        if (customAmount) return parseFloat(customAmount);\r\n        return selectedAmount;\r\n    };\r\n\r\n    const handlePayment = async () => {\r\n        const amount = getFinalAmount();\r\n\r\n        if (!amount || amount < 5) {\r\n            setError('Minimum deposit is $5.00');\r\n            return;\r\n        }\r\n\r\n        setLoading(true);\r\n        setError('');\r\n\r\n        try {\r\n            // SIMULATED PAYMENT DELAY\r\n            await new Promise(resolve => setTimeout(resolve, 1500));\r\n\r\n            // Add funds to wallet\r\n            await WalletService.addFunds(\r\n                currentUser.uid,\r\n                amount,\r\n                'deposit',\r\n                'Added funds to wallet'\r\n            );\r\n\r\n            onSuccess?.(amount);\r\n            onClose();\r\n        } catch (err) {\r\n            console.error(\"Payment failed:\", err);\r\n            setError(\"Payment failed. Please try again.\");\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div style={{\r\n            position: 'fixed',\r\n            top: 0,\r\n            left: 0,\r\n            right: 0,\r\n            bottom: 0,\r\n            background: 'rgba(0,0,0,0.8)',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            zIndex: 2000,\r\n            padding: '1rem',\r\n            backdropFilter: 'blur(5px)',\r\n            overflow: 'hidden'\r\n        }}>\r\n            {/* Animated Stars Background */}\r\n            <div style={{\r\n                position: 'absolute',\r\n                top: 0,\r\n                left: 0,\r\n                right: 0,\r\n                bottom: 0,\r\n                pointerEvents: 'none',\r\n                zIndex: 0\r\n            }}>\r\n                {stars.map((star) => (\r\n                    <div\r\n                        key={star.id}\r\n                        style={{\r\n                            position: 'absolute',\r\n                            width: star.width + 'px',\r\n                            height: star.height + 'px',\r\n                            background: '#7FFFD4',\r\n                            borderRadius: '50%',\r\n                            top: star.top + '%',\r\n                            left: star.left + '%',\r\n                            opacity: star.opacity,\r\n                            animation: `twinkle ${star.duration}s ease-in-out infinite`,\r\n                            animationDelay: `${star.delay}s`,\r\n                            boxShadow: `0 0 ${star.glow}px #7FFFD4`\r\n                        }}\r\n                    />\r\n                ))}\r\n            </div>\r\n\r\n            <div style={{\r\n                background: '#000',\r\n                borderRadius: '16px',\r\n                maxWidth: '450px',\r\n                width: '100%',\r\n                border: '2px solid #7FFFD4',\r\n                boxShadow: '0 20px 50px rgba(0,0,0,0.5), 0 0 30px rgba(127, 255, 212, 0.2)',\r\n                overflow: 'hidden',\r\n                position: 'relative',\r\n                zIndex: 1\r\n            }}>\r\n                {/* Header */}\r\n                <div style={{\r\n                    padding: '1.5rem',\r\n                    borderBottom: '1px solid #333',\r\n                    display: 'flex',\r\n                    justifyContent: 'space-between',\r\n                    alignItems: 'center',\r\n                    background: '#222'\r\n                }}>\r\n                    <h2 style={{ color: '#fff', margin: 0, display: 'flex', alignItems: 'center', gap: '0.8rem', fontSize: '1.2rem' }}>\r\n                        <FaWallet color=\"#7FFFD4\" /> Add Funds\r\n                    </h2>\r\n                    <button\r\n                        onClick={onClose}\r\n                        style={{\r\n                            background: 'none',\r\n                            border: 'none',\r\n                            color: '#888',\r\n                            cursor: 'pointer',\r\n                            fontSize: '1.2rem',\r\n                            padding: '0.5rem',\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            justifyContent: 'center',\r\n                            transition: 'color 0.2s'\r\n                        }}\r\n                        onMouseEnter={(e) => e.currentTarget.style.color = '#fff'}\r\n                        onMouseLeave={(e) => e.currentTarget.style.color = '#888'}\r\n                    >\r\n                        <FaTimes />\r\n                    </button>\r\n                </div>\r\n\r\n                <div style={{ padding: '1.5rem', position: 'relative' }}>\r\n                    {/* Stars behind content */}\r\n                    <div style={{\r\n                        position: 'absolute',\r\n                        top: 0,\r\n                        left: 0,\r\n                        right: 0,\r\n                        bottom: 0,\r\n                        pointerEvents: 'none',\r\n                        opacity: 0.3,\r\n                        overflow: 'hidden'\r\n                    }}>\r\n                        {stars.slice(0, 30).map((star) => (\r\n                            <div\r\n                                key={`content-${star.id}`}\r\n                                style={{\r\n                                    position: 'absolute',\r\n                                    width: star.width + 'px',\r\n                                    height: star.height + 'px',\r\n                                    background: '#7FFFD4',\r\n                                    borderRadius: '50%',\r\n                                    top: star.top + '%',\r\n                                    left: star.left + '%',\r\n                                    opacity: star.opacity * 0.5,\r\n                                    animation: `twinkle ${star.duration}s ease-in-out infinite`,\r\n                                    animationDelay: `${star.delay}s`,\r\n                                    boxShadow: `0 0 ${star.glow}px #7FFFD4`\r\n                                }}\r\n                            />\r\n                        ))}\r\n                    </div>\r\n\r\n                    {/* Current Balance */}\r\n                    <div style={{\r\n                        textAlign: 'center',\r\n                        marginBottom: '2rem'\r\n                    }}>\r\n                        <div style={{ color: '#888', fontSize: '0.9rem', marginBottom: '0.5rem' }}>Current Balance</div>\r\n                        <div style={{ fontSize: '2.5rem', fontWeight: 'bold', color: '#fff' }}>\r\n                            ${currentBalance?.toFixed(2) || '0.00'}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Amount Selection */}\r\n                    <div style={{ marginBottom: '2rem' }}>\r\n                        <label style={{ display: 'block', color: '#ccc', marginBottom: '1rem', fontWeight: 'bold' }}>Select Amount</label>\r\n                        <div style={{ display: 'grid', gridTemplateColumns: 'repeat(4, 1fr)', gap: '0.8rem', marginBottom: '1rem' }}>\r\n                            {PRESET_AMOUNTS.map(amount => (\r\n                                <button\r\n                                    key={amount}\r\n                                    onClick={() => handleAmountSelect(amount)}\r\n                                    style={{\r\n                                        padding: '0.8rem',\r\n                                        background: selectedAmount === amount ? '#7FFFD4' : '#333',\r\n                                        color: selectedAmount === amount ? '#000' : '#fff',\r\n                                        border: 'none',\r\n                                        borderRadius: '8px',\r\n                                        fontWeight: 'bold',\r\n                                        cursor: 'pointer',\r\n                                        transition: 'all 0.2s'\r\n                                    }}\r\n                                >\r\n                                    ${amount}\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n\r\n                        {/* Custom Amount */}\r\n                        <div style={{ position: 'relative' }}>\r\n                            <span style={{ position: 'absolute', left: '1rem', top: '50%', transform: 'translateY(-50%)', color: '#888' }}>$</span>\r\n                            <input\r\n                                type=\"text\"\r\n                                placeholder=\"Custom Amount\"\r\n                                value={customAmount}\r\n                                onChange={handleCustomChange}\r\n                                style={{\r\n                                    width: '100%',\r\n                                    padding: '1rem 1rem 1rem 2.5rem',\r\n                                    background: '#111',\r\n                                    border: customAmount ? '1px solid #7FFFD4' : '1px solid #444',\r\n                                    borderRadius: '8px',\r\n                                    color: '#fff',\r\n                                    fontSize: '1rem',\r\n                                    outline: 'none'\r\n                                }}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Payment Method Stub */}\r\n                    <div style={{ marginBottom: '2rem', padding: '1rem', background: '#252525', borderRadius: '8px', border: '1px solid #333' }}>\r\n                        <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', marginBottom: '0.5rem' }}>\r\n                            <span style={{ color: '#ccc', fontWeight: 'bold', display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                                <FaCreditCard /> Payment Method\r\n                            </span>\r\n                            <span style={{ color: '#888', fontSize: '0.8rem' }}>Mock Payment</span>\r\n                        </div>\r\n                        <div style={{ color: '#666', fontSize: '0.9rem' }}>\r\n                            ΓÇóΓÇóΓÇóΓÇó ΓÇóΓÇóΓÇóΓÇó ΓÇóΓÇóΓÇóΓÇó 4242 (Visa)\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Space Creator Subscription Section */}\r\n                    <div style={{\r\n                        marginBottom: '2rem',\r\n                        position: 'relative'\r\n                    }}>\r\n                        {/* Iridescent animated border outline */}\r\n                        <div style={{\r\n                            position: 'absolute',\r\n                            inset: '-2px',\r\n                            borderRadius: '16px',\r\n                            padding: '2px',\r\n                            background: 'linear-gradient(135deg, #e0b3ff, #b3e5fc, #c5f5e8, #ffd6f0, #e0b3ff)',\r\n                            backgroundSize: '300% 300%',\r\n                            animation: 'iridescent-border 6s ease infinite',\r\n                            WebkitMask: 'linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0)',\r\n                            WebkitMaskComposite: 'xor',\r\n                            maskComposite: 'exclude',\r\n                            pointerEvents: 'none'\r\n                        }} />\r\n\r\n                        {/* Glass content box */}\r\n                        <div style={{\r\n                            padding: '1.5rem',\r\n                            background: 'rgba(255, 255, 255, 0.02)',\r\n                            backdropFilter: 'blur(40px) saturate(180%) brightness(1.15) contrast(1.1)',\r\n                            WebkitBackdropFilter: 'blur(40px) saturate(180%) brightness(1.15) contrast(1.1)',\r\n                            borderRadius: '16px',\r\n                            position: 'relative',\r\n                            overflow: 'hidden',\r\n                            boxShadow: `\r\n                                inset 0 1px 1px rgba(255, 255, 255, 0.3),\r\n                                inset 0 -1px 1px rgba(255, 255, 255, 0.1),\r\n                                0 8px 32px rgba(127, 255, 212, 0.1)\r\n                            `\r\n                        }}>\r\n                            {/* Distortion overlay - creates refraction effect */}\r\n                            <div style={{\r\n                                position: 'absolute',\r\n                                top: 0,\r\n                                left: 0,\r\n                                right: 0,\r\n                                bottom: 0,\r\n                                background: `\r\n                                    radial-gradient(circle at 20% 30%, rgba(255, 255, 255, 0.15) 0%, transparent 50%),\r\n                                    radial-gradient(circle at 80% 70%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),\r\n                                    linear-gradient(135deg, rgba(255, 255, 255, 0.05) 0%, transparent 100%)\r\n                                `,\r\n                                pointerEvents: 'none',\r\n                                mixBlendMode: 'overlay'\r\n                            }} />\r\n\r\n                            {/* Subtle noise texture for realism */}\r\n                            <div style={{\r\n                                position: 'absolute',\r\n                                top: 0,\r\n                                left: 0,\r\n                                right: 0,\r\n                                bottom: 0,\r\n                                backgroundImage: `url(\"data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E\")`,\r\n                                opacity: 0.03,\r\n                                pointerEvents: 'none',\r\n                                mixBlendMode: 'overlay'\r\n                            }} />\r\n\r\n\r\n                            <div style={{\r\n                                position: 'absolute',\r\n                                top: '-20px',\r\n                                right: '-20px',\r\n                                width: '60px',\r\n                                height: '60px',\r\n                                background: 'linear-gradient(45deg, #FFD700, #FFA500)',\r\n                                filter: 'blur(30px)',\r\n                                opacity: 0.2\r\n                            }} />\r\n\r\n                            {/* Glass reflection effect */}\r\n                            <div style={{\r\n                                position: 'absolute',\r\n                                top: 0,\r\n                                left: 0,\r\n                                right: 0,\r\n                                height: '50%',\r\n                                background: 'linear-gradient(180deg, rgba(255, 255, 255, 0.1) 0%, transparent 100%)',\r\n                                pointerEvents: 'none',\r\n                                borderRadius: '12px 12px 0 0'\r\n                            }} />\r\n\r\n\r\n                            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '1rem' }}>\r\n                                <h3 style={{ margin: 0, color: '#7FFFD4', display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                                    <FaRocket style={{\r\n                                        background: 'linear-gradient(135deg, #e0b3ff, #b3e5fc, #c5f5e8, #ffd6f0, #e0b3ff)',\r\n                                        backgroundSize: '300% 300%',\r\n                                        WebkitBackgroundClip: 'text',\r\n                                        WebkitTextFillColor: 'transparent',\r\n                                        animation: 'iridescent-shimmer 6s ease infinite',\r\n                                        filter: 'brightness(1.2)'\r\n                                    }} /> Space Creator\r\n                                </h3>\r\n                                {isSpaceCreator ? (\r\n                                    <span style={{\r\n                                        background: 'rgba(255, 215, 0, 0.2)',\r\n                                        color: '#FFD700',\r\n                                        padding: '0.3rem 0.8rem',\r\n                                        borderRadius: '20px',\r\n                                        fontSize: '0.8rem',\r\n                                        fontWeight: 'bold',\r\n                                        border: '1px solid rgba(255, 215, 0, 0.4)'\r\n                                    }}>\r\n                                        ACTIVE\r\n                                    </span>\r\n                                ) : (\r\n                                    <span style={{ color: '#fff', fontWeight: 'bold' }}>$5.00/mo</span>\r\n                                )}\r\n                            </div>\r\n\r\n                            <p style={{ color: '#ccc', fontSize: '0.9rem', marginBottom: '1.5rem', lineHeight: '1.5' }}>\r\n                                {isSpaceCreator\r\n                                    ? \"You have full access to all Space Creator features.\"\r\n                                    : \"Unlock exclusive features, contests, and monetization tools.\"}\r\n                            </p>\r\n\r\n                            {!isSpaceCreator && (\r\n                                <button\r\n                                    onClick={handleSubscribe}\r\n                                    disabled={subscribing || loading}\r\n                                    style={{\r\n                                        width: '100%',\r\n                                        padding: '0.8rem',\r\n                                        background: 'linear-gradient(135deg, #e0b3ff, #b3e5fc, #c5f5e8, #ffd6f0, #e0b3ff)',\r\n                                        backgroundSize: '300% 300%',\r\n                                        color: '#000',\r\n                                        border: 'none',\r\n                                        borderRadius: '8px',\r\n                                        fontWeight: 'bold',\r\n                                        cursor: (subscribing || loading) ? 'not-allowed' : 'pointer',\r\n                                        opacity: (subscribing || loading) ? 0.7 : 1,\r\n                                        transition: 'transform 0.2s',\r\n                                        animation: 'iridescent-button 6s ease infinite',\r\n                                        boxShadow: '0 4px 20px rgba(224, 179, 255, 0.3)'\r\n                                    }}\r\n                                >\r\n                                    {subscribing ? 'Activating...' : 'Upgrade to Space Creator'}\r\n                                </button>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n\r\n\r\n                    {error && (\r\n                        <div style={{\r\n                            background: 'rgba(255, 107, 107, 0.1)',\r\n                            border: '1px solid rgba(255, 107, 107, 0.3)',\r\n                            color: '#ff6b6b',\r\n                            padding: '0.8rem',\r\n                            borderRadius: '8px',\r\n                            marginBottom: '1rem',\r\n                            fontSize: '0.9rem',\r\n                            textAlign: 'center'\r\n                        }}>\r\n                            {error}\r\n                        </div>\r\n                    )}\r\n\r\n                    <button\r\n                        onClick={handlePayment}\r\n                        disabled={loading || subscribing}\r\n                        style={{\r\n                            width: '100%',\r\n                            padding: '1rem',\r\n                            background: (loading || subscribing) ? '#555' : '#7FFFD4',\r\n                            color: (loading || subscribing) ? '#ccc' : '#000',\r\n                            border: 'none',\r\n                            borderRadius: '8px',\r\n                            fontSize: '1.1rem',\r\n                            fontWeight: 'bold',\r\n                            cursor: (loading || subscribing) ? 'not-allowed' : 'pointer',\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            justifyContent: 'center',\r\n                            gap: '0.8rem',\r\n                            transition: 'all 0.2s'\r\n                        }}\r\n                    >\r\n                        {loading ? (\r\n                            'Processing...'\r\n                        ) : (\r\n                            <>\r\n                                <FaLock size={14} /> Pay ${getFinalAmount()?.toFixed(2) || '0.00'}\r\n                            </>\r\n                        )}\r\n                    </button>\r\n\r\n                    <p style={{ textAlign: 'center', color: '#666', fontSize: '0.8rem', marginTop: '1rem' }}>\r\n                        Secure, encrypted transaction. Funds are available immediately.\r\n                    </p>\r\n                </div>\r\n            </div>\r\n\r\n\r\n            {/* Iridescent Animations */}\r\n            <style>{`\r\n                @keyframes iridescent-border {\r\n                    0% { background-position: 0% 50%; }\r\n                    25% { background-position: 50% 100%; }\r\n                    50% { background-position: 100% 50%; }\r\n                    75% { background-position: 50% 0%; }\r\n                    100% { background-position: 0% 50%; }\r\n                }\r\n                \r\n                @keyframes iridescent-shimmer {\r\n                    0% { background-position: 0% 50%; }\r\n                    25% { background-position: 50% 100%; }\r\n                    50% { background-position: 100% 50%; }\r\n                    75% { background-position: 50% 0%; }\r\n                    100% { background-position: 0% 50%; }\r\n                }\r\n                \r\n                @keyframes iridescent-button {\r\n                    0% { background-position: 0% 50%; }\r\n                    50% { background-position: 100% 50%; }\r\n                    100% { background-position: 0% 50%; }\r\n                }\r\n                \r\n                @keyframes twinkle {\r\n                    0%, 100% { opacity: 0.3; transform: scale(1); }\r\n                    50% { opacity: 1; transform: scale(1.2); }\r\n                }\r\n            `}</style>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AddFundsModal;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\monetization\\BoostModal.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadWallet'. Either include it or remove the dependency array.","line":18,"column":8,"nodeType":"ArrayExpression","endLine":18,"endColumn":21,"suggestions":[{"desc":"Update the dependencies array to be: [currentUser, loadWallet]","fix":{"range":[735,748],"text":"[currentUser, loadWallet]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { FaTimes, FaRocket, FaWallet } from 'react-icons/fa';\r\nimport { purchaseBoost, BOOST_LEVELS } from '@/core/services/firestore/monetization.service';\r\nimport { WalletService } from '@/services/WalletService';\r\nimport { useAuth } from '@/context/AuthContext';\r\n\r\nconst BoostModal = ({ postId, onClose, onSuccess }) => {\r\n    const { currentUser } = useAuth();\r\n    const [selectedLevel, setSelectedLevel] = useState(1);\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState('');\r\n    const [walletBalance, setWalletBalance] = useState(0);\r\n\r\n    useEffect(() => {\r\n        if (currentUser) {\r\n            loadWallet();\r\n        }\r\n    }, [currentUser]);\r\n\r\n    const loadWallet = async () => {\r\n        try {\r\n            const wallet = await WalletService.getWallet(currentUser.uid);\r\n            setWalletBalance(wallet?.balance || 0);\r\n        } catch (err) {\r\n            console.error('Error loading wallet:', err);\r\n        }\r\n    };\r\n\r\n    const handlePurchase = async () => {\r\n        const boostConfig = BOOST_LEVELS[selectedLevel];\r\n        const price = boostConfig.priceCents / 100;\r\n\r\n        if (walletBalance < price) {\r\n            setError('Insufficient funds. Please add money to your wallet.');\r\n            return;\r\n        }\r\n\r\n        setLoading(true);\r\n        setError('');\r\n\r\n        try {\r\n            await purchaseBoost(currentUser.uid, postId, selectedLevel);\r\n            onSuccess?.();\r\n            onClose();\r\n        } catch (err) {\r\n            setError(err.message || 'Failed to purchase boost');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div style={{\r\n            position: 'fixed',\r\n            top: 0,\r\n            left: 0,\r\n            right: 0,\r\n            bottom: 0,\r\n            background: 'rgba(0,0,0,0.8)',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            zIndex: 1000,\r\n            padding: '1rem'\r\n        }}>\r\n            <div style={{\r\n                background: '#1a1a1a',\r\n                borderRadius: '12px',\r\n                maxWidth: '500px',\r\n                width: '100%',\r\n                position: 'relative'\r\n            }}>\r\n                <div style={{\r\n                    padding: '1.5rem',\r\n                    borderBottom: '1px solid #333',\r\n                    display: 'flex',\r\n                    justifyContent: 'space-between',\r\n                    alignItems: 'center'\r\n                }}>\r\n                    <h2 style={{ color: '#fff', margin: 0, display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                        <FaRocket /> Boost Your Post\r\n                    </h2>\r\n                    <button\r\n                        onClick={onClose}\r\n                        style={{\r\n                            background: 'none',\r\n                            border: 'none',\r\n                            color: '#fff',\r\n                            cursor: 'pointer',\r\n                            fontSize: '1.5rem'\r\n                        }}\r\n                    >\r\n                        <FaTimes />\r\n                    </button>\r\n                </div>\r\n\r\n                <div style={{ padding: '1.5rem' }}>\r\n                    {/* Wallet Balance */}\r\n                    <div style={{\r\n                        background: 'rgba(127, 255, 212, 0.1)',\r\n                        border: '1px solid rgba(127, 255, 212, 0.3)',\r\n                        borderRadius: '8px',\r\n                        padding: '0.75rem 1rem',\r\n                        marginBottom: '1.5rem',\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        gap: '0.5rem'\r\n                    }}>\r\n                        <FaWallet color=\"#7FFFD4\" />\r\n                        <span style={{ color: '#ccc' }}>Wallet Balance:</span>\r\n                        <span style={{ color: '#7FFFD4', fontWeight: 'bold' }}>${walletBalance.toFixed(2)}</span>\r\n                    </div>\r\n\r\n                    <p style={{ color: '#ccc', marginBottom: '1.5rem' }}>\r\n                        Increase your post's visibility in the Explore feed. Boosts are temporary and ethicalΓÇöthey won't dominate the feed.\r\n                    </p>\r\n\r\n                    <div style={{ display: 'flex', flexDirection: 'column', gap: '1rem', marginBottom: '1.5rem' }}>\r\n                        {Object.entries(BOOST_LEVELS).map(([level, config]) => (\r\n                            <div\r\n                                key={level}\r\n                                onClick={() => setSelectedLevel(Number(level))}\r\n                                style={{\r\n                                    padding: '1.5rem',\r\n                                    background: selectedLevel === Number(level) ? '#2a2a2a' : '#1a1a1a',\r\n                                    border: selectedLevel === Number(level) ? '2px solid #fff' : '1px solid #555',\r\n                                    borderRadius: '12px',\r\n                                    cursor: 'pointer',\r\n                                    transition: 'all 0.2s'\r\n                                }}\r\n                            >\r\n                                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '0.5rem' }}>\r\n                                    <h3 style={{ color: '#fff', margin: 0 }}>{config.label}</h3>\r\n                                    <div style={{ fontSize: '1.2rem', fontWeight: 'bold', color: '#fff' }}>\r\n                                        ${(config.priceCents / 100).toFixed(2)}\r\n                                    </div>\r\n                                </div>\r\n                                <div style={{ color: '#888', fontSize: '0.9rem' }}>\r\n                                    {config.multiplier}x multiplier ΓÇó {config.durationHours} hours\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n\r\n                    {error && (\r\n                        <div style={{\r\n                            background: '#ff000020',\r\n                            border: '1px solid #ff0000',\r\n                            borderRadius: '8px',\r\n                            padding: '0.8rem',\r\n                            color: '#ff6b6b',\r\n                            marginBottom: '1rem'\r\n                        }}>\r\n                            {error}\r\n                        </div>\r\n                    )}\r\n\r\n                    <button\r\n                        onClick={handlePurchase}\r\n                        disabled={loading}\r\n                        style={{\r\n                            width: '100%',\r\n                            padding: '1rem',\r\n                            background: loading ? '#555' : '#fff',\r\n                            color: '#000',\r\n                            border: 'none',\r\n                            borderRadius: '8px',\r\n                            fontSize: '1rem',\r\n                            fontWeight: 'bold',\r\n                            cursor: loading ? 'not-allowed' : 'pointer',\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            justifyContent: 'center',\r\n                            gap: '0.5rem'\r\n                        }}\r\n                    >\r\n                        {loading ? 'Processing...' : (\r\n                            <>\r\n                                <FaRocket /> Purchase Boost - ${(BOOST_LEVELS[selectedLevel].priceCents / 100).toFixed(2)}\r\n                            </>\r\n                        )}\r\n                    </button>\r\n\r\n                    <p style={{ color: '#666', fontSize: '0.8rem', textAlign: 'center', marginTop: '1rem' }}>\r\n                        Boosts are non-refundable and expire after the duration.\r\n                    </p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default BoostModal;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\monetization\\CommissionList.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadCommissions'. Either include it or remove the dependency array.","line":11,"column":8,"nodeType":"ArrayExpression","endLine":11,"endColumn":22,"suggestions":[{"desc":"Update the dependencies array to be: [userId, role, loadCommissions]","fix":{"range":[428,442],"text":"[userId, role, loadCommissions]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { FaCheck, FaTimes, FaDownload } from 'react-icons/fa';\r\nimport { getCommissions } from '@/core/services/firestore/monetization.service';\r\n\r\nconst CommissionList = ({ userId, role = 'editor' }) => {\r\n    const [commissions, setCommissions] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        loadCommissions();\r\n    }, [userId, role]);\r\n\r\n    const loadCommissions = async () => {\r\n        setLoading(true);\r\n        try {\r\n            const data = await getCommissions(userId, role);\r\n            setCommissions(data);\r\n        } catch (error) {\r\n            console.error('Error loading commissions:', error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const getStatusColor = (status) => {\r\n        const colors = {\r\n            pending: '#FFA500',\r\n            accepted: '#3498DB',\r\n            completed: '#2ECC71',\r\n            rejected: '#E74C3C'\r\n        };\r\n        return colors[status] || '#888';\r\n    };\r\n\r\n    const getStatusLabel = (status) => {\r\n        return status.charAt(0).toUpperCase() + status.slice(1);\r\n    };\r\n\r\n    if (loading) {\r\n        return (\r\n            <div style={{ padding: '2rem', textAlign: 'center', color: '#888' }}>\r\n                Loading commissions...\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (commissions.length === 0) {\r\n        return (\r\n            <div style={{ padding: '2rem', textAlign: 'center', color: '#888' }}>\r\n                No commissions yet.\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div style={{ padding: '1rem' }}>\r\n            <h2 style={{ color: '#fff', marginBottom: '1.5rem' }}>\r\n                {role === 'editor' ? 'Commission Requests' : 'My Commissions'}\r\n            </h2>\r\n\r\n            <div style={{ display: 'flex', flexDirection: 'column', gap: '1rem' }}>\r\n                {commissions.map((commission) => (\r\n                    <div\r\n                        key={commission.id}\r\n                        style={{\r\n                            background: '#1a1a1a',\r\n                            border: '1px solid #333',\r\n                            borderRadius: '12px',\r\n                            padding: '1.5rem'\r\n                        }}\r\n                    >\r\n                        <div style={{\r\n                            display: 'flex',\r\n                            justifyContent: 'space-between',\r\n                            alignItems: 'flex-start',\r\n                            marginBottom: '1rem'\r\n                        }}>\r\n                            <div>\r\n                                <div style={{\r\n                                    display: 'inline-block',\r\n                                    padding: '4px 12px',\r\n                                    background: getStatusColor(commission.status) + '20',\r\n                                    color: getStatusColor(commission.status),\r\n                                    borderRadius: '12px',\r\n                                    fontSize: '0.85rem',\r\n                                    fontWeight: 'bold',\r\n                                    marginBottom: '0.5rem'\r\n                                }}>\r\n                                    {getStatusLabel(commission.status)}\r\n                                </div>\r\n                                <p style={{ color: '#888', fontSize: '0.9rem', margin: 0 }}>\r\n                                    {new Date(commission.createdAt?.toDate?.() || commission.createdAt).toLocaleDateString()}\r\n                                </p>\r\n                            </div>\r\n                            <div style={{ fontSize: '1.2rem', fontWeight: 'bold', color: '#fff' }}>\r\n                                ${commission.price}\r\n                            </div>\r\n                        </div>\r\n\r\n                        {commission.instructions && (\r\n                            <div style={{ marginBottom: '1rem' }}>\r\n                                <p style={{ color: '#ccc', fontSize: '0.9rem', margin: 0 }}>\r\n                                    <strong>Instructions:</strong> {commission.instructions}\r\n                                </p>\r\n                            </div>\r\n                        )}\r\n\r\n                        <div style={{ display: 'flex', gap: '0.5rem', flexWrap: 'wrap' }}>\r\n                            {commission.rawFileUrl && (\r\n                                <a\r\n                                    href={commission.rawFileUrl}\r\n                                    download\r\n                                    style={{\r\n                                        display: 'inline-flex',\r\n                                        alignItems: 'center',\r\n                                        gap: '0.5rem',\r\n                                        padding: '0.6rem 1rem',\r\n                                        background: '#2a2a2a',\r\n                                        color: '#fff',\r\n                                        borderRadius: '8px',\r\n                                        textDecoration: 'none',\r\n                                        fontSize: '0.9rem',\r\n                                        border: '1px solid #555'\r\n                                    }}\r\n                                >\r\n                                    <FaDownload /> Download RAW\r\n                                </a>\r\n                            )}\r\n\r\n                            {commission.editedFileUrl && (\r\n                                <a\r\n                                    href={commission.editedFileUrl}\r\n                                    download\r\n                                    style={{\r\n                                        display: 'inline-flex',\r\n                                        alignItems: 'center',\r\n                                        gap: '0.5rem',\r\n                                        padding: '0.6rem 1rem',\r\n                                        background: '#2ECC71',\r\n                                        color: '#fff',\r\n                                        borderRadius: '8px',\r\n                                        textDecoration: 'none',\r\n                                        fontSize: '0.9rem',\r\n                                        fontWeight: 'bold'\r\n                                    }}\r\n                                >\r\n                                    <FaDownload /> Download Edited\r\n                                </a>\r\n                            )}\r\n\r\n                            {role === 'editor' && commission.status === 'pending' && (\r\n                                <>\r\n                                    <button\r\n                                        style={{\r\n                                            display: 'inline-flex',\r\n                                            alignItems: 'center',\r\n                                            gap: '0.5rem',\r\n                                            padding: '0.6rem 1rem',\r\n                                            background: '#2ECC71',\r\n                                            color: '#fff',\r\n                                            borderRadius: '8px',\r\n                                            border: 'none',\r\n                                            fontSize: '0.9rem',\r\n                                            fontWeight: 'bold',\r\n                                            cursor: 'pointer'\r\n                                        }}\r\n                                    >\r\n                                        <FaCheck /> Accept\r\n                                    </button>\r\n                                    <button\r\n                                        style={{\r\n                                            display: 'inline-flex',\r\n                                            alignItems: 'center',\r\n                                            gap: '0.5rem',\r\n                                            padding: '0.6rem 1rem',\r\n                                            background: '#E74C3C',\r\n                                            color: '#fff',\r\n                                            borderRadius: '8px',\r\n                                            border: 'none',\r\n                                            fontSize: '0.9rem',\r\n                                            fontWeight: 'bold',\r\n                                            cursor: 'pointer'\r\n                                        }}\r\n                                    >\r\n                                        <FaTimes /> Decline\r\n                                    </button>\r\n                                </>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CommissionList;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\monetization\\CommissionModal.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadWallet'. Either include it or remove the dependency array.","line":21,"column":8,"nodeType":"ArrayExpression","endLine":21,"endColumn":21,"suggestions":[{"desc":"Update the dependencies array to be: [currentUser, loadWallet]","fix":{"range":[897,910],"text":"[currentUser, loadWallet]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { FaTimes, FaFileUpload, FaWallet } from 'react-icons/fa';\r\nimport { createCommission } from '@/core/services/firestore/monetization.service';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { WalletService } from '@/services/WalletService';\r\n\r\nconst CommissionModal = ({ editorId, editorName, onClose, onSuccess }) => {\r\n    const { currentUser } = useAuth();\r\n    const [rawFile, setRawFile] = useState(null);\r\n    const [rawFileUrl, setRawFileUrl] = useState('');\r\n    const [price, setPrice] = useState(50);\r\n    const [instructions, setInstructions] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState('');\r\n    const [walletBalance, setWalletBalance] = useState(0);\r\n\r\n    useEffect(() => {\r\n        if (currentUser) {\r\n            loadWallet();\r\n        }\r\n    }, [currentUser]);\r\n\r\n    const loadWallet = async () => {\r\n        const balance = await WalletService.getWalletBalance(currentUser.uid);\r\n        setWalletBalance(balance);\r\n    };\r\n\r\n    const handleFileChange = (e) => {\r\n        const file = e.target.files[0];\r\n        if (file) {\r\n            setRawFile(file);\r\n            // In production, upload to Firebase Storage and get URL\r\n            // For MVP, we'll use a mock URL if no storage logic is ready, \r\n            // but ideally we should upload. \r\n            // Let's assume for now we just store the name as a placeholder if we don't have storage logic handy.\r\n            setRawFileUrl(`https://mock-storage.com/${file.name}`);\r\n        }\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n\r\n        if (!currentUser) {\r\n            setError('You must be logged in');\r\n            return;\r\n        }\r\n\r\n        if (!rawFileUrl) {\r\n            setError('Please upload a RAW file');\r\n            return;\r\n        }\r\n\r\n        if (walletBalance < price) {\r\n            setError(`Insufficient funds. You have $${walletBalance.toFixed(2)}`);\r\n            return;\r\n        }\r\n\r\n        setLoading(true);\r\n        setError('');\r\n\r\n        try {\r\n            await createCommission(editorId, currentUser.uid, rawFileUrl, price, instructions);\r\n            onSuccess?.();\r\n            onClose();\r\n        } catch (err) {\r\n            setError(err.message || 'Failed to create commission');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div style={{\r\n            position: 'fixed',\r\n            top: 0,\r\n            left: 0,\r\n            right: 0,\r\n            bottom: 0,\r\n            background: 'rgba(0,0,0,0.8)',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            zIndex: 1000,\r\n            padding: '1rem'\r\n        }}>\r\n            <div style={{\r\n                background: '#1a1a1a',\r\n                borderRadius: '12px',\r\n                maxWidth: '500px',\r\n                width: '100%',\r\n                maxHeight: '90vh',\r\n                overflow: 'auto',\r\n                position: 'relative',\r\n                border: '1px solid #333'\r\n            }}>\r\n                <div style={{\r\n                    padding: '1.5rem',\r\n                    borderBottom: '1px solid #333',\r\n                    display: 'flex',\r\n                    justifyContent: 'space-between',\r\n                    alignItems: 'center'\r\n                }}>\r\n                    <h2 style={{ color: '#fff', margin: 0 }}>Request Commission</h2>\r\n                    <button\r\n                        onClick={onClose}\r\n                        style={{\r\n                            background: 'none',\r\n                            border: 'none',\r\n                            color: '#fff',\r\n                            cursor: 'pointer',\r\n                            fontSize: '1.5rem'\r\n                        }}\r\n                    >\r\n                        <FaTimes />\r\n                    </button>\r\n                </div>\r\n\r\n                <form onSubmit={handleSubmit} style={{ padding: '1.5rem' }}>\r\n                    <div style={{ marginBottom: '1.5rem', padding: '1rem', background: '#222', borderRadius: '8px', display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                        <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', color: '#ccc' }}>\r\n                            <FaWallet color=\"#7FFFD4\" />\r\n                            <span>Your Balance:</span>\r\n                        </div>\r\n                        <span style={{ color: '#fff', fontWeight: 'bold', fontSize: '1.1rem' }}>\r\n                            ${walletBalance.toFixed(2)}\r\n                        </span>\r\n                    </div>\r\n\r\n                    <div style={{ marginBottom: '1rem' }}>\r\n                        <label style={{ color: '#ccc', display: 'block', marginBottom: '0.5rem' }}>\r\n                            Editor: <strong style={{ color: '#fff' }}>{editorName}</strong>\r\n                        </label>\r\n                    </div>\r\n\r\n                    <div style={{ marginBottom: '1rem' }}>\r\n                        <label style={{ color: '#ccc', display: 'block', marginBottom: '0.5rem' }}>\r\n                            Upload RAW File *\r\n                        </label>\r\n                        <div style={{\r\n                            border: '2px dashed #555',\r\n                            borderRadius: '8px',\r\n                            padding: '2rem',\r\n                            textAlign: 'center',\r\n                            cursor: 'pointer',\r\n                            background: rawFile ? '#2a2a2a' : 'transparent'\r\n                        }}>\r\n                            <input\r\n                                type=\"file\"\r\n                                accept=\".raw,.dng,.cr2,.nef,.arw,.jpg,.png\"\r\n                                onChange={handleFileChange}\r\n                                style={{ display: 'none' }}\r\n                                id=\"raw-file-input\"\r\n                            />\r\n                            <label htmlFor=\"raw-file-input\" style={{ cursor: 'pointer', width: '100%', display: 'block' }}>\r\n                                <FaFileUpload size={32} color=\"#888\" />\r\n                                <p style={{ color: '#888', marginTop: '0.5rem' }}>\r\n                                    {rawFile ? rawFile.name : 'Click to upload RAW file'}\r\n                                </p>\r\n                            </label>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div style={{ marginBottom: '1rem' }}>\r\n                        <label style={{ color: '#ccc', display: 'block', marginBottom: '0.5rem' }}>\r\n                            Your Offer (USD) *\r\n                        </label>\r\n                        <input\r\n                            type=\"number\"\r\n                            min=\"10\"\r\n                            max=\"1000\"\r\n                            value={price}\r\n                            onChange={(e) => setPrice(Number(e.target.value))}\r\n                            style={{\r\n                                width: '100%',\r\n                                padding: '0.8rem',\r\n                                background: '#2a2a2a',\r\n                                border: '1px solid #555',\r\n                                borderRadius: '8px',\r\n                                color: '#fff',\r\n                                fontSize: '1rem'\r\n                            }}\r\n                        />\r\n                    </div>\r\n\r\n                    <div style={{ marginBottom: '1.5rem' }}>\r\n                        <label style={{ color: '#ccc', display: 'block', marginBottom: '0.5rem' }}>\r\n                            Editing Instructions\r\n                        </label>\r\n                        <textarea\r\n                            value={instructions}\r\n                            onChange={(e) => setInstructions(e.target.value)}\r\n                            placeholder=\"Describe the editing style you want...\"\r\n                            rows={4}\r\n                            style={{\r\n                                width: '100%',\r\n                                padding: '0.8rem',\r\n                                background: '#2a2a2a',\r\n                                border: '1px solid #555',\r\n                                borderRadius: '8px',\r\n                                color: '#fff',\r\n                                fontSize: '1rem',\r\n                                resize: 'vertical'\r\n                            }}\r\n                        />\r\n                    </div>\r\n\r\n                    {error && (\r\n                        <div style={{\r\n                            background: '#ff000020',\r\n                            border: '1px solid #ff0000',\r\n                            borderRadius: '8px',\r\n                            padding: '0.8rem',\r\n                            color: '#ff6b6b',\r\n                            marginBottom: '1rem'\r\n                        }}>\r\n                            {error}\r\n                        </div>\r\n                    )}\r\n\r\n                    <button\r\n                        type=\"submit\"\r\n                        disabled={loading}\r\n                        style={{\r\n                            width: '100%',\r\n                            padding: '1rem',\r\n                            background: loading ? '#555' : '#fff',\r\n                            color: '#000',\r\n                            border: 'none',\r\n                            borderRadius: '8px',\r\n                            fontSize: '1rem',\r\n                            fontWeight: 'bold',\r\n                            cursor: loading ? 'not-allowed' : 'pointer'\r\n                        }}\r\n                    >\r\n                        {loading ? 'Processing...' : `Pay $${price} & Request`}\r\n                    </button>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CommissionModal;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\monetization\\MuseumCreator.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaImage' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":26}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { FaTimes, FaImage } from 'react-icons/fa';\r\nimport { createMuseum } from '@/core/services/firestore/monetization.service';\r\nimport { useAuth } from '@/context/AuthContext';\r\n\r\nconst MuseumCreator = ({ onClose, onSuccess }) => {\r\n    const { currentUser } = useAuth();\r\n    const [name, setName] = useState('');\r\n    const [type, setType] = useState('city');\r\n    const [description, setDescription] = useState('');\r\n    const [bannerImage, setBannerImage] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState('');\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n\r\n        if (!name.trim()) {\r\n            setError('Museum name is required');\r\n            return;\r\n        }\r\n\r\n        setLoading(true);\r\n        setError('');\r\n\r\n        try {\r\n            const museumData = {\r\n                name: name.trim(),\r\n                type,\r\n                description: description.trim(),\r\n                bannerImage: bannerImage.trim(),\r\n                galleries: []\r\n            };\r\n\r\n            const newMuseum = await createMuseum(currentUser.uid, museumData);\r\n            onSuccess?.(newMuseum);\r\n            onClose();\r\n        } catch (err) {\r\n            setError(err.message || 'Failed to create museum');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div style={{\r\n            position: 'fixed',\r\n            top: 0,\r\n            left: 0,\r\n            right: 0,\r\n            bottom: 0,\r\n            background: 'rgba(0,0,0,0.8)',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            zIndex: 1000,\r\n            padding: '1rem'\r\n        }}>\r\n            <div style={{\r\n                background: '#1a1a1a',\r\n                borderRadius: '12px',\r\n                maxWidth: '600px',\r\n                width: '100%',\r\n                maxHeight: '90vh',\r\n                overflow: 'auto',\r\n                position: 'relative'\r\n            }}>\r\n                <div style={{\r\n                    padding: '1.5rem',\r\n                    borderBottom: '1px solid #333',\r\n                    display: 'flex',\r\n                    justifyContent: 'space-between',\r\n                    alignItems: 'center'\r\n                }}>\r\n                    <h2 style={{ color: '#fff', margin: 0 }}>Create Digital Museum</h2>\r\n                    <button\r\n                        onClick={onClose}\r\n                        style={{\r\n                            background: 'none',\r\n                            border: 'none',\r\n                            color: '#fff',\r\n                            cursor: 'pointer',\r\n                            fontSize: '1.5rem'\r\n                        }}\r\n                    >\r\n                        <FaTimes />\r\n                    </button>\r\n                </div>\r\n\r\n                <form onSubmit={handleSubmit} style={{ padding: '1.5rem' }}>\r\n                    <div style={{ marginBottom: '1rem' }}>\r\n                        <label style={{ color: '#ccc', display: 'block', marginBottom: '0.5rem' }}>\r\n                            Museum Name *\r\n                        </label>\r\n                        <input\r\n                            type=\"text\"\r\n                            value={name}\r\n                            onChange={(e) => setName(e.target.value)}\r\n                            placeholder=\"e.g., Downtown Art Museum\"\r\n                            style={{\r\n                                width: '100%',\r\n                                padding: '0.8rem',\r\n                                background: '#2a2a2a',\r\n                                border: '1px solid #555',\r\n                                borderRadius: '8px',\r\n                                color: '#fff',\r\n                                fontSize: '1rem'\r\n                            }}\r\n                        />\r\n                    </div>\r\n\r\n                    <div style={{ marginBottom: '1rem' }}>\r\n                        <label style={{ color: '#ccc', display: 'block', marginBottom: '0.5rem' }}>\r\n                            Museum Type *\r\n                        </label>\r\n                        <select\r\n                            value={type}\r\n                            onChange={(e) => setType(e.target.value)}\r\n                            style={{\r\n                                width: '100%',\r\n                                padding: '0.8rem',\r\n                                background: '#2a2a2a',\r\n                                border: '1px solid #555',\r\n                                borderRadius: '8px',\r\n                                color: '#fff',\r\n                                fontSize: '1rem',\r\n                                cursor: 'pointer'\r\n                            }}\r\n                        >\r\n                            <option value=\"city\">City Museum</option>\r\n                            <option value=\"campus\">Campus Museum</option>\r\n                            <option value=\"park\">Park Museum</option>\r\n                        </select>\r\n                    </div>\r\n\r\n                    <div style={{ marginBottom: '1rem' }}>\r\n                        <label style={{ color: '#ccc', display: 'block', marginBottom: '0.5rem' }}>\r\n                            Description\r\n                        </label>\r\n                        <textarea\r\n                            value={description}\r\n                            onChange={(e) => setDescription(e.target.value)}\r\n                            placeholder=\"Describe your museum...\"\r\n                            rows={4}\r\n                            style={{\r\n                                width: '100%',\r\n                                padding: '0.8rem',\r\n                                background: '#2a2a2a',\r\n                                border: '1px solid #555',\r\n                                borderRadius: '8px',\r\n                                color: '#fff',\r\n                                fontSize: '1rem',\r\n                                resize: 'vertical'\r\n                            }}\r\n                        />\r\n                    </div>\r\n\r\n                    <div style={{ marginBottom: '1.5rem' }}>\r\n                        <label style={{ color: '#ccc', display: 'block', marginBottom: '0.5rem' }}>\r\n                            Banner Image URL\r\n                        </label>\r\n                        <input\r\n                            type=\"url\"\r\n                            value={bannerImage}\r\n                            onChange={(e) => setBannerImage(e.target.value)}\r\n                            placeholder=\"https://example.com/banner.jpg\"\r\n                            style={{\r\n                                width: '100%',\r\n                                padding: '0.8rem',\r\n                                background: '#2a2a2a',\r\n                                border: '1px solid #555',\r\n                                borderRadius: '8px',\r\n                                color: '#fff',\r\n                                fontSize: '1rem'\r\n                            }}\r\n                        />\r\n                        {bannerImage && (\r\n                            <div style={{\r\n                                marginTop: '0.5rem',\r\n                                height: '150px',\r\n                                background: `url(${bannerImage}) center/cover`,\r\n                                borderRadius: '8px',\r\n                                border: '1px solid #555'\r\n                            }} />\r\n                        )}\r\n                    </div>\r\n\r\n                    {error && (\r\n                        <div style={{\r\n                            background: '#ff000020',\r\n                            border: '1px solid #ff0000',\r\n                            borderRadius: '8px',\r\n                            padding: '0.8rem',\r\n                            color: '#ff6b6b',\r\n                            marginBottom: '1rem'\r\n                        }}>\r\n                            {error}\r\n                        </div>\r\n                    )}\r\n\r\n                    <button\r\n                        type=\"submit\"\r\n                        disabled={loading}\r\n                        style={{\r\n                            width: '100%',\r\n                            padding: '1rem',\r\n                            background: loading ? '#555' : '#fff',\r\n                            color: '#000',\r\n                            border: 'none',\r\n                            borderRadius: '8px',\r\n                            fontSize: '1rem',\r\n                            fontWeight: 'bold',\r\n                            cursor: loading ? 'not-allowed' : 'pointer'\r\n                        }}\r\n                    >\r\n                        {loading ? 'Creating...' : 'Create Museum'}\r\n                    </button>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default MuseumCreator;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\monetization\\PaywallModal.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'navigate' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":6,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":19}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { FaGem, FaLock, FaTimes } from 'react-icons/fa';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst PaywallModal = ({ onClose, featureName }) => {\r\n    const navigate = useNavigate();\r\n\r\n    return (\r\n        <div style={{\r\n            position: 'fixed',\r\n            top: 0,\r\n            left: 0,\r\n            right: 0,\r\n            bottom: 0,\r\n            background: 'rgba(0,0,0,0.9)',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            zIndex: 3000,\r\n            padding: '1rem',\r\n            backdropFilter: 'blur(10px)'\r\n        }}>\r\n            <div style={{\r\n                background: 'linear-gradient(135deg, #1a1a1a 0%, #000 100%)',\r\n                borderRadius: '16px',\r\n                maxWidth: '450px',\r\n                width: '100%',\r\n                border: '1px solid #FFD700',\r\n                boxShadow: '0 0 50px rgba(255, 215, 0, 0.2)',\r\n                position: 'relative',\r\n                overflow: 'hidden',\r\n                textAlign: 'center',\r\n                padding: '2.5rem'\r\n            }}>\r\n                {/* Background Glow */}\r\n                <div style={{\r\n                    position: 'absolute',\r\n                    top: '-50%',\r\n                    left: '-50%',\r\n                    width: '200%',\r\n                    height: '200%',\r\n                    background: 'radial-gradient(circle at 50% 50%, rgba(255, 215, 0, 0.1) 0%, transparent 50%)',\r\n                    pointerEvents: 'none'\r\n                }} />\r\n\r\n                <button\r\n                    onClick={onClose}\r\n                    style={{\r\n                        position: 'absolute',\r\n                        top: '1rem',\r\n                        right: '1rem',\r\n                        background: 'none',\r\n                        border: 'none',\r\n                        color: '#666',\r\n                        cursor: 'pointer',\r\n                        fontSize: '1.2rem',\r\n                        transition: 'color 0.2s'\r\n                    }}\r\n                    onMouseEnter={(e) => e.currentTarget.style.color = '#fff'}\r\n                    onMouseLeave={(e) => e.currentTarget.style.color = '#666'}\r\n                >\r\n                    <FaTimes />\r\n                </button>\r\n\r\n                <div style={{\r\n                    width: '80px',\r\n                    height: '80px',\r\n                    background: 'linear-gradient(45deg, #FFD700, #FFA500)',\r\n                    borderRadius: '50%',\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'center',\r\n                    margin: '0 auto 1.5rem',\r\n                    boxShadow: '0 0 30px rgba(255, 215, 0, 0.4)'\r\n                }}>\r\n                    <FaLock size={32} color=\"#000\" />\r\n                </div>\r\n\r\n                <h2 style={{\r\n                    color: '#fff',\r\n                    marginBottom: '1rem',\r\n                    fontSize: '1.8rem',\r\n                    background: 'linear-gradient(45deg, #FFD700, #FFF)',\r\n                    WebkitBackgroundClip: 'text',\r\n                    WebkitTextFillColor: 'transparent'\r\n                }}>\r\n                    Space Creator Exclusive\r\n                </h2>\r\n\r\n                <p style={{ color: '#ccc', fontSize: '1.1rem', marginBottom: '2rem', lineHeight: '1.6' }}>\r\n                    The <strong>{featureName}</strong> feature is available only to Space Creator members.\r\n                </p>\r\n\r\n                <div style={{\r\n                    background: 'rgba(255, 215, 0, 0.1)',\r\n                    border: '1px solid rgba(255, 215, 0, 0.3)',\r\n                    borderRadius: '12px',\r\n                    padding: '1rem',\r\n                    marginBottom: '2rem'\r\n                }}>\r\n                    <div style={{ color: '#FFD700', fontWeight: 'bold', fontSize: '1.2rem', marginBottom: '0.5rem' }}>\r\n                        $5.00 / month\r\n                    </div>\r\n                    <div style={{ color: '#888', fontSize: '0.9rem' }}>\r\n                        Cancel anytime. No commitment.\r\n                    </div>\r\n                </div>\r\n\r\n                <button\r\n                    onClick={() => {\r\n                        onClose();\r\n                        // Trigger wallet modal via event or direct navigation if we had a route\r\n                        // For now, we instruct them to open wallet\r\n                        alert(\"Please open your Wallet to upgrade!\");\r\n                    }}\r\n                    style={{\r\n                        width: '100%',\r\n                        padding: '1rem',\r\n                        background: 'linear-gradient(45deg, #FFD700, #FFA500)',\r\n                        color: '#000',\r\n                        border: 'none',\r\n                        borderRadius: '30px',\r\n                        fontSize: '1.1rem',\r\n                        fontWeight: 'bold',\r\n                        cursor: 'pointer',\r\n                        transition: 'transform 0.2s',\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        justifyContent: 'center',\r\n                        gap: '0.8rem'\r\n                    }}\r\n                    onMouseEnter={(e) => e.currentTarget.style.transform = 'scale(1.05)'}\r\n                    onMouseLeave={(e) => e.currentTarget.style.transform = 'scale(1)'}\r\n                >\r\n                    <FaGem /> Upgrade Now\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default PaywallModal;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\monetization\\SponsoredCard.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { FaExternalLinkAlt } from 'react-icons/fa';\r\n\r\nconst SponsoredCard = ({ ad }) => {\r\n    if (!ad) return null;\r\n\r\n    return (\r\n        <div style={{\r\n            width: '100%',\r\n            maxWidth: '600px',\r\n            margin: '0 auto 2rem auto',\r\n            background: '#1a1a1a',\r\n            borderRadius: '12px',\r\n            overflow: 'hidden',\r\n            border: '1px solid #333',\r\n            scrollSnapAlign: 'start'\r\n        }}>\r\n            <div style={{\r\n                padding: '0.5rem 1rem',\r\n                background: '#000',\r\n                color: '#888',\r\n                fontSize: '0.8rem',\r\n                textTransform: 'uppercase',\r\n                letterSpacing: '1px',\r\n                borderBottom: '1px solid #333'\r\n            }}>\r\n                Sponsored\r\n            </div>\r\n\r\n            <img\r\n                src={ad.imageUrl}\r\n                alt={ad.title}\r\n                style={{\r\n                    width: '100%',\r\n                    height: '300px',\r\n                    objectFit: 'cover'\r\n                }}\r\n            />\r\n\r\n            <div style={{ padding: '1.5rem' }}>\r\n                <h3 style={{ color: '#fff', marginBottom: '0.5rem', fontSize: '1.2rem' }}>{ad.title}</h3>\r\n                <p style={{ color: '#ccc', marginBottom: '1.5rem', lineHeight: '1.5' }}>{ad.description}</p>\r\n\r\n                <a\r\n                    href={ad.ctaLink}\r\n                    target=\"_blank\"\r\n                    rel=\"noopener noreferrer\"\r\n                    style={{\r\n                        display: 'inline-flex',\r\n                        alignItems: 'center',\r\n                        gap: '0.5rem',\r\n                        background: '#fff',\r\n                        color: '#000',\r\n                        padding: '0.8rem 1.5rem',\r\n                        borderRadius: '25px',\r\n                        textDecoration: 'none',\r\n                        fontWeight: 'bold',\r\n                        transition: 'transform 0.2s'\r\n                    }}\r\n                >\r\n                    {ad.ctaText} <FaExternalLinkAlt size={12} />\r\n                </a>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default SponsoredCard;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\monetization\\UltraBadge.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { FaGem } from 'react-icons/fa';\r\n\r\nconst UltraBadge = ({ size = 'sm' }) => {\r\n    const styles = {\r\n        sm: { fontSize: '0.8rem', padding: '2px 6px' },\r\n        md: { fontSize: '1rem', padding: '4px 8px' },\r\n        lg: { fontSize: '1.2rem', padding: '6px 12px' }\r\n    };\r\n\r\n    return (\r\n        <span style={{\r\n            display: 'inline-flex',\r\n            alignItems: 'center',\r\n            gap: '4px',\r\n            background: 'linear-gradient(45deg, #FFD700, #FFA500)',\r\n            color: '#000',\r\n            borderRadius: '12px',\r\n            fontWeight: 'bold',\r\n            boxShadow: '0 2px 4px rgba(0,0,0,0.2)',\r\n            ...styles[size]\r\n        }}>\r\n            <FaGem /> Ultra\r\n        </span>\r\n    );\r\n};\r\n\r\nexport default UltraBadge;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\monetization\\UltraPromoCard.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { FaGem, FaRocket, FaCrown, FaCheck } from 'react-icons/fa';\r\n\r\nconst UltraPromoCard = () => {\r\n    const navigate = useNavigate();\r\n\r\n    return (\r\n        <div style={{\r\n            height: '100vh',\r\n            width: '100%',\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            background: 'linear-gradient(135deg, #000 0%, #1a1a1a 100%)',\r\n            color: '#fff',\r\n            position: 'relative',\r\n            padding: '2rem'\r\n        }}>\r\n            {/* Background Effects */}\r\n            <div style={{\r\n                position: 'absolute',\r\n                top: 0,\r\n                left: 0,\r\n                width: '100%',\r\n                height: '100%',\r\n                background: 'radial-gradient(circle at 50% 50%, rgba(255, 215, 0, 0.1) 0%, transparent 70%)',\r\n                pointerEvents: 'none'\r\n            }} />\r\n\r\n            <div style={{\r\n                background: 'rgba(255, 255, 255, 0.05)',\r\n                backdropFilter: 'blur(10px)',\r\n                padding: '3rem',\r\n                borderRadius: '24px',\r\n                border: '1px solid rgba(255, 215, 0, 0.3)',\r\n                maxWidth: '400px',\r\n                width: '100%',\r\n                textAlign: 'center',\r\n                boxShadow: '0 0 30px rgba(255, 215, 0, 0.1)',\r\n                zIndex: 1\r\n            }}>\r\n                <div style={{\r\n                    width: '80px',\r\n                    height: '80px',\r\n                    background: 'linear-gradient(45deg, #FFD700, #FFA500)',\r\n                    borderRadius: '50%',\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'center',\r\n                    margin: '0 auto 1.5rem',\r\n                    boxShadow: '0 0 20px rgba(255, 215, 0, 0.4)'\r\n                }}>\r\n                    <FaCrown size={40} color=\"#000\" />\r\n                </div>\r\n\r\n                <h2 style={{ fontSize: '2.5rem', marginBottom: '0.5rem', background: 'linear-gradient(to right, #FFD700, #FFF)', WebkitBackgroundClip: 'text', WebkitTextFillColor: 'transparent' }}>\r\n                    Go Ultra\r\n                </h2>\r\n                <p style={{ color: '#ccc', marginBottom: '2rem', fontSize: '1.1rem' }}>\r\n                    Unlock the full potential of Panospace.\r\n                </p>\r\n\r\n                <div style={{ textAlign: 'left', marginBottom: '2rem', display: 'flex', flexDirection: 'column', gap: '1rem' }}>\r\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '1rem' }}>\r\n                        <FaCheck color=\"#FFD700\" /> <span>Zero Commission on Sales</span>\r\n                    </div>\r\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '1rem' }}>\r\n                        <FaRocket color=\"#FFD700\" /> <span>5x Reach Boost</span>\r\n                    </div>\r\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '1rem' }}>\r\n                        <FaGem color=\"#FFD700\" /> <span>Exclusive Badge & Profile</span>\r\n                    </div>\r\n                </div>\r\n\r\n                <button\r\n                    onClick={() => navigate('/ultra')}\r\n                    style={{\r\n                        background: 'linear-gradient(45deg, #FFD700, #FFA500)',\r\n                        color: '#000',\r\n                        border: 'none',\r\n                        padding: '1rem 2rem',\r\n                        borderRadius: '30px',\r\n                        fontSize: '1.2rem',\r\n                        fontWeight: 'bold',\r\n                        cursor: 'pointer',\r\n                        width: '100%',\r\n                        transition: 'transform 0.2s',\r\n                        boxShadow: '0 5px 15px rgba(255, 215, 0, 0.3)'\r\n                    }}\r\n                    onMouseEnter={(e) => e.currentTarget.style.transform = 'scale(1.05)'}\r\n                    onMouseLeave={(e) => e.currentTarget.style.transform = 'scale(1)'}\r\n                >\r\n                    Upgrade Now\r\n                </button>\r\n\r\n                <p style={{ marginTop: '1rem', fontSize: '0.9rem', color: '#888' }}>\r\n                    Starting at $9.99/month\r\n                </p>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default UltraPromoCard;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\museums\\CreateExhibitModal.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaImage' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":26}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useRef } from 'react';\r\nimport { FaTimes, FaImage, FaClock, FaCloudUploadAlt } from 'react-icons/fa';\r\nimport { ref, uploadBytes, getDownloadURL } from 'firebase/storage';\r\nimport { collection, addDoc, serverTimestamp, Timestamp } from 'firebase/firestore';\r\nimport { db, storage } from '@/firebase';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport PSButton from '@/components/PSButton';\r\n\r\nconst CreateExhibitModal = ({ isOpen, onClose, museumId }) => {\r\n    const { currentUser } = useAuth();\r\n    const fileInputRef = useRef(null);\r\n\r\n    const [title, setTitle] = useState('');\r\n    const [description, setDescription] = useState('');\r\n    const [image, setImage] = useState(null);\r\n    const [previewUrl, setPreviewUrl] = useState(null);\r\n    const [duration, setDuration] = useState('24h'); // 24h, 48h, 7d, 30d\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState(null);\r\n\r\n    if (!isOpen) return null;\r\n\r\n    const handleImageSelect = (e) => {\r\n        const file = e.target.files[0];\r\n        if (file) {\r\n            if (file.size > 10 * 1024 * 1024) {\r\n                setError('Image size must be less than 10MB');\r\n                return;\r\n            }\r\n            setImage(file);\r\n            setPreviewUrl(URL.createObjectURL(file));\r\n            setError(null);\r\n        }\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        if (!title.trim() || !image) {\r\n            setError('Please provide a title and an image');\r\n            return;\r\n        }\r\n\r\n        setLoading(true);\r\n        setError(null);\r\n\r\n        try {\r\n            // 1. Upload Image\r\n            const fileName = `exhibits/${museumId}/${Date.now()}_${image.name}`;\r\n            const storageRef = ref(storage, fileName);\r\n            await uploadBytes(storageRef, image);\r\n            const imageUrl = await getDownloadURL(storageRef);\r\n\r\n            // 2. Calculate Expiration\r\n            const now = new Date();\r\n            let expiresAt = new Date();\r\n\r\n            switch (duration) {\r\n                case '24h': expiresAt.setHours(now.getHours() + 24); break;\r\n                case '48h': expiresAt.setHours(now.getHours() + 48); break;\r\n                case '7d': expiresAt.setDate(now.getDate() + 7); break;\r\n                case '30d': expiresAt.setDate(now.getDate() + 30); break;\r\n                default: expiresAt.setHours(now.getHours() + 24);\r\n            }\r\n\r\n            // 3. Create Document\r\n            const exhibitData = {\r\n                title: title.trim(),\r\n                description: description.trim(),\r\n                imageUrl,\r\n                storagePath: fileName,\r\n                museumId,\r\n                createdBy: currentUser.uid,\r\n                creatorName: currentUser.displayName || 'Anonymous',\r\n                createdAt: serverTimestamp(),\r\n                expiresAt: Timestamp.fromDate(expiresAt),\r\n                duration\r\n            };\r\n\r\n            await addDoc(collection(db, 'museums', museumId, 'exhibits'), exhibitData);\r\n\r\n            onClose(true); // Success\r\n        } catch (err) {\r\n            console.error('Error creating exhibit:', err);\r\n            setError('Failed to create exhibit: ' + err.message);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div style={{\r\n            position: 'fixed',\r\n            inset: 0,\r\n            zIndex: 1000,\r\n            background: 'rgba(0,0,0,0.8)',\r\n            backdropFilter: 'blur(5px)',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            padding: '1rem'\r\n        }}>\r\n            <div style={{\r\n                background: '#111',\r\n                border: '1px solid #333',\r\n                borderRadius: '16px',\r\n                width: '100%',\r\n                maxWidth: '500px',\r\n                maxHeight: '90vh',\r\n                overflowY: 'auto',\r\n                position: 'relative'\r\n            }}>\r\n                {/* Header */}\r\n                <div style={{\r\n                    padding: '1.5rem',\r\n                    borderBottom: '1px solid #222',\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'space-between'\r\n                }}>\r\n                    <h2 style={{ margin: 0, fontSize: '1.25rem', color: '#fff' }}>New Exhibit</h2>\r\n                    <button\r\n                        onClick={() => onClose(false)}\r\n                        style={{\r\n                            background: 'transparent',\r\n                            border: 'none',\r\n                            color: '#888',\r\n                            cursor: 'pointer',\r\n                            padding: '0.5rem',\r\n                            display: 'flex'\r\n                        }}\r\n                    >\r\n                        <FaTimes size={20} />\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Body */}\r\n                <div style={{ padding: '1.5rem' }}>\r\n                    {error && (\r\n                        <div style={{\r\n                            padding: '1rem',\r\n                            background: 'rgba(255, 68, 68, 0.1)',\r\n                            border: '1px solid #ff4444',\r\n                            borderRadius: '8px',\r\n                            color: '#ff4444',\r\n                            marginBottom: '1.5rem',\r\n                            fontSize: '0.9rem'\r\n                        }}>\r\n                            {error}\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Image Upload */}\r\n                    <div\r\n                        onClick={() => fileInputRef.current?.click()}\r\n                        style={{\r\n                            aspectRatio: '16/9',\r\n                            background: '#222',\r\n                            borderRadius: '12px',\r\n                            border: '2px dashed #444',\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            justifyContent: 'center',\r\n                            cursor: 'pointer',\r\n                            marginBottom: '1.5rem',\r\n                            overflow: 'hidden',\r\n                            position: 'relative'\r\n                        }}\r\n                    >\r\n                        {previewUrl ? (\r\n                            <img\r\n                                src={previewUrl}\r\n                                alt=\"Preview\"\r\n                                style={{ width: '100%', height: '100%', objectFit: 'cover' }}\r\n                            />\r\n                        ) : (\r\n                            <div style={{ textAlign: 'center', color: '#888' }}>\r\n                                <FaCloudUploadAlt size={32} style={{ marginBottom: '0.5rem' }} />\r\n                                <div>Click to upload exhibit image</div>\r\n                            </div>\r\n                        )}\r\n                        <input\r\n                            type=\"file\"\r\n                            ref={fileInputRef}\r\n                            onChange={handleImageSelect}\r\n                            accept=\"image/*\"\r\n                            style={{ display: 'none' }}\r\n                        />\r\n                    </div>\r\n\r\n                    {/* Fields */}\r\n                    <div style={{ display: 'flex', flexDirection: 'column', gap: '1rem' }}>\r\n                        <div>\r\n                            <label style={{ display: 'block', color: '#888', marginBottom: '0.5rem', fontSize: '0.9rem' }}>Title</label>\r\n                            <input\r\n                                type=\"text\"\r\n                                value={title}\r\n                                onChange={e => setTitle(e.target.value)}\r\n                                placeholder=\"Exhibit Title\"\r\n                                style={{\r\n                                    width: '100%',\r\n                                    padding: '0.75rem',\r\n                                    background: '#222',\r\n                                    border: '1px solid #333',\r\n                                    borderRadius: '8px',\r\n                                    color: '#fff',\r\n                                    fontSize: '1rem'\r\n                                }}\r\n                            />\r\n                        </div>\r\n\r\n                        <div>\r\n                            <label style={{ display: 'block', color: '#888', marginBottom: '0.5rem', fontSize: '0.9rem' }}>Description</label>\r\n                            <textarea\r\n                                value={description}\r\n                                onChange={e => setDescription(e.target.value)}\r\n                                placeholder=\"Describe this exhibit...\"\r\n                                rows={3}\r\n                                style={{\r\n                                    width: '100%',\r\n                                    padding: '0.75rem',\r\n                                    background: '#222',\r\n                                    border: '1px solid #333',\r\n                                    borderRadius: '8px',\r\n                                    color: '#fff',\r\n                                    fontSize: '1rem',\r\n                                    resize: 'vertical'\r\n                                }}\r\n                            />\r\n                        </div>\r\n\r\n                        <div>\r\n                            <label style={{ display: 'block', color: '#888', marginBottom: '0.5rem', fontSize: '0.9rem' }}>Duration</label>\r\n                            <div style={{ display: 'flex', gap: '0.5rem' }}>\r\n                                {['24h', '48h', '7d', '30d'].map(d => (\r\n                                    <button\r\n                                        key={d}\r\n                                        type=\"button\"\r\n                                        onClick={() => setDuration(d)}\r\n                                        style={{\r\n                                            flex: 1,\r\n                                            padding: '0.5rem',\r\n                                            background: duration === d ? '#7FFFD4' : '#222',\r\n                                            color: duration === d ? '#000' : '#888',\r\n                                            border: duration === d ? '1px solid #7FFFD4' : '1px solid #333',\r\n                                            borderRadius: '8px',\r\n                                            cursor: 'pointer',\r\n                                            fontWeight: 'bold',\r\n                                            transition: 'all 0.2s'\r\n                                        }}\r\n                                    >\r\n                                        {d}\r\n                                    </button>\r\n                                ))}\r\n                            </div>\r\n                            <div style={{ fontSize: '0.8rem', color: '#666', marginTop: '0.5rem', display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                                <FaClock size={12} />\r\n                                Exhibit will auto-delete after this duration\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Footer */}\r\n                <div style={{\r\n                    padding: '1.5rem',\r\n                    borderTop: '1px solid #222',\r\n                    display: 'flex',\r\n                    justifyContent: 'flex-end',\r\n                    gap: '1rem'\r\n                }}>\r\n                    <PSButton\r\n                        variant=\"ghost\"\r\n                        onClick={() => onClose(false)}\r\n                        disabled={loading}\r\n                    >\r\n                        Cancel\r\n                    </PSButton>\r\n                    <PSButton\r\n                        variant=\"mint\"\r\n                        onClick={handleSubmit}\r\n                        disabled={loading}\r\n                    >\r\n                        {loading ? 'Creating...' : 'Create Exhibit'}\r\n                    </PSButton>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CreateExhibitModal;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\profile\\BannerThemeRenderer.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\n\r\n\r\n\r\nimport CityscapeBanner from './CityscapeBanner';\r\nimport OceanBanner from './OceanBanner';\r\n\r\nconst BannerThemeRenderer = ({ mode, color, starSettings }) => {\r\n    const overlayStyle = {\r\n        position: 'absolute',\r\n        inset: 0,\r\n        pointerEvents: 'none',\r\n        zIndex: 0,\r\n        overflow: 'hidden'\r\n    };\r\n\r\n    // ... (rest is unchanged) ...\r\n\r\n    // 5. CITYSCAPE PACK\r\n    if (mode.startsWith('city') || mode === 'panospace_beyond') {\r\n        return <CityscapeBanner themeId={mode} starSettings={starSettings} />;\r\n    }\r\n\r\n    // 6. OCEAN PACK\r\n    if (mode.startsWith('ocean') && mode !== 'ocean_depths') {\r\n        return <OceanBanner themeId={mode} starSettings={starSettings} />;\r\n    }\r\n\r\n    // ... (rest of file) is managed by subsequent replaces or assumed fine if not touched\r\n    // I need to be careful not to wipe the file if I target lines 8-15.\r\n    // I will use specific targets for signature and call site.\r\n\r\n\r\n\r\n    // 1. CYBERPUNK LINES - Futurstic HUD style\r\n    if (mode === 'cyberpunkLines') {\r\n        const hexToRgb = (hex) => {\r\n            const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n            return result ? `${parseInt(result[1], 16)}, ${parseInt(result[2], 16)}, ${parseInt(result[3], 16)}` : '0, 255, 255';\r\n        };\r\n        const colorRgb = hexToRgb(color);\r\n\r\n        return (\r\n            <div style={overlayStyle}>\r\n                {/* Tech Background Grid (Subtle) */}\r\n                <div style={{\r\n                    position: 'absolute', inset: 0,\r\n                    backgroundImage: `\r\n                        linear-gradient(rgba(${colorRgb}, 0.05) 1px, transparent 1px),\r\n                        linear-gradient(90deg, rgba(${colorRgb}, 0.05) 1px, transparent 1px)\r\n                    `,\r\n                    backgroundSize: '20px 20px',\r\n                    maskImage: 'radial-gradient(ellipse at center, black 40%, transparent 100%)'\r\n                }} />\r\n\r\n                {/* SVG HUD Frame */}\r\n                <svg width=\"100%\" height=\"100%\" style={{ position: 'absolute', inset: 0 }}>\r\n                    <defs>\r\n                        <filter id=\"glow\">\r\n                            <feGaussianBlur stdDeviation=\"2\" result=\"coloredBlur\" />\r\n                            <feMerge>\r\n                                <feMergeNode in=\"coloredBlur\" />\r\n                                <feMergeNode in=\"SourceGraphic\" />\r\n                            </feMerge>\r\n                        </filter>\r\n                    </defs>\r\n\r\n                    {/* Top Left Bracket */}\r\n                    <path d=\"M10,40 V10 H40\" fill=\"none\" stroke={color} strokeWidth=\"2\" filter=\"url(#glow)\" />\r\n                    <circle cx=\"10\" cy=\"10\" r=\"2\" fill={color} filter=\"url(#glow)\" />\r\n\r\n                    {/* Top Right Bracket */}\r\n                    <path d=\"Mcalc(100% - 40),10 Hcalc(100% - 10) V40\" fill=\"none\" stroke={color} strokeWidth=\"2\" filter=\"url(#glow)\" />\r\n                    <circle cx=\"calc(100% - 10)\" cy=\"10\" r=\"2\" fill={color} filter=\"url(#glow)\" />\r\n\r\n                    {/* Bottom Left Bracket */}\r\n                    <path d=\"M10,calc(100% - 40) Vcalc(100% - 10) H40\" fill=\"none\" stroke={color} strokeWidth=\"2\" filter=\"url(#glow)\" />\r\n                    <circle cx=\"10\" cy=\"calc(100% - 10)\" r=\"2\" fill={color} filter=\"url(#glow)\" />\r\n\r\n                    {/* Connecting Data Lines - Thin & Low Opacity */}\r\n                    <path d=\"M60,10 Hcalc(100% - 60)\" stroke={color} strokeWidth=\"1\" strokeOpacity=\"0.3\" strokeDasharray=\"5 5\" />\r\n                    <path d=\"M10,60 Vcalc(100% - 60)\" stroke={color} strokeWidth=\"1\" strokeOpacity=\"0.3\" strokeDasharray=\"5 5\" />\r\n                    <path d=\"Mcalc(100% - 10),60 Vcalc(100% - 60)\" stroke={color} strokeWidth=\"1\" strokeOpacity=\"0.3\" strokeDasharray=\"5 5\" />\r\n\r\n                    {/* Decorative Circuit Nodes */}\r\n                    <circle cx=\"50\" cy=\"20\" r=\"1.5\" fill={color} fillOpacity=\"0.5\" />\r\n                    <circle cx=\"70\" cy=\"20\" r=\"1.5\" fill={color} fillOpacity=\"0.5\" />\r\n                    <line x1=\"50\" y1=\"20\" x2=\"80\" y2=\"20\" stroke={color} strokeWidth=\"1\" strokeOpacity=\"0.3\" />\r\n                </svg>\r\n\r\n                {/* Central Pulse */}\r\n                <div style={{\r\n                    position: 'absolute',\r\n                    top: '50%', left: '50%', transform: 'translate(-50%, -50%)',\r\n                    width: '60%', height: '60%',\r\n                    background: `radial-gradient(circle, rgba(${colorRgb}, 0.1) 0%, transparent 70%)`,\r\n                    animation: 'gentlePulse 4s infinite ease-in-out'\r\n                }} />\r\n                <style>{`@keyframes gentlePulse { 0%, 100% { opacity: 0.5; transform: translate(-50%, -50%) scale(1); } 50% { opacity: 0.8; transform: translate(-50%, -50%) scale(1.05); } }`}</style>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // 2. NEON GRID - Retrowave\r\n    if (mode === 'neonGrid') {\r\n        return (\r\n            <div style={overlayStyle}>\r\n                <div style={{\r\n                    position: 'absolute',\r\n                    bottom: 0,\r\n                    width: '100%',\r\n                    height: '100%',\r\n                    background: `linear-gradient(to top, ${color}20 0%, transparent 60%)`\r\n                }} />\r\n                {/* Grid */}\r\n                <div style={{\r\n                    position: 'absolute',\r\n                    inset: '-50% -50%',\r\n                    width: '200%',\r\n                    height: '200%',\r\n                    backgroundImage: `\r\n                        linear-gradient(${color}40 1px, transparent 1px),\r\n                        linear-gradient(90deg, ${color}40 1px, transparent 1px)\r\n                    `,\r\n                    backgroundSize: '40px 40px',\r\n                    transform: 'perspective(300px) rotateX(60deg) translateY(-100px) translateZ(-100px)',\r\n                    animation: 'gridScroll 20s linear infinite',\r\n                    opacity: 0.5,\r\n                    maskImage: 'linear-gradient(to top, black 20%, transparent 80%)'\r\n                }} />\r\n                <style>{`@keyframes gridScroll { from { background-position: 0 0; } to { background-position: 0 40px; } }`}</style>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // 3. UNDERWATER - Classic Mario Atmospheric Depth\r\n    if (mode === 'underwaterY2K') {\r\n        const hexToRgb = (hex) => {\r\n            const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n            return result ? `${parseInt(result[1], 16)}, ${parseInt(result[2], 16)}, ${parseInt(result[3], 16)}` : '0, 255, 255';\r\n        };\r\n        const colorRgb = hexToRgb(color);\r\n\r\n        return (\r\n            <div style={overlayStyle}>\r\n                {/* 1. Base Gradient: Lighter Top -> Deep Dark Bottom */}\r\n                <div style={{\r\n                    position: 'absolute', inset: 0,\r\n                    // Linear gradient from theme color (mixed with light) to deep black-mix\r\n                    background: `linear-gradient(to bottom, \r\n                        rgba(${colorRgb}, 0.6) 0%, \r\n                        rgba(${colorRgb}, 0.3) 40%, \r\n                        rgba(0,0,0,0.8) 100%)`,\r\n                    backgroundColor: '#000', // Fallback base\r\n                    zIndex: 1\r\n                }} />\r\n\r\n                {/* 2. Surface Water Glow (The top \"waterline\" effect) */}\r\n                <div style={{\r\n                    position: 'absolute', top: 0, left: 0, right: 0, height: '30%',\r\n                    background: `linear-gradient(to bottom, rgba(255,255,255,0.2) 0%, transparent 100%)`,\r\n                    filter: 'blur(10px)',\r\n                    zIndex: 2,\r\n                    mixBlendMode: 'screen'\r\n                }} />\r\n\r\n                {/* 3. Caustic Light Pattern (The \"swimming pool\" reflection look) - STATIC */}\r\n                <div style={{\r\n                    position: 'absolute', inset: 0,\r\n                    opacity: 0.15,\r\n                    backgroundImage: `\r\n                        radial-gradient(circle at 50% 50%, white 0%, transparent 10%),\r\n                        radial-gradient(circle at 20% 40%, white 0%, transparent 10%),\r\n                        radial-gradient(circle at 80% 60%, white 0%, transparent 10%),\r\n                        radial-gradient(circle at 40% 10%, white 0%, transparent 15%),\r\n                        radial-gradient(circle at 70% 80%, white 0%, transparent 12%)\r\n                    `,\r\n                    backgroundSize: '120px 120px', // Repeating pattern size\r\n                    backgroundRepeat: 'repeat',\r\n                    mixBlendMode: 'overlay',\r\n                    filter: 'blur(5px)',\r\n                    zIndex: 2\r\n                }} />\r\n\r\n                {/* 4. Deep Depth Vignette (Darkens the corners and bottom heavily) */}\r\n                <div style={{\r\n                    position: 'absolute', inset: 0,\r\n                    background: 'radial-gradient(circle at 50% 0%, transparent 40%, #000 120%)',\r\n                    zIndex: 3,\r\n                    opacity: 0.7\r\n                }} />\r\n\r\n                {/* 5. Subtle Wavy Distortion Overlay (Simulated via repeating gradient) */}\r\n                <div style={{\r\n                    position: 'absolute', inset: 0,\r\n                    opacity: 0.05,\r\n                    backgroundImage: `repeating-linear-gradient(45deg, transparent, transparent 10px, #fff 10px, #fff 20px)`,\r\n                    filter: 'blur(20px)',\r\n                    mixBlendMode: 'overlay',\r\n                    zIndex: 2\r\n                }} />\r\n\r\n                {/* 6. Soft Light Rays (Diagonal, top-left to center) */}\r\n                <div style={{\r\n                    position: 'absolute', inset: 0,\r\n                    background: `\r\n                        linear-gradient(110deg, transparent 40%, rgba(255,255,255,0.05) 50%, transparent 60%),\r\n                        linear-gradient(100deg, transparent 20%, rgba(255,255,255,0.03) 30%, transparent 40%)\r\n                    `,\r\n                    mixBlendMode: 'screen',\r\n                    zIndex: 3\r\n                }} />\r\n\r\n            </div>\r\n        );\r\n    }\r\n\r\n\r\n\r\n    if (mode === 'simple_gradient') {\r\n        return (\r\n            <div style={{\r\n                ...overlayStyle,\r\n                background: `linear-gradient(to bottom, #000000 0%, #111111 40%, ${color} 100%)`\r\n            }} />\r\n        )\r\n    }\r\n\r\n    if (mode === 'nebula') {\r\n        return (\r\n            <div style={{ ...overlayStyle, background: 'radial-gradient(circle at 50% 120%, #4a148c 0%, transparent 60%), radial-gradient(circle at 80% 20%, #311b92 0%, transparent 50%)', opacity: 0.6 }} />\r\n        );\r\n    }\r\n\r\n    // 4. ORBITAL - Signature PanoSpace Cosmic Aesthetic\r\n    if (mode === 'orbital') {\r\n        const spaceColors = {\r\n            deepVoid: '#050B14', // Darker than dark nebula\r\n            nebulaDark: '#0A1A3A',\r\n            ionBlue: '#1B82FF',\r\n            auroraMint: '#8CFFE9',\r\n            starlight: '#F2F7FA'\r\n        };\r\n\r\n        return (\r\n            <div style={overlayStyle}>\r\n                {/* 1. Deep Space Void Background */}\r\n                <div style={{\r\n                    position: 'absolute', inset: 0,\r\n                    background: `linear-gradient(to bottom, ${spaceColors.nebulaDark} 0%, ${spaceColors.deepVoid} 100%)`,\r\n                    zIndex: 0\r\n                }} />\r\n\r\n                {/* 2. The Planetary Horizon (Massive Atmospheric Glow) */}\r\n                {/* This curves upward from the bottom, framing the content area */}\r\n                <div style={{\r\n                    position: 'absolute',\r\n                    bottom: '-150%', left: '-20%', right: '-20%', height: '200%',\r\n                    background: `radial-gradient(ellipse at 50% 0%, ${spaceColors.auroraMint} 0%, ${spaceColors.ionBlue} 20%, transparent 60%)`,\r\n                    opacity: 0.6,\r\n                    filter: 'blur(60px)',\r\n                    zIndex: 1,\r\n                    mixBlendMode: 'screen'\r\n                }} />\r\n\r\n                {/* 3. Orbital Ring Segment (Geometric Arc) */}\r\n                <div style={{\r\n                    position: 'absolute',\r\n                    bottom: '-80%', left: '-10%', right: '-10%', height: '100%',\r\n                    borderRadius: '50%',\r\n                    borderTop: `1px solid ${spaceColors.starlight}`,\r\n                    boxShadow: `0 -2px 20px ${spaceColors.ionBlue}`,\r\n                    opacity: 0.4,\r\n                    transform: 'scaleY(0.4)', // Flatten to look like a ring\r\n                    zIndex: 2\r\n                }} />\r\n\r\n                {/* 4. Secondary Ring (Fainter, Mint) */}\r\n                <div style={{\r\n                    position: 'absolute',\r\n                    bottom: '-78%', left: '-5%', right: '-5%', height: '100%',\r\n                    borderRadius: '50%',\r\n                    borderTop: `1px solid ${spaceColors.auroraMint}`,\r\n                    opacity: 0.2,\r\n                    transform: 'scaleY(0.4)',\r\n                    zIndex: 2\r\n                }} />\r\n\r\n                {/* 5. Cosmic Dust / Noise Texture */}\r\n                <div style={{\r\n                    position: 'absolute', inset: 0,\r\n                    opacity: 0.15,\r\n                    backgroundImage: `url(\"data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='1'/%3E%3C/svg%3E\")`,\r\n                    mixBlendMode: 'overlay',\r\n                    zIndex: 3\r\n                }} />\r\n\r\n                {/* 6. Distant Star/Lens Flare Highlights */}\r\n                <div style={{\r\n                    position: 'absolute', top: '20%', right: '15%',\r\n                    width: '2px', height: '2px',\r\n                    background: 'white',\r\n                    boxShadow: `0 0 10px 2px white, 0 0 20px 10px ${spaceColors.ionBlue}`,\r\n                    borderRadius: '50%',\r\n                    zIndex: 2,\r\n                    opacity: 0.8\r\n                }} />\r\n                <div style={{\r\n                    position: 'absolute', top: '40%', left: '10%',\r\n                    width: '1px', height: '1px',\r\n                    background: 'white',\r\n                    boxShadow: `0 0 8px 1px ${spaceColors.auroraMint}`,\r\n                    borderRadius: '50%',\r\n                    zIndex: 2,\r\n                    opacity: 0.6\r\n                }} />\r\n\r\n            </div>\r\n        );\r\n    }\r\n\r\n\r\n\r\n    // 4. PANO OCEAN - Signature Deep Sea Palette\r\n    if (mode === 'ocean_depths') {\r\n        const panospaceColors = {\r\n            iceWhite: '#F2F7FA',\r\n            auroraBlue: '#7FDBFF',\r\n            classicMint: '#7FFFD4',\r\n            auroraMint: '#8CFFE9',\r\n            ionBlue: '#1B82FF',\r\n            darkNebula: '#0A1A3A',\r\n            black: '#000000'\r\n        };\r\n\r\n        return (\r\n            <div style={overlayStyle}>\r\n                {/* 1. Base Gradient: Aggressively Top-Heavy for Text Readability */}\r\n                <div style={{\r\n                    position: 'absolute', inset: 0,\r\n                    // Ellipse flattens the light so it doesn't reach down to the username\r\n                    background: `radial-gradient(ellipse at 50% 0%, \r\n                        ${panospaceColors.iceWhite} 0%, \r\n                        ${panospaceColors.auroraBlue} 5%, \r\n                        ${panospaceColors.classicMint} 15%, \r\n                        ${panospaceColors.ionBlue} 25%, \r\n                        ${panospaceColors.darkNebula} 50%, \r\n                        ${panospaceColors.black} 100%)`,\r\n                    zIndex: 1\r\n                }} />\r\n\r\n                {/* 2. Turbulent Water Texture (Restricted to Top Only) */}\r\n                <div style={{\r\n                    position: 'absolute', inset: 0,\r\n                    opacity: 0.3,\r\n                    mixBlendMode: 'overlay',\r\n                    backgroundImage: `\r\n                        radial-gradient(circle at 20% 10%, ${panospaceColors.classicMint} 0%, transparent 30%),\r\n                        radial-gradient(circle at 80% 15%, ${panospaceColors.auroraBlue} 0%, transparent 25%),\r\n                        radial-gradient(circle at 50% 5%, ${panospaceColors.iceWhite} 0%, transparent 20%)\r\n                    `,\r\n                    filter: 'blur(30px)',\r\n                    zIndex: 2,\r\n                    transform: 'scaleY(0.8)'\r\n                }} />\r\n\r\n\r\n\r\n                {/* 4. Deep Depth Vignette (Dark Nebular + Black) */}\r\n                <div style={{\r\n                    position: 'absolute', inset: 0,\r\n                    background: `radial-gradient(circle at 50% 0%, transparent 40%, ${panospaceColors.black} 120%)`,\r\n                    zIndex: 3,\r\n                    opacity: 0.8\r\n                }} />\r\n\r\n                {/* 5. Subtle Wavy Distortion (Mint tinted) */}\r\n                <div style={{\r\n                    position: 'absolute', inset: 0,\r\n                    opacity: 0.1,\r\n                    backgroundImage: `repeating-linear-gradient(45deg, transparent, transparent 10px, ${panospaceColors.auroraMint} 10px, ${panospaceColors.auroraMint} 20px)`,\r\n                    filter: 'blur(20px)',\r\n                    mixBlendMode: 'overlay',\r\n                    zIndex: 2\r\n                }} />\r\n\r\n                {/* 6. Realistic Scattered Light Beams (Green Mint Only, Thin, Spread) */}\r\n                <div style={{\r\n                    position: 'absolute', inset: '-50%', // Oversize to allow rotation without edges\r\n                    background: `repeating-conic-gradient(\r\n                        from 0deg at 50% -20%, \r\n                        transparent 0deg, \r\n                        transparent 10deg, \r\n                        ${panospaceColors.auroraMint} 15deg, \r\n                        transparent 20deg\r\n                    )`,\r\n                    opacity: 0.15, // Dim beams\r\n                    filter: 'blur(8px)', // Soften edges\r\n                    mixBlendMode: 'overlay', // Realistic blending\r\n                    zIndex: 3,\r\n                    transform: 'rotate(-10deg) scale(1.5)' // Angle and spread\r\n                }} />\r\n\r\n                {/* 7. Secondary Faint Rays for texture */}\r\n                <div style={{\r\n                    position: 'absolute', inset: 0,\r\n                    background: `repeating-linear-gradient(\r\n                        100deg, \r\n                        transparent, \r\n                        transparent 40px, \r\n                        ${panospaceColors.auroraMint} 42px, \r\n                        transparent 45px\r\n                    )`,\r\n                    opacity: 0.05,\r\n                    filter: 'blur(2px)',\r\n                    mixBlendMode: 'overlay',\r\n                    zIndex: 2\r\n                }} />\r\n\r\n            </div>\r\n        );\r\n    }\r\n\r\n\r\n\r\n\r\n    return null;\r\n};\r\n\r\nexport default BannerThemeRenderer;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\profile\\CityscapeBanner.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'randomConfig' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":335,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":335,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'centerX' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":943,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":943,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'cx' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":1117,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":1117,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'trafficColors' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":1121,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":1121,"endColumn":28}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React, { useRef, useEffect, useState } from 'react';\r\n\r\n// --- PANOSPACE BRAND PALETTE ---\r\nconst COLORS = {\r\n    iceWhite: '#F2F7FA',\r\n    auroraBlue: '#7FDBFF',\r\n    ionBlue: '#1B82FF',\r\n    nebulaPink: '#FFB7D5',\r\n    solarPink: '#FF5C8A',\r\n    cosmicPeriwinkle: '#A7B6FF',\r\n    deepOrbitPurple: '#5A3FFF',\r\n    stellarOrange: '#FF914D',\r\n    classicMint: '#7FFFD4',\r\n    auroraMint: '#8CFFE9',\r\n    darkNebula: '#0A1A3A',\r\n    voidPurple: '#2A0E61',\r\n    black: '#000000'\r\n};\r\n\r\n// --- DETERMINISTIC STATIC CITY GENERATOR ---\r\n// \"The skyline must always appear identical\"\r\nconst LCG = (seed) => () => {\r\n    seed = (seed * 1664525 + 1013904223) % 4294967296;\r\n    return seed / 4294967296;\r\n};\r\n\r\nconst GENERATE_STATIC_CITY = () => {\r\n    const buildings = [];\r\n    const rand = LCG(123456789); // FIXED SEED FOREVER\r\n\r\n    // Generate 5 Layers of fixed buildings\r\n    for (let layer = 0; layer < 5; layer++) {\r\n        let currentX = -0.1; // Start off-screen\r\n        const endX = 1.1; // End off-screen\r\n\r\n        while (currentX < endX) {\r\n            // Restore Original Proportions (Tall & Thin)\r\n            const nominalWidth = 60 + rand() * 80;\r\n            const wPct = nominalWidth / 3840;\r\n\r\n            const maxH = 1080 * 0.25;\r\n            const nominalHeight = (maxH * 0.2) + (rand() * maxH * 0.8);\r\n            const hPct = nominalHeight / 1080;\r\n\r\n            buildings.push({\r\n                layer,\r\n                xPct: currentX,\r\n                wPct: wPct,\r\n                hPct: hPct,\r\n                seed: rand(),\r\n                type: rand() > 0.8 ? 'spire' : 'block'\r\n            });\r\n\r\n            const gap = (10 + rand() * 30) / 3840;\r\n            currentX += wPct + gap;\r\n        }\r\n    }\r\n    return buildings; // .sort if needed, but layers are separate\r\n};\r\n\r\nconst STATIC_CITY = GENERATE_STATIC_CITY();\r\n\r\n// --- THEME CONFIGURATIONS ---\r\nconst CITY_THEMES = {\r\n    // 1. Galaxy City (Formerly Vaporwave)\r\n    'city_vaporwave': {\r\n        sky: [COLORS.voidPurple, COLORS.deepOrbitPurple],\r\n        buildings: { color: '#1a0b2e', windowColor: [COLORS.auroraBlue, COLORS.solarPink], density: 0.6, glow: true },\r\n        atmosphere: { stars: true, grid: true, clouds: true },\r\n        celestial: { type: 'ring-planet', color: COLORS.iceWhite, x: 0.85, y: 0.2 }\r\n    },\r\n    // 1.5 NEW SPACE CITY (NASA Punk)\r\n    'city_space': {\r\n        sky: [COLORS.black, COLORS.darkNebula, COLORS.ionBlue],\r\n        buildings: {\r\n            color: '#05070a',\r\n            windowColor: [COLORS.iceWhite, COLORS.auroraBlue, COLORS.classicMint, COLORS.solarPink, COLORS.ionBlue, COLORS.stellarOrange],\r\n            density: 0.95,\r\n            glow: true\r\n        },\r\n        atmosphere: {\r\n            stars: true,\r\n            traffic: true,\r\n            ultra_fx: true,\r\n            rocket: true\r\n        },\r\n        celestial: { type: 'ring-planet', color: COLORS.iceWhite, x: 0.5, y: 0.35 }\r\n    },\r\n    // 1.6 LUNAR CITY\r\n    'city_lunar': {\r\n        sky: [COLORS.black, '#050505'], // Pure space\r\n        buildings: {\r\n            color: '#1a202c', // Dark Grey\r\n            windowColor: [COLORS.ionBlue, COLORS.iceWhite],\r\n            density: 0.4,\r\n            glow: true\r\n        },\r\n        atmosphere: { stars: true },\r\n        celestial: { type: 'earth_rise', x: 0.2, y: 0.3 },\r\n        foreground: { type: 'lunar_surface', color: '#050505' }\r\n    },\r\n    'city_realistic': {\r\n        sky: [COLORS.black, '#0d1b2a', '#1b263b'],\r\n        buildings: { color: '#050a10', windowColor: ['#fff8dc', '#f0e68c'], density: 1.0, glow: false },\r\n        atmosphere: { stars: true },\r\n        celestial: { type: 'none' }\r\n    },\r\n    'city_retrowave': {\r\n        sky: [COLORS.voidPurple, COLORS.black],\r\n        buildings: { color: '#000', windowColor: [COLORS.auroraMint, COLORS.solarPink], density: 0.3, glow: true },\r\n        atmosphere: { stars: true, grid: true },\r\n        celestial: { type: 'none' }\r\n    },\r\n    'city_cyberpunk': {\r\n        sky: [COLORS.black, '#0a0a0a'],\r\n        buildings: { color: '#050505', windowColor: [COLORS.ionBlue, COLORS.classicMint, COLORS.solarPink], density: 1.0, glow: true },\r\n        atmosphere: { rain: true, stars: true, fog: COLORS.darkNebula },\r\n        celestial: { type: 'none' }\r\n    },\r\n    'city_color': {\r\n        sky: [COLORS.ionBlue, COLORS.auroraBlue, '#dbeafe'],\r\n        buildings: {\r\n            color: '#1e293b',\r\n            windowColor: [COLORS.iceWhite, COLORS.classicMint, COLORS.solarPink, COLORS.ionBlue, COLORS.stellarOrange, COLORS.nebulaPink],\r\n            density: 0.8,\r\n            glow: true\r\n        },\r\n        mountains: { color: '#0f172a', height: 0.6 },\r\n        atmosphere: { stars: true, clouds: true },\r\n        celestial: { type: 'moon', color: '#fff', x: 0.8, y: 0.2 }\r\n    },\r\n    'city_realistic_day': {\r\n        sky: [COLORS.black, '#0a0a1a', '#1a1a2e'], // Night Sky\r\n        buildings: {\r\n            color: '#050508', // Dark Night Buildings\r\n            windowColor: [COLORS.iceWhite, COLORS.iceWhite, '#ffffff', '#ffffff', '#fffde7', '#fffde7', '#fff176', '#fff176', '#ffd740', '#ffb74d', '#ff9800', '#f57c00'],\r\n            density: 0.8,\r\n            glow: true\r\n        },\r\n        atmosphere: { stars: true, clouds: false },\r\n        celestial: { type: 'distant_jet', color: COLORS.solarPink }\r\n    },\r\n    // Anime Town \"Midnight\" Edition\r\n    'city_midnight': {\r\n        sky: ['#020617', '#172554', '#1e1b4b'], // Deep Midnight Blue\r\n        buildings: { color: '#0f172a', windowColor: ['#fef9c3', '#fde047', '#fbbf24'], density: 0.9, glow: true },\r\n        mountains: { color: '#020617', height: 0.5 },\r\n        atmosphere: { stars: true, clouds: true, traffic: true }, // Living city feel\r\n        celestial: { type: 'moon', color: '#f1f5f9', x: 0.85, y: 0.15 }\r\n    },\r\n    'city_desert': {\r\n        sky: [COLORS.voidPurple, COLORS.stellarOrange],\r\n        buildings: { color: COLORS.black, windowColor: [COLORS.stellarOrange], density: 0.4, glow: true },\r\n        atmosphere: { stars: true },\r\n        foreground: { type: 'dunes', color: COLORS.darkNebula },\r\n        celestial: { type: 'sun', color: [COLORS.stellarOrange, COLORS.solarPink], y: 0.8 }\r\n    },\r\n    'city_glitch': {\r\n        sky: [COLORS.black, COLORS.darkNebula],\r\n        buildings: { color: '#000', windowColor: [COLORS.classicMint, COLORS.solarPink, COLORS.ionBlue, COLORS.iceWhite], density: 1.0, glow: true },\r\n        atmosphere: { glitch: true, stars: true },\r\n        celestial: { type: 'none' }\r\n    },\r\n\r\n\r\n    'city_holo': {\r\n        sky: [COLORS.black, COLORS.black],\r\n        buildings: { type: 'wireframe', color: COLORS.ionBlue, windowColor: [COLORS.ionBlue], density: 0.5, glow: true },\r\n        atmosphere: { grid: true, bloom: true, stars: true },\r\n        celestial: { type: 'none' }\r\n    },\r\n\r\n    // --- CITY-3000 PACK (High-Res Procedural Editions) ---\r\n\r\n    // 13. Neon Street -> Cyber Density\r\n    'city3000_street': {\r\n        sky: [COLORS.black, COLORS.darkNebula, '#1A0B2E'],\r\n        buildings: { color: '#080808', windowColor: [COLORS.ionBlue, COLORS.solarPink, COLORS.classicMint], density: 1.2, glow: true },\r\n        atmosphere: { rain: true, stars: true, traffic: true },\r\n        celestial: { type: 'none' }\r\n    },\r\n    // 15. Flying Car District\r\n    'city3000_cars': {\r\n        sky: [COLORS.black, COLORS.darkNebula],\r\n        buildings: { color: '#050505', windowColor: [COLORS.ionBlue, COLORS.classicMint], density: 1.1, glow: true },\r\n        atmosphere: { stars: true, traffic: true },\r\n        celestial: { type: 'none' }\r\n    },\r\n    // 16. Chinatown -> Red/Gold Cyber\r\n    'city3000_chinatown': {\r\n        sky: [COLORS.black, '#1a0505'], // Reddish dark\r\n        buildings: { color: '#0f0505', windowColor: [COLORS.stellarOrange, COLORS.solarPink, '#ff3333'], density: 1.0, glow: true },\r\n        atmosphere: { stars: true, rain: true, monorail: true },\r\n        celestial: { type: 'none' }\r\n    },\r\n\r\n    // --- THE MAGNUM OPUS: PANOSPACE ULTRA ---\r\n    'city3000_ultra': {\r\n        sky: [COLORS.black, COLORS.voidPurple, COLORS.deepOrbitPurple, COLORS.ionBlue],\r\n        buildings: {\r\n            color: '#020204',\r\n            windowColor: [COLORS.solarPink, COLORS.auroraMint, COLORS.ionBlue, COLORS.iceWhite],\r\n            density: 1.3, // Maximum density\r\n            glow: true\r\n        },\r\n        atmosphere: {\r\n            stars: true,\r\n            ultra_fx: true, // Special mashup key\r\n            traffic: true,\r\n            rain: true,\r\n            fog: COLORS.deepOrbitPurple\r\n        },\r\n        celestial: {\r\n            type: 'prime_planet', // Custom dual-ring giant\r\n            color: COLORS.iceWhite,\r\n            x: 0.5, y: 0.4\r\n        },\r\n        foreground: {\r\n            type: 'prime_mountains' // Fractal mountains BEHIND city logic but handled specially\r\n        }\r\n    },\r\n\r\n    // --- NEO-TOKYO 2099 (MAGNUM OPUS REBORN) ---\r\n    // Akira x Blade Runner x Star Wars x Y2K (Brand Palette Version)\r\n    'city3000_genesis': {\r\n        sky: [COLORS.black, COLORS.deepOrbitPurple, COLORS.solarPink], // Brand Gradient\r\n        buildings: {\r\n            color: '#020101', // Obsidian Monoliths\r\n            windowColor: [COLORS.stellarOrange, COLORS.solarPink, COLORS.ionBlue, COLORS.classicMint],\r\n            density: 0.95,\r\n            glow: true\r\n        },\r\n        atmosphere: {\r\n            stars: true,\r\n            neotokyo_fx: true // The Special Sauce\r\n        },\r\n        celestial: {\r\n            type: 'neo_sun',\r\n            color: COLORS.solarPink\r\n        }\r\n    },\r\n\r\n    // --- NEO-GOTHIC FUTURE (BATMAN BEYOND INSPIRED) ---\r\n    'panospace_beyond': {\r\n        sky: [\r\n            COLORS.black,\r\n            COLORS.voidPurple,\r\n            COLORS.deepOrbitPurple\r\n        ],\r\n        buildings: {\r\n            color: COLORS.black,\r\n            windowColor: [\r\n                COLORS.ionBlue,\r\n                COLORS.solarPink,\r\n                COLORS.auroraMint\r\n            ],\r\n            density: 1.15,\r\n            glow: true\r\n        },\r\n        atmosphere: {\r\n            stars: true,\r\n            fog: COLORS.deepOrbitPurple,\r\n            beyond_fx: true // The Special Sauce: Gothic Minimal Accents\r\n        },\r\n        celestial: {\r\n            type: \"moon\",\r\n            color: COLORS.iceWhite,\r\n            x: 0.75,\r\n            y: 0.22\r\n        }\r\n    },\r\n\r\n    // --- NEON FESTIVAL NIGHT ---\r\n    // Fireworks, Ocean, Mountains, Ferris Wheel\r\n    'city3000_festival': {\r\n        sky: [COLORS.black, COLORS.deepOrbitPurple, '#000'],\r\n        buildings: {\r\n            color: '#050308',\r\n            windowColor: [COLORS.classicMint, COLORS.solarPink, COLORS.ionBlue, COLORS.auroraMint],\r\n            density: 0.7,\r\n            centerGap: 0.4, // Open Bay Gap\r\n            glow: true\r\n        },\r\n        atmosphere: {\r\n            stars: true\r\n        },\r\n        celestial: {\r\n            type: 'moon',\r\n            color: COLORS.iceWhite,\r\n            x: 0.8, y: 0.2\r\n        },\r\n        foreground: {\r\n            type: 'festival_terrain' // Mountains sides, Ocean back\r\n        }\r\n    }\r\n};\r\n\r\n// --- RENDER CACHE (Module Scope) ---\r\nconst CITY_RENDER_CACHE = new Map();\r\n\r\n// --- PURE RENDER FUNCTION ---\r\nfunction renderCityToCanvas(canvas, themeId, starSettings) {\r\n    if (!canvas) return '';\r\n\r\n    // Defensive Fallback for Theme\r\n    let theme = CITY_THEMES[themeId];\r\n    if (!theme) theme = CITY_THEMES['city_realistic'];\r\n\r\n    // Check Cache\r\n    const starKey = starSettings?.enabled !== undefined ? `_s${starSettings.enabled}_c${starSettings.color}` : '';\r\n    const cacheKey = (themeId || 'city_realistic') + starKey;\r\n\r\n    if (CITY_RENDER_CACHE.has(cacheKey)) {\r\n        return CITY_RENDER_CACHE.get(cacheKey);\r\n    }\r\n\r\n    const ctx = canvas.getContext('2d');\r\n    if (!ctx) return '';\r\n\r\n    // SEEDED RANDOM (Determinism)\r\n    let seed = 12345;\r\n    const rand = () => {\r\n        seed = (seed * 9301 + 49297) % 233280;\r\n        return seed / 233280;\r\n    };\r\n\r\n    // HIGH RES KINETIC\r\n    const width = 3840;\r\n    const height = 1080;\r\n    canvas.width = width;\r\n    canvas.height = height;\r\n\r\n    // --- HELPERS ---\r\n    const randomConfig = (arr) => arr[Math.floor(rand() * arr.length)];\r\n    const hexToRgb = (hex) => {\r\n        // Guard: if not a string, return black fallback\r\n        if (typeof hex !== 'string') {\r\n            return { r: 0, g: 0, b: 0 };\r\n        }\r\n        // Handle shorthand hex (#abc)\r\n        if (hex.length === 4) {\r\n            return { r: parseInt(hex[1] + hex[1], 16), g: parseInt(hex[2] + hex[2], 16), b: parseInt(hex[3] + hex[3], 16) };\r\n        }\r\n        // Handle full hex\r\n        return { r: parseInt(hex.substring(1, 3), 16), g: parseInt(hex.substring(3, 5), 16), b: parseInt(hex.substring(5, 7), 16) };\r\n    };\r\n    const mixColors = (hexColor, mixColor, opacity) => {\r\n        const c = hexToRgb(hexColor);\r\n        const m = hexToRgb(mixColor || '#000000');\r\n        const r = Math.round(c.r * opacity + m.r * (1 - opacity));\r\n        const g = Math.round(c.g * opacity + m.g * (1 - opacity));\r\n        const b = Math.round(c.b * opacity + m.b * (1 - opacity));\r\n        return `rgb(${r},${g},${b})`;\r\n    };\r\n\r\n    // 1. DRAW SKY\r\n    const skyGrad = ctx.createLinearGradient(0, 0, 0, height);\r\n    // Ensure sky is defined\r\n    const skyColors = theme.sky || [COLORS.black, COLORS.darkNebula];\r\n    skyColors.forEach((color, idx) => {\r\n        skyGrad.addColorStop(idx / (skyColors.length - 1), color);\r\n    });\r\n    ctx.fillStyle = skyGrad;\r\n    ctx.fillRect(0, 0, width, height);\r\n\r\n    // 2. STARS (Back layer)\r\n    // Logic: If user explicit choice (starSettings) exists, use it. Else use theme default.\r\n    const showStars = (starSettings?.enabled !== undefined) ? starSettings.enabled : theme.atmosphere.stars;\r\n\r\n    if (showStars) {\r\n        const sColor = starSettings?.color || '#FFF';\r\n        ctx.fillStyle = sColor;\r\n        // Use sColor for fill\r\n\r\n        for (let i = 0; i < 400; i++) {\r\n            const sx = rand() * width;\r\n            const sy = rand() * (height * 0.85); // Down to horizon\r\n            const size = rand() * 2;\r\n            ctx.globalAlpha = rand() * 0.8 + 0.2;\r\n            ctx.fillStyle = sColor; // Ensure color is applied\r\n            ctx.beginPath(); ctx.arc(sx, sy, size, 0, Math.PI * 2); ctx.fill();\r\n        }\r\n    }\r\n    ctx.globalAlpha = 1.0;\r\n\r\n    // 2.5 CELESTIAL\r\n    if (theme.celestial && theme.celestial.type !== 'none') {\r\n        const { type, color, x = 0.5, y = 0.5 } = theme.celestial;\r\n        const cx = width * x;\r\n        const cy = height * y;\r\n\r\n        if (type === 'sun' || type === 'moon') {\r\n            const r = 200;\r\n            const grad = ctx.createRadialGradient(cx, cy, r * 0.2, cx, cy, r);\r\n            const c1 = Array.isArray(color) ? color[0] : color;\r\n            grad.addColorStop(0, c1);\r\n            grad.addColorStop(1, 'rgba(255,255,255,0)');\r\n            ctx.fillStyle = grad;\r\n            ctx.beginPath(); ctx.arc(cx, cy, r, 0, Math.PI * 2); ctx.fill();\r\n        }\r\n        if (type === 'split-sun') {\r\n            const r = 300;\r\n            const grad = ctx.createLinearGradient(0, cy - r, 0, cy + r);\r\n            grad.addColorStop(0, Array.isArray(color) ? color[0] : color);\r\n            grad.addColorStop(1, Array.isArray(color) ? color[1] : color);\r\n            ctx.save();\r\n            ctx.fillStyle = grad;\r\n            ctx.beginPath(); ctx.arc(cx, cy, r, 0, Math.PI * 2); ctx.fill();\r\n            ctx.globalCompositeOperation = 'destination-out';\r\n            ctx.fillStyle = '#000';\r\n            for (let i = 0; i < 8; i++) {\r\n                const h = 20 + i * 5;\r\n                const yStart = cy + (i * 40) - 50;\r\n                ctx.fillRect(cx - r, yStart, r * 2, h * 0.4);\r\n            }\r\n            ctx.restore();\r\n            ctx.globalCompositeOperation = 'source-over';\r\n        }\r\n        if (type === 'ring-planet') {\r\n            const r = 100;\r\n            ctx.fillStyle = color;\r\n            ctx.beginPath(); ctx.arc(cx, cy, r, 0, Math.PI * 2); ctx.fill();\r\n            ctx.beginPath(); ctx.ellipse(cx, cy, r * 2.5, r * 0.4, -0.2, 0, Math.PI * 2);\r\n            ctx.strokeStyle = color; ctx.lineWidth = 10; ctx.stroke();\r\n        }\r\n        if (type === 'distant_jet') {\r\n            const jx = width * 0.2; // Adjusted for safe zone\r\n            const jy = height * 0.25;\r\n            // Streak\r\n            const trailLen = 100;\r\n            const tGrad = ctx.createLinearGradient(jx, jy, jx + trailLen, jy);\r\n            tGrad.addColorStop(0, color);\r\n            tGrad.addColorStop(1, 'transparent');\r\n\r\n            ctx.beginPath(); ctx.moveTo(jx, jy); ctx.lineTo(jx + trailLen, jy);\r\n            ctx.strokeStyle = tGrad; ctx.lineWidth = 2; ctx.stroke();\r\n\r\n            // Dot\r\n            ctx.shadowBlur = 8; ctx.shadowColor = color;\r\n            ctx.fillStyle = '#fff';\r\n            ctx.beginPath(); ctx.arc(jx, jy, 2.5, 0, Math.PI * 2); ctx.fill();\r\n            ctx.shadowBlur = 0;\r\n            if (type === 'earth_rise') {\r\n                const r = 180;\r\n                // Earth Gradient (Blue Marble)\r\n                const earth = ctx.createRadialGradient(cx, cy, r * 0.4, cx, cy, r);\r\n                earth.addColorStop(0, COLORS.ionBlue);\r\n                earth.addColorStop(0.6, '#004488');\r\n                earth.addColorStop(1, '#000');\r\n\r\n                ctx.shadowBlur = 30; ctx.shadowColor = 'rgba(27, 130, 255, 0.5)';\r\n                ctx.fillStyle = earth;\r\n                ctx.beginPath(); ctx.arc(cx, cy, r, 0, Math.PI * 2); ctx.fill();\r\n\r\n                // Clouds (White swirls)\r\n                ctx.fillStyle = 'rgba(255,255,255,0.2)';\r\n                ctx.shadowBlur = 0;\r\n                for (let i = 0; i < 6; i++) {\r\n                    ctx.beginPath();\r\n                    ctx.ellipse(cx + (rand() - 0.5) * r, cy + (rand() - 0.5) * r, rand() * r * 0.7, rand() * r * 0.2, rand() * Math.PI, 0, Math.PI * 2);\r\n                    ctx.fill();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    // 3. BACKGROUND TERRAIN (Mountains/Dunes)\r\n    if (theme.mountains) {\r\n        ctx.fillStyle = theme.mountains.color;\r\n        ctx.beginPath(); ctx.moveTo(0, height);\r\n        let mx = 0;\r\n        while (mx <= width) {\r\n            const my = height * (1 - theme.mountains.height) - (rand() * 200);\r\n            ctx.lineTo(mx, my); mx += 200;\r\n        }\r\n        ctx.lineTo(width, height); ctx.fill();\r\n    }\r\n\r\n    // 3.1 LUNAR SURFACE\r\n    if (theme.foreground?.type === 'lunar_surface') {\r\n        const horY = height * 0.85; // Low horizon to show space\r\n        // Gradient for surface\r\n        const lGrad = ctx.createLinearGradient(0, horY, 0, height);\r\n        const surfaceColor = theme.foreground.color || '#111';\r\n        lGrad.addColorStop(0, surfaceColor);\r\n        lGrad.addColorStop(1, '#000');\r\n        ctx.fillStyle = lGrad;\r\n\r\n        ctx.beginPath(); ctx.moveTo(0, height); ctx.lineTo(0, horY);\r\n        // Bumpy horizon\r\n        for (let x = 0; x <= width; x += 100) {\r\n            ctx.lineTo(x, horY + (rand() - 0.5) * 20);\r\n        }\r\n        ctx.lineTo(width, height); ctx.fill();\r\n\r\n        // Craters\r\n        ctx.fillStyle = 'rgba(0,0,0,0.4)';\r\n        ctx.strokeStyle = 'rgba(255,255,255,0.05)';\r\n        ctx.lineWidth = 2;\r\n        for (let i = 0; i < 12; i++) {\r\n            const w = 40 + rand() * 120;\r\n            const h = w * 0.25;\r\n            const cx = rand() * width;\r\n            const cy = horY + 30 + rand() * (height - horY - 30);\r\n\r\n            ctx.beginPath(); ctx.ellipse(cx, cy, w, h, 0, 0, Math.PI * 2);\r\n            ctx.fill(); ctx.stroke();\r\n        }\r\n    }\r\n\r\n    // 3.5 RETRO GRID (Behind City)\r\n    if (theme.atmosphere?.grid) {\r\n        const vanishY = height * 0.75; // Lower horizon (was 0.70)\r\n\r\n        // Explicit Black Ground for Holo Grid\r\n        if (themeId === 'city_holo') {\r\n            ctx.fillStyle = '#000';\r\n            ctx.fillRect(0, vanishY, width, height - vanishY);\r\n        }\r\n\r\n        // WATER GRID STYLING\r\n        ctx.strokeStyle = COLORS.ionBlue; // Default Deep Water\r\n        if (themeId === 'city_vaporwave') ctx.strokeStyle = COLORS.auroraBlue; // Tropical Water\r\n        if (themeId === 'city_retrowave') ctx.strokeStyle = COLORS.ionBlue; // Deep Synth Water\r\n        if (themeId === 'city_holo') ctx.strokeStyle = COLORS.auroraMint; // Digital Water\r\n\r\n        // Add Water Glow\r\n        ctx.shadowBlur = 10;\r\n        ctx.shadowColor = ctx.strokeStyle;\r\n\r\n        ctx.lineWidth = 2;\r\n        ctx.globalAlpha = 0.3;\r\n        ctx.beginPath();\r\n\r\n        // Widen Perspective: Ultra-wide source points (-10x to 11x) make lines appear nearly parallel/vertical\r\n        for (let x = -width * 10; x < width * 11; x += 800) {\r\n            ctx.moveTo(x, height);\r\n            ctx.lineTo(width / 2, vanishY);\r\n        }\r\n\r\n        // Horizontal lines\r\n        let y = vanishY + 5;\r\n        while (y < height) {\r\n            ctx.moveTo(0, y); ctx.lineTo(width, y);\r\n            const gap = Math.max(2, (y - vanishY) * 0.15);\r\n            y += gap;\r\n        }\r\n        ctx.stroke();\r\n\r\n        // MASK 1: Fade out grid near bottom-left (Username Area)\r\n        ctx.globalCompositeOperation = 'destination-out';\r\n        const mask = ctx.createRadialGradient(width * 0.2, height, 100, width * 0.4, height, 800);\r\n        mask.addColorStop(0, '#000');\r\n        mask.addColorStop(0.4, 'rgba(0,0,0,0.8)');\r\n        mask.addColorStop(1, 'transparent');\r\n        ctx.fillStyle = mask;\r\n        ctx.fillRect(0, height * 0.5, width, height * 0.5);\r\n\r\n        // MASK 2: Side Fades (Fixes \"fucked up\" corners)\r\n        const sideFade = ctx.createLinearGradient(0, 0, width, 0);\r\n        sideFade.addColorStop(0, '#000');\r\n        sideFade.addColorStop(0.05, 'transparent'); // Less aggressive fade (5%)\r\n        sideFade.addColorStop(0.95, 'transparent'); // (95%)\r\n        sideFade.addColorStop(1, '#000');\r\n        ctx.fillStyle = sideFade;\r\n        ctx.fillRect(0, vanishY, width, height - vanishY);\r\n\r\n        ctx.globalCompositeOperation = 'source-over'; // Reset\r\n        ctx.globalAlpha = 1.0;\r\n        ctx.shadowBlur = 0; // Reset glow\r\n    }\r\n\r\n    // --- 2. MOUNTAINS (PANOSPACE PRIME EXCLUSIVE) ---\r\n    // Ported & Adapted Fractal Logic for Background Majesty\r\n    if (theme.foreground?.type === 'prime_mountains') {\r\n        const skylineY = height * 0.8; // Base for mountains\r\n        const drawFractalMountain = (yBase, colorBase, peakHeight, roughness, startX, endX) => {\r\n            let points = [{ x: startX, y: yBase }, { x: (startX + endX) / 2, y: yBase - peakHeight }, { x: endX, y: yBase }];\r\n            for (let i = 0; i < roughness; i++) {\r\n                let nextPoints = [];\r\n                for (let j = 0; j < points.length - 1; j++) {\r\n                    const p1 = points[j]; const p2 = points[j + 1];\r\n                    const midX = (p1.x + p2.x) / 2;\r\n                    const disp = (rand() - 0.5) * (peakHeight / (i + 1));\r\n                    const midY = (p1.y + p2.y) / 2 + disp;\r\n                    nextPoints.push(p1); nextPoints.push({ x: midX, y: midY });\r\n                }\r\n                nextPoints.push(points[points.length - 1]);\r\n                points = nextPoints;\r\n            }\r\n\r\n            // Draw Mountain Body with Gradient\r\n            const mGrad = ctx.createLinearGradient(0, yBase - peakHeight, 0, yBase);\r\n            mGrad.addColorStop(0, COLORS.voidPurple);\r\n            mGrad.addColorStop(1, '#000');\r\n            ctx.fillStyle = mGrad;\r\n\r\n            ctx.beginPath();\r\n            ctx.moveTo(points[0].x, height); // Anchor BL\r\n            points.forEach(p => ctx.lineTo(p.x, p.y));\r\n            ctx.lineTo(points[points.length - 1].x, height); // Anchor BR\r\n            ctx.fill();\r\n\r\n            // Glowing Rim Light (Cyber Edge)\r\n            ctx.strokeStyle = COLORS.auroraBlue;\r\n            ctx.lineWidth = 1;\r\n            ctx.shadowBlur = 10; ctx.shadowColor = COLORS.auroraBlue;\r\n            ctx.beginPath();\r\n            points.forEach(p => ctx.lineTo(p.x, p.y));\r\n            ctx.stroke();\r\n            ctx.shadowBlur = 0;\r\n        };\r\n\r\n        // Huge distant range\r\n        drawFractalMountain(skylineY, COLORS.voidPurple, 600, 6, -200, width + 200);\r\n    }\r\n\r\n    // --- 2.6 ULTRA ATMOSPHERE (Aurora) ---\r\n    if (theme.atmosphere?.ultra_fx) {\r\n        // Northern Lights\r\n        ctx.globalCompositeOperation = 'screen';\r\n        const auroraGrad = ctx.createLinearGradient(0, 0, width, 0);\r\n        auroraGrad.addColorStop(0, 'transparent');\r\n        auroraGrad.addColorStop(0.2, COLORS.auroraMint);\r\n        auroraGrad.addColorStop(0.5, COLORS.ionBlue);\r\n        auroraGrad.addColorStop(0.8, COLORS.deepOrbitPurple);\r\n        auroraGrad.addColorStop(1, 'transparent');\r\n\r\n        ctx.fillStyle = auroraGrad;\r\n        ctx.globalAlpha = 0.3;\r\n\r\n        // Wavy ribbon\r\n        ctx.beginPath();\r\n        ctx.moveTo(0, height * 0.2);\r\n        for (let x = 0; x <= width; x += 50) {\r\n            ctx.lineTo(x, height * 0.2 + Math.sin(x * 0.005) * 100 + Math.cos(x * 0.02) * 50);\r\n        }\r\n        ctx.lineTo(width, 0); ctx.lineTo(0, 0);\r\n        ctx.fill();\r\n\r\n        ctx.globalAlpha = 1.0;\r\n        ctx.globalCompositeOperation = 'source-over';\r\n\r\n        // Vertical Beams (Holo-Searchlights)\r\n        ctx.fillStyle = COLORS.ionBlue;\r\n        const skylineY = height * 0.8; // Assuming this is defined or calculated earlier\r\n        for (let k = 0; k < 15; k++) {\r\n            const bx = rand() * width;\r\n            const by = skylineY;\r\n            const bh = rand() * height * 0.8;\r\n            const bw = rand() * 20 + 5;\r\n\r\n            const beam = ctx.createLinearGradient(bx, by, bx, by - bh);\r\n            beam.addColorStop(0, 'rgba(27, 130, 255, 0.4)');\r\n            beam.addColorStop(1, 'transparent');\r\n            ctx.fillStyle = beam;\r\n            ctx.fillRect(bx, by - bh, bw, bh);\r\n        }\r\n    }\r\n\r\n    // --- 2.65 ROCKET LAUNCH ---\r\n    if (theme.atmosphere?.rocket) {\r\n        const rx = width * 0.25; // Left side launch for balance\r\n        const ry = height * 0.3; // High up\r\n\r\n        // 1. Trail - Vertical smoke/exhaust\r\n        const trail = ctx.createLinearGradient(rx, height, rx, ry);\r\n        trail.addColorStop(0, 'rgba(255, 255, 255, 0)');\r\n        trail.addColorStop(0.2, 'rgba(255, 255, 255, 0.1)'); // Faint base\r\n        trail.addColorStop(0.9, 'rgba(255, 180, 100, 0.6)'); // Orange exhaust near top\r\n        trail.addColorStop(1, '#FFF');\r\n\r\n        ctx.strokeStyle = trail;\r\n        ctx.lineWidth = 2; // Thin contrail distance\r\n        ctx.beginPath(); ctx.moveTo(rx, height); ctx.lineTo(rx, ry); ctx.stroke();\r\n\r\n        // 2. Flare (The Rocket Engine)\r\n        ctx.shadowBlur = 20; ctx.shadowColor = COLORS.stellarOrange;\r\n        ctx.fillStyle = '#FFF';\r\n        ctx.beginPath(); ctx.arc(rx, ry, 4, 0, Math.PI * 2); ctx.fill();\r\n        ctx.shadowBlur = 0;\r\n    }\r\n\r\n    // --- 2.7 NEO-TOKYO BACKGROUND FX ---\r\n    if (theme.atmosphere?.neotokyo_fx) {\r\n        const cx = width / 2;\r\n        const cy = height * 0.6;\r\n\r\n        // 0. NEON SUN (The Energy Sphere)\r\n        // Massive Pink/White sphere (Brand Compliant)\r\n        const sunR = 400;\r\n        const sunGrad = ctx.createRadialGradient(cx, cy, 50, cx, cy, sunR);\r\n        sunGrad.addColorStop(0, '#FFF'); // Core\r\n        sunGrad.addColorStop(0.1, COLORS.solarPink); // Solar Pink\r\n        sunGrad.addColorStop(0.4, 'rgba(255, 92, 138, 0.2)');\r\n        sunGrad.addColorStop(1, 'transparent');\r\n\r\n        ctx.fillStyle = sunGrad;\r\n        ctx.beginPath(); ctx.arc(cx, cy, sunR, 0, Math.PI * 2); ctx.fill();\r\n\r\n        // 1. MEGASTRUCTURE (Tyrell Corp Pyramid)\r\n        const strucHeight = height * 0.85;\r\n        const topW = width * 0.3;\r\n        const botW = width * 0.8;\r\n\r\n        // Dark silhouette\r\n        ctx.fillStyle = '#020101';\r\n        ctx.beginPath();\r\n        ctx.moveTo(cx - topW / 2, height - strucHeight);\r\n        ctx.lineTo(cx + topW / 2, height - strucHeight);\r\n        ctx.lineTo(cx + botW / 2, height);\r\n        ctx.lineTo(cx - botW / 2, height);\r\n        ctx.fill();\r\n\r\n        // 2. MEGA-LIGHTS (Addictive Detail)\r\n        // Grid pattern of lights on the structure\r\n        ctx.fillStyle = 'rgba(255, 160, 50, 0.6)'; // Sodium vapor orange\r\n        const rows = 40;\r\n        for (let r = 0; r < rows; r++) {\r\n            const yPct = r / rows;\r\n            const y = (height - strucHeight) + yPct * strucHeight;\r\n            const rowW = topW + (botW - topW) * yPct;\r\n            const cols = 20 + r * 2; // More lights at bottom\r\n\r\n            if (rand() > 0.3) { // Skip some rows\r\n                for (let c = 0; c < cols; c++) {\r\n                    if (rand() > 0.8) continue; // Sparse lights\r\n                    const x = (cx - rowW / 2) + (c / cols) * rowW;\r\n                    const sz = rand() * 2 + 1;\r\n                    ctx.fillRect(x, y, sz, sz);\r\n                }\r\n            }\r\n        }\r\n\r\n        // 3. SMOG (Atmosphere)\r\n        const smog = ctx.createLinearGradient(0, 0, 0, height);\r\n        smog.addColorStop(0.3, 'transparent');\r\n        smog.addColorStop(0.7, 'rgba(10, 5, 5, 0.8)'); // Dark smog base\r\n        ctx.fillStyle = smog;\r\n        ctx.fillRect(0, 0, width, height);\r\n    }\r\n\r\n    // --- 2.8 FESTIVAL BACKDROP (Bay & Mountains) ---\r\n    if (theme.foreground?.type === 'festival_terrain') {\r\n        // 1. OCEAN BAY\r\n        const oceanY = height * 0.85;\r\n        const sea = ctx.createLinearGradient(0, oceanY, 0, height);\r\n        sea.addColorStop(0, COLORS.deepOrbitPurple);\r\n        sea.addColorStop(1, COLORS.ionBlue);\r\n        ctx.fillStyle = sea;\r\n        ctx.fillRect(0, oceanY, width, height - oceanY);\r\n\r\n        // Glimmer\r\n        ctx.fillStyle = 'rgba(255,255,255,0.3)';\r\n        for (let i = 0; i < 100; i++) {\r\n            const gx = rand() * width;\r\n            const gy = oceanY + rand() * (height - oceanY);\r\n            ctx.fillRect(gx, gy, rand() * 20 + 5, 2);\r\n        }\r\n\r\n        // 2. MOUNTAINS (Framing)\r\n        // Lighter buildings, Darker Mountains\r\n        ctx.fillStyle = '#000000';\r\n        // Left Peak\r\n        ctx.beginPath(); ctx.moveTo(0, height); ctx.lineTo(0, height * 0.5);\r\n        ctx.quadraticCurveTo(width * 0.1, height * 0.55, width * 0.20, height); ctx.fill();\r\n\r\n        // MOUNTAINSIDE ROAD (Solar Pink Beam)\r\n        // \"Sliver\" effect created by the glowing beam cutting the darkness\r\n        const rx1 = 0; const ry1 = height * 0.60;\r\n        const rx2 = width * 0.15; const ry2 = height * 0.75; // Middle of mountain\r\n\r\n        const beamGrad = ctx.createLinearGradient(rx1, ry1, rx2, ry2);\r\n        beamGrad.addColorStop(0, COLORS.solarPink);\r\n        beamGrad.addColorStop(1, 'transparent');\r\n\r\n        ctx.shadowBlur = 15; ctx.shadowColor = COLORS.solarPink;\r\n        ctx.strokeStyle = beamGrad;\r\n        ctx.lineWidth = 3;\r\n        ctx.beginPath();\r\n        ctx.moveTo(rx1, ry1);\r\n        ctx.quadraticCurveTo(width * 0.06, height * 0.68, rx2, ry2);\r\n        ctx.stroke();\r\n        ctx.shadowBlur = 0;\r\n        // Right Peak\r\n        ctx.beginPath(); ctx.moveTo(width, height); ctx.lineTo(width, height * 0.4);\r\n        ctx.quadraticCurveTo(width * 0.9, height * 0.5, width * 0.80, height); ctx.fill();\r\n\r\n        // 3. FERRIS WHEEL (Distant)\r\n        if (theme.atmosphere?.ferris_wheel) {\r\n            const wx = width * 0.92;\r\n            const wy = height * 0.55;\r\n            const wr = 50;\r\n\r\n            // Rim\r\n            ctx.strokeStyle = COLORS.solarPink; ctx.lineWidth = 2;\r\n            ctx.shadowBlur = 10; ctx.shadowColor = COLORS.solarPink;\r\n            ctx.beginPath(); ctx.arc(wx, wy, wr, 0, Math.PI * 2); ctx.stroke();\r\n            ctx.shadowBlur = 0;\r\n\r\n            // Spokes\r\n            ctx.strokeStyle = 'rgba(255,255,255,0.5)'; ctx.lineWidth = 1;\r\n            for (let a = 0; a < Math.PI * 2; a += Math.PI / 6) {\r\n                ctx.beginPath(); ctx.moveTo(wx, wy);\r\n                ctx.lineTo(wx + Math.cos(a) * wr, wy + Math.sin(a) * wr); ctx.stroke();\r\n            }\r\n        }\r\n    }\r\n\r\n    // --- 2.9 FESTIVAL FIREWORKS ---\r\n    if (theme.atmosphere?.festival_fx) {\r\n        const colors = [COLORS.solarPink, COLORS.classicMint, COLORS.ionBlue, COLORS.iceWhite];\r\n        for (let f = 0; f < 8; f++) {\r\n            const fx = rand() * width;\r\n            const fy = rand() * (height * 0.5);\r\n            const fColor = colors[Math.floor(rand() * colors.length)];\r\n            const fSize = rand() * 60 + 20;\r\n            // Burst Lines\r\n            ctx.strokeStyle = fColor;\r\n            ctx.lineWidth = 1.5;\r\n            ctx.beginPath();\r\n            for (let a = 0; a < Math.PI * 2; a += Math.PI / 8) {\r\n                ctx.moveTo(fx, fy);\r\n                ctx.lineTo(fx + Math.cos(a) * fSize, fy + Math.sin(a) * fSize);\r\n            }\r\n            ctx.stroke();\r\n            // Core Glow\r\n            const glow = ctx.createRadialGradient(fx, fy, 2, fx, fy, fSize);\r\n            glow.addColorStop(0, 'rgba(255,255,255,0.8)');\r\n            glow.addColorStop(0.5, fColor);\r\n            glow.addColorStop(1, 'transparent');\r\n            ctx.fillStyle = glow;\r\n            ctx.beginPath(); ctx.arc(fx, fy, fSize, 0, Math.PI * 2); ctx.fill();\r\n        }\r\n    }\r\n\r\n    const drawBuilding = (ctx, bx, baseY, bw, bh, scale, color, isNear, isMid, isFar, theme, themeId, seed) => {\r\n        // DETERMINISTIC RANDOM\r\n        // Fix seed: seed is float 0-1, so multiply to get integer for LCG\r\n        const rand = LCG(Math.floor(seed * 4294967296));\r\n        const randomConfig = (arr) => arr[Math.floor(rand() * arr.length)];\r\n\r\n        ctx.fillStyle = color;\r\n        if (theme.buildings.type === 'wireframe') {\r\n            ctx.strokeStyle = color; ctx.lineWidth = 2 * scale; ctx.fillStyle = 'rgba(0,0,0,0.9)';\r\n            ctx.fillRect(bx, baseY - bh, bw, bh); ctx.strokeRect(bx, baseY - bh, bw, bh);\r\n        } else if (theme.buildings.type === 'spires') {\r\n            ctx.beginPath(); ctx.moveTo(bx, baseY); ctx.lineTo(bx + bw / 2, baseY - bh); ctx.lineTo(bx + bw, baseY); ctx.fill();\r\n        } else {\r\n            ctx.fillRect(bx, baseY - bh, bw, bh);\r\n            if (bw > 80 * scale) { // Detail\r\n                ctx.fillStyle = 'rgba(0,0,0,0.2)';\r\n                ctx.fillRect(bx + bw * 0.3, baseY - bh, bw * 0.1, bh); ctx.fillRect(bx + bw * 0.6, baseY - bh, bw * 0.1, bh);\r\n            }\r\n        }\r\n\r\n        // Windows\r\n        const winSize = (isNear ? 5 : (isMid ? 3 : 2)) * scale;\r\n        const gap = (isNear ? 12 : (isMid ? 8 : 6)) * scale;\r\n\r\n        if (theme.buildings.windowColor) {\r\n            const winColor = Array.isArray(theme.buildings.windowColor) ? randomConfig(theme.buildings.windowColor) : theme.buildings.windowColor;\r\n            ctx.fillStyle = winColor;\r\n            let hasLitWindow = false;\r\n            // BEYOND FX: Very sparse windows, mostly dark towers\r\n            const isBeyond = theme.atmosphere?.beyond_fx;\r\n            const windowChance = isBeyond\r\n                ? (isFar ? 0 : (isMid ? 0.05 : 0.15)) // Much lower chance for Beyond\r\n                : ((isFar || scale < 0.5) ? 0.02 : (isMid ? 0.3 : 0.6));\r\n\r\n            if (theme.buildings.type !== 'spires') {\r\n                for (let wy = baseY - bh + 10; wy < baseY - 5; wy += gap) {\r\n                    if (wy > baseY - 10) continue;\r\n                    for (let wx = bx + 5; wx < bx + bw - 5; wx += gap) {\r\n                        if (rand() > (1 - windowChance) || (!hasLitWindow && isNear && !isBeyond)) {\r\n                            // BEYOND FX: Force specific colors if enabled? No, keep random from pallete\r\n                            if (isNear) ctx.globalAlpha = 1.0; else ctx.globalAlpha = 0.7;\r\n\r\n                            // Mixed Windows (Glitch + Color City)\r\n                            const isMixed = themeId === 'city_glitch' || themeId === 'city_color';\r\n\r\n                            // Realistic City Rare Accents\r\n                            const isRealisticDay = themeId === 'city_realistic_day';\r\n\r\n                            if (isMixed && rand() > 0.1) {\r\n                                ctx.fillStyle = randomConfig(theme.buildings.windowColor);\r\n                            } else if (isRealisticDay && rand() > 0.90) { // 10% Frequent Accents\r\n                                ctx.fillStyle = randomConfig([COLORS.ionBlue, COLORS.solarPink, COLORS.classicMint, COLORS.auroraMint, COLORS.stellarOrange]);\r\n                            } else {\r\n                                ctx.fillStyle = winColor;\r\n                            }\r\n\r\n                            ctx.fillRect(wx, wy, winSize, winSize); ctx.globalAlpha = 1.0; hasLitWindow = true;\r\n                        }\r\n                    }\r\n                }\r\n            } else {\r\n                ctx.fillRect(bx + bw / 2 - scale, baseY - bh + (bh * 0.2), scale * 2, bh * 0.7);\r\n            }\r\n        }\r\n\r\n        // BEYOND FX: Neo-Gothic Accents (Rooflines & Edges)\r\n        if (theme.atmosphere?.beyond_fx) {\r\n            ctx.strokeStyle = randomConfig([COLORS.voidPurple, COLORS.deepOrbitPurple, COLORS.ionBlue]); // Darker moody accents\r\n            ctx.lineWidth = Math.max(1, 2 * scale);\r\n\r\n            // 1. Roofline Glow (Thin neon rim)\r\n            // Only on top edge\r\n            if (rand() > 0.3) {\r\n                ctx.beginPath();\r\n                ctx.moveTo(bx, baseY - bh);\r\n                ctx.lineTo(bx + bw, baseY - bh);\r\n                ctx.stroke();\r\n            }\r\n\r\n            // 2. Vertical Pinstripe (Tron/Art Deco style)\r\n            // Rare, distinct vertical line down the building\r\n            if (rand() > 0.7 && bw > 20 * scale) {\r\n                const pinstripeX = bx + (rand() > 0.5 ? 4 * scale : bw - 4 * scale);\r\n                ctx.beginPath();\r\n                ctx.moveTo(pinstripeX, baseY - bh);\r\n                ctx.lineTo(pinstripeX, baseY - (bh * (0.3 + rand() * 0.6))); // Doesn't go all way down usually\r\n                ctx.stroke();\r\n            }\r\n\r\n            // 3. Antenna / Gantry (Occasional top detail)\r\n            if (isNear && rand() > 0.85) {\r\n                const antH = bh * 0.15;\r\n                const antX = bx + bw * rand();\r\n                ctx.fillStyle = COLORS.black;\r\n                ctx.fillRect(antX, baseY - bh - antH, 2 * scale, antH);\r\n                // Beacon tip\r\n                ctx.fillStyle = COLORS.solarPink;\r\n                ctx.fillRect(antX - 1, baseY - bh - antH - 2, 4, 4);\r\n            }\r\n        }\r\n    };\r\n\r\n    // 4. DRAW CITY LAYERS (High Res)\r\n    const drawCityLayer = (baseY, scale, layerIndex) => {\r\n        const ls = scale || 1;\r\n        const centerX = width / 2;\r\n        const isSuperFar = layerIndex === 0;\r\n        const isFar = layerIndex === 1;\r\n        const isMidBack = layerIndex === 2;\r\n        const isMid = layerIndex === 3;\r\n        const isNear = layerIndex === 4;\r\n\r\n        const fogColor = theme.atmosphere?.fog || '#000000';\r\n\r\n        let depthFactor = 1.0;\r\n        if (isSuperFar) depthFactor = 0.45;\r\n        else if (isFar) depthFactor = 0.60;\r\n        else if (isMidBack) depthFactor = 0.75;\r\n        else if (isMid) depthFactor = 0.90;\r\n\r\n        const solidLayerColor = mixColors(theme.buildings.color, fogColor, depthFactor);\r\n        ctx.filter = (isSuperFar) ? 'blur(2px)' : 'none';\r\n        ctx.globalAlpha = 1.0;\r\n\r\n        // Ground/Depth (Dark Rectangle)\r\n        ctx.fillStyle = (themeId === 'city_holo') ? '#000' : solidLayerColor;\r\n        ctx.fillRect(0, baseY, width, height - baseY);\r\n\r\n        // STATIC CITY ITERATION\r\n        const cityLayer = STATIC_CITY.filter(b => b.layer === layerIndex);\r\n\r\n        cityLayer.forEach(b => {\r\n            let currentX = b.xPct * width;\r\n            let bw = (b.wPct * width) * ls; // Original Scale (No 2.5x multiplier)\r\n            let bh = (b.hPct * height) * ls;\r\n\r\n            // GAP LOGIC (Static Masking)\r\n            const isFestival = theme.foreground?.type === 'festival_terrain';\r\n            const hasGap = isFestival || (theme.buildings.centerGap !== undefined && theme.buildings.centerGap !== null);\r\n\r\n            if (hasGap) {\r\n                const layerGapShrink = layerIndex * 0.01;\r\n                const leftShore = isFestival ? width * (0.20 + layerGapShrink) : (width / 2) - (width * theme.buildings.centerGap / 2);\r\n                const rightShore = isFestival ? width * (0.80 - layerGapShrink) : (width / 2) + (width * theme.buildings.centerGap / 2);\r\n\r\n                // Check Overlap\r\n                if (currentX + bw > leftShore && currentX < rightShore) {\r\n                    if (currentX < leftShore) {\r\n                        bw = leftShore - currentX;\r\n                    } else if (currentX < rightShore) {\r\n                        return; // Hide\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (bw < 2 || currentX > width) return;\r\n\r\n            drawBuilding(ctx, currentX, baseY, bw, bh, ls, solidLayerColor, isNear, isMid, isFar, theme, themeId, b.seed);\r\n        });\r\n        ctx.filter = 'none';\r\n    };\r\n\r\n    // RENDER STACK\r\n    drawCityLayer(height * 0.82, 0.3, 0);\r\n    drawCityLayer(height * 0.85, 0.45, 1);\r\n    drawCityLayer(height * 0.89, 0.60, 2);\r\n    drawCityLayer(height * 0.94, 0.80, 3);\r\n    drawCityLayer(height * 1.0, 1.0, 4);\r\n\r\n\r\n    // 5. ATMOSPHERIC & SPECIALS\r\n\r\n    // Traffic (City-3000)\r\n    if (theme.atmosphere?.traffic) {\r\n        for (let i = 0; i < 100; i++) {\r\n            const tx = rand() * width;\r\n            const ty = rand() * (height * 0.7) + (height * 0.2);\r\n            const isRed = rand() > 0.5;\r\n            const speed = 50 + rand() * 100;\r\n\r\n            ctx.fillStyle = isRed ? COLORS.solarPink : COLORS.ionBlue;\r\n            // Draw Streak\r\n            const grad = ctx.createLinearGradient(tx, ty, tx - speed, ty);\r\n            grad.addColorStop(0, ctx.fillStyle);\r\n            grad.addColorStop(1, 'transparent');\r\n            ctx.fillStyle = grad;\r\n            ctx.fillRect(tx - speed, ty, speed, 2);\r\n\r\n            // Brighter Head\r\n            ctx.fillStyle = '#FFF';\r\n            ctx.fillRect(tx, ty, 4, 2);\r\n        }\r\n    }\r\n\r\n    // Hologram (City-3000 Billboard)\r\n    if (theme.atmosphere?.hologram === 'girl') {\r\n        // Giant Arc Hologram in Sky\r\n        const hx = width * 0.7; const hy = height * 0.3;\r\n        const hr = 300;\r\n        const grad = ctx.createRadialGradient(hx, hy, hr * 0.5, hx, hy, hr);\r\n        grad.addColorStop(0, 'rgba(255,183,213, 0.4)'); // Pink\r\n        grad.addColorStop(1, 'transparent');\r\n        ctx.fillStyle = grad;\r\n        ctx.beginPath(); ctx.arc(hx, hy, hr, 0, Math.PI * 2); ctx.fill();\r\n\r\n        // Scanlines within holo area\r\n        ctx.save();\r\n        ctx.beginPath(); ctx.arc(hx, hy, hr, 0, Math.PI * 2); ctx.clip();\r\n        ctx.fillStyle = 'rgba(255,255,255,0.1)';\r\n        for (let y = hy - hr; y < hy + hr; y += 4) { ctx.fillRect(hx - hr, y, hr * 2, 2); }\r\n        ctx.restore();\r\n    }\r\n\r\n    // Monorail (Chinatown)\r\n    if (theme.atmosphere?.monorail) {\r\n        const my = height * 0.65;\r\n        // Rail\r\n        ctx.fillStyle = '#0a0a0a';\r\n        ctx.fillRect(0, my, width, 10);\r\n        // Train\r\n        const tx = width * 0.4;\r\n        ctx.shadowBlur = 20; ctx.shadowColor = COLORS.stellarOrange;\r\n        ctx.fillStyle = COLORS.ionBlue;\r\n        ctx.fillRect(tx, my - 15, 400, 15);\r\n        ctx.shadowBlur = 0;\r\n        // Windows\r\n        ctx.fillStyle = '#fff';\r\n        for (let i = 0; i < 10; i++) ctx.fillRect(tx + 20 + (i * 35), my - 10, 20, 8);\r\n    }\r\n\r\n    // Foregrounds (Bridge/Rooftops)\r\n    if (theme.foreground) {\r\n        ctx.fillStyle = theme.foreground.color; // Silhouette\r\n        if (theme.foreground.type === 'dunes') {\r\n            // Dunes\r\n        } else if (theme.foreground.type === 'bridge') {\r\n            // Suspension Cables\r\n            ctx.strokeStyle = '#111'; ctx.lineWidth = 5;\r\n            ctx.beginPath(); ctx.moveTo(0, 0); ctx.quadraticCurveTo(width / 2, height * 0.6, width, 0); ctx.stroke();\r\n            // Vertical cables\r\n            for (let x = 0; x < width; x += 100) { ctx.beginPath(); ctx.moveTo(x, 0); ctx.lineTo(x, height); ctx.stroke(); }\r\n            // Railing base\r\n            ctx.fillRect(0, height * 0.8, width, height * 0.2);\r\n        } else if (theme.foreground.type === 'rooftops') {\r\n            // Vents/Antennas in immediate front\r\n            ctx.fillRect(100, height - 200, 150, 200); // Box\r\n            ctx.fillRect(width - 300, height - 150, 200, 150); // Box\r\n            ctx.strokeStyle = COLORS.ionBlue; ctx.lineWidth = 4;\r\n            ctx.beginPath(); ctx.moveTo(175, height - 200); ctx.lineTo(175, height - 400); ctx.stroke(); // Antenna (Red light on top?)\r\n            ctx.fillStyle = 'red'; ctx.fillRect(170, height - 410, 10, 10);\r\n        }\r\n    }\r\n\r\n    // Weather\r\n    if (theme.atmosphere?.rain) {\r\n        ctx.strokeStyle = 'rgba(255,255,255,0.3)';\r\n        ctx.lineWidth = 1;\r\n        ctx.beginPath();\r\n        for (let i = 0; i < 1000; i++) {\r\n            const rx = rand() * width; const ry = rand() * height;\r\n            ctx.moveTo(rx, ry); ctx.lineTo(rx - 5, ry + 40);\r\n        }\r\n        ctx.stroke();\r\n    }\r\n\r\n\r\n\r\n    if (theme.atmosphere?.glitch) {\r\n        ctx.fillStyle = `rgba(${rand() * 255}, 0, 255, 0.1)`; ctx.fillRect(0, 0, width, height);\r\n        for (let i = 0; i < 10; i++) { const y = rand() * height; ctx.fillStyle = 'rgba(255,255,255,0.05)'; ctx.fillRect(0, y, width, rand() * 50); }\r\n    }\r\n\r\n    // Vignette\r\n    const vig = ctx.createRadialGradient(width / 2, height / 2, width * 0.3, width / 2, height / 2, width * 0.8);\r\n    vig.addColorStop(0, 'transparent'); vig.addColorStop(1, 'rgba(0,0,0,0.6)');\r\n    ctx.fillStyle = vig; ctx.fillRect(0, 0, width, height);\r\n\r\n    // --- 4. NEO-TOKYO FOREGROUND FX ---\r\n    if (theme.atmosphere?.neotokyo_fx) {\r\n        const cx = width / 2;\r\n\r\n        // 1. FLYING CAR TRAFFIC (Coruscant Skyway)\r\n        // Multi-colored beams spread across the sky\r\n        const trafficColors = ['#FF3333', COLORS.ionBlue, COLORS.classicMint, COLORS.solarPink, '#FFF'];\r\n\r\n        for (let k = 0; k < 25; k++) {\r\n            ctx.beginPath();\r\n            // STRICT BRAND PALETTE ONLY\r\n            const brandPalette = [\r\n                COLORS.classicMint,\r\n                COLORS.solarPink,\r\n                COLORS.ionBlue,\r\n                COLORS.deepOrbitPurple,\r\n                '#FFFFFF', // Headlights\r\n                COLORS.solarPink  // Taillights (Pink instead of Red)\r\n            ];\r\n            const color = brandPalette[Math.floor(rand() * brandPalette.length)];\r\n\r\n            // Varied brightness/depth\r\n            const alpha = rand() * 0.7 + 0.3;\r\n            ctx.globalAlpha = alpha;\r\n\r\n            const startY = rand() * height;\r\n            const isMovingRight = rand() > 0.5;\r\n\r\n            // Motion Trail Gradient\r\n            const trailGrad = ctx.createLinearGradient(0, 0, width, 0);\r\n            if (isMovingRight) {\r\n                // Moving Right: Tail at Left (Transparent) -> Head at Right (Color)\r\n                trailGrad.addColorStop(0, 'transparent');\r\n                trailGrad.addColorStop(0.3, 'transparent'); // Longer tail fade\r\n                trailGrad.addColorStop(1, color);\r\n            } else {\r\n                // Moving Left: Head at Left (Color) -> Tail at Right (Transparent)\r\n                trailGrad.addColorStop(0, color);\r\n                trailGrad.addColorStop(0.7, 'transparent');\r\n                trailGrad.addColorStop(1, 'transparent');\r\n            }\r\n\r\n            // Shadow/Glow matches beam color\r\n            ctx.shadowBlur = rand() * 5 + 2;\r\n            ctx.shadowColor = color;\r\n            ctx.strokeStyle = trailGrad;\r\n            ctx.lineWidth = rand() * 2 + 1; // 1px to 3px\r\n\r\n            ctx.moveTo(0, startY);\r\n\r\n            const chaos = (rand() - 0.5) * 150;\r\n            const cp1x = width * 0.3; const cp1y = startY + chaos;\r\n            const cp2x = width * 0.7; const cp2y = startY - chaos;\r\n            const endY = startY + (rand() - 0.5) * 100;\r\n\r\n            ctx.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, width, endY);\r\n            ctx.stroke();\r\n\r\n            ctx.shadowBlur = 0;\r\n            ctx.globalAlpha = 1.0;\r\n        }\r\n\r\n        // 2. HOLO-ADS (Spinning Geometrics)\r\n        // Y2K style HUD elements\r\n        ctx.strokeStyle = COLORS.ionBlue;\r\n        ctx.lineWidth = 2;\r\n\r\n        const drawHoloRing = (hx, hy, r) => {\r\n            ctx.beginPath();\r\n            ctx.arc(hx, hy, r, 0, Math.PI * 2);\r\n            ctx.stroke();\r\n\r\n            // Spinning segments\r\n            ctx.beginPath();\r\n            const startAng = rand() * Math.PI;\r\n            ctx.arc(hx, hy, r + 10, startAng, startAng + 1.5);\r\n            ctx.strokeStyle = COLORS.classicMint;\r\n            ctx.stroke();\r\n            ctx.strokeStyle = COLORS.ionBlue; // reset\r\n        };\r\n\r\n        drawHoloRing(width * 0.2, height * 0.3, 60);\r\n        drawHoloRing(width * 0.8, height * 0.4, 80);\r\n\r\n        // 3. SEARCHLIGHTS (Blade Runner)\r\n        // Beams cutting through the smog\r\n        ctx.globalCompositeOperation = 'overlay';\r\n        const beam = ctx.createLinearGradient(0, height, 0, height * 0.4);\r\n        beam.addColorStop(0, 'rgba(255, 255, 255, 0.1)');\r\n        beam.addColorStop(1, 'transparent');\r\n        ctx.fillStyle = beam;\r\n\r\n        ctx.save();\r\n        ctx.translate(width * 0.1, height);\r\n        ctx.rotate(-0.3);\r\n        ctx.fillRect(-50, -height, 100, height);\r\n        ctx.restore();\r\n\r\n        ctx.save();\r\n        ctx.translate(width * 0.9, height);\r\n        ctx.rotate(0.3);\r\n        ctx.fillRect(-50, -height, 100, height);\r\n        ctx.restore();\r\n\r\n        ctx.globalCompositeOperation = 'source-over';\r\n    }\r\n\r\n    const dataURL = canvas.toDataURL();\r\n    CITY_RENDER_CACHE.set(cacheKey, dataURL);\r\n    return dataURL;\r\n}\r\n\r\nconst CityscapeBanner = ({ themeId, starSettings }) => {\r\n    const canvasRef = useRef(null);\r\n    const [bgImage, setBgImage] = useState('');\r\n\r\n    useEffect(() => {\r\n        const bg = renderCityToCanvas(canvasRef.current, themeId, starSettings);\r\n        setBgImage(bg);\r\n    }, [themeId, starSettings]);\r\n\r\n    return (\r\n        <div style={{\r\n            position: 'absolute',\r\n            inset: 0,\r\n            overflow: 'hidden',\r\n            pointerEvents: 'none',\r\n        }}>\r\n            <div style={{\r\n                width: '100%',\r\n                height: '100%',\r\n                backgroundImage: `url(${bgImage})`,\r\n                backgroundSize: 'cover',\r\n                backgroundPosition: 'center bottom',\r\n            }} />\r\n            <canvas ref={canvasRef} style={{ display: 'none' }} />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CityscapeBanner;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\profile\\OceanBanner.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React, { useRef, useEffect, useState } from 'react';\r\n\r\n// --- PANOSPACE BRAND PALETTE (Strict Enforcement) ---\r\nconst COLORS = {\r\n    iceWhite: '#F2F7FA',\r\n    auroraBlue: '#7FDBFF',\r\n    ionBlue: '#1B82FF',\r\n    nebulaPink: '#FFB7D5',\r\n    solarPink: '#FF5C8A',\r\n    deepOrbitPurple: '#5A3FFF',\r\n    stellarOrange: '#FF914D',\r\n    classicMint: '#7FFFD4',\r\n    auroraMint: '#8CFFE9',\r\n    darkNebula: '#0A1A3A',\r\n    voidPurple: '#2A0E61',\r\n    black: '#000000',\r\n    // Removed random reds/yellows, strictly using brand variants or mixes\r\n};\r\n\r\nconst OCEAN_THEMES = {\r\n    // 1. CLASSIC SUNSET (Brand Orange/Purple)\r\n    'ocean_sunset_classic': {\r\n        sky: [COLORS.black, COLORS.voidPurple, COLORS.stellarOrange],\r\n        waterBase: COLORS.voidPurple,\r\n        waterHighlight: COLORS.stellarOrange,\r\n        sun: { type: 'sun', color: COLORS.stellarOrange, y: 0.55, size: 100 },\r\n        land: { type: 'fractal_mountains', color: '#080205' },\r\n        atmosphere: { stars: true, horizonGlow: true }\r\n    },\r\n    // 2. VAPORWAVE (Pink/Cyan)\r\n    'ocean_sunset_vapor': {\r\n        sky: [COLORS.black, COLORS.deepOrbitPurple, COLORS.nebulaPink],\r\n        waterBase: COLORS.deepOrbitPurple,\r\n        waterHighlight: COLORS.auroraBlue,\r\n        sun: { type: 'grid-sun', color: [COLORS.solarPink, COLORS.auroraBlue], y: 0.5 },\r\n        land: { type: 'palms' },\r\n        atmosphere: { stars: true, grid: true }\r\n    },\r\n    // 3. PASTEL DREAM (Periwinkle/Pink)\r\n    'ocean_sunset_pastel': {\r\n        sky: [COLORS.black, COLORS.ionBlue, COLORS.nebulaPink],\r\n        waterBase: COLORS.deepOrbitPurple,\r\n        waterHighlight: COLORS.iceWhite,\r\n        sun: { type: 'sun', color: COLORS.iceWhite, y: 0.6, size: 60 },\r\n        land: { type: 'fractal_islands', color: '#151025' },\r\n        atmosphere: { stars: true, clouds: true }\r\n    },\r\n    // 4. BIOLUMINESCENT NIGHT (Mint/Black)\r\n    'ocean_night_bio': {\r\n        sky: [COLORS.black, COLORS.darkNebula],\r\n        waterBase: '#020408',\r\n        waterHighlight: COLORS.auroraMint,\r\n        sun: { type: 'none' },\r\n        land: { type: 'fractal_cliffs', color: '#020505' },\r\n        atmosphere: { stars: true, fireflies: true, biolum: true }\r\n    },\r\n    // 5. ELECTRIC STORM (Ion Blue/Purple)\r\n    'ocean_storm_electric': {\r\n        sky: [COLORS.black, COLORS.voidPurple, COLORS.ionBlue],\r\n        waterBase: '#050510',\r\n        waterHighlight: COLORS.ionBlue,\r\n        sun: { type: 'none' },\r\n        land: { type: 'fractal_cliffs', color: '#000' },\r\n        atmosphere: { storm: true, rain: true }\r\n    },\r\n    // 6. EMERALD TROPICAL (Mint/Black)\r\n    'ocean_tropical_emerald': {\r\n        sky: [COLORS.black, '#001a1a', COLORS.classicMint],\r\n        waterBase: '#000d0d',\r\n        waterHighlight: COLORS.classicMint,\r\n        sun: { type: 'none' },\r\n        land: { type: 'palms' },\r\n        atmosphere: { stars: true, clouds: true }\r\n    },\r\n    // 7. VOLCANO (Stellar Orange/Solar Pink)\r\n    'ocean_volcano': {\r\n        sky: [COLORS.black, '#2b0a1a', COLORS.stellarOrange],\r\n        waterBase: '#1a0505',\r\n        waterHighlight: COLORS.solarPink, // Hot pink lava reflection\r\n        sun: { type: 'none' },\r\n        land: { type: 'volcano' }, // Custom fractal volcano logic\r\n        atmosphere: { stars: true, ash: true }\r\n    }\r\n};\r\n\r\nconst OceanBanner = ({ themeId, starSettings }) => {\r\n    const canvasRef = useRef(null);\r\n    const [bgImage, setBgImage] = useState('');\r\n\r\n    useEffect(() => {\r\n        let theme = OCEAN_THEMES[themeId];\r\n        if (!theme) theme = OCEAN_THEMES['ocean_sunset_classic'];\r\n\r\n        const canvas = canvasRef.current;\r\n        if (!canvas) return;\r\n        const ctx = canvas.getContext('2d');\r\n\r\n        // HIGH RES KINETIC\r\n        const width = 3840;\r\n        const height = 1080;\r\n        canvas.width = width;\r\n        canvas.height = height;\r\n\r\n        const horizonY = height * 0.6; // Horizon line\r\n\r\n        // SEEDED RANDOM (Determinism)\r\n        let seed = 12345;\r\n        const rand = () => {\r\n            seed = (seed * 9301 + 49297) % 233280;\r\n            return seed / 233280;\r\n        };\r\n\r\n        // --- HELPERS ---\r\n        const drawGradient = (colors, yStop) => {\r\n            const grad = ctx.createLinearGradient(0, 0, 0, yStop);\r\n            colors.forEach((c, i) => grad.addColorStop(i / (colors.length - 1), c));\r\n            ctx.fillStyle = grad;\r\n            ctx.fillRect(0, 0, width, yStop);\r\n        };\r\n\r\n        // 1. SKY RENDER\r\n        drawGradient(theme.sky, horizonY + 50);\r\n\r\n        // 1.5. HORIZON HAZE (Atmospheric perspective)\r\n        const skyBottomColor = Array.isArray(theme.sky) ? theme.sky[theme.sky.length - 1] : theme.sky;\r\n        const haze = ctx.createLinearGradient(0, horizonY - 100, 0, horizonY + 50);\r\n        haze.addColorStop(0, 'transparent');\r\n        haze.addColorStop(0.6, skyBottomColor); // Peak haze at horizon\r\n        haze.addColorStop(1, 'transparent');\r\n        ctx.fillStyle = haze;\r\n        ctx.globalAlpha = 0.6;\r\n        ctx.fillRect(0, horizonY - 100, width, 150);\r\n        ctx.globalAlpha = 1.0;\r\n\r\n        // 2. STARS\r\n        const showStars = (starSettings?.enabled !== undefined) ? starSettings.enabled : theme.atmosphere.stars;\r\n\r\n        if (showStars) {\r\n            const starClr = starSettings?.color || COLORS.iceWhite;\r\n            ctx.fillStyle = starClr;\r\n\r\n            for (let i = 0; i < 600; i++) {\r\n                const sx = rand() * width;\r\n                const sy = rand() * (horizonY * 0.85); // Stay above haze\r\n                const size = rand() * 1.5;\r\n                const opacity = 0.3 + rand() * 0.7;\r\n\r\n                ctx.globalAlpha = opacity;\r\n\r\n                // Cinematic Star (Cross Flare) - 2% chance\r\n                if (rand() > 0.98) {\r\n                    const flareSize = size * 4;\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(sx - flareSize, sy); ctx.lineTo(sx + flareSize, sy); // Horiz\r\n                    ctx.moveTo(sx, sy - flareSize); ctx.lineTo(sx, sy + flareSize); // Vert\r\n                    ctx.strokeStyle = starClr;\r\n                    ctx.lineWidth = 0.5;\r\n                    ctx.stroke();\r\n                    // Core\r\n                    ctx.beginPath(); ctx.arc(sx, sy, size + 1, 0, Math.PI * 2); ctx.fill();\r\n                } else {\r\n                    ctx.beginPath(); ctx.arc(sx, sy, size, 0, Math.PI * 2); ctx.fill();\r\n                }\r\n            }\r\n            ctx.globalAlpha = 1.0;\r\n        }\r\n\r\n        // 3. LANDSCAPE GENERATOR (FRACTAL MOUNTAINS)\r\n        // Midpoint displacement algorithm for realistic jagged terrain\r\n        const drawFractalMountain = (yBase, color, peakHeight, roughness, startX, endX) => {\r\n            let points = [{ x: startX, y: yBase }, { x: (startX + endX) / 2, y: yBase - peakHeight }, { x: endX, y: yBase }];\r\n\r\n            // Subdivide\r\n            for (let i = 0; i < roughness; i++) {\r\n                let nextPoints = [];\r\n                for (let j = 0; j < points.length - 1; j++) {\r\n                    const p1 = points[j];\r\n                    const p2 = points[j + 1];\r\n                    const midX = (p1.x + p2.x) / 2;\r\n                    // Displacement reduces as recursion goes deeper\r\n                    const disp = (rand() - 0.5) * (peakHeight / (i + 1));\r\n                    const midY = (p1.y + p2.y) / 2 + disp;\r\n\r\n                    nextPoints.push(p1);\r\n                    nextPoints.push({ x: midX, y: midY });\r\n                }\r\n                nextPoints.push(points[points.length - 1]);\r\n                points = nextPoints;\r\n            }\r\n\r\n            // Draw Shape\r\n            ctx.fillStyle = color;\r\n            ctx.beginPath();\r\n            ctx.moveTo(points[0].x, height); // Anchor BL\r\n            points.forEach(p => ctx.lineTo(p.x, p.y));\r\n            ctx.lineTo(points[points.length - 1].x, height); // Anchor BR\r\n            ctx.fill();\r\n\r\n            // Highlight Edge (Moon/Sun light)\r\n            ctx.strokeStyle = 'rgba(255,255,255,0.05)';\r\n            ctx.lineWidth = 1;\r\n            ctx.beginPath();\r\n            points.forEach(p => ctx.lineTo(p.x, p.y));\r\n            ctx.stroke();\r\n        };\r\n\r\n        // 3.5 PALM RENDERER (Helper)\r\n        const drawDetailedPalm = (px, py, scale, flip) => {\r\n            // TRUNK (Tapered & Filled)\r\n            ctx.fillStyle = '#020102'; // Deep contour\r\n            ctx.beginPath();\r\n            const lean = flip ? -100 : 100; // More dramatic lean\r\n            const trunkHeight = 450 * scale; // Taller\r\n            const topX = px + lean * scale;\r\n            const topY = py - trunkHeight;\r\n\r\n            // Draw tapered trunk path\r\n            const baseWidth = 30 * scale;\r\n            const topWidth = 8 * scale;\r\n\r\n            ctx.moveTo(px - baseWidth / 2, py);\r\n            // Left side curve\r\n            ctx.quadraticCurveTo(px + lean / 3, py - trunkHeight / 2, topX - topWidth / 2, topY);\r\n            // Top cut\r\n            ctx.lineTo(topX + topWidth / 2, topY);\r\n            // Right side curve\r\n            ctx.quadraticCurveTo(px + lean / 3 + baseWidth, py - trunkHeight / 2, px + baseWidth / 2, py);\r\n            ctx.fill();\r\n\r\n            // LEAVES (Elongated Football Shapes)\r\n            const lx = topX;\r\n            const ly = topY;\r\n            // Fan of angles\r\n            const angles = [-0.5, 0, 0.5, 1.0, 1.5, 2.5, 3.0, 3.5, 4.0];\r\n\r\n            ctx.fillStyle = '#000804'; // Slightly greener black for leaves if we wanted, but silhouette is standard\r\n\r\n            angles.forEach(ang => {\r\n                const rad = ang + (flip ? Math.PI : 0);\r\n                const leafLen = (220 + rand() * 60) * scale;\r\n                const leafWidth = 20 * scale; // Width of the \"football\"\r\n\r\n                // Calculate Tip with Gravity Droop\r\n                const droopFactor = 0.6;\r\n                const tipX = lx + Math.cos(rad) * leafLen;\r\n                const tipY = ly + Math.sin(rad) * leafLen * droopFactor + (leafLen * 0.3); // Droop down\r\n\r\n                // Calculate Control Point (Midpoint + Arch)\r\n                // We act as if the leaf arches OUT first then falss\r\n                const midX = (lx + tipX) / 2;\r\n                const midY = (ly + tipY) / 2 - (leafLen * 0.2); // Arch up\r\n\r\n                // Perpendicular vector for width\r\n                const dx = tipX - lx;\r\n                const dy = tipY - ly;\r\n                const len = Math.sqrt(dx * dx + dy * dy);\r\n                const px = (-dy / len) * leafWidth;\r\n                const pyVector = (dx / len) * leafWidth; // renamed to avoid clash with py arg\r\n\r\n                ctx.beginPath();\r\n                ctx.moveTo(lx, ly);\r\n                // Top Curve (arches higher)\r\n                ctx.quadraticCurveTo(midX + px, midY + pyVector, tipX, tipY);\r\n                // Bottom Curve (arches lower)\r\n                ctx.quadraticCurveTo(midX - px, midY - pyVector, lx, ly);\r\n                ctx.fill();\r\n            });\r\n        };\r\n\r\n        // 3.6 VOLCANO LOGIC (Special Case)\r\n        if (theme.land?.type === 'volcano') {\r\n            // VOLCANO ON RIGHT\r\n            const cx = width * 0.75;\r\n            // 1. Mountain Body (Smaller: Peak 250, Base 500)\r\n            drawFractalMountain(horizonY, '#050101', 250, 4, cx - 500, cx + 500);\r\n\r\n            // 2. Multi-Stream Lava Flow System\r\n            const craterY = horizonY - 210; // New lower crater height for smaller volcano\r\n            const streams = 4; // Fewer rivers\r\n\r\n            for (let i = 0; i < streams; i++) {\r\n                // Fan out flows slightly\r\n                const startOffset = (i - (streams / 2)) * 15;\r\n                const endOffset = (i - (streams / 2)) * 80 + (rand() - 0.5) * 40;\r\n\r\n                // Gradient for this flow (Heat map: White -> Pink -> Transparent)\r\n                const lava = ctx.createLinearGradient(cx, craterY, cx + endOffset, horizonY);\r\n                lava.addColorStop(0, '#FFF'); // Core heat\r\n                lava.addColorStop(0.1, COLORS.stellarOrange);\r\n                lava.addColorStop(0.3, COLORS.solarPink);\r\n                lava.addColorStop(1, 'transparent'); // Fade into water/smoke\r\n\r\n                ctx.fillStyle = lava;\r\n                ctx.beginPath();\r\n                ctx.moveTo(cx + startOffset, craterY);\r\n\r\n                // Organic curves down the slope\r\n                const cp1x = cx + startOffset + (endOffset * 0.3) + (rand() - 0.5) * 30;\r\n                const cp1y = craterY + 60;\r\n                const cp2x = cx + startOffset + (endOffset * 0.7) + (rand() - 0.5) * 30;\r\n                const cp2y = craterY + 140;\r\n\r\n                // Left bank path\r\n                ctx.quadraticCurveTo(cp1x - 10, cp1y, cp2x - 15, cp2y);\r\n                ctx.lineTo(cx + endOffset - 25, horizonY);\r\n                // River width at bottom\r\n                ctx.lineTo(cx + endOffset + 25, horizonY);\r\n                // Right bank path\r\n                ctx.quadraticCurveTo(cp2x + 15, cp2y, cp1x + 10, cp1y);\r\n                ctx.lineTo(cx + startOffset + 10, craterY);\r\n                ctx.fill();\r\n            }\r\n\r\n            // 3. Eruption Glow & Sparks (Magma Chamber Effect)\r\n            const erupt = ctx.createRadialGradient(cx, craterY, 5, cx, craterY, 250);\r\n            erupt.addColorStop(0, COLORS.stellarOrange);\r\n            erupt.addColorStop(0.2, 'rgba(255, 92, 138, 0.4)'); // Solar Pink mist\r\n            erupt.addColorStop(1, 'transparent');\r\n            ctx.fillStyle = erupt;\r\n            ctx.globalAlpha = 0.7;\r\n            ctx.beginPath(); ctx.arc(cx, craterY, 250, 0, Math.PI * 2); ctx.fill();\r\n            ctx.globalAlpha = 1.0;\r\n\r\n            // Volcanic Debris/Sparks\r\n            ctx.fillStyle = '#FFF';\r\n            for (let k = 0; k < 40; k++) {\r\n                const sx = cx + (rand() - 0.5) * 100;\r\n                const sy = craterY - rand() * 150;\r\n                const sz = rand() * 2.5;\r\n                ctx.globalAlpha = rand();\r\n                ctx.beginPath(); ctx.arc(sx, sy, sz, 0, Math.PI * 2); ctx.fill();\r\n            }\r\n            ctx.globalAlpha = 1.0;\r\n\r\n            // --- TROPICAL ISLAND ON LEFT ---\r\n            const ix = width * 0.2;\r\n            // Island Base\r\n            drawFractalMountain(horizonY, '#020102', 120, 3, ix - 300, ix + 300);\r\n            // Single Palm Tree on Island\r\n            drawDetailedPalm(ix - 50, horizonY, 0.8, false);\r\n            drawDetailedPalm(ix + 80, horizonY + 20, 0.6, true);\r\n        }\r\n        else if (theme.land?.type === 'fractal_mountains') {\r\n            // Left Range\r\n            drawFractalMountain(horizonY + 50, theme.land.color, 300, 4, -100, 600);\r\n            // Right Range (Higher)\r\n            drawFractalMountain(horizonY + 50, theme.land.color, 450, 5, width - 800, width + 100);\r\n        }\r\n        else if (theme.land?.type === 'fractal_cliffs') {\r\n            // Steep jagged cliffs on sides\r\n            drawFractalMountain(horizonY + 100, theme.land.color, 600, 3, -200, 400);\r\n            drawFractalMountain(horizonY + 100, theme.land.color, 700, 4, width - 500, width + 200);\r\n        }\r\n        else if (theme.land?.type === 'fractal_islands') {\r\n            // Scattered small jagged shapes\r\n            drawFractalMountain(horizonY + 20, theme.land.color, 150, 2, 200, 500);\r\n            drawFractalMountain(horizonY + 20, theme.land.color, 120, 2, width - 600, width - 300);\r\n        }\r\n\r\n\r\n        // 4. CELESTIAL\r\n        const cx = width / 2;\r\n        if (theme.sun && theme.sun.type !== 'none') {\r\n            const { type, color, y, size = 150 } = theme.sun;\r\n            const cy = height * y;\r\n\r\n            const glow = ctx.createRadialGradient(cx, cy, size * 0.5, cx, cy, size * 4);\r\n            const glowColor = Array.isArray(color) ? color[0] : color;\r\n            glow.addColorStop(0, glowColor);\r\n            glow.addColorStop(1, 'transparent');\r\n            ctx.fillStyle = glow; ctx.globalAlpha = 0.5;\r\n            ctx.beginPath(); ctx.arc(cx, cy, size * 4, 0, Math.PI * 2); ctx.fill();\r\n            ctx.globalAlpha = 1.0;\r\n\r\n            if (type === 'sun' || type === 'moon') {\r\n                ctx.fillStyle = Array.isArray(color) ? color[0] : color;\r\n                ctx.beginPath(); ctx.arc(cx, cy, size, 0, Math.PI * 2); ctx.fill();\r\n            }\r\n            else if (type === 'grid-sun') {\r\n                const g = ctx.createLinearGradient(0, cy - size, 0, cy + size);\r\n                g.addColorStop(0, color[0]); g.addColorStop(1, color[1]);\r\n                ctx.fillStyle = g; ctx.beginPath(); ctx.arc(cx, cy, size, 0, Math.PI * 2); ctx.fill();\r\n                ctx.fillStyle = theme.sky[theme.sky.length - 1];\r\n                for (let i = 0; i < 10; i++) {\r\n                    const barH = 5 + i * 4; const barY = cy + (i * 25) - 20;\r\n                    if (barY < cy + size) ctx.fillRect(cx - size - 10, barY, size * 2 + 20, barH);\r\n                }\r\n            }\r\n        }\r\n\r\n        // 5. PROCEDURAL WATER\r\n        const waterStart = horizonY;\r\n        const waterEnd = height;\r\n        const totalHeight = waterEnd - waterStart;\r\n\r\n        ctx.fillStyle = theme.waterBase;\r\n        ctx.fillRect(0, waterStart, width, totalHeight);\r\n\r\n        const highlightColor = theme.waterHighlight;\r\n        let y = waterStart;\r\n        let bandHeight = 1;\r\n\r\n        while (y < waterEnd) {\r\n            const progress = (y - waterStart) / totalHeight;\r\n            bandHeight = 1 + (progress * progress * 8);\r\n            const gap = 2 + (progress * 15);\r\n\r\n            // Dynamic Reflection Width (Narrow at top, wide at bottom)\r\n            let reflectWidth = 150 + (progress * 1000);\r\n            let reflectXMin = cx - reflectWidth / 2;\r\n\r\n            ctx.fillStyle = highlightColor;\r\n\r\n            if (theme.atmosphere.biolum) {\r\n                // BIOLUMINESCENCE OVERHAUL: High Density, Electric Glow\r\n                // Scale effect by proximity (progress 0..1)\r\n\r\n                // 1. Base Ambient Glow (The water itself radiates slightly)\r\n                ctx.fillStyle = COLORS.auroraMint;\r\n                ctx.globalAlpha = 0.05 * progress;\r\n                ctx.fillRect(0, y, width, bandHeight);\r\n\r\n                // 2. Active Wave Crests (The breaking waves glow)\r\n                if (rand() > 0.6) { // 40% of waves light up\r\n                    const intensity = rand();\r\n                    const crestWidth = 100 + rand() * 400 * progress;\r\n                    const crestX = rand() * width;\r\n\r\n                    // Gradient for soft bloom stroke\r\n                    const glow = ctx.createLinearGradient(crestX, y, crestX + crestWidth, y);\r\n                    glow.addColorStop(0, 'transparent');\r\n                    glow.addColorStop(0.2, COLORS.classicMint);\r\n                    glow.addColorStop(0.5, '#FFF'); // Hot white core\r\n                    glow.addColorStop(0.8, COLORS.auroraMint);\r\n                    glow.addColorStop(1, 'transparent');\r\n\r\n                    ctx.fillStyle = glow;\r\n                    ctx.globalAlpha = 0.4 + (intensity * 0.4); // 0.4 to 0.8 opacity\r\n                    ctx.fillRect(crestX, y, crestWidth, bandHeight);\r\n                }\r\n\r\n                // 3. \"Plankton Blooms\" (Intense hot spots)\r\n                if (rand() > 0.92) { // Rare bright spots\r\n                    const bx = rand() * width;\r\n                    const size = 10 + rand() * 50 * progress;\r\n\r\n                    // Radial bloom for the spot\r\n                    const spotGlow = ctx.createRadialGradient(bx, y, 0, bx, y, size);\r\n                    spotGlow.addColorStop(0, '#FFF');\r\n                    spotGlow.addColorStop(0.4, COLORS.auroraMint);\r\n                    spotGlow.addColorStop(1, 'transparent');\r\n\r\n                    ctx.fillStyle = spotGlow;\r\n                    ctx.globalAlpha = 0.9;\r\n                    ctx.beginPath();\r\n                    ctx.ellipse(bx, y, size, bandHeight * 2, 0, 0, Math.PI * 2);\r\n                    ctx.fill();\r\n                }\r\n\r\n            } else {\r\n                // 1. Ambient Sparkle (Random waves catching light)\r\n                if (rand() > 0.7) {\r\n                    ctx.globalAlpha = Math.max(0, 0.3 - progress) * 0.5; // Fades out near camera\r\n                    ctx.fillRect(rand() * width, y, rand() * 150, bandHeight);\r\n                }\r\n\r\n                // 2. Main Sun Pillar Reflection\r\n                // Stronger at horizon, spreading out\r\n                const intensity = (0.3 + (0.7 * (1 - progress))); // Brighter near horizon\r\n                ctx.globalAlpha = intensity * 0.8;\r\n\r\n                // Jitter for wave effect\r\n                const jitter = (rand() - 0.5) * 60;\r\n                const waveX = reflectXMin + jitter;\r\n                const waveW = reflectWidth - jitter * 2;\r\n                ctx.fillRect(waveX, y, waveW, bandHeight);\r\n\r\n                // 3. Hot Core (Center of reflection)\r\n                const coreW = waveW * 0.3;\r\n                ctx.globalAlpha = intensity; // Full opacity\r\n                ctx.fillRect(cx - coreW / 2 + jitter, y, coreW, bandHeight);\r\n            }\r\n            y += bandHeight + gap;\r\n        }\r\n        ctx.globalAlpha = 1.0;\r\n\r\n        // 6. PALMS (If theme requests - handled separately from fractal mountains)\r\n        if (theme.land?.type === 'palms') {\r\n            // Raised bases: 'height' instead of 'height+50' to show more trunk\r\n            drawDetailedPalm(150, height, 1.2, false);\r\n            drawDetailedPalm(width - 100, height, 1.4, true);\r\n        }\r\n\r\n        // 7. WEATHER\r\n        if (theme.atmosphere.storm) {\r\n            // Lightning\r\n            if (theme.atmosphere.storm) { // Double check\r\n                ctx.strokeStyle = COLORS.ionBlue;\r\n                ctx.lineWidth = 3; ctx.shadowBlur = 30; ctx.shadowColor = COLORS.ionBlue;\r\n                ctx.beginPath();\r\n                const lStart = rand() * width; ctx.moveTo(lStart, 0);\r\n                let lx = lStart; let ly = 0;\r\n                while (ly < height * 0.6) { lx += (rand() - 0.5) * 80; ly += 20 + rand() * 40; ctx.lineTo(lx, ly); }\r\n                ctx.stroke(); ctx.shadowBlur = 0;\r\n            }\r\n        }\r\n\r\n        // 8. VIGNETTE\r\n        const vig = ctx.createLinearGradient(0, 0, 0, height);\r\n        vig.addColorStop(0, 'rgba(0,0,0,0.85)');\r\n        vig.addColorStop(0.3, 'transparent');\r\n        vig.addColorStop(0.7, 'transparent');\r\n        vig.addColorStop(1, 'rgba(0,0,0,0.4)');\r\n        ctx.fillStyle = vig; ctx.fillRect(0, 0, width, height);\r\n\r\n        setBgImage(canvas.toDataURL());\r\n\r\n    }, [themeId, starSettings]);\r\n\r\n    return (\r\n        <div style={{\r\n            position: 'absolute', inset: 0, overflow: 'hidden', pointerEvents: 'none'\r\n        }}>\r\n            <div style={{\r\n                width: '100%', height: '100%',\r\n                backgroundImage: `url(${bgImage})`,\r\n                backgroundSize: 'cover', backgroundPosition: 'center'\r\n            }} />\r\n            <canvas ref={canvasRef} style={{ display: 'none' }} />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default OceanBanner;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\search\\ColorWheelSearch.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { FaPalette, FaTimes } from 'react-icons/fa';\r\n\r\n\r\nconst ColorWheelSearch = ({ onColorSelect, selectedColor, onClear }) => {\r\n    const [showPalette, setShowPalette] = useState(false);\r\n    const [hueValue, setHueValue] = useState(0);\r\n    const [saturation, setSaturation] = useState(100);\r\n    const [lightness, setLightness] = useState(50);\r\n\r\n\r\n\r\n    const handleCustomColor = () => {\r\n        const h = hueValue;\r\n        const s = saturation;\r\n        const l = lightness;\r\n\r\n        // Convert HSL to RGB\r\n        const c = (1 - Math.abs(2 * l / 100 - 1)) * s / 100;\r\n        const x = c * (1 - Math.abs((h / 60) % 2 - 1));\r\n        const m = l / 100 - c / 2;\r\n\r\n        let r = 0, g = 0, b = 0;\r\n\r\n        if (h >= 0 && h < 60) {\r\n            r = c; g = x; b = 0;\r\n        } else if (h >= 60 && h < 120) {\r\n            r = x; g = c; b = 0;\r\n        } else if (h >= 120 && h < 180) {\r\n            r = 0; g = c; b = x;\r\n        } else if (h >= 180 && h < 240) {\r\n            r = 0; g = x; b = c;\r\n        } else if (h >= 240 && h < 300) {\r\n            r = x; g = 0; b = c;\r\n        } else {\r\n            r = c; g = 0; b = x;\r\n        }\r\n\r\n        r = Math.round((r + m) * 255);\r\n        g = Math.round((g + m) * 255);\r\n        b = Math.round((b + m) * 255);\r\n\r\n        const hex = '#' + [r, g, b].map(x => {\r\n            const h = x.toString(16);\r\n            return h.length === 1 ? '0' + h : h;\r\n        }).join('');\r\n\r\n        onColorSelect(hex);\r\n        setShowPalette(false);\r\n    };\r\n\r\n    return (\r\n        <div style={{ position: 'relative' }}>\r\n            {/* Color Button */}\r\n            <button\r\n                onClick={() => setShowPalette(!showPalette)}\r\n                style={{\r\n                    padding: '0 1rem',\r\n                    height: '32px',\r\n                    background: selectedColor || '#222',\r\n                    color: selectedColor ? '#fff' : '#888',\r\n                    border: selectedColor ? `2px solid ${selectedColor}` : '1px solid #333',\r\n                    borderRadius: '8px',\r\n                    cursor: 'pointer',\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    gap: '0.5rem',\r\n                    fontWeight: '600',\r\n                    fontSize: '0.9rem',\r\n                    transition: 'all 0.2s',\r\n                    textShadow: selectedColor ? '0 0 4px rgba(0,0,0,0.8)' : 'none'\r\n                }}\r\n            >\r\n                <FaPalette />\r\n                {selectedColor ? 'Color Selected' : 'Search by Color'}\r\n            </button>\r\n\r\n            {/* Clear Button */}\r\n            {selectedColor && (\r\n                <button\r\n                    onClick={(e) => {\r\n                        e.stopPropagation();\r\n                        onClear();\r\n                    }}\r\n                    style={{\r\n                        position: 'absolute',\r\n                        top: '-8px',\r\n                        right: '-8px',\r\n                        width: '24px',\r\n                        height: '24px',\r\n                        borderRadius: '50%',\r\n                        background: '#ff4444',\r\n                        border: '2px solid #000',\r\n                        color: '#fff',\r\n                        cursor: 'pointer',\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        justifyContent: 'center',\r\n                        fontSize: '0.7rem',\r\n                        zIndex: 10\r\n                    }}\r\n                >\r\n                    <FaTimes />\r\n                </button>\r\n            )}\r\n\r\n            {/* Color Palette Modal */}\r\n            {showPalette && (\r\n                <div style={{\r\n                    position: 'absolute',\r\n                    top: '100%',\r\n                    left: 0,\r\n                    marginTop: '0.5rem',\r\n                    background: '#111',\r\n                    border: '1px solid #333',\r\n                    borderRadius: '12px',\r\n                    padding: '1rem',\r\n                    zIndex: 1000,\r\n                    minWidth: '320px',\r\n                    boxShadow: '0 8px 32px rgba(0,0,0,0.8)'\r\n                }}>\r\n                    {/* Header */}\r\n                    <div style={{\r\n                        display: 'flex',\r\n                        justifyContent: 'space-between',\r\n                        alignItems: 'center',\r\n                        marginBottom: '1rem',\r\n                        paddingBottom: '0.75rem',\r\n                        borderBottom: '1px solid #222'\r\n                    }}>\r\n                        <h3 style={{ margin: 0, fontSize: '1rem', color: '#fff' }}>\r\n                            Select Color\r\n                        </h3>\r\n                        <button\r\n                            onClick={() => setShowPalette(false)}\r\n                            style={{\r\n                                background: 'transparent',\r\n                                border: 'none',\r\n                                color: '#888',\r\n                                cursor: 'pointer',\r\n                                padding: '0.25rem'\r\n                            }}\r\n                        >\r\n                            <FaTimes />\r\n                        </button>\r\n                    </div>\r\n\r\n\r\n\r\n                    {/* Custom Color Sliders */}\r\n                    <div style={{\r\n                        paddingTop: '1rem',\r\n                        borderTop: '1px solid #222'\r\n                    }}>\r\n                        <div style={{\r\n                            fontSize: '0.85rem',\r\n                            color: '#888',\r\n                            marginBottom: '0.75rem'\r\n                        }}>\r\n                            Custom Color\r\n                        </div>\r\n\r\n                        {/* Hue Slider */}\r\n                        <div style={{ marginBottom: '0.75rem' }}>\r\n                            <div style={{\r\n                                display: 'flex',\r\n                                justifyContent: 'space-between',\r\n                                marginBottom: '0.25rem',\r\n                                fontSize: '0.75rem',\r\n                                color: '#666'\r\n                            }}>\r\n                                <span>Hue</span>\r\n                                <span>{hueValue}┬░</span>\r\n                            </div>\r\n                            <input\r\n                                type=\"range\"\r\n                                min=\"0\"\r\n                                max=\"360\"\r\n                                value={hueValue}\r\n                                onChange={(e) => setHueValue(parseInt(e.target.value))}\r\n                                style={{\r\n                                    width: '100%',\r\n                                    height: '8px',\r\n                                    borderRadius: '4px',\r\n                                    background: 'linear-gradient(to right, #ff0000, #ffff00, #00ff00, #00ffff, #0000ff, #ff00ff, #ff0000)',\r\n                                    outline: 'none',\r\n                                    cursor: 'pointer'\r\n                                }}\r\n                            />\r\n                        </div>\r\n\r\n                        {/* Saturation Slider */}\r\n                        <div style={{ marginBottom: '0.75rem' }}>\r\n                            <div style={{\r\n                                display: 'flex',\r\n                                justifyContent: 'space-between',\r\n                                marginBottom: '0.25rem',\r\n                                fontSize: '0.75rem',\r\n                                color: '#666'\r\n                            }}>\r\n                                <span>Saturation</span>\r\n                                <span>{saturation}%</span>\r\n                            </div>\r\n                            <input\r\n                                type=\"range\"\r\n                                min=\"0\"\r\n                                max=\"100\"\r\n                                value={saturation}\r\n                                onChange={(e) => setSaturation(parseInt(e.target.value))}\r\n                                style={{\r\n                                    width: '100%',\r\n                                    height: '8px',\r\n                                    borderRadius: '4px',\r\n                                    background: `linear-gradient(to right, hsl(${hueValue}, 0%, 50%), hsl(${hueValue}, 100%, 50%))`,\r\n                                    outline: 'none',\r\n                                    cursor: 'pointer'\r\n                                }}\r\n                            />\r\n                        </div>\r\n\r\n                        {/* Lightness Slider */}\r\n                        <div style={{ marginBottom: '1rem' }}>\r\n                            <div style={{\r\n                                display: 'flex',\r\n                                justifyContent: 'space-between',\r\n                                marginBottom: '0.25rem',\r\n                                fontSize: '0.75rem',\r\n                                color: '#666'\r\n                            }}>\r\n                                <span>Lightness</span>\r\n                                <span>{lightness}%</span>\r\n                            </div>\r\n                            <input\r\n                                type=\"range\"\r\n                                min=\"0\"\r\n                                max=\"100\"\r\n                                value={lightness}\r\n                                onChange={(e) => setLightness(parseInt(e.target.value))}\r\n                                style={{\r\n                                    width: '100%',\r\n                                    height: '8px',\r\n                                    borderRadius: '4px',\r\n                                    background: `linear-gradient(to right, hsl(${hueValue}, ${saturation}%, 0%), hsl(${hueValue}, ${saturation}%, 50%), hsl(${hueValue}, ${saturation}%, 100%))`,\r\n                                    outline: 'none',\r\n                                    cursor: 'pointer'\r\n                                }}\r\n                            />\r\n                        </div>\r\n\r\n                        {/* Preview and Apply */}\r\n                        <div style={{\r\n                            display: 'flex',\r\n                            gap: '0.75rem',\r\n                            alignItems: 'center'\r\n                        }}>\r\n                            <div style={{\r\n                                flex: 1,\r\n                                height: '40px',\r\n                                borderRadius: '8px',\r\n                                background: `hsl(${hueValue}, ${saturation}%, ${lightness}%)`,\r\n                                border: '2px solid #222',\r\n                                boxShadow: '0 2px 8px rgba(0,0,0,0.3)'\r\n                            }} />\r\n                            <button\r\n                                onClick={handleCustomColor}\r\n                                style={{\r\n                                    padding: '0.5rem 1rem',\r\n                                    background: '#7FFFD4',\r\n                                    color: '#000',\r\n                                    border: 'none',\r\n                                    borderRadius: '8px',\r\n                                    fontWeight: 'bold',\r\n                                    cursor: 'pointer',\r\n                                    fontSize: '0.85rem'\r\n                                }}\r\n                            >\r\n                                Apply\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ColorWheelSearch;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\search\\CurrentAppEventsBox.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaArrowRight' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":59,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":71}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { FaCalendarAlt, FaFire, FaTrophy, FaLeaf, FaStar, FaArrowRight, FaPlusSquare } from 'react-icons/fa';\r\nimport { EventService } from '@/services/EventService';\r\nimport { useThemeStore } from '@/core/store/useThemeStore';\r\n\r\nconst CATEGORIES = [\r\n    { id: 'all', label: 'All Events', icon: FaStar },\r\n    { id: 'weekly', label: 'Weekly Style', icon: FaFire },\r\n    { id: 'daily', label: 'Daily Feature', icon: FaCalendarAlt },\r\n    { id: 'contest', label: 'Contests', icon: FaTrophy },\r\n    { id: 'seasonal', label: 'Seasonal', icon: FaLeaf },\r\n    { id: 'special', label: 'Special', icon: FaStar },\r\n];\r\n\r\nconst CurrentAppEventsBox = () => {\r\n    const navigate = useNavigate();\r\n    const { accentColor } = useThemeStore();\r\n    const [events, setEvents] = useState([]);\r\n    const [filter, setFilter] = useState('all');\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        const loadEvents = async () => {\r\n            setLoading(true);\r\n            const data = await EventService.getVisibleEvents();\r\n            setEvents(data);\r\n            setLoading(false);\r\n        };\r\n        loadEvents();\r\n    }, []);\r\n\r\n    const filteredEvents = events.filter(e => {\r\n        if (filter === 'all') return true;\r\n        return e.category === filter;\r\n    });\r\n\r\n    if (!loading && events.length === 0) return null;\r\n\r\n    return (\r\n        <div style={{\r\n            marginBottom: '1.5rem',\r\n            background: 'rgba(0, 0, 0, 0.4)',\r\n            borderRadius: '16px',\r\n            border: `1px solid ${accentColor}40`, // Slightly more visible border\r\n            boxShadow: '0 4px 24px rgba(0, 0, 0, 0.4), inset 0 0 20px rgba(127, 255, 212, 0.05)',\r\n            backdropFilter: 'blur(12px)',\r\n            WebkitBackdropFilter: 'blur(12px)',\r\n            overflow: 'hidden',\r\n            padding: '1rem'\r\n        }}>\r\n            {/* Header */}\r\n            <div style={{\r\n                display: 'flex',\r\n                justifyContent: 'space-between',\r\n                alignItems: 'center',\r\n                marginBottom: '1rem'\r\n            }}>\r\n                <h2 style={{\r\n                    margin: 0,\r\n                    fontSize: '0.95rem',\r\n                    fontWeight: 800,\r\n                    fontFamily: 'var(--font-family-heading)',\r\n                    letterSpacing: '0.1em',\r\n                    textTransform: 'uppercase',\r\n                    color: accentColor,\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    gap: '0.5rem'\r\n                }}>\r\n                    <FaStar size={14} /> Current App Events\r\n                </h2>\r\n            </div>\r\n\r\n            {/* Category Chips */}\r\n            <div style={{\r\n                display: 'flex',\r\n                gap: '0.5rem',\r\n                marginBottom: '1rem',\r\n                overflowX: 'auto',\r\n                paddingBottom: '0.5rem',\r\n                scrollbarWidth: 'none',\r\n                msOverflowStyle: 'none'\r\n            }}>\r\n                {CATEGORIES.map(cat => {\r\n                    const Icon = cat.icon;\r\n                    const isActive = filter === cat.id;\r\n                    return (\r\n                        <button\r\n                            key={cat.id}\r\n                            onClick={() => setFilter(cat.id)}\r\n                            style={{\r\n                                padding: '0.4rem 0.8rem',\r\n                                borderRadius: '20px',\r\n                                background: isActive ? accentColor : 'rgba(255,255,255,0.05)',\r\n                                color: isActive ? '#000' : '#fff',\r\n                                border: 'none',\r\n                                fontSize: '0.75rem',\r\n                                fontWeight: isActive ? 'bold' : 'normal',\r\n                                cursor: 'pointer',\r\n                                whiteSpace: 'nowrap',\r\n                                display: 'flex',\r\n                                alignItems: 'center',\r\n                                gap: '0.4rem',\r\n                                transition: 'all 0.2s'\r\n                            }}\r\n                        >\r\n                            <Icon size={12} /> {cat.label}\r\n                        </button>\r\n                    );\r\n                })}\r\n            </div>\r\n\r\n            {/* Event Tiles - Horizontal Scroll */}\r\n            <div style={{\r\n                display: 'flex',\r\n                gap: '1rem',\r\n                overflowX: 'auto',\r\n                paddingBottom: '0.5rem',\r\n                scrollbarWidth: 'thin',\r\n                scrollbarColor: `${accentColor}40 transparent`\r\n            }}>\r\n                {filteredEvents.length === 0 ? (\r\n                    <div style={{ padding: '1rem', color: '#888', fontSize: '0.85rem', fontStyle: 'italic' }}>\r\n                        No active events in this category.\r\n                    </div>\r\n                ) : (\r\n                    filteredEvents.map(event => (\r\n                        <div key={event.id} style={{\r\n                            minWidth: '240px',\r\n                            maxWidth: '240px',\r\n                            background: 'rgba(255,255,255,0.03)',\r\n                            borderRadius: '12px',\r\n                            border: '1px solid rgba(255,255,255,0.1)',\r\n                            display: 'flex',\r\n                            flexDirection: 'column',\r\n                            overflow: 'hidden'\r\n                        }}>\r\n                            {/* Simple Visual Banner (can be image if event has one) */}\r\n                            <div style={{\r\n                                height: '60px',\r\n                                background: `linear-gradient(135deg, ${accentColor}20 0%, transparent 100%)`,\r\n                                display: 'flex',\r\n                                alignItems: 'center',\r\n                                justifyContent: 'center',\r\n                                borderBottom: '1px solid rgba(255,255,255,0.05)'\r\n                            }}>\r\n                                <span style={{ fontSize: '2rem', opacity: 0.2 }}>\r\n                                    {event.category === 'daily' ? <FaCalendarAlt /> : <FaTrophy />}\r\n                                </span>\r\n                            </div>\r\n\r\n                            <div style={{ padding: '0.8rem', display: 'flex', flexDirection: 'column', flex: 1 }}>\r\n                                <div style={{\r\n                                    textTransform: 'uppercase',\r\n                                    fontSize: '0.65rem',\r\n                                    color: accentColor,\r\n                                    fontWeight: 'bold',\r\n                                    marginBottom: '0.3rem'\r\n                                }}>\r\n                                    {event.category}\r\n                                </div>\r\n                                <h3 style={{ margin: '0 0 0.3rem 0', fontSize: '0.9rem', color: '#fff' }}>\r\n                                    {event.name}\r\n                                </h3>\r\n                                <div style={{ display: 'flex', gap: '0.5rem', alignItems: 'center', marginBottom: '0.5rem' }}>\r\n                                    {event.tag && (\r\n                                        <div style={{\r\n                                            color: '#aaa',\r\n                                            fontSize: '0.8rem',\r\n                                            fontFamily: 'monospace'\r\n                                        }}>\r\n                                            #{event.tag}\r\n                                        </div>\r\n                                    )}\r\n                                    {event.startDate && (\r\n                                        <div style={{ fontSize: '0.7rem', color: '#888' }}>\r\n                                            {/* Simple date formatter */}\r\n                                            {event.startDate.toDate().toLocaleDateString(undefined, { month: 'short', day: 'numeric' })}\r\n                                            {event.endDate && ` - ${event.endDate.toDate().toLocaleDateString(undefined, { month: 'short', day: 'numeric' })}`}\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                                <p style={{\r\n                                    margin: '0 0 0.8rem 0',\r\n                                    fontSize: '0.75rem',\r\n                                    color: '#ccc',\r\n                                    lineHeight: '1.4',\r\n                                    display: '-webkit-box',\r\n                                    WebkitLineClamp: 2,\r\n                                    WebkitBoxOrient: 'vertical',\r\n                                    overflow: 'hidden'\r\n                                }}>\r\n                                    {event.description}\r\n                                </p>\r\n\r\n                                <div style={{ marginTop: 'auto', display: 'flex', gap: '0.5rem' }}>\r\n                                    <button\r\n                                        onClick={() => navigate(`/events/${event.id}`)}\r\n                                        style={{\r\n                                            flex: 1,\r\n                                            padding: '0.5rem',\r\n                                            background: 'rgba(255,255,255,0.1)',\r\n                                            border: 'none',\r\n                                            borderRadius: '6px',\r\n                                            color: '#fff',\r\n                                            fontSize: '0.75rem',\r\n                                            cursor: 'pointer',\r\n                                            fontWeight: 'bold'\r\n                                        }}\r\n                                    >\r\n                                        View Feed\r\n                                    </button>\r\n\r\n                                    {/* Show Create Post if active and has tag */}\r\n                                    {event.active && event.tag && (\r\n                                        <button\r\n                                            onClick={() => navigate(`/create-post?tag=${event.tag}`)}\r\n                                            style={{\r\n                                                padding: '0.5rem',\r\n                                                background: accentColor,\r\n                                                border: 'none',\r\n                                                borderRadius: '6px',\r\n                                                color: '#000',\r\n                                                fontSize: '0.75rem',\r\n                                                cursor: 'pointer',\r\n                                                display: 'flex',\r\n                                                alignItems: 'center',\r\n                                                justifyContent: 'center'\r\n                                            }}\r\n                                            title=\"Create Post for Event\"\r\n                                        >\r\n                                            <FaPlusSquare />\r\n                                        </button>\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    ))\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CurrentAppEventsBox;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\search\\SearchFilters.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useRef } from 'react';\r\nimport { FaSortAmountDown, FaTh, FaList } from 'react-icons/fa';\r\nimport { SORT_OPTIONS } from '@/core/constants/searchFilters';\r\nimport PSButton from '@/components/PSButton';\r\n\r\nconst SearchFilters = ({\r\n    sortBy,\r\n    setSortBy,\r\n    viewMode,\r\n    setViewMode,\r\n    isSortDropdownOpen,\r\n    setIsSortDropdownOpen\r\n}) => {\r\n    const sortDropdownRef = useRef(null);\r\n\r\n    return (\r\n        <div style={{\r\n            display: 'flex',\r\n            gap: '0.5rem',\r\n            alignItems: 'center',\r\n            flexWrap: 'wrap'\r\n        }}>\r\n            {/* Sort Dropdown - Custom Implementation */}\r\n            <div ref={sortDropdownRef} style={{ position: 'relative', marginRight: '0.5rem' }}>\r\n                <PSButton\r\n                    variant=\"mint\"\r\n                    size=\"sm\"\r\n                    active={isSortDropdownOpen}\r\n                    onClick={() => setIsSortDropdownOpen(!isSortDropdownOpen)}\r\n                    style={{ minWidth: '140px', justifyContent: 'space-between', height: '32px' }}\r\n                >\r\n                    <span>{SORT_OPTIONS.find(opt => opt.id === sortBy)?.label || 'Sort By'}</span>\r\n                    <FaSortAmountDown style={{ fontSize: '0.8rem', opacity: 0.8 }} />\r\n                </PSButton>\r\n\r\n                {/* Dropdown Menu */}\r\n                {isSortDropdownOpen && (\r\n                    <div style={{\r\n                        position: 'absolute',\r\n                        top: 'calc(100% + 0.5rem)',\r\n                        right: 0,\r\n                        width: '180px',\r\n                        background: '#000',\r\n                        border: '1px solid var(--ice-mint)',\r\n                        borderRadius: '12px',\r\n                        boxShadow: '0 0 20px rgba(127, 255, 212, 0.2), 0 10px 30px rgba(0,0,0,0.8)',\r\n                        zIndex: 100,\r\n                        overflow: 'hidden',\r\n                        animation: 'fadeIn 0.2s ease-out'\r\n                    }}>\r\n                        {SORT_OPTIONS.map(opt => (\r\n                            <button\r\n                                key={opt.id}\r\n                                onClick={() => {\r\n                                    setSortBy(opt.id);\r\n                                    setIsSortDropdownOpen(false);\r\n                                }}\r\n                                style={{\r\n                                    width: '100%',\r\n                                    textAlign: 'left',\r\n                                    padding: '0.8rem 1rem',\r\n                                    background: sortBy === opt.id ? 'rgba(127, 255, 212, 0.1)' : 'transparent',\r\n                                    border: 'none',\r\n                                    borderBottom: '1px solid rgba(255, 255, 255, 0.05)',\r\n                                    color: sortBy === opt.id ? 'var(--ice-mint)' : '#fff',\r\n                                    fontSize: '0.85rem',\r\n                                    fontFamily: \"'Rajdhani', sans-serif\",\r\n                                    fontWeight: sortBy === opt.id ? '600' : '500',\r\n                                    cursor: 'pointer',\r\n                                    transition: 'all 0.2s',\r\n                                    display: 'flex',\r\n                                    alignItems: 'center',\r\n                                    justifyContent: 'space-between'\r\n                                }}\r\n                                onMouseEnter={(e) => {\r\n                                    if (sortBy !== opt.id) {\r\n                                        e.currentTarget.style.background = 'rgba(255, 255, 255, 0.05)';\r\n                                        e.currentTarget.style.color = 'var(--ice-mint)';\r\n                                    }\r\n                                }}\r\n                                onMouseLeave={(e) => {\r\n                                    if (sortBy !== opt.id) {\r\n                                        e.currentTarget.style.background = 'transparent';\r\n                                        e.currentTarget.style.color = '#fff';\r\n                                    }\r\n                                }}\r\n                            >\r\n                                {opt.label}\r\n                                {sortBy === opt.id && <div style={{ width: '6px', height: '6px', borderRadius: '50%', background: 'var(--ice-mint)', boxShadow: '0 0 5px var(--ice-mint)' }} />}\r\n                            </button>\r\n                        ))}\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n\r\n\r\n            <PSButton\r\n                variant=\"mint\"\r\n                size=\"sm\"\r\n                active={viewMode === 'grid'}\r\n                onClick={() => setViewMode('grid')}\r\n                icon={<FaTh />}\r\n                style={{ padding: '0.6rem', height: '32px' }}\r\n            />\r\n            <PSButton\r\n                variant=\"mint\"\r\n                size=\"sm\"\r\n                active={viewMode === 'feed'}\r\n                onClick={() => setViewMode('feed')}\r\n                icon={<FaList />}\r\n                style={{ padding: '0.6rem', height: '32px' }}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default SearchFilters;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\search\\SearchHeader.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\search\\SearchLayoutWrapper.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport SearchPanels from '@/components/SearchPanels';\r\n\r\nconst SearchLayoutWrapper = ({ children, ...props }) => {\r\n    return (\r\n        <SearchPanels {...props}>\r\n            {children}\r\n        </SearchPanels>\r\n    );\r\n};\r\n\r\nexport default SearchLayoutWrapper;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\search\\SearchModeTabs.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { FaCamera, FaImage, FaLayerGroup, FaTrophy, FaCalendar, FaUsers, FaIdCard, FaUniversity } from 'react-icons/fa';\r\nimport ModernIcon from '@/components/ModernIcon';\r\nimport PSButton from '@/components/PSButton';\r\n\r\nimport { isFeatureEnabled } from '@/config/featureFlags';\r\n\r\nconst SearchModeTabs = ({ currentMode, setCurrentMode, isMobile }) => {\r\n    return (\r\n        <div className=\"search-mode-switcher\" style={{\r\n            display: 'flex',\r\n            gap: isMobile ? '0.15rem' : '1rem',\r\n            marginBottom: isMobile ? '0' : '0.25rem',\r\n            overflowX: 'auto',\r\n            scrollbarWidth: 'none',\r\n            msOverflowStyle: 'none',\r\n            justifyContent: isMobile ? 'space-between' : 'flex-start'\r\n        }}>\r\n            <style>{`\r\n                @media (max-width: 1024px) {\r\n                    .tab-label {\r\n                        display: none !important;\r\n                    }\r\n                    .search-mode-switcher button {\r\n                        background: transparent !important;\r\n                        border: none !important;\r\n                        box-shadow: none !important;\r\n                    }\r\n                }\r\n            `}</style>\r\n            {[\r\n                { key: 'posts', icon: FaCamera, label: 'Posts', enabled: true },\r\n                { key: 'galleries', icon: FaImage, label: 'Studios', enabled: isFeatureEnabled('GALLERIES') },\r\n                { key: 'collections', icon: FaLayerGroup, label: 'Collections', enabled: isFeatureEnabled('COLLECTIONS') },\r\n                { key: 'museums', icon: FaUniversity, label: 'Museums', enabled: isFeatureEnabled('MUSEUMS') },\r\n                { key: 'contests', icon: FaTrophy, label: 'Contests', enabled: isFeatureEnabled('CONTESTS') },\r\n                { key: 'events', icon: FaCalendar, label: 'Events', enabled: isFeatureEnabled('EVENTS') },\r\n                { key: 'users', icon: FaUsers, label: 'Users', enabled: true },\r\n                { key: 'spacecards', icon: FaIdCard, label: 'SpaceCards', enabled: isFeatureEnabled('SPACECARDS_CREATE') }\r\n            ].filter(mode => mode.enabled).map(mode => (\r\n                <PSButton\r\n                    key={mode.key}\r\n                    variant=\"mint\"\r\n                    size=\"sm\"\r\n                    active={currentMode === mode.key}\r\n                    onClick={() => setCurrentMode(mode.key)}\r\n                    style={{\r\n                        height: '32px',\r\n                        padding: isMobile ? '0 0.2rem' : '0.5rem 1.25rem',\r\n                        flex: isMobile ? '1' : undefined,\r\n                        justifyContent: 'center',\r\n                        minWidth: isMobile ? '28px' : undefined\r\n                    }}\r\n                    icon={<ModernIcon icon={mode.icon} size={14} glow={currentMode === mode.key} />}\r\n                >\r\n                    <span className=\"tab-label\">{!isMobile && mode.label}</span>\r\n                </PSButton>\r\n            ))}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default SearchModeTabs;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\search\\SearchResults.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { FaRocket } from 'react-icons/fa';\r\nimport StarBackground from '@/components/StarBackground';\r\nimport GridPostCard from '@/components/GridPostCard';\r\nimport FeedPostCard from '@/components/FeedPostCard';\r\nimport UserCard from '@/components/UserCard';\r\nimport GalleryCard from '@/components/ui/cards/GalleryCard';\r\nimport CollectionCard from '@/components/CollectionCard';\r\nimport ContestCard from '@/components/ContestCard';\r\nimport EventCard from '@/components/EventCard';\r\nimport SpaceCard from '@/components/SpaceCard';\r\nimport PSButton from '@/components/PSButton';\r\n\r\nconst SearchResults = ({\r\n    viewMode,\r\n    currentMode,\r\n    results,\r\n    isMobile,\r\n    selectedOrientation,\r\n    selectedAspectRatio,\r\n    isSearching,\r\n    hasSearched,\r\n    error,\r\n    performSearch,\r\n    setSearchTerm,\r\n    setSelectedTags,\r\n    setSelectedPark,\r\n    setSelectedDate,\r\n    setSelectedCamera,\r\n    setSelectedFilm,\r\n    setSelectedOrientation,\r\n    setSelectedAspectRatio,\r\n    sortBy,\r\n    isMarketplaceMode // NEW\r\n}) => {\r\n    return (\r\n        <>\r\n            {/* Results Area */}\r\n            <div style={{ padding: isMobile ? '0.8rem 0.8rem 1.5rem 0.8rem' : '1.5rem' }}>\r\n                {viewMode === 'grid' ? (\r\n                    <div\r\n                        key={`${currentMode}-${results[currentMode]?.length || 0}-${sortBy}`}\r\n                        style={{\r\n                            display: 'grid',\r\n                            gridTemplateColumns: isMobile\r\n                                ? 'repeat(auto-fill, minmax(140px, 1fr))'\r\n                                : 'repeat(auto-fill, minmax(240px, 1fr))',\r\n                            gap: isMobile ? '0.75rem' : '1rem',\r\n                            animation: 'fadeIn 0.4s ease-out forwards',\r\n                            opacity: 0\r\n                        }}\r\n                    >\r\n                        <style>{`\r\n    @keyframes fadeIn {\r\n                                from { opacity: 0; transform: translateY(10px); }\r\n                                to { opacity: 1; transform: translateY(0); }\r\n    }\r\n    `}</style>\r\n                        {currentMode === 'posts' && results.posts.map(post => {\r\n                            if (isMarketplaceMode) {\r\n                                // If in marketplace mode, we expect 'post' to actually be a ShopItem or a Post with shop data?\r\n                                // For now, let's assume 'post' object has what we need OR we are reusing the post visual.\r\n                                // NOTE: Real implementation would require fetching 'shopItems' in Search.jsx.\r\n                                // For this step, I'm just adding the UI switch.\r\n                                // Let's render a \"Shop Item Version\" of the card.\r\n                                return (\r\n                                    <div key={post.id} style={{ position: 'relative', borderRadius: '12px', overflow: 'hidden', border: '1px solid #333' }}>\r\n                                        <GridPostCard\r\n                                            post={post}\r\n                                            contextPosts={results.posts}\r\n                                            selectedOrientation={selectedOrientation}\r\n                                            selectedAspectRatio={selectedAspectRatio}\r\n                                        />\r\n                                        <div style={{\r\n                                            position: 'absolute',\r\n                                            bottom: 0,\r\n                                            left: 0,\r\n                                            right: 0,\r\n                                            padding: '0.75rem',\r\n                                            background: 'linear-gradient(to top, rgba(0,0,0,0.95), transparent)',\r\n                                            color: '#7FFFD4',\r\n                                            fontWeight: 'bold',\r\n                                            display: 'flex',\r\n                                            justifyContent: 'space-between',\r\n                                            alignItems: 'center',\r\n                                            pointerEvents: 'none'\r\n                                        }}>\r\n                                            <span>${(Math.random() * 50 + 10).toFixed(2)}</span>\r\n                                            <span style={{ fontSize: '0.7rem', background: '#7FFFD4', color: '#000', padding: '2px 6px', borderRadius: '4px' }}>BUY</span>\r\n                                        </div>\r\n                                    </div>\r\n                                );\r\n                            }\r\n                            return (\r\n                                <GridPostCard\r\n                                    key={post.id}\r\n                                    post={post}\r\n                                    contextPosts={results.posts}\r\n                                    selectedOrientation={selectedOrientation}\r\n                                    selectedAspectRatio={selectedAspectRatio}\r\n                                />\r\n                            );\r\n                        })}\r\n                        {currentMode === 'users' && results.users.map(user => (\r\n                            <UserCard key={user.id} user={user} />\r\n                        ))}\r\n                        {currentMode === 'galleries' && results.galleries.map(gallery => (\r\n                            <GalleryCard key={gallery.id} studio={gallery} />\r\n                        ))}\r\n                        {currentMode === 'collections' && results.collections.map(collection => (\r\n                            <CollectionCard key={collection.id} collection={collection} />\r\n                        ))}\r\n                        {currentMode === 'contests' && results.contests.map(contest => (\r\n                            <ContestCard key={contest.id} contest={contest} />\r\n                        ))}\r\n                        {currentMode === 'events' && results.events.map(event => (\r\n                            <EventCard key={event.id} event={event} />\r\n                        ))}\r\n                        {currentMode === 'spacecards' && results.spacecards.map(card => (\r\n                            <SpaceCard key={card.id} card={card} />\r\n                        ))}\r\n                    </div>\r\n                ) : (\r\n                    <div style={{ maxWidth: '600px', margin: '0 auto' }}>\r\n                        {currentMode === 'posts' && results.posts.map(post => (\r\n                            <div key={post.id} style={{ marginBottom: '1rem' }}>\r\n                                <FeedPostCard post={post} />\r\n                            </div>\r\n                        ))}\r\n                        {/* Add other modes for feed view if needed */}\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* No Results State */}\r\n            {\r\n                !isSearching && !error && (\r\n                    currentMode === 'posts' ? results.posts.length === 0 :\r\n                        currentMode === 'users' ? results.users.length === 0 :\r\n                            currentMode === 'galleries' ? results.galleries.length === 0 :\r\n                                currentMode === 'collections' ? results.collections.length === 0 :\r\n                                    currentMode === 'contests' ? results.contests.length === 0 :\r\n                                        currentMode === 'events' ? results.events.length === 0 :\r\n                                            currentMode === 'spacecards' ? results.spacecards.length === 0 : true\r\n                ) && hasSearched && (\r\n                    <div style={{\r\n                        width: '100%',\r\n                        minHeight: '60vh',\r\n                        display: 'flex',\r\n                        flexDirection: 'column',\r\n                        alignItems: 'center',\r\n                        justifyContent: 'center',\r\n                        background: 'transparent',\r\n                        padding: '2rem 1.5rem',\r\n                        textAlign: 'center',\r\n                        position: 'relative'\r\n                    }}>\r\n                        {/* Star Background */}\r\n                        <StarBackground />\r\n\r\n                        {/* Content */}\r\n                        <div style={{ position: 'relative', zIndex: 1, maxWidth: '600px', width: '100%' }}>\r\n                            <h2 style={{\r\n                                fontFamily: \"'Rajdhani', sans-serif\",\r\n                                fontSize: 'clamp(1.8rem, 5vw, 2.5rem)', // Responsive font size\r\n                                fontWeight: '700',\r\n                                letterSpacing: '0.05em',\r\n                                color: '#7FFFD4',\r\n                                textShadow: '0 0 10px rgba(127, 255, 212, 0.5)',\r\n                                marginBottom: '0.5rem'\r\n                            }}>\r\n                                Lost in Space\r\n                            </h2>\r\n                            <p style={{\r\n                                fontFamily: \"'Rajdhani', sans-serif\",\r\n                                fontSize: 'clamp(1rem, 3vw, 1.2rem)', // Responsive font size\r\n                                fontWeight: '500',\r\n                                letterSpacing: '0.03em',\r\n                                color: 'rgba(255, 255, 255, 0.6)',\r\n                                marginBottom: '1.5rem',\r\n                                lineHeight: '1.5'\r\n                            }}>\r\n                                No results found for {currentMode === 'galleries' ? 'studios' : currentMode}. Try adjusting your filters.\r\n                            </p>\r\n                            <PSButton\r\n                                variant=\"glass\"\r\n                                size=\"lg\"\r\n                                onClick={() => {\r\n                                    setSearchTerm('');\r\n                                    setSelectedTags([]);\r\n                                    setSelectedPark(null);\r\n                                    setSelectedDate(null);\r\n                                    setSelectedCamera(null);\r\n                                    setSelectedFilm(null);\r\n                                    setSelectedOrientation(null);\r\n                                    setSelectedAspectRatio(null);\r\n                                }}\r\n                                icon={<FaRocket />}\r\n                            >\r\n                                Explore PanoSpace\r\n                            </PSButton>\r\n                        </div>\r\n                    </div>\r\n                )\r\n            }\r\n            {\r\n                !isSearching && error && (\r\n                    <div style={{ textAlign: 'center', padding: '4rem', color: '#ff6b6b' }}>\r\n                        <p style={{ marginBottom: '1rem' }}>{error}</p>\r\n                        <PSButton\r\n                            variant=\"dark\"\r\n                            size=\"md\"\r\n                            onClick={() => performSearch(false)}\r\n                        >\r\n                            Retry Search\r\n                        </PSButton>\r\n                    </div>\r\n                )\r\n            }\r\n\r\n            {/* Loading Indicator */}\r\n            {\r\n                isSearching && (\r\n                    <div style={{ textAlign: 'center', padding: '2rem', color: '#888' }}>\r\n                        <div style={{\r\n                            width: '40px',\r\n                            height: '40px',\r\n                            border: '3px solid rgba(127, 255, 212, 0.1)',\r\n                            borderTop: '3px solid var(--ice-mint)',\r\n                            borderRadius: '50%',\r\n                            animation: 'spin 1s linear infinite',\r\n                            margin: '0 auto 1rem auto'\r\n                        }} />\r\n                        <p>Searching...</p>\r\n                        <style>{`\r\n    @keyframes spin {\r\n        0 % { transform: rotate(0deg); }\r\n        100 % { transform: rotate(360deg); }\r\n    }\r\n\r\n    /* Mobile Landscape Optimization */\r\n    @media(orientation: landscape) and(max - height: 500px) {\r\n                            .search - header {\r\n    padding: 0.25rem 1rem!important;\r\n}\r\n                            .search - mode - switcher {\r\n    margin - bottom: 0.25rem!important;\r\n}\r\n                            .search - mode - switcher button {\r\n    padding: 0.3rem 0.6rem!important;\r\n    font - size: 0.8rem!important;\r\n}\r\n                            .search - bar - container {\r\n    margin - bottom: 0.25rem!important;\r\n    flex - direction: row!important;\r\n    align - items: center!important;\r\n}\r\n                            .search - bar - container input {\r\n    padding: 0.4rem 1rem 0.4rem 2.5rem!important;\r\n    font - size: 0.85rem!important;\r\n}\r\n                            .search - bar - container label {\r\n    padding: 0.4rem 0.8rem!important;\r\n}\r\n                        }\r\n`}</style>\r\n                    </div>\r\n                )\r\n            }\r\n        </>\r\n    );\r\n};\r\n\r\nexport default SearchResults;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\shop\\CreateShopItemModal.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaCamera' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaShoppingBag' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":42},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaTag' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":44,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":49},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaStore' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":61,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":68},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'uploadPreview' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":21,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":25}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef } from 'react';\r\nimport { FaTimes, FaCamera, FaShoppingBag, FaTag, FaUpload, FaStore } from 'react-icons/fa';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { db, storage } from '@/firebase';\r\nimport { collection, addDoc, serverTimestamp } from 'firebase/firestore';\r\nimport { ref, uploadBytesResumable, getDownloadURL } from 'firebase/storage';\r\nimport { PRINT_TIERS } from '@/domain/shop/pricing';\r\nimport { fetchPublishedPosts } from '@/core/services/firestore/posts.service';\r\nimport { logger } from '@/core/utils/logger';\r\nimport StarBackground from '@/components/StarBackground';\r\n\r\nconst CreateShopItemModal = ({ onClose, onCreated }) => {\r\n    const { currentUser } = useAuth();\r\n    const [step, setStep] = useState(1); // 1: Select Post, 2: Configure Item\r\n    const [userPosts, setUserPosts] = useState([]);\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    // Selection State\r\n    const [selectedPost, setSelectedPost] = useState(null);\r\n    const [uploadedFile, setUploadedFile] = useState(null);\r\n    const [uploadPreview, setUploadPreview] = useState('');\r\n    const fileInputRef = useRef(null);\r\n\r\n    // Config State\r\n    const [config, setConfig] = useState({\r\n        title: '',\r\n        description: '',\r\n        productTier: PRINT_TIERS.ECONOMY,\r\n        includeStickers: false,\r\n        imageUrl: '',\r\n        tags: []\r\n    });\r\n\r\n    // Fetch posts\r\n    useEffect(() => {\r\n        const loadPosts = async () => {\r\n            if (!currentUser) return;\r\n            setLoading(true);\r\n            try {\r\n                // Fetch only published posts for shop items\r\n                const posts = await fetchPublishedPosts(currentUser.uid, 50);\r\n                setUserPosts(posts);\r\n            } catch (error) {\r\n                console.error('Error fetching posts:', error);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n        loadPosts();\r\n    }, [currentUser]);\r\n\r\n    const handlePostSelect = (post) => {\r\n        setSelectedPost(post);\r\n        setUploadedFile(null);\r\n        setUploadPreview('');\r\n\r\n        // Auto-fill config\r\n        const imgUrl = post.downloadURL || post.images?.[0]?.url;\r\n        setConfig(prev => ({\r\n            ...prev,\r\n            title: post.title || 'Untitled Print',\r\n            description: post.description || '',\r\n            imageUrl: imgUrl,\r\n            tags: post.tags || []\r\n        }));\r\n        setStep(2);\r\n    };\r\n\r\n    const handleFileSelect = (e) => {\r\n        const file = e.target.files?.[0];\r\n        if (file && file.type.startsWith('image/')) {\r\n            setUploadedFile(file);\r\n            setSelectedPost(null);\r\n\r\n            const reader = new FileReader();\r\n            reader.onloadend = () => {\r\n                setUploadPreview(reader.result);\r\n                setConfig(prev => ({\r\n                    ...prev,\r\n                    title: 'Untitled Print',\r\n                    description: '',\r\n                    imageUrl: reader.result, // Preview only\r\n                    tags: []\r\n                }));\r\n                setStep(2);\r\n            };\r\n            reader.readAsDataURL(file);\r\n        }\r\n    };\r\n\r\n    const handleSave = async () => {\r\n        if (!config.imageUrl || !config.title) {\r\n            alert(\"Please provide an image and title.\");\r\n            return;\r\n        }\r\n\r\n        setLoading(true);\r\n        try {\r\n            let finalImageUrl = config.imageUrl;\r\n\r\n            // Handle File Upload if needed\r\n            if (uploadedFile) {\r\n                const storageRef = ref(storage, `shopItems/${currentUser.uid}/${Date.now()}_${uploadedFile.name}`);\r\n                const uploadTask = uploadBytesResumable(storageRef, uploadedFile);\r\n\r\n                await new Promise((resolve, reject) => {\r\n                    uploadTask.on('state_changed', null, reject, resolve);\r\n                });\r\n\r\n                finalImageUrl = await getDownloadURL(storageRef);\r\n            }\r\n\r\n            // Create Shop Item\r\n            const shopItemData = {\r\n                ownerId: currentUser.uid,\r\n                kind: \"print\", // Default to print for now\r\n                status: \"draft\", // Start as draft for safety\r\n                sourcePostId: selectedPost?.id || null,\r\n                title: config.title,\r\n                description: config.description,\r\n                imageUrl: finalImageUrl,\r\n                tags: config.tags,\r\n                productTier: config.productTier,\r\n                includeStickers: config.includeStickers,\r\n                createdAt: serverTimestamp(),\r\n                updatedAt: serverTimestamp(),\r\n                available: false, // Default to false until reviewed\r\n\r\n                // Pricing defaults (can be expanded)\r\n                baseCostCents: 0,\r\n                priceCents: 0,\r\n                currency: \"USD\"\r\n            };\r\n\r\n            await addDoc(collection(db, 'shopItems'), shopItemData);\r\n\r\n            logger.log(\"Shop Item Created Successfully\");\r\n            if (onCreated) onCreated();\r\n            onClose();\r\n\r\n        } catch (error) {\r\n            console.error(\"Error creating shop item:\", error);\r\n            alert(\"Failed to create shop item: \" + error.message);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div style={{\r\n            position: 'fixed', inset: 0, background: 'rgba(0,0,0,0.9)', backdropFilter: 'blur(10px)',\r\n            alignItems: 'center', justifyContent: 'center', zIndex: 2000, padding: '1rem', display: 'flex'\r\n        }}>\r\n            <StarBackground />\r\n\r\n            <div style={{\r\n                background: 'rgba(26, 26, 26, 0.7)',\r\n                backdropFilter: 'blur(40px) saturate(180%)',\r\n                border: '1px solid rgba(127, 255, 212, 0.1)',\r\n                borderRadius: '24px',\r\n                width: '100%', maxWidth: '800px', maxHeight: '90vh',\r\n                display: 'flex', flexDirection: 'column', overflow: 'hidden',\r\n                boxShadow: '0 8px 32px rgba(0, 0, 0, 0.4)',\r\n                position: 'relative', zIndex: 1\r\n            }}>\r\n                {/* Header */}\r\n                <div style={{ padding: '1.5rem', borderBottom: '1px solid rgba(127, 255, 212, 0.1)', display: 'flex', justifyContent: 'space-between', alignItems: 'center', background: 'rgba(255,255,255,0.02)' }}>\r\n                    <h2 style={{ margin: 0, fontSize: '1.5rem', fontWeight: '600', color: '#fff' }}>\r\n                        {step === 1 ? 'Select Image Source' : 'Configure Product'}\r\n                    </h2>\r\n                    <button onClick={onClose} style={{\r\n                        background: 'rgba(255,255,255,0.1)', border: 'none', borderRadius: '50%',\r\n                        width: '36px', height: '36px', color: '#fff', cursor: 'pointer', display: 'flex', alignItems: 'center', justifyContent: 'center'\r\n                    }}>\r\n                        <FaTimes />\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Content */}\r\n                <div style={{ flex: 1, overflowY: 'auto', padding: '1.5rem' }}>\r\n\r\n                    {/* STEP 1: SELECT POST */}\r\n                    {step === 1 && (\r\n                        <div>\r\n                            <div style={{ marginBottom: '1.5rem', display: 'flex', justifyContent: 'flex-end' }}>\r\n                                <button\r\n                                    onClick={() => fileInputRef.current?.click()}\r\n                                    style={{\r\n                                        display: 'flex', alignItems: 'center', gap: '0.5rem',\r\n                                        background: 'rgba(127, 255, 212, 0.1)', color: '#7FFFD4',\r\n                                        border: '1px solid rgba(127, 255, 212, 0.3)', padding: '0.5rem 1rem', borderRadius: '8px', cursor: 'pointer'\r\n                                    }}\r\n                                >\r\n                                    <FaUpload /> Upload New Image\r\n                                </button>\r\n                                <input ref={fileInputRef} type=\"file\" accept=\"image/*\" onChange={handleFileSelect} style={{ display: 'none' }} />\r\n                            </div>\r\n\r\n                            <div style={{\r\n                                display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(150px, 1fr))', gap: '1rem'\r\n                            }}>\r\n                                {userPosts.map(post => (\r\n                                    <div key={post.id} onClick={() => handlePostSelect(post)} style={{\r\n                                        aspectRatio: '1', borderRadius: '8px', overflow: 'hidden', cursor: 'pointer',\r\n                                        border: '1px solid #333', position: 'relative', transition: 'transform 0.2s'\r\n                                    }}\r\n                                        onMouseEnter={e => e.currentTarget.style.transform = 'scale(1.02)'}\r\n                                        onMouseLeave={e => e.currentTarget.style.transform = 'scale(1)'}\r\n                                    >\r\n                                        <img src={post.downloadURL || post.images?.[0]?.url} alt={post.title} style={{ width: '100%', height: '100%', objectFit: 'cover' }} />\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                            {userPosts.length === 0 && !loading && (\r\n                                <div style={{ textAlign: 'center', padding: '3rem', color: '#666' }}>\r\n                                    No published posts found.\r\n                                </div>\r\n                            )}\r\n                            {loading && <div style={{ textAlign: 'center', padding: '2rem', color: '#888' }}>Loading posts...</div>}\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* STEP 2: CONFIGURE */}\r\n                    {step === 2 && (\r\n                        <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '2rem' }}>\r\n                            {/* Preview Column */}\r\n                            <div>\r\n                                <div style={{\r\n                                    aspectRatio: '1', borderRadius: '12px', overflow: 'hidden',\r\n                                    border: '1px solid #333', marginBottom: '1rem'\r\n                                }}>\r\n                                    <img src={config.imageUrl} alt=\"Preview\" style={{ width: '100%', height: '100%', objectFit: 'cover' }} />\r\n                                </div>\r\n                                <button onClick={() => setStep(1)} style={{ background: 'transparent', border: 'none', color: '#888', cursor: 'pointer', textDecoration: 'underline' }}>\r\n                                    &larr; Choose different image\r\n                                </button>\r\n                            </div>\r\n\r\n                            {/* Form Column */}\r\n                            <div style={{ display: 'flex', flexDirection: 'column', gap: '1.5rem' }}>\r\n                                <div>\r\n                                    <label style={{ display: 'block', color: '#888', marginBottom: '0.5rem', fontSize: '0.9rem' }}>Product Title</label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        value={config.title}\r\n                                        onChange={e => setConfig(p => ({ ...p, title: e.target.value }))}\r\n                                        style={{ width: '100%', padding: '0.75rem', background: '#111', border: '1px solid #333', borderRadius: '8px', color: '#fff' }}\r\n                                    />\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <label style={{ display: 'block', color: '#888', marginBottom: '0.5rem', fontSize: '0.9rem' }}>Quality Tier</label>\r\n                                    <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr 1fr', gap: '0.5rem' }}>\r\n                                        {[\r\n                                            { id: PRINT_TIERS.ECONOMY, label: 'Economy' },\r\n                                            { id: PRINT_TIERS.PREMIUM, label: 'Premium' },\r\n                                            { id: PRINT_TIERS.LIMITED, label: 'Limited' }\r\n                                        ].map(tier => (\r\n                                            <button\r\n                                                key={tier.id}\r\n                                                onClick={() => setConfig(p => ({ ...p, productTier: tier.id }))}\r\n                                                style={{\r\n                                                    padding: '0.75rem',\r\n                                                    background: config.productTier === tier.id ? 'rgba(127, 255, 212, 0.2)' : '#222',\r\n                                                    color: config.productTier === tier.id ? '#7FFFD4' : '#888',\r\n                                                    border: config.productTier === tier.id ? '1px solid #7FFFD4' : '1px solid #333',\r\n                                                    borderRadius: '6px',\r\n                                                    cursor: 'pointer'\r\n                                                }}\r\n                                            >\r\n                                                {tier.label}\r\n                                            </button>\r\n                                        ))}\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <label style={{ display: 'flex', alignItems: 'center', gap: '0.75rem', cursor: 'pointer', padding: '1rem', background: '#222', borderRadius: '8px' }}>\r\n                                    <input\r\n                                        type=\"checkbox\"\r\n                                        checked={config.includeStickers}\r\n                                        onChange={e => setConfig(p => ({ ...p, includeStickers: e.target.checked }))}\r\n                                        style={{ width: '18px', height: '18px', accentColor: '#7FFFD4' }}\r\n                                    />\r\n                                    <div>\r\n                                        <div style={{ fontWeight: '600' }}>Include Stickers</div>\r\n                                        <div style={{ fontSize: '0.8rem', color: '#888' }}>Offer sticker pack with this print</div>\r\n                                    </div>\r\n                                </label>\r\n\r\n                                <div style={{ marginTop: 'auto', paddingTop: '1rem', borderTop: '1px solid #333' }}>\r\n                                    <button\r\n                                        onClick={handleSave}\r\n                                        disabled={loading}\r\n                                        style={{\r\n                                            width: '100%', padding: '1rem',\r\n                                            background: '#7FFFD4', color: '#000',\r\n                                            border: 'none', borderRadius: '12px',\r\n                                            fontWeight: 'bold', fontSize: '1rem',\r\n                                            cursor: loading ? 'wait' : 'pointer',\r\n                                            opacity: loading ? 0.7 : 1\r\n                                        }}\r\n                                    >\r\n                                        {loading ? 'Creating Draft...' : 'Create Shop Item'}\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CreateShopItemModal;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\ui\\Skeleton.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\n\r\n/**\r\n * Base Skeleton Component\r\n * Renders a shimmering placeholder\r\n */\r\nexport const Skeleton = ({\r\n    width,\r\n    height,\r\n    borderRadius = '4px',\r\n    style = {},\r\n    className = ''\r\n}) => {\r\n    return (\r\n        <div\r\n            className={className}\r\n            style={{\r\n                width: width,\r\n                height: height,\r\n                borderRadius: borderRadius,\r\n                background: 'linear-gradient(90deg, #1a1a1a 25%, #222 50%, #1a1a1a 75%)',\r\n                backgroundSize: '200% 100%',\r\n                animation: 'shimmer 1.5s infinite',\r\n                ...style\r\n            }}\r\n        >\r\n            <style>{`\r\n                @keyframes shimmer {\r\n                    0% { background-position: 200% 0; }\r\n                    100% { background-position: -200% 0; }\r\n                }\r\n            `}</style>\r\n        </div>\r\n    );\r\n};\r\n\r\n/**\r\n * Skeleton for text lines\r\n */\r\nexport const SkeletonText = ({ lines = 1, height = '1rem', gap = '0.5rem', width = '100%' }) => {\r\n    return (\r\n        <div style={{ display: 'flex', flexDirection: 'column', gap }}>\r\n            {Array.from({ length: lines }).map((_, i) => (\r\n                <Skeleton\r\n                    key={i}\r\n                    width={i === lines - 1 && lines > 1 ? '70%' : width}\r\n                    height={height}\r\n                />\r\n            ))}\r\n        </div>\r\n    );\r\n};\r\n\r\n/**\r\n * Skeleton for a standard card (Image + Title + Subtitle)\r\n */\r\nexport const SkeletonCard = ({ aspectRatio = '1/1' }) => {\r\n    return (\r\n        <div style={{\r\n            background: 'rgba(255,255,255,0.03)',\r\n            borderRadius: '12px',\r\n            overflow: 'hidden',\r\n            border: '1px solid rgba(255,255,255,0.05)'\r\n        }}>\r\n            <Skeleton width=\"100%\" style={{ aspectRatio }} borderRadius=\"0\" />\r\n            <div style={{ padding: '1rem' }}>\r\n                <SkeletonText lines={2} />\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n/**\r\n * Skeleton for a grid of cards\r\n */\r\nexport const SkeletonGrid = ({ count = 8, aspectRatio = '1/1', columns = 'repeat(auto-fill, minmax(200px, 1fr))' }) => {\r\n    return (\r\n        <div style={{\r\n            display: 'grid',\r\n            gridTemplateColumns: columns,\r\n            gap: '1.5rem'\r\n        }}>\r\n            {Array.from({ length: count }).map((_, i) => (\r\n                <SkeletonCard key={i} aspectRatio={aspectRatio} />\r\n            ))}\r\n        </div>\r\n    );\r\n};\r\n\r\n/**\r\n * Full Page Skeleton\r\n * Header + Content Grid\r\n */\r\nexport const PageSkeleton = ({ title = true }) => {\r\n    return (\r\n        <div className=\"ps-page\">\r\n            {/* Header Skeleton */}\r\n            <div className=\"ps-sticky-header-padded\" style={{ display: 'flex', alignItems: 'center', gap: '1rem' }}>\r\n                <Skeleton width=\"32px\" height=\"32px\" borderRadius=\"50%\" />\r\n                {title && <Skeleton width=\"200px\" height=\"32px\" />}\r\n            </div>\r\n\r\n            {/* Content Skeleton */}\r\n            <div className=\"ps-container-1200\">\r\n                <div style={{ marginBottom: '2rem' }}>\r\n                    <SkeletonText lines={1} width=\"40%\" height=\"2rem\" />\r\n                    <div style={{ marginTop: '1rem' }}>\r\n                        <SkeletonText lines={2} width=\"60%\" />\r\n                    </div>\r\n                </div>\r\n\r\n                <SkeletonGrid count={8} />\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Skeleton;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\ui\\cards\\GalleryCard.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst StudioCard = ({ studio }) => {\r\n    const navigate = useNavigate();\r\n    return (\r\n        <div\r\n            onClick={() => navigate(`/gallery/${studio.id}`)}\r\n            style={{\r\n                background: 'rgba(255,255,255,0.03)',\r\n                borderRadius: '12px',\r\n                overflow: 'hidden',\r\n                cursor: 'pointer',\r\n                border: '1px solid rgba(255,255,255,0.05)',\r\n                transition: 'transform 0.2s'\r\n            }}\r\n            onMouseEnter={e => e.currentTarget.style.transform = 'translateY(-4px)'}\r\n            onMouseLeave={e => e.currentTarget.style.transform = 'translateY(0)'}\r\n        >\r\n            <div style={{ aspectRatio: '16/9', background: '#111', position: 'relative' }}>\r\n                <img\r\n                    src={studio.coverImage || 'https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe?q=80&w=2564&auto=format&fit=crop'}\r\n                    alt={studio.title}\r\n                    loading=\"lazy\"\r\n                    style={{\r\n                        width: '100%',\r\n                        height: '100%',\r\n                        objectFit: 'cover',\r\n                        opacity: studio.coverImage ? 1 : 0.6\r\n                    }}\r\n                />\r\n                {!studio.coverImage && (\r\n                    <div style={{\r\n                        position: 'absolute',\r\n                        top: 0,\r\n                        left: 0,\r\n                        right: 0,\r\n                        bottom: 0,\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        justifyContent: 'center',\r\n                        background: 'rgba(0,0,0,0.3)'\r\n                    }}>\r\n                        <span style={{ color: 'rgba(255,255,255,0.5)', fontSize: '2rem' }}>≡ƒû╝∩╕Å</span>\r\n                    </div>\r\n                )}\r\n            </div>\r\n            <div style={{ padding: '1rem' }}>\r\n                <h4 style={{ margin: '0 0 0.5rem 0', color: '#fff', fontSize: '1rem' }}>{studio.title || 'Untitled Studio'}</h4>\r\n                <p style={{ margin: 0, fontSize: '0.85rem', color: '#888' }}>{studio.postCount || 0} posts</p>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default StudioCard;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\ui\\cards\\ParkCard.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { FaTree, FaMountain, FaMapMarkerAlt } from 'react-icons/fa';\r\n\r\nconst ParkCard = ({ park }) => {\r\n    const navigate = useNavigate();\r\n\r\n    return (\r\n        <div\r\n            onClick={() => navigate(`/park/${park.parkId}`)}\r\n            style={{\r\n                background: 'rgba(255,255,255,0.03)',\r\n                borderRadius: '12px',\r\n                overflow: 'hidden',\r\n                cursor: 'pointer',\r\n                border: '1px solid rgba(255,255,255,0.05)',\r\n                transition: 'transform 0.2s, border-color 0.2s',\r\n                padding: '1.5rem'\r\n            }}\r\n            onMouseEnter={e => {\r\n                e.currentTarget.style.transform = 'translateY(-4px)';\r\n                e.currentTarget.style.borderColor = 'rgba(127, 255, 212, 0.3)';\r\n            }}\r\n            onMouseLeave={e => {\r\n                e.currentTarget.style.transform = 'translateY(0)';\r\n                e.currentTarget.style.borderColor = 'rgba(255,255,255,0.05)';\r\n            }}\r\n        >\r\n            <div style={{ display: 'flex', alignItems: 'flex-start', gap: '1rem' }}>\r\n                <div style={{\r\n                    width: '50px',\r\n                    height: '50px',\r\n                    borderRadius: '12px',\r\n                    background: 'rgba(127, 255, 212, 0.1)',\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'center',\r\n                    flexShrink: 0\r\n                }}>\r\n                    {park.parkType === 'national' ? (\r\n                        <FaMountain style={{ color: '#7FFFD4', fontSize: '1.5rem' }} />\r\n                    ) : (\r\n                        <FaTree style={{ color: '#7FFFD4', fontSize: '1.5rem' }} />\r\n                    )}\r\n                </div>\r\n                <div style={{ flex: 1 }}>\r\n                    <h3 style={{ margin: '0 0 0.5rem 0', color: '#fff', fontSize: '1.1rem' }}>\r\n                        {park.parkName}\r\n                    </h3>\r\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', color: '#888', fontSize: '0.9rem' }}>\r\n                        <FaMapMarkerAlt size={12} />\r\n                        <span>{park.state}</span>\r\n                    </div>\r\n                    <div style={{\r\n                        marginTop: '0.5rem',\r\n                        padding: '0.25rem 0.75rem',\r\n                        background: park.parkType === 'national' ? 'rgba(127, 255, 212, 0.1)' : 'rgba(100, 200, 255, 0.1)',\r\n                        border: `1px solid ${park.parkType === 'national' ? 'rgba(127, 255, 212, 0.3)' : 'rgba(100, 200, 255, 0.3)'}`,\r\n                        borderRadius: '12px',\r\n                        color: park.parkType === 'national' ? '#7FFFD4' : '#64C8FF',\r\n                        fontSize: '0.75rem',\r\n                        fontWeight: '600',\r\n                        display: 'inline-block',\r\n                        textTransform: 'uppercase',\r\n                        letterSpacing: '0.5px'\r\n                    }}>\r\n                        {park.parkType === 'national' ? 'National Park' : 'State Park'}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ParkCard;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\components\\ui\\cards\\ShopItemCard.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport SmartImage from '@/components/SmartImage';\r\n\r\nconst ShopItemCard = ({ item }) => {\r\n    const navigate = useNavigate();\r\n\r\n    return (\r\n        <div\r\n            onClick={() => navigate(`/shop/${item.id}`)}\r\n            style={{\r\n                background: '#111',\r\n                borderRadius: '2px',\r\n                overflow: 'hidden',\r\n                cursor: 'pointer',\r\n                position: 'relative',\r\n                border: '1px solid #0a0a0a'\r\n            }}\r\n        >\r\n            {/* Fixed height container with 1:1 aspect ratio */}\r\n            <div style={{ width: '100%', paddingBottom: '100%', position: 'relative', background: '#000' }}>\r\n                <div style={{ position: 'absolute', top: 0, left: 0, width: '100%', height: '100%' }}>\r\n                    <SmartImage\r\n                        src={item.imageUrl}\r\n                        alt={item.title}\r\n                        loading=\"lazy\"\r\n                        style={{ width: '100%', height: '100%', objectFit: 'cover', position: 'absolute', top: 0, left: 0 }}\r\n                    />\r\n                </div>\r\n                <div style={{\r\n                    position: 'absolute',\r\n                    bottom: 0,\r\n                    left: 0,\r\n                    right: 0,\r\n                    background: 'linear-gradient(transparent, rgba(0,0,0,0.9))',\r\n                    padding: '1rem 0.5rem 0.5rem',\r\n                    color: '#fff',\r\n                    zIndex: 2\r\n                }}>\r\n                    <div style={{ fontSize: '0.9rem', fontWeight: 'bold', whiteSpace: 'nowrap', overflow: 'hidden', textOverflow: 'ellipsis' }}>\r\n                        {item.title}\r\n                    </div>\r\n                    <div style={{ fontSize: '0.8rem', color: '#7FFFD4', marginTop: '0.2rem' }}>\r\n                        {item.minPrice !== null ? `From $${item.minPrice.toFixed(2)}` : 'View Details'}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ShopItemCard;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\config\\devConfig.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\config\\featureFlags.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\config\\feedConfig.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\context\\ActivePostContext.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":5,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":5,"endColumn":27}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useContext, useState } from 'react';\r\n\r\nconst ActivePostContext = createContext();\r\n\r\nexport const useActivePost = () => useContext(ActivePostContext);\r\n\r\nexport const ActivePostProvider = ({ children }) => {\r\n    const [activePostId, setActivePostId] = useState(null);\r\n    const [activePost, setActivePost] = useState(null);\r\n\r\n    return (\r\n        <ActivePostContext.Provider value={{ activePostId, setActivePostId, activePost, setActivePost }}>\r\n            {children}\r\n        </ActivePostContext.Provider>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\context\\AuthContext.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":8,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":8,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useContext, useEffect, useState } from 'react';\r\nimport { auth } from '@/firebase';\r\nimport { onAuthStateChanged, signInWithEmailAndPassword, createUserWithEmailAndPassword, signOut, GoogleAuthProvider, signInWithPopup } from 'firebase/auth';\r\nimport AppLoading from '@/components/AppLoading';\r\n\r\nconst AuthContext = createContext();\r\n\r\nexport const useAuth = () => {\r\n    return useContext(AuthContext);\r\n};\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n    const [currentUser, setCurrentUser] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    function signup(email, password) {\r\n        return createUserWithEmailAndPassword(auth, email, password);\r\n    }\r\n\r\n    function login(email, password) {\r\n        return signInWithEmailAndPassword(auth, email, password);\r\n    }\r\n\r\n    function logout() {\r\n        return signOut(auth);\r\n    }\r\n\r\n    function googleSignIn() {\r\n        const provider = new GoogleAuthProvider();\r\n        return signInWithPopup(auth, provider);\r\n    }\r\n\r\n    useEffect(() => {\r\n        // AuthContext: Setting up onAuthStateChanged listener\r\n        const unsubscribe = onAuthStateChanged(auth, (user) => {\r\n            // AuthContext: onAuthStateChanged fired\r\n            setCurrentUser(user);\r\n            setLoading(false);\r\n        }, (error) => {\r\n            console.error(\"AuthContext: Auth error\", error);\r\n            setLoading(false);\r\n        });\r\n\r\n        // Fallback: If Firebase doesn't respond in 3 seconds, stop loading\r\n        const timeout = setTimeout(() => {\r\n            setLoading((currentLoading) => {\r\n                if (currentLoading) {\r\n                    // AuthContext: Firebase auth timed out, forcing loading to false\r\n                    return false;\r\n                }\r\n                return currentLoading;\r\n            });\r\n        }, 3000);\r\n\r\n        return () => {\r\n            unsubscribe();\r\n            clearTimeout(timeout);\r\n        };\r\n    }, []);\r\n\r\n    const value = {\r\n        currentUser,\r\n        loading,\r\n        signup,\r\n        login,\r\n        logout,\r\n        googleSignIn\r\n    };\r\n\r\n    return (\r\n        <AuthContext.Provider value={value}>\r\n            {loading ? <AppLoading /> : children}\r\n        </AuthContext.Provider>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\context\\ToastContext.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":5,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":5,"endColumn":22},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'removeToast'. Either include it or remove the dependency array.","line":29,"column":8,"nodeType":"ArrayExpression","endLine":29,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [removeToast]","fix":{"range":[833,835],"text":"[removeToast]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useContext, useState, useCallback } from 'react';\r\n\r\nconst ToastContext = createContext(null);\r\n\r\nexport const useToast = () => {\r\n    const context = useContext(ToastContext);\r\n    if (!context) {\r\n        throw new Error('useToast must be used within ToastProvider');\r\n    }\r\n    return context;\r\n};\r\n\r\nexport const ToastProvider = ({ children }) => {\r\n    const [toasts, setToasts] = useState([]);\r\n\r\n    const showToast = useCallback((message, type = 'info', duration = 4000) => {\r\n        const id = Date.now() + Math.random();\r\n        const toast = { id, message, type, duration };\r\n\r\n        setToasts(prev => [...prev, toast]);\r\n\r\n        if (duration > 0) {\r\n            setTimeout(() => {\r\n                removeToast(id);\r\n            }, duration);\r\n        }\r\n\r\n        return id;\r\n    }, []);\r\n\r\n    const removeToast = useCallback((id) => {\r\n        setToasts(prev => prev.filter(toast => toast.id !== id));\r\n    }, []);\r\n\r\n    const showSuccess = useCallback((message, duration) => {\r\n        return showToast(message, 'success', duration);\r\n    }, [showToast]);\r\n\r\n    const showError = useCallback((message, duration) => {\r\n        return showToast(message, 'error', duration);\r\n    }, [showToast]);\r\n\r\n    const showWarning = useCallback((message, duration) => {\r\n        return showToast(message, 'warning', duration);\r\n    }, [showToast]);\r\n\r\n    const showInfo = useCallback((message, duration) => {\r\n        return showToast(message, 'info', duration);\r\n    }, [showToast]);\r\n\r\n    const value = {\r\n        toasts,\r\n        showToast,\r\n        showSuccess,\r\n        showError,\r\n        showWarning,\r\n        showInfo,\r\n        removeToast\r\n    };\r\n\r\n    return (\r\n        <ToastContext.Provider value={value}>\r\n            {children}\r\n        </ToastContext.Provider>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\context\\UIContext.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":5,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":5,"endColumn":19}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useContext, useState } from 'react';\r\n\r\nconst UIContext = createContext();\r\n\r\nexport const useUI = () => {\r\n    return useContext(UIContext);\r\n};\r\n\r\nexport const UIProvider = ({ children }) => {\r\n    const [activePost, setActivePost] = useState(null);\r\n\r\n    const value = {\r\n        activePost,\r\n        setActivePost\r\n    };\r\n\r\n    return (\r\n        <UIContext.Provider value={value}>\r\n            {children}\r\n        </UIContext.Provider>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\context\\UserCacheContext.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":7,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":7,"endColumn":26}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useContext, useState, useCallback } from 'react';\r\nimport { doc, getDoc } from 'firebase/firestore';\r\nimport { db } from '@/firebase';\r\n\r\nconst UserCacheContext = createContext();\r\n\r\nexport const useUserCache = () => {\r\n    return useContext(UserCacheContext);\r\n};\r\n\r\nexport const UserCacheProvider = ({ children }) => {\r\n    const [users, setUsers] = useState({});\r\n    const [loading, setLoading] = useState({});\r\n\r\n    /**\r\n     * Fetch a user by ID, checking cache first\r\n     */\r\n    const fetchUser = useCallback(async (userId) => {\r\n        if (!userId) return null;\r\n\r\n        // Return from cache if available\r\n        if (users[userId]) {\r\n            return users[userId];\r\n        }\r\n\r\n        // If already loading, wait for it (basic prevention, could be improved with promises)\r\n        if (loading[userId]) {\r\n            // For now, just let the duplicate request happen or return null\r\n            // Ideally we'd return the pending promise\r\n            return null;\r\n        }\r\n\r\n        setLoading(prev => ({ ...prev, [userId]: true }));\r\n\r\n        try {\r\n            const userDoc = await getDoc(doc(db, 'users', userId));\r\n            if (userDoc.exists()) {\r\n                const userData = { id: userDoc.id, ...userDoc.data() };\r\n                setUsers(prev => ({ ...prev, [userId]: userData }));\r\n                return userData;\r\n            }\r\n            return null;\r\n        } catch (error) {\r\n            console.error(`Error fetching user ${userId}:`, error);\r\n            return null;\r\n        } finally {\r\n            setLoading(prev => ({ ...prev, [userId]: false }));\r\n        }\r\n    }, [users, loading]);\r\n\r\n    /**\r\n     * Manually cache a user (e.g. from search results or auth)\r\n     */\r\n    const cacheUser = useCallback((user) => {\r\n        if (!user || !user.id) return;\r\n        setUsers(prev => {\r\n            // Only update if not exists or if we want to force update (optional)\r\n            if (!prev[user.id]) {\r\n                return { ...prev, [user.id]: user };\r\n            }\r\n            return prev;\r\n        });\r\n    }, []);\r\n\r\n    const value = {\r\n        users,\r\n        fetchUser,\r\n        cacheUser\r\n    };\r\n\r\n    return (\r\n        <UserCacheContext.Provider value={value}>\r\n            {children}\r\n        </UserCacheContext.Provider>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\core\\constants\\artDisciplines.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\core\\constants\\artTypes.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\core\\constants\\bannerThemes.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\core\\constants\\boostDays.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\core\\constants\\colorPacks.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\core\\constants\\filmStocks.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\core\\constants\\gradients.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\core\\constants\\magazineConfig.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\core\\constants\\moderationConstants.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\core\\constants\\monthlyThemes.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\core\\constants\\nsfwTags.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\core\\constants\\officialCardCategories.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ParkDefinition' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":41},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'key' is defined but never used. Allowed unused args must match /^_/u.","line":732,"column":59,"nodeType":"Identifier","messageId":"unusedVar","endLine":732,"endColumn":62}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Official Card Categories and Auto-Rarity Configuration\r\nimport { PARKS_DATA, type ParkDefinition } from './parksData';\r\n\r\nexport const CARD_CATEGORIES = {\r\n    ANIMALS: 'animals',\r\n    TERRAIN: 'terrain',\r\n    NATIONAL_PARKS: 'national_parks',\r\n    STATE_PARKS: 'state_parks',\r\n    BUGS: 'bugs',\r\n    CUSTOM: 'custom'\r\n} as const;\r\n\r\nexport type CardCategory = typeof CARD_CATEGORIES[keyof typeof CARD_CATEGORIES];\r\n\r\nexport interface RarityConfig {\r\n    rarity: 'common' | 'uncommon' | 'rare' | 'epic' | 'legendary' | 'mythic';\r\n    label: string;\r\n}\r\n\r\n// Animals with auto-rarity (organized by photography commonality)\r\nexport const ANIMALS_CONFIG: Record<string, RarityConfig> = {\r\n    // ≡ƒƒ⌐ COMMON (90 animals)\r\n    domestic_cat: { rarity: 'common', label: 'Domestic Cat' },\r\n    domestic_dog: { rarity: 'common', label: 'Domestic Dog' },\r\n    squirrel: { rarity: 'common', label: 'Squirrel' },\r\n    chipmunk: { rarity: 'common', label: 'Chipmunk' },\r\n    rabbit: { rarity: 'common', label: 'Rabbit' },\r\n    hare: { rarity: 'common', label: 'Hare' },\r\n    mouse: { rarity: 'common', label: 'Mouse' },\r\n    rat: { rarity: 'common', label: 'Rat' },\r\n    raccoon: { rarity: 'common', label: 'Raccoon' },\r\n    opossum: { rarity: 'common', label: 'Opossum' },\r\n    skunk: { rarity: 'common', label: 'Skunk' },\r\n    groundhog: { rarity: 'common', label: 'Groundhog' },\r\n    prairie_dog: { rarity: 'common', label: 'Prairie Dog' },\r\n    beaver: { rarity: 'common', label: 'Beaver' },\r\n    otter: { rarity: 'common', label: 'Otter' },\r\n    horse: { rarity: 'common', label: 'Horse' },\r\n    donkey: { rarity: 'common', label: 'Donkey' },\r\n    mule: { rarity: 'common', label: 'Mule' },\r\n    goat: { rarity: 'common', label: 'Goat' },\r\n    sheep: { rarity: 'common', label: 'Sheep' },\r\n    cow: { rarity: 'common', label: 'Cow' },\r\n    pig: { rarity: 'common', label: 'Pig' },\r\n    pigeon: { rarity: 'common', label: 'Pigeon' },\r\n    sparrow: { rarity: 'common', label: 'Sparrow' },\r\n    robin: { rarity: 'common', label: 'Robin' },\r\n    starling: { rarity: 'common', label: 'Starling' },\r\n    blackbird: { rarity: 'common', label: 'Blackbird' },\r\n    finch: { rarity: 'common', label: 'Finch' },\r\n    wren: { rarity: 'common', label: 'Wren' },\r\n    crow: { rarity: 'common', label: 'Crow' },\r\n    raven: { rarity: 'common', label: 'Raven' },\r\n    seagull: { rarity: 'common', label: 'Seagull' },\r\n    cardinal: { rarity: 'common', label: 'Cardinal' },\r\n    blue_jay: { rarity: 'common', label: 'Blue Jay' },\r\n    chicken: { rarity: 'common', label: 'Chicken' },\r\n    rooster: { rarity: 'common', label: 'Rooster' },\r\n    duck: { rarity: 'common', label: 'Duck' },\r\n    goose: { rarity: 'common', label: 'Goose' },\r\n    turkey: { rarity: 'common', label: 'Turkey' },\r\n    magpie: { rarity: 'common', label: 'Magpie' },\r\n    common_frog: { rarity: 'common', label: 'Common Frog' },\r\n    toad: { rarity: 'common', label: 'Toad' },\r\n    gecko: { rarity: 'common', label: 'Gecko' },\r\n    box_turtle: { rarity: 'common', label: 'Box Turtle' },\r\n    garter_snake: { rarity: 'common', label: 'Garter Snake' },\r\n    corn_snake: { rarity: 'common', label: 'Corn Snake' },\r\n    goldfish: { rarity: 'common', label: 'Goldfish' },\r\n    betta: { rarity: 'common', label: 'Betta' },\r\n    guppy: { rarity: 'common', label: 'Guppy' },\r\n    trout: { rarity: 'common', label: 'Trout' },\r\n    bass: { rarity: 'common', label: 'Bass' },\r\n    // Bugs moved to BUGS_CONFIG\r\n    crab: { rarity: 'common', label: 'Crab' },\r\n    hermit_crab: { rarity: 'common', label: 'Hermit Crab' },\r\n    lobster: { rarity: 'common', label: 'Lobster' },\r\n    shrimp: { rarity: 'common', label: 'Shrimp' },\r\n    starfish: { rarity: 'common', label: 'Starfish' },\r\n    jellyfish: { rarity: 'common', label: 'Jellyfish' },\r\n    sea_anemone: { rarity: 'common', label: 'Sea Anemone' },\r\n    coral: { rarity: 'common', label: 'Coral' },\r\n    barnacle: { rarity: 'common', label: 'Barnacle' },\r\n    guinea_pig: { rarity: 'common', label: 'Guinea Pig' },\r\n    ferret: { rarity: 'common', label: 'Ferret' },\r\n    hamster: { rarity: 'common', label: 'Hamster' },\r\n    alpaca: { rarity: 'common', label: 'Alpaca' },\r\n    llama: { rarity: 'common', label: 'Llama' },\r\n    domestic_goose: { rarity: 'common', label: 'Domestic Goose' },\r\n    domestic_duck: { rarity: 'common', label: 'Domestic Duck' },\r\n    budgie: { rarity: 'common', label: 'Budgie / Small Parrot' },\r\n    pug: { rarity: 'common', label: 'Pug' },\r\n    golden_retriever: { rarity: 'common', label: 'Golden Retriever' },\r\n\r\n    highland_cow: { rarity: 'common', label: 'Highland Cow' },\r\n    dove: { rarity: 'common', label: 'Dove' },\r\n    canary: { rarity: 'common', label: 'Canary' },\r\n    thrush: { rarity: 'common', label: 'Thrush' },\r\n    salmon: { rarity: 'common', label: 'Salmon' },\r\n    grouper: { rarity: 'common', label: 'Grouper' },\r\n    tilapia: { rarity: 'common', label: 'Tilapia' },\r\n    bluegill: { rarity: 'common', label: 'Bluegill' },\r\n    carp: { rarity: 'common', label: 'Carp' },\r\n    parrotfish: { rarity: 'common', label: 'Parrotfish' },\r\n    sea_bass: { rarity: 'common', label: 'Sea Bass' },\r\n    shark: { rarity: 'common', label: 'Shark' },\r\n    mackerel: { rarity: 'common', label: 'Mackerel' },\r\n    herring: { rarity: 'common', label: 'Herring' },\r\n    sardine: { rarity: 'common', label: 'Sardine' },\r\n    newt: { rarity: 'common', label: 'Newt' },\r\n    barn_cat: { rarity: 'common', label: 'Barn Cat' },\r\n    shepherd_dog: { rarity: 'common', label: 'Shepherd Dog' },\r\n    calf: { rarity: 'common', label: 'Calf' },\r\n    foal: { rarity: 'common', label: 'Foal' },\r\n    duckling: { rarity: 'common', label: 'Duckling' },\r\n    chick: { rarity: 'common', label: 'Chick' },\r\n\r\n    // ≡ƒƒª UNCOMMON (80 animals)\r\n    deer: { rarity: 'uncommon', label: 'Deer' },\r\n    elk: { rarity: 'uncommon', label: 'Elk' },\r\n    moose: { rarity: 'uncommon', label: 'Moose' },\r\n    red_fox: { rarity: 'uncommon', label: 'Red Fox' },\r\n    coyote: { rarity: 'uncommon', label: 'Coyote' },\r\n    bobcat: { rarity: 'uncommon', label: 'Bobcat' },\r\n    lynx: { rarity: 'uncommon', label: 'Lynx' },\r\n    ocelot: { rarity: 'uncommon', label: 'Ocelot' },\r\n    badger: { rarity: 'uncommon', label: 'Badger' },\r\n    porcupine: { rarity: 'uncommon', label: 'Porcupine' },\r\n    armadillo: { rarity: 'uncommon', label: 'Armadillo' },\r\n    bat: { rarity: 'uncommon', label: 'Bat' },\r\n    meerkat: { rarity: 'uncommon', label: 'Meerkat' },\r\n    sloth: { rarity: 'uncommon', label: 'Sloth' },\r\n    koala: { rarity: 'uncommon', label: 'Koala' },\r\n    wallaby: { rarity: 'uncommon', label: 'Wallaby' },\r\n    kangaroo: { rarity: 'uncommon', label: 'Kangaroo' },\r\n    owl: { rarity: 'uncommon', label: 'Owl' },\r\n    barn_owl: { rarity: 'uncommon', label: 'Barn Owl' },\r\n    great_horned_owl: { rarity: 'uncommon', label: 'Great Horned Owl' },\r\n    eagle: { rarity: 'uncommon', label: 'Eagle' },\r\n    red_tailed_hawk: { rarity: 'uncommon', label: 'Red-tailed Hawk' },\r\n    falcon: { rarity: 'uncommon', label: 'Falcon' },\r\n    heron: { rarity: 'uncommon', label: 'Heron' },\r\n    egret: { rarity: 'uncommon', label: 'Egret' },\r\n    crane: { rarity: 'uncommon', label: 'Crane' },\r\n    pelican: { rarity: 'uncommon', label: 'Pelican' },\r\n    flamingo: { rarity: 'uncommon', label: 'Flamingo' },\r\n    peacock: { rarity: 'uncommon', label: 'Peacock' },\r\n    parrot: { rarity: 'uncommon', label: 'Parrot' },\r\n    woodpecker: { rarity: 'uncommon', label: 'Woodpecker' },\r\n    hummingbird: { rarity: 'uncommon', label: 'Hummingbird' },\r\n    iguana: { rarity: 'uncommon', label: 'Iguana' },\r\n    bearded_dragon: { rarity: 'uncommon', label: 'Bearded Dragon' },\r\n    chameleon: { rarity: 'uncommon', label: 'Chameleon' },\r\n    tortoise: { rarity: 'uncommon', label: 'Tortoise' },\r\n    tree_frog: { rarity: 'uncommon', label: 'Tree Frog' },\r\n    salamander: { rarity: 'uncommon', label: 'Salamander' },\r\n    axolotl: { rarity: 'uncommon', label: 'Axolotl' },\r\n    koi: { rarity: 'uncommon', label: 'Koi' },\r\n    clownfish: { rarity: 'uncommon', label: 'Clownfish' },\r\n    angelfish: { rarity: 'uncommon', label: 'Angelfish' },\r\n    catfish: { rarity: 'uncommon', label: 'Catfish' },\r\n    sea_lion: { rarity: 'uncommon', label: 'Sea Lion' },\r\n    harbor_seal: { rarity: 'uncommon', label: 'Harbor Seal' },\r\n    stingray: { rarity: 'uncommon', label: 'Stingray' },\r\n    seahorse: { rarity: 'uncommon', label: 'Seahorse' },\r\n    octopus: { rarity: 'uncommon', label: 'Octopus' },\r\n    warthog: { rarity: 'uncommon', label: 'Warthog' },\r\n    mule_deer: { rarity: 'uncommon', label: 'Mule Deer' },\r\n    wild_turkey: { rarity: 'uncommon', label: 'Wild Turkey' },\r\n    ibex: { rarity: 'uncommon', label: 'Ibex' },\r\n    mountain_goat: { rarity: 'uncommon', label: 'Mountain Goat' },\r\n    dik_dik: { rarity: 'uncommon', label: 'Dik-Dik' },\r\n    vulture: { rarity: 'uncommon', label: 'Vulture' },\r\n    puffin: { rarity: 'uncommon', label: 'Puffin' },\r\n    quail: { rarity: 'uncommon', label: 'Quail' },\r\n    pheasant: { rarity: 'uncommon', label: 'Pheasant' },\r\n    grouse: { rarity: 'uncommon', label: 'Grouse' },\r\n    horned_lizard: { rarity: 'uncommon', label: 'Horned Lizard' },\r\n\r\n    cockatoo: { rarity: 'uncommon', label: 'Cockatoo' },\r\n    parakeet: { rarity: 'uncommon', label: 'Parakeet' },\r\n    kestrel: { rarity: 'uncommon', label: 'Kestrel' },\r\n    eagle_owl: { rarity: 'uncommon', label: 'Eagle Owl' },\r\n    swan: { rarity: 'uncommon', label: 'Swan' },\r\n    stork: { rarity: 'uncommon', label: 'Stork' },\r\n    ibis: { rarity: 'uncommon', label: 'Ibis' },\r\n    camel: { rarity: 'uncommon', label: 'Camel' },\r\n    dromedary: { rarity: 'uncommon', label: 'Dromedary' },\r\n    wild_boar: { rarity: 'uncommon', label: 'Wild Boar' },\r\n    capybara: { rarity: 'uncommon', label: 'Capybara' },\r\n    marmot: { rarity: 'uncommon', label: 'Marmot' },\r\n\r\n    // ≡ƒƒº RARE (60 animals)\r\n    giraffe: { rarity: 'rare', label: 'Giraffe' },\r\n    zebra: { rarity: 'rare', label: 'Zebra' },\r\n    wildebeest: { rarity: 'rare', label: 'Wildebeest' },\r\n    african_buffalo: { rarity: 'rare', label: 'African Buffalo' },\r\n    bison: { rarity: 'rare', label: 'Bison' },\r\n    hyena: { rarity: 'rare', label: 'Hyena' },\r\n    antelope: { rarity: 'rare', label: 'Antelope' },\r\n    gazelle: { rarity: 'rare', label: 'Gazelle' },\r\n    okapi: { rarity: 'rare', label: 'Okapi' },\r\n    tapir: { rarity: 'rare', label: 'Tapir' },\r\n    cougar: { rarity: 'rare', label: 'Cougar' },\r\n    snow_leopard_rare: { rarity: 'rare', label: 'Snow Leopard' },\r\n    leopard: { rarity: 'rare', label: 'Leopard' },\r\n    jaguar: { rarity: 'rare', label: 'Jaguar' },\r\n    baboon: { rarity: 'rare', label: 'Baboon' },\r\n    mandrill: { rarity: 'rare', label: 'Mandrill' },\r\n    gibbon: { rarity: 'rare', label: 'Gibbon' },\r\n    lemur: { rarity: 'rare', label: 'Lemur' },\r\n    capuchin_monkey: { rarity: 'rare', label: 'Capuchin Monkey' },\r\n    manatee: { rarity: 'rare', label: 'Manatee' },\r\n    dolphin: { rarity: 'rare', label: 'Dolphin' },\r\n    beluga: { rarity: 'rare', label: 'Beluga' },\r\n    sea_otter: { rarity: 'rare', label: 'Sea Otter' },\r\n    narwhal: { rarity: 'rare', label: 'Narwhal' },\r\n    condor: { rarity: 'rare', label: 'Condor' },\r\n    vulture_rare: { rarity: 'rare', label: 'Vulture' },\r\n    albatross: { rarity: 'rare', label: 'Albatross' },\r\n    secretary_bird: { rarity: 'rare', label: 'Secretary Bird' },\r\n    emu: { rarity: 'rare', label: 'Emu' },\r\n    ostrich: { rarity: 'rare', label: 'Ostrich' },\r\n    hornbill: { rarity: 'rare', label: 'Hornbill' },\r\n    toucan: { rarity: 'rare', label: 'Toucan' },\r\n    kookaburra: { rarity: 'rare', label: 'Kookaburra' },\r\n    alligator: { rarity: 'rare', label: 'Alligator' },\r\n    monitor_lizard: { rarity: 'rare', label: 'Monitor Lizard' },\r\n    boa: { rarity: 'rare', label: 'Boa' },\r\n    python: { rarity: 'rare', label: 'Python' },\r\n    rattlesnake: { rarity: 'rare', label: 'Rattlesnake' },\r\n    poison_dart_frog: { rarity: 'rare', label: 'Poison Dart Frog' },\r\n    glass_frog: { rarity: 'rare', label: 'Glass Frog' },\r\n    manta_ray: { rarity: 'rare', label: 'Manta Ray' },\r\n    lionfish: { rarity: 'rare', label: 'Lionfish' },\r\n    nudibranch: { rarity: 'rare', label: 'Nudibranch' },\r\n    whale_shark: { rarity: 'rare', label: 'Whale Shark' },\r\n\r\n    walrus: { rarity: 'rare', label: 'Walrus' },\r\n    marlin: { rarity: 'rare', label: 'Marlin' },\r\n    swordfish: { rarity: 'rare', label: 'Swordfish' },\r\n    barracuda: { rarity: 'rare', label: 'Barracuda' },\r\n    giant_tortoise: { rarity: 'rare', label: 'Giant Tortoise' },\r\n\r\n    // ≡ƒƒ¬ EPIC (40 animals)\r\n    tiger: { rarity: 'epic', label: 'Tiger' },\r\n    cheetah: { rarity: 'epic', label: 'Cheetah' },\r\n    black_panther: { rarity: 'epic', label: 'Black Panther Variant' },\r\n    white_tiger: { rarity: 'epic', label: 'White Tiger' },\r\n    grizzly_bear: { rarity: 'epic', label: 'Grizzly Bear' },\r\n    black_bear: { rarity: 'epic', label: 'Black Bear' },\r\n    polar_bear: { rarity: 'epic', label: 'Polar Bear' },\r\n    wolf: { rarity: 'epic', label: 'Wolf' },\r\n    african_wild_dog: { rarity: 'epic', label: 'African Wild Dog' },\r\n    red_panda: { rarity: 'epic', label: 'Red Panda' },\r\n    aardvark: { rarity: 'epic', label: 'Aardvark' },\r\n    platypus: { rarity: 'epic', label: 'Platypus' },\r\n    echidna: { rarity: 'epic', label: 'Echidna' },\r\n    tamarin: { rarity: 'epic', label: 'Tamarin' },\r\n    slender_loris: { rarity: 'epic', label: 'Slender Loris' },\r\n    bald_eagle: { rarity: 'epic', label: 'Bald Eagle' },\r\n    golden_eagle: { rarity: 'epic', label: 'Golden Eagle' },\r\n    snowy_owl: { rarity: 'epic', label: 'Snowy Owl' },\r\n    kingfisher: { rarity: 'epic', label: 'Kingfisher' },\r\n    scarlet_macaw: { rarity: 'epic', label: 'Scarlet Macaw' },\r\n    resplendent_quetzal: { rarity: 'epic', label: 'Resplendent Quetzal' },\r\n    orca: { rarity: 'epic', label: 'Orca' },\r\n    humpback_whale: { rarity: 'epic', label: 'Humpback Whale' },\r\n    blue_whale: { rarity: 'epic', label: 'Blue Whale' },\r\n    komodo_dragon: { rarity: 'epic', label: 'Komodo Dragon' },\r\n    king_cobra: { rarity: 'epic', label: 'King Cobra' },\r\n    hellbender: { rarity: 'epic', label: 'Hellbender' },\r\n    giant_salamander: { rarity: 'epic', label: 'Giant Salamander' },\r\n    caracal: { rarity: 'epic', label: 'Caracal' },\r\n    serval: { rarity: 'epic', label: 'Serval' },\r\n    saiga_antelope: { rarity: 'epic', label: 'Saiga Antelope' },\r\n    musk_ox: { rarity: 'epic', label: 'Musk Ox' },\r\n    vicuna: { rarity: 'epic', label: 'Vicuna' },\r\n    pangolin: { rarity: 'epic', label: 'Pangolin' },\r\n\r\n    arctic_fox: { rarity: 'epic', label: 'Arctic Fox' },\r\n    fennec_fox: { rarity: 'epic', label: 'Fennec Fox' },\r\n    reindeer: { rarity: 'epic', label: 'Reindeer' },\r\n    yak: { rarity: 'epic', label: 'Yak' },\r\n    hippo: { rarity: 'epic', label: 'Hippo' },\r\n    chimpanzee: { rarity: 'epic', label: 'Chimpanzee' },\r\n    bonobo: { rarity: 'epic', label: 'Bonobo' },\r\n    proboscis_monkey: { rarity: 'epic', label: 'Proboscis Monkey' },\r\n\r\n    // ≡ƒƒ½ LEGENDARY (20 animals)\r\n    snow_leopard_legendary: { rarity: 'legendary', label: 'Snow Leopard' },\r\n    amur_leopard: { rarity: 'legendary', label: 'Amur Leopard' },\r\n    sumatran_tiger: { rarity: 'legendary', label: 'Sumatran Tiger' },\r\n    javan_rhino: { rarity: 'legendary', label: 'Javan Rhino' },\r\n    black_rhino: { rarity: 'legendary', label: 'Black Rhino' },\r\n    mountain_gorilla: { rarity: 'legendary', label: 'Mountain Gorilla' },\r\n    cross_river_gorilla: { rarity: 'legendary', label: 'Cross River Gorilla' },\r\n    wild_orangutan: { rarity: 'legendary', label: 'Wild Orangutan' },\r\n    saola: { rarity: 'legendary', label: 'Saola' },\r\n    markhor: { rarity: 'legendary', label: 'Markhor' },\r\n    harpy_eagle: { rarity: 'legendary', label: 'Harpy Eagle' },\r\n    philippine_eagle: { rarity: 'legendary', label: 'Philippine Eagle' },\r\n    shoebill_stork: { rarity: 'legendary', label: 'Shoebill Stork' },\r\n    kakapo: { rarity: 'legendary', label: 'Kakapo' },\r\n    whale_shark_legendary: { rarity: 'legendary', label: 'Whale Shark' },\r\n    giant_squid: { rarity: 'legendary', label: 'Giant Squid' },\r\n    dugong: { rarity: 'legendary', label: 'Dugong' },\r\n    irrawaddy_dolphin: { rarity: 'legendary', label: 'Irrawaddy Dolphin' },\r\n    arctic_wolf: { rarity: 'legendary', label: 'Arctic Wolf' },\r\n    ethiopian_wolf: { rarity: 'legendary', label: 'Ethiopian Wolf' },\r\n\r\n    gila_monster: { rarity: 'legendary', label: 'Gila Monster' },\r\n    anaconda: { rarity: 'legendary', label: 'Anaconda' },\r\n    basilisk_lizard: { rarity: 'legendary', label: 'Basilisk Lizard' },\r\n    frilled_lizard: { rarity: 'legendary', label: 'Frilled Lizard' },\r\n    hammerhead_shark: { rarity: 'legendary', label: 'Hammerhead Shark' },\r\n    great_white_shark: { rarity: 'legendary', label: 'Great White Shark' },\r\n    kiwi: { rarity: 'legendary', label: 'Kiwi' },\r\n    california_condor: { rarity: 'legendary', label: 'California Condor' },\r\n    tarsier: { rarity: 'legendary', label: 'Tarsier' },\r\n\r\n    // ≡ƒƒº MYTHIC (10 animals)\r\n    ivory_billed_woodpecker: { rarity: 'mythic', label: 'Ivory-Billed Woodpecker' },\r\n    amur_tiger_wild: { rarity: 'mythic', label: 'Amur Tiger' },\r\n    black_footed_ferret: { rarity: 'mythic', label: 'Black-Footed Ferret' },\r\n    pink_amazon_dolphin: { rarity: 'mythic', label: 'Pink Amazon Dolphin' },\r\n    spirit_bear: { rarity: 'mythic', label: 'Spirit Bear' },\r\n    giant_river_otter: { rarity: 'mythic', label: 'Giant River Otter' },\r\n    snowy_mountain_lynx: { rarity: 'mythic', label: 'Snowy Mountain Lynx Variant' },\r\n    white_orca: { rarity: 'mythic', label: 'White Orca' },\r\n    albino_alligator: { rarity: 'mythic', label: 'Albino Alligator' },\r\n    albino_moose: { rarity: 'mythic', label: 'Albino Moose' },\r\n    mystery_slot_1: { rarity: 'mythic', label: 'Mystery Creature 1' },\r\n    mystery_slot_2: { rarity: 'mythic', label: 'Mystery Creature 2' }\r\n};\r\n\r\n// Bugs Configuration\r\nexport const BUGS_CONFIG: Record<string, RarityConfig> = {\r\n    // ≡ƒƒ½ LEGENDARY (S-Tier: Extremely Rare)\r\n    lord_howe_island_stick_insect: { rarity: 'legendary', label: 'Lord Howe Island Stick Insect' },\r\n    giant_fijian_longhorn_beetle: { rarity: 'legendary', label: 'Giant Fijian Longhorn Beetle' },\r\n    polynesian_tree_snail: { rarity: 'legendary', label: 'Polynesian Tree Snail' },\r\n    seychelles_golden_beetle: { rarity: 'legendary', label: 'Seychelles Golden Beetle' },\r\n    american_burying_beetle: { rarity: 'legendary', label: 'American Burying Beetle' },\r\n    dinacoma_beetle: { rarity: 'legendary', label: 'Dinacoma Beetle' },\r\n    california_beetle: { rarity: 'legendary', label: 'California Beetle' },\r\n    franklins_bumblebee: { rarity: 'legendary', label: 'Franklin\\'s Bumblebee' },\r\n    rusty_patched_bumblebee: { rarity: 'legendary', label: 'Rusty Patched Bumblebee' },\r\n    socotra_island_giant_centipede: { rarity: 'legendary', label: 'Socotra Island Giant Centipede' },\r\n    dracula_ant: { rarity: 'legendary', label: 'Dracula Ant' },\r\n    giant_weta: { rarity: 'legendary', label: 'Giant Weta' },\r\n    kauai_cave_wolf_spider: { rarity: 'legendary', label: 'Kauai Cave Wolf Spider' },\r\n    kauai_cave_amphipod: { rarity: 'legendary', label: 'Kauai Cave Amphipod' },\r\n    hines_emerald_dragonfly: { rarity: 'legendary', label: 'Hine\\'s Emerald Dragonfly' },\r\n    wallaces_giant_bee: { rarity: 'legendary', label: 'Wallace\\'s Giant Bee' },\r\n    blue_calamintha_bee: { rarity: 'legendary', label: 'Blue Calamintha Bee' },\r\n    malaysian_ghost_mantis: { rarity: 'legendary', label: 'Malaysian Ghost Mantis' },\r\n    devils_flower_mantis: { rarity: 'legendary', label: 'Devil\\'s Flower Mantis' },\r\n    orchid_mantis: { rarity: 'legendary', label: 'Orchid Mantis' },\r\n    titan_beetle: { rarity: 'legendary', label: 'Titan Beetle' },\r\n    goliath_beetle: { rarity: 'legendary', label: 'Goliath Beetle' },\r\n    hercules_beetle: { rarity: 'legendary', label: 'Hercules Beetle' },\r\n    golden_stag_beetle: { rarity: 'legendary', label: 'Golden Stag Beetle' },\r\n    sabertooth_longhorn_beetle: { rarity: 'legendary', label: 'Sabertooth Longhorn Beetle' },\r\n\r\n    // ≡ƒƒ¬ EPIC (A-Tier: Very Rare)\r\n    new_zealand_giant_dragonfly: { rarity: 'epic', label: 'New Zealand Giant Dragonfly' },\r\n    queen_alexandras_birdwing_butterfly: { rarity: 'epic', label: 'Queen Alexandra\\'s Birdwing Butterfly' },\r\n    attenboroughs_pitcher_plant_midge: { rarity: 'epic', label: 'Attenborough\\'s Pitcher Plant Midge' },\r\n    madagascan_sunset_moth: { rarity: 'epic', label: 'Madagascan Sunset Moth' },\r\n    red_slender_loris_tick_mite: { rarity: 'epic', label: 'Red Slender Loris Tick Mite' },\r\n    romanian_cave_leech: { rarity: 'epic', label: 'Romanian Cave Leech' },\r\n    giant_burrowing_cockroach: { rarity: 'epic', label: 'Giant Burrowing Cockroach' },\r\n    white_spotted_walking_stick: { rarity: 'epic', label: 'White-Spotted Walking Stick' },\r\n    leaf_insect_rare: { rarity: 'epic', label: 'Leaf Insect' },\r\n    stick_insect_rare: { rarity: 'epic', label: 'Stick Insect' },\r\n    pink_dragon_millipede: { rarity: 'epic', label: 'Pink Dragon Millipede' },\r\n    florida_leafwing_butterfly: { rarity: 'epic', label: 'Florida Leafwing Butterfly' },\r\n    miami_blue_butterfly: { rarity: 'epic', label: 'Miami Blue Butterfly' },\r\n    xerces_blue: { rarity: 'epic', label: 'Xerces Blue' },\r\n    australian_peacock_spider: { rarity: 'epic', label: 'Australian Peacock Spider' },\r\n    seychelles_mangrove_crab: { rarity: 'epic', label: 'Seychelles Mangrove Crab' },\r\n    ant_mimicking_jumping_spider: { rarity: 'epic', label: 'Ant-Mimicking Jumping Spider' },\r\n    ant_mimicking_beetle: { rarity: 'epic', label: 'Ant-Mimicking Beetle' },\r\n    chinese_golden_mantis: { rarity: 'epic', label: 'Chinese Golden Mantis' },\r\n    rare_mantid_ghost_morphs: { rarity: 'epic', label: 'Rare Mantid Ghost Morphs' },\r\n    jewel_beetle_rare: { rarity: 'epic', label: 'Jewel Beetle' },\r\n    pseudoscorpion_cave: { rarity: 'epic', label: 'Cave Pseudoscorpion' },\r\n    hellgrammite_rare: { rarity: 'epic', label: 'Hellgrammite' },\r\n    dobsonfly_rare: { rarity: 'epic', label: 'Dobsonfly' },\r\n    japanese_giant_hornet: { rarity: 'epic', label: 'Japanese Giant Hornet' },\r\n    madagascar_hissing_roach: { rarity: 'epic', label: 'Madagascar Hissing Roach' },\r\n    african_flower_beetle: { rarity: 'epic', label: 'African Flower Beetle' },\r\n    velvet_worm: { rarity: 'epic', label: 'Velvet Worm' },\r\n    tarantula_rare: { rarity: 'epic', label: 'Tarantula' },\r\n    trapdoor_spider_rare: { rarity: 'epic', label: 'Trapdoor Spider' },\r\n    funnel_web_spider_rare: { rarity: 'epic', label: 'Funnel Web Spider' },\r\n    blue_death_feigning_beetle: { rarity: 'epic', label: 'Blue Death Feigning Beetle' },\r\n    darkling_beetle_rare: { rarity: 'epic', label: 'Darkling Beetle' },\r\n    leafcutter_ant_rare: { rarity: 'epic', label: 'Leafcutter Ant' },\r\n    atlas_moth: { rarity: 'epic', label: 'Atlas Moth' },\r\n\r\n    // ≡ƒƒº RARE (B-Tier: Uncommon/Special)\r\n    emperor_scorpion: { rarity: 'rare', label: 'Emperor Scorpion' },\r\n    vinegaroon: { rarity: 'rare', label: 'Vinegaroon' },\r\n    whip_scorpion: { rarity: 'rare', label: 'Whip Scorpion' },\r\n    jerusalem_cricket: { rarity: 'rare', label: 'Jerusalem Cricket' },\r\n    mole_cricket: { rarity: 'rare', label: 'Mole Cricket' },\r\n    weta_common: { rarity: 'rare', label: 'Weta' },\r\n    stick_insect_common: { rarity: 'rare', label: 'Stick Insect' },\r\n    leaf_insect_common: { rarity: 'rare', label: 'Leaf Insect' },\r\n    orchid_bee: { rarity: 'rare', label: 'Orchid Bee' },\r\n    metallic_sweat_bee: { rarity: 'rare', label: 'Metallic Sweat Bee' },\r\n    carpenter_bee: { rarity: 'rare', label: 'Carpenter Bee' },\r\n    longhorn_beetle: { rarity: 'rare', label: 'Longhorn Beetle' },\r\n    ground_beetle_uncommon: { rarity: 'rare', label: 'Ground Beetle' },\r\n    tiger_beetle_rare: { rarity: 'rare', label: 'Tiger Beetle' },\r\n    scarab_beetle: { rarity: 'rare', label: 'Scarab Beetle' },\r\n    assassin_bug: { rarity: 'rare', label: 'Assassin Bug' },\r\n    wheel_bug: { rarity: 'rare', label: 'Wheel Bug' },\r\n    kissing_bug: { rarity: 'rare', label: 'Kissing Bug' },\r\n    water_scorpion: { rarity: 'rare', label: 'Water Scorpion' },\r\n    giant_water_bug: { rarity: 'rare', label: 'Giant Water Bug' },\r\n    diving_beetle: { rarity: 'rare', label: 'Diving Beetle' },\r\n    whirligig_beetle: { rarity: 'rare', label: 'Whirligig Beetle' },\r\n    emerald_cockroach_wasp: { rarity: 'rare', label: 'Emerald Cockroach Wasp' },\r\n    blue_carpenter_bee: { rarity: 'rare', label: 'Blue Carpenter Bee' },\r\n    paper_wasp_rare: { rarity: 'rare', label: 'Paper Wasp' },\r\n    potter_wasp: { rarity: 'rare', label: 'Potter Wasp' },\r\n    sawfly: { rarity: 'rare', label: 'Sawfly' },\r\n    pine_sawfly: { rarity: 'rare', label: 'Pine Sawfly' },\r\n    stonefly: { rarity: 'rare', label: 'Stonefly' },\r\n    mayfly: { rarity: 'rare', label: 'Mayfly' },\r\n    caddisfly: { rarity: 'rare', label: 'Caddisfly' },\r\n    antlion: { rarity: 'rare', label: 'Antlion' },\r\n    mantisfly: { rarity: 'rare', label: 'Mantisfly' },\r\n    lacewing: { rarity: 'rare', label: 'Lacewing' },\r\n    hoverfly_uncommon: { rarity: 'rare', label: 'Hoverfly' },\r\n    clearwing_moth: { rarity: 'rare', label: 'Clearwing Moth' },\r\n    hawk_moth: { rarity: 'rare', label: 'Hawk Moth' },\r\n    sphinx_moth: { rarity: 'rare', label: 'Sphinx Moth' },\r\n    ghost_moth: { rarity: 'rare', label: 'Ghost Moth' },\r\n    cicada_rare: { rarity: 'rare', label: 'Cicada' },\r\n    termite_rare: { rarity: 'rare', label: 'Termite' },\r\n    velvet_ant: { rarity: 'rare', label: 'Velvet Ant' },\r\n    gall_wasp: { rarity: 'rare', label: 'Gall Wasp' },\r\n    tsetse_fly: { rarity: 'rare', label: 'Tsetse Fly' },\r\n    robber_fly: { rarity: 'rare', label: 'Robber Fly' },\r\n    dragonfly_uncommon: { rarity: 'rare', label: 'Dragonfly' },\r\n    damselfly_uncommon: { rarity: 'rare', label: 'Damselfly' },\r\n    funnel_weaver_spider: { rarity: 'rare', label: 'Funnel Weaver Spider' },\r\n    orb_weaver_rare: { rarity: 'rare', label: 'Orb Weaver' },\r\n    wolf_spider_rare: { rarity: 'rare', label: 'Wolf Spider' },\r\n    camel_spider: { rarity: 'rare', label: 'Camel Spider' },\r\n    desert_centipede: { rarity: 'rare', label: 'Desert Centipede' },\r\n    giant_african_millipede: { rarity: 'rare', label: 'Giant African Millipede' },\r\n    house_centipede_rare: { rarity: 'rare', label: 'House Centipede' },\r\n    leaf_mimic_katydid: { rarity: 'rare', label: 'Leaf-Mimic Katydid' },\r\n    treehopper: { rarity: 'rare', label: 'Treehopper' },\r\n    planthopper: { rarity: 'rare', label: 'Planthopper' },\r\n    leafhopper: { rarity: 'rare', label: 'Leafhopper' },\r\n    bristletail: { rarity: 'rare', label: 'Bristletail' },\r\n    firebrat: { rarity: 'rare', label: 'Firebrat' },\r\n\r\n    // ≡ƒƒª UNCOMMON (C-Tier: Common-Rare)\r\n    firefly: { rarity: 'uncommon', label: 'Firefly' },\r\n    spittlebug: { rarity: 'uncommon', label: 'Spittlebug' },\r\n    froghopper: { rarity: 'uncommon', label: 'Froghopper' },\r\n    shield_bug: { rarity: 'uncommon', label: 'Shield Bug' },\r\n    boxelder_bug: { rarity: 'uncommon', label: 'Boxelder Bug' },\r\n    aphid_rare: { rarity: 'uncommon', label: 'Aphid' },\r\n    thrip: { rarity: 'uncommon', label: 'Thrip' },\r\n    scale_insect: { rarity: 'uncommon', label: 'Scale Insect' },\r\n    root_maggot: { rarity: 'uncommon', label: 'Root Maggot' },\r\n    leaf_miner: { rarity: 'uncommon', label: 'Leaf Miner' },\r\n    silverfish: { rarity: 'uncommon', label: 'Silverfish' },\r\n    book_louse: { rarity: 'uncommon', label: 'Book Louse' },\r\n    bark_louse: { rarity: 'uncommon', label: 'Bark Louse' },\r\n    springtail: { rarity: 'uncommon', label: 'Springtail' },\r\n    water_strider: { rarity: 'uncommon', label: 'Water Strider' },\r\n    back_swimmer: { rarity: 'uncommon', label: 'Back Swimmer' },\r\n    water_boatman: { rarity: 'uncommon', label: 'Water Boatman' },\r\n    soldier_fly: { rarity: 'uncommon', label: 'Soldier Fly' },\r\n    hoverfly: { rarity: 'uncommon', label: 'Hoverfly' },\r\n    flush_fly: { rarity: 'uncommon', label: 'Flush Fly' },\r\n    horse_fly: { rarity: 'uncommon', label: 'Horse Fly' },\r\n    botfly: { rarity: 'uncommon', label: 'Botfly' },\r\n    gall_midge: { rarity: 'uncommon', label: 'Gall Midge' },\r\n    crane_fly: { rarity: 'uncommon', label: 'Crane Fly' },\r\n    crane_fly_larva: { rarity: 'uncommon', label: 'Crane Fly Larva' },\r\n    ant_queen: { rarity: 'uncommon', label: 'Ant Queen' },\r\n    beetle_larva: { rarity: 'uncommon', label: 'Beetle Larva' },\r\n    caterpillar_common: { rarity: 'uncommon', label: 'Caterpillar' },\r\n    moth_caterpillar: { rarity: 'uncommon', label: 'Moth Caterpillar' },\r\n    earwig: { rarity: 'uncommon', label: 'Earwig' },\r\n    rove_beetle: { rarity: 'uncommon', label: 'Rove Beetle' },\r\n    weevil: { rarity: 'uncommon', label: 'Weevil' },\r\n    bark_beetle: { rarity: 'uncommon', label: 'Bark Beetle' },\r\n    carrion_beetle: { rarity: 'uncommon', label: 'Carrion Beetle' },\r\n    dung_beetle: { rarity: 'uncommon', label: 'Dung Beetle' },\r\n    seed_bug: { rarity: 'uncommon', label: 'Seed Bug' },\r\n    stink_bug: { rarity: 'uncommon', label: 'Stink Bug' },\r\n    water_mite: { rarity: 'uncommon', label: 'Water Mite' },\r\n    spider_mite: { rarity: 'uncommon', label: 'Spider Mite' },\r\n    harvestman: { rarity: 'uncommon', label: 'Harvestman' },\r\n\r\n    // ≡ƒƒ⌐ COMMON (D & E Tier: Very/Ultra Common)\r\n    housefly: { rarity: 'common', label: 'Housefly' },\r\n    fruit_fly: { rarity: 'common', label: 'Fruit Fly' },\r\n    mosquito: { rarity: 'common', label: 'Mosquito' },\r\n    gnat: { rarity: 'common', label: 'Gnat' },\r\n    wasp_common: { rarity: 'common', label: 'Wasp' },\r\n    bee_common: { rarity: 'common', label: 'Bee' },\r\n    cricket: { rarity: 'common', label: 'Cricket' },\r\n    grasshopper: { rarity: 'common', label: 'Grasshopper' },\r\n    katydid: { rarity: 'common', label: 'Katydid' },\r\n    carpenter_ant: { rarity: 'common', label: 'Carpenter Ant' },\r\n    fire_ant: { rarity: 'common', label: 'Fire Ant' },\r\n    black_ant: { rarity: 'common', label: 'Black Ant' },\r\n    weaver_ant: { rarity: 'common', label: 'Weaver Ant' },\r\n    millipede: { rarity: 'common', label: 'Millipede' },\r\n    centipede: { rarity: 'common', label: 'Centipede' },\r\n    daddy_long_legs: { rarity: 'common', label: 'Daddy Long Legs' },\r\n    jumping_spider: { rarity: 'common', label: 'Jumping Spider' },\r\n    orb_weaver: { rarity: 'common', label: 'Orb Weaver' },\r\n    garden_spider: { rarity: 'common', label: 'Garden Spider' },\r\n    funnel_web_spider: { rarity: 'common', label: 'Funnel Web Spider' },\r\n    moth_general: { rarity: 'common', label: 'Moth' },\r\n    butterfly_general: { rarity: 'common', label: 'Butterfly' },\r\n    beetle_common: { rarity: 'common', label: 'Beetle' },\r\n    house_centipede: { rarity: 'common', label: 'House Centipede' },\r\n    pill_bug: { rarity: 'common', label: 'Pill Bug / Roly Poly' },\r\n    woodlouse: { rarity: 'common', label: 'Woodlouse' },\r\n    cockroach: { rarity: 'common', label: 'Cockroach' },\r\n    earwig_common: { rarity: 'common', label: 'Earwig' },\r\n    thrip_common: { rarity: 'common', label: 'Thrip' },\r\n    ant_worker: { rarity: 'common', label: 'Ant Worker' },\r\n    house_spider: { rarity: 'common', label: 'House Spider' },\r\n    house_cricket: { rarity: 'common', label: 'House Cricket' },\r\n    house_centipede_common: { rarity: 'common', label: 'House Centipede' },\r\n    sowbug: { rarity: 'common', label: 'Sowbug' },\r\n    ant_general: { rarity: 'common', label: 'Ant' },\r\n    mosquito_ubiquitous: { rarity: 'common', label: 'Mosquito' },\r\n    fly_general: { rarity: 'common', label: 'Fly' },\r\n    fruit_fly_ubiquitous: { rarity: 'common', label: 'Fruit Fly' },\r\n    gnat_ubiquitous: { rarity: 'common', label: 'Gnat' },\r\n    common_moth: { rarity: 'common', label: 'Common Moth' }\r\n};\r\n\r\n// Terrain/Landforms with auto-rarity\r\nexport const TERRAIN_CONFIG: Record<string, RarityConfig> = {\r\n    // Common\r\n    forest: { rarity: 'common', label: 'Forest' },\r\n    meadow: { rarity: 'common', label: 'Meadow' },\r\n    hill: { rarity: 'common', label: 'Hill' },\r\n    stream: { rarity: 'common', label: 'Stream' },\r\n\r\n    // Uncommon\r\n    lake: { rarity: 'uncommon', label: 'Lake' },\r\n    river: { rarity: 'uncommon', label: 'River' },\r\n    valley: { rarity: 'uncommon', label: 'Valley' },\r\n    plateau: { rarity: 'uncommon', label: 'Plateau' },\r\n\r\n    // Rare\r\n    canyon: { rarity: 'rare', label: 'Canyon' },\r\n    waterfall: { rarity: 'rare', label: 'Waterfall' },\r\n    mountain: { rarity: 'rare', label: 'Mountain' },\r\n    cave: { rarity: 'rare', label: 'Cave' },\r\n\r\n    // Epic\r\n    glacier: { rarity: 'epic', label: 'Glacier' },\r\n    geyser: { rarity: 'epic', label: 'Geyser' },\r\n    hot_spring: { rarity: 'epic', label: 'Hot Spring' },\r\n    dunes: { rarity: 'epic', label: 'Sand Dunes' },\r\n\r\n    // Legendary\r\n    volcano: { rarity: 'legendary', label: 'Volcano' },\r\n    aurora: { rarity: 'legendary', label: 'Aurora' },\r\n    fjord: { rarity: 'legendary', label: 'Fjord' },\r\n    arch: { rarity: 'legendary', label: 'Natural Arch' }\r\n};\r\n\r\n// National Parks with auto-rarity\r\nexport const NATIONAL_PARKS_CONFIG: Record<string, RarityConfig> = {\r\n    // Common (smaller/less visited parks)\r\n    congaree: { rarity: 'common', label: 'Congaree National Park' },\r\n    dry_tortugas: { rarity: 'common', label: 'Dry Tortugas National Park' },\r\n    isle_royale: { rarity: 'common', label: 'Isle Royale National Park' },\r\n\r\n    // Uncommon\r\n    acadia: { rarity: 'uncommon', label: 'Acadia National Park' },\r\n    badlands: { rarity: 'uncommon', label: 'Badlands National Park' },\r\n    shenandoah: { rarity: 'uncommon', label: 'Shenandoah National Park' },\r\n\r\n    // Rare\r\n    grand_teton: { rarity: 'rare', label: 'Grand Teton National Park' },\r\n    rocky_mountain: { rarity: 'rare', label: 'Rocky Mountain National Park' },\r\n    sequoia: { rarity: 'rare', label: 'Sequoia National Park' },\r\n\r\n    // Epic\r\n    yosemite: { rarity: 'epic', label: 'Yosemite National Park' },\r\n    zion: { rarity: 'epic', label: 'Zion National Park' },\r\n    grand_canyon: { rarity: 'epic', label: 'Grand Canyon National Park' },\r\n\r\n    // Legendary\r\n    yellowstone: { rarity: 'legendary', label: 'Yellowstone National Park' },\r\n    glacier: { rarity: 'legendary', label: 'Glacier National Park' },\r\n    denali: { rarity: 'legendary', label: 'Denali National Park' }\r\n};\r\n\r\n// State Parks with auto-rarity (sample - can be expanded)\r\nexport const STATE_PARKS_CONFIG: Record<string, RarityConfig> = {\r\n    // Common (most state parks)\r\n    generic_state_park: { rarity: 'common', label: 'State Park' },\r\n\r\n    // Uncommon\r\n    adirondack: { rarity: 'uncommon', label: 'Adirondack Park' },\r\n    custer: { rarity: 'uncommon', label: 'Custer State Park' },\r\n\r\n    // Rare\r\n    porcupine_mountains: { rarity: 'rare', label: 'Porcupine Mountains State Park' },\r\n    valley_of_fire: { rarity: 'rare', label: 'Valley of Fire State Park' },\r\n\r\n    // Epic\r\n    anza_borrego: { rarity: 'epic', label: 'Anza-Borrego Desert State Park' },\r\n    baxter: { rarity: 'epic', label: 'Baxter State Park' }\r\n};\r\n\r\n// Helper function to get all tags for a category\r\nexport const getCategoryTags = (category: CardCategory): string[] => {\r\n    switch (category) {\r\n        case CARD_CATEGORIES.ANIMALS:\r\n            return Object.keys(ANIMALS_CONFIG).sort((a, b) =>\r\n                ANIMALS_CONFIG[a]!.label.localeCompare(ANIMALS_CONFIG[b]!.label)\r\n            );\r\n        case CARD_CATEGORIES.TERRAIN:\r\n            return Object.keys(TERRAIN_CONFIG).sort((a, b) =>\r\n                TERRAIN_CONFIG[a]!.label.localeCompare(TERRAIN_CONFIG[b]!.label)\r\n            );\r\n        case CARD_CATEGORIES.NATIONAL_PARKS:\r\n            return Object.keys(NATIONAL_PARKS_CONFIG).sort((a, b) =>\r\n                NATIONAL_PARKS_CONFIG[a]!.label.localeCompare(NATIONAL_PARKS_CONFIG[b]!.label)\r\n            );\r\n        case CARD_CATEGORIES.STATE_PARKS:\r\n            return Object.keys(STATE_PARKS_CONFIG).sort((a, b) =>\r\n                STATE_PARKS_CONFIG[a]!.label.localeCompare(STATE_PARKS_CONFIG[b]!.label)\r\n            );\r\n        case CARD_CATEGORIES.BUGS:\r\n            return Object.keys(BUGS_CONFIG).sort((a, b) =>\r\n                BUGS_CONFIG[a]!.label.localeCompare(BUGS_CONFIG[b]!.label)\r\n            );\r\n        default:\r\n            return [];\r\n    }\r\n};\r\n\r\n// Helper function to get rarity for a tag\r\nexport const getAutoRarity = (category: CardCategory, tag: string): string | null => {\r\n    let config: Record<string, RarityConfig>;\r\n    switch (category) {\r\n        case CARD_CATEGORIES.ANIMALS:\r\n            config = ANIMALS_CONFIG;\r\n            break;\r\n        case CARD_CATEGORIES.TERRAIN:\r\n            config = TERRAIN_CONFIG;\r\n            break;\r\n        case CARD_CATEGORIES.NATIONAL_PARKS:\r\n            config = NATIONAL_PARKS_CONFIG;\r\n            break;\r\n        case CARD_CATEGORIES.STATE_PARKS:\r\n            config = STATE_PARKS_CONFIG;\r\n            break;\r\n        case CARD_CATEGORIES.BUGS:\r\n            config = BUGS_CONFIG;\r\n            break;\r\n        default:\r\n            return null;\r\n    }\r\n    return config[tag]?.rarity || null;\r\n};\r\n\r\n// Helper function to get label for a tag\r\nexport const getTagLabel = (category: string, tag: string): string => {\r\n    let config: Record<string, RarityConfig>;\r\n    switch (category) {\r\n        case CARD_CATEGORIES.ANIMALS:\r\n            config = ANIMALS_CONFIG;\r\n            break;\r\n        case CARD_CATEGORIES.TERRAIN:\r\n            config = TERRAIN_CONFIG;\r\n            break;\r\n        case CARD_CATEGORIES.NATIONAL_PARKS:\r\n            config = NATIONAL_PARKS_CONFIG;\r\n            break;\r\n        case CARD_CATEGORIES.STATE_PARKS:\r\n            config = STATE_PARKS_CONFIG;\r\n            break;\r\n        case CARD_CATEGORIES.BUGS:\r\n            config = BUGS_CONFIG;\r\n            break;\r\n        default:\r\n            return tag;\r\n    }\r\n    return config[tag]?.label || tag;\r\n};\r\n\r\n// Get all parks for autocomplete (Merged with PARKS_DATA)\r\nexport const getAllParks = (): { key: string; label: string; rarity: string; type: string }[] => {\r\n    return PARKS_DATA.map(park => {\r\n        // Determine config based on type\r\n        const config = park.parkType === 'national' ? NATIONAL_PARKS_CONFIG : STATE_PARKS_CONFIG;\r\n\r\n        // Check if we have a specific config for this park ID (using the ID as key if it matches, or trying to match by name if needed)\r\n        // The existing config keys (e.g., 'yosemite') might not match PARKS_DATA ids (e.g., 'yosemite-np') exactly in all cases.\r\n        // Let's try to find a match.\r\n\r\n        // Strategy: \r\n        // 1. Try direct key match (unlikely given different naming conventions in some cases)\r\n        // 2. Try to find by label match\r\n\r\n        let rarity = park.parkType === 'national' ? 'uncommon' : 'common'; // Defaults\r\n        let label = park.parkName;\r\n\r\n        // Append \"National Park\" or \"State Park\" if not present for display consistency with old list\r\n        if (park.parkType === 'national' && !label.includes('National Park')) {\r\n            label = `${label} National Park`;\r\n        } else if (park.parkType === 'state' && !label.includes('State Park')) {\r\n            label = `${label} State Park`;\r\n        }\r\n\r\n        // Look for overrides in our manual config\r\n        const configEntry = Object.entries(config).find(([key, val]) => {\r\n            // Check if our manual label matches the generated label or the raw park name\r\n            return val.label === label || val.label.includes(park.parkName);\r\n        });\r\n\r\n        if (configEntry) {\r\n            rarity = configEntry[1].rarity;\r\n        }\r\n\r\n        return {\r\n            key: park.parkId,\r\n            label: label,\r\n            rarity: rarity,\r\n            type: park.parkType\r\n        };\r\n    });\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\core\\constants\\parksData.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\core\\constants\\searchFilters.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\core\\constants\\tagCategories.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\core\\constants\\tagConfig.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\core\\film\\FilmSlideCache.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\core\\film\\FilmSlideRenderer.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'postId' is defined but never used. Allowed unused args must match /^_/u.","line":19,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":33},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'slideIndex' is defined but never used. Allowed unused args must match /^_/u.","line":19,"column":35,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":45},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'reject' is defined but never used. Allowed unused args must match /^_/u.","line":40,"column":41,"nodeType":"Identifier","messageId":"unusedVar","endLine":40,"endColumn":47},{"ruleId":"no-unused-labels","severity":2,"message":"'displayPosition:' is defined but never used.","line":69,"column":17,"nodeType":"Identifier","messageId":"unused","endLine":69,"endColumn":32,"fix":{"range":[2804,2838],"text":""}}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":1,"fixableWarningCount":0,"source":"// Image loader import removed - using native Image for canvas drawing\r\n\r\ninterface RenderOptions {\r\n    postId: string;\r\n    slideIndex: number;\r\n    images: string[]; // URLs of images to include (usually 1, sometimes multi)\r\n    frameNumber: string;\r\n    edgeCode: string;\r\n    width?: number; // Target width, default 1080 or window width\r\n}\r\n\r\n/**\r\n * FilmSlideRenderer\r\n * \r\n * Composites images and film borders into a single OffscreenCanvas (or Canvas).\r\n * Returns a Blob URL.\r\n */\r\nexport const FilmSlideRenderer = {\r\n    renderSlide: async ({ postId, slideIndex, images, frameNumber, edgeCode, width = 1080 }: RenderOptions): Promise<string> => {\r\n        // 1. Setup Canvas\r\n        const canvas = document.createElement('canvas');\r\n        // Aspect Ratio for film frame roughly 1080x1350 or similar vertical usage\r\n        // A single frame unit in FilmStripPost includes tracks. Let's approximate a 4:5 ratio or match source.\r\n        const height = Math.round(width * 1.25);\r\n        canvas.width = width;\r\n        canvas.height = height;\r\n        const ctx = canvas.getContext('2d');\r\n        if (!ctx) throw new Error(\"Canvas context not supported\");\r\n\r\n        // 2. Load Image(s)\r\n        const imgSrc = images[0] || \"\"; // Focusing on primary image for the slide\r\n        let imgBitmap: HTMLImageElement | ImageBitmap | null = null;\r\n\r\n        try {\r\n            // Attempt to get from cache first via imageLoader logic or just load\r\n            // imageLoader/preloadImage returns void, we generally need the element.\r\n            // We'll create a new Image.\r\n            const img = new Image();\r\n            img.crossOrigin = \"anonymous\";\r\n            await new Promise((resolve, reject) => {\r\n                img.onload = resolve;\r\n                img.onerror = resolve; // Fallback to black if fail\r\n                img.src = imgSrc;\r\n            });\r\n            imgBitmap = img;\r\n        } catch (e) {\r\n            console.warn(\"Failed to load image for render\", imgSrc);\r\n        }\r\n\r\n        // 3. Draw Cyber-Film Layout\r\n        // Background\r\n        ctx.fillStyle = \"#000000\";\r\n        ctx.fillRect(0, 0, width, height);\r\n\r\n        // Dimensions\r\n        const trackHeight = height * 0.08; // 8% top and bottom\r\n        const contentHeight = height - (2 * trackHeight);\r\n\r\n        // --- CONTENT AREA ---\r\n        if (imgBitmap) {\r\n            // Draw Image (ObjectFit: Cover equivalent)\r\n            const imgRatio = (imgBitmap as HTMLImageElement).naturalWidth / (imgBitmap as HTMLImageElement).naturalHeight;\r\n            const targetRatio = width / contentHeight;\r\n            let drawW, drawH, offsetX, offsetY;\r\n\r\n            if (imgRatio > targetRatio) {\r\n                drawH = contentHeight;\r\n                drawW = contentHeight * imgRatio;\r\n                displayPosition:\r\n                offsetX = (width - drawW) / 2;\r\n                offsetY = trackHeight;\r\n            } else {\r\n                drawW = width;\r\n                drawH = width / imgRatio;\r\n                offsetX = 0;\r\n                offsetY = trackHeight + (contentHeight - drawH) / 2;\r\n            }\r\n\r\n            // Clip to content area\r\n            ctx.save();\r\n            ctx.beginPath();\r\n            ctx.rect(0, trackHeight, width, contentHeight);\r\n            ctx.clip();\r\n            ctx.drawImage(imgBitmap as HTMLImageElement, offsetX, offsetY, drawW, drawH);\r\n            ctx.restore();\r\n        }\r\n\r\n        // --- OVERLAYS ---\r\n        const accentColor = \"#7FFFD4\";\r\n        ctx.fillStyle = accentColor;\r\n        ctx.strokeStyle = accentColor;\r\n        ctx.lineWidth = 2;\r\n        ctx.font = `bold ${Math.round(width * 0.03)}px monospace`;\r\n\r\n        // Top Track\r\n        // Text: PANOSPACE\r\n        ctx.fillText(\"PANOSPACE\", width * 0.05, trackHeight * 0.6);\r\n        // Frame Number\r\n        ctx.fillText(frameNumber, width * 0.4, trackHeight * 0.6);\r\n\r\n        // Sprockets (Circles)\r\n        const sprocketRadius = trackHeight * 0.2;\r\n        const sprocketY = trackHeight / 2;\r\n        const numSprockets = 8;\r\n        const noteSpacing = width / numSprockets;\r\n\r\n        ctx.fillStyle = \"#000\"; // Holes are black\r\n        // Actually sprockets in design are often white/transparent on black. \r\n        // In FilmStripPost.css, they are holes.\r\n        // Let's draw white outlines or empty holes.\r\n        // Since background is black, \"holes\" mean seeing black.\r\n        // But the track isn't colored solid locally. It's usually translucent.\r\n        // The previous design had a \"track\" div.\r\n        // Let's just draw the accent graphic elements.\r\n\r\n        for (let i = 0; i < numSprockets; i++) {\r\n            // Top\r\n            ctx.beginPath();\r\n            ctx.arc(i * noteSpacing + (noteSpacing / 2), sprocketY, sprocketRadius, 0, Math.PI * 2);\r\n            ctx.fillStyle = \"#111\"; // slight dark grey hole\r\n            ctx.fill();\r\n            ctx.stroke();\r\n\r\n            // Bottom\r\n            ctx.beginPath();\r\n            ctx.arc(i * noteSpacing + (noteSpacing / 2), height - sprocketY, sprocketRadius, 0, Math.PI * 2);\r\n            ctx.fill();\r\n            ctx.stroke();\r\n        }\r\n\r\n        // Bottom Track\r\n        ctx.fillStyle = accentColor;\r\n        ctx.fillText(edgeCode, width * 0.05, height - (trackHeight * 0.4));\r\n        ctx.fillText(\"2025\", width * 0.85, height - (trackHeight * 0.4));\r\n\r\n        // Side Markers\r\n        // Left\r\n        ctx.save();\r\n        ctx.translate(width * 0.03, height / 2);\r\n        ctx.rotate(-Math.PI / 2);\r\n        ctx.fillText(frameNumber, 0, 0);\r\n        ctx.restore();\r\n\r\n        // 4. Export\r\n        return new Promise((resolve) => {\r\n            canvas.toBlob(blob => {\r\n                if (blob) {\r\n                    resolve(URL.createObjectURL(blob));\r\n                } else {\r\n                    resolve(\"\");\r\n                }\r\n            }, 'image/jpeg', 0.9);\r\n        });\r\n    }\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\core\\image\\imageConfig.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\core\\image\\imageLoader.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'IMAGE_CONFIG' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'context' is defined but never used. Allowed unused args must match /^_/u.","line":11,"column":44,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":56},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'reject' is defined but never used. Allowed unused args must match /^_/u.","line":30,"column":43,"nodeType":"Identifier","messageId":"unusedVar","endLine":30,"endColumn":49},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used. Allowed unused args must match /^_/u.","line":45,"column":30,"nodeType":"Identifier","messageId":"unusedVar","endLine":45,"endColumn":38}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { IMAGE_CONFIG } from './imageConfig';\r\n\r\nconst CACHE_LIMIT = 100;\r\nconst imageCache = new Map();\r\nconst activeRequests = new Map();\r\n\r\n/**\r\n * Get variants for an image source based on context.\r\n * In a real implementation, this would append query params for a fast resizing service.\r\n */\r\nexport const getImageVariants = (src: any, context: any) => {\r\n    // Placeholder for backend resize logic\r\n    // For now, return the original source as both low and high res \r\n    // unless a specific thumbnail convention exists.\r\n    return {\r\n        lowResSrc: src,\r\n        highResSrc: src\r\n    };\r\n};\r\n\r\n/**\r\n * Preload an image with caching and request deduping.\r\n * Uses async decoding to prevent main thread blocking.\r\n */\r\nexport const preloadImage = (src: any) => {\r\n    if (!src) return Promise.resolve();\r\n    if (imageCache.has(src)) return Promise.resolve(imageCache.get(src));\r\n    if (activeRequests.has(src)) return activeRequests.get(src);\r\n\r\n    const promise = new Promise((resolve, reject) => {\r\n        const img = new Image();\r\n        img.decoding = 'async';\r\n        img.src = src;\r\n\r\n        const handleLoad = () => {\r\n            if (imageCache.size >= CACHE_LIMIT) {\r\n                const firstKey = imageCache.keys().next().value;\r\n                imageCache.delete(firstKey);\r\n            }\r\n            imageCache.set(src, img);\r\n            activeRequests.delete(src);\r\n            resolve(img);\r\n        };\r\n\r\n        const handleError = (err: any) => {\r\n            activeRequests.delete(src);\r\n            // Don't reject aggressively to prevent UI crashes, just resolve empty\r\n            console.warn('Failed to preload image:', src);\r\n            resolve(null);\r\n        };\r\n\r\n        img.decode()\r\n            .then(handleLoad)\r\n            .catch(() => {\r\n                // Fallback to onload if decode fails\r\n                img.onload = handleLoad;\r\n                img.onerror = handleError;\r\n            });\r\n    });\r\n\r\n    activeRequests.set(src, promise);\r\n    return promise;\r\n};\r\n\r\n/**\r\n * Preload multiple variants if needed\r\n */\r\nexport const preloadImageVariants = ({ lowResSrc, highResSrc }: any) => {\r\n    return Promise.all([\r\n        preloadImage(lowResSrc),\r\n        preloadImage(highResSrc)\r\n    ]);\r\n};\r\n\r\nexport const isImageCached = (src: any) => imageCache.has(src);\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\core\\image\\preloadFilmSlide.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\core\\prefetch\\PostPrefetchManager.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'preloadImage' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":22}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { preloadImage } from '../image/imageLoader';\r\nimport { preloadFilmSlide } from '../image/preloadFilmSlide';\r\n\r\n// Track prefetched posts to avoid redundant processing\r\nconst prefetchedPostIds = new Set<string>();\r\n\r\nexport const PostPrefetchManager = {\r\n    /**\r\n     * Checks if a post has already been queued for prefetching.\r\n     */\r\n    isPrefetched: (postId: string): boolean => {\r\n        return prefetchedPostIds.has(postId);\r\n    },\r\n\r\n    /**\r\n     * Marks a post as prefetched.\r\n     */\r\n    markPrefetched: (postId: string): void => {\r\n        prefetchedPostIds.add(postId);\r\n    },\r\n\r\n    /**\r\n     * Preloads all critical assets for a post (images, avatar, film slides).\r\n     * Runs asynchronously using idle time if available.\r\n     * \r\n     * @param post The post object to prefetch\r\n     */\r\n    preloadPost: async (post: any): Promise<void> => {\r\n        if (!post || !post.id || prefetchedPostIds.has(post.id)) {\r\n            return;\r\n        }\r\n\r\n        // Mark immediately to prevent double-scheduling\r\n        prefetchedPostIds.add(post.id);\r\n\r\n        const runPreload = async () => {\r\n            try {\r\n                // 1. Gather all image URLs\r\n                const urlsToLoad: string[] = [];\r\n\r\n                // Items/Slides/Images array (handles multi-slide and film strips)\r\n                const items = post.images || post.items || post.slides || [];\r\n\r\n                // If it has items, determine how many to preload\r\n                if (Array.isArray(items) && items.length > 0) {\r\n                    // For optimized performance, we preload the first 3 items/slides full quality.\r\n                    // Film strips often have many images in one \"slide\", but here 'items' usually refers to slides.\r\n                    // If 'items' are frames in a film strip, we want them all visible effectively.\r\n                    // Let's cap at 5 for heavy film posts to ensure smooth entry without overloading bandwidth.\r\n                    items.slice(0, 5).forEach((item: any) => {\r\n                        if (typeof item === 'string') {\r\n                            urlsToLoad.push(item);\r\n                        } else if (item) {\r\n                            // Handle varied object structures\r\n                            if (item.url) urlsToLoad.push(item.url);\r\n                            if (item.preview) urlsToLoad.push(item.preview);\r\n                            // Film UI sometimes nests images or uses 'content' for text... we only care about URLs.\r\n                        }\r\n                    });\r\n                } else {\r\n                    // Fallback to single image fields\r\n                    if (post.imageUrl) urlsToLoad.push(post.imageUrl);\r\n                    if (post.shopImageUrl) urlsToLoad.push(post.shopImageUrl);\r\n                }\r\n\r\n                // Author Avatar\r\n                const authorPhoto = post.authorPhotoUrl || post.userPhotoUrl || post.userAvatar || post.profileImage;\r\n                if (authorPhoto && typeof authorPhoto === 'string') {\r\n                    urlsToLoad.push(authorPhoto);\r\n                }\r\n\r\n                // Filter out empty or non-string\r\n                const validUrls = urlsToLoad.filter(u => u && typeof u === 'string' && u.startsWith('http'));\r\n\r\n                // 2. Execute Preload\r\n                // preloadFilmSlide is a wrapper around Promise.all(preloadImage)\r\n                if (validUrls.length > 0) {\r\n                    await preloadFilmSlide(validUrls);\r\n                }\r\n\r\n            } catch (err) {\r\n                console.warn(`[Prefetch] Failed for post ${post.id}`, err);\r\n            }\r\n        };\r\n\r\n        // Schedule execution: Use requestIdleCallback if available for non-blocking perf\r\n        if (typeof window !== 'undefined' && (window as any).requestIdleCallback) {\r\n            (window as any).requestIdleCallback(() => runPreload(), { timeout: 2000 });\r\n        } else {\r\n            // Fallback for Safari / other envs\r\n            setTimeout(runPreload, 0);\r\n        }\r\n    }\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\core\\responsive\\layoutEngine.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'height' is defined but never used. Allowed unused args must match /^_/u.","line":74,"column":47,"nodeType":"Identifier","messageId":"unusedVar","endLine":74,"endColumn":61}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * PHASE 2 ΓÇö FOOLPROOF RESPONSIVE LAYOUT ENGINE\r\n * \r\n * Centralized logic for handling window size, orientation, device class,\r\n * safe zones, and dynamic layout configuration.\r\n */\r\n\r\nexport type DeviceClass = 'phone' | 'tablet' | 'desktop';\r\nexport type Orientation = 'portrait' | 'landscape';\r\n\r\nexport interface SafeZones {\r\n    top: string;\r\n    bottom: string;\r\n    left: string;\r\n    right: string;\r\n}\r\n\r\nexport interface LayoutConfig {\r\n    // Structural\r\n    containerWidth: string;\r\n    paddingX: string;\r\n    paddingY: string;\r\n\r\n    // Header / Banner\r\n    headerHeight: string;\r\n    bannerHeight: string;\r\n    bannerPaddingTop: string;\r\n\r\n    // Grid\r\n    gridColumns: number;\r\n    gridGap: string;\r\n\r\n    // Navigation\r\n    navPosition: 'bottom' | 'side' | 'top';\r\n    navHeight: string;\r\n\r\n    // Typography\r\n    baseFontSize: string;\r\n    headingScale: number;\r\n\r\n    // Specific Components\r\n    profile: {\r\n        avatarSize: string;\r\n        avatarBorderWidth: string;\r\n        usernameSize: string;\r\n        statsRowGap: string;\r\n        actionButtonSize: string;\r\n    };\r\n\r\n    createPost: {\r\n        previewHeight: string;\r\n        controlsOrientation: 'vertical' | 'horizontal';\r\n    };\r\n}\r\n\r\n// Breakpoints\r\nconst BREAKPOINTS = {\r\n    TABLET: 768,\r\n    DESKTOP: 1024,\r\n    WIDE: 1440\r\n};\r\n\r\n// Safe Zone Defaults (CSS env variables fallback)\r\nconst SAFE_ZONES: SafeZones = {\r\n    top: 'max(0px, env(safe-area-inset-top))',\r\n    bottom: 'max(0px, env(safe-area-inset-bottom))',\r\n    left: 'max(0px, env(safe-area-inset-left))',\r\n    right: 'max(0px, env(safe-area-inset-right))'\r\n};\r\n\r\n/**\r\n * Get device class based on dimensions\r\n */\r\nexport function getDeviceClass(width: number, height: number): DeviceClass {\r\n    if (width >= BREAKPOINTS.DESKTOP) return 'desktop';\r\n    if (width >= BREAKPOINTS.TABLET) return 'tablet';\r\n    return 'phone';\r\n}\r\n\r\n/**\r\n * Get orientation based on dimensions\r\n */\r\nexport function getOrientation(width: number, height: number): Orientation {\r\n    return width > height ? 'landscape' : 'portrait';\r\n}\r\n\r\n/**\r\n * Get layout configuration for a specific screen/context\r\n */\r\nexport function layoutForScreen(width: number, height: number, screen: string = 'default'): LayoutConfig {\r\n    const device = getDeviceClass(width, height);\r\n    const orientation = getOrientation(width, height);\r\n\r\n    // Base configuration\r\n    const config: LayoutConfig = {\r\n        containerWidth: '100%',\r\n        paddingX: '1rem',\r\n        paddingY: '1rem',\r\n        headerHeight: '60px',\r\n        bannerHeight: 'auto', // Dynamic content usually\r\n        bannerPaddingTop: SAFE_ZONES.top,\r\n        gridColumns: 1,\r\n        gridGap: '1px',\r\n        navPosition: 'bottom',\r\n        navHeight: '60px',\r\n        baseFontSize: '16px',\r\n        headingScale: 1.0,\r\n        profile: {\r\n            avatarSize: '90px',\r\n            avatarBorderWidth: '3px',\r\n            usernameSize: '1.5rem',\r\n            statsRowGap: '1rem',\r\n            actionButtonSize: '40px'\r\n        },\r\n        createPost: {\r\n            previewHeight: '400px',\r\n            controlsOrientation: 'vertical'\r\n        }\r\n    };\r\n\r\n    // --- DEVICE SPECIFIC OVERRIDES ---\r\n\r\n    if (device === 'phone') {\r\n        config.containerWidth = '100%';\r\n        config.paddingX = '1rem';\r\n        config.gridColumns = orientation === 'landscape' ? 2 : 1;\r\n\r\n        config.profile.avatarSize = '75px';\r\n        config.profile.usernameSize = '1.5rem';\r\n\r\n        // Navigation Spacing (Bottom Bar)\r\n        config.navHeight = 'calc(60px + env(safe-area-inset-bottom))';\r\n    }\r\n    else if (device === 'tablet') {\r\n        config.containerWidth = orientation === 'portrait' ? '90%' : '80%';\r\n        config.paddingX = '2rem';\r\n        config.gridColumns = orientation === 'landscape' ? 3 : 2;\r\n        config.navPosition = 'side'; // Or top depending on design\r\n        config.profile.avatarSize = '100px';\r\n        config.profile.usernameSize = '2rem';\r\n    }\r\n    else if (device === 'desktop') {\r\n        config.containerWidth = '1200px'; // Max width\r\n        config.paddingX = '2rem';\r\n        config.gridColumns = 4;\r\n        config.navPosition = 'side'; // Sidebar usually\r\n        config.headerHeight = '80px';\r\n\r\n        config.profile.avatarSize = '120px';\r\n        config.profile.usernameSize = '2.5rem';\r\n    }\r\n\r\n    // --- SCREEN SPECIFIC OVERRIDES ---\r\n\r\n    switch (screen) {\r\n        case 'profile':\r\n            // Profile specific layout tweaks\r\n            if (device === 'phone') {\r\n                config.gridColumns = 3;\r\n                config.gridGap = '3px'; // Tighter gap for grid\r\n                config.paddingX = '2px'; // Maximize width for images\r\n            } else {\r\n                config.gridGap = '1rem'; // Standard gap for larger screens\r\n            }\r\n            if (device === 'desktop') {\r\n                config.bannerHeight = '300px';\r\n            }\r\n            break;\r\n\r\n        case 'create_collection':\r\n            if (orientation === 'landscape' && device === 'phone') {\r\n                // Fix for landscape phone modal height issues\r\n                config.createPost.previewHeight = '100%';\r\n                config.createPost.controlsOrientation = 'horizontal';\r\n                config.paddingY = '0.5rem';\r\n            }\r\n            break;\r\n\r\n        case 'create_post':\r\n            // Ensure canvas has room\r\n            if (device === 'phone') {\r\n                config.paddingX = '0'; // Full width for editing\r\n            }\r\n            break;\r\n    }\r\n\r\n    return config;\r\n}\r\n\r\n/**\r\n * Helper to get CSS value for specific spacing\r\n * Uses safe zones ensuring content doesn't overlap notch\r\n */\r\nexport function getSafeSpacing(side: keyof SafeZones, additionalParams: string = '0px'): string {\r\n    return `calc(${SAFE_ZONES[side]} + ${additionalParams})`;\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\core\\responsive\\useLayoutEngine.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\core\\safety\\aiGuard.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\core\\services\\firestore\\monetization.service.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'limitCount' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":210,"column":41,"nodeType":"Identifier","messageId":"unusedVar","endLine":210,"endColumn":51}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\r\n    doc,\r\n    updateDoc,\r\n    getDoc,\r\n    collection,\r\n    addDoc,\r\n    serverTimestamp,\r\n    query,\r\n    where,\r\n    getDocs,\r\n    orderBy\r\n} from 'firebase/firestore';\r\nimport { db } from '@/firebase';\r\n\r\n/**\r\n * Monetization Service\r\n * Handles PanoSpace Ultra, Boosts, Commissions, and Partner Tiers.\r\n */\r\n\r\nexport const USER_TIERS = {\r\n    FREE: 'free',\r\n    ULTRA: 'ultra',\r\n    PARTNER: 'partner'\r\n};\r\n\r\nexport const PARTNER_TYPES = {\r\n    CITY: 'city',\r\n    CAMPUS: 'campus',\r\n    PARK: 'park'\r\n};\r\n\r\nexport const BOOST_LEVELS = {\r\n    1: { label: 'Standard Boost', multiplier: 1.2, durationHours: 12, priceCents: 99 },\r\n    2: { label: 'Super Boost', multiplier: 1.5, durationHours: 24, priceCents: 299 },\r\n    3: { label: 'Mega Boost', multiplier: 2.0, durationHours: 24, priceCents: 499 }\r\n};\r\n\r\n/**\r\n * Get the monetization tier of a user\r\n */\r\nexport const getUserTier = async (userId: string) => {\r\n    if (!userId) return USER_TIERS.FREE;\r\n\r\n    const DEV_EMAILS = ['appreview@paxus.app', 'dev@paxus.app', 'admin@paxus.app'];\r\n\r\n    try {\r\n        const userDoc = await getDoc(doc(db, 'users', userId));\r\n        if (!userDoc.exists()) return USER_TIERS.FREE;\r\n\r\n        const data = userDoc.data();\r\n\r\n        if (data.email && DEV_EMAILS.includes(data.email)) {\r\n            return USER_TIERS.PARTNER;\r\n        }\r\n\r\n        if (data.isPartner) return USER_TIERS.PARTNER;\r\n        if (data.isUltra) return USER_TIERS.ULTRA;\r\n        return USER_TIERS.FREE;\r\n    } catch (error) {\r\n        console.error(\"Error getting user tier:\", error);\r\n        return USER_TIERS.FREE;\r\n    }\r\n};\r\n\r\n/**\r\n * Subscribe user to Space Creator (formerly Ultra)\r\n * Cost: $5.00 / month\r\n */\r\nexport const subscribeToUltra = async (userId: string) => {\r\n    const PRICE = 5.00;\r\n\r\n    try {\r\n        // Dynamic import to avoid circular dependency\r\n        // Assuming WalletService will be moved or is accessible via alias\r\n        const { WalletService } = await import('@/services/WalletService');\r\n\r\n        await WalletService.subtractFunds(\r\n            userId,\r\n            PRICE,\r\n            'purchase',\r\n            'Space Creator Subscription (1 Month)',\r\n            'subscription_monthly',\r\n            'subscription'\r\n        );\r\n\r\n        const userRef = doc(db, 'users', userId);\r\n        await updateDoc(userRef, {\r\n            isUltra: true,\r\n            subscriptionStatus: 'active',\r\n            subscriptionPlan: 'space_creator_monthly',\r\n            subscriptionUpdatedAt: serverTimestamp(),\r\n            subscriptionExpiresAt: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000) // +30 days\r\n        });\r\n        return { success: true };\r\n    } catch (error) {\r\n        console.error(\"Error subscribing to Space Creator:\", error);\r\n        throw error;\r\n    }\r\n};\r\n\r\n/**\r\n * Purchase a boost for a post\r\n */\r\nexport const purchaseBoost = async (userId: string, postId: string, level = 1) => {\r\n    const boostConfig = (BOOST_LEVELS as any)[level] || BOOST_LEVELS[1];\r\n    const priceInDollars = boostConfig.priceCents / 100;\r\n\r\n    try {\r\n        const { WalletService } = await import('@/services/WalletService');\r\n        await WalletService.subtractFunds(\r\n            userId,\r\n            priceInDollars,\r\n            'purchase',\r\n            `Boosted post (${boostConfig.label})`,\r\n            postId,\r\n            'boost'\r\n        );\r\n\r\n        const postRef = doc(db, 'posts', postId);\r\n        const expiresAt = new Date();\r\n        expiresAt.setHours(expiresAt.getHours() + boostConfig.durationHours);\r\n\r\n        await updateDoc(postRef, {\r\n            boostLevel: level,\r\n            boostMultiplier: boostConfig.multiplier,\r\n            boostExpiresAt: expiresAt,\r\n            isBoosted: true,\r\n            boostedAt: serverTimestamp()\r\n        });\r\n        return { success: true };\r\n    } catch (error) {\r\n        console.error(\"Error purchasing boost:\", error);\r\n        throw error;\r\n    }\r\n};\r\n\r\n/**\r\n * Create a commission request\r\n */\r\nexport const createCommission = async (editorId: string, buyerId: string, rawFileUrl: string, price: number, instructions = '') => {\r\n    try {\r\n        const commissionData = {\r\n            editorId,\r\n            buyerId,\r\n            rawFileUrl,\r\n            price,\r\n            instructions,\r\n            status: 'pending',\r\n            createdAt: serverTimestamp(),\r\n            updatedAt: serverTimestamp()\r\n        };\r\n\r\n        const docRef = await addDoc(collection(db, 'commissions'), commissionData);\r\n\r\n        const { WalletService } = await import('@/services/WalletService');\r\n        await WalletService.processCommissionPayment(buyerId, editorId, docRef.id, price, 'Commission Payment');\r\n\r\n        return { id: docRef.id, ...commissionData };\r\n    } catch (error) {\r\n        console.error(\"Error creating commission:\", error);\r\n        throw error;\r\n    }\r\n};\r\n\r\n/**\r\n * Get commissions for a user\r\n */\r\nexport const getCommissions = async (userId: string, role = 'editor') => {\r\n    try {\r\n        const q = query(\r\n            collection(db, 'commissions'),\r\n            where(role === 'editor' ? 'editorId' : 'buyerId', '==', userId),\r\n            orderBy('createdAt', 'desc')\r\n        );\r\n\r\n        const snapshot = await getDocs(q);\r\n        return snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n    } catch (error) {\r\n        console.error(\"Error getting commissions:\", error);\r\n        return [];\r\n    }\r\n};\r\n\r\n/**\r\n * Create a Digital Museum (Partner Feature)\r\n */\r\nexport const createMuseum = async (partnerId: string, museumData: any) => {\r\n    try {\r\n        const tier = await getUserTier(partnerId);\r\n        if (tier !== USER_TIERS.PARTNER) throw new Error(\"Only partners can create museums\");\r\n\r\n        const data = {\r\n            ...museumData,\r\n            ownerId: partnerId,\r\n            createdAt: serverTimestamp(),\r\n            type: museumData.type || PARTNER_TYPES.CITY\r\n        };\r\n\r\n        const docRef = await addDoc(collection(db, 'museums'), data);\r\n        return { id: docRef.id, ...data };\r\n    } catch (error) {\r\n        console.error(\"Error creating museum:\", error);\r\n        throw error;\r\n    }\r\n};\r\n\r\n/**\r\n * Get Sponsored Cards (Ads)\r\n */\r\nexport const getSponsoredCards = async (limitCount = 1) => {\r\n    return [{\r\n        id: 'sponsored_mock_1',\r\n        type: 'sponsored',\r\n        title: 'Upgrade to Ultra',\r\n        description: 'Unlock exclusive features, contests, and more with PanoSpace Ultra.',\r\n        imageUrl: 'https://placehold.co/600x400/000000/FFFFFF/png?text=PanoSpace+Ultra',\r\n        ctaLink: '/ultra',\r\n        ctaText: 'Learn More'\r\n    }];\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\core\\services\\firestore\\posts.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\core\\services\\firestore\\studios.service.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'limit' is defined but never used. Allowed unused vars must match /^_/u.","line":13,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":10},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setDoc' is defined but never used. Allowed unused vars must match /^_/u.","line":18,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":11}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { db, storage } from '@/firebase';\r\nimport {\r\n    collection,\r\n    doc,\r\n    addDoc,\r\n    updateDoc,\r\n    deleteDoc,\r\n    getDoc,\r\n    getDocs,\r\n    query,\r\n    where,\r\n    orderBy,\r\n    limit,\r\n    arrayUnion,\r\n    arrayRemove,\r\n    serverTimestamp,\r\n    increment,\r\n    setDoc\r\n} from 'firebase/firestore';\r\nimport { ref, uploadBytes, getDownloadURL } from 'firebase/storage';\r\n// We assume searchKeywords is now in core utils or we inline logic. \r\n// For now import from previous location (will be fixed by global replace later if moved)\r\n// But wait, searchKeywords.js was in utils, which we moved to core/utils.\r\n// So import from '@/core/utils/searchKeywords' (if I didn't merge it into search.js).\r\n// I merged \"filterHelpers, searchKeywords, etc\" into 'search.js' in my thought process but didn't actually create 'search.js' util yet.\r\n// I created 'pricing.js', 'dates.js', 'colors.js', 'exif.js'.\r\n// I need 'searchKeywords.js' logic. I will leave the import as is relative (to be fixed) or fix it now.\r\n// I'll assume it's '@core/utils/searchKeywords' for now (I will need to ensure that file exists or is part of a bundle).\r\nimport { generateSearchKeywords } from '@/core/utils/searchKeywords'; // Assuming file exists there\r\nimport { canBypassShopSetup } from '@/config/devConfig';\r\n\r\n/**\r\n * STUDIOS SERVICE\r\n * \r\n * Handles Galleries and Shops (Studios).\r\n */\r\n\r\n// ============================================================================\r\n// GALLERIES\r\n// ============================================================================\r\n\r\nexport const createGallery = async (galleryData: any, coverImageFile: any, userId: string, userProfile: any) => {\r\n    try {\r\n        let coverImageUrl = null;\r\n        if (coverImageFile) {\r\n            const imageRef = ref(storage, `galleries/${userId}/${Date.now()}_${coverImageFile.name}`);\r\n            await uploadBytes(imageRef, coverImageFile);\r\n            coverImageUrl = await getDownloadURL(imageRef);\r\n        }\r\n\r\n        const searchKeywords = [\r\n            ...generateSearchKeywords(galleryData.title),\r\n            ...generateSearchKeywords(galleryData.description),\r\n            ...(galleryData.requiredTags || []).map((tag: any) => tag.toLowerCase()),\r\n            ...generateSearchKeywords(userProfile.username || userProfile.displayName || '')\r\n        ].filter(Boolean);\r\n\r\n        const gallery = {\r\n            title: galleryData.title,\r\n            description: galleryData.description,\r\n            coverImage: coverImageUrl,\r\n            ownerId: userId,\r\n            ownerUsername: userProfile.username || userProfile.displayName || 'Anonymous',\r\n            ownerAvatar: userProfile.photoURL || null,\r\n            contentType: galleryData.contentType || 'both',\r\n            requiredTags: galleryData.requiredTags || [],\r\n            requiredLocations: galleryData.requiredLocations || [],\r\n            allowedCategories: galleryData.allowedCategories || [],\r\n            members: [userId],\r\n            pendingInvites: [],\r\n            postsCount: 0,\r\n            collectionsCount: 0,\r\n            membersCount: 1,\r\n            createdAt: serverTimestamp(),\r\n            updatedAt: serverTimestamp(),\r\n            isPublic: galleryData.isPublic !== false,\r\n            featured: false,\r\n            moderationEnabled: galleryData.moderationEnabled || false,\r\n            searchKeywords\r\n        };\r\n\r\n        const docRef = await addDoc(collection(db, 'galleries'), gallery);\r\n        return { id: docRef.id, ...gallery };\r\n    } catch (error) {\r\n        console.error('Error creating gallery:', error);\r\n        throw error;\r\n    }\r\n};\r\n\r\nexport const getGallery = async (galleryId: string) => {\r\n    try {\r\n        const docRef = doc(db, 'galleries', galleryId);\r\n        const docSnap = await getDoc(docRef);\r\n        if (!docSnap.exists()) {\r\n            throw new Error('Gallery not found');\r\n        }\r\n        return { id: docSnap.id, ...docSnap.data() };\r\n    } catch (error) {\r\n        console.error('Error fetching gallery:', error);\r\n        throw error;\r\n    }\r\n};\r\n\r\nexport const updateGallery = async (galleryId: string, updates: any) => {\r\n    try {\r\n        const docRef = doc(db, 'galleries', galleryId);\r\n        await updateDoc(docRef, {\r\n            ...updates,\r\n            updatedAt: serverTimestamp()\r\n        });\r\n    } catch (error) {\r\n        console.error('Error updating gallery:', error);\r\n        throw error;\r\n    }\r\n};\r\n\r\nexport const deleteGallery = async (galleryId: string) => {\r\n    try {\r\n        const docRef = doc(db, 'galleries', galleryId);\r\n        await deleteDoc(docRef);\r\n    } catch (error) {\r\n        console.error('Error deleting gallery:', error);\r\n        throw error;\r\n    }\r\n};\r\n\r\nexport const inviteMembers = async (galleryId: string, userIds: string[], invitedBy: string) => {\r\n    try {\r\n        const galleryRef = doc(db, 'galleries', galleryId);\r\n        await updateDoc(galleryRef, {\r\n            pendingInvites: arrayUnion(...userIds),\r\n            updatedAt: serverTimestamp()\r\n        });\r\n\r\n        const invitesRef = collection(db, 'galleries', galleryId, 'invites');\r\n        const invitePromises = userIds.map(userId =>\r\n            addDoc(invitesRef, {\r\n                userId,\r\n                invitedBy,\r\n                invitedAt: serverTimestamp(),\r\n                status: 'pending'\r\n            })\r\n        );\r\n        await Promise.all(invitePromises);\r\n    } catch (error) {\r\n        console.error('Error inviting members:', error);\r\n        throw error;\r\n    }\r\n};\r\n\r\nexport const acceptInvitation = async (galleryId: string, userId: string) => {\r\n    try {\r\n        const galleryRef = doc(db, 'galleries', galleryId);\r\n        await updateDoc(galleryRef, {\r\n            members: arrayUnion(userId),\r\n            pendingInvites: arrayRemove(userId),\r\n            membersCount: increment(1),\r\n            updatedAt: serverTimestamp()\r\n        });\r\n\r\n        const invitesRef = collection(db, 'galleries', galleryId, 'invites');\r\n        const q = query(invitesRef, where('userId', '==', userId), where('status', '==', 'pending'));\r\n        const snapshot = await getDocs(q);\r\n\r\n        snapshot.forEach(async (inviteDoc) => {\r\n            await updateDoc(doc(db, 'galleries', galleryId, 'invites', inviteDoc.id), {\r\n                status: 'accepted'\r\n            });\r\n        });\r\n    } catch (error) {\r\n        console.error('Error accepting invitation:', error);\r\n        throw error;\r\n    }\r\n};\r\n\r\nexport const declineInvitation = async (galleryId: string, userId: string) => {\r\n    try {\r\n        const galleryRef = doc(db, 'galleries', galleryId);\r\n        await updateDoc(galleryRef, {\r\n            pendingInvites: arrayRemove(userId),\r\n            updatedAt: serverTimestamp()\r\n        });\r\n\r\n        const invitesRef = collection(db, 'galleries', galleryId, 'invites');\r\n        const q = query(invitesRef, where('userId', '==', userId), where('status', '==', 'pending'));\r\n        const snapshot = await getDocs(q);\r\n\r\n        snapshot.forEach(async (inviteDoc) => {\r\n            await updateDoc(doc(db, 'galleries', galleryId, 'invites', inviteDoc.id), {\r\n                status: 'declined'\r\n            });\r\n        });\r\n    } catch (error) {\r\n        console.error('Error declining invitation:', error);\r\n        throw error;\r\n    }\r\n};\r\n\r\nexport const addPostToGallery = async (galleryId: string, postId: string, userId: string) => {\r\n    try {\r\n        const postsRef = collection(db, 'galleries', galleryId, 'posts');\r\n        await addDoc(postsRef, {\r\n            postId,\r\n            addedBy: userId,\r\n            addedAt: serverTimestamp(),\r\n            approved: true\r\n        });\r\n\r\n        const galleryRef = doc(db, 'galleries', galleryId);\r\n        await updateDoc(galleryRef, {\r\n            postsCount: increment(1),\r\n            updatedAt: serverTimestamp()\r\n        });\r\n    } catch (error) {\r\n        console.error('Error adding post to gallery:', error);\r\n        throw error;\r\n    }\r\n};\r\n\r\nexport const addCollectionToGallery = async (galleryId: string, collectionId: string, userId: string) => {\r\n    try {\r\n        const collectionsRef = collection(db, 'galleries', galleryId, 'collections');\r\n        await addDoc(collectionsRef, {\r\n            collectionId,\r\n            addedBy: userId,\r\n            addedAt: serverTimestamp(),\r\n            approved: true\r\n        });\r\n\r\n        const galleryRef = doc(db, 'galleries', galleryId);\r\n        await updateDoc(galleryRef, {\r\n            collectionsCount: increment(1),\r\n            updatedAt: serverTimestamp()\r\n        });\r\n    } catch (error) {\r\n        console.error('Error adding collection to gallery:', error);\r\n        throw error;\r\n    }\r\n};\r\n\r\nexport const getUserGalleries = async (userId: string) => {\r\n    try {\r\n        const q = query(\r\n            collection(db, 'galleries'),\r\n            where('ownerId', '==', userId),\r\n            orderBy('createdAt', 'desc')\r\n        );\r\n        const snapshot = await getDocs(q);\r\n        return snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n    } catch (error) {\r\n        console.error('Error fetching user galleries:', error);\r\n        throw error;\r\n    }\r\n};\r\n\r\nexport const getMemberGalleries = async (userId: string) => {\r\n    try {\r\n        const q = query(\r\n            collection(db, 'galleries'),\r\n            where('members', 'array-contains', userId),\r\n            orderBy('createdAt', 'desc')\r\n        );\r\n        const snapshot = await getDocs(q);\r\n        return snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n    } catch (error) {\r\n        console.error('Error fetching member galleries:', error);\r\n        throw error;\r\n    }\r\n};\r\n\r\nexport const getGalleryPosts = async (galleryId: string) => {\r\n    try {\r\n        const postsRef = collection(db, 'galleries', galleryId, 'posts');\r\n        const q = query(postsRef, orderBy('addedAt', 'desc'));\r\n        const snapshot = await getDocs(q);\r\n        return snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n    } catch (error) {\r\n        console.error('Error fetching gallery posts:', error);\r\n        throw error;\r\n    }\r\n};\r\n\r\nexport const getGalleryCollections = async (galleryId: string) => {\r\n    try {\r\n        const collectionsRef = collection(db, 'galleries', galleryId, 'collections');\r\n        const q = query(collectionsRef, orderBy('addedAt', 'desc'));\r\n        const snapshot = await getDocs(q);\r\n        return snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n    } catch (error) {\r\n        console.error('Error fetching gallery collections:', error);\r\n        throw error;\r\n    }\r\n};\r\n\r\nexport const validateContentForGallery = (gallery: any, content: any) => {\r\n    if (gallery.requiredTags && gallery.requiredTags.length > 0) {\r\n        const hasAllTags = gallery.requiredTags.every((tag: any) =>\r\n            content.tags && content.tags.includes(tag)\r\n        );\r\n        if (!hasAllTags) {\r\n            return { valid: false, reason: 'Missing required tags' };\r\n        }\r\n    }\r\n    if (gallery.requiredLocations && gallery.requiredLocations.length > 0) {\r\n        const locationString = `${content.location?.city || ''} ${content.location?.state || ''} ${content.location?.country || ''}`.toLowerCase();\r\n        const hasLocation = gallery.requiredLocations.some((loc: any) =>\r\n            locationString.includes(loc.toLowerCase())\r\n        );\r\n        if (!hasLocation) {\r\n            return { valid: false, reason: 'Does not match required location' };\r\n        }\r\n    }\r\n    return { valid: true };\r\n};\r\n\r\n// ============================================================================\r\n// SHOPS (STUDIOS)\r\n// ============================================================================\r\n\r\nexport const checkShopSetup = async (userId: string, userEmail: string = '') => {\r\n    try {\r\n        const canBypass = canBypassShopSetup(userId, userEmail);\r\n        const userDoc = await getDoc(doc(db, 'users', userId));\r\n        const userData = userDoc.data();\r\n        const shopSetup = userData?.shopSetup || {\r\n            isComplete: false,\r\n            acceptedTermsAt: null,\r\n            acceptedCopyrightAt: null,\r\n            shopName: '',\r\n            bio: '',\r\n            setupCompletedAt: null\r\n        };\r\n        return {\r\n            isComplete: shopSetup.isComplete || false,\r\n            canBypass,\r\n            shopData: shopSetup\r\n        };\r\n    } catch (error) {\r\n        console.error('Error checking shop setup:', error);\r\n        throw error;\r\n    }\r\n};\r\n\r\nexport const completeShopSetup = async (userId: string, shopData: any) => {\r\n    try {\r\n        const userRef = doc(db, 'users', userId);\r\n        await updateDoc(userRef, {\r\n            shopSetup: {\r\n                isComplete: true,\r\n                acceptedTermsAt: serverTimestamp(),\r\n                acceptedCopyrightAt: serverTimestamp(),\r\n                shopName: shopData.shopName || '',\r\n                bio: shopData.bio || '',\r\n                setupCompletedAt: serverTimestamp()\r\n            }\r\n        });\r\n    } catch (error) {\r\n        console.error('Error completing shop setup:', error);\r\n        throw error;\r\n    }\r\n};\r\n\r\nexport const getShopDrafts = async (userId: string) => {\r\n    try {\r\n        const draftsQuery = query(\r\n            collection(db, 'shopDrafts'),\r\n            where('userId', '==', userId),\r\n            where('status', '==', 'draft')\r\n        );\r\n        const snapshot = await getDocs(draftsQuery);\r\n        return snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n    } catch (error) {\r\n        console.error('Error fetching drafts:', error);\r\n        throw error;\r\n    }\r\n};\r\n\r\nexport const createShopDraft = async (draftData: any) => {\r\n    try {\r\n        const draftRef = await addDoc(collection(db, 'shopDrafts'), {\r\n            userId: draftData.userId,\r\n            postId: draftData.postId,\r\n            itemId: draftData.itemId,\r\n            imageUrl: draftData.imageUrl,\r\n            title: draftData.title,\r\n            productTier: draftData.productTier,\r\n            customPrices: draftData.customPrices || {},\r\n            status: 'draft',\r\n            createdAt: serverTimestamp(),\r\n            publishedAt: null,\r\n            copyrightConfirmedAt: null\r\n        });\r\n        return draftRef.id;\r\n    } catch (error) {\r\n        console.error('Error creating draft:', error);\r\n        throw error;\r\n    }\r\n};\r\n\r\nexport const publishShopDraft = async (draftId: string, userId: string, copyrightConfirmed = false) => {\r\n    try {\r\n        if (!copyrightConfirmed) {\r\n            throw new Error('Copyright confirmation required to publish');\r\n        }\r\n        const draftRef = doc(db, 'shopDrafts', draftId);\r\n        const draftDoc = await getDoc(draftRef);\r\n        if (!draftDoc.exists()) {\r\n            throw new Error('Draft not found');\r\n        }\r\n        const draftData = draftDoc.data();\r\n        if (draftData.userId !== userId) {\r\n            throw new Error('Unauthorized: Cannot publish another user\\'s draft');\r\n        }\r\n        await updateDoc(draftRef, {\r\n            status: 'published',\r\n            publishedAt: serverTimestamp(),\r\n            copyrightConfirmedAt: serverTimestamp()\r\n        });\r\n        const postRef = doc(db, 'posts', draftData.postId);\r\n        await updateDoc(postRef, {\r\n            shopEnabled: true,\r\n            'shopProducts': draftData\r\n        });\r\n    } catch (error) {\r\n        console.error('Error publishing draft:', error);\r\n        throw error;\r\n    }\r\n};\r\n\r\nexport const unpublishShopProduct = async (draftId: string, userId: string) => {\r\n    try {\r\n        const draftRef = doc(db, 'shopDrafts', draftId);\r\n        const draftDoc = await getDoc(draftRef);\r\n        if (!draftDoc.exists()) {\r\n            throw new Error('Product not found');\r\n        }\r\n        const draftData = draftDoc.data();\r\n        if (draftData.userId !== userId) {\r\n            throw new Error('Unauthorized: Cannot unpublish another user\\'s product');\r\n        }\r\n        await updateDoc(draftRef, {\r\n            status: 'draft',\r\n            publishedAt: null\r\n        });\r\n    } catch (error) {\r\n        console.error('Error unpublishing product:', error);\r\n        throw error;\r\n    }\r\n};\r\n\r\nexport const deleteShopDraft = async (draftId: string, userId: string) => {\r\n    try {\r\n        const draftRef = doc(db, 'shopDrafts', draftId);\r\n        const draftDoc = await getDoc(draftRef);\r\n        if (!draftDoc.exists()) {\r\n            throw new Error('Draft not found');\r\n        }\r\n        const draftData = draftDoc.data();\r\n        if (draftData.userId !== userId) {\r\n            throw new Error('Unauthorized: Cannot delete another user\\'s draft');\r\n        }\r\n        await updateDoc(draftRef, {\r\n            status: 'deleted',\r\n            deletedAt: serverTimestamp()\r\n        });\r\n    } catch (error) {\r\n        console.error('Error deleting draft:', error);\r\n        throw error;\r\n    }\r\n};\r\n\r\n// Compatibility Object for Legacy Imports\r\nexport const ShopService = {\r\n    checkShopSetup,\r\n    completeShopSetup,\r\n    getDrafts: getShopDrafts,\r\n    createDraft: createShopDraft,\r\n    publishDraft: publishShopDraft,\r\n    unpublishProduct: unpublishShopProduct,\r\n    deleteDraft: deleteShopDraft\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\core\\services\\firestore\\users.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\core\\services\\search\\providers\\AlgoliaProvider.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\core\\services\\search\\providers\\CacheProvider.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\core\\services\\search\\providers\\FirestoreProvider.js","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'startAfter' is defined but never used. Allowed unused vars must match /^_/u.","line":15,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'index' is defined but never used. Allowed unused args must match /^_/u.","line":163,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":163,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'facetName' is defined but never used. Allowed unused args must match /^_/u.","line":163,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":163,"endColumn":37}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * FIRESTORE SEARCH PROVIDER\r\n * \r\n * Fallback search provider using Firestore keyword search\r\n */\r\n\r\nimport { db } from '@/core/firebase';\r\nimport {\r\n    collection,\r\n    query,\r\n    where,\r\n    orderBy,\r\n    limit,\r\n    getDocs,\r\n    startAfter\r\n} from 'firebase/firestore';\r\nimport { logger } from '@/core/utils/logger';\r\n\r\nexport class FirestoreProvider {\r\n    constructor() {\r\n        this.enabled = true;\r\n    }\r\n\r\n    isEnabled() {\r\n        return this.enabled;\r\n    }\r\n\r\n    /**\r\n     * Search with Firestore\r\n     */\r\n    async search(queryText, options = {}) {\r\n        const {\r\n            index = 'posts',\r\n            filters = {},\r\n            sort = 'recent',\r\n            page = 0,\r\n            hitsPerPage = 20\r\n        } = options;\r\n\r\n        try {\r\n            // Tokenize search query\r\n            const searchTerms = queryText.toLowerCase().trim().split(/\\s+/).filter(w => w.length > 1);\r\n\r\n            if (searchTerms.length === 0 && !filters.tags && !filters.parkId) {\r\n                // No search criteria\r\n                return this._emptyResults();\r\n            }\r\n\r\n            // Use longest term for Firestore query (array-contains limitation)\r\n            const primaryTerm = searchTerms.length > 0\r\n                ? searchTerms.reduce((a, b) => a.length > b.length ? a : b, '')\r\n                : null;\r\n\r\n            // Build Firestore query\r\n            const collectionRef = collection(db, index);\r\n            let q;\r\n\r\n            if (filters.tags && filters.tags.length > 0) {\r\n                // Tag-based search\r\n                q = query(\r\n                    collectionRef,\r\n                    where('tags', 'array-contains-any', filters.tags.slice(0, 10)),\r\n                    this._getSortOrder(sort),\r\n                    limit(hitsPerPage * 2) // Fetch extra for client-side filtering\r\n                );\r\n            } else if (primaryTerm) {\r\n                // Keyword search\r\n                q = query(\r\n                    collectionRef,\r\n                    where('searchKeywords', 'array-contains', primaryTerm),\r\n                    this._getSortOrder(sort),\r\n                    limit(hitsPerPage * 2)\r\n                );\r\n            } else if (filters.parkId) {\r\n                // Park filter\r\n                q = query(\r\n                    collectionRef,\r\n                    where('parkId', '==', filters.parkId),\r\n                    this._getSortOrder(sort),\r\n                    limit(hitsPerPage * 2)\r\n                );\r\n            } else {\r\n                // General query\r\n                q = query(\r\n                    collectionRef,\r\n                    this._getSortOrder(sort),\r\n                    limit(hitsPerPage)\r\n                );\r\n            }\r\n\r\n            const snapshot = await getDocs(q);\r\n            let results = snapshot.docs.map(doc => ({\r\n                id: doc.id,\r\n                ...doc.data()\r\n            }));\r\n\r\n            // Client-side filtering\r\n            results = this._applyClientFilters(results, {\r\n                searchTerms,\r\n                filters\r\n            });\r\n\r\n            // Pagination\r\n            const start = page * hitsPerPage;\r\n            const paginatedResults = results.slice(start, start + hitsPerPage);\r\n\r\n            return {\r\n                hits: paginatedResults,\r\n                nbHits: results.length,\r\n                page,\r\n                nbPages: Math.ceil(results.length / hitsPerPage),\r\n                hitsPerPage,\r\n                query: queryText\r\n            };\r\n\r\n        } catch (error) {\r\n            logger.error('Firestore search error:', error);\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Get autocomplete suggestions\r\n     */\r\n    async suggest(queryText, options = {}) {\r\n        const { index = 'posts', maxSuggestions = 5 } = options;\r\n\r\n        try {\r\n            const searchTerms = queryText.toLowerCase().trim().split(/\\s+/).filter(w => w.length > 1);\r\n            if (searchTerms.length === 0) {\r\n                return [];\r\n            }\r\n\r\n            const primaryTerm = searchTerms[0];\r\n            const collectionRef = collection(db, index);\r\n\r\n            const q = query(\r\n                collectionRef,\r\n                where('searchKeywords', 'array-contains', primaryTerm),\r\n                orderBy('createdAt', 'desc'),\r\n                limit(maxSuggestions)\r\n            );\r\n\r\n            const snapshot = await getDocs(q);\r\n\r\n            return snapshot.docs.map(doc => {\r\n                const data = doc.data();\r\n                return {\r\n                    text: data.title || data.name || data.displayName,\r\n                    tags: data.tags || [],\r\n                    type: index\r\n                };\r\n            });\r\n        } catch (error) {\r\n            logger.error('Firestore suggest error:', error);\r\n            return [];\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Get facet values (limited in Firestore)\r\n     */\r\n    async getFacets(index, facetName) {\r\n        // Firestore doesn't support faceted search natively\r\n        // This would require aggregation queries or pre-computed facets\r\n        logger.warn('Faceted search not supported in Firestore fallback');\r\n        return [];\r\n    }\r\n\r\n    /**\r\n     * Health check\r\n     */\r\n    async healthCheck() {\r\n        try {\r\n            // Try a simple query\r\n            const testQuery = query(collection(db, 'posts'), limit(1));\r\n            await getDocs(testQuery);\r\n\r\n            return { status: 'ok', provider: 'firestore' };\r\n        } catch (error) {\r\n            return { status: 'error', provider: 'firestore', error: error.message };\r\n        }\r\n    }\r\n\r\n    // ========================================================================\r\n    // PRIVATE METHODS\r\n    // ========================================================================\r\n\r\n    _getSortOrder(sort) {\r\n        switch (sort) {\r\n            case 'recent':\r\n                return orderBy('createdAt', 'desc');\r\n            case 'popular':\r\n                return orderBy('likesCount', 'desc');\r\n            case 'trending':\r\n                // Firestore doesn't have a trending field by default\r\n                // Would need to be pre-computed\r\n                return orderBy('likesCount', 'desc');\r\n            default:\r\n                return orderBy('createdAt', 'desc');\r\n        }\r\n    }\r\n\r\n    _applyClientFilters(results, { searchTerms, filters }) {\r\n        let filtered = results;\r\n\r\n        // Multi-term search (AND logic)\r\n        if (searchTerms && searchTerms.length > 1) {\r\n            filtered = filtered.filter(item => {\r\n                const searchableText = this._getSearchableText(item);\r\n                return searchTerms.every(term => searchableText.includes(term));\r\n            });\r\n        }\r\n\r\n        // Location filter\r\n        if (filters.location) {\r\n            const loc = filters.location;\r\n            filtered = filtered.filter(item => {\r\n                const itemLoc = item.location || {};\r\n                return (\r\n                    (loc.city && itemLoc.city?.toLowerCase().includes(loc.city.toLowerCase())) ||\r\n                    (loc.state && itemLoc.state?.toLowerCase().includes(loc.state.toLowerCase())) ||\r\n                    (loc.country && itemLoc.country?.toLowerCase().includes(loc.country.toLowerCase()))\r\n                );\r\n            });\r\n        }\r\n\r\n        // Camera filter\r\n        if (filters.camera) {\r\n            filtered = filtered.filter(item =>\r\n                item.camera?.toLowerCase() === filters.camera.toLowerCase()\r\n            );\r\n        }\r\n\r\n        // Film filter\r\n        if (filters.film) {\r\n            filtered = filtered.filter(item =>\r\n                item.film?.toLowerCase() === filters.film.toLowerCase()\r\n            );\r\n        }\r\n\r\n        // Orientation filter\r\n        if (filters.orientation) {\r\n            filtered = filtered.filter(item =>\r\n                item.orientation === filters.orientation\r\n            );\r\n        }\r\n\r\n        // Aspect ratio filter\r\n        if (filters.aspectRatio) {\r\n            filtered = filtered.filter(item =>\r\n                item.aspectRatio === filters.aspectRatio\r\n            );\r\n        }\r\n\r\n        // Safe filter\r\n        if (filters.safe !== undefined) {\r\n            filtered = filtered.filter(item => item.safe === filters.safe);\r\n        }\r\n\r\n        // Shop enabled filter\r\n        if (filters.shopEnabled !== undefined) {\r\n            filtered = filtered.filter(item => item.shopEnabled === filters.shopEnabled);\r\n        }\r\n\r\n        // Date filter\r\n        if (filters.date) {\r\n            const targetDate = new Date(filters.date);\r\n            filtered = filtered.filter(item => {\r\n                if (!item.capturedAt) return false;\r\n                const itemDate = item.capturedAt.toDate ? item.capturedAt.toDate() : new Date(item.capturedAt);\r\n                return (\r\n                    itemDate.getFullYear() === targetDate.getFullYear() &&\r\n                    itemDate.getMonth() === targetDate.getMonth() &&\r\n                    itemDate.getDate() === targetDate.getDate()\r\n                );\r\n            });\r\n        }\r\n\r\n        // Following filter\r\n        if (filters.followingIds && filters.followingIds.length > 0) {\r\n            filtered = filtered.filter(item =>\r\n                filters.followingIds.includes(item.uid)\r\n            );\r\n        }\r\n\r\n        return filtered;\r\n    }\r\n\r\n    _getSearchableText(item) {\r\n        return [\r\n            item.title,\r\n            item.name,\r\n            item.displayName,\r\n            item.username,\r\n            item.authorName,\r\n            item.bio,\r\n            item.description,\r\n            ...(item.tags || []),\r\n            item.location?.city,\r\n            item.location?.state,\r\n            item.location?.country,\r\n            item.parkName,\r\n            item.camera,\r\n            item.film\r\n        ]\r\n            .filter(Boolean)\r\n            .join(' ')\r\n            .toLowerCase();\r\n    }\r\n\r\n    _emptyResults() {\r\n        return {\r\n            hits: [],\r\n            nbHits: 0,\r\n            page: 0,\r\n            nbPages: 0,\r\n            hitsPerPage: 0,\r\n            query: ''\r\n        };\r\n    }\r\n}\r\n\r\nexport default FirestoreProvider;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\core\\services\\search\\searchConfig.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\core\\services\\search\\searchService.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'limit' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":227,"column":48,"nodeType":"Identifier","messageId":"unusedVar","endLine":227,"endColumn":53},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'limit' is defined but never used. Allowed unused args must match /^_/u.","line":302,"column":38,"nodeType":"Identifier","messageId":"unusedVar","endLine":302,"endColumn":51}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * SEARCH SERVICE (Unified)\r\n * \r\n * Centralized search interface aggregating Algolia, Firestore, and Edge Cache.\r\n * Migrated from: src/core/services/firestore/search.service.ts\r\n */\r\n\r\nimport { SEARCH_STRATEGY, CACHE_CONFIG } from './searchConfig';\r\nimport { AlgoliaProvider } from './providers/AlgoliaProvider';\r\nimport { FirestoreProvider } from './providers/FirestoreProvider';\r\nimport { CacheProvider } from './providers/CacheProvider';\r\n\r\nclass SearchService {\r\n    algolia: any;\r\n    firestore: any;\r\n    cache: any;\r\n    strategy: any;\r\n    fallbackEnabled: boolean;\r\n    cacheEnabled: boolean;\r\n    metrics: any;\r\n\r\n    constructor() {\r\n        this.algolia = new AlgoliaProvider();\r\n        this.firestore = new FirestoreProvider();\r\n        this.cache = new CacheProvider(CACHE_CONFIG.HOT_QUERIES);\r\n\r\n        this.strategy = SEARCH_STRATEGY.PRIMARY;\r\n        this.fallbackEnabled = true;\r\n        this.cacheEnabled = true;\r\n\r\n        // Metrics\r\n        this.metrics = {\r\n            totalSearches: 0,\r\n            cacheHits: 0,\r\n            algoliaSearches: 0,\r\n            firestoreSearches: 0,\r\n            avgQueryTime: 0,\r\n            errors: []\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Universal search method\r\n     */\r\n    async search(queryStr: string, options: any = {}) {\r\n        const startTime = Date.now();\r\n        this.metrics.totalSearches++;\r\n\r\n        const {\r\n            index = 'posts',\r\n            filters = {},\r\n            sort = 'relevance',\r\n            page = 0,\r\n            hitsPerPage = 20,\r\n            facets = [],\r\n            userId = null\r\n        } = options;\r\n\r\n        try {\r\n            // 1. Check cache first\r\n            if (this.cacheEnabled) {\r\n                const cacheKey = this._generateCacheKey(queryStr, options);\r\n                const cached = await this.cache.get(cacheKey);\r\n\r\n                if (cached) {\r\n                    this.metrics.cacheHits++;\r\n                    return {\r\n                        ...cached,\r\n                        source: 'cache',\r\n                        queryTime: Date.now() - startTime\r\n                    };\r\n                }\r\n            }\r\n\r\n            // 2. Try Algolia (primary)\r\n            if (this.strategy === 'algolia' && this.algolia.isEnabled()) {\r\n                try {\r\n                    const results = await this.algolia.search(queryStr, {\r\n                        index,\r\n                        filters,\r\n                        sort,\r\n                        page,\r\n                        hitsPerPage,\r\n                        facets\r\n                    });\r\n\r\n                    this.metrics.algoliaSearches++;\r\n\r\n                    // Cache successful results\r\n                    if (this.cacheEnabled && results.hits.length > 0) {\r\n                        const cacheKey = this._generateCacheKey(queryStr, options);\r\n                        await this.cache.set(cacheKey, results);\r\n                    }\r\n\r\n                    // Track user search history\r\n                    if (userId) {\r\n                        await this._trackSearchHistory(userId, queryStr, results.hits.length);\r\n                    }\r\n\r\n                    return {\r\n                        ...results,\r\n                        source: 'algolia',\r\n                        queryTime: Date.now() - startTime\r\n                    };\r\n                } catch (error: any) {\r\n                    console.error('Algolia search failed:', error);\r\n                    this.metrics.errors.push({\r\n                        provider: 'algolia',\r\n                        error: error.message,\r\n                        timestamp: Date.now()\r\n                    });\r\n\r\n                    // Fall through to Firestore\r\n                    if (!this.fallbackEnabled) {\r\n                        throw error;\r\n                    }\r\n                }\r\n            }\r\n\r\n            // 3. Fallback to Firestore\r\n            const results = await this.firestore.search(queryStr, {\r\n                index,\r\n                filters,\r\n                sort,\r\n                page,\r\n                hitsPerPage\r\n            });\r\n\r\n            this.metrics.firestoreSearches++;\r\n\r\n            return {\r\n                ...results,\r\n                source: 'firestore',\r\n                queryTime: Date.now() - startTime\r\n            };\r\n\r\n        } catch (error: any) {\r\n            console.error('Search failed:', error);\r\n            this.metrics.errors.push({\r\n                provider: 'all',\r\n                error: error.message,\r\n                timestamp: Date.now()\r\n            });\r\n\r\n            return {\r\n                hits: [],\r\n                nbHits: 0,\r\n                page: 0,\r\n                nbPages: 0,\r\n                source: 'error',\r\n                error: error.message,\r\n                queryTime: Date.now() - startTime\r\n            };\r\n        } finally {\r\n            // Update average query time\r\n            const queryTime = Date.now() - startTime;\r\n            this.metrics.avgQueryTime =\r\n                (this.metrics.avgQueryTime * (this.metrics.totalSearches - 1) + queryTime) /\r\n                this.metrics.totalSearches;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Search with autocomplete suggestions\r\n     */\r\n    async suggest(queryStr: string, options: any = {}) {\r\n        const { index = 'posts', maxSuggestions = 5 } = options;\r\n\r\n        if (this.algolia.isEnabled()) {\r\n            return await this.algolia.suggest(queryStr, { index, maxSuggestions });\r\n        }\r\n\r\n        return await this.firestore.suggest(queryStr, { index, maxSuggestions });\r\n    }\r\n\r\n    // COMPATIBILITY: Legacy method name alias\r\n    async getSearchSuggestions(queryStr: string, maxSuggestions = 5) {\r\n        return this.suggest(queryStr, { maxSuggestions });\r\n    }\r\n\r\n    // COMPATIBILITY: Legacy method alias\r\n    async searchPosts(queryStr: string, filters = {}, maxResults = 20) {\r\n        const results = await this.search(queryStr, {\r\n            filters,\r\n            hitsPerPage: maxResults\r\n        });\r\n        // Legacy format expected just an array of IDs usually, but let's return hits \r\n        // Adapters will handle the difference if needed, or we map it:\r\n        return results.hits.map((h: any) => h.id || h.objectID);\r\n    }\r\n\r\n    isAlgoliaEnabled() {\r\n        return this.algolia.isEnabled();\r\n    }\r\n\r\n    /**\r\n     * Get facet values for filters\r\n     */\r\n    async getFacets(index = 'posts', facetName: string, queryStr = '') {\r\n        if (this.algolia.isEnabled()) {\r\n            return await this.algolia.getFacets(index, facetName, queryStr);\r\n        }\r\n\r\n        return await this.firestore.getFacets(index, facetName);\r\n    }\r\n\r\n    /**\r\n     * Get trending searches\r\n     */\r\n    async getTrendingSearches(limit = 10) {\r\n        const cacheKey = 'trending_searches';\r\n        const cached = await this.cache.get(cacheKey);\r\n\r\n        if (cached) {\r\n            return cached;\r\n        }\r\n\r\n        const trending = await this._calculateTrendingSearches(limit);\r\n        await this.cache.set(cacheKey, trending, CACHE_CONFIG.TRENDING_SEARCHES.ttl);\r\n\r\n        return trending;\r\n    }\r\n\r\n    /**\r\n     * Get user search history\r\n     */\r\n    async getUserSearchHistory(userId: string, limit = 20) {\r\n        const cacheKey = `user_history_${userId}`;\r\n        return await this.cache.get(cacheKey) || [];\r\n    }\r\n\r\n    /**\r\n     * Clear user search history\r\n     */\r\n    async clearUserSearchHistory(userId: string) {\r\n        const cacheKey = `user_history_${userId}`;\r\n        await this.cache.delete(cacheKey);\r\n    }\r\n\r\n    /**\r\n     * Get search metrics\r\n     */\r\n    getMetrics() {\r\n        return {\r\n            ...this.metrics,\r\n            cacheHitRate: this.metrics.totalSearches > 0\r\n                ? (this.metrics.cacheHits / this.metrics.totalSearches * 100).toFixed(2) + '%'\r\n                : '0%',\r\n            algoliaUsage: this.metrics.totalSearches > 0\r\n                ? (this.metrics.algoliaSearches / this.metrics.totalSearches * 100).toFixed(2) + '%'\r\n                : '0%',\r\n            firestoreUsage: this.metrics.totalSearches > 0\r\n                ? (this.metrics.firestoreSearches / this.metrics.totalSearches * 100).toFixed(2) + '%'\r\n                : '0%'\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Health check\r\n     */\r\n    async healthCheck() {\r\n        const health = {\r\n            algolia: await this.algolia.healthCheck(),\r\n            firestore: await this.firestore.healthCheck(),\r\n            cache: this.cache.healthCheck(),\r\n            metrics: this.getMetrics()\r\n        };\r\n\r\n        return {\r\n            status: health.algolia.status === 'ok' || health.firestore.status === 'ok' ? 'ok' : 'degraded',\r\n            providers: health\r\n        };\r\n    }\r\n\r\n    // ========================================================================\r\n    // PRIVATE METHODS\r\n    // ========================================================================\r\n\r\n    _generateCacheKey(queryStr: string, options: any) {\r\n        const normalized = queryStr.toLowerCase().trim();\r\n        const filterKey = JSON.stringify(options.filters || {});\r\n        const sortKey = options.sort || 'relevance';\r\n        const pageKey = options.page || 0;\r\n\r\n        return `search:${options.index}:${normalized}:${filterKey}:${sortKey}:${pageKey}`;\r\n    }\r\n\r\n    async _trackSearchHistory(userId: string, queryStr: string, resultCount: number) {\r\n        const cacheKey = `user_history_${userId}`;\r\n        const history = await this.cache.get(cacheKey) || [];\r\n\r\n        history.unshift({\r\n            query: queryStr,\r\n            resultCount,\r\n            timestamp: Date.now()\r\n        });\r\n\r\n        const trimmed = history.slice(0, CACHE_CONFIG.USER_HISTORY.maxSize);\r\n        await this.cache.set(cacheKey, trimmed, CACHE_CONFIG.USER_HISTORY.ttl);\r\n    }\r\n\r\n    async _calculateTrendingSearches(limit: number) {\r\n        return [];\r\n    }\r\n}\r\n\r\n// Singleton instance\r\nlet searchServiceInstance: SearchService | null = null;\r\n\r\nexport const getSearchService = () => {\r\n    if (!searchServiceInstance) {\r\n        searchServiceInstance = new SearchService();\r\n    }\r\n    return searchServiceInstance;\r\n};\r\n\r\n// Default export for legacy compat\r\nexport default {\r\n    searchPosts: (q: string, f: any, m: any) => getSearchService().searchPosts(q, f, m),\r\n    isAlgoliaEnabled: () => getSearchService().isAlgoliaEnabled(),\r\n    getSearchSuggestions: (q: string, m: any) => getSearchService().getSearchSuggestions(q, m),\r\n    // Expose the raw service too\r\n    service: getSearchService()\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\core\\store\\useFeedStore.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\core\\store\\useThemeStore.js","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'themeName' is defined but never used. Allowed unused args must match /^_/u.","line":28,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":28,"endColumn":25}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Theme Store - Manages accent color theming\r\n * Locked to Art mode\r\n */\r\n\r\nimport { create } from 'zustand';\r\n\r\n// Color definitions (Art only)\r\nconst ART_THEME = {\r\n    name: 'art',\r\n    accentColor: '#7FFFD4',      // Mint green\r\n    secondaryColor: '#4CC9F0',    // Cyan\r\n    glowColor: 'rgba(127, 255, 212, 0.18)',\r\n    glowColorStrong: 'rgba(127, 255, 212, 0.4)',\r\n    borderColor: 'rgba(127, 255, 212, 0.2)',\r\n    gradientStart: '#7FFFD4',\r\n    gradientEnd: '#4CC9F0'\r\n};\r\n\r\nexport const useThemeStore = create((set) => ({\r\n    // Current theme\r\n    theme: 'art',\r\n\r\n    // Current colors\r\n    ...ART_THEME,\r\n\r\n    // Switch theme (No-op or reset to art)\r\n    setTheme: (themeName) => {\r\n        // Enforce art theme regardless of input\r\n        set({ theme: 'art', ...ART_THEME });\r\n\r\n        // Update CSS variables if needed (though they should be default)\r\n        if (typeof document !== 'undefined') {\r\n            const root = document.documentElement;\r\n            root.style.setProperty('--accent-color', ART_THEME.accentColor);\r\n            root.style.setProperty('--accent-secondary', ART_THEME.secondaryColor);\r\n            root.style.setProperty('--accent-glow', ART_THEME.glowColor);\r\n            root.style.setProperty('--accent-glow-strong', ART_THEME.glowColorStrong);\r\n            root.style.setProperty('--accent-border', ART_THEME.borderColor);\r\n            root.style.setProperty('--accent-gradient-start', ART_THEME.gradientStart);\r\n            root.style.setProperty('--accent-gradient-end', ART_THEME.gradientEnd);\r\n\r\n            // Remove social theme class if present\r\n            document.body.classList.remove('social-theme');\r\n        }\r\n    },\r\n\r\n    // Override accent color for Profile view\r\n    setProfileAccent: (color) => {\r\n        if (!color) return;\r\n\r\n        // Handle gradient strings - extract first hex or fallback\r\n        let solidColor = color;\r\n        if (color.includes('gradient')) {\r\n            const match = color.match(/#[0-9a-fA-F]{6}/);\r\n            solidColor = match ? match[0] : ART_THEME.accentColor;\r\n        }\r\n\r\n        set({\r\n            accentColor: solidColor,\r\n            secondaryColor: solidColor // Use same color for simplicity in profile mode\r\n        });\r\n\r\n        if (typeof document !== 'undefined') {\r\n            const root = document.documentElement;\r\n            root.style.setProperty('--accent-color', solidColor);\r\n            root.style.setProperty('--accent-secondary', solidColor);\r\n            // Optionally update glows if desired, but accent-color usually handles main UI\r\n        }\r\n    },\r\n\r\n    // Reset to default Art theme\r\n    resetProfileAccent: () => {\r\n        set({ ...ART_THEME });\r\n        if (typeof document !== 'undefined') {\r\n            const root = document.documentElement;\r\n            root.style.setProperty('--accent-color', ART_THEME.accentColor);\r\n            root.style.setProperty('--accent-secondary', ART_THEME.secondaryColor);\r\n        }\r\n    },\r\n\r\n    // Get current theme colors\r\n    getColors: () => {\r\n        return ART_THEME;\r\n    }\r\n}));\r\n\r\n// Helper hook to get theme colors\r\nexport const useThemeColors = () => {\r\n    return ART_THEME;\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\core\\theme\\colors.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\core\\types\\contest.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\core\\types\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\core\\utils\\cleanupOrphanedPosts.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\core\\utils\\colorBackfillTool.js","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'where' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":54,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":59}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Browser-based Color Backfill Tool\r\n// This can be run from the browser console or as a page component\r\n\r\nimport { collection, getDocs, doc, updateDoc, query, where, limit } from 'firebase/firestore';\r\nimport { db } from '@/core/firebase';\r\nimport { extractDominantColor } from '@/core/utils/colors';\r\nimport { logger } from '@/core/utils/logger';\r\n\r\nexport class ColorBackfillTool {\r\n    constructor() {\r\n        this.processed = 0;\r\n        this.succeeded = 0;\r\n        this.failed = 0;\r\n        this.skipped = 0;\r\n        this.isRunning = false;\r\n    }\r\n\r\n    async backfillColors(batchSize = 10, onProgress = null) {\r\n        if (this.isRunning) {\r\n            logger.warn('ΓÜá∩╕Å Backfill already running');\r\n            return;\r\n        }\r\n\r\n        this.isRunning = true;\r\n        this.processed = 0;\r\n        this.succeeded = 0;\r\n        this.failed = 0;\r\n        this.skipped = 0;\r\n\r\n        try {\r\n            logger.log('≡ƒÄ¿ Starting Color Backfill');\r\n            logger.log('='.repeat(60));\r\n\r\n            // Get posts without dominantColor\r\n            const postsRef = collection(db, 'posts');\r\n            const q = query(postsRef, limit(batchSize));\r\n            const snapshot = await getDocs(q);\r\n\r\n            logger.log(`≡ƒôè Found ${snapshot.size} posts to check\\n`);\r\n\r\n            for (const postDoc of snapshot.docs) {\r\n                this.processed++;\r\n                const data = postDoc.data();\r\n                const postId = postDoc.id;\r\n\r\n                const progress = {\r\n                    current: this.processed,\r\n                    total: snapshot.size,\r\n                    postId,\r\n                    status: 'processing'\r\n                };\r\n\r\n                logger.log(`\\n[${this.processed}/${snapshot.size}] Processing ${postId.substring(0, 10)}...`);\r\n\r\n                // Check if already has color\r\n                if (data.dominantColor) {\r\n                    logger.log('  ΓÅ¡∩╕Å Already has color:', data.dominantColor);\r\n                    this.skipped++;\r\n                    progress.status = 'skipped';\r\n                    if (onProgress) onProgress(progress);\r\n                    continue;\r\n                }\r\n\r\n                // Get first image URL\r\n                const imageUrl = data.imageUrls?.[0] ||\r\n                    data.thumbnailUrls?.[0] ||\r\n                    data.images?.[0]?.url ||\r\n                    data.images?.[0]?.thumbnailUrl;\r\n\r\n                if (!imageUrl) {\r\n                    logger.log('  Γ¥î No image URL found');\r\n                    this.failed++;\r\n                    progress.status = 'failed';\r\n                    progress.error = 'No image URL';\r\n                    if (onProgress) onProgress(progress);\r\n                    continue;\r\n                }\r\n\r\n                logger.log('  ≡ƒû╝∩╕Å Extracting color from image...');\r\n\r\n                try {\r\n                    // Extract color using client-side function\r\n                    const colorData = await extractDominantColor(imageUrl);\r\n                    const dominantColor = colorData.hex;\r\n\r\n                    logger.log('  Γ£à Extracted color:', dominantColor);\r\n\r\n                    // Update Firestore\r\n                    const postRef = doc(db, 'posts', postId);\r\n                    await updateDoc(postRef, {\r\n                        dominantColor: dominantColor\r\n                    });\r\n\r\n                    logger.log('  ≡ƒÆ╛ Saved to Firestore');\r\n                    this.succeeded++;\r\n                    progress.status = 'success';\r\n                    progress.color = dominantColor;\r\n\r\n                } catch (error) {\r\n                    logger.error('  Γ¥î Failed:', error.message);\r\n                    this.failed++;\r\n                    progress.status = 'failed';\r\n                    progress.error = error.message;\r\n                }\r\n\r\n                if (onProgress) onProgress(progress);\r\n\r\n                // Rate limiting - wait 200ms between requests\r\n                await new Promise(resolve => setTimeout(resolve, 200));\r\n            }\r\n\r\n            logger.log('\\n' + '='.repeat(60));\r\n            logger.log('≡ƒôè BACKFILL COMPLETE');\r\n            logger.log('='.repeat(60));\r\n            logger.log(`Total processed: ${this.processed}`);\r\n            logger.log(`Γ£à Succeeded: ${this.succeeded}`);\r\n            logger.log(`Γ¥î Failed: ${this.failed}`);\r\n            logger.log(`ΓÅ¡∩╕Å Skipped (already has color): ${this.skipped}`);\r\n            logger.log('='.repeat(60));\r\n\r\n            return {\r\n                processed: this.processed,\r\n                succeeded: this.succeeded,\r\n                failed: this.failed,\r\n                skipped: this.skipped\r\n            };\r\n\r\n        } catch (error) {\r\n            logger.error('Γ¥î Fatal error:', error);\r\n            throw error;\r\n        } finally {\r\n            this.isRunning = false;\r\n        }\r\n    }\r\n\r\n    getStats() {\r\n        return {\r\n            processed: this.processed,\r\n            succeeded: this.succeeded,\r\n            failed: this.failed,\r\n            skipped: this.skipped,\r\n            isRunning: this.isRunning\r\n        };\r\n    }\r\n}\r\n\r\n// Export singleton instance\r\nexport const colorBackfillTool = new ColorBackfillTool();\r\n\r\n// Usage example:\r\n// import { colorBackfillTool } from './utils/colorBackfillTool';\r\n//\r\n// // Run backfill with progress callback\r\n// await colorBackfillTool.backfillColors(10, (progress) => {\r\n//     console.log(`Progress: ${progress.current}/${progress.total}`, progress.status);\r\n// });\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\core\\utils\\colorUtils.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'reject' is defined but never used. Allowed unused args must match /^_/u.","line":10,"column":34,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":40},{"ruleId":"prefer-const","severity":2,"message":"'h' is never reassigned. Use 'const' instead.","line":54,"column":21,"nodeType":"Identifier","messageId":"useConst","endLine":54,"endColumn":22,"fix":{"range":[1814,1829],"text":"const h = hsl[0];"}}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":1,"fixableWarningCount":0,"source":"/**\r\n * Utility functions for color extraction and manipulation\r\n */\r\n\r\n/**\r\n * Extracts the dominant color from an image URL and returns it as a darkened hex color\r\n * suitable for a cinematic background gradient.\r\n */\r\nexport const extractDominantHue = async (imageSrc: string): Promise<string | null> => {\r\n    return new Promise((resolve, reject) => {\r\n        const img = new Image();\r\n        img.crossOrigin = \"Anonymous\";\r\n        img.src = imageSrc;\r\n\r\n        img.onload = () => {\r\n            try {\r\n                const canvas = document.createElement('canvas');\r\n                const ctx = canvas.getContext('2d');\r\n                if (!ctx) {\r\n                    resolve(null);\r\n                    return;\r\n                }\r\n\r\n                // Downscale for performance\r\n                canvas.width = 50;\r\n                canvas.height = 50;\r\n\r\n                ctx.drawImage(img, 0, 0, 50, 50);\r\n\r\n                const imageData = ctx.getImageData(0, 0, 50, 50);\r\n                const data = imageData.data;\r\n\r\n                let r = 0, g = 0, b = 0;\r\n                let count = 0;\r\n\r\n                for (let i = 0; i < data.length; i += 4) {\r\n                    r += data[i] || 0;\r\n                    g += data[i + 1] || 0;\r\n                    b += data[i + 2] || 0;\r\n                    count++;\r\n                }\r\n\r\n                r = Math.floor(r / count);\r\n                g = Math.floor(g / count);\r\n                b = Math.floor(b / count);\r\n\r\n                // Convert to HSL to adjust\r\n                const hsl = rgbToHsl(r, g, b);\r\n\r\n                // Apply Darkening & Desaturation Rules\r\n                // Rule: Saturation -20% to -40%, Lightness -40% to -60%\r\n                // We aim for a subtler, darker \"atmosphere\" color (L around 10-15%)\r\n\r\n                let h = hsl[0];\r\n                let s = hsl[1];\r\n                let l = hsl[2];\r\n\r\n                // Dampen saturation slightly to avoid neons but maintain color\r\n                s = Math.max(0.2, Math.min(0.9, s));\r\n\r\n                // Adjust Lightness:\r\n                // User Feedback: \"Inbetween\"\r\n                // New Target: 0.20 (Deep Atmosphere) to 0.45 (Visible Glow)\r\n                l = Math.max(0.20, Math.min(0.45, l * 0.75));\r\n\r\n                // Check for \"Too White/Grey/Black\" (Low Saturation)\r\n                // If S is very low, it's basically grey. We can keep it grey (black gradient) or push slightly to blue-grey?\r\n                // Let's stick to true color or fallback if undefined.\r\n\r\n                const finalHex = hslToHex(h, s, l);\r\n                resolve(finalHex);\r\n            } catch (e) {\r\n                console.error(\"Color extraction failed\", e);\r\n                resolve(null);\r\n            }\r\n        };\r\n\r\n        img.onerror = (e) => {\r\n            console.error(\"Image load failed for color extraction\", e);\r\n            resolve(null);\r\n        };\r\n    });\r\n};\r\n\r\n/**\r\n * Helpers\r\n */\r\n\r\nfunction rgbToHsl(r: number, g: number, b: number): [number, number, number] {\r\n    r /= 255;\r\n    g /= 255;\r\n    b /= 255;\r\n    const max = Math.max(r, g, b), min = Math.min(r, g, b);\r\n    let h = 0, s = 0;\r\n    const l = (max + min) / 2;\r\n\r\n    if (max === min) {\r\n        h = s = 0; // achromatic\r\n    } else {\r\n        const d = max - min;\r\n        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\r\n        switch (max) {\r\n            case r: h = (g - b) / d + (g < b ? 6 : 0); break;\r\n            case g: h = (b - r) / d + 2; break;\r\n            case b: h = (r - g) / d + 4; break;\r\n        }\r\n        h /= 6;\r\n    }\r\n\r\n    return [h, s, l];\r\n}\r\n\r\nfunction hslToHex(h: number, s: number, l: number): string {\r\n    let r, g, b;\r\n\r\n    if (s === 0) {\r\n        r = g = b = l; // achromatic\r\n    } else {\r\n        const hue2rgb = (p: number, q: number, t: number) => {\r\n            if (t < 0) t += 1;\r\n            if (t > 1) t -= 1;\r\n            if (t < 1 / 6) return p + (q - p) * 6 * t;\r\n            if (t < 1 / 2) return q;\r\n            if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;\r\n            return p;\r\n        };\r\n\r\n        const q = l < 0.5 ? l * (1 + s) : l + s - l * s;\r\n        const p = 2 * l - q;\r\n        r = hue2rgb(p, q, h + 1 / 3);\r\n        g = hue2rgb(p, q, h);\r\n        b = hue2rgb(p, q, h - 1 / 3);\r\n    }\r\n\r\n    const toHex = (x: number) => {\r\n        const hex = Math.round(x * 255).toString(16);\r\n        return hex.length === 1 ? '0' + hex : hex;\r\n    };\r\n\r\n    return `#${toHex(r)}${toHex(g)}${toHex(b)}`;\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\core\\utils\\colors.ts","messages":[{"ruleId":"no-async-promise-executor","severity":2,"message":"Promise executor functions should not be async.","line":92,"column":24,"nodeType":"Identifier","messageId":"async","endLine":92,"endColumn":29}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * PANOSPACE COLORS UTILITIES\r\n * \r\n * Logic for color extraction, conversion (HEX/RGB/HSL), and comparison.\r\n */\r\n\r\n// ============================================================================\r\n// 1. CONVERSION HELPERS\r\n// ============================================================================\r\n\r\nexport interface RGB {\r\n    r: number;\r\n    g: number;\r\n    b: number;\r\n}\r\n\r\nexport interface HSL {\r\n    h: number;\r\n    s: number;\r\n    l: number;\r\n}\r\n\r\n/**\r\n * Convert RGB to HEX\r\n */\r\nexport const rgbToHex = (r: number, g: number, b: number): string => {\r\n    return '#' + [r, g, b].map(x => {\r\n        const hex = x.toString(16);\r\n        return hex.length === 1 ? '0' + hex : hex;\r\n    }).join('');\r\n};\r\n\r\n/**\r\n * Convert HEX to RGB\r\n */\r\nexport const hexToRgb = (hex: string): RGB | null => {\r\n    const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n    return result ? {\r\n        r: parseInt(result[1]!, 16),\r\n        g: parseInt(result[2]!, 16),\r\n        b: parseInt(result[3]!, 16)\r\n    } : null;\r\n};\r\n\r\n/**\r\n * Convert RGB to HSL\r\n */\r\nexport const rgbToHsl = (r: number, g: number, b: number): HSL => {\r\n    r /= 255;\r\n    g /= 255;\r\n    b /= 255;\r\n\r\n    const max = Math.max(r, g, b);\r\n    const min = Math.min(r, g, b);\r\n    let h = 0, s = 0;\r\n    const l = (max + min) / 2;\r\n\r\n    if (max === min) {\r\n        h = s = 0; // achromatic\r\n    } else {\r\n        const d = max - min;\r\n        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\r\n\r\n        switch (max) {\r\n            case r: h = ((g - b) / d + (g < b ? 6 : 0)) / 6; break;\r\n            case g: h = ((b - r) / d + 2) / 6; break;\r\n            case b: h = ((r - g) / d + 4) / 6; break;\r\n        }\r\n    }\r\n\r\n    return {\r\n        h: Math.round(h * 360),\r\n        s: Math.round(s * 100),\r\n        l: Math.round(l * 100)\r\n    };\r\n};\r\n\r\n// ============================================================================\r\n// 2. EXTRACTION LOGIC\r\n// ============================================================================\r\n\r\nexport interface ExtractedColor {\r\n    hex: string;\r\n    rgb: RGB;\r\n    hsl: HSL;\r\n}\r\n\r\n/**\r\n * Extract dominant color from an image\r\n */\r\nexport const extractDominantColor = async (imageSource: string | File | Blob): Promise<ExtractedColor> => {\r\n    return new Promise(async (resolve, reject) => {\r\n        const img = new Image();\r\n        img.crossOrigin = \"Anonymous\";\r\n\r\n        img.onload = () => {\r\n            try {\r\n                // Create canvas\r\n                const canvas = document.createElement('canvas');\r\n                const ctx = canvas.getContext('2d');\r\n                if (!ctx) {\r\n                    reject(new Error('Canvas context not available'));\r\n                    return;\r\n                }\r\n\r\n                // Resize for performance (max 100x100)\r\n                const maxSize = 100;\r\n                const scale = Math.min(maxSize / img.width, maxSize / img.height);\r\n                canvas.width = img.width * scale;\r\n                canvas.height = img.height * scale;\r\n\r\n                // Draw image\r\n                ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\r\n\r\n                // Get image data\r\n                const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\r\n                const pixels = imageData.data;\r\n\r\n                // Color buckets for quantization\r\n                const colorMap: Record<string, number> = {};\r\n                const skipPixels = 5; // Sample every 5th pixel for performance\r\n\r\n                // Collect colors\r\n                for (let i = 0; i < pixels.length; i += 4 * skipPixels) {\r\n                    const r = pixels[i] || 0;\r\n                    const g = pixels[i + 1] || 0;\r\n                    const b = pixels[i + 2] || 0;\r\n                    const a = pixels[i + 3] || 0;\r\n\r\n                    // Skip transparent pixels\r\n                    if (a < 125) continue;\r\n\r\n                    // Skip very dark or very light pixels (likely shadows/highlights)\r\n                    const brightness = (r + g + b) / 3;\r\n                    if (brightness < 20 || brightness > 235) continue;\r\n\r\n                    // Quantize to reduce color variations (group similar colors)\r\n                    const quantize = 30;\r\n                    const qr = Math.round(r / quantize) * quantize;\r\n                    const qg = Math.round(g / quantize) * quantize;\r\n                    const qb = Math.round(b / quantize) * quantize;\r\n\r\n                    const key = `${qr},${qg},${qb}`;\r\n                    colorMap[key] = (colorMap[key] || 0) + 1;\r\n                }\r\n\r\n                // Find most common color\r\n                let maxCount = 0;\r\n                let dominantColor: string | null = null;\r\n\r\n                for (const [color, count] of Object.entries(colorMap)) {\r\n                    if (count > maxCount) {\r\n                        maxCount = count;\r\n                        dominantColor = color;\r\n                    }\r\n                }\r\n\r\n                if (!dominantColor) {\r\n                    // Fallback to center pixel\r\n                    const centerX = Math.floor(canvas.width / 2);\r\n                    const centerY = Math.floor(canvas.height / 2);\r\n                    const centerIndex = (centerY * canvas.width + centerX) * 4;\r\n                    dominantColor = `${pixels[centerIndex]},${pixels[centerIndex + 1]},${pixels[centerIndex + 2]}`;\r\n                }\r\n\r\n                const parts = dominantColor.split(',').map(Number);\r\n                const r = parts[0] || 0;\r\n                const g = parts[1] || 0;\r\n                const b = parts[2] || 0;\r\n                const hex = rgbToHex(r, g, b);\r\n                const hsl = rgbToHsl(r, g, b);\r\n\r\n                resolve({\r\n                    hex,\r\n                    rgb: { r, g, b },\r\n                    hsl\r\n                });\r\n            } catch (error) {\r\n                reject(error);\r\n            }\r\n        };\r\n\r\n        img.onerror = () => {\r\n            reject(new Error('Failed to load image'));\r\n        };\r\n\r\n        // Handle different input types\r\n        if (typeof imageSource === 'string') {\r\n            // For URLs (especially Firebase Storage), fetch as blob first to avoid CORS taint\r\n            if (imageSource.startsWith('http')) {\r\n                try {\r\n                    const response = await fetch(imageSource);\r\n                    const blob = await response.blob();\r\n                    const reader = new FileReader();\r\n                    reader.onload = (e) => {\r\n                        if (e.target?.result) {\r\n                            img.src = e.target.result as string;\r\n                        }\r\n                    };\r\n                    reader.onerror = () => reject(new Error('Failed to read blob'));\r\n                    reader.readAsDataURL(blob);\r\n                } catch (fetchError: any) {\r\n                    reject(new Error(`Failed to fetch image: ${fetchError.message}`));\r\n                }\r\n            } else {\r\n                img.src = imageSource;\r\n            }\r\n        } else if (imageSource instanceof File || imageSource instanceof Blob) {\r\n            const reader = new FileReader();\r\n            reader.onload = (e) => {\r\n                if (e.target?.result) {\r\n                    img.src = e.target.result as string;\r\n                }\r\n            };\r\n            reader.onerror = () => reject(new Error('Failed to read file'));\r\n            reader.readAsDataURL(imageSource);\r\n        } else {\r\n            reject(new Error('Invalid image source'));\r\n        }\r\n    });\r\n};\r\n\r\n// ============================================================================\r\n// 3. COLOR COMPARISON & NAMING\r\n// ============================================================================\r\n\r\n/**\r\n * Calculate color similarity (0-100, 100 = identical)\r\n */\r\nexport const colorSimilarity = (color1: string | RGB, color2: string | RGB): number => {\r\n    const c1 = typeof color1 === 'string' ? hexToRgb(color1) : color1;\r\n    const c2 = typeof color2 === 'string' ? hexToRgb(color2) : color2;\r\n\r\n    if (!c1 || !c2) return 0;\r\n\r\n    // Euclidean distance in RGB space\r\n    const distance = Math.sqrt(\r\n        Math.pow(c1.r - c2.r, 2) +\r\n        Math.pow(c1.g - c2.g, 2) +\r\n        Math.pow(c1.b - c2.b, 2)\r\n    );\r\n\r\n    // Max distance in RGB space is sqrt(255^2 * 3) Γëê 441\r\n    const maxDistance = 441;\r\n    const similarity = 100 - (distance / maxDistance * 100);\r\n\r\n    return Math.max(0, Math.min(100, similarity));\r\n};\r\n\r\n/**\r\n * Get color name from hex\r\n */\r\nexport const getColorName = (hex: string): string => {\r\n    const rgb = hexToRgb(hex);\r\n    if (!rgb) return 'Unknown';\r\n\r\n    const hsl = rgbToHsl(rgb.r, rgb.g, rgb.b);\r\n\r\n    // Check for grayscale\r\n    if (hsl.s < 10) {\r\n        if (hsl.l < 20) return 'Black';\r\n        if (hsl.l < 40) return 'Dark Gray';\r\n        if (hsl.l < 60) return 'Gray';\r\n        if (hsl.l < 80) return 'Light Gray';\r\n        return 'White';\r\n    }\r\n\r\n    // Color hue ranges\r\n    const h = hsl.h;\r\n    if (h < 15 || h >= 345) return 'Red';\r\n    if (h < 45) return 'Orange';\r\n    if (h < 75) return 'Yellow';\r\n    if (h < 150) return 'Green';\r\n    if (h < 200) return 'Cyan';\r\n    if (h < 260) return 'Blue';\r\n    if (h < 290) return 'Purple';\r\n    if (h < 330) return 'Magenta';\r\n    return 'Pink';\r\n};\r\n\r\n/**\r\n * Predefined color palette for search\r\n */\r\nexport const COLOR_PALETTE = [\r\n    { name: 'Red', hex: '#FF0000', hue: 0 },\r\n    { name: 'Orange', hex: '#FF8800', hue: 30 },\r\n    { name: 'Yellow', hex: '#FFFF00', hue: 60 },\r\n    { name: 'Lime', hex: '#88FF00', hue: 90 },\r\n    { name: 'Green', hex: '#00FF00', hue: 120 },\r\n    { name: 'Teal', hex: '#00FF88', hue: 150 },\r\n    { name: 'Cyan', hex: '#00FFFF', hue: 180 },\r\n    { name: 'Sky', hex: '#0088FF', hue: 210 },\r\n    { name: 'Blue', hex: '#0000FF', hue: 240 },\r\n    { name: 'Purple', hex: '#8800FF', hue: 270 },\r\n    { name: 'Magenta', hex: '#FF00FF', hue: 300 },\r\n    { name: 'Pink', hex: '#FF0088', hue: 330 },\r\n    { name: 'Black', hex: '#000000', hue: null },\r\n    { name: 'Gray', hex: '#808080', hue: null },\r\n    { name: 'White', hex: '#FFFFFF', hue: null }\r\n];\r\n\r\n/**\r\n * Stub for color backfill utility\r\n * TODO: Implement actual backfill logic if needed\r\n */\r\nexport const colorBackfillTool = {\r\n    run: async (): Promise<{ success: boolean; processed: number; errors: number }> => {\r\n        console.warn('colorBackfillTool is a stub - not implemented');\r\n        return { success: true, processed: 0, errors: 0 };\r\n    }\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\core\\utils\\dates.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\core\\utils\\disciplineMatching.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\core\\utils\\eventValidation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\core\\utils\\exif.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\core\\utils\\filterHelpers.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\core\\utils\\helpers.ts","messages":[{"ruleId":"no-undef","severity":1,"message":"'NodeJS' is not defined.","line":75,"column":18,"nodeType":"Identifier","messageId":"undef","endLine":75,"endColumn":24}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Safe Utility Helpers\r\n * \r\n * Defensive functions for common operations to prevent runtime errors.\r\n */\r\n\r\n/**\r\n * Safely format a price value\r\n * Handles undefined, null, strings, and numbers\r\n */\r\nexport function formatPrice(price: number | string | undefined | null): string {\r\n    const numPrice = Number(price || 0);\r\n    if (isNaN(numPrice)) return '$0.00';\r\n    return `$${numPrice.toFixed(2)}`;\r\n}\r\n\r\n/**\r\n * Format price without dollar sign (for input fields)\r\n */\r\nexport function formatPriceInput(price: number | string | undefined | null): string {\r\n    const numPrice = Number(price || 0);\r\n    if (isNaN(numPrice)) return '0.00';\r\n    return numPrice.toFixed(2);\r\n}\r\n\r\n/**\r\n * Safely get nested property\r\n */\r\nexport function getNestedValue<T>(obj: any, path: string, defaultValue: T): T {\r\n    const keys = path.split('.');\r\n    let current = obj;\r\n\r\n    for (const key of keys) {\r\n        if (current == null || typeof current !== 'object') {\r\n            return defaultValue;\r\n        }\r\n        current = current[key];\r\n    }\r\n\r\n    return current !== undefined ? current : defaultValue;\r\n}\r\n\r\n/**\r\n * Safely parse JSON\r\n */\r\nexport function safeJsonParse<T>(json: string, defaultValue: T): T {\r\n    try {\r\n        return JSON.parse(json);\r\n    } catch {\r\n        return defaultValue;\r\n    }\r\n}\r\n\r\n/**\r\n * Clamp a number between min and max\r\n */\r\nexport function clamp(value: number, min: number, max: number): number {\r\n    return Math.min(Math.max(value, min), max);\r\n}\r\n\r\n/**\r\n * Generate a unique ID\r\n */\r\nexport function generateId(): string {\r\n    return `${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\r\n}\r\n\r\n/**\r\n * Debounce function calls\r\n */\r\nexport function debounce<T extends (...args: any[]) => any>(\r\n    func: T,\r\n    wait: number\r\n): (...args: Parameters<T>) => void {\r\n    let timeout: NodeJS.Timeout | null = null;\r\n\r\n    return (...args: Parameters<T>) => {\r\n        if (timeout) clearTimeout(timeout);\r\n        timeout = setTimeout(() => func(...args), wait);\r\n    };\r\n}\r\n\r\n/**\r\n * Throttle function calls\r\n */\r\nexport function throttle<T extends (...args: any[]) => any>(\r\n    func: T,\r\n    limit: number\r\n): (...args: Parameters<T>) => void {\r\n    let inThrottle: boolean;\r\n\r\n    return (...args: Parameters<T>) => {\r\n        if (!inThrottle) {\r\n            func(...args);\r\n            inThrottle = true;\r\n            setTimeout(() => (inThrottle = false), limit);\r\n        }\r\n    };\r\n}\r\n\r\n/**\r\n * Safe array access\r\n */\r\nexport function safeArrayAccess<T>(arr: T[] | undefined | null, index: number, defaultValue: T): T {\r\n    if (!arr || index < 0 || index >= arr.length) {\r\n        return defaultValue;\r\n    }\r\n    return arr[index] as T;\r\n}\r\n\r\n/**\r\n * Truncate text with ellipsis\r\n */\r\nexport function truncate(text: string, maxLength: number): string {\r\n    if (text.length <= maxLength) return text;\r\n    return text.substring(0, maxLength - 3) + '...';\r\n}\r\n\r\n/**\r\n * Format file size\r\n */\r\nexport function formatFileSize(bytes: number): string {\r\n    if (bytes === 0) return '0 Bytes';\r\n\r\n    const k = 1024;\r\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\r\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n\r\n    return Math.round((bytes / Math.pow(k, i)) * 100) / 100 + ' ' + sizes[i];\r\n}\r\n\r\n/**\r\n * Check if value is empty\r\n */\r\nexport function isEmpty(value: any): boolean {\r\n    if (value == null) return true;\r\n    if (typeof value === 'string') return value.trim().length === 0;\r\n    if (Array.isArray(value)) return value.length === 0;\r\n    if (typeof value === 'object') return Object.keys(value).length === 0;\r\n    return false;\r\n}\r\n\r\n/**\r\n * Deep clone object\r\n */\r\nexport function deepClone<T>(obj: T): T {\r\n    return JSON.parse(JSON.stringify(obj));\r\n}\r\n\r\n/**\r\n * Sleep/delay utility\r\n */\r\nexport function sleep(ms: number): Promise<void> {\r\n    return new Promise(resolve => setTimeout(resolve, ms));\r\n}\r\n\r\n/**\r\n * Validate EXIF field\r\n */\r\nexport function validateExifField(field: string, value: any): boolean {\r\n    if (!value) return true; // Empty is valid (optional)\r\n\r\n    switch (field) {\r\n        case 'focalLength':\r\n            return !isNaN(value) && value > 0 && value <= 2000;\r\n        case 'fNumber':\r\n            return !isNaN(value) && value >= 0.7 && value <= 64;\r\n        case 'iso':\r\n            return !isNaN(value) && value >= 50 && value <= 409600;\r\n        case 'exposureTime':\r\n            return typeof value === 'string' && value.length > 0;\r\n        default:\r\n            return true;\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\core\\utils\\imageCache.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\core\\utils\\imageCompression.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\core\\utils\\logger.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\core\\utils\\migrateDateFormat.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\core\\utils\\printfulApi.ts","messages":[{"ruleId":"@typescript-eslint/ban-ts-comment","severity":2,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":33,"column":17,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":33,"endColumn":121,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[1187,1291],"text":"// @ts-expect-error - 'price' might not be on v directly if it came from selectedPrices logic not fully mapped"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * LEGACY COMPATIBILITY LAYER\r\n * \r\n * Re-exports from the canonical pricing engine.\r\n * This file exists for backward compatibility only.\r\n * New code should import from '@/core/pricing' instead.\r\n */\r\n\r\nexport * from '@/domain/shop/pricing';\r\nimport { CATALOG } from '@/domain/shop/pricing';\r\n\r\n// Mock POD Integration (kept for compatibility but using canonical pricing)\r\nexport const mockPODIntegration = {\r\n    async createProduct(imageUrl: string, title: string, selectedSizeIds: string[], selectedPrices: Record<string, number> | any) {\r\n        // Use the canonical pricing adapter\r\n        const payload = {\r\n            imageUrl,\r\n            title,\r\n            sizeIds: selectedSizeIds,\r\n            prices: selectedPrices,\r\n            variants: selectedSizeIds.map(id => ({\r\n                sizeId: id,\r\n                printifyId: CATALOG[id]?.printifyBlueprintId\r\n            }))\r\n        };\r\n\r\n        // Return mock result for now\r\n        return {\r\n            productId: `mock_${Date.now()}`,\r\n            variants: payload.variants.map((v, idx) => ({\r\n                sizeId: v.sizeId,\r\n                variantId: `variant_${v.sizeId}_${idx}`,\r\n                // @ts-ignore - 'price' might not be on v directly if it came from selectedPrices logic not fully mapped\r\n                price: (selectedPrices && selectedPrices[v.sizeId]) || 0,\r\n            }))\r\n        };\r\n    },\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\core\\utils\\quartzDateUtils.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\core\\utils\\recommendations.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\core\\utils\\sanitize.ts","messages":[{"ruleId":"no-control-regex","severity":2,"message":"Unexpected control character(s) in regular expression: \\x00, \\x08, \\x0b, \\x0c, \\x0e, \\x1f.","line":45,"column":25,"nodeType":"Literal","messageId":"unexpected","endLine":45,"endColumn":60}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Input Sanitization Utility\r\n * \r\n * Provides robust sanitization for user-generated content to prevent XSS,\r\n * layout breaking, and other injection attacks while preserving legitimate content\r\n * like emojis and international characters.\r\n */\r\n\r\ninterface SanitizeOptions {\r\n    allowNewLines?: boolean;\r\n    maxLength?: number | null;\r\n}\r\n\r\nexport const sanitize = (input: any, { allowNewLines = true, maxLength = null }: SanitizeOptions = {}): string => {\r\n    // 1. Handle non-string inputs\r\n    if (input === null || input === undefined) return '';\r\n    if (typeof input !== 'string') return String(input);\r\n\r\n    // 2. Strip HTML using DOMParser\r\n    // This is the safest way to strip HTML tags without executing scripts\r\n    // or loading external resources.\r\n    let text = input;\r\n    try {\r\n        const doc = new DOMParser().parseFromString(input, 'text/html');\r\n        text = doc.body.textContent || \"\";\r\n    } catch (e) {\r\n        // Fallback for non-browser environments (though this is a React app)\r\n        // Simple regex fallback if DOMParser fails\r\n        text = input.replace(/<[^>]*>/g, '');\r\n    }\r\n\r\n    // 3. Remove dangerous control characters\r\n    // We keep:\r\n    // - \\x09 (Tab)\r\n    // - \\x0A (Line Feed)\r\n    // - \\x0D (Carriage Return)\r\n    // - \\x20-\\x7E (Printable ASCII)\r\n    // - \\x80-\\uFFFF (Unicode, including Emojis)\r\n    // We remove:\r\n    // - \\x00-\\x08 (Null, Bell, Backspace, etc.)\r\n    // - \\x0B (Vertical Tab)\r\n    // - \\x0C (Form Feed)\r\n    // - \\x0E-\\x1F (Shift Out/In, Device Controls)\r\n    // - \\x7F (Delete)\r\n    text = text.replace(/[\\x00-\\x08\\x0B\\x0C\\x0E-\\x1F\\x7F]/g, '');\r\n\r\n    // 4. Handle Zalgo / Excessive Combining Characters\r\n    // Normalizing to NFKC (Compatibility Decomposition, followed by Canonical Composition)\r\n    // helps collapse compatible characters and reduces visual spoofing risks.\r\n    text = text.normalize('NFKC');\r\n\r\n    // 5. Handle Newlines\r\n    if (!allowNewLines) {\r\n        text = text.replace(/[\\r\\n]+/g, ' ');\r\n    }\r\n\r\n    // 6. Enforce Max Length (if specified)\r\n    if (maxLength && text.length > maxLength) {\r\n        text = text.slice(0, maxLength);\r\n    }\r\n\r\n    // 7. Final Trim\r\n    return text.trim();\r\n};\r\n\r\n// Helper for specific fields\r\nexport const sanitizeTitle = (input: any) => sanitize(input, { allowNewLines: false, maxLength: 200 });\r\nexport const sanitizeDescription = (input: any) => sanitize(input, { allowNewLines: true, maxLength: 2000 });\r\nexport const sanitizeComment = (input: any) => sanitize(input, { allowNewLines: true, maxLength: 500 });\r\nexport const sanitizeBio = (input: any) => sanitize(input, { allowNewLines: true, maxLength: 500 });\r\nexport const sanitizeDisplayName = (input: any) => sanitize(input, { allowNewLines: false, maxLength: 50 });\r\nexport const sanitizeTag = (input: any) => sanitize(input, { allowNewLines: false, maxLength: 30 }).toLowerCase();\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\core\\utils\\searchKeywords.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\core\\utils\\stackUtils.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\core\\utils\\thumbnailGenerator.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\core\\utils\\trendingAlgorithm.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\data\\defaultTags.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\domain\\feed\\score.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\domain\\posts\\exif.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\domain\\posts\\service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\domain\\search\\keywords.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\domain\\shop\\pricing.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isUltra' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":373,"column":72,"nodeType":"Identifier","messageId":"unusedVar","endLine":373,"endColumn":88}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Γ£à PANOSPACE PRICING ENGINE\r\n * \r\n * Single Source of Truth for:\r\n * - Product Catalog & Definitions\r\n * - Dynamic Pricing Logic\r\n * - Revenue Sharing (Artist vs Platform)\r\n * - Bundle Calculations\r\n * - Printify/Printful Mapping\r\n */\r\n\r\n// ============================================================================\r\n// 1. TYPES E DEFINITIONS\r\n// ============================================================================\r\n\r\nexport type ProductTier = 'economy' | 'premium' | 'limited' | 'small' | 'medium' | 'large';\r\nexport type ProductType = 'print' | 'sticker' | 'magazine' | 'album' | 'yearbook' | 'digital';\r\n\r\nexport interface ProductDefinition {\r\n    id: string;\r\n    label: string;\r\n    type: ProductType;\r\n    tier: ProductTier;\r\n    ratio: number;\r\n    baseCostCents: number;\r\n    suggestedRetailPrice: number;\r\n    printifyProviderId?: number;\r\n    printifyBlueprintId?: number;\r\n    dimensions?: { width: number; height: number; unit: 'in' | 'cm' };\r\n}\r\n\r\nexport interface PricingResult {\r\n    finalPrice: number;\r\n    artistProfit: number;\r\n    platformProfit: number;\r\n    baseCost: number;\r\n    artistShare: number;\r\n    label?: string;\r\n}\r\n\r\nexport interface BundlePricingResult {\r\n    baseCollectionPrice: number;\r\n    bundleDiscountPercent: number;\r\n    finalBundlePrice: number;\r\n    totalBaseCost: number;\r\n    artistBundleEarnings: number;\r\n    platformBundleEarnings: number;\r\n    totalPrintCount: number;\r\n    savingsAmount: number;\r\n    savingsPercent: number;\r\n    breakdown: BundleBreakdownItem[];\r\n}\r\n\r\nexport interface BundleBreakdownItem {\r\n    sizeId: string;\r\n    sizeLabel: string;\r\n    finalPrice: number;\r\n    baseCost: number;\r\n    artistProfit: number;\r\n    platformProfit: number;\r\n}\r\n\r\n// ============================================================================\r\n// 2. CONSTANTS\r\n// ============================================================================\r\n\r\nexport const PRINT_TIERS = {\r\n    ECONOMY: 'economy',\r\n    PREMIUM: 'premium',\r\n    LIMITED: 'limited'\r\n};\r\n\r\nexport const MONETIZATION_CONFIG = {\r\n    CURRENCY: 'usd',\r\n    MIN_TRANSACTION_AMOUNT_CENTS: 50,\r\n};\r\n\r\n// ============================================================================\r\n// 3. PRODUCT CATALOG\r\n// ============================================================================\r\n\r\nexport const PRINT_PRODUCTS: ProductDefinition[] = [\r\n    {\r\n        id: '4x6',\r\n        label: '4\" ├ù 6\"',\r\n        type: 'print',\r\n        tier: 'small',\r\n        ratio: 1.5,\r\n        baseCostCents: 500,\r\n        suggestedRetailPrice: 8.99,\r\n        printifyProviderId: 10,\r\n        printifyBlueprintId: 1008,\r\n        dimensions: { width: 4, height: 6, unit: 'in' }\r\n    },\r\n    {\r\n        id: '5x7',\r\n        label: '5\" ├ù 7\"',\r\n        type: 'print',\r\n        tier: 'small',\r\n        ratio: 1.4,\r\n        baseCostCents: 500,\r\n        suggestedRetailPrice: 11.99,\r\n        printifyProviderId: 10,\r\n        printifyBlueprintId: 1001,\r\n        dimensions: { width: 5, height: 7, unit: 'in' }\r\n    },\r\n    {\r\n        id: '6x8',\r\n        label: '6\" ├ù 8\"',\r\n        type: 'print',\r\n        tier: 'small',\r\n        ratio: 1.33,\r\n        baseCostCents: 600,\r\n        suggestedRetailPrice: 14.99,\r\n        printifyProviderId: 10,\r\n        printifyBlueprintId: 1011,\r\n        dimensions: { width: 6, height: 8, unit: 'in' }\r\n    },\r\n    {\r\n        id: '8x8',\r\n        label: '8\" ├ù 8\"',\r\n        type: 'print',\r\n        tier: 'small',\r\n        ratio: 1.0,\r\n        baseCostCents: 600,\r\n        suggestedRetailPrice: 16.99,\r\n        printifyProviderId: 10,\r\n        printifyBlueprintId: 1014,\r\n        dimensions: { width: 8, height: 8, unit: 'in' }\r\n    },\r\n    {\r\n        id: '8x10',\r\n        label: '8\" ├ù 10\"',\r\n        type: 'print',\r\n        tier: 'small',\r\n        ratio: 1.25,\r\n        baseCostCents: 650,\r\n        suggestedRetailPrice: 18.99,\r\n        printifyProviderId: 10,\r\n        printifyBlueprintId: 1002,\r\n        dimensions: { width: 8, height: 10, unit: 'in' }\r\n    },\r\n    {\r\n        id: '8x12',\r\n        label: '8\" ├ù 12\"',\r\n        type: 'print',\r\n        tier: 'small',\r\n        ratio: 1.5,\r\n        baseCostCents: 700,\r\n        suggestedRetailPrice: 21.99,\r\n        printifyProviderId: 10,\r\n        printifyBlueprintId: 1009,\r\n        dimensions: { width: 8, height: 12, unit: 'in' }\r\n    },\r\n    {\r\n        id: '10x10',\r\n        label: '10\" ├ù 10\"',\r\n        type: 'print',\r\n        tier: 'small',\r\n        ratio: 1.0,\r\n        baseCostCents: 750,\r\n        suggestedRetailPrice: 22.99,\r\n        printifyProviderId: 10,\r\n        printifyBlueprintId: 1015,\r\n        dimensions: { width: 10, height: 10, unit: 'in' }\r\n    },\r\n    {\r\n        id: '11x14',\r\n        label: '11\" ├ù 14\"',\r\n        type: 'print',\r\n        tier: 'medium',\r\n        ratio: 1.27,\r\n        baseCostCents: 850,\r\n        suggestedRetailPrice: 26.99,\r\n        printifyProviderId: 10,\r\n        printifyBlueprintId: 1003,\r\n        dimensions: { width: 11, height: 14, unit: 'in' }\r\n    },\r\n    {\r\n        id: '12x12',\r\n        label: '12\" ├ù 12\"',\r\n        type: 'print',\r\n        tier: 'medium',\r\n        ratio: 1.0,\r\n        baseCostCents: 900,\r\n        suggestedRetailPrice: 25.99,\r\n        printifyProviderId: 10,\r\n        printifyBlueprintId: 1016,\r\n        dimensions: { width: 12, height: 12, unit: 'in' }\r\n    },\r\n    {\r\n        id: '12x16',\r\n        label: '12\" ├ù 16\"',\r\n        type: 'print',\r\n        tier: 'medium',\r\n        ratio: 1.33,\r\n        baseCostCents: 900,\r\n        suggestedRetailPrice: 28.99,\r\n        printifyProviderId: 10,\r\n        printifyBlueprintId: 1013,\r\n        dimensions: { width: 12, height: 16, unit: 'in' }\r\n    },\r\n    {\r\n        id: '12x18',\r\n        label: '12\" ├ù 18\"',\r\n        type: 'print',\r\n        tier: 'medium',\r\n        ratio: 1.5,\r\n        baseCostCents: 1000,\r\n        suggestedRetailPrice: 29.99,\r\n        printifyProviderId: 10,\r\n        printifyBlueprintId: 1004,\r\n        dimensions: { width: 12, height: 18, unit: 'in' }\r\n    },\r\n    {\r\n        id: '16x16',\r\n        label: '16\" ├ù 16\"',\r\n        type: 'print',\r\n        tier: 'medium',\r\n        ratio: 1.0,\r\n        baseCostCents: 1200,\r\n        suggestedRetailPrice: 34.99,\r\n        printifyProviderId: 10,\r\n        printifyBlueprintId: 1017,\r\n        dimensions: { width: 16, height: 16, unit: 'in' }\r\n    },\r\n    {\r\n        id: '16x20',\r\n        label: '16\" ├ù 20\"',\r\n        type: 'print',\r\n        tier: 'medium',\r\n        ratio: 1.25,\r\n        baseCostCents: 1200,\r\n        suggestedRetailPrice: 39.99,\r\n        printifyProviderId: 10,\r\n        printifyBlueprintId: 1005,\r\n        dimensions: { width: 16, height: 20, unit: 'in' }\r\n    },\r\n    {\r\n        id: '18x24',\r\n        label: '18\" ├ù 24\"',\r\n        type: 'print',\r\n        tier: 'large',\r\n        ratio: 1.33,\r\n        baseCostCents: 1450,\r\n        suggestedRetailPrice: 49.99,\r\n        printifyProviderId: 10,\r\n        printifyBlueprintId: 1006,\r\n        dimensions: { width: 18, height: 24, unit: 'in' }\r\n    },\r\n    {\r\n        id: '20x20',\r\n        label: '20\" ├ù 20\"',\r\n        type: 'print',\r\n        tier: 'large',\r\n        ratio: 1.0,\r\n        baseCostCents: 1600,\r\n        suggestedRetailPrice: 44.99,\r\n        printifyProviderId: 10,\r\n        printifyBlueprintId: 1018,\r\n        dimensions: { width: 20, height: 20, unit: 'in' }\r\n    },\r\n    {\r\n        id: '20x30',\r\n        label: '20\" ├ù 30\"',\r\n        type: 'print',\r\n        tier: 'large',\r\n        ratio: 1.5,\r\n        baseCostCents: 2000,\r\n        suggestedRetailPrice: 54.99,\r\n        printifyProviderId: 10,\r\n        printifyBlueprintId: 1010,\r\n        dimensions: { width: 20, height: 30, unit: 'in' }\r\n    },\r\n    {\r\n        id: '24x36',\r\n        label: '24\" ├ù 36\"',\r\n        type: 'print',\r\n        tier: 'large',\r\n        ratio: 1.5,\r\n        baseCostCents: 2200,\r\n        suggestedRetailPrice: 69.99,\r\n        printifyProviderId: 10,\r\n        printifyBlueprintId: 1007,\r\n        dimensions: { width: 24, height: 36, unit: 'in' }\r\n    }\r\n];\r\n\r\nexport const STICKER_PRODUCTS: ProductDefinition[] = [\r\n    {\r\n        id: 'sticker_3x3',\r\n        label: '3\" ├ù 3\" Sticker',\r\n        type: 'sticker',\r\n        tier: 'small',\r\n        ratio: 1.0,\r\n        baseCostCents: 180,\r\n        suggestedRetailPrice: 3.99,\r\n        printifyProviderId: 20,\r\n        printifyBlueprintId: 2001,\r\n        dimensions: { width: 3, height: 3, unit: 'in' }\r\n    },\r\n    {\r\n        id: 'sticker_4x4',\r\n        label: '4\" ├ù 4\" Sticker',\r\n        type: 'sticker',\r\n        tier: 'small',\r\n        ratio: 1.0,\r\n        baseCostCents: 220,\r\n        suggestedRetailPrice: 5.99,\r\n        printifyProviderId: 20,\r\n        printifyBlueprintId: 2002,\r\n        dimensions: { width: 4, height: 4, unit: 'in' }\r\n    }\r\n];\r\n\r\n// Merged Catalog\r\nexport const CATALOG: Record<string, ProductDefinition> = [\r\n    ...PRINT_PRODUCTS,\r\n    ...STICKER_PRODUCTS\r\n].reduce((acc, product) => {\r\n    acc[product.id] = product;\r\n    return acc;\r\n}, {} as Record<string, ProductDefinition>);\r\n\r\n// Aliases for compatibility\r\nexport const PRINT_SIZES = PRINT_PRODUCTS;\r\nexport const STICKER_SIZES = STICKER_PRODUCTS;\r\n\r\n// ============================================================================\r\n// 4. CORE PRICING LOGIC\r\n// ============================================================================\r\n\r\n/**\r\n * Get available products (Alias for legacy code)\r\n */\r\nexport const getPrintifyProducts = () => PRINT_PRODUCTS;\r\n\r\n/**\r\n * Determine artist share based on retail price\r\n * TIERED SYSTEM:\r\n * < $20: 20%\r\n * $20 - $49: 25%\r\n * $50 - $99: 30%\r\n * >= $100: 35%\r\n */\r\nexport const getArtistShare = (retailPrice: number): number => {\r\n    if (retailPrice < 20) return 0.20;\r\n    if (retailPrice < 50) return 0.25;\r\n    if (retailPrice < 100) return 0.30;\r\n    return 0.35;\r\n};\r\n\r\n/**\r\n * Round to nearest .99\r\n */\r\nconst roundTo99 = (value: number): number => {\r\n    return Math.floor(value) + 0.99;\r\n};\r\n\r\n/**\r\n * Apply Premium/Limited Multipliers\r\n */\r\nexport const applyTierMultiplier = (value: number, tier: string = 'economy'): number => {\r\n    if (tier === 'premium') {\r\n        return roundTo99(value * 1.3);\r\n    }\r\n    return value;\r\n};\r\n\r\n/**\r\n * Calculate simple revenue share for a single item\r\n */\r\nexport const calculateEarnings = (retailPrice: number, sizeId: string, isUltra: boolean = false) => {\r\n    const product = CATALOG[sizeId];\r\n    // Fallback if product missing (safe defaults)\r\n    const baseCost = product ? product.baseCostCents / 100 : 10.00;\r\n\r\n    const profit = Math.max(0, retailPrice - baseCost);\r\n    const artistShare = getArtistShare(retailPrice);\r\n\r\n    return {\r\n        artistEarnings: profit * artistShare,\r\n        platformEarnings: profit * (1 - artistShare),\r\n        baseCost: baseCost,\r\n        retailPrice: retailPrice,\r\n        artistSharePercent: artistShare\r\n    };\r\n};\r\n\r\n/**\r\n * Compatibility wrapper for Printify Adapter\r\n */\r\nexport const calculatePrintifyEarnings = calculateEarnings;\r\n\r\n/**\r\n * Full pricing breakdown for UI\r\n */\r\nexport const calculateTieredPricing = (sizeId: string, tier: string = 'economy', isUltra: boolean = false): PricingResult | null => {\r\n    const product = CATALOG[sizeId];\r\n    if (!product) return null;\r\n\r\n    const retailPrice = applyTierMultiplier(product.suggestedRetailPrice, tier);\r\n    const earnings = calculateEarnings(retailPrice, sizeId, isUltra);\r\n\r\n    return {\r\n        finalPrice: retailPrice,\r\n        artistProfit: earnings.artistEarnings,\r\n        platformProfit: earnings.platformEarnings,\r\n        baseCost: earnings.baseCost,\r\n        artistShare: earnings.artistSharePercent,\r\n        label: product.label\r\n    };\r\n};\r\n\r\nexport const calculateStickerPricing = (stickerId: string): PricingResult | null => {\r\n    const sticker = STICKER_PRODUCTS.find(s => s.id === stickerId);\r\n    if (!sticker) return null;\r\n\r\n    const retailPrice = sticker.suggestedRetailPrice;\r\n    const baseCost = sticker.baseCostCents / 100;\r\n    const profit = Math.max(0, retailPrice - baseCost);\r\n    const artistShare = getArtistShare(retailPrice);\r\n\r\n    return {\r\n        finalPrice: retailPrice,\r\n        artistProfit: profit * artistShare,\r\n        platformProfit: profit * (1 - artistShare),\r\n        baseCost: baseCost,\r\n        artistShare: artistShare,\r\n        label: sticker.label\r\n    };\r\n};\r\n\r\n// ============================================================================\r\n// 5. BUNDLE LOGIC\r\n// ============================================================================\r\n\r\nexport const BUNDLE_DISCOUNT_PERCENT = 15;\r\nexport const MIN_ARTIST_MARGIN_PERCENT = 15;\r\nexport const MIN_PLATFORM_MARGIN_PERCENT = 10;\r\n\r\nconst roundToTwo = (num: number) => Math.round(num * 100) / 100;\r\n\r\n/**\r\n * Calculate logic for Collection Bundles\r\n */\r\nexport const calculateBundlePricing = (prints: any[], productTier: string = 'economy'): BundlePricingResult => {\r\n    if (!prints || prints.length === 0) {\r\n        return {\r\n            baseCollectionPrice: 0,\r\n            bundleDiscountPercent: 0,\r\n            finalBundlePrice: 0,\r\n            totalBaseCost: 0,\r\n            artistBundleEarnings: 0,\r\n            platformBundleEarnings: 0,\r\n            totalPrintCount: 0,\r\n            savingsAmount: 0,\r\n            savingsPercent: 0,\r\n            breakdown: []\r\n        };\r\n    }\r\n\r\n    // A. Aggregation\r\n    let baseCollectionPrice = 0;\r\n    let totalBaseCost = 0;\r\n    let totalArtistSingle = 0;\r\n    let totalPlatformSingle = 0;\r\n    const breakdown: BundleBreakdownItem[] = [];\r\n\r\n    prints.forEach(print => {\r\n        const product = CATALOG[print.sizeId];\r\n        if (product) {\r\n            const retailPrice = applyTierMultiplier(product.suggestedRetailPrice, productTier);\r\n            const earnings = calculateEarnings(retailPrice, print.sizeId);\r\n\r\n            baseCollectionPrice += retailPrice;\r\n            totalBaseCost += earnings.baseCost;\r\n            totalArtistSingle += earnings.artistEarnings;\r\n            totalPlatformSingle += earnings.platformEarnings;\r\n\r\n            breakdown.push({\r\n                sizeId: print.sizeId,\r\n                sizeLabel: product.label,\r\n                finalPrice: retailPrice,\r\n                baseCost: earnings.baseCost,\r\n                artistProfit: earnings.artistEarnings,\r\n                platformProfit: earnings.platformEarnings\r\n            });\r\n        }\r\n    });\r\n\r\n    // Formatting\r\n    baseCollectionPrice = roundToTwo(baseCollectionPrice);\r\n    totalBaseCost = roundToTwo(totalBaseCost);\r\n    totalArtistSingle = roundToTwo(totalArtistSingle);\r\n    totalPlatformSingle = roundToTwo(totalPlatformSingle);\r\n\r\n    // B. Discount Logic\r\n    let effectiveDiscountPercent = BUNDLE_DISCOUNT_PERCENT;\r\n    let targetBundlePrice = roundToTwo(baseCollectionPrice * (1 - effectiveDiscountPercent / 100));\r\n\r\n    // C. Earnings Split\r\n    let artistBundleEarnings = totalArtistSingle;\r\n    let platformBundleEarnings = targetBundlePrice - totalBaseCost - artistBundleEarnings;\r\n\r\n    // D. Safety Checks (Margins)\r\n    const minArtistEarnings = roundToTwo(totalBaseCost * MIN_ARTIST_MARGIN_PERCENT / 100);\r\n    const minPlatformEarnings = roundToTwo(totalBaseCost * MIN_PLATFORM_MARGIN_PERCENT / 100);\r\n\r\n    if (platformBundleEarnings < minPlatformEarnings || artistBundleEarnings < minArtistEarnings) {\r\n        // Recalculate if margins are violated\r\n        const minBundlePrice = totalBaseCost + minArtistEarnings + minPlatformEarnings;\r\n\r\n        if (minBundlePrice >= baseCollectionPrice) {\r\n            // Cannot discount safely\r\n            effectiveDiscountPercent = 0;\r\n            targetBundlePrice = baseCollectionPrice;\r\n            artistBundleEarnings = totalArtistSingle;\r\n            platformBundleEarnings = totalPlatformSingle;\r\n        } else {\r\n            // Adjust to minimum safe price\r\n            targetBundlePrice = minBundlePrice;\r\n            effectiveDiscountPercent = roundToTwo(((baseCollectionPrice - targetBundlePrice) / baseCollectionPrice) * 100);\r\n            artistBundleEarnings = minArtistEarnings;\r\n            platformBundleEarnings = minPlatformEarnings;\r\n        }\r\n    }\r\n\r\n    const finalBundlePrice = roundToTwo(targetBundlePrice);\r\n    artistBundleEarnings = roundToTwo(artistBundleEarnings);\r\n    platformBundleEarnings = roundToTwo(platformBundleEarnings);\r\n    const savingsAmount = roundToTwo(baseCollectionPrice - finalBundlePrice);\r\n    const savingsPercent = baseCollectionPrice > 0 ? roundToTwo((savingsAmount / baseCollectionPrice) * 100) : 0;\r\n\r\n    return {\r\n        baseCollectionPrice,\r\n        bundleDiscountPercent: effectiveDiscountPercent,\r\n        finalBundlePrice,\r\n        totalBaseCost,\r\n        artistBundleEarnings,\r\n        platformBundleEarnings,\r\n        totalPrintCount: prints.length,\r\n        savingsAmount,\r\n        savingsPercent,\r\n        breakdown\r\n    };\r\n};\r\n\r\n/**\r\n * Helper to validate bundle pricing\r\n */\r\nexport const validateBundlePricing = (bundlePricing: BundlePricingResult) => {\r\n    const errors: string[] = [];\r\n    if (bundlePricing.finalBundlePrice <= bundlePricing.totalBaseCost) errors.push('Bundled price below cost');\r\n    if (bundlePricing.artistBundleEarnings < 0) errors.push('Negative artist earnings');\r\n\r\n    return {\r\n        isValid: errors.length === 0,\r\n        errors\r\n    };\r\n};\r\n\r\n/**\r\n * Adapter for Collection Builder\r\n */\r\nexport const calculateCollectionBundlePricing = (items: any[] = [], posts: any[] = [], productTier: string = 'economy', defaultSizeId: string = '8x10') => {\r\n    const prints: any[] = [];\r\n    items.forEach((item, index) => {\r\n        prints.push({\r\n            sizeId: item.sizeId || defaultSizeId,\r\n            sizeLabel: item.sizeLabel || defaultSizeId,\r\n            source: 'collection-item',\r\n            index\r\n        });\r\n    });\r\n    posts.forEach(post => {\r\n        if (post.images && Array.isArray(post.images)) {\r\n            post.images.forEach((image: any, index: number) => {\r\n                prints.push({\r\n                    sizeId: image.sizeId || post.defaultSizeId || defaultSizeId,\r\n                    sizeLabel: image.sizeLabel || post.defaultSizeId || defaultSizeId,\r\n                    source: 'post',\r\n                    postId: post.id,\r\n                    index\r\n                });\r\n            });\r\n        }\r\n    });\r\n\r\n    return calculateBundlePricing(prints, productTier);\r\n};\r\n\r\n// ============================================================================\r\n// 6. UTILS & HELPERS\r\n// ============================================================================\r\n\r\n/**\r\n * Map Internal Size ID to Printify Provider/Blueprints\r\n */\r\nexport const mapSizeToPrintify = (sizeId: string) => {\r\n    const product = CATALOG[sizeId];\r\n    if (!product) {\r\n        return { providerId: null, blueprintId: null, error: 'Product not found' };\r\n    }\r\n    return {\r\n        providerId: product.printifyProviderId,\r\n        blueprintId: product.printifyBlueprintId,\r\n        sizeLabel: product.label\r\n    };\r\n};\r\n\r\n/**\r\n * Helper: Format Currency\r\n */\r\nexport const formatPrice = (price: any): string => {\r\n    const num = Number(price || 0);\r\n    if (isNaN(num)) return '$0.00';\r\n    return new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(num);\r\n};\r\n\r\nexport const formatPriceInput = (price: any): string => {\r\n    const num = Number(price || 0);\r\n    if (isNaN(num)) return '0.00';\r\n    return num.toFixed(2);\r\n};\r\n\r\n// Aspect Ratio Helper\r\nexport const getAspectRatioCategory = (width: number, height: number): number | 'custom' => {\r\n    if (!width || !height) return 'custom';\r\n    const ratio = width / height;\r\n\r\n    // Standard Ratios with slight tolerance\r\n    if (Math.abs(ratio - 1.0) < 0.05) return 1.0;\r\n    if (Math.abs(ratio - 1.25) < 0.05) return 1.25;\r\n    if (Math.abs(ratio - 1.33) < 0.05) return 1.33;\r\n    if (Math.abs(ratio - 1.4) < 0.05) return 1.4;\r\n    if (Math.abs(ratio - 1.5) < 0.05) return 1.5;\r\n\r\n    // Portrait Ratios\r\n    if (Math.abs(ratio - 0.8) < 0.05) return 1.25;\r\n    if (Math.abs(ratio - 0.75) < 0.05) return 1.33;\r\n    if (Math.abs(ratio - 0.66) < 0.05) return 1.5;\r\n\r\n    return 'custom';\r\n};\r\n\r\n/**\r\n * Filter valid sizes for a given image\r\n */\r\nexport const getValidSizesForImage = (width: number, height: number, allowCropped: boolean = false): ProductDefinition[] => {\r\n    if (allowCropped || !width || !height) return PRINT_PRODUCTS;\r\n\r\n    const imageRatio = width / height;\r\n    const isPortrait = imageRatio < 1;\r\n    const normalizedImageRatio = isPortrait ? 1 / imageRatio : imageRatio;\r\n\r\n    const validSizes = PRINT_PRODUCTS.filter(size => {\r\n        const diff = Math.abs(size.ratio - normalizedImageRatio);\r\n        return diff < 0.15; // 15% tolerance\r\n    });\r\n\r\n    return validSizes.length > 0 ? validSizes : PRINT_PRODUCTS;\r\n};\r\n\r\n// Base Price Accessor\r\nexport const getPrintifyBasePrice = (sizeId: string): number => {\r\n    const product = CATALOG[sizeId];\r\n    return product ? product.baseCostCents / 100 : 0;\r\n};\r\n\r\nexport const getRetailPrice = (sizeId: string, type: string = 'economy'): number => {\r\n    const product = CATALOG[sizeId];\r\n    if (!product) return 0;\r\n    return applyTierMultiplier(product.suggestedRetailPrice, type);\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\domain\\shop\\service.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Earnings' is defined but never used. Allowed unused vars must match /^_/u.","line":21,"column":52,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":60}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Shop Domain Service\r\n * \r\n * Handles shop item creation, pricing, and earnings calculations.\r\n */\r\n\r\nimport {\r\n    collection,\r\n    doc,\r\n    addDoc,\r\n    getDoc,\r\n    getDocs,\r\n    query,\r\n    where,\r\n    orderBy,\r\n    limit,\r\n    serverTimestamp,\r\n    Timestamp\r\n} from 'firebase/firestore';\r\nimport { db } from '@/firebase';\r\nimport type { ShopItem, Post, PostItem, PrintSize, Earnings } from '@/types';\r\nimport { getPrintifyProducts, calculateEarnings } from './pricing';\r\nimport { logger } from '@/core/utils/logger';\r\nconst PRINT_SIZES = getPrintifyProducts();\r\n\r\nconst SHOP_ITEMS_COLLECTION = 'shopItems';\r\n\r\n/**\r\n * Create shop items from a post's selected images\r\n */\r\nexport async function createShopItemsFromPost(\r\n    post: Post,\r\n    selectedItems: PostItem[],\r\n    authorIsUltra: boolean = false\r\n): Promise<ShopItem[]> {\r\n    const shopItems: ShopItem[] = [];\r\n\r\n    for (const item of selectedItems) {\r\n        if (item.type !== 'image' || !item.addToShop || !item.url) {\r\n            continue;\r\n        }\r\n\r\n        // Build print sizes with pricing\r\n        const printSizes: PrintSize[] = PRINT_SIZES\r\n            .filter(size => item.printSizes?.includes(size.id))\r\n            .map(size => {\r\n                const customPrice = item.customPrices?.[size.id];\r\n                const price = customPrice !== undefined ? Number(customPrice) : size.suggestedRetailPrice;\r\n                const earnings = calculateEarnings(price, size.id, authorIsUltra);\r\n\r\n                return {\r\n                    id: size.id,\r\n                    label: size.label,\r\n                    price: price,\r\n                    artistEarningsCents: Math.round(earnings.artistEarnings * 100),\r\n                    platformFeeCents: Math.round(earnings.platformEarnings * 100),\r\n                    baseCostCents: size.baseCostCents,\r\n                };\r\n            });\r\n\r\n        if (printSizes.length === 0) {\r\n            logger.warn('No print sizes selected for shop item, skipping');\r\n            continue;\r\n        }\r\n\r\n        // Create shop item document\r\n        const shopItemData = {\r\n            authorId: post.authorId,\r\n            authorName: post.authorName,\r\n            postRef: post.id,\r\n            imageUrl: item.url,\r\n            title: post.title,\r\n            description: post.description,\r\n            tags: post.tags,\r\n            printSizes,\r\n            createdAt: serverTimestamp(),\r\n\r\n            // Monetization\r\n            isLimitedEdition: item.isLimitedEdition || false,\r\n            editionSize: item.editionSize || 0,\r\n            rarityLevel: item.rarityLevel || 'common',\r\n            soldCount: 0\r\n        };\r\n\r\n        const docRef = await addDoc(collection(db, SHOP_ITEMS_COLLECTION), shopItemData);\r\n\r\n        shopItems.push({\r\n            ...shopItemData,\r\n            id: docRef.id,\r\n            createdAt: Timestamp.now(),\r\n        } as ShopItem);\r\n    }\r\n\r\n    return shopItems;\r\n}\r\n\r\n/**\r\n * Get a single shop item by ID\r\n */\r\nexport async function getShopItemById(shopItemId: string): Promise<ShopItem | null> {\r\n    const docRef = doc(db, SHOP_ITEMS_COLLECTION, shopItemId);\r\n    const docSnap = await getDoc(docRef);\r\n\r\n    if (!docSnap.exists()) {\r\n        return null;\r\n    }\r\n\r\n    return {\r\n        id: docSnap.id,\r\n        ...docSnap.data(),\r\n    } as ShopItem;\r\n}\r\n\r\n/**\r\n * Get shop items for a specific post\r\n */\r\nexport async function getShopItemsByPost(postId: string): Promise<ShopItem[]> {\r\n    const q = query(\r\n        collection(db, SHOP_ITEMS_COLLECTION),\r\n        where('postRef', '==', postId)\r\n    );\r\n\r\n    const snapshot = await getDocs(q);\r\n    return snapshot.docs.map(doc => ({\r\n        id: doc.id,\r\n        ...doc.data(),\r\n    })) as ShopItem[];\r\n}\r\n\r\n/**\r\n * Get shop items by author\r\n */\r\nexport async function getShopItemsByAuthor(\r\n    authorId: string,\r\n    limitCount: number = 20\r\n): Promise<ShopItem[]> {\r\n    const q = query(\r\n        collection(db, SHOP_ITEMS_COLLECTION),\r\n        where('authorId', '==', authorId),\r\n        orderBy('createdAt', 'desc'),\r\n        limit(limitCount)\r\n    );\r\n\r\n    const snapshot = await getDocs(q);\r\n    return snapshot.docs.map(doc => ({\r\n        id: doc.id,\r\n        ...doc.data(),\r\n    })) as ShopItem[];\r\n}\r\n\r\n/**\r\n * Get minimum price for a shop item\r\n */\r\nexport function getMinPrice(shopItem: ShopItem): number {\r\n    if (!shopItem.printSizes || shopItem.printSizes.length === 0) {\r\n        return 0;\r\n    }\r\n\r\n    const prices = shopItem.printSizes.map(size => Number(size.price) || 0);\r\n    return Math.min(...prices);\r\n}\r\n\r\n/**\r\n * Validate shop item has required data\r\n */\r\nexport function isValidShopItem(shopItem: ShopItem): boolean {\r\n    return !!(\r\n        shopItem.imageUrl &&\r\n        shopItem.printSizes &&\r\n        shopItem.printSizes.length > 0 &&\r\n        shopItem.printSizes.every(size =>\r\n            size.price > 0 &&\r\n            size.artistEarningsCents > 0\r\n        )\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\firebase.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\hooks\\useBlock.js","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'getDoc' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":34,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":40},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'onSnapshot' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":71,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":81},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'currentUser'. Either include it or remove the dependency array.","line":32,"column":8,"nodeType":"ArrayExpression","endLine":32,"endColumn":26,"suggestions":[{"desc":"Update the dependencies array to be: [currentUser, currentUser.uid]","fix":{"range":[1175,1193],"text":"[currentUser, currentUser.uid]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\r\nimport { doc, setDoc, deleteDoc, getDoc, serverTimestamp, collection, onSnapshot, getDocs } from 'firebase/firestore';\r\nimport { db } from '@/firebase';\r\nimport { useAuth } from '@/context/AuthContext';\r\n\r\nexport const useBlock = () => {\r\n    const { currentUser } = useAuth();\r\n    const [blockedUsers, setBlockedUsers] = useState(new Set());\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    // Load blocked users for the current user\r\n    useEffect(() => {\r\n        if (!currentUser) {\r\n            setBlockedUsers(new Set());\r\n            setLoading(false);\r\n            return;\r\n        }\r\n\r\n        const fetchBlockedUsers = async () => {\r\n            try {\r\n                const snapshot = await getDocs(collection(db, 'users', currentUser.uid, 'blockedUsers'));\r\n                const blocked = new Set(snapshot.docs.map(doc => doc.id));\r\n                setBlockedUsers(blocked);\r\n            } catch (error) {\r\n                console.error('Error fetching blocked users:', error);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchBlockedUsers();\r\n    }, [currentUser?.uid]);\r\n\r\n    const blockUser = async (userId, userName = 'Unknown') => {\r\n        if (!currentUser) throw new Error('Must be logged in to block users');\r\n        if (userId === currentUser.uid) throw new Error('Cannot block yourself');\r\n\r\n        try {\r\n            await setDoc(doc(db, 'users', currentUser.uid, 'blockedUsers', userId), {\r\n                blockedAt: serverTimestamp(),\r\n                userId: userId,\r\n                userName: userName\r\n            });\r\n            // Update local state\r\n            setBlockedUsers(prev => new Set(prev).add(userId));\r\n            return true;\r\n        } catch (error) {\r\n            console.error('Error blocking user:', error);\r\n            throw error;\r\n        }\r\n    };\r\n\r\n    const unblockUser = async (userId) => {\r\n        if (!currentUser) throw new Error('Must be logged in to unblock users');\r\n\r\n        try {\r\n            await deleteDoc(doc(db, 'users', currentUser.uid, 'blockedUsers', userId));\r\n            // Update local state\r\n            setBlockedUsers(prev => {\r\n                const newSet = new Set(prev);\r\n                newSet.delete(userId);\r\n                return newSet;\r\n            });\r\n            return true;\r\n        } catch (error) {\r\n            console.error('Error unblocking user:', error);\r\n            throw error;\r\n        }\r\n    };\r\n\r\n    const isBlocked = (userId) => {\r\n        return blockedUsers.has(userId);\r\n    };\r\n\r\n    return {\r\n        blockedUsers, // Set of user IDs\r\n        blockUser,\r\n        unblockUser,\r\n        isBlocked,\r\n        loading\r\n    };\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\hooks\\useCollections.js","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'refetch'. Either include it or remove the dependency array.","line":60,"column":8,"nodeType":"ArrayExpression","endLine":60,"endColumn":16,"suggestions":[{"desc":"Update the dependencies array to be: [refetch, userId]","fix":{"range":[1623,1631],"text":"[refetch, userId]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'refetch'. Either include it or remove the dependency array.","line":245,"column":8,"nodeType":"ArrayExpression","endLine":245,"endColumn":22,"suggestions":[{"desc":"Update the dependencies array to be: [collectionId, refetch]","fix":{"range":[7263,7277],"text":"[collectionId, refetch]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\r\nimport {\r\n    collection,\r\n    query,\r\n    where,\r\n    getDocs,\r\n    doc,\r\n    getDoc,\r\n    addDoc,\r\n    updateDoc,\r\n    deleteDoc,\r\n    serverTimestamp,\r\n    orderBy,\r\n    arrayUnion,\r\n    arrayRemove,\r\n    limit\r\n} from 'firebase/firestore';\r\nimport { db } from '@/firebase';\r\n\r\n/**\r\n * Hook for managing user collections\r\n * @param {string} userId - User ID to fetch collections for\r\n */\r\nexport const useCollections = (userId) => {\r\n    const [collections, setCollections] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n\r\n    const refetch = async () => {\r\n        if (!userId) {\r\n            setLoading(false);\r\n            return;\r\n        }\r\n\r\n        try {\r\n            setLoading(true);\r\n            const collectionsQuery = query(\r\n                collection(db, 'collections'),\r\n                where('ownerId', '==', userId),\r\n                orderBy('createdAt', 'desc'),\r\n                limit(50) // ≡ƒÜÇ OPTIMIZATION: Prevent unbounded reads\r\n            );\r\n            const snapshot = await getDocs(collectionsQuery);\r\n            const fetchedCollections = snapshot.docs.map(doc => ({\r\n                id: doc.id,\r\n                ...doc.data()\r\n            }));\r\n            setCollections(fetchedCollections);\r\n            setError(null);\r\n        } catch (err) {\r\n            console.error('Error fetching collections:', err);\r\n            setError(err.message);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        refetch();\r\n    }, [userId]);\r\n\r\n    return { collections, loading, error, refetch };\r\n};\r\n\r\n/**\r\n * Hook for creating and managing collections\r\n */\r\nexport const useCreateCollection = () => {\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState(null);\r\n\r\n    const createCollection = async (collectionData) => {\r\n        try {\r\n            setLoading(true);\r\n            setError(null);\r\n\r\n            const newCollection = {\r\n                ...collectionData,\r\n                createdAt: serverTimestamp(),\r\n                updatedAt: serverTimestamp(),\r\n                items: collectionData.items || [],\r\n                postRefs: collectionData.postRefs || [],\r\n                visibility: collectionData.visibility || 'public',\r\n                // Preserve shopSettings as-is from collectionData\r\n                shopSettings: collectionData.shopSettings || {\r\n                    showInStore: false\r\n                },\r\n                // Preserve bundlePricing if provided\r\n                bundlePricing: collectionData.bundlePricing || null,\r\n                productTier: collectionData.productTier || 'economy'\r\n            };\r\n\r\n            const docRef = await addDoc(collection(db, 'collections'), newCollection);\r\n\r\n            setLoading(false);\r\n            return { id: docRef.id, ...newCollection };\r\n        } catch (err) {\r\n            console.error('Error creating collection:', err);\r\n            setError(err.message);\r\n            setLoading(false);\r\n            throw err;\r\n        }\r\n    };\r\n\r\n    const updateCollection = async (collectionId, updates) => {\r\n        try {\r\n            setLoading(true);\r\n            setError(null);\r\n\r\n            const updateData = {\r\n                ...updates,\r\n                updatedAt: serverTimestamp()\r\n            };\r\n\r\n            await updateDoc(doc(db, 'collections', collectionId), updateData);\r\n\r\n            setLoading(false);\r\n            return true;\r\n        } catch (err) {\r\n            console.error('Error updating collection:', err);\r\n            setError(err.message);\r\n            setLoading(false);\r\n            throw err;\r\n        }\r\n    };\r\n\r\n    const deleteCollection = async (collectionId) => {\r\n        try {\r\n            setLoading(true);\r\n            setError(null);\r\n\r\n            await deleteDoc(doc(db, 'collections', collectionId));\r\n\r\n            setLoading(false);\r\n            return true;\r\n        } catch (err) {\r\n            console.error('Error deleting collection:', err);\r\n            setError(err.message);\r\n            setLoading(false);\r\n            throw err;\r\n        }\r\n    };\r\n\r\n    const addPostToCollection = async (collectionId, postId) => {\r\n        try {\r\n            const collectionRef = doc(db, 'collections', collectionId);\r\n\r\n            await updateDoc(collectionRef, {\r\n                postRefs: arrayUnion(postId),\r\n                updatedAt: serverTimestamp()\r\n            });\r\n\r\n            return true;\r\n        } catch (err) {\r\n            console.error('Error adding post to collection:', err);\r\n            throw err;\r\n        }\r\n    };\r\n\r\n    const removePostFromCollection = async (collectionId, postId) => {\r\n        try {\r\n            const collectionRef = doc(db, 'collections', collectionId);\r\n\r\n            await updateDoc(collectionRef, {\r\n                postRefs: arrayRemove(postId),\r\n                updatedAt: serverTimestamp()\r\n            });\r\n\r\n            return true;\r\n        } catch (err) {\r\n            console.error('Error removing post from collection:', err);\r\n            throw err;\r\n        }\r\n    };\r\n\r\n    const removeItemFromCollection = async (collectionId, itemIndex) => {\r\n        try {\r\n            const collectionRef = doc(db, 'collections', collectionId);\r\n            const collectionDoc = await getDoc(collectionRef);\r\n\r\n            if (!collectionDoc.exists()) {\r\n                throw new Error('Collection not found');\r\n            }\r\n\r\n            const currentItems = collectionDoc.data().items || [];\r\n            const updatedItems = currentItems.filter((_, index) => index !== itemIndex);\r\n\r\n            await updateDoc(collectionRef, {\r\n                items: updatedItems,\r\n                updatedAt: serverTimestamp()\r\n            });\r\n\r\n            return true;\r\n        } catch (err) {\r\n            console.error('Error removing item from collection:', err);\r\n            throw err;\r\n        }\r\n    };\r\n\r\n    return {\r\n        createCollection,\r\n        updateCollection,\r\n        deleteCollection,\r\n        addPostToCollection,\r\n        removePostFromCollection,\r\n        removeItemFromCollection,\r\n        loading,\r\n        error\r\n    };\r\n};\r\n\r\n/**\r\n * Hook to fetch a single collection by ID\r\n */\r\nexport const useCollection = (collectionId) => {\r\n    const [collection, setCollection] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n\r\n    const refetch = async () => {\r\n        if (!collectionId) {\r\n            setLoading(false);\r\n            return;\r\n        }\r\n\r\n        try {\r\n            setLoading(true);\r\n            const collectionDoc = await getDoc(doc(db, 'collections', collectionId));\r\n\r\n            if (collectionDoc.exists()) {\r\n                setCollection({ id: collectionDoc.id, ...collectionDoc.data() });\r\n            } else {\r\n                setError('Collection not found');\r\n            }\r\n        } catch (err) {\r\n            console.error('Error fetching collection:', err);\r\n            setError(err.message);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        refetch();\r\n    }, [collectionId]);\r\n\r\n    return { collection, loading, error, refetch };\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\hooks\\useContest.js","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'refetch'. Either include it or remove the dependency array.","line":42,"column":8,"nodeType":"ArrayExpression","endLine":42,"endColumn":19,"suggestions":[{"desc":"Update the dependencies array to be: [contestId, refetch]","fix":{"range":[1305,1316],"text":"[contestId, refetch]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\r\nimport { getContest, getContestLeaderboard } from '@/services/contestService';\r\n\r\n/**\r\n * Hook to fetch a contest and its leaderboard\r\n * @param {string} contestId - Contest ID to fetch\r\n * @returns {object} { contest, leaderboard, loading, error, refetch }\r\n */\r\nexport const useContest = (contestId) => {\r\n    const [contest, setContest] = useState(null);\r\n    const [leaderboard, setLeaderboard] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n\r\n    const refetch = async () => {\r\n        if (!contestId) {\r\n            setLoading(false);\r\n            return;\r\n        }\r\n\r\n        try {\r\n            setLoading(true);\r\n            setError(null);\r\n\r\n            const [contestData, leaderboardData] = await Promise.all([\r\n                getContest(contestId),\r\n                getContestLeaderboard(contestId)\r\n            ]);\r\n\r\n            setContest(contestData);\r\n            setLeaderboard(leaderboardData);\r\n        } catch (err) {\r\n            console.error('Error fetching contest:', err);\r\n            setError(err.message || 'Failed to load contest');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        refetch();\r\n    }, [contestId]);\r\n\r\n    return { contest, leaderboard, loading, error, refetch };\r\n};\r\n\r\nexport default useContest;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\hooks\\useContestEntry.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\hooks\\useCountdown.js","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'calculateTimeLeft'. Either include it or remove the dependency array.","line":82,"column":8,"nodeType":"ArrayExpression","endLine":82,"endColumn":20,"suggestions":[{"desc":"Update the dependencies array to be: [calculateTimeLeft, targetDate]","fix":{"range":[2465,2477],"text":"[calculateTimeLeft, targetDate]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\r\n\r\nexport const useCountdown = (targetDate) => {\r\n    const calculateTimeLeft = () => {\r\n        if (!targetDate) {\r\n            return {\r\n                days: 0,\r\n                hours: 0,\r\n                minutes: 0,\r\n                seconds: 0,\r\n                isExpired: false, // Default to false if no date provided? Or true? \r\n                // If no date, there is no countdown, so maybe isExpired=false (not expired, just non-existent)\r\n                // But let's stick to safe defaults.\r\n                total: 0\r\n            };\r\n        }\r\n\r\n        const now = new Date();\r\n        let target;\r\n\r\n        // Handle Firestore Timestamp\r\n        if (targetDate && typeof targetDate.toDate === 'function') {\r\n            target = targetDate.toDate();\r\n        } else {\r\n            target = new Date(targetDate);\r\n        }\r\n\r\n        // Check for invalid date\r\n        if (isNaN(target.getTime())) {\r\n            return {\r\n                days: 0,\r\n                hours: 0,\r\n                minutes: 0,\r\n                seconds: 0,\r\n                isExpired: false,\r\n                total: 0\r\n            };\r\n        }\r\n\r\n        const diff = target - now;\r\n\r\n        if (diff <= 0) {\r\n            return {\r\n                days: 0,\r\n                hours: 0,\r\n                minutes: 0,\r\n                seconds: 0,\r\n                isExpired: true,\r\n                total: 0\r\n            };\r\n        }\r\n\r\n        return {\r\n            days: Math.floor(diff / (1000 * 60 * 60 * 24)),\r\n            hours: Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)),\r\n            minutes: Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60)),\r\n            seconds: Math.floor((diff % (1000 * 60)) / 1000),\r\n            isExpired: false,\r\n            total: diff\r\n        };\r\n    };\r\n\r\n    const [timeLeft, setTimeLeft] = useState(calculateTimeLeft());\r\n\r\n    useEffect(() => {\r\n        // Initial calculation\r\n        const initial = calculateTimeLeft();\r\n        setTimeLeft(initial);\r\n\r\n        // If already expired or invalid, don't start interval\r\n        if (initial.isExpired || !targetDate) return;\r\n\r\n        const timer = setInterval(() => {\r\n            const current = calculateTimeLeft();\r\n            setTimeLeft(current);\r\n            if (current.isExpired) {\r\n                clearInterval(timer);\r\n            }\r\n        }, 1000);\r\n\r\n        return () => clearInterval(timer);\r\n    }, [targetDate]); // Re-run if targetDate changes\r\n\r\n    return timeLeft;\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\hooks\\useCreatePost.js","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'calculateEarnings' is defined but never used. Allowed unused vars must match /^_/u.","line":8,"column":44,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":61},{"ruleId":"no-dupe-keys","severity":2,"message":"Duplicate key 'status'.","line":471,"column":17,"nodeType":"ObjectExpression","messageId":"unexpected","endLine":471,"endColumn":23}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/hooks/useCreatePost.js\r\nimport { useState, useRef } from 'react';\r\nimport { db, storage } from '@/firebase';\r\nimport { collection, addDoc, serverTimestamp, doc, getDoc, updateDoc, setDoc, deleteDoc, arrayUnion } from 'firebase/firestore';\r\nimport { ref, uploadBytesResumable, getDownloadURL } from 'firebase/storage';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { PRINT_PRODUCTS, STICKER_PRODUCTS, calculateEarnings, calculateTieredPricing, calculateStickerPricing, getValidSizesForImage } from '@/domain/shop/pricing';\r\nimport { extractExifData } from '@/core/utils/exif';\r\nimport { formatPrice } from '@/core/utils/helpers';\r\nimport { AccountTypeService } from '@/core/services/firestore/users.service';\r\nimport { generateSearchKeywords } from '@/core/utils/searchKeywords';\r\nimport { extractDominantColor } from '@/core/utils/colors';\r\nimport { generateAllThumbnails } from '@/core/utils/thumbnailGenerator';\r\nimport { sanitizeTitle, sanitizeDescription, sanitizeTag } from '@/core/utils/sanitize';\r\n\r\n// ---------------------------------------------------------------------------\r\n// Hook: useCreatePost\r\n// ---------------------------------------------------------------------------\r\nexport const useCreatePost = () => {\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState(null);\r\n\r\n    // ≡ƒöÉ SECURITY: Rate limiting - prevent spam posting\r\n    const lastPostTime = useRef(0);\r\n    const MIN_POST_INTERVAL = 30000; // 30 seconds between posts\r\n    const [progress, setProgress] = useState(0);\r\n    const { currentUser } = useAuth();\r\n    const navigate = useNavigate();\r\n\r\n    // Helper: Upload with Retry\r\n    const uploadWithRetry = async (storageRef, file, metadata = {}, retries = 3) => {\r\n        for (let i = 0; i < retries; i++) {\r\n            try {\r\n                const uploadTask = uploadBytesResumable(storageRef, file, metadata);\r\n\r\n                // Add timeout protection (60 seconds per upload)\r\n                const uploadPromise = new Promise((resolve, reject) => {\r\n                    uploadTask.on('state_changed', null, reject, resolve);\r\n                });\r\n\r\n                const timeoutPromise = new Promise((_, reject) =>\r\n                    setTimeout(() => reject(new Error('Upload timeout - please check your connection')), 60000)\r\n                );\r\n\r\n                await Promise.race([uploadPromise, timeoutPromise]);\r\n                return await getDownloadURL(storageRef);\r\n            } catch (err) {\r\n                console.warn(`Upload attempt ${i + 1} failed:`, err);\r\n                if (i === retries - 1) throw err;\r\n                await new Promise(r => setTimeout(r, 1000 * Math.pow(2, i))); // Exponential backoff\r\n            }\r\n        }\r\n    };\r\n\r\n    // -----------------------------------------------------------------------\r\n    // createPost ΓÇô full implementation\r\n    // status: 'published' (default) | 'draft'\r\n    // -----------------------------------------------------------------------\r\n    const createPost = async (postData, slides, status = 'published') => {\r\n        // Create Post Started\r\n        // Slides count, Post data...\r\n\r\n        setLoading(true);\r\n        setError(null);\r\n        setProgress(0);\r\n        // Loading state set\r\n\r\n        try {\r\n            if (!currentUser) {\r\n                console.error('Γ¥î No current user!');\r\n                throw new Error('Must be logged in');\r\n            }\r\n            // User authenticated\r\n\r\n            // ≡ƒöÉ SECURITY: Enforce rate limiting\r\n            const now = Date.now();\r\n            if (now - lastPostTime.current < MIN_POST_INTERVAL) {\r\n                const waitTime = Math.ceil((MIN_POST_INTERVAL - (now - lastPostTime.current)) / 1000);\r\n                throw new Error(`Please wait ${waitTime} seconds before posting again`);\r\n            }\r\n            lastPostTime.current = now;\r\n\r\n            // ---------------------------------------------------------------\r\n            // 0∩╕ÅΓâú Author information (fallbacks) - ALWAYS fetch from Firestore first\r\n            // ---------------------------------------------------------------\r\n            let authorName = null;\r\n\r\n            // Try Firestore first (most reliable source)\r\n            try {\r\n                const userDoc = await getDoc(doc(db, 'users', currentUser.uid));\r\n                if (userDoc.exists()) {\r\n                    const data = userDoc.data();\r\n                    authorName = data.username || data.displayName;\r\n                }\r\n            } catch (e) {\r\n                console.warn('Could not fetch user profile for name', e);\r\n            }\r\n\r\n            // Fallback to Firebase Auth if Firestore failed\r\n            if (!authorName) {\r\n                authorName = currentUser.displayName;\r\n            }\r\n\r\n            // Final fallback\r\n            if (!authorName) {\r\n                authorName = currentUser.email?.split('@')[0] || 'Unknown Author';\r\n            }\r\n\r\n            const username = authorName;\r\n            const avatar = currentUser.photoURL || '';\r\n\r\n            // Check if user is Ultra\r\n            let isUltra = false;\r\n            try {\r\n                const userDoc = await getDoc(doc(db, 'users', currentUser.uid));\r\n                if (userDoc.exists()) {\r\n                    isUltra = userDoc.data().isUltra || false;\r\n                }\r\n            } catch (e) {\r\n                console.warn('Could not fetch user profile for Ultra check', e);\r\n            }\r\n\r\n            // Get user's account type for feed filtering\r\n            let authorAccountType = 'art'; // Default\r\n            try {\r\n                authorAccountType = await AccountTypeService.getAccountType(currentUser.uid);\r\n            } catch (e) {\r\n                console.warn('Could not fetch account type, using default', e);\r\n            }\r\n\r\n            // ---------------------------------------------------------------\r\n            // 1∩╕ÅΓâú Upload images & collect metadata (Sequential Processing)\r\n            // ---------------------------------------------------------------\r\n            const totalSlides = slides.length;\r\n            const processedItems = [];\r\n\r\n            // Process slides sequentially to prevent memory/network overload\r\n            for (let i = 0; i < totalSlides; i++) {\r\n                const slide = slides[i];\r\n                // Processing slide...\r\n\r\n                // Update progress at start of each slide\r\n                const baseProgress = (i / totalSlides) * 100;\r\n                setProgress(Math.round(baseProgress));\r\n\r\n                if (slide.type === 'image' || slide.type === 'stack') {\r\n                    try {\r\n                        let stackImageUrls = [];\r\n\r\n                        // 0. If STACK, upload individual component images first\r\n                        if (slide.type === 'stack' && slide.items && slide.items.length > 0) {\r\n                            setProgress(Math.round(baseProgress + (1 / totalSlides) * 10));\r\n\r\n                            // Upload each stack item\r\n                            // We just need the raw URL, no thumbnails for sub-items needed usually (too heavy)\r\n                            // Actually, let's just upload them as standard \"L2\" files.\r\n                            for (let j = 0; j < slide.items.length; j++) {\r\n                                const itemFile = slide.items[j];\r\n                                const itemRef = ref(storage, `posts/${currentUser.uid}/stack_${Date.now()}_${j}_${itemFile.name.replace(/[^a-zA-Z0-9.]/g, '_')}`);\r\n                                const itemUrl = await uploadWithRetry(itemRef, itemFile);\r\n                                stackImageUrls.push(itemUrl);\r\n                            }\r\n                        }\r\n\r\n                        // Generating thumbnails...\r\n                        setProgress(Math.round(baseProgress + (1 / totalSlides) * 10)); // +10% for thumbnail gen\r\n\r\n                        // 1. Generate Thumbnails Client-Side (For the main file - collage or single)\r\n                        let l0, l1, l2;\r\n                        try {\r\n                            const thumbs = await generateAllThumbnails(slide.file);\r\n                            l0 = thumbs.l0;\r\n                            l1 = thumbs.l1;\r\n                            l2 = thumbs.l2;\r\n                            // Thumbnails generated\r\n                        } catch (genError) {\r\n                            console.warn(`  ΓÜá∩╕Å Thumbnail generation failed for slide ${i + 1}, using original:`, genError);\r\n                            l0 = slide.file;\r\n                            l1 = slide.file;\r\n                            l2 = slide.file;\r\n                        }\r\n\r\n                        // 2. Define Paths\r\n                        const timestamp = Date.now();\r\n                        const baseFilename = `${timestamp}_${i}_${slide.file.name.replace(/[^a-zA-Z0-9.]/g, '_')}`;\r\n\r\n                        const l2Ref = ref(storage, `posts/${currentUser.uid}/${baseFilename}`);\r\n                        const l1Ref = ref(storage, `posts/${currentUser.uid}/thumbnails/${baseFilename}_l1.jpg`);\r\n                        const l0Ref = ref(storage, `posts/${currentUser.uid}/thumbnails/${baseFilename}_l0.jpg`);\r\n\r\n                        // 3. Upload All Versions with fallback\r\n                        // Uploading original...\r\n                        setProgress(Math.round(baseProgress + (1 / totalSlides) * 20)); // +20% for upload start\r\n\r\n                        // We upload L2 (Original) first to ensure we have the main asset\r\n                        const urlL2 = await uploadWithRetry(l2Ref, l2);\r\n                        // Original uploaded\r\n                        setProgress(Math.round(baseProgress + (1 / totalSlides) * 50)); // +50% after main upload\r\n\r\n                        // Upload thumbnails with fallback to original if generation failed\r\n                        let urlL1 = urlL2; // Fallback\r\n                        let urlL0 = urlL2; // Fallback\r\n\r\n                        try {\r\n                            // Uploading thumbnails...\r\n                            [urlL1, urlL0] = await Promise.all([\r\n                                uploadWithRetry(l1Ref, l1),\r\n                                uploadWithRetry(l0Ref, l0)\r\n                            ]);\r\n                            // Thumbnails uploaded\r\n                            setProgress(Math.round(baseProgress + (1 / totalSlides) * 70)); // +70% after thumbnails\r\n                        } catch (thumbError) {\r\n                            console.warn('Thumbnail upload failed, using original:', thumbError);\r\n                            // Fallback already set above\r\n                        }\r\n\r\n                        // 4. Get Dimensions\r\n                        // Getting dimensions...\r\n                        let width = null;\r\n                        let height = null;\r\n                        try {\r\n                            const img = new Image();\r\n                            img.src = urlL2;\r\n                            await new Promise((resolve, reject) => {\r\n                                img.onload = resolve;\r\n                                img.onerror = reject;\r\n                            });\r\n                            width = img.naturalWidth;\r\n                            height = img.naturalHeight;\r\n                            // Dimensions retrieved\r\n                        } catch (e) {\r\n                            console.warn('Failed to get image dimensions', e);\r\n                        }\r\n\r\n                        // 5. EXIF - Enhanced with retry\r\n                        // Extracting EXIF...\r\n                        let extractedExif = null;\r\n\r\n                        // Only attempt EXIF extraction for JPEG/TIFF\r\n                        const isExifSupported = slide.file.type === 'image/jpeg' ||\r\n                            slide.file.type === 'image/jpg' ||\r\n                            slide.file.type === 'image/tiff';\r\n\r\n                        if (!isExifSupported || slide.type === 'stack') {\r\n                            // Skipping EXIF for stacks or unsupported\r\n                        } else {\r\n                            try {\r\n                                // ONE SHOT ONLY - 300ms timeout\r\n                                // If it takes longer than 300ms, it likely doesn't have EXIF or is too big to parse quickly.\r\n                                const exifPromise = extractExifData(slide.file);\r\n                                const timeoutPromise = new Promise((_, reject) =>\r\n                                    setTimeout(() => reject(new Error('EXIF timeout')), 300)\r\n                                );\r\n\r\n                                extractedExif = await Promise.race([exifPromise, timeoutPromise]);\r\n                            } catch (e) {\r\n                                // Silently fail or log debug only - don't stop, don't retry\r\n                                // No EXIF found\r\n                            }\r\n                        }\r\n\r\n                        const finalExif = slide.manualExif || extractedExif;\r\n                        // EXIF done\r\n\r\n                        // 6. Print Sizes\r\n                        const validSizes = getValidSizesForImage(width, height);\r\n                        const imgRatio = width && height ? width / height : 1.5;\r\n                        const bestFitSizes = validSizes.filter(s => {\r\n                            const sizeRatio = s.ratio;\r\n                            const matchLandscape = Math.abs(sizeRatio - imgRatio) < 0.08;\r\n                            const matchPortrait = Math.abs((1 / sizeRatio) - imgRatio) < 0.08;\r\n                            return matchLandscape || matchPortrait;\r\n                        });\r\n                        const printSizeIds = bestFitSizes.map((s) => s.id);\r\n\r\n                        // 7. Dominant Color\r\n                        // Extracting dominant color...\r\n                        let dominantColor = null;\r\n                        try {\r\n                            // Add timeout for color extraction (3 seconds)\r\n                            const colorPromise = extractDominantColor(urlL1 || urlL2);\r\n                            const colorTimeout = new Promise((_, reject) =>\r\n                                setTimeout(() => reject(new Error('Color extraction timeout')), 3000)\r\n                            );\r\n                            const colorData = await Promise.race([colorPromise, colorTimeout]);\r\n                            dominantColor = colorData.hex;\r\n                            // Color extracted\r\n                        } catch (e) {\r\n                            console.warn('Failed to extract dominant color', e);\r\n                        }\r\n\r\n                        processedItems.push({\r\n                            type: slide.type, // 'image' or 'stack'\r\n                            url: urlL2,\r\n                            thumbnailUrl: urlL1 || urlL2, // Use L1 as thumbnail\r\n                            tinyUrl: urlL0 || urlL1 || urlL2, // Use L0 as tiny placeholder\r\n                            caption: slide.caption || '',\r\n                            exif: finalExif ? JSON.parse(JSON.stringify(finalExif)) : null,\r\n                            addToShop: slide.addToShop || false,\r\n                            productTier: slide.productTier || 'economy',\r\n                            includeStickers: slide.includeStickers || false,\r\n                            printSizes: printSizeIds,\r\n                            customPrices: {},\r\n                            width,\r\n                            height,\r\n                            aspectRatio: imgRatio,\r\n                            allowCropped: slide.allowCropped || false,\r\n                            dominantColor,\r\n                            isLimitedEdition: slide.isLimitedEdition || false,\r\n                            editionSize: slide.editionSize || 10,\r\n                            price: slide.price || 0,\r\n\r\n                            // Stack Metadata\r\n                            isStack: slide.type === 'stack',\r\n                            stackLayout: slide.type === 'stack' ? slide.layout : null,\r\n                            stackImages: slide.type === 'stack' ? stackImageUrls : null\r\n                        });\r\n\r\n                    } catch (uploadError) {\r\n                        console.error(`Failed to process slide ${i}:`, uploadError);\r\n                        // Provide detailed error message\r\n                        const errorMsg = uploadError.message || 'Unknown error';\r\n                        const isNetworkError = errorMsg.includes('network') || errorMsg.includes('fetch');\r\n                        const isStorageError = errorMsg.includes('storage') || errorMsg.includes('quota');\r\n\r\n                        let userMessage = `Failed to upload image ${i + 1}.`;\r\n                        if (isNetworkError) {\r\n                            userMessage += ' Network error detected. Please check your connection and try again.';\r\n                        } else if (isStorageError) {\r\n                            userMessage += ' Storage error. You may have reached your storage limit.';\r\n                        } else {\r\n                            userMessage += ` Error: ${errorMsg}`;\r\n                        }\r\n\r\n                        throw new Error(userMessage);\r\n                    }\r\n                } else {\r\n                    // Text slide\r\n                    processedItems.push({\r\n                        type: 'text',\r\n                        content: slide.content,\r\n                        caption: slide.caption || '',\r\n                    });\r\n                }\r\n\r\n                // Update progress\r\n                setProgress(Math.round(((i + 1) / totalSlides) * 100));\r\n            }\r\n\r\n            // ---------------------------------------------------------------\r\n            // 2∩╕ÅΓâú Build search keywords (title, tags, username)\r\n            // ---------------------------------------------------------------\r\n            // Sanitize tags\r\n            const sanitizedTags = (postData.tags || [])\r\n                .map(t => sanitizeTag(t))\r\n                .filter(t => t.length > 0);\r\n\r\n            const uniqueTags = [...new Set(sanitizedTags)];\r\n\r\n            const searchKeywords = [\r\n                ...generateSearchKeywords(postData.title || ''),\r\n                ...uniqueTags,\r\n                ...generateSearchKeywords(username),\r\n            ].filter((k) => k.length > 0);\r\n\r\n            // ---------------------------------------------------------------\r\n            // 3∩╕ÅΓâú Create main post document\r\n            // ---------------------------------------------------------------\r\n            const imageUrls = processedItems\r\n                .filter((i) => i.type === 'image' || i.type === 'stack')\r\n                .map((i) => i.url);\r\n\r\n            const thumbnailUrls = processedItems\r\n                .filter((i) => i.type === 'image' || i.type === 'stack')\r\n                .map((i) => i.thumbnailUrl);\r\n\r\n            const locationName = postData.location ?\r\n                [postData.location.city, postData.location.state, postData.location.country]\r\n                    .filter(Boolean)\r\n                    .join(', ') : '';\r\n\r\n            const postDoc = {\r\n                uid: currentUser.uid,\r\n                username,\r\n                userAvatar: avatar,\r\n                createdAt: serverTimestamp(),\r\n                updatedAt: serverTimestamp(),\r\n                caption: postData.title || '',\r\n                imageUrls,\r\n                thumbnailUrls,\r\n                tags: uniqueTags,\r\n                locationName,\r\n                lat: postData.location?.lat || null,\r\n                lng: postData.location?.lng || null,\r\n                likesCount: 0,\r\n                commentsCount: 0,\r\n                artType: postData.artType || 'photography',\r\n                category: postData.category || 'general',\r\n                contestTag: postData.contestTag || '',\r\n                safe: true,\r\n                shopEnabled: processedItems.some((i) => i.addToShop === true),\r\n                shopProducts: processedItems.some((i) => i.addToShop === true) ?\r\n                    processedItems.filter((i) => i.addToShop).map((i) => ({\r\n                        url: i.url,\r\n                        tier: i.productTier,\r\n                        sizes: i.printSizes\r\n                    })) : [],\r\n                hasSlides: processedItems.length > 1,\r\n                hasItems: processedItems.length > 0,\r\n                hasImages: imageUrls.length > 0,\r\n                dominantColor: processedItems.find(i => i.dominantColor)?.dominantColor || null,\r\n                authorAccountType,\r\n                collectionId: postData.collectionId || null,\r\n                collectionPostToFeed: postData.collectionPostToFeed ?? null,\r\n                showInProfile: postData.showInProfile !== undefined ? postData.showInProfile : true,\r\n                userId: currentUser.uid,\r\n                authorId: currentUser.uid,\r\n                profileImage: avatar,\r\n                title: sanitizeTitle(postData.title || ''),\r\n                description: sanitizeDescription(postData.description || ''),\r\n                colorTags: postData.colorTags || [],\r\n                moodTags: postData.moodTags || [],\r\n                seasonalTags: postData.seasonalTags || [],\r\n                timeOfDayTags: postData.timeOfDayTags || [],\r\n                filmMetadata: postData.filmMetadata || null,\r\n                enableRatings: postData.enableRatings || false,\r\n                uiOverlays: postData.uiOverlays ? JSON.parse(JSON.stringify(postData.uiOverlays)) : null,\r\n                filmInfo: postData.filmMetadata?.isFilm ? {\r\n                    filmStock: postData.filmMetadata.stock || '',\r\n                    camera: postData.filmMetadata.cameraOverride || '',\r\n                    lens: postData.filmMetadata.lensOverride || '',\r\n                    iso: postData.filmMetadata.iso || '',\r\n                    format: postData.filmMetadata.format || '',\r\n                    scanner: postData.filmMetadata.scanner || '',\r\n                    notes: postData.filmMetadata.lab || ''\r\n                } : null,\r\n                postType: postData.postType || 'standard',\r\n                flipbookSettings: postData.flipbookSettings || null,\r\n                layoutSettings: postData.layoutSettings || null,\r\n                panoStackSettings: postData.panoStackSettings || null,\r\n                location: postData.location || null,\r\n                images: processedItems\r\n                    .filter((i) => i.type === 'image' || i.type === 'stack')\r\n                    .map((i) => ({\r\n                        url: i.url,\r\n                        thumbnailUrl: i.thumbnailUrl,\r\n                        tinyUrl: i.tinyUrl,\r\n                        caption: i.caption || '',\r\n                        addToShop: i.addToShop || false,\r\n                        productTier: i.productTier || 'economy',\r\n                        includeStickers: i.includeStickers || false,\r\n                        printSizes: i.printSizes || [],\r\n                        customPrices: i.customPrices || {},\r\n                        exif: i.exif || null,\r\n                        width: i.width || null,\r\n                        height: i.height || null,\r\n                        aspectRatio: i.aspectRatio || null,\r\n                        allowCropped: i.allowCropped || false,\r\n                        // Stack Metadata\r\n                        isStack: i.isStack || false,\r\n                        stackLayout: i.stackLayout || null,\r\n                        stackImages: i.stackImages || null\r\n                    })),\r\n                searchKeywords,\r\n                likeCount: 0,\r\n                commentCount: 0,\r\n                addToShop: processedItems.some((i) => i.addToShop === true),\r\n                moderationStatus: 'active',\r\n                status: status,\r\n                status: status,\r\n                type: postData.type || 'art', // Unified type field\r\n                atmosphereBackground: postData.atmosphereBackground || 'black',\r\n                gradientColor: postData.gradientColor || null,\r\n            };\r\n\r\n            const docRef = await addDoc(collection(db, 'posts'), postDoc);\r\n\r\n            // ---------------------------------------------------------------\r\n            // ≡ƒÜ¿ FAIL-SAFE: Verify images exist in storage immediately\r\n            // ---------------------------------------------------------------\r\n            try {\r\n                const verificationPromises = imageUrls.map(async (url) => {\r\n                    try {\r\n                        const urlObj = new URL(url);\r\n                        const pathMatch = urlObj.pathname.match(/\\/o\\/(.+)/);\r\n                        if (!pathMatch) throw new Error('Invalid URL format');\r\n                        const storagePath = decodeURIComponent(pathMatch[1]);\r\n                        const storageRef = ref(storage, storagePath);\r\n                        await getDownloadURL(storageRef);\r\n                    } catch (e) {\r\n                        throw new Error(`Image verification failed for ${url}: ${e.message}`);\r\n                    }\r\n                });\r\n                await Promise.all(verificationPromises);\r\n            } catch (verificationError) {\r\n                console.error('Γ¥î Post verification failed! Rolling back...', verificationError);\r\n                await deleteDoc(doc(db, 'posts', docRef.id));\r\n                throw new Error('Post creation failed: Image verification failed. Please try again.');\r\n            }\r\n\r\n            // ---------------------------------------------------------------\r\n            // 4∩╕ÅΓâú Create shop items for images flagged for sale\r\n            // ---------------------------------------------------------------\r\n            const shopPromises = processedItems\r\n                .filter((i) => i.type === 'image' && i.addToShop)\r\n                .map(async (item) => {\r\n                    // Using static imports instead of broken dynamic import\r\n                    // const { calculateTieredPricing, calculateStickerPricing, PRINT_SIZES, STICKER_SIZES } = await import('../utils/printifyPricing');\r\n\r\n                    let printSizesConfig = PRINT_PRODUCTS.filter((size) =>\r\n                        item.printSizes.includes(size.id)\r\n                    ).map((size) => {\r\n                        const pricing = calculateTieredPricing(size.id, item.productTier, isUltra);\r\n                        if (!pricing) return null;\r\n                        return {\r\n                            id: size.id,\r\n                            label: size.label,\r\n                            price: Number(formatPrice(pricing.finalPrice)),\r\n                            artistEarningsCents: Math.round(pricing.artistProfit * 100),\r\n                            platformFeeCents: Math.round(pricing.platformProfit * 100),\r\n                        };\r\n                    }).filter(Boolean);\r\n\r\n                    if (item.includeStickers) {\r\n                        STICKER_PRODUCTS.forEach(sticker => {\r\n                            const pricing = calculateStickerPricing(sticker.id);\r\n                            if (pricing) {\r\n                                printSizesConfig.push({\r\n                                    id: sticker.id,\r\n                                    label: sticker.label,\r\n                                    price: Number(formatPrice(pricing.finalPrice)),\r\n                                    artistEarningsCents: Math.round(pricing.artistProfit * 100),\r\n                                    platformFeeCents: Math.round(pricing.platformProfit * 100),\r\n                                    isSticker: true\r\n                                });\r\n                            }\r\n                        });\r\n                    }\r\n\r\n                    const shopItemDoc = {\r\n                        userId: currentUser.uid,\r\n                        authorId: currentUser.uid,\r\n                        authorName,\r\n                        postRef: docRef,\r\n                        portfolioPostId: docRef.id,\r\n                        title: postData.title || 'Untitled',\r\n                        imageUrl: item.url,\r\n                        thumbnailUrl: item.thumbnailUrl,\r\n                        printSizes: printSizesConfig,\r\n                        productTier: item.productTier || 'economy',\r\n                        includeStickers: item.includeStickers || false,\r\n                        width: item.width,\r\n                        height: item.height,\r\n                        aspectRatio: item.aspectRatio,\r\n                        exif: item.exif,\r\n                        available: false,\r\n                        status: 'draft',\r\n                        createdAt: serverTimestamp(),\r\n                        tags: uniqueTags,\r\n                        searchKeywords,\r\n                        isLimitedEdition: item.isLimitedEdition || false,\r\n                        editionSize: item.isLimitedEdition ? (item.editionSize || 10) : null,\r\n                        price: item.price || 0,\r\n                        soldCount: 0,\r\n                        isSoldOut: false,\r\n                        resaleAllowed: item.isLimitedEdition || false,\r\n                    };\r\n\r\n                    await addDoc(collection(db, 'shopItems'), shopItemDoc);\r\n                });\r\n\r\n            await Promise.all(shopPromises);\r\n\r\n            // ---------------------------------------------------------------\r\n            // 5∩╕ÅΓâú Increment user post count\r\n            // ---------------------------------------------------------------\r\n            const userRef = doc(db, 'users', currentUser.uid);\r\n            const userSnap = await getDoc(userRef);\r\n\r\n            if (!userSnap.exists()) {\r\n                await setDoc(userRef, {\r\n                    uid: currentUser.uid,\r\n                    email: currentUser.email,\r\n                    displayName: currentUser.displayName || 'Unknown Author',\r\n                    photoURL: currentUser.photoURL || '',\r\n                    createdAt: serverTimestamp(),\r\n                    postCount: 1,\r\n                    followerCount: 0,\r\n                    followingCount: 0,\r\n                    bio: ''\r\n                });\r\n            } else {\r\n                const currentCount = (userSnap.data()?.postCount || 0) + 1;\r\n                await updateDoc(userRef, { postCount: currentCount });\r\n            }\r\n\r\n            // ---------------------------------------------------------------\r\n            // 6∩╕ÅΓâú Add to Collection (if selected)\r\n            // ---------------------------------------------------------------\r\n            if (postData.collectionId) {\r\n                try {\r\n                    const collectionRef = doc(db, 'collections', postData.collectionId);\r\n                    await updateDoc(collectionRef, {\r\n                        postRefs: arrayUnion(docRef.id),\r\n                        updatedAt: serverTimestamp()\r\n                    });\r\n                } catch (collectionError) {\r\n                    console.error('Failed to add post to collection:', collectionError);\r\n                }\r\n            }\r\n\r\n            // ---------------------------------------------------------------\r\n            // 7∩╕ÅΓâú Navigate to home feed\r\n            // ---------------------------------------------------------------\r\n            navigate('/');\r\n            return {\r\n                postId: docRef.id,\r\n                imageUrls,\r\n                thumbnailUrls\r\n            };\r\n        } catch (err) {\r\n            console.error('Create post failed:', err);\r\n            setError(err.message);\r\n            throw err;\r\n        } finally {\r\n            setLoading(false);\r\n            setProgress(0);\r\n        }\r\n    };\r\n\r\n    return { createPost, loading, error, progress };\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\hooks\\useCustomFeeds.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\hooks\\useDraftSaving.js","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadDraft'. Either include it or remove the dependency array.","line":15,"column":8,"nodeType":"ArrayExpression","endLine":15,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [loadDraft]","fix":{"range":[451,453],"text":"[loadDraft]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'clearDraft'. Either include it or remove the dependency array.","line":51,"column":8,"nodeType":"ArrayExpression","endLine":51,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [clearDraft]","fix":{"range":[1538,1540],"text":"[clearDraft]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/hooks/useDraftSaving.js\r\nimport { useState, useEffect, useCallback } from 'react';\r\nimport { logger } from '@/core/utils/logger';\r\n\r\nconst DRAFT_KEY = 'panospace_post_draft';\r\nconst DRAFT_EXPIRY_HOURS = 24;\r\n\r\nexport const useDraftSaving = () => {\r\n    const [hasDraft, setHasDraft] = useState(false);\r\n\r\n    // Check for existing draft on mount\r\n    useEffect(() => {\r\n        const draft = loadDraft();\r\n        setHasDraft(!!draft);\r\n    }, []);\r\n\r\n    // Save draft to localStorage\r\n    const saveDraft = useCallback((draftData) => {\r\n        try {\r\n            const draft = {\r\n                data: draftData,\r\n                timestamp: Date.now(),\r\n                expiresAt: Date.now() + (DRAFT_EXPIRY_HOURS * 60 * 60 * 1000)\r\n            };\r\n            localStorage.setItem(DRAFT_KEY, JSON.stringify(draft));\r\n            setHasDraft(true);\r\n        } catch (error) {\r\n            logger.warn('Failed to save draft:', error);\r\n        }\r\n    }, []);\r\n\r\n    // Load draft from localStorage\r\n    const loadDraft = useCallback(() => {\r\n        try {\r\n            const stored = localStorage.getItem(DRAFT_KEY);\r\n            if (!stored) return null;\r\n\r\n            const draft = JSON.parse(stored);\r\n\r\n            // Check if expired\r\n            if (Date.now() > draft.expiresAt) {\r\n                clearDraft();\r\n                return null;\r\n            }\r\n\r\n            return draft.data;\r\n        } catch (error) {\r\n            logger.warn('Failed to load draft:', error);\r\n            return null;\r\n        }\r\n    }, []);\r\n\r\n    // Clear draft\r\n    const clearDraft = useCallback(() => {\r\n        try {\r\n            localStorage.removeItem(DRAFT_KEY);\r\n            setHasDraft(false);\r\n        } catch (error) {\r\n            logger.warn('Failed to clear draft:', error);\r\n        }\r\n    }, []);\r\n\r\n    // Auto-save draft (debounced)\r\n    const autoSaveDraft = useCallback((draftData) => {\r\n        // Only save if there's meaningful content\r\n        if (!draftData.title && !draftData.tags?.length && !draftData.slides?.length) {\r\n            return;\r\n        }\r\n\r\n        // Debounce auto-save\r\n        const timeoutId = setTimeout(() => {\r\n            saveDraft(draftData);\r\n        }, 2000); // Save 2 seconds after last change\r\n\r\n        return () => clearTimeout(timeoutId);\r\n    }, [saveDraft]);\r\n\r\n    return {\r\n        saveDraft,\r\n        loadDraft,\r\n        clearDraft,\r\n        autoSaveDraft,\r\n        hasDraft\r\n    };\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\hooks\\useEventSubmissions.js","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'where' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":37,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":42},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchSubmissions'. Either include it or remove the dependency array.","line":84,"column":8,"nodeType":"ArrayExpression","endLine":84,"endColumn":17,"suggestions":[{"desc":"Update the dependencies array to be: [eventId, fetchSubmissions]","fix":{"range":[3018,3027],"text":"[eventId, fetchSubmissions]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\r\nimport { db } from '@/firebase';\r\nimport { collection, addDoc, query, where, getDocs, orderBy, Timestamp } from 'firebase/firestore';\r\nimport { validateSubmission } from '@/core/utils/eventValidation';\r\nimport { getDerivedDate } from '@/core/utils/dates';\r\n\r\nexport const useEventSubmissions = (eventId) => {\r\n    const [submissions, setSubmissions] = useState([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState(null);\r\n\r\n    // Fetch submissions for an event\r\n    const fetchSubmissions = async () => {\r\n        if (!eventId) return;\r\n\r\n        setLoading(true);\r\n        setError(null);\r\n\r\n        try {\r\n            const submissionsRef = collection(db, 'events', eventId, 'submissions');\r\n            const q = query(submissionsRef, orderBy('timestamp', 'desc'));\r\n            const snapshot = await getDocs(q);\r\n\r\n            const subs = snapshot.docs.map(doc => ({\r\n                id: doc.id,\r\n                ...doc.data()\r\n            }));\r\n\r\n            setSubmissions(subs);\r\n        } catch (err) {\r\n            console.error('Error fetching submissions:', err);\r\n            setError(err.message);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    // Submit a post to an event\r\n    const submitPost = async (post, event, user) => {\r\n        if (!post || !event || !user) {\r\n            throw new Error('Missing required data');\r\n        }\r\n\r\n        // Validate submission\r\n        const validation = validateSubmission(post, event);\r\n        if (!validation.valid) {\r\n            throw new Error(`Validation failed: ${validation.errors.join(', ')}`);\r\n        }\r\n\r\n        try {\r\n            const submissionsRef = collection(db, 'events', event.id, 'submissions');\r\n\r\n            const submissionData = {\r\n                postId: post.id,\r\n                userId: user.uid,\r\n                userDisplayName: user.displayName || 'Anonymous',\r\n                userPhotoURL: user.photoURL || null,\r\n                timestamp: Timestamp.now(),\r\n                derivedDate: getDerivedDate(post) || null,\r\n                metadataSnapshot: {\r\n                    exif: post.exif || null,\r\n                    manualExif: post.manualExif || null,\r\n                    filmMetadata: post.filmMetadata || null,\r\n                    location: post.location || null,\r\n                    park: post.parkId ? { parkId: post.parkId, parkName: post.parkName } : null,\r\n                    tags: post.tags || []\r\n                },\r\n                validationStatus: 'approved',\r\n                validationErrors: []\r\n            };\r\n\r\n            const docRef = await addDoc(submissionsRef, submissionData);\r\n            return { id: docRef.id, ...submissionData };\r\n        } catch (err) {\r\n            console.error('Error submitting post:', err);\r\n            throw err;\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (eventId) {\r\n            fetchSubmissions();\r\n        }\r\n    }, [eventId]);\r\n\r\n    return {\r\n        submissions,\r\n        loading,\r\n        error,\r\n        submitPost,\r\n        refetch: fetchSubmissions\r\n    };\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\hooks\\useEventSystem.js","messages":[{"ruleId":"no-constant-condition","severity":2,"message":"Unexpected constant condition.","line":68,"column":16,"nodeType":"Literal","messageId":"unexpected","endLine":68,"endColumn":20}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\r\nimport { useCountdown } from './useCountdown';\r\nimport {\r\n    collection,\r\n    query,\r\n    where,\r\n    getDocs,\r\n    getDoc,\r\n    addDoc,\r\n    doc,\r\n    serverTimestamp,\r\n    orderBy,\r\n    Timestamp,\r\n    limit,\r\n    updateDoc\r\n} from 'firebase/firestore';\r\nimport { db } from '@/firebase';\r\n\r\nexport const useEventSystem = () => {\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState(null);\r\n\r\n    // Check if an exact tag set already exists on any active event\r\n    const checkTagSetAvailability = async (tagArray) => {\r\n        const now = new Date();\r\n\r\n        try {\r\n            // Get all active events\r\n            const q = query(\r\n                collection(db, 'events'),\r\n                where('expiresAt', '>', Timestamp.fromDate(now))\r\n            );\r\n            const snapshot = await getDocs(q);\r\n\r\n            // Normalize the input tag array for comparison\r\n            const normalizedInput = tagArray.map(t => t.toLowerCase().replace(/[^a-z0-9]/g, '')).sort();\r\n\r\n            // Check if any active event has the exact same tag set\r\n            for (const doc of snapshot.docs) {\r\n                const eventTags = doc.data().requiredTags || [];\r\n                const normalizedEventTags = eventTags.map(t => t.toLowerCase().replace(/[^a-z0-9]/g, '')).sort();\r\n\r\n                // Compare arrays\r\n                if (normalizedInput.length === normalizedEventTags.length &&\r\n                    normalizedInput.every((tag, index) => tag === normalizedEventTags[index])) {\r\n                    return false; // Exact match found, not available\r\n                }\r\n            }\r\n\r\n            return true; // No exact match, available\r\n        } catch (err) {\r\n            console.error(\"Error checking tag set availability:\", err);\r\n            return false; // Assume not available on error to be safe\r\n        }\r\n    };\r\n\r\n    // Generate a unique tag set by appending numbers if needed\r\n    const generateUniqueTagSet = async (baseTagArray) => {\r\n        // Normalize base tags\r\n        let tags = baseTagArray.map(t => t.toLowerCase().replace(/[^a-z0-9]/g, '')).filter(t => t);\r\n        if (tags.length === 0) tags = ['event'];\r\n\r\n        let isAvailable = await checkTagSetAvailability(tags);\r\n        if (isAvailable) return tags;\r\n\r\n        // If exact set exists, append number to the first tag\r\n        let counter = 2;\r\n        while (true) {\r\n            const modifiedTags = [...tags];\r\n            modifiedTags[0] = `${tags[0]}${counter}`;\r\n\r\n            isAvailable = await checkTagSetAvailability(modifiedTags);\r\n            if (isAvailable) return modifiedTags;\r\n\r\n            counter++;\r\n            // Safety break\r\n            if (counter > 100) throw new Error(\"Could not generate unique tag set\");\r\n        }\r\n    };\r\n\r\n    // Create a new event\r\n    const createEvent = async (eventData, user) => {\r\n        setLoading(true);\r\n        setError(null);\r\n        try {\r\n            const newEvent = {\r\n                ...eventData,\r\n                createdBy: user.uid,\r\n                creatorName: user.displayName || 'Anonymous',\r\n                creatorPhoto: user.photoURL || null,\r\n                createdAt: serverTimestamp(),\r\n                // Ensure dates are Timestamps\r\n                startTime: Timestamp.fromDate(new Date(eventData.startTime)),\r\n                expiresAt: Timestamp.fromDate(new Date(eventData.expiresAt)),\r\n                dropTime: eventData.isTimedDrop ? Timestamp.fromDate(new Date(eventData.dropTime)) : null,\r\n                isExpired: false,\r\n                participantCount: 0,\r\n                requiredTags: eventData.requiredTags || []\r\n            };\r\n\r\n            const docRef = await addDoc(collection(db, 'events'), newEvent);\r\n            setLoading(false);\r\n            return { id: docRef.id, ...newEvent };\r\n        } catch (err) {\r\n            console.error(\"Error creating event:\", err);\r\n            setError(err.message);\r\n            setLoading(false);\r\n            throw err;\r\n        }\r\n    };\r\n\r\n    // Submit a post to an event\r\n    const submitToEvent = async (eventId, post, user) => {\r\n        setLoading(true);\r\n        setError(null);\r\n        try {\r\n            // Check if already submitted\r\n            const q = query(\r\n                collection(db, 'eventSubmissions'),\r\n                where('eventId', '==', eventId),\r\n                where('createdBy', '==', user.uid),\r\n                where('postId', '==', post.id)\r\n            );\r\n            const existing = await getDocs(q);\r\n            if (!existing.empty) {\r\n                throw new Error(\"You have already submitted this post to this event.\");\r\n            }\r\n\r\n            const submission = {\r\n                eventId,\r\n                postId: post.id,\r\n                postImage: post.imageUrl || post.images?.[0]?.url,\r\n                createdBy: user.uid,\r\n                creatorName: user.displayName || 'Anonymous',\r\n                creatorPhoto: user.photoURL || null,\r\n                submittedAt: serverTimestamp(),\r\n                visible: true\r\n            };\r\n\r\n            await addDoc(collection(db, 'eventSubmissions'), submission);\r\n            setLoading(false);\r\n            return true;\r\n        } catch (err) {\r\n            console.error(\"Error submitting to event:\", err);\r\n            setError(err.message);\r\n            setLoading(false);\r\n            throw err;\r\n        }\r\n    };\r\n\r\n    return { createEvent, submitToEvent, checkTagSetAvailability, generateUniqueTagSet, loading, error };\r\n};\r\n\r\nexport const useEvent = (eventId) => {\r\n    const [event, setEvent] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n\r\n    useEffect(() => {\r\n        if (!eventId) return;\r\n\r\n        const fetchEvent = async () => {\r\n            setLoading(true);\r\n            try {\r\n                const docRef = doc(db, 'events', eventId);\r\n                const docSnap = await getDoc(docRef);\r\n\r\n                if (docSnap.exists()) {\r\n                    let data = { id: docSnap.id, ...docSnap.data() };\r\n\r\n                    // Check expiration\r\n                    if (!data.isExpired && data.expiresAt) {\r\n                        const now = new Date();\r\n                        const expires = data.expiresAt.toDate();\r\n                        if (now > expires) {\r\n                            data.isExpired = true;\r\n                            // Lazy update\r\n                            try {\r\n                                await updateDoc(docRef, { isExpired: true });\r\n                            } catch (e) {\r\n                                console.error(\"Failed to update expiration status:\", e);\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    setEvent(data);\r\n                } else {\r\n                    setError(\"Event not found\");\r\n                }\r\n            } catch (err) {\r\n                setError(err.message);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchEvent();\r\n    }, [eventId]);\r\n\r\n    return { event, loading, error };\r\n};\r\n\r\nexport const useEventSubmissions = (eventId, isTimedDrop, dropTime) => {\r\n    const [submissions, setSubmissions] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    const { isExpired } = useCountdown(isTimedDrop ? dropTime : null);\r\n    const isRevealed = !isTimedDrop || !dropTime || isExpired;\r\n\r\n    useEffect(() => {\r\n        if (!eventId) return;\r\n\r\n        const fetchSubmissions = async () => {\r\n            setLoading(true);\r\n            try {\r\n                const q = query(\r\n                    collection(db, 'eventSubmissions'),\r\n                    where('eventId', '==', eventId),\r\n                    orderBy('submittedAt', 'desc'),\r\n                    limit(50)\r\n                );\r\n\r\n                const snapshot = await getDocs(q);\r\n                const subs = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n                setSubmissions(subs);\r\n            } catch (err) {\r\n                console.error(\"Error fetching submissions:\", err);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchSubmissions();\r\n    }, [eventId, isTimedDrop, dropTime]);\r\n\r\n    return { submissions, loading, isRevealed };\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\hooks\\useEvents.js","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'refetch'. Either include it or remove the dependency array.","line":177,"column":8,"nodeType":"ArrayExpression","endLine":177,"endColumn":50,"suggestions":[{"desc":"Update the dependencies array to be: [refetch]","fix":{"range":[7681,7723],"text":"[refetch]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a complex expression in the dependency array. Extract it to a separate variable so it can be statically checked.","line":177,"column":9,"nodeType":"ChainExpression","endLine":177,"endColumn":29},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a complex expression in the dependency array. Extract it to a separate variable so it can be statically checked.","line":177,"column":31,"nodeType":"ChainExpression","endLine":177,"endColumn":49},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo has a missing dependency: 'creatorIds'. Either include it or remove the dependency array.","line":198,"column":8,"nodeType":"ArrayExpression","endLine":198,"endColumn":51,"suggestions":[{"desc":"Update the dependencies array to be: [creatorIds]","fix":{"range":[8577,8620],"text":"[creatorIds]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo has a spread element in its dependency array. This means we can't statically verify whether you've passed the correct dependencies.","line":198,"column":29,"nodeType":"SpreadElement","endLine":198,"endColumn":50},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'refetch'. Either include it or remove the dependency array.","line":378,"column":8,"nodeType":"ArrayExpression","endLine":378,"endColumn":17,"suggestions":[{"desc":"Update the dependencies array to be: [eventId, refetch]","fix":{"range":[13841,13850],"text":"[eventId, refetch]"}}]}],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'refetch'. Either include it or remove the dependency array.","line":253,"column":8,"nodeType":"ArrayExpression","endLine":253,"endColumn":68,"suggestions":[{"desc":"Update the dependencies array to be: [refetch, stableCreatorIds]","fix":{"range":[10479,10539],"text":"[refetch, stableCreatorIds]"}}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a complex expression in the dependency array. Extract it to a separate variable so it can be statically checked.","line":253,"column":27,"nodeType":"ChainExpression","endLine":253,"endColumn":47,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a complex expression in the dependency array. Extract it to a separate variable so it can be statically checked.","line":253,"column":49,"nodeType":"ChainExpression","endLine":253,"endColumn":67,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useMemo } from 'react';\r\nimport {\r\n    collection,\r\n    query,\r\n    where,\r\n    getDocs,\r\n    doc,\r\n    getDoc,\r\n    addDoc,\r\n    updateDoc,\r\n    deleteDoc,\r\n    serverTimestamp,\r\n    orderBy,\r\n    Timestamp\r\n} from 'firebase/firestore';\r\nimport { db } from '@/firebase';\r\nimport { logger } from '@/core/utils/logger';\r\n\r\n/**\r\n * Hook for fetching events within a date range\r\n * @param {Date} startDate - Start date for filtering\r\n * @param {Date} endDate - End date for filtering\r\n */\r\nexport const useEvents = (startDate, endDate) => {\r\n    const [events, setEvents] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n\r\n    const refetch = async () => {\r\n        if (!startDate || !endDate) {\r\n            setLoading(false);\r\n            return;\r\n        }\r\n\r\n        try {\r\n            setLoading(true);\r\n\r\n            // 1. Fetch User Events (standard strict query)\r\n            const eventsQuery = query(\r\n                collection(db, 'events'),\r\n                where('eventDate', '>=', Timestamp.fromDate(startDate)),\r\n                where('eventDate', '<=', Timestamp.fromDate(endDate)),\r\n                orderBy('eventDate', 'asc')\r\n            );\r\n\r\n            // 2. Fetch Global Events\r\n            const globalQuery = query(collection(db, 'events_global'));\r\n\r\n            // 3. Fetch App Events (Curated)\r\n            const appEventsQuery = query(\r\n                collection(db, 'events_app'),\r\n                where('visibleDate', '>=', Timestamp.fromDate(startDate)),\r\n                where('visibleDate', '<=', Timestamp.fromDate(endDate))\r\n            );\r\n\r\n            const [eventsSnapshot, globalSnapshotResult, appEventsResult] = await Promise.allSettled([\r\n                getDocs(eventsQuery),\r\n                getDocs(globalQuery),\r\n                getDocs(appEventsQuery)\r\n            ]);\r\n\r\n            const fetchedEvents = [];\r\n\r\n            // Process User Events\r\n            if (eventsSnapshot.status === 'fulfilled') {\r\n                eventsSnapshot.value.docs.forEach(doc => {\r\n                    const data = doc.data();\r\n                    fetchedEvents.push({\r\n                        id: doc.id,\r\n                        ...data,\r\n                        // Ensure we have a valid JS Date object\r\n                        eventDate: data.eventDate?.toDate ? data.eventDate.toDate() : new Date(data.eventDate)\r\n                    });\r\n                });\r\n            } else {\r\n                logger.error(\"Error fetching user events:\", eventsSnapshot.reason);\r\n            }\r\n\r\n            // Process App Events\r\n            if (appEventsResult.status === 'fulfilled') {\r\n                appEventsResult.value.docs.forEach(doc => {\r\n                    const data = doc.data();\r\n                    let date = data.visibleDate?.toDate ? data.visibleDate.toDate() : new Date(data.visibleDate);\r\n\r\n                    fetchedEvents.push({\r\n                        id: doc.id,\r\n                        ...data,\r\n                        title: data.name, // Map name to title for calendar\r\n                        eventDate: date,\r\n                        isAppEvent: true,\r\n                        type: data.type || 'app_event',\r\n                        icon: data.category === 'daily' ? '≡ƒôà' : (data.category === 'contest' ? '≡ƒÅå' : 'Γ¡É')\r\n                    });\r\n                });\r\n            }\r\n\r\n            // Process Global Events\r\n            let globalEventsFound = false;\r\n\r\n            if (globalSnapshotResult.status === 'fulfilled') {\r\n                globalSnapshotResult.value.docs.forEach(doc => {\r\n                    const data = doc.data();\r\n\r\n                    // robust date handling: support 'date', 'dateUTC', or 'eventDate'\r\n                    let rawDate = data.dateUTC || data.date || data.eventDate;\r\n                    let eventDateObj = null;\r\n\r\n                    if (rawDate) {\r\n                        if (rawDate.toDate) eventDateObj = rawDate.toDate(); // Firestore Timestamp\r\n                        else eventDateObj = new Date(rawDate); // String or Number\r\n                    }\r\n\r\n                    if (eventDateObj && !isNaN(eventDateObj.getTime())) {\r\n                        // Filter by range (Client-Side)\r\n                        if (eventDateObj >= startDate && eventDateObj <= endDate) {\r\n                            fetchedEvents.push({\r\n                                id: doc.id,\r\n                                ...data,\r\n                                eventDate: eventDateObj,\r\n                                isGlobal: true,\r\n                                type: data.type || 'global'\r\n                            });\r\n                            globalEventsFound = true;\r\n                        }\r\n                    }\r\n                });\r\n            } else {\r\n                logger.warn(\"Global events access denied (Firestore Rules). Fallback data will be used.\", globalSnapshotResult.reason);\r\n            }\r\n\r\n            // Fallback: If DB is empty/failed, use fail-safe data so user sees calendar working\r\n            if (!globalEventsFound) {\r\n                const FALLBACK_MOONS = [\r\n                    { id: 'fm-jan-25', dateUTC: '2025-01-13', title: 'Full Moon', type: 'astronomy', icon: '≡ƒîò' },\r\n                    { id: 'fm-feb-25', dateUTC: '2025-02-12', title: 'Full Moon', type: 'astronomy', icon: '≡ƒîò' },\r\n                    { id: 'fm-mar-25', dateUTC: '2025-03-14', title: 'Full Moon', type: 'astronomy', icon: '≡ƒîò' },\r\n                    { id: 'fm-apr-25', dateUTC: '2025-04-13', title: 'Full Moon', type: 'astronomy', icon: '≡ƒîò' },\r\n                    { id: 'fm-may-25', dateUTC: '2025-05-12', title: 'Full Moon', type: 'astronomy', icon: '≡ƒîò' },\r\n                    { id: 'fm-jun-25', dateUTC: '2025-06-11', title: 'Full Moon', type: 'astronomy', icon: '≡ƒîò' },\r\n                    { id: 'fm-jul-25', dateUTC: '2025-07-10', title: 'Full Moon', type: 'astronomy', icon: '≡ƒîò' },\r\n                    { id: 'fm-aug-25', dateUTC: '2025-08-09', title: 'Full Moon', type: 'astronomy', icon: '≡ƒîò' },\r\n                    { id: 'fm-sep-25', dateUTC: '2025-09-07', title: 'Full Moon', type: 'astronomy', icon: '≡ƒîò' },\r\n                    { id: 'fm-oct-25', dateUTC: '2025-10-07', title: 'Full Moon', type: 'astronomy', icon: '≡ƒîò' },\r\n                    { id: 'fm-nov-25', dateUTC: '2025-11-05', title: 'Full Moon', type: 'astronomy', icon: '≡ƒîò' },\r\n                    { id: 'fm-dec-25', dateUTC: '2025-12-04', title: 'Full Moon', type: 'astronomy', icon: '≡ƒîò' }\r\n                ];\r\n\r\n                FALLBACK_MOONS.forEach(evt => {\r\n                    // Ensure date is treated as Noon to avoid localized midnight shifts\r\n                    const safeDate = new Date(evt.dateUTC + (evt.dateUTC.includes('T') ? '' : 'T12:00:00'));\r\n                    if (safeDate >= startDate && safeDate <= endDate) {\r\n                        fetchedEvents.push({\r\n                            ...evt,\r\n                            eventDate: safeDate,\r\n                            isGlobal: true\r\n                        });\r\n                    }\r\n                });\r\n            }\r\n\r\n            // Sort merged events\r\n            fetchedEvents.sort((a, b) => a.eventDate - b.eventDate);\r\n\r\n            logger.log(\"CALENDAR EVENTS:\", fetchedEvents);\r\n            setEvents(fetchedEvents);\r\n            setError(null);\r\n        } catch (err) {\r\n            logger.error('Error fetching events:', err);\r\n            setError(err.message);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        refetch();\r\n    }, [startDate?.getTime(), endDate?.getTime()]);\r\n\r\n    return { events, loading, error, refetch };\r\n};\r\n\r\n/**\r\n * Hook for fetching events by creator (Following Calendar)\r\n * @param {string[]} creatorIds - Array of user IDs to fetch events from\r\n * @param {Date} startDate - Start date for filtering\r\n * @param {Date} endDate - End date for filtering\r\n */\r\nexport const useFollowingEvents = (creatorIds, startDate, endDate) => {\r\n    const [events, setEvents] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n\r\n    // Create stable reference for creatorIds to prevent infinite loops\r\n    // Sort and stringify to ensure same IDs in different order produce same key\r\n    const stableCreatorIds = useMemo(() => {\r\n        if (!creatorIds || creatorIds.length === 0) return '';\r\n        return [...creatorIds].sort().join(',');\r\n    }, [creatorIds?.length, ...(creatorIds || [])]);\r\n\r\n    const refetch = async () => {\r\n        if (!creatorIds || creatorIds.length === 0 || !startDate || !endDate) {\r\n            setLoading(false);\r\n            setEvents([]);\r\n            return;\r\n        }\r\n\r\n        try {\r\n            setLoading(true);\r\n\r\n            // Firestore 'in' queries are limited to 10 items, so we batch if needed\r\n            const batches = [];\r\n            for (let i = 0; i < creatorIds.length; i += 10) {\r\n                const batch = creatorIds.slice(i, i + 10);\r\n                const eventsQuery = query(\r\n                    collection(db, 'events'),\r\n                    where('creatorId', 'in', batch),\r\n                    where('eventDate', '>=', Timestamp.fromDate(startDate)),\r\n                    where('eventDate', '<=', Timestamp.fromDate(endDate)),\r\n                    orderBy('eventDate', 'asc')\r\n                );\r\n                batches.push(getDocs(eventsQuery));\r\n            }\r\n\r\n            const snapshots = await Promise.all(batches);\r\n            const allEvents = [];\r\n\r\n            snapshots.forEach(snapshot => {\r\n                snapshot.docs.forEach(doc => {\r\n                    allEvents.push({\r\n                        id: doc.id,\r\n                        ...doc.data(),\r\n                        eventDate: doc.data().eventDate?.toDate()\r\n                    });\r\n                });\r\n            });\r\n\r\n            // Sort by date\r\n            allEvents.sort((a, b) => a.eventDate - b.eventDate);\r\n\r\n            setEvents(allEvents);\r\n            setError(null);\r\n        } catch (err) {\r\n            logger.error('Error fetching following events:', err);\r\n            setError(err.message);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        refetch();\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [stableCreatorIds, startDate?.getTime(), endDate?.getTime()]);\r\n\r\n    return { events, loading, error, refetch };\r\n};\r\n\r\n/**\r\n * Hook for creating and managing events\r\n */\r\nexport const useCreateEvent = () => {\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState(null);\r\n\r\n    const createEvent = async (eventData) => {\r\n        try {\r\n            setLoading(true);\r\n            setError(null);\r\n\r\n            const newEvent = {\r\n                ...eventData,\r\n                createdAt: serverTimestamp(),\r\n                updatedAt: serverTimestamp(),\r\n                eventDate: Timestamp.fromDate(eventData.eventDate)\r\n            };\r\n\r\n            const docRef = await addDoc(collection(db, 'events'), newEvent);\r\n\r\n            setLoading(false);\r\n            return { id: docRef.id, ...newEvent };\r\n        } catch (err) {\r\n            logger.error('Error creating event:', err);\r\n            setError(err.message);\r\n            setLoading(false);\r\n            throw err;\r\n        }\r\n    };\r\n\r\n    const updateEvent = async (eventId, updates) => {\r\n        try {\r\n            setLoading(true);\r\n            setError(null);\r\n\r\n            const updateData = {\r\n                ...updates,\r\n                updatedAt: serverTimestamp()\r\n            };\r\n\r\n            if (updates.eventDate) {\r\n                updateData.eventDate = Timestamp.fromDate(updates.eventDate);\r\n            }\r\n\r\n            await updateDoc(doc(db, 'events', eventId), updateData);\r\n\r\n            setLoading(false);\r\n            return true;\r\n        } catch (err) {\r\n            logger.error('Error updating event:', err);\r\n            setError(err.message);\r\n            setLoading(false);\r\n            throw err;\r\n        }\r\n    };\r\n\r\n    const deleteEvent = async (eventId) => {\r\n        try {\r\n            setLoading(true);\r\n            setError(null);\r\n\r\n            await deleteDoc(doc(db, 'events', eventId));\r\n\r\n            setLoading(false);\r\n            return true;\r\n        } catch (err) {\r\n            logger.error('Error deleting event:', err);\r\n            setError(err.message);\r\n            setLoading(false);\r\n            throw err;\r\n        }\r\n    };\r\n\r\n    return {\r\n        createEvent,\r\n        updateEvent,\r\n        deleteEvent,\r\n        loading,\r\n        error\r\n    };\r\n};\r\n\r\n/**\r\n * Hook to fetch a single event by ID\r\n */\r\nexport const useEvent = (eventId) => {\r\n    const [event, setEvent] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n\r\n    const refetch = async () => {\r\n        if (!eventId) {\r\n            setLoading(false);\r\n            return;\r\n        }\r\n\r\n        try {\r\n            setLoading(true);\r\n            const eventDoc = await getDoc(doc(db, 'events', eventId));\r\n\r\n            if (eventDoc.exists()) {\r\n                setEvent({\r\n                    id: eventDoc.id,\r\n                    ...eventDoc.data(),\r\n                    eventDate: eventDoc.data().eventDate?.toDate()\r\n                });\r\n            } else {\r\n                setError('Event not found');\r\n            }\r\n        } catch (err) {\r\n            logger.error('Error fetching event:', err);\r\n            setError(err.message);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        refetch();\r\n    }, [eventId]);\r\n\r\n    return { event, loading, error, refetch };\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\hooks\\useFeedType.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\hooks\\useFollowing.js","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'doc' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":38,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":41},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setDoc' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":43,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":49},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'deleteDoc' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":51,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":60},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Timestamp' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":62,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":71}],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchFollowing'. Either include it or remove the dependency array.","line":45,"column":8,"nodeType":"ArrayExpression","endLine":45,"endColumn":16,"suggestions":[{"desc":"Update the dependencies array to be: [fetchFollowing, userId]","fix":{"range":[1630,1638],"text":"[fetchFollowing, userId]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useCallback, useEffect } from 'react';\r\nimport { db } from '@/firebase';\r\nimport { collection, query, getDocs, doc, setDoc, deleteDoc, Timestamp, where } from 'firebase/firestore';\r\n\r\nexport const useFollowing = (userId) => {\r\n    const [followingList, setFollowingList] = useState([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState(null);\r\n\r\n    // Fetch the list of users that the current user is following\r\n    const fetchFollowing = useCallback(async () => {\r\n        if (!userId) {\r\n            setFollowingList([]);\r\n            return;\r\n        }\r\n\r\n        setLoading(true);\r\n        setError(null);\r\n\r\n        try {\r\n            const followsRef = collection(db, 'follows');\r\n            const q = query(followsRef, where('followerId', '==', userId));\r\n            const snapshot = await getDocs(q);\r\n\r\n            const followedUserIds = snapshot.docs.map(doc => doc.data().followingId);\r\n            setFollowingList(followedUserIds);\r\n        } catch (err) {\r\n            console.error('Error fetching following list:', err);\r\n            setError(err);\r\n            setFollowingList([]);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [userId]);\r\n\r\n    // Check if the current user is following a specific user\r\n    const isFollowing = useCallback((targetUserId) => {\r\n        return followingList.includes(targetUserId);\r\n    }, [followingList]);\r\n\r\n    // Auto-fetch following list when userId changes\r\n    useEffect(() => {\r\n        fetchFollowing();\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [userId]); // Only depend on userId, not fetchFollowing\r\n\r\n    return {\r\n        followingList,\r\n        loading,\r\n        error,\r\n        fetchFollowing,\r\n        isFollowing\r\n    };\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\hooks\\useGalleries.js","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'deleteDoc' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":54,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":63},{"ruleId":"no-undef","severity":1,"message":"'getDocs' is not defined.","line":116,"column":36,"nodeType":"Identifier","messageId":"undef","endLine":116,"endColumn":43}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\r\nimport { db } from '@/firebase';\r\nimport { collection, addDoc, doc, getDoc, updateDoc, deleteDoc, serverTimestamp, arrayUnion, arrayRemove, query, where, orderBy, limit } from 'firebase/firestore';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { generateSearchKeywords } from '@/core/utils/searchKeywords';\r\n\r\nexport const useGalleries = () => {\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState(null);\r\n    const { currentUser } = useAuth();\r\n\r\n    // Create a new gallery\r\n    const createGallery = async (data) => {\r\n        setLoading(true);\r\n        setError(null);\r\n        try {\r\n            if (!currentUser) throw new Error('Must be logged in');\r\n\r\n            // Generate search keywords from title and description\r\n            const searchKeywords = [\r\n                ...generateSearchKeywords(data.title || ''),\r\n                ...generateSearchKeywords(data.description || '')\r\n            ];\r\n\r\n            const galleryDoc = {\r\n                ownerId: currentUser.uid,\r\n                ownerUsername: currentUser.displayName || currentUser.email || 'Unknown',\r\n                title: data.title,\r\n                description: data.description || '',\r\n                visibility: data.visibility || 'public',\r\n                coverImage: data.coverImage || null,\r\n                postIds: [], // Starts empty\r\n                memberIds: [currentUser.uid],\r\n                tags: data.tags || [],\r\n                locations: data.locations || [],\r\n                searchKeywords,\r\n                createdAt: serverTimestamp(),\r\n                updatedAt: serverTimestamp()\r\n            };\r\n\r\n            const docRef = await addDoc(collection(db, 'galleries'), galleryDoc);\r\n            return docRef.id;\r\n        } catch (err) {\r\n            console.error('Error creating gallery:', err);\r\n            setError(err.message);\r\n            throw err;\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    // Add a post to a gallery\r\n    const addPostToGallery = async (galleryId, postId) => {\r\n        setLoading(true);\r\n        try {\r\n            const galleryRef = doc(db, 'galleries', galleryId);\r\n            await updateDoc(galleryRef, {\r\n                postIds: arrayUnion(postId),\r\n                updatedAt: serverTimestamp()\r\n            });\r\n        } catch (err) {\r\n            console.error('Error adding post to gallery:', err);\r\n            setError(err.message);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    // Remove a post from a gallery\r\n    const removePostFromGallery = async (galleryId, postId) => {\r\n        setLoading(true);\r\n        try {\r\n            const galleryRef = doc(db, 'galleries', galleryId);\r\n            await updateDoc(galleryRef, {\r\n                postIds: arrayRemove(postId),\r\n                updatedAt: serverTimestamp()\r\n            });\r\n        } catch (err) {\r\n            console.error('Error removing post from gallery:', err);\r\n            setError(err.message);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    // Get a single gallery\r\n    const getGallery = async (galleryId) => {\r\n        setLoading(true);\r\n        try {\r\n            const docRef = doc(db, 'galleries', galleryId);\r\n            const docSnap = await getDoc(docRef);\r\n            if (docSnap.exists()) {\r\n                return { id: docSnap.id, ...docSnap.data() };\r\n            } else {\r\n                throw new Error('Gallery not found');\r\n            }\r\n        } catch (err) {\r\n            console.error('Error fetching gallery:', err);\r\n            setError(err.message);\r\n            return null;\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    // Get all galleries for a user\r\n    const getUserGalleries = async (userId) => {\r\n        setLoading(true);\r\n        try {\r\n            const q = query(\r\n                collection(db, 'galleries'),\r\n                where('ownerId', '==', userId),\r\n                orderBy('createdAt', 'desc'),\r\n                limit(50) // ≡ƒÜÇ OPTIMIZATION: Prevent unbounded reads\r\n            );\r\n            const snapshot = await getDocs(q);\r\n            return snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n        } catch (err) {\r\n            console.error('Error fetching user galleries:', err);\r\n            setError(err.message);\r\n            return [];\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return {\r\n        createGallery,\r\n        addPostToGallery,\r\n        removePostFromGallery,\r\n        getGallery,\r\n        getUserGalleries,\r\n        loading,\r\n        error\r\n    };\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\hooks\\useGallery.js","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'doc' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'getDoc' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'db' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":12},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'refetch'. Either include it or remove the dependency array.","line":37,"column":8,"nodeType":"ArrayExpression","endLine":37,"endColumn":19,"suggestions":[{"desc":"Update the dependencies array to be: [galleryId, refetch]","fix":{"range":[1139,1150],"text":"[galleryId, refetch]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\r\nimport { doc, getDoc } from 'firebase/firestore';\r\nimport { db } from '@/firebase';\r\nimport { getGallery } from '@/core/services/firestore/studios.service';\r\n\r\n/**\r\n * Hook to fetch a single gallery by ID\r\n * @param {string} galleryId - Gallery ID to fetch\r\n * @returns {object} { gallery, loading, error, refetch }\r\n */\r\nexport const useGallery = (galleryId) => {\r\n    const [gallery, setGallery] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n\r\n    const refetch = async () => {\r\n        if (!galleryId) {\r\n            setLoading(false);\r\n            return;\r\n        }\r\n\r\n        try {\r\n            setLoading(true);\r\n            setError(null);\r\n            const galleryData = await getGallery(galleryId);\r\n            setGallery(galleryData);\r\n        } catch (err) {\r\n            console.error('Error fetching gallery:', err);\r\n            setError(err.message || 'Failed to load gallery');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        refetch();\r\n    }, [galleryId]);\r\n\r\n    return { gallery, loading, error, refetch };\r\n};\r\n\r\nexport default useGallery;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\hooks\\useMagazine.js","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'refetch'. Either include it or remove the dependency array.","line":49,"column":8,"nodeType":"ArrayExpression","endLine":49,"endColumn":20,"suggestions":[{"desc":"Update the dependencies array to be: [magazineId, refetch]","fix":{"range":[1592,1604],"text":"[magazineId, refetch]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\r\nimport { doc, getDoc } from 'firebase/firestore';\r\nimport { db } from '@/firebase';\r\nimport { getMagazineIssues } from '@/services/magazineService';\r\n\r\n/**\r\n * Hook to fetch a magazine and its issues\r\n * @param {string} magazineId - Magazine ID to fetch\r\n * @returns {object} { magazine, issues, loading, error, refetch }\r\n */\r\nexport const useMagazine = (magazineId) => {\r\n    const [magazine, setMagazine] = useState(null);\r\n    const [issues, setIssues] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n\r\n    const refetch = async () => {\r\n        if (!magazineId) {\r\n            setLoading(false);\r\n            return;\r\n        }\r\n\r\n        try {\r\n            setLoading(true);\r\n            setError(null);\r\n\r\n            const magazineRef = doc(db, 'magazines', magazineId);\r\n            const magazineSnap = await getDoc(magazineRef);\r\n\r\n            if (magazineSnap.exists()) {\r\n                setMagazine({ id: magazineSnap.id, ...magazineSnap.data() });\r\n\r\n                // Fetch issues\r\n                const fetchedIssues = await getMagazineIssues(magazineId);\r\n                setIssues(fetchedIssues);\r\n            } else {\r\n                setError('Magazine not found');\r\n            }\r\n        } catch (err) {\r\n            console.error('Error fetching magazine:', err);\r\n            setError(err.message || 'Failed to load magazine');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        refetch();\r\n    }, [magazineId]);\r\n\r\n    return { magazine, issues, loading, error, refetch };\r\n};\r\n\r\nexport default useMagazine;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\hooks\\useModalEscape.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\hooks\\useOnlineStatus.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\hooks\\useParks.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\hooks\\usePersonalizedFeed.js","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a complex expression in the dependency array. Extract it to a separate variable so it can be statically checked.","line":60,"column":19,"nodeType":"CallExpression","endLine":60,"endColumn":42},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has missing dependencies: 'loading', 'options.cityName', 'options.eventId', and 'options.parkId'. Either include them or remove the dependency array.","line":219,"column":8,"nodeType":"ArrayExpression","endLine":219,"endColumn":173,"suggestions":[{"desc":"Update the dependencies array to be: [loading, customFeedEnabled, configLoading, customFeedConfig, followingOnly, followingLoading, currentUser, feedType, options.parkId, options.cityName, options.eventId, showSocialPosts, followingList]","fix":{"range":[9821,9986],"text":"[loading, customFeedEnabled, configLoading, customFeedConfig, followingOnly, followingLoading, currentUser, feedType, options.parkId, options.cityName, options.eventId, showSocialPosts, followingList]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a complex expression in the dependency array. Extract it to a separate variable so it can be statically checked.","line":219,"column":19,"nodeType":"CallExpression","endLine":219,"endColumn":42},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'onPostLikedFn'. Either include it or remove the dependency array.","line":285,"column":8,"nodeType":"ArrayExpression","endLine":285,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [onPostLikedFn]","fix":{"range":[11715,11717],"text":"[onPostLikedFn]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'onPostSavedFn'. Either include it or remove the dependency array.","line":293,"column":8,"nodeType":"ArrayExpression","endLine":293,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [onPostSavedFn]","fix":{"range":[11942,11944],"text":"[onPostSavedFn]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'onPrintPurchasedFn'. Either include it or remove the dependency array.","line":301,"column":8,"nodeType":"ArrayExpression","endLine":301,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [onPrintPurchasedFn]","fix":{"range":[12182,12184],"text":"[onPrintPurchasedFn]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Custom hook for personalized feeds in Panospace\r\n * \r\n * Provides easy access to recommendation engine feeds with pagination\r\n */\r\n\r\nimport { useState, useEffect, useCallback, useRef } from 'react';\r\nimport { httpsCallable } from 'firebase/functions';\r\nimport { functions, db } from '@/firebase';\r\nimport { collection, query, where, orderBy, limit, getDocs, startAfter, doc, getDoc } from 'firebase/firestore';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { useFollowing } from '@/hooks/useFollowing';\r\nimport { logger } from '@/core/utils/logger';\r\n\r\nexport const usePersonalizedFeed = (feedType = 'HOME', options = {}, showSocialPosts = false, followingOnly = false, customFeedEnabled = false, activeCustomFeedId = null) => {\r\n    const [posts, setPosts] = useState([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState(null);\r\n    const [hasMore, setHasMore] = useState(true);\r\n    const [refreshing, setRefreshing] = useState(false);\r\n    const lastDocRef = useRef(null);\r\n    const { currentUser } = useAuth();\r\n    const { followingList, loading: followingLoading } = useFollowing(currentUser?.uid);\r\n\r\n    // Custom Feed State\r\n    const [customFeedConfig, setCustomFeedConfig] = useState(null);\r\n    const [configLoading, setConfigLoading] = useState(false);\r\n\r\n    // Fetch Custom Feed Config\r\n    useEffect(() => {\r\n        const loadConfig = async () => {\r\n            if (customFeedEnabled && activeCustomFeedId && currentUser) {\r\n                setConfigLoading(true);\r\n                try {\r\n                    const docRef = doc(db, 'users', currentUser.uid, 'customFeeds', activeCustomFeedId);\r\n                    const snap = await getDoc(docRef);\r\n                    if (snap.exists()) {\r\n                        setCustomFeedConfig(snap.data());\r\n                    } else {\r\n                        setCustomFeedConfig(null);\r\n                    }\r\n                } catch (e) {\r\n                    logger.error(\"Error loading feed config\", e);\r\n                } finally {\r\n                    setConfigLoading(false);\r\n                }\r\n            } else {\r\n                setCustomFeedConfig(null);\r\n            }\r\n        };\r\n        loadConfig();\r\n    }, [customFeedEnabled, activeCustomFeedId, currentUser]);\r\n\r\n    // Reset state when feed type changes\r\n    useEffect(() => {\r\n        setPosts([]);\r\n        lastDocRef.current = null;\r\n        setHasMore(true);\r\n        setError(null);\r\n    }, [feedType, JSON.stringify(options), showSocialPosts, followingOnly, customFeedEnabled, activeCustomFeedId]);\r\n\r\n    const fetchPosts = useCallback(async (isRefresh = false) => {\r\n        // Prevent multiple simultaneous fetches unless it's a forced refresh\r\n        if (loading && !isRefresh) return;\r\n\r\n        // Wait for dependencies\r\n        if (customFeedEnabled && (configLoading || !customFeedConfig)) return;\r\n        if (followingOnly && followingLoading && !customFeedEnabled) return;\r\n\r\n        try {\r\n            setLoading(true);\r\n            if (isRefresh) {\r\n                setRefreshing(true);\r\n                setError(null);\r\n            }\r\n\r\n            let limitSize = 10;\r\n            // Fetch more if filtering aggressively\r\n            if (followingOnly || customFeedEnabled) limitSize = 50;\r\n\r\n            let constraints = [\r\n                orderBy('createdAt', 'desc'),\r\n                limit(limitSize)\r\n            ];\r\n\r\n            // ---------------------------------------------------------\r\n            // Custom Feed Logic\r\n            // ---------------------------------------------------------\r\n            if (customFeedEnabled && customFeedConfig) {\r\n                // 1. Tags Filter (Firestore)\r\n                if (customFeedConfig.tags && customFeedConfig.tags.length > 0) {\r\n                    constraints.unshift(where('tags', 'array-contains-any', customFeedConfig.tags.slice(0, 10)));\r\n                }\r\n            }\r\n            // ---------------------------------------------------------\r\n            // Standard Logic\r\n            // ---------------------------------------------------------\r\n            else {\r\n                // Apply filters based on feedType\r\n                if (feedType === 'PARK' && options.parkId) {\r\n                    constraints.unshift(where('parkId', '==', options.parkId));\r\n                } else if (feedType === 'CITY' && options.cityName) {\r\n                    constraints.unshift(where('city', '==', options.cityName));\r\n                } else if (feedType === 'EVENT' && options.eventId) {\r\n                    constraints.unshift(where('eventId', '==', options.eventId));\r\n                }\r\n\r\n                if (showSocialPosts) {\r\n                    constraints.unshift(where('type', '==', 'social'));\r\n                } else {\r\n                    constraints.unshift(where('type', '==', 'art'));\r\n                }\r\n            }\r\n\r\n            // Pagination\r\n            if (!isRefresh && lastDocRef.current) {\r\n                constraints.push(startAfter(lastDocRef.current));\r\n            }\r\n\r\n            const q = query(collection(db, 'posts'), ...constraints);\r\n            const snapshot = await getDocs(q);\r\n\r\n            let newPosts = snapshot.docs.map(doc => ({\r\n                id: doc.id,\r\n                ...doc.data()\r\n            }));\r\n\r\n            // ---------------------------------------------------------\r\n            // Filter Logic (Common + Custom)\r\n            // ---------------------------------------------------------\r\n\r\n            // 1. Filter Own Posts (Common)\r\n            // USER REQUEST: Show your own posts in feed (Previous logic filtered them out)\r\n            // if (currentUser && (feedType === 'HOME' || feedType === 'EXPLORE')) {\r\n            //    newPosts = newPosts.filter(p => p.userId !== currentUser.uid && p.authorId !== currentUser.uid);\r\n            // }\r\n\r\n            // 2. Custom Feed Advanced Filters\r\n            if (customFeedEnabled && customFeedConfig) {\r\n\r\n                // Filter: Source (Global / Following)\r\n                if (!customFeedConfig.includeGlobal) {\r\n                    // Must be in following list\r\n                    if (followingList && followingList.length > 0) {\r\n                        newPosts = newPosts.filter(p => followingList.includes(p.userId) || followingList.includes(p.authorId));\r\n                    } else {\r\n                        newPosts = [];\r\n                    }\r\n                }\r\n\r\n                // Filter: Orientation\r\n                if (customFeedConfig.orientation && customFeedConfig.orientation !== 'any') {\r\n                    newPosts = newPosts.filter(p => {\r\n                        const ratio = p.imageDetails?.aspectRatio || 1;\r\n                        if (customFeedConfig.orientation === 'portrait') return ratio < 1;\r\n                        if (customFeedConfig.orientation === 'landscape') return ratio > 1;\r\n                        return true;\r\n                    });\r\n                }\r\n\r\n                // Filter: Locations\r\n                if (customFeedConfig.locations && customFeedConfig.locations.length > 0) {\r\n                    newPosts = newPosts.filter(p => {\r\n                        if (!p.locationName && !p.city && !p.state && !p.country) return false;\r\n                        const locString = `${p.locationName} ${p.city} ${p.state} ${p.country}`.toLowerCase();\r\n                        return customFeedConfig.locations.some(l => locString.includes(l.toLowerCase()));\r\n                    });\r\n                }\r\n\r\n                // Filter: Colors (Skipped complex logic for now, just placeholder)\r\n            }\r\n            // 3. Standard Following Only Filter\r\n            else if (followingOnly && currentUser) {\r\n                if (followingList && followingList.length > 0) {\r\n                    // USER REQUEST: Show your own posts in feed when on following\r\n                    // We simply add currentUser.uid to the inclusion check\r\n                    newPosts = newPosts.filter(p =>\r\n                        followingList.includes(p.userId) ||\r\n                        followingList.includes(p.authorId) ||\r\n                        p.userId === currentUser.uid || // Explicitly include self\r\n                        p.authorId === currentUser.uid  // Explicitly include self\r\n                    );\r\n                } else {\r\n                    // If following no one, but want to see own posts?\r\n                    // Usually \"Following Only\" implies you must follow someone.\r\n                    // But if it's \"your feed\", you might expect your own posts.\r\n                    // Let's at least show own posts if following list is empty but filter is active.\r\n                    newPosts = newPosts.filter(p =>\r\n                        p.userId === currentUser.uid ||\r\n                        p.authorId === currentUser.uid\r\n                    );\r\n                }\r\n            }\r\n\r\n            if (isRefresh) {\r\n                setPosts(newPosts);\r\n            } else {\r\n                setPosts(prev => {\r\n                    const existingIds = new Set(prev.map(p => p.id));\r\n                    const uniqueNew = newPosts.filter(p => !existingIds.has(p.id));\r\n                    return [...prev, ...uniqueNew];\r\n                });\r\n            }\r\n\r\n            if (snapshot.docs.length > 0) {\r\n                lastDocRef.current = snapshot.docs[snapshot.docs.length - 1];\r\n                setHasMore(snapshot.docs.length >= limitSize);\r\n            } else {\r\n                setHasMore(false);\r\n            }\r\n\r\n        } catch (err) {\r\n            logger.error('Error fetching feed:', err);\r\n            setError(err.message);\r\n        } finally {\r\n            setLoading(false);\r\n            setRefreshing(false);\r\n        }\r\n    }, [feedType, JSON.stringify(options), showSocialPosts, followingOnly, followingList, followingLoading, currentUser, customFeedEnabled, customFeedConfig, configLoading]);\r\n\r\n    // Initial load\r\n    useEffect(() => {\r\n        if (!followingLoading && !configLoading) {\r\n            fetchPosts(true);\r\n        }\r\n    }, [fetchPosts, followingLoading, configLoading]);\r\n\r\n    return {\r\n        posts,\r\n        loading,\r\n        error,\r\n        hasMore,\r\n        refreshing,\r\n        loadMore: () => fetchPosts(false),\r\n        refresh: () => fetchPosts(true)\r\n    };\r\n};\r\n\r\n/**\r\n * Hook for explore feed (convenience wrapper)\r\n */\r\nexport const useExploreFeed = () => {\r\n    return usePersonalizedFeed('EXPLORE');\r\n};\r\n\r\n/**\r\n * Hook for park feed\r\n * @param {string} parkId - Park ID\r\n */\r\nexport const useParkFeed = (parkId) => {\r\n    return usePersonalizedFeed('PARK', { parkId });\r\n};\r\n\r\n/**\r\n * Hook for city feed\r\n * @param {string} cityName - City name\r\n */\r\nexport const useCityFeed = (cityName) => {\r\n    return usePersonalizedFeed('CITY', { cityName });\r\n};\r\n\r\n/**\r\n * Hook for event feed\r\n * @param {string} eventId - Event ID\r\n */\r\nexport const useEventFeed = (eventId) => {\r\n    return usePersonalizedFeed('EVENT', { eventId });\r\n};\r\n\r\n/**\r\n * Hook for preference learning (track engagement)\r\n */\r\nexport const usePreferenceLearning = () => {\r\n    const onPostLikedFn = httpsCallable(functions, 'onPostLiked');\r\n    const onPostSavedFn = httpsCallable(functions, 'onPostSaved');\r\n    const onPrintPurchasedFn = httpsCallable(functions, 'onPrintPurchased');\r\n\r\n    const trackLike = useCallback(async (postId) => {\r\n        try {\r\n            await onPostLikedFn({ postId });\r\n        } catch (error) {\r\n            // Suppress CORS/internal errors in dev to prevent console noise\r\n            logger.warn('Engagement tracking failed (non-critical):', error.message);\r\n        }\r\n    }, []);\r\n\r\n    const trackSave = useCallback(async (postId) => {\r\n        try {\r\n            await onPostSavedFn({ postId });\r\n        } catch (error) {\r\n            logger.error('Error tracking save:', error);\r\n        }\r\n    }, []);\r\n\r\n    const trackPurchase = useCallback(async (postId) => {\r\n        try {\r\n            await onPrintPurchasedFn({ postId });\r\n        } catch (error) {\r\n            logger.error('Error tracking purchase:', error);\r\n        }\r\n    }, []);\r\n\r\n    return {\r\n        trackLike,\r\n        trackSave,\r\n        trackPurchase\r\n    };\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\hooks\\useProfile.js","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'currentUser' and 'user'. Either include them or remove the dependency array.","line":110,"column":8,"nodeType":"ArrayExpression","endLine":110,"endColumn":34,"suggestions":[{"desc":"Update the dependencies array to be: [userId, currentUser.uid, user, currentUser]","fix":{"range":[4476,4502],"text":"[userId, currentUser.uid, user, currentUser]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'currentUser', 'shopItems.length', and 'spaceCards.length'. Either include them or remove the dependency array.","line":185,"column":8,"nodeType":"ArrayExpression","endLine":185,"endColumn":43,"suggestions":[{"desc":"Update the dependencies array to be: [activeTab, user, userId, feedType, shopItems.length, spaceCards.length, currentUser]","fix":{"range":[7961,7996],"text":"[activeTab, user, userId, feedType, shopItems.length, spaceCards.length, currentUser]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'badges.length'. Either include it or remove the dependency array.","line":206,"column":8,"nodeType":"ArrayExpression","endLine":206,"endColumn":22,"suggestions":[{"desc":"Update the dependencies array to be: [badges.length, user, userId]","fix":{"range":[8787,8801],"text":"[badges.length, user, userId]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'currentUser'. Either include it or remove the dependency array.","line":236,"column":8,"nodeType":"ArrayExpression","endLine":236,"endColumn":34,"suggestions":[{"desc":"Update the dependencies array to be: [userId, currentUser.uid, currentUser]","fix":{"range":[9760,9786],"text":"[userId, currentUser.uid, currentUser]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useRef } from 'react';\r\nimport { doc, getDoc, getDocs, collection, query, where, orderBy, limit } from 'firebase/firestore';\r\nimport { db } from '@/firebase';\r\nimport { SpaceCardService } from '@/services/SpaceCardService';\r\nimport { logger } from '@/core/utils/logger';\r\n\r\n/**\r\n * useProfile Hook\r\n * \r\n * Fetches and manages user profile data including:\r\n * - User document\r\n * - Posts (lazy loaded by tab)\r\n * - Shop items (lazy loaded by tab)\r\n * - Space cards (lazy loaded by tab)\r\n * - Badges (loaded on mount for header display)\r\n * - Follow status\r\n * \r\n * @param {string} userId - The user ID to fetch profile for\r\n * @param {object} currentUser - The currently authenticated user\r\n * @param {string} activeTab - The currently active tab ('posts', 'shop', 'cards', 'badges', 'collections')\r\n * @returns {object} Profile data and loading states\r\n */\r\nexport const useProfile = (userId, currentUser, activeTab = 'posts', feedType = 'art') => {\r\n    const isMountedRef = useRef(true);\r\n\r\n    const [user, setUser] = useState(null);\r\n    const [posts, setPosts] = useState([]);\r\n    const [shopItems, setShopItems] = useState([]);\r\n    const [spaceCards, setSpaceCards] = useState([]);\r\n    const [badges, setBadges] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [isFollowing, setIsFollowing] = useState(false);\r\n    const [followDocId, setFollowDocId] = useState(null);\r\n\r\n    // Cleanup on unmount\r\n    useEffect(() => {\r\n        return () => {\r\n            isMountedRef.current = false;\r\n        };\r\n    }, []);\r\n\r\n    // Fetch user document\r\n    useEffect(() => {\r\n        const fetchUser = async () => {\r\n            if (!userId) {\r\n                setLoading(false);\r\n                return;\r\n            }\r\n\r\n            // If we already have the user and it matches target, don't refetch\r\n            if (user && user.id === userId) return;\r\n\r\n            try {\r\n                setLoading(true);\r\n                let userData = null;\r\n\r\n                try {\r\n                    const userDoc = await getDoc(doc(db, 'users', userId));\r\n                    if (userDoc.exists()) {\r\n                        userData = { id: userDoc.id, ...userDoc.data() };\r\n\r\n                        // --- MIGRATION: Ensure ONE SINGLE USERNAME ---\r\n                        if (!userData.username) {\r\n                            // Generate unique temp username locally to display immediately\r\n                            const baseName = (userData.displayName || 'user').toLowerCase().replace(/[^a-z0-9]/g, '').slice(0, 10);\r\n                            const randomSuffix = Math.floor(1000 + Math.random() * 9000);\r\n                            const tempUsername = `${baseName}${randomSuffix}`;\r\n\r\n                            userData.username = tempUsername;\r\n                            userData.needsUsernameSelection = true;\r\n\r\n                            // Persist async (fire & forget)\r\n                            import('firebase/firestore').then(({ updateDoc, doc }) => {\r\n                                updateDoc(doc(db, 'users', userId), {\r\n                                    username: tempUsername,\r\n                                    needsUsernameSelection: true\r\n                                }).catch(err => console.error(\"Migration failed:\", err));\r\n                            });\r\n                        }\r\n                    }\r\n                } catch (e) {\r\n                    logger.warn('Error fetching user doc:', e);\r\n                }\r\n\r\n                if (!userData && currentUser && userId === currentUser.uid) {\r\n                    userData = {\r\n                        id: currentUser.uid,\r\n                        displayName: currentUser.displayName || 'Anonymous',\r\n                        photoURL: currentUser.photoURL,\r\n                        bio: 'Welcome to your profile!'\r\n                    };\r\n                }\r\n\r\n                if (isMountedRef.current) {\r\n                    setUser(userData);\r\n                    // Reset data when user changes\r\n                    setPosts([]);\r\n                    setShopItems([]);\r\n                    setSpaceCards([]);\r\n                    setBadges([]);\r\n                }\r\n            } catch (error) {\r\n                logger.error('Error loading profile:', error);\r\n            } finally {\r\n                if (isMountedRef.current) setLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchUser();\r\n    }, [userId, currentUser?.uid]);\r\n\r\n    // Lazy load tab data\r\n    useEffect(() => {\r\n        const fetchTabData = async () => {\r\n            if (!user || !userId || !isMountedRef.current) return;\r\n\r\n            try {\r\n                // Posts - only show posts that are marked to show in profile\r\n                if (activeTab === 'posts') {\r\n                    // Reset posts when feedType changes\r\n                    setPosts([]);\r\n\r\n                    const userPostsQuery = query(\r\n                        collection(db, 'posts'),\r\n                        where('authorId', '==', userId),\r\n                        orderBy('createdAt', 'desc'),\r\n                        limit(50)\r\n                    );\r\n                    const postsSnap = await getDocs(userPostsQuery);\r\n\r\n                    logger.log(`[useProfile] Fetched ${postsSnap.docs.length} raw posts for user ${userId}`);\r\n\r\n                    if (isMountedRef.current) {\r\n                        const filteredPosts = postsSnap.docs\r\n                            .map(d => ({ id: d.id, ...d.data() }))\r\n                            .filter(post => {\r\n                                // 1. Filter by Type (Handle legacy posts)\r\n                                const postType = post.type || 'art';\r\n                                const matchesType = postType === feedType;\r\n\r\n                                // 2. Filter showInProfile (TEMPORARILY DISABLED)\r\n                                const notHidden = true; // post.showInProfile !== false;\r\n\r\n                                if (!matchesType) logger.log(`[useProfile] Filtered out post ${post.id}: wrong type (${postType} != ${feedType})`);\r\n                                // if (!notHidden) console.log(`[useProfile] Filtered out post ${post.id}: hidden from profile`);\r\n\r\n                                return matchesType && notHidden;\r\n                            });\r\n\r\n                        logger.log(`[useProfile] Final posts count: ${filteredPosts.length}`);\r\n                        setPosts(filteredPosts.slice(0, 20)); // Limit back to 20\r\n                    }\r\n                }\r\n\r\n                // Shop\r\n                if (activeTab === 'shop' && shopItems.length === 0) {\r\n                    const shopQuery = query(\r\n                        collection(db, 'shopItems'),\r\n                        where('userId', '==', userId),\r\n                        orderBy('createdAt', 'desc'),\r\n                        limit(20)\r\n                    );\r\n                    const shopSnap = await getDocs(shopQuery);\r\n                    if (isMountedRef.current) {\r\n                        const allItems = shopSnap.docs.map(d => ({ id: d.id, ...d.data() }));\r\n                        const isOwnProfile = currentUser && currentUser.uid === userId;\r\n                        const visibleItems = allItems.filter(item => isOwnProfile || item.available === true);\r\n                        setShopItems(visibleItems);\r\n                    }\r\n                }\r\n\r\n                // Cards\r\n                if (activeTab === 'cards' && spaceCards.length === 0) {\r\n                    const userCards = await SpaceCardService.getOwnedCards(userId);\r\n                    if (isMountedRef.current) {\r\n                        setSpaceCards(userCards);\r\n                    }\r\n                }\r\n            } catch (err) {\r\n                logger.error(`Error fetching ${activeTab} data:`, err);\r\n            }\r\n        };\r\n\r\n        fetchTabData();\r\n    }, [activeTab, user, userId, feedType]);\r\n\r\n    // Fetch badges separately since they are shown in header\r\n    useEffect(() => {\r\n        const fetchBadges = async () => {\r\n            if (!user || !userId || badges.length > 0) return;\r\n            try {\r\n                const badgesQuery = query(\r\n                    collection(db, 'users', userId, 'badges'),\r\n                    orderBy('earnedAt', 'desc'),\r\n                    limit(20)\r\n                );\r\n                const badgesSnap = await getDocs(badgesQuery);\r\n                if (isMountedRef.current) {\r\n                    setBadges(badgesSnap.docs.map(d => ({ id: d.id, ...d.data() })));\r\n                }\r\n            } catch (err) {\r\n                logger.error('Error fetching badges:', err);\r\n            }\r\n        };\r\n        fetchBadges();\r\n    }, [user, userId]);\r\n\r\n    // Check follow status\r\n    useEffect(() => {\r\n        const checkFollowStatus = async () => {\r\n            if (!currentUser || !userId || currentUser.uid === userId) {\r\n                return;\r\n            }\r\n\r\n            try {\r\n                const q = query(\r\n                    collection(db, 'follows'),\r\n                    where('followerId', '==', currentUser.uid),\r\n                    where('followingId', '==', userId)\r\n                );\r\n                const snapshot = await getDocs(q);\r\n\r\n                if (!snapshot.empty) {\r\n                    setIsFollowing(true);\r\n                    setFollowDocId(snapshot.docs[0].id);\r\n                } else {\r\n                    setIsFollowing(false);\r\n                    setFollowDocId(null);\r\n                }\r\n            } catch (error) {\r\n                logger.error('Error checking follow status:', error);\r\n            }\r\n        };\r\n\r\n        checkFollowStatus();\r\n    }, [userId, currentUser?.uid]);\r\n\r\n    return {\r\n        user,\r\n        posts,\r\n        shopItems,\r\n        spaceCards,\r\n        badges,\r\n        loading,\r\n        isFollowing,\r\n        followDocId,\r\n        setIsFollowing,\r\n        setFollowDocId,\r\n        setSpaceCards\r\n    };\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\hooks\\useProjects.js","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'refetch'. Either include it or remove the dependency array.","line":47,"column":8,"nodeType":"ArrayExpression","endLine":47,"endColumn":29,"suggestions":[{"desc":"Update the dependencies array to be: [studioId, projectId, refetch]","fix":{"range":[1252,1273],"text":"[studioId, projectId, refetch]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'refetch'. Either include it or remove the dependency array.","line":82,"column":8,"nodeType":"ArrayExpression","endLine":82,"endColumn":18,"suggestions":[{"desc":"Update the dependencies array to be: [refetch, studioId]","fix":{"range":[2199,2209],"text":"[refetch, studioId]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'refetch'. Either include it or remove the dependency array.","line":117,"column":8,"nodeType":"ArrayExpression","endLine":117,"endColumn":16,"suggestions":[{"desc":"Update the dependencies array to be: [refetch, userId]","fix":{"range":[3131,3139],"text":"[refetch, userId]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\r\nimport {\r\n    getProject,\r\n    getStudioProjects,\r\n    getUserProjects,\r\n    createProject,\r\n    updateProject,\r\n    deleteProject,\r\n    addContributor,\r\n    removeContributor,\r\n    addPostToProject,\r\n    removePostFromProject,\r\n    toggleProjectFollow\r\n} from '@/services/projectService';\r\n\r\n/**\r\n * Hook to fetch a single project\r\n * @param {string} studioId - The studio ID\r\n * @param {string} projectId - The project ID\r\n */\r\nexport const useProject = (studioId, projectId) => {\r\n    const [project, setProject] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n\r\n    const refetch = async () => {\r\n        if (!studioId || !projectId) {\r\n            setLoading(false);\r\n            return;\r\n        }\r\n\r\n        try {\r\n            setLoading(true);\r\n            const projectData = await getProject(studioId, projectId);\r\n            setProject(projectData);\r\n            setError(null);\r\n        } catch (err) {\r\n            console.error('Error fetching project:', err);\r\n            setError(err.message);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        refetch();\r\n    }, [studioId, projectId]);\r\n\r\n    return { project, loading, error, refetch };\r\n};\r\n\r\n/**\r\n * Hook to fetch all projects for a studio\r\n * @param {string} studioId - The studio ID\r\n */\r\nexport const useStudioProjects = (studioId) => {\r\n    const [projects, setProjects] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n\r\n    const refetch = async () => {\r\n        if (!studioId) {\r\n            setLoading(false);\r\n            return;\r\n        }\r\n\r\n        try {\r\n            setLoading(true);\r\n            const projectsData = await getStudioProjects(studioId);\r\n            setProjects(projectsData);\r\n            setError(null);\r\n        } catch (err) {\r\n            console.error('Error fetching studio projects:', err);\r\n            setError(err.message);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        refetch();\r\n    }, [studioId]);\r\n\r\n    return { projects, loading, error, refetch };\r\n};\r\n\r\n/**\r\n * Hook to fetch projects where user is a contributor\r\n * @param {string} userId - The user ID\r\n */\r\nexport const useUserProjects = (userId) => {\r\n    const [projects, setProjects] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n\r\n    const refetch = async () => {\r\n        if (!userId) {\r\n            setLoading(false);\r\n            return;\r\n        }\r\n\r\n        try {\r\n            setLoading(true);\r\n            const projectsData = await getUserProjects(userId);\r\n            setProjects(projectsData);\r\n            setError(null);\r\n        } catch (err) {\r\n            console.error('Error fetching user projects:', err);\r\n            setError(err.message);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        refetch();\r\n    }, [userId]);\r\n\r\n    return { projects, loading, error, refetch };\r\n};\r\n\r\n/**\r\n * Hook for project management operations\r\n */\r\nexport const useProjectManagement = () => {\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState(null);\r\n\r\n    const create = async (studioId, projectData) => {\r\n        try {\r\n            setLoading(true);\r\n            setError(null);\r\n            const newProject = await createProject(studioId, projectData);\r\n            return newProject;\r\n        } catch (err) {\r\n            console.error('Error creating project:', err);\r\n            setError(err.message);\r\n            throw err;\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const update = async (studioId, projectId, updates) => {\r\n        try {\r\n            setLoading(true);\r\n            setError(null);\r\n            await updateProject(studioId, projectId, updates);\r\n        } catch (err) {\r\n            console.error('Error updating project:', err);\r\n            setError(err.message);\r\n            throw err;\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const remove = async (studioId, projectId) => {\r\n        try {\r\n            setLoading(true);\r\n            setError(null);\r\n            await deleteProject(studioId, projectId);\r\n        } catch (err) {\r\n            console.error('Error deleting project:', err);\r\n            setError(err.message);\r\n            throw err;\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const addContrib = async (studioId, projectId, contributor) => {\r\n        try {\r\n            setLoading(true);\r\n            setError(null);\r\n            await addContributor(studioId, projectId, contributor);\r\n        } catch (err) {\r\n            console.error('Error adding contributor:', err);\r\n            setError(err.message);\r\n            throw err;\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const removeContrib = async (studioId, projectId, contributor) => {\r\n        try {\r\n            setLoading(true);\r\n            setError(null);\r\n            await removeContributor(studioId, projectId, contributor);\r\n        } catch (err) {\r\n            console.error('Error removing contributor:', err);\r\n            setError(err.message);\r\n            throw err;\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const addPost = async (studioId, projectId, postId) => {\r\n        try {\r\n            setLoading(true);\r\n            setError(null);\r\n            await addPostToProject(studioId, projectId, postId);\r\n        } catch (err) {\r\n            console.error('Error adding post to project:', err);\r\n            setError(err.message);\r\n            throw err;\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const removePost = async (studioId, projectId, postId) => {\r\n        try {\r\n            setLoading(true);\r\n            setError(null);\r\n            await removePostFromProject(studioId, projectId, postId);\r\n        } catch (err) {\r\n            console.error('Error removing post from project:', err);\r\n            setError(err.message);\r\n            throw err;\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const toggleFollow = async (studioId, projectId, userId, follow) => {\r\n        try {\r\n            setLoading(true);\r\n            setError(null);\r\n            await toggleProjectFollow(studioId, projectId, userId, follow);\r\n        } catch (err) {\r\n            console.error('Error toggling project follow:', err);\r\n            setError(err.message);\r\n            throw err;\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return {\r\n        create,\r\n        update,\r\n        remove,\r\n        addContrib,\r\n        removeContrib,\r\n        addPost,\r\n        removePost,\r\n        toggleFollow,\r\n        loading,\r\n        error\r\n    };\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\hooks\\useReport.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\hooks\\useSearch.js","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'functions' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'httpsCallable' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'SORT_OPTIONS' is defined but never used. Allowed unused vars must match /^_/u.","line":14,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'sort' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":899,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":899,"endColumn":32}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useCallback } from 'react';\r\nimport { db, functions } from '@/firebase';\r\nimport { httpsCallable } from 'firebase/functions';\r\nimport {\r\n    collection,\r\n    query,\r\n    where,\r\n    getDocs,\r\n    orderBy,\r\n    limit,\r\n    startAfter\r\n} from 'firebase/firestore';\r\nimport { getDerivedDate, isSameDate } from '@/core/utils/dates';\r\nimport { SORT_OPTIONS } from '@/core/constants/searchFilters';\r\nimport { sortPostsByTrending } from '@/core/utils/trendingAlgorithm';\r\nimport { logger } from '@/core/utils/logger';\r\n\r\nexport const useSearch = () => {\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState(null);\r\n\r\n    /**\r\n     * SEARCH USERS\r\n     * Strategy:\r\n     *  - tokenize the search term\r\n     *  - use the first word to query 'searchKeywords' via array-contains\r\n     *  - client-side filter for the rest of the words across displayName/username/bio/email/artTypes\r\n     */\r\n    /**\r\n     * SEARCH USERS\r\n     * Strategy:\r\n     *  - tokenize the search term\r\n     *  - use the first word to query 'searchKeywords' via array-contains\r\n     *  - client-side filter for the rest of the words across displayName/username/bio/email/artTypes\r\n     */\r\n    const searchUsers = useCallback(async (searchTerm, filters = {}, lastDoc = null) => {\r\n        const { userIds = [] } = filters;\r\n        const term = (searchTerm || '').toLowerCase().trim();\r\n\r\n        // Return all users if no term/filter (as requested)\r\n        if (!term && userIds.length === 0) {\r\n            // Allow fall-through\r\n        }\r\n\r\n        setLoading(true);\r\n        setError(null);\r\n\r\n        try {\r\n            const usersRef = collection(db, 'users');\r\n            let q;\r\n\r\n            if (userIds.length > 0) {\r\n                // Filter by specific user IDs (e.g. Museum Members)\r\n                // 'in' query is limited to 10 (or 30). Slice for safety.\r\n                // For MVP, we'll slice to 10.\r\n                const safeUserIds = userIds.slice(0, 10);\r\n\r\n                // If term exists, we might want to filter client-side after fetching by IDs\r\n                // because we can't combine 'in' with 'array-contains' easily if not on same field\r\n                q = query(\r\n                    usersRef,\r\n                    where('__name__', 'in', safeUserIds), // __name__ is document ID\r\n                    limit(50)\r\n                );\r\n            } else if (term) {\r\n                // Standard search with term\r\n                const words = term.split(/\\s+/).filter(w => w.length > 1);\r\n                const primaryWord = words[0] || term;\r\n\r\n                q = query(\r\n                    usersRef,\r\n                    where('searchKeywords', 'array-contains', primaryWord),\r\n                    orderBy('displayName'),\r\n                    limit(50)\r\n                );\r\n            } else {\r\n                // No term, list all users\r\n                q = query(\r\n                    usersRef,\r\n                    orderBy('displayName'),\r\n                    limit(50)\r\n                );\r\n            }\r\n\r\n            if (lastDoc && userIds.length === 0) {\r\n                // Only apply pagination for standard search for now\r\n                const words = term.split(/\\s+/).filter(w => w.length > 1);\r\n                const primaryWord = words[0] || term;\r\n\r\n                q = query(\r\n                    usersRef,\r\n                    where('searchKeywords', 'array-contains', primaryWord),\r\n                    orderBy('displayName'),\r\n                    startAfter(lastDoc),\r\n                    limit(50)\r\n                );\r\n            }\r\n\r\n            const snapshot = await getDocs(q);\r\n            const docs = snapshot.docs.map(d => ({\r\n                id: d.id,\r\n                ...d.data()\r\n            }));\r\n\r\n            let filtered = docs;\r\n\r\n            // Client-side filtering for search term\r\n            if (term) {\r\n                const words = term.split(/\\s+/).filter(w => w.length > 1);\r\n                filtered = filtered.filter(user => {\r\n                    const searchableText = [\r\n                        user.displayName,\r\n                        user.username,\r\n                        user.bio,\r\n                        user.email,\r\n                        ...(user.artTypes || [])\r\n                    ]\r\n                        .filter(Boolean)\r\n                        .join(' ')\r\n                        .toLowerCase();\r\n\r\n                    return words.length === 0\r\n                        ? searchableText.includes(words[0] || term)\r\n                        : words.every(w => searchableText.includes(w));\r\n                });\r\n            }\r\n\r\n            const newLastDoc =\r\n                snapshot.docs.length > 0\r\n                    ? snapshot.docs[snapshot.docs.length - 1]\r\n                    : null;\r\n\r\n            return { data: filtered, lastDoc: newLastDoc };\r\n        } catch (err) {\r\n            console.error('User search error:', err);\r\n            setError(err);\r\n            return { data: [], lastDoc: null };\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, []);\r\n\r\n    /**\r\n     * SEARCH POSTS\r\n     */\r\n    const searchPosts = useCallback(async (searchTerm, filters = {}, lastDoc = null) => {\r\n        const {\r\n            tags = [],\r\n            parkId = '',\r\n            selectedDate = null,\r\n            location = '',\r\n            camera = '',\r\n            film = '',\r\n            orientation = '',\r\n            aspectRatio = '',\r\n            sort = 'newest',\r\n            authorIds = [] // New filter for following only\r\n        } = filters;\r\n\r\n        const term = (searchTerm || '').toLowerCase().trim();\r\n        const words = term.split(/\\s+/).filter(w => w.length > 0);\r\n        const primaryWord = words[0] || term;\r\n\r\n        setLoading(true);\r\n        setError(null);\r\n\r\n        try {\r\n            const postsRef = collection(db, 'posts');\r\n            let q;\r\n            let orderByField = 'createdAt';\r\n            let orderDirection = 'desc';\r\n\r\n            // Determine sorting\r\n            if (sort === 'oldest') {\r\n                orderDirection = 'asc';\r\n            } else if (sort === 'popular') {\r\n                orderByField = 'likeCount';\r\n            }\r\n            // Note: 'trending' is handled client-side with sophisticated algorithm\r\n\r\n            // Construct Base Query\r\n            if (authorIds.length > 0) {\r\n                // Filter by specific authors (Following Only)\r\n                // Note: 'in' query is limited to 10 items (or 30 depending on version, but safe to slice)\r\n                // For now, we'll take the top 10 most recent followed users if the list is huge, \r\n                // or we might need to do multiple queries if following > 10. \r\n                // For MVP, we'll slice to 10 to prevent crashes.\r\n                // Ideally, we should batch this or use a different strategy for large following lists.\r\n                const safeAuthorIds = authorIds.slice(0, 10);\r\n\r\n                q = query(\r\n                    postsRef,\r\n                    where('authorId', 'in', safeAuthorIds),\r\n                    orderBy(orderByField, orderDirection),\r\n                    limit(50)\r\n                );\r\n            } else if (tags.length > 0) {\r\n                // Primary tag search\r\n                const primaryTag = tags[0];\r\n                // ≡ƒöÆ SAFETY: Reduced from 100 to 30\r\n                // WHY: 100 posts = 100 reads per search. At 1000 searches/day = 100k reads = $6/day\r\n                // With 30: 1000 searches/day = 30k reads = $1.80/day (70% cost reduction)\r\n                // UX: Users can load more via pagination if needed\r\n                q = query(\r\n                    postsRef,\r\n                    where('tags', 'array-contains', primaryTag),\r\n                    orderBy(orderByField, orderDirection),\r\n                    limit(30)\r\n                );\r\n            } else if (term) {\r\n                // Keyword search\r\n                // ≡ƒöÆ SAFETY: Reduced from 100 to 30 (same reasoning as tag search)\r\n                q = query(\r\n                    postsRef,\r\n                    where('searchKeywords', 'array-contains', primaryWord),\r\n                    orderBy(orderByField, orderDirection),\r\n                    limit(30)\r\n                );\r\n            } else {\r\n                // Fallback (Recent/Sorted)\r\n                q = query(\r\n                    postsRef,\r\n                    orderBy(orderByField, orderDirection),\r\n                    limit(50)\r\n                );\r\n            }\r\n\r\n            if (lastDoc) {\r\n                q = query(q, startAfter(lastDoc));\r\n            }\r\n\r\n            const snapshot = await getDocs(q);\r\n            const docs = snapshot.docs.map(d => ({\r\n                id: d.id,\r\n                ...d.data()\r\n            }));\r\n            const newLastDoc =\r\n                snapshot.docs.length > 0\r\n                    ? snapshot.docs[snapshot.docs.length - 1]\r\n                    : null;\r\n\r\n            // Client-side filtering\r\n            let filtered = docs;\r\n\r\n            // Filter by Tags (remaining tags)\r\n            if (tags.length > 0) {\r\n                filtered = filtered.filter(post => {\r\n                    const postTags = (post.tags || []).map(t => t.toLowerCase());\r\n                    return tags.every(tag =>\r\n                        postTags.includes(tag.toLowerCase())\r\n                    );\r\n                });\r\n            }\r\n\r\n            // Park filter\r\n            if (parkId) {\r\n                filtered = filtered.filter(post => post.parkId === parkId);\r\n            }\r\n\r\n            // Date filter\r\n            if (selectedDate) {\r\n                filtered = filtered.filter(post => {\r\n                    const postDate = getDerivedDate(post);\r\n                    return postDate && isSameDate(postDate, selectedDate);\r\n                });\r\n            }\r\n\r\n            // Location filter\r\n            if (location.trim()) {\r\n                const locLower = location.toLowerCase().trim();\r\n                filtered = filtered.filter(post => {\r\n                    const city = (post.location?.city || '').toLowerCase();\r\n                    const state = (post.location?.state || '').toLowerCase();\r\n                    const country = (post.location?.country || '').toLowerCase();\r\n                    const fullLoc = `${city} ${state} ${country}`;\r\n                    return fullLoc.includes(locLower);\r\n                });\r\n            }\r\n\r\n            // Camera filter\r\n            if (camera) {\r\n                const camLower = camera.toLowerCase();\r\n                filtered = filtered.filter(post => {\r\n                    const make = (post.exif?.make || '').toLowerCase();\r\n                    const model = (post.exif?.model || '').toLowerCase();\r\n                    return make.includes(camLower) || model.includes(camLower);\r\n                });\r\n            }\r\n\r\n            // Film filter\r\n            if (film) {\r\n                const filmLower = film.toLowerCase();\r\n                filtered = filtered.filter(post => {\r\n                    // Check tags for film stock or explicit exif field if it exists\r\n                    const tags = (post.tags || []).map(t => t.toLowerCase());\r\n                    return tags.some(t => t.includes(filmLower));\r\n                });\r\n            }\r\n\r\n            // Orientation filter\r\n            if (orientation) {\r\n                const targetOrientation = orientation.toLowerCase();\r\n                filtered = filtered.filter(post => {\r\n                    // Strictly calculate from dimensions (Prioritize first image)\r\n                    // We ignore post.orientation to ensure visual accuracy based on the actual image\r\n                    const firstImage = post.images?.[0];\r\n                    const width = Number(firstImage?.width || post.width || post.exif?.pixelXDimension || 0);\r\n                    const height = Number(firstImage?.height || post.height || post.exif?.pixelYDimension || 0);\r\n\r\n                    if (!width || !height) return false; // Strict: exclude if unknown\r\n\r\n                    const ratio = width / height;\r\n                    // Use a small tolerance (2%) for \"square\" to catch 1080x1079 etc.\r\n                    const isSquare = Math.abs(ratio - 1) < 0.02;\r\n\r\n                    if (targetOrientation === 'square') return isSquare;\r\n                    if (targetOrientation === 'landscape') return ratio > 1 && !isSquare;\r\n                    if (targetOrientation === 'portrait') return ratio < 1 && !isSquare;\r\n                    return false;\r\n                });\r\n            }\r\n\r\n\r\n\r\n            // Aspect Ratio filter (approximate)\r\n            if (aspectRatio) {\r\n                filtered = filtered.filter(post => {\r\n                    const firstImage = post.images?.[0];\r\n                    const width = Number(firstImage?.width || post.width || post.exif?.pixelXDimension || 0);\r\n                    const height = Number(firstImage?.height || post.height || post.exif?.pixelYDimension || 0);\r\n\r\n                    if (!width || !height) return false; // Strict: exclude if unknown\r\n\r\n                    const ratio = width / height;\r\n                    // Simple tolerance check\r\n                    if (aspectRatio === '1:1') return Math.abs(ratio - 1) < 0.05;\r\n                    if (aspectRatio === '4:5') return Math.abs(ratio - 0.8) < 0.05;\r\n                    if (aspectRatio === '16:9') return Math.abs(ratio - 1.77) < 0.05;\r\n                    if (aspectRatio === '2:3') return Math.abs(ratio - 0.66) < 0.05;\r\n                    if (aspectRatio === '3:2') return Math.abs(ratio - 1.5) < 0.05;\r\n                    if (aspectRatio === '21:9') return Math.abs(ratio - 2.33) < 0.05;\r\n                    return false;\r\n                });\r\n            }\r\n\r\n            // Search Term filter (remaining words)\r\n            if (term) {\r\n                filtered = filtered.filter(post => {\r\n                    const searchableText = [\r\n                        post.title,\r\n                        post.authorName,\r\n                        ...(post.tags || []),\r\n                        post.location?.city,\r\n                        post.location?.state,\r\n                        post.location?.country\r\n                    ]\r\n                        .filter(Boolean)\r\n                        .join(' ')\r\n                        .toLowerCase();\r\n\r\n                    return words.every(w => searchableText.includes(w));\r\n                });\r\n            }\r\n\r\n            // PHASE 3: Post Type Filter\r\n            if (filters.postType) {\r\n                filtered = filtered.filter(post => (post.type || 'art') === filters.postType);\r\n            }\r\n\r\n            // Apply client-side sorting to handle derived fields (EXIF date) and ensure correct order\r\n            // We apply this even for 'newest' to respect EXIF dates over upload dates\r\n            if (!term) {\r\n                if (sort === 'trending') {\r\n                    // Use sophisticated trending algorithm with time-based fallback\r\n                    const trendingResult = sortPostsByTrending(filtered);\r\n                    filtered = trendingResult.posts;\r\n                    // Optionally log which time period was used\r\n                    logger.log(`Trending posts from: ${trendingResult.period}`);\r\n                } else {\r\n                    filtered.sort((a, b) => {\r\n                        if (sort === 'newest' || sort === 'oldest') {\r\n                            const dateA = getDerivedDate(a) || new Date(0);\r\n                            const dateB = getDerivedDate(b) || new Date(0);\r\n                            return sort === 'newest'\r\n                                ? dateB - dateA\r\n                                : dateA - dateB;\r\n                        }\r\n\r\n                        if (sort === 'popular') {\r\n                            return (b.likeCount || 0) - (a.likeCount || 0);\r\n                        }\r\n\r\n                        return 0;\r\n                    });\r\n                }\r\n            }\r\n\r\n            return { data: filtered, lastDoc: newLastDoc };\r\n        } catch (err) {\r\n            console.error('Post search error:', err);\r\n            setError(err);\r\n            return { data: [], lastDoc: null };\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, []);\r\n\r\n    /**\r\n     * SEARCH GALLERIES\r\n     * Strategy:\r\n     *  - if searchTerm: query galleries where searchKeywords contains primary word\r\n     *  - else: fallback to recent galleries\r\n     *  - then client-side filter on tags, location, remaining words\r\n     */\r\n    const searchGalleries = useCallback(async (searchTerm, filters = {}, lastDoc = null) => {\r\n        const { tags = [], location = '', galleryIds = [] } = filters;\r\n        const term = (searchTerm || '').toLowerCase().trim();\r\n        const words = term.split(/\\s+/).filter(w => w.length > 0);\r\n        const primaryWord = words[0] || term;\r\n\r\n        setLoading(true);\r\n        setError(null);\r\n\r\n        try {\r\n            const galleriesRef = collection(db, 'galleries');\r\n            let q;\r\n\r\n            if (galleryIds.length > 0) {\r\n                // Filter by specific gallery IDs\r\n                const safeGalleryIds = galleryIds.slice(0, 10);\r\n                q = query(\r\n                    galleriesRef,\r\n                    where('__name__', 'in', safeGalleryIds),\r\n                    limit(50)\r\n                );\r\n            } else if (tags.length > 0) {\r\n                // Primary tag search\r\n                const primaryTag = tags[0];\r\n                q = query(\r\n                    galleriesRef,\r\n                    where('tags', 'array-contains', primaryTag),\r\n                    orderBy('createdAt', 'desc'),\r\n                    limit(100)\r\n                );\r\n            } else if (term) {\r\n                // Keyword search\r\n                q = query(\r\n                    galleriesRef,\r\n                    where('searchKeywords', 'array-contains', primaryWord),\r\n                    orderBy('createdAt', 'desc'),\r\n                    limit(100)\r\n                );\r\n            } else {\r\n                // Recent galleries fallback\r\n                q = query(\r\n                    galleriesRef,\r\n                    orderBy('createdAt', 'desc'),\r\n                    limit(50)\r\n                );\r\n            }\r\n\r\n            if (lastDoc && galleryIds.length === 0) {\r\n                q = query(q, startAfter(lastDoc));\r\n            }\r\n\r\n            const snapshot = await getDocs(q);\r\n            const docs = snapshot.docs.map(d => ({\r\n                id: d.id,\r\n                ...d.data()\r\n            }));\r\n            const newLastDoc =\r\n                snapshot.docs.length > 0\r\n                    ? snapshot.docs[snapshot.docs.length - 1]\r\n                    : null;\r\n\r\n            // Client-side filtering: tags, location, and additional words\r\n            let filtered = docs;\r\n\r\n            if (tags.length > 0) {\r\n                filtered = filtered.filter(gallery => {\r\n                    const galleryTags = (gallery.tags || []).map(t => t.toLowerCase());\r\n                    return tags.every(tag =>\r\n                        galleryTags.includes(tag.toLowerCase())\r\n                    );\r\n                });\r\n            }\r\n\r\n            if (location.trim()) {\r\n                const locLower = location.toLowerCase().trim();\r\n                filtered = filtered.filter(gallery => {\r\n                    const locations = gallery.locations || [];\r\n                    return locations.some(loc => {\r\n                        const city = (loc.city || '').toLowerCase();\r\n                        const state = (loc.state || '').toLowerCase();\r\n                        const country = (loc.country || '').toLowerCase();\r\n                        const fullLoc = `${city} ${state} ${country}`;\r\n                        return fullLoc.includes(locLower);\r\n                    });\r\n                });\r\n            }\r\n\r\n            if (term) {\r\n                filtered = filtered.filter(gallery => {\r\n                    const searchableText = [\r\n                        gallery.title,\r\n                        gallery.description,\r\n                        gallery.ownerUsername,\r\n                        ...(gallery.tags || []),\r\n                        ...(gallery.locations || []).map(l => `${l.city} ${l.state} ${l.country}`).join(' ')\r\n                    ]\r\n                        .filter(Boolean)\r\n                        .join(' ')\r\n                        .toLowerCase();\r\n\r\n                    return words.every(w => searchableText.includes(w));\r\n                });\r\n            }\r\n\r\n            return { data: filtered, lastDoc: newLastDoc };\r\n        } catch (err) {\r\n            console.error('Gallery search error:', err);\r\n            setError(err);\r\n            return { data: [], lastDoc: null };\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, []);\r\n\r\n    /**\r\n     * SEARCH COLLECTIONS\r\n     * Strategy:\r\n     *  - if tags filter: query collections where tags contains primary tag\r\n     *  - else if searchTerm: query collections where searchKeywords contains primary word\r\n     *  - else: fallback to recent collections\r\n     *  - then client-side filter on tags, discipline, creator, visibility\r\n     */\r\n    const searchCollections = useCallback(async (searchTerm, filters = {}, lastDoc = null) => {\r\n        const { tags = [], discipline = '', creatorId = '' } = filters;\r\n        const term = (searchTerm || '').toLowerCase().trim();\r\n        const words = term.split(/\\s+/).filter(w => w.length > 0);\r\n        const primaryWord = words[0] || term;\r\n\r\n        setLoading(true);\r\n        setError(null);\r\n\r\n        try {\r\n            const collectionsRef = collection(db, 'collections');\r\n            let q;\r\n\r\n            if (tags.length > 0) {\r\n                const primaryTag = tags[0];\r\n                q = query(\r\n                    collectionsRef,\r\n                    where('tags', 'array-contains', primaryTag),\r\n                    where('visibility', '==', 'public'),\r\n                    orderBy('createdAt', 'desc'),\r\n                    limit(50)\r\n                );\r\n            } else if (term) {\r\n                q = query(\r\n                    collectionsRef,\r\n                    where('searchKeywords', 'array-contains', primaryWord),\r\n                    where('visibility', '==', 'public'),\r\n                    orderBy('createdAt', 'desc'),\r\n                    limit(50)\r\n                );\r\n            } else {\r\n                q = query(\r\n                    collectionsRef,\r\n                    where('visibility', '==', 'public'),\r\n                    orderBy('createdAt', 'desc'),\r\n                    limit(50)\r\n                );\r\n            }\r\n\r\n            if (lastDoc) {\r\n                q = query(q, startAfter(lastDoc));\r\n            }\r\n\r\n            const snapshot = await getDocs(q);\r\n            const docs = snapshot.docs.map(d => ({ id: d.id, ...d.data() }));\r\n            const newLastDoc = snapshot.docs.length > 0 ? snapshot.docs[snapshot.docs.length - 1] : null;\r\n\r\n            // Client-side filtering\r\n            let filtered = docs;\r\n\r\n            if (tags.length > 0) {\r\n                filtered = filtered.filter(collection => {\r\n                    const collectionTags = (collection.tags || []).map(t => t.toLowerCase());\r\n                    return tags.every(tag => collectionTags.includes(tag.toLowerCase()));\r\n                });\r\n            }\r\n\r\n            if (discipline) {\r\n                filtered = filtered.filter(collection => collection.discipline === discipline);\r\n            }\r\n\r\n            if (creatorId) {\r\n                filtered = filtered.filter(collection => collection.ownerId === creatorId);\r\n            }\r\n\r\n            if (term) {\r\n                filtered = filtered.filter(collection => {\r\n                    const searchableText = [\r\n                        collection.title,\r\n                        collection.description,\r\n                        collection.ownerUsername,\r\n                        ...(collection.tags || [])\r\n                    ].filter(Boolean).join(' ').toLowerCase();\r\n                    return words.every(w => searchableText.includes(w));\r\n                });\r\n            }\r\n\r\n            return { data: filtered, lastDoc: newLastDoc };\r\n        } catch (err) {\r\n            console.error('Collection search error:', err);\r\n            setError(err);\r\n            return { data: [], lastDoc: null };\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, []);\r\n\r\n    /**\r\n     * SEARCH CONTESTS\r\n     * Strategy:\r\n     *  - Query contests collection\r\n     *  - Filter by status, tags, art type, entry type\r\n     *  - Sort by deadline (soonest first)\r\n     */\r\n    const searchContests = useCallback(async (searchTerm, filters = {}, lastDoc = null) => {\r\n        const { tags = [], artType = '', entryType = '', status = 'active' } = filters;\r\n        const term = (searchTerm || '').toLowerCase().trim();\r\n        const words = term.split(/\\s+/).filter(w => w.length > 0);\r\n        const primaryWord = words[0] || term;\r\n\r\n        setLoading(true);\r\n        setError(null);\r\n\r\n        try {\r\n            const contestsRef = collection(db, 'contests');\r\n            let q;\r\n\r\n            if (tags.length > 0) {\r\n                const primaryTag = tags[0];\r\n                q = query(\r\n                    contestsRef,\r\n                    where('tags', 'array-contains', primaryTag),\r\n                    orderBy('deadline', 'asc'),\r\n                    limit(50)\r\n                );\r\n            } else if (term) {\r\n                q = query(\r\n                    contestsRef,\r\n                    where('searchKeywords', 'array-contains', primaryWord),\r\n                    orderBy('deadline', 'asc'),\r\n                    limit(50)\r\n                );\r\n            } else {\r\n                q = query(\r\n                    contestsRef,\r\n                    orderBy('deadline', 'asc'),\r\n                    limit(50)\r\n                );\r\n            }\r\n\r\n            if (lastDoc) {\r\n                q = query(q, startAfter(lastDoc));\r\n            }\r\n\r\n            const snapshot = await getDocs(q);\r\n            const docs = snapshot.docs.map(d => ({ id: d.id, ...d.data() }));\r\n            const newLastDoc = snapshot.docs.length > 0 ? snapshot.docs[snapshot.docs.length - 1] : null;\r\n\r\n            // Client-side filtering\r\n            let filtered = docs;\r\n\r\n            if (status) {\r\n                filtered = filtered.filter(contest => contest.status === status);\r\n            }\r\n\r\n            if (artType) {\r\n                filtered = filtered.filter(contest => contest.artType === artType);\r\n            }\r\n\r\n            if (entryType) {\r\n                filtered = filtered.filter(contest => contest.entryType === entryType);\r\n            }\r\n\r\n            if (term) {\r\n                filtered = filtered.filter(contest => {\r\n                    const searchableText = [\r\n                        contest.title,\r\n                        contest.description,\r\n                        ...(contest.tags || [])\r\n                    ].filter(Boolean).join(' ').toLowerCase();\r\n                    return words.every(w => searchableText.includes(w));\r\n                });\r\n            }\r\n\r\n            return { data: filtered, lastDoc: newLastDoc };\r\n        } catch (err) {\r\n            console.error('Contest search error:', err);\r\n            setError(err);\r\n            return { data: [], lastDoc: null };\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, []);\r\n\r\n    /**\r\n     * SEARCH EVENTS\r\n     * Strategy:\r\n     *  - Query events collection\r\n     *  - Filter by type, park, status, date\r\n     *  - Sort by date (soonest first)\r\n     */\r\n    const searchEvents = useCallback(async (searchTerm, filters = {}, lastDoc = null) => {\r\n        const { type = '', parkId = '', status = 'upcoming' } = filters;\r\n        const term = (searchTerm || '').toLowerCase().trim();\r\n        const words = term.split(/\\s+/).filter(w => w.length > 0);\r\n        const primaryWord = words[0] || term;\r\n\r\n        setLoading(true);\r\n        setError(null);\r\n\r\n        try {\r\n            const eventsRef = collection(db, 'events');\r\n            let q;\r\n\r\n            if (term) {\r\n                q = query(\r\n                    eventsRef,\r\n                    where('searchKeywords', 'array-contains', primaryWord),\r\n                    orderBy('date', 'asc'),\r\n                    limit(50)\r\n                );\r\n            } else {\r\n                q = query(\r\n                    eventsRef,\r\n                    orderBy('date', 'asc'),\r\n                    limit(50)\r\n                );\r\n            }\r\n\r\n            if (lastDoc) {\r\n                q = query(q, startAfter(lastDoc));\r\n            }\r\n\r\n            const snapshot = await getDocs(q);\r\n            const docs = snapshot.docs.map(d => ({ id: d.id, ...d.data() }));\r\n            const newLastDoc = snapshot.docs.length > 0 ? snapshot.docs[snapshot.docs.length - 1] : null;\r\n\r\n            // Client-side filtering\r\n            let filtered = docs;\r\n\r\n            if (status) {\r\n                filtered = filtered.filter(event => event.status === status);\r\n            }\r\n\r\n            if (type) {\r\n                filtered = filtered.filter(event => event.type === type);\r\n            }\r\n\r\n            if (parkId) {\r\n                filtered = filtered.filter(event => event.parkId === parkId);\r\n            }\r\n\r\n            if (term) {\r\n                filtered = filtered.filter(event => {\r\n                    const searchableText = [\r\n                        event.title,\r\n                        event.description,\r\n                        event.parkName,\r\n                        event.location?.city,\r\n                        event.location?.state,\r\n                        ...(event.tags || [])\r\n                    ].filter(Boolean).join(' ').toLowerCase();\r\n                    return words.every(w => searchableText.includes(w));\r\n                });\r\n            }\r\n\r\n            return { data: filtered, lastDoc: newLastDoc };\r\n        } catch (err) {\r\n            console.error('Event search error:', err);\r\n            setError(err);\r\n            return { data: [], lastDoc: null };\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, []);\r\n\r\n    /**\r\n     * SEARCH SPACECARDS\r\n     * Strategy:\r\n     *  - Query spacecards collection\r\n     *  - Filter by discipline, rarity, forSale, price range\r\n     *  - Sort by createdAt or price\r\n     */\r\n    const searchSpaceCards = useCallback(async (searchTerm, filters = {}, lastDoc = null) => {\r\n        const { tags = [], discipline = '', rarity = '', forSale = null, sort = 'newest' } = filters;\r\n        const term = (searchTerm || '').toLowerCase().trim();\r\n        const words = term.split(/\\s+/).filter(w => w.length > 0);\r\n        const primaryWord = words[0] || term;\r\n\r\n        setLoading(true);\r\n        setError(null);\r\n\r\n        try {\r\n            const spacecardsRef = collection(db, 'spacecards');\r\n            let q;\r\n            let orderByField = 'createdAt';\r\n            let orderDirection = 'desc';\r\n\r\n            if (sort === 'price-low') {\r\n                orderByField = 'price';\r\n                orderDirection = 'asc';\r\n            } else if (sort === 'price-high') {\r\n                orderByField = 'price';\r\n                orderDirection = 'desc';\r\n            }\r\n\r\n            if (tags.length > 0) {\r\n                const primaryTag = tags[0];\r\n                q = query(\r\n                    spacecardsRef,\r\n                    where('tags', 'array-contains', primaryTag),\r\n                    orderBy(orderByField, orderDirection),\r\n                    limit(50)\r\n                );\r\n            } else if (term) {\r\n                q = query(\r\n                    spacecardsRef,\r\n                    where('searchKeywords', 'array-contains', primaryWord),\r\n                    orderBy(orderByField, orderDirection),\r\n                    limit(50)\r\n                );\r\n            } else {\r\n                q = query(\r\n                    spacecardsRef,\r\n                    orderBy(orderByField, orderDirection),\r\n                    limit(50)\r\n                );\r\n            }\r\n\r\n            if (lastDoc) {\r\n                q = query(q, startAfter(lastDoc));\r\n            }\r\n\r\n            const snapshot = await getDocs(q);\r\n            const docs = snapshot.docs.map(d => ({ id: d.id, ...d.data() }));\r\n            const newLastDoc = snapshot.docs.length > 0 ? snapshot.docs[snapshot.docs.length - 1] : null;\r\n\r\n            // Client-side filtering\r\n            let filtered = docs;\r\n\r\n            if (discipline) {\r\n                filtered = filtered.filter(card => card.discipline === discipline);\r\n            }\r\n\r\n            if (rarity) {\r\n                filtered = filtered.filter(card => card.rarity === rarity);\r\n            }\r\n\r\n            if (forSale !== null) {\r\n                filtered = filtered.filter(card => card.forSale === forSale);\r\n            }\r\n\r\n            if (term) {\r\n                filtered = filtered.filter(card => {\r\n                    const searchableText = [\r\n                        card.title,\r\n                        card.description,\r\n                        card.creatorUsername,\r\n                        ...(card.tags || [])\r\n                    ].filter(Boolean).join(' ').toLowerCase();\r\n                    return words.every(w => searchableText.includes(w));\r\n                });\r\n            }\r\n\r\n            return { data: filtered, lastDoc: newLastDoc };\r\n        } catch (err) {\r\n            console.error('SpaceCard search error:', err);\r\n            setError(err);\r\n            return { data: [], lastDoc: null };\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, []);\r\n\r\n    /**\r\n         * SEARCH SHOP ITEMS\r\n         * Strategy:\r\n         * - Query shopItems collection\r\n         * - Filter by status == 'active'\r\n         * - Support keyword/tag search\r\n         */\r\n    const searchShopItems = useCallback(async (searchTerm, filters = {}, lastDoc = null) => {\r\n        const { tags = [], sort = 'newest' } = filters;\r\n        const term = (searchTerm || '').toLowerCase().trim();\r\n        const words = term.split(/\\s+/).filter(w => w.length > 0);\r\n        const primaryWord = words[0] || term;\r\n\r\n        setLoading(true);\r\n        setError(null);\r\n\r\n        try {\r\n            const shopItemsRef = collection(db, 'shopItems');\r\n            let q;\r\n\r\n            // Base query always requires status == 'active'\r\n            const baseConstraints = [where('status', '==', 'active')];\r\n\r\n            if (tags.length > 0) {\r\n                // Filter by tags\r\n                q = query(shopItemsRef, ...baseConstraints, where('tags', 'array-contains', tags[0]), limit(50));\r\n            } else if (term) {\r\n                // Filter by keywords\r\n                q = query(shopItemsRef, ...baseConstraints, where('searchKeywords', 'array-contains', primaryWord), limit(50));\r\n            } else {\r\n                // Recent active items\r\n                q = query(shopItemsRef, ...baseConstraints, orderBy('createdAt', 'desc'), limit(50));\r\n            }\r\n\r\n            if (lastDoc) {\r\n                q = query(q, startAfter(lastDoc));\r\n            }\r\n\r\n            const snapshot = await getDocs(q);\r\n            const docs = snapshot.docs.map(d => ({ id: d.id, ...d.data() }));\r\n            const newLastDoc = snapshot.docs.length > 0 ? snapshot.docs[snapshot.docs.length - 1] : null;\r\n\r\n            // Client-side filtering\r\n            let filtered = docs;\r\n\r\n            if (term) {\r\n                filtered = filtered.filter(item => {\r\n                    const searchableText = [\r\n                        item.title,\r\n                        item.description,\r\n                        ...(item.tags || [])\r\n                    ].filter(Boolean).join(' ').toLowerCase();\r\n                    return words.every(w => searchableText.includes(w));\r\n                });\r\n            }\r\n\r\n            return { data: filtered, lastDoc: newLastDoc };\r\n        } catch (err) {\r\n            console.error('Shop item search error:', err);\r\n            setError(err);\r\n            return { data: [], lastDoc: null };\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, []);\r\n\r\n    return {\r\n        searchUsers,\r\n        searchPosts,\r\n        searchGalleries,\r\n        searchCollections,\r\n        searchContests,\r\n        searchEvents,\r\n        searchSpaceCards,\r\n        searchShopItems, // Export new function\r\n        loading,\r\n        error\r\n    };\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\hooks\\useSpaceCard.js","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'refetch'. Either include it or remove the dependency array.","line":42,"column":8,"nodeType":"ArrayExpression","endLine":42,"endColumn":16,"suggestions":[{"desc":"Update the dependencies array to be: [cardId, refetch]","fix":{"range":[1368,1376],"text":"[cardId, refetch]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\r\nimport { SpaceCardService } from '@/services/SpaceCardService';\r\n\r\n/**\r\n * Hook to fetch a space card and its marketplace listings\r\n * @param {string} cardId - Card ID to fetch\r\n * @returns {object} { card, listings, loading, error, refetch }\r\n */\r\nexport const useSpaceCard = (cardId) => {\r\n    const [card, setCard] = useState(null);\r\n    const [listings, setListings] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n\r\n    const refetch = async () => {\r\n        if (!cardId) {\r\n            setLoading(false);\r\n            return;\r\n        }\r\n\r\n        try {\r\n            setLoading(true);\r\n            setError(null);\r\n\r\n            const cardData = await SpaceCardService.getCard(cardId);\r\n            setCard(cardData);\r\n\r\n            // Fetch marketplace listings for this card\r\n            const marketplace = await SpaceCardService.getMarketplace();\r\n            const cardListings = marketplace.filter(item => item.id === cardId);\r\n            setListings(cardListings);\r\n        } catch (err) {\r\n            console.error('Error fetching card details:', err);\r\n            setError(err.message || 'Failed to load card');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        refetch();\r\n    }, [cardId]);\r\n\r\n    return { card, listings, loading, error, refetch };\r\n};\r\n\r\nexport default useSpaceCard;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\i18n.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\main.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\pages\\AdminCleanup.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { cleanupOrphanedPosts, cleanupOrphanedShopItems, cleanupOrphanedUserImages } from '@/core/utils/cleanupOrphanedPosts';\r\nimport { FaTrash, FaArrowLeft, FaExclamationTriangle, FaUser, FaBug } from 'react-icons/fa';\r\nimport { addDoc, collection, serverTimestamp } from 'firebase/firestore';\r\nimport { db } from '@/firebase';\r\nimport AsyncButton from '@/components/AsyncButton';\r\n\r\nconst AdminCleanup = () => {\r\n    const { currentUser } = useAuth();\r\n    const navigate = useNavigate();\r\n    const [loading, setLoading] = useState(false);\r\n    const [results, setResults] = useState(null);\r\n\r\n    const handleCleanupPosts = async () => {\r\n        if (!window.confirm('ΓÜá∩╕Å This will delete all posts whose images are missing from Storage. This cannot be undone. Continue?')) {\r\n            return;\r\n        }\r\n\r\n        setLoading(true);\r\n        setResults(null);\r\n\r\n        try {\r\n            const result = await cleanupOrphanedPosts();\r\n            setResults({\r\n                type: 'posts',\r\n                ...result\r\n            });\r\n        } catch (error) {\r\n            console.error('Cleanup error:', error);\r\n            alert('Error during cleanup: ' + error.message);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleCleanupShop = async () => {\r\n        if (!window.confirm('ΓÜá∩╕Å This will delete all shop items whose images are missing from Storage. This cannot be undone. Continue?')) {\r\n            return;\r\n        }\r\n\r\n        setLoading(true);\r\n        setResults(null);\r\n\r\n        try {\r\n            const result = await cleanupOrphanedShopItems();\r\n            setResults({\r\n                type: 'shop',\r\n                ...result\r\n            });\r\n        } catch (error) {\r\n            console.error('Cleanup error:', error);\r\n            alert('Error during cleanup: ' + error.message);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleCleanupUsers = async () => {\r\n        if (!window.confirm('ΓÜá∩╕Å This will remove profile photos for users whose images are missing from Storage. This cannot be undone. Continue?')) {\r\n            return;\r\n        }\r\n\r\n        setLoading(true);\r\n        setResults(null);\r\n\r\n        try {\r\n            const result = await cleanupOrphanedUserImages();\r\n            setResults({\r\n                type: 'users',\r\n                ...result\r\n            });\r\n        } catch (error) {\r\n            console.error('Cleanup error:', error);\r\n            alert('Error during cleanup: ' + error.message);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleCreateBrokenPost = async () => {\r\n        try {\r\n            setLoading(true);\r\n            // Create a post with a URL that looks like a Firebase Storage URL but doesn't exist\r\n            const fakeUrl = \"https://firebasestorage.googleapis.com/v0/b/panospace-app.appspot.com/o/posts%2Fthis-does-not-exist.jpg?alt=media&token=fake-token\";\r\n\r\n            await addDoc(collection(db, 'posts'), {\r\n                imageUrl: fakeUrl,\r\n                images: [{ url: fakeUrl, type: 'image' }],\r\n                title: \"Broken Post Test\",\r\n                description: \"This is a broken post for testing cleanup.\",\r\n                userId: currentUser.uid,\r\n                authorId: currentUser.uid,\r\n                username: currentUser.displayName || 'Test User',\r\n                profileImage: currentUser.photoURL || '',\r\n                createdAt: serverTimestamp(),\r\n                likeCount: 0,\r\n                commentCount: 0,\r\n                tags: ['test', 'broken']\r\n            });\r\n\r\n            alert(\"Broken post created! Go to the feed to see it.\");\r\n        } catch (error) {\r\n            console.error(\"Error creating broken post:\", error);\r\n            alert(\"Failed to create broken post: \" + error.message);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    if (!currentUser) {\r\n        return (\r\n            <div style={{ minHeight: '100vh', background: '#000', color: '#fff', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\r\n                <div>Please log in to access admin tools.</div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div style={{ minHeight: '100vh', background: '#000', color: '#fff', padding: '2rem' }}>\r\n            <button\r\n                onClick={() => navigate(-1)}\r\n                style={{\r\n                    background: 'transparent',\r\n                    border: '1px solid #333',\r\n                    color: '#fff',\r\n                    padding: '0.5rem 1rem',\r\n                    borderRadius: '8px',\r\n                    cursor: 'pointer',\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    gap: '0.5rem',\r\n                    marginBottom: '2rem'\r\n                }}\r\n            >\r\n                <FaArrowLeft /> Back\r\n            </button>\r\n\r\n            <h1 style={{ fontSize: '2rem', marginBottom: '1rem' }}>≡ƒ¢á∩╕Å Admin Cleanup Tools</h1>\r\n            <p style={{ color: '#888', marginBottom: '2rem' }}>\r\n                Use these tools to clean up orphaned database entries when storage files have been deleted.\r\n            </p>\r\n\r\n            <div style={{ maxWidth: '800px', display: 'flex', flexDirection: 'column', gap: '1.5rem' }}>\r\n                {/* Posts Cleanup */}\r\n                <div style={{\r\n                    background: '#111',\r\n                    border: '1px solid #333',\r\n                    borderRadius: '12px',\r\n                    padding: '1.5rem'\r\n                }}>\r\n                    <h2 style={{ fontSize: '1.3rem', marginBottom: '0.5rem', display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                        <FaTrash color=\"#ff6b6b\" /> Clean Up Orphaned Posts\r\n                    </h2>\r\n                    <p style={{ color: '#888', marginBottom: '1rem', fontSize: '0.9rem' }}>\r\n                        Deletes all post documents whose images no longer exist in Firebase Storage.\r\n                    </p>\r\n                    <div style={{\r\n                        background: 'rgba(255, 107, 107, 0.1)',\r\n                        border: '1px solid rgba(255, 107, 107, 0.3)',\r\n                        borderRadius: '8px',\r\n                        padding: '1rem',\r\n                        marginBottom: '1rem',\r\n                        display: 'flex',\r\n                        gap: '0.5rem'\r\n                    }}>\r\n                        <FaExclamationTriangle color=\"#ff6b6b\" style={{ flexShrink: 0, marginTop: '2px' }} />\r\n                        <div style={{ fontSize: '0.85rem', color: '#ffb3b3' }}>\r\n                            <strong>Warning:</strong> This action cannot be undone. Make sure you've backed up any important data.\r\n                        </div>\r\n                    </div>\r\n                    <AsyncButton\r\n                        onClick={handleCleanupPosts}\r\n                        loading={loading}\r\n                        loadingText=\"Cleaning up...\"\r\n                        style={{ background: '#ff6b6b', color: '#fff' }}\r\n                    >\r\n                        Run Posts Cleanup\r\n                    </AsyncButton>\r\n                </div>\r\n\r\n                {/* Shop Items Cleanup */}\r\n                <div style={{\r\n                    background: '#111',\r\n                    border: '1px solid #333',\r\n                    borderRadius: '12px',\r\n                    padding: '1.5rem'\r\n                }}>\r\n                    <h2 style={{ fontSize: '1.3rem', marginBottom: '0.5rem', display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                        <FaTrash color=\"#ffa94d\" /> Clean Up Orphaned Shop Items\r\n                    </h2>\r\n                    <p style={{ color: '#888', marginBottom: '1rem', fontSize: '0.9rem' }}>\r\n                        Deletes all shop item documents whose images no longer exist in Firebase Storage.\r\n                    </p>\r\n                    <AsyncButton\r\n                        onClick={handleCleanupShop}\r\n                        loading={loading}\r\n                        loadingText=\"Cleaning up...\"\r\n                        style={{ background: '#ffa94d', color: '#000' }}\r\n                    >\r\n                        Run Shop Cleanup\r\n                    </AsyncButton>\r\n                </div>\r\n\r\n                {/* Users Cleanup */}\r\n                <div style={{\r\n                    background: '#111',\r\n                    border: '1px solid #333',\r\n                    borderRadius: '12px',\r\n                    padding: '1.5rem'\r\n                }}>\r\n                    <h2 style={{ fontSize: '1.3rem', marginBottom: '0.5rem', display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                        <FaUser color=\"#4dabf7\" /> Clean Up Orphaned User Photos\r\n                    </h2>\r\n                    <p style={{ color: '#888', marginBottom: '1rem', fontSize: '0.9rem' }}>\r\n                        Removes profile photo references for users whose images no longer exist in Firebase Storage.\r\n                    </p>\r\n                    <AsyncButton\r\n                        onClick={handleCleanupUsers}\r\n                        loading={loading}\r\n                        loadingText=\"Cleaning up...\"\r\n                        style={{ background: '#4dabf7', color: '#fff' }}\r\n                    >\r\n                        Run User Cleanup\r\n                    </AsyncButton>\r\n                </div>\r\n\r\n                {/* Results */}\r\n                {results && (\r\n                    <div style={{\r\n                        background: '#0a3d2e',\r\n                        border: '1px solid #7FFFD4',\r\n                        borderRadius: '12px',\r\n                        padding: '1.5rem'\r\n                    }}>\r\n                        <h3 style={{ fontSize: '1.2rem', marginBottom: '1rem', color: '#7FFFD4' }}>\r\n                            Γ£à Cleanup Complete\r\n                        </h3>\r\n                        <div style={{ display: 'flex', flexDirection: 'column', gap: '0.5rem', fontSize: '0.9rem' }}>\r\n                            <div>\r\n                                <strong>Type:</strong> {results.type === 'posts' ? 'Posts' : results.type === 'shop' ? 'Shop Items' : 'Users'}\r\n                            </div>\r\n                            <div>\r\n                                <strong>Items Checked:</strong> {results.checked}\r\n                            </div>\r\n                            <div>\r\n                                <strong>Items Deleted/Updated:</strong> {results.deleted || results.updated}\r\n                            </div>\r\n                            {results.errors && results.errors.length > 0 && (\r\n                                <div style={{ marginTop: '0.5rem' }}>\r\n                                    <strong style={{ color: '#ff6b6b' }}>Errors:</strong> {results.errors.length}\r\n                                    <div style={{ marginTop: '0.5rem', fontSize: '0.8rem', color: '#ffb3b3' }}>\r\n                                        Check browser console for details\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Debug Tools */}\r\n                <div style={{ marginTop: '2rem', borderTop: '1px solid #333', paddingTop: '2rem' }}>\r\n                    <h3 style={{ fontSize: '1rem', color: '#666', marginBottom: '1rem' }}>Debug Tools</h3>\r\n                    <button\r\n                        onClick={handleCreateBrokenPost}\r\n                        disabled={loading}\r\n                        style={{\r\n                            background: '#333',\r\n                            color: '#aaa',\r\n                            border: '1px dashed #666',\r\n                            padding: '0.5rem 1rem',\r\n                            borderRadius: '8px',\r\n                            cursor: 'pointer',\r\n                            fontSize: '0.8rem',\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            gap: '0.5rem'\r\n                        }}\r\n                    >\r\n                        <FaBug /> Create Broken Post (Test)\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AdminCleanup;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\pages\\AdminModeration.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'getDoc' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":74,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":80},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'report' is defined but never used. Allowed unused args must match /^_/u.","line":76,"column":34,"nodeType":"Identifier","messageId":"unusedVar","endLine":76,"endColumn":40}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { collection, query, orderBy, getDocs, doc, updateDoc, deleteDoc, getDoc } from 'firebase/firestore';\r\nimport { db } from '@/firebase';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { FaCheck, FaTrash, FaBan, FaExclamationTriangle } from 'react-icons/fa';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst AdminModeration = () => {\r\n    const { currentUser } = useAuth();\r\n    const [reports, setReports] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const navigate = useNavigate();\r\n\r\n    // Basic security check (replace with real admin check later)\r\n    // For now, just checking if user is logged in. In prod, check claims or specific UIDs.\r\n    useEffect(() => {\r\n        if (!currentUser) {\r\n            navigate('/login');\r\n        }\r\n    }, [currentUser, navigate]);\r\n\r\n    const fetchReports = async () => {\r\n        setLoading(true);\r\n        try {\r\n            const q = query(collection(db, 'reports'), orderBy('createdAt', 'desc'));\r\n            const snapshot = await getDocs(q);\r\n            const reportsData = snapshot.docs.map(doc => ({\r\n                id: doc.id,\r\n                ...doc.data()\r\n            }));\r\n            setReports(reportsData);\r\n        } catch (error) {\r\n            console.error('Error fetching reports:', error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchReports();\r\n    }, []);\r\n\r\n    const handleDismiss = async (reportId) => {\r\n        if (!window.confirm('Dismiss this report?')) return;\r\n        try {\r\n            await updateDoc(doc(db, 'reports', reportId), {\r\n                status: 'dismissed'\r\n            });\r\n            // Refresh local state\r\n            setReports(prev => prev.map(r => r.id === reportId ? { ...r, status: 'dismissed' } : r));\r\n        } catch (error) {\r\n            console.error('Error dismissing report:', error);\r\n            alert('Failed to dismiss report');\r\n        }\r\n    };\r\n\r\n    const handleDeleteContent = async (report) => {\r\n        if (!window.confirm('Are you sure you want to DELETE the reported content? This cannot be undone.')) return;\r\n        try {\r\n            if (report.type === 'post') {\r\n                await deleteDoc(doc(db, 'posts', report.targetId));\r\n            }\r\n            // Mark report as resolved\r\n            await updateDoc(doc(db, 'reports', report.id), {\r\n                status: 'resolved',\r\n                resolution: 'content_deleted'\r\n            });\r\n            setReports(prev => prev.map(r => r.id === report.id ? { ...r, status: 'resolved' } : r));\r\n            alert('Content deleted');\r\n        } catch (error) {\r\n            console.error('Error deleting content:', error);\r\n            alert('Failed to delete content');\r\n        }\r\n    };\r\n\r\n    const handleBanUser = async (report) => {\r\n        if (!window.confirm('Are you sure you want to BAN the reported user?')) return;\r\n        // This would require a backend function to disable auth, but we can mark them as banned in Firestore\r\n        alert('Ban functionality requires backend admin SDK. Marking report as resolved for now.');\r\n    };\r\n\r\n    if (loading) return <div style={{ padding: '2rem', color: '#fff', textAlign: 'center' }}>Loading reports...</div>;\r\n\r\n    return (\r\n        <div style={{ padding: '2rem', maxWidth: '1200px', margin: '0 auto', color: '#fff', paddingBottom: '80px' }}>\r\n            <h1 style={{ marginBottom: '2rem', borderBottom: '1px solid #333', paddingBottom: '1rem' }}>\r\n                <FaExclamationTriangle style={{ color: '#ff6b6b', marginRight: '0.5rem' }} />\r\n                Moderation Queue\r\n            </h1>\r\n\r\n            {reports.length === 0 ? (\r\n                <div style={{ textAlign: 'center', color: '#888', marginTop: '4rem' }}>No reports found. Good job!</div>\r\n            ) : (\r\n                <div style={{ display: 'grid', gap: '1rem' }}>\r\n                    {reports.map(report => (\r\n                        <div key={report.id} style={{\r\n                            background: '#1a1a1a',\r\n                            border: '1px solid #333',\r\n                            borderRadius: '8px',\r\n                            padding: '1.5rem',\r\n                            display: 'flex',\r\n                            flexDirection: 'column',\r\n                            gap: '1rem',\r\n                            opacity: report.status === 'dismissed' || report.status === 'resolved' ? 0.5 : 1\r\n                        }}>\r\n                            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start' }}>\r\n                                <div>\r\n                                    <div style={{ display: 'flex', gap: '0.5rem', alignItems: 'center', marginBottom: '0.5rem' }}>\r\n                                        <span style={{\r\n                                            background: report.type === 'post' ? '#4a90e2' : '#e24a4a',\r\n                                            padding: '0.2rem 0.5rem',\r\n                                            borderRadius: '4px',\r\n                                            fontSize: '0.8rem',\r\n                                            fontWeight: 'bold'\r\n                                        }}>\r\n                                            {report.type.toUpperCase()}\r\n                                        </span>\r\n                                        <span style={{ color: '#aaa', fontSize: '0.9rem' }}>\r\n                                            {new Date(report.createdAt?.toDate()).toLocaleString()}\r\n                                        </span>\r\n                                        <span style={{\r\n                                            background: report.status === 'pending' ? '#ff6b6b' : '#444',\r\n                                            padding: '0.2rem 0.5rem',\r\n                                            borderRadius: '4px',\r\n                                            fontSize: '0.8rem'\r\n                                        }}>\r\n                                            {report.status?.toUpperCase() || 'PENDING'}\r\n                                        </span>\r\n                                    </div>\r\n                                    <h3 style={{ margin: 0, color: '#fff' }}>Reason: {report.reason}</h3>\r\n                                    {report.description && (\r\n                                        <p style={{ color: '#ccc', marginTop: '0.5rem', fontStyle: 'italic' }}>\r\n                                            \"{report.description}\"\r\n                                        </p>\r\n                                    )}\r\n                                    <div style={{ marginTop: '0.5rem', fontSize: '0.9rem', color: '#888' }}>\r\n                                        Target ID: {report.targetId} | Reported By: {report.reportedBy}\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div style={{ display: 'flex', gap: '0.5rem' }}>\r\n                                    {report.status !== 'dismissed' && report.status !== 'resolved' && (\r\n                                        <>\r\n                                            <button\r\n                                                onClick={() => handleDismiss(report.id)}\r\n                                                style={{\r\n                                                    background: '#333',\r\n                                                    border: 'none',\r\n                                                    color: '#fff',\r\n                                                    padding: '0.5rem 1rem',\r\n                                                    borderRadius: '4px',\r\n                                                    cursor: 'pointer',\r\n                                                    display: 'flex',\r\n                                                    alignItems: 'center',\r\n                                                    gap: '0.5rem'\r\n                                                }}\r\n                                            >\r\n                                                <FaCheck /> Dismiss\r\n                                            </button>\r\n                                            {report.type === 'post' && (\r\n                                                <button\r\n                                                    onClick={() => handleDeleteContent(report)}\r\n                                                    style={{\r\n                                                        background: 'rgba(200, 0, 0, 0.2)',\r\n                                                        border: '1px solid #ff6b6b',\r\n                                                        color: '#ff6b6b',\r\n                                                        padding: '0.5rem 1rem',\r\n                                                        borderRadius: '4px',\r\n                                                        cursor: 'pointer',\r\n                                                        display: 'flex',\r\n                                                        alignItems: 'center',\r\n                                                        gap: '0.5rem'\r\n                                                    }}\r\n                                                >\r\n                                                    <FaTrash /> Delete Content\r\n                                                </button>\r\n                                            )}\r\n                                            {report.type === 'user' && (\r\n                                                <button\r\n                                                    onClick={() => handleBanUser(report)}\r\n                                                    style={{\r\n                                                        background: 'rgba(200, 0, 0, 0.2)',\r\n                                                        border: '1px solid #ff6b6b',\r\n                                                        color: '#ff6b6b',\r\n                                                        padding: '0.5rem 1rem',\r\n                                                        borderRadius: '4px',\r\n                                                        cursor: 'pointer',\r\n                                                        display: 'flex',\r\n                                                        alignItems: 'center',\r\n                                                        gap: '0.5rem'\r\n                                                    }}\r\n                                                >\r\n                                                    <FaBan /> Ban User\r\n                                                </button>\r\n                                            )}\r\n                                        </>\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AdminModeration;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\pages\\AestheticGallery.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'orderBy' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":36,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":43},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'limit' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":45,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":50}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { collection, query, where, orderBy, limit, getDocs } from 'firebase/firestore';\r\nimport { db } from '@/firebase';\r\nimport { FaArrowLeft } from 'react-icons/fa';\r\nimport InfiniteGrid from '@/components/InfiniteGrid';\r\n\r\nconst AestheticStudio = () => {\r\n    const { type, tag } = useParams();\r\n    const navigate = useNavigate();\r\n    const [posts, setPosts] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        const fetchPosts = async () => {\r\n            setLoading(true);\r\n            try {\r\n                // Map URL type to Firestore field\r\n                let fieldName = 'tags'; // Default\r\n                if (type === 'color') fieldName = 'colorTags';\r\n                if (type === 'mood') fieldName = 'moodTags';\r\n                if (type === 'season') fieldName = 'seasonalTags';\r\n                if (type === 'time') fieldName = 'timeOfDayTags';\r\n\r\n\r\n                const q = query(\r\n                    collection(db, 'posts'),\r\n                    where(fieldName, 'array-contains', tag)\r\n                    // orderBy('createdAt', 'desc'),\r\n                    // limit(50)\r\n                );\r\n\r\n                const snapshot = await getDocs(q);\r\n\r\n                const fetchedPosts = snapshot.docs.map(doc => ({\r\n                    id: doc.id,\r\n                    ...doc.data()\r\n                }));\r\n                setPosts(fetchedPosts);\r\n            } catch (error) {\r\n                console.error(\"Error fetching aesthetic studio:\", error);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        if (tag) {\r\n            fetchPosts();\r\n        }\r\n    }, [type, tag]);\r\n\r\n    // Format title\r\n    const formatTitle = () => {\r\n        if (!tag) return 'Studio';\r\n        return `${tag} ${type === 'time' ? '' : 'Aesthetic'}`;\r\n    };\r\n\r\n    return (\r\n        <div className=\"aesthetic-studio-page\">\r\n            <div className=\"studio-header\">\r\n                <button onClick={() => navigate(-1)} className=\"back-btn\">\r\n                    <FaArrowLeft />\r\n                </button>\r\n                <h1>{formatTitle()}</h1>\r\n            </div>\r\n\r\n            <div className=\"studio-content\">\r\n                {loading ? (\r\n                    <div className=\"loading-state\">Loading...</div>\r\n                ) : posts.length === 0 ? (\r\n                    <div className=\"empty-state\">\r\n                        <p>No posts found for this aesthetic yet.</p>\r\n                        <p>Be the first to post in <strong>{tag}</strong>!</p>\r\n                    </div>\r\n                ) : (\r\n                    <InfiniteGrid\r\n                        items={posts}\r\n                        columns={{ mobile: 3, tablet: 3, desktop: 4 }}\r\n                        gap=\"4px\"\r\n                        renderItem={(post) => (\r\n                            <div\r\n                                key={post.id}\r\n                                className=\"post-thumbnail\"\r\n                                onClick={() => navigate(`/post/${post.id}`)}\r\n                                style={{ width: '100%', height: '100%' }}\r\n                            >\r\n                                <img src={post.images[0]?.url} alt={post.title} loading=\"lazy\" style={{ width: '100%', height: '100%', objectFit: 'cover' }} />\r\n                            </div>\r\n                        )}\r\n                    />\r\n                )}\r\n            </div>\r\n\r\n            <style>{`\r\n                .aesthetic-studio-page {\r\n                    min-height: 100vh;\r\n                    background: #000;\r\n                    color: #fff;\r\n                    padding-bottom: 80px;\r\n                }\r\n                .studio-header {\r\n                    padding: 1rem 2rem;\r\n                    display: flex;\r\n                    align-items: center;\r\n                    gap: 1rem;\r\n                    position: sticky;\r\n                    top: 0;\r\n                    background: rgba(0,0,0,0.9);\r\n                    z-index: 10;\r\n                    border-bottom: 1px solid #333;\r\n                }\r\n                .studio-header h1 {\r\n                    font-size: 1.5rem;\r\n                    font-weight: 700;\r\n                    text-transform: capitalize;\r\n                    margin: 0;\r\n                    background: linear-gradient(45deg, #fff, #ccc);\r\n                    -webkit-background-clip: text;\r\n                    -webkit-text-fill-color: transparent;\r\n                }\r\n                .back-btn {\r\n                    background: transparent;\r\n                    border: none;\r\n                    color: #fff;\r\n                    font-size: 1.2rem;\r\n                    cursor: pointer;\r\n                    padding: 0.5rem;\r\n                    display: flex;\r\n                    align-items: center;\r\n                    justify-content: center;\r\n                }\r\n                .studio-content {\r\n                    padding: 1rem;\r\n                    max-width: 1200px;\r\n                    margin: 0 auto;\r\n                }\r\n                .posts-grid {\r\n                    display: grid;\r\n                    grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));\r\n                    gap: 4px;\r\n                }\r\n                .post-thumbnail {\r\n                    aspect-ratio: 1;\r\n                    background: #111;\r\n                    cursor: pointer;\r\n                    overflow: hidden;\r\n                }\r\n                .post-thumbnail img {\r\n                    width: 100%;\r\n                    height: 100%;\r\n                    object-fit: cover;\r\n                    transition: transform 0.3s ease;\r\n                }\r\n                .post-thumbnail:hover img {\r\n                    transform: scale(1.05);\r\n                }\r\n                .loading-state, .empty-state {\r\n                    padding: 4rem;\r\n                    text-align: center;\r\n                    color: #888;\r\n                }\r\n                \r\n                @media (min-width: 768px) {\r\n                    .posts-grid {\r\n                        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));\r\n                        gap: 1rem;\r\n                    }\r\n                }\r\n            `}</style>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AestheticStudio;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\pages\\Calendar.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaMoon' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":80,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":86},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'currentUser' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":11,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'refetchAll' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":32,"column":62,"nodeType":"Identifier","messageId":"unusedVar","endLine":32,"endColumn":72},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'loading' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":39,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":39,"endColumn":18}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useMemo } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { useEvents, useFollowingEvents } from '@/hooks/useEvents';\r\n\r\nimport { FaPlus, FaChevronLeft, FaChevronRight, FaCalendar, FaUsers, FaSearch, FaMoon } from 'react-icons/fa';\r\nimport { formatDateForInput } from '@/core/utils/dates';\r\nimport { generateCalendarDays } from '@/core/utils/dates';\r\n\r\nconst Calendar = () => {\r\n    const { currentUser } = useAuth();\r\n    const navigate = useNavigate();\r\n    const [currentDate, setCurrentDate] = useState(new Date());\r\n    const [selectedDate, setSelectedDate] = useState(null);\r\n\r\n    const [viewMode, setViewMode] = useState('all'); // 'all' or 'following'\r\n\r\n    // Calculate month boundaries\r\n    const monthStart = useMemo(() => {\r\n        const date = new Date(currentDate.getFullYear(), currentDate.getMonth(), 1);\r\n        date.setHours(0, 0, 0, 0);\r\n        return date;\r\n    }, [currentDate]);\r\n\r\n    const monthEnd = useMemo(() => {\r\n        const date = new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 0);\r\n        date.setHours(23, 59, 59, 999);\r\n        return date;\r\n    }, [currentDate]);\r\n\r\n    // Fetch events\r\n    const { events: allEvents, loading: loadingAll, refetch: refetchAll } = useEvents(monthStart, monthEnd);\r\n\r\n    // For following view - would need to get following list from user profile\r\n    // For now, just show empty array\r\n    const { events: followingEvents, loading: loadingFollowing } = useFollowingEvents([], monthStart, monthEnd);\r\n\r\n    const events = viewMode === 'all' ? allEvents : followingEvents;\r\n    const loading = viewMode === 'all' ? loadingAll : loadingFollowing;\r\n\r\n    // Generate calendar days\r\n    const calendarDays = useMemo(() => generateCalendarDays(currentDate), [currentDate]);\r\n\r\n    // Get events for a specific day\r\n    const getEventsForDay = (date) => {\r\n        return events.filter(event => {\r\n            // Handle various date formats (Timestamp, String, Date object)\r\n            let raw = event.dateUTC || event.date || event.eventDate;\r\n            let d = null;\r\n            if (raw && raw.toDate) d = raw.toDate();\r\n            else if (raw) d = new Date(raw);\r\n\r\n            if (!d) return false;\r\n\r\n            // Strict UTC comparison as requested\r\n            // But 'date' argument is local from Calendar grid.\r\n            // We must compare the YYYY-MM-DD components.\r\n            return d.getFullYear() === date.getFullYear() &&\r\n                d.getMonth() === date.getMonth() &&\r\n                d.getDate() === date.getDate();\r\n        });\r\n    };\r\n\r\n    const handlePrevMonth = () => {\r\n        setCurrentDate(new Date(currentDate.getFullYear(), currentDate.getMonth() - 1, 1));\r\n    };\r\n\r\n    const handleNextMonth = () => {\r\n        setCurrentDate(new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 1));\r\n    };\r\n\r\n    const handleToday = () => {\r\n        setCurrentDate(new Date());\r\n    };\r\n\r\n    const handleDayClick = (date) => {\r\n        setSelectedDate(date);\r\n    };\r\n\r\n\r\n\r\n    const selectedDayEvents = selectedDate ? getEventsForDay(selectedDate) : [];\r\n\r\n    return (\r\n        <div style={{ minHeight: '100vh', background: '#000', color: '#fff', paddingBottom: '6rem', position: 'relative', overflow: 'hidden' }}>\r\n            {/* Animated Stars Background */}\r\n            <div style={{\r\n                position: 'absolute',\r\n                top: 0,\r\n                left: 0,\r\n                right: 0,\r\n                bottom: 0,\r\n                pointerEvents: 'none',\r\n                zIndex: 0\r\n            }}>\r\n                {[...Array(50)].map((_, i) => {\r\n                    const starColor = '#7FFFD4'; // Default to PanoSpace green for calendar\r\n                    return (\r\n                        <div\r\n                            key={i}\r\n                            style={{\r\n                                position: 'absolute',\r\n                                width: Math.random() * 2 + 1 + 'px',\r\n                                height: Math.random() * 2 + 1 + 'px',\r\n                                background: starColor,\r\n                                borderRadius: '50%',\r\n                                top: Math.random() * 100 + '%',\r\n                                left: Math.random() * 100 + '%',\r\n                                opacity: Math.random() * 0.5 + 0.3,\r\n                                animation: `twinkle ${Math.random() * 3 + 2}s ease-in-out infinite`,\r\n                                animationDelay: `${Math.random() * 2}s`,\r\n                                boxShadow: `0 0 ${Math.random() * 3 + 2}px ${starColor}`\r\n                            }}\r\n                        />\r\n                    );\r\n                })}\r\n            </div>\r\n\r\n            {/* Content Wrapper to ensure it sits above stars */}\r\n            <div style={{ position: 'relative', zIndex: 1 }}>\r\n                {/* Header */}\r\n                <div style={{\r\n                    padding: '1rem 2rem',\r\n                    borderBottom: '1px solid #333',\r\n                    position: 'sticky',\r\n                    top: 0,\r\n                    background: '#000',\r\n                    zIndex: 100\r\n                }}>\r\n                    <div style={{ maxWidth: '1400px', margin: '0 auto' }}>\r\n                        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '1rem' }}>\r\n                            <h1 style={{ fontSize: '1.5rem', fontWeight: 'bold', margin: 0 }}>\r\n                                <FaCalendar style={{ marginRight: '0.5rem', verticalAlign: 'middle' }} />\r\n                                Community Calendar\r\n                            </h1>\r\n                            <button\r\n                                onClick={() => navigate('/event/create')}\r\n                                style={{\r\n                                    background: '#7FFFD4',\r\n                                    color: '#000',\r\n                                    border: 'none',\r\n                                    padding: '0.75rem 1.5rem',\r\n                                    borderRadius: '20px',\r\n                                    fontWeight: 'bold',\r\n                                    cursor: 'pointer',\r\n                                    display: 'flex',\r\n                                    alignItems: 'center',\r\n                                    gap: '0.5rem'\r\n                                }}\r\n                            >\r\n                                <FaPlus /> Create Event\r\n                            </button>\r\n\r\n                        </div>\r\n\r\n                        {/* View Toggle */}\r\n                        <div style={{ display: 'flex', gap: '0.5rem' }}>\r\n                            <button\r\n                                onClick={() => setViewMode('all')}\r\n                                style={{\r\n                                    padding: '0.5rem 1rem',\r\n                                    background: viewMode === 'all' ? 'rgba(127, 255, 212, 0.2)' : 'transparent',\r\n                                    border: viewMode === 'all' ? '1px solid #7FFFD4' : '1px solid #333',\r\n                                    borderRadius: '20px',\r\n                                    color: viewMode === 'all' ? '#7FFFD4' : '#888',\r\n                                    cursor: 'pointer',\r\n                                    fontWeight: '600'\r\n                                }}\r\n                            >\r\n                                <FaCalendar style={{ marginRight: '0.5rem' }} />\r\n                                All Events\r\n                            </button>\r\n                            <button\r\n                                onClick={() => setViewMode('following')}\r\n                                style={{\r\n                                    padding: '0.5rem 1rem',\r\n                                    background: viewMode === 'following' ? 'rgba(127, 255, 212, 0.2)' : 'transparent',\r\n                                    border: viewMode === 'following' ? '1px solid #7FFFD4' : '1px solid #333',\r\n                                    borderRadius: '20px',\r\n                                    color: viewMode === 'following' ? '#7FFFD4' : '#888',\r\n                                    cursor: 'pointer',\r\n                                    fontWeight: '600'\r\n                                }}\r\n                            >\r\n                                <FaUsers style={{ marginRight: '0.5rem' }} />\r\n                                Following\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div style={{ maxWidth: '1400px', margin: '0 auto', padding: '2rem' }}>\r\n                    <div style={{ display: 'grid', gridTemplateColumns: selectedDate ? '2fr 1fr' : '1fr', gap: '2rem' }}>\r\n                        {/* Calendar Grid */}\r\n                        <div>\r\n                            {/* Month Navigation */}\r\n                            <div style={{\r\n                                display: 'flex',\r\n                                justifyContent: 'space-between',\r\n                                alignItems: 'center',\r\n                                marginBottom: '1.5rem'\r\n                            }}>\r\n                                <button\r\n                                    onClick={handlePrevMonth}\r\n                                    style={{\r\n                                        background: '#222',\r\n                                        border: '1px solid #333',\r\n                                        borderRadius: '8px',\r\n                                        padding: '0.5rem 1rem',\r\n                                        color: '#fff',\r\n                                        cursor: 'pointer'\r\n                                    }}\r\n                                >\r\n                                    <FaChevronLeft />\r\n                                </button>\r\n\r\n                                <div style={{ display: 'flex', alignItems: 'center', gap: '1rem' }}>\r\n                                    <h2 style={{ fontSize: '1.5rem', fontWeight: 'bold', margin: 0 }}>\r\n                                        {currentDate.toLocaleDateString('en-US', { month: 'long', year: 'numeric' })}\r\n                                    </h2>\r\n                                    <button\r\n                                        onClick={handleToday}\r\n                                        style={{\r\n                                            background: '#222',\r\n                                            border: '1px solid #333',\r\n                                            borderRadius: '8px',\r\n                                            padding: '0.5rem 1rem',\r\n                                            color: '#7FFFD4',\r\n                                            cursor: 'pointer',\r\n                                            fontSize: '0.9rem'\r\n                                        }}\r\n                                    >\r\n                                        Today\r\n                                    </button>\r\n                                </div>\r\n\r\n                                <button\r\n                                    onClick={handleNextMonth}\r\n                                    style={{\r\n                                        background: '#222',\r\n                                        border: '1px solid #333',\r\n                                        borderRadius: '8px',\r\n                                        padding: '0.5rem 1rem',\r\n                                        color: '#fff',\r\n                                        cursor: 'pointer'\r\n                                    }}\r\n                                >\r\n                                    <FaChevronRight />\r\n                                </button>\r\n                            </div>\r\n\r\n                            {/* Weekday Headers */}\r\n                            <div style={{\r\n                                display: 'grid',\r\n                                gridTemplateColumns: 'repeat(7, 1fr)',\r\n                                gap: '0.5rem',\r\n                                marginBottom: '0.5rem'\r\n                            }}>\r\n                                {['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'].map(day => (\r\n                                    <div key={day} style={{\r\n                                        textAlign: 'center',\r\n                                        color: '#888',\r\n                                        fontWeight: '600',\r\n                                        fontSize: '0.9rem',\r\n                                        padding: '0.5rem'\r\n                                    }}>\r\n                                        {day}\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n\r\n                            {/* Calendar Days */}\r\n                            <div style={{\r\n                                display: 'grid',\r\n                                gridTemplateColumns: 'repeat(7, 1fr)',\r\n                                gap: '0.5rem'\r\n                            }}>\r\n                                {calendarDays.map((day, index) => {\r\n                                    const dayEvents = getEventsForDay(day.date);\r\n                                    const isToday = day.date.toDateString() === new Date().toDateString();\r\n                                    const isSelected = selectedDate && day.date.toDateString() === selectedDate.toDateString();\r\n\r\n                                    return (\r\n                                        <div\r\n                                            key={index}\r\n                                            onClick={() => handleDayClick(day.date)}\r\n                                            style={{\r\n                                                background: isSelected ? 'rgba(127, 255, 212, 0.2)' : '#111',\r\n                                                border: isToday ? '2px solid #7FFFD4' : '1px solid #333',\r\n                                                borderRadius: '8px',\r\n                                                padding: '0.75rem',\r\n                                                minHeight: '100px',\r\n                                                cursor: 'pointer',\r\n                                                opacity: day.isCurrentMonth ? 1 : 0.5,\r\n                                                transition: 'all 0.2s'\r\n                                            }}\r\n                                            onMouseEnter={(e) => {\r\n                                                if (!isSelected) {\r\n                                                    e.currentTarget.style.background = '#1a1a1a';\r\n                                                }\r\n                                            }}\r\n                                            onMouseLeave={(e) => {\r\n                                                if (!isSelected) {\r\n                                                    e.currentTarget.style.background = '#111';\r\n                                                }\r\n                                            }}\r\n                                        >\r\n                                            <div style={{\r\n                                                fontWeight: 'bold',\r\n                                                marginBottom: '0.5rem',\r\n                                                color: isToday ? '#7FFFD4' : '#fff'\r\n                                            }}>\r\n                                                {day.date.getDate()}\r\n                                            </div>\r\n                                            {dayEvents.length > 0 && (\r\n                                                <div style={{ fontSize: '0.75rem', color: '#7FFFD4', display: 'flex', gap: '4px', flexWrap: 'wrap', marginTop: '4px' }}>\r\n                                                    {dayEvents.map((evt, evtIndex) => {\r\n                                                        // Icon Logic\r\n                                                        let icon = \"≡ƒô╕\"; // Default\r\n                                                        const name = (evt.title || evt.name || \"\").toLowerCase();\r\n                                                        const type = (evt.type || \"\").toLowerCase();\r\n\r\n                                                        if (name.includes('full moon')) icon = \"≡ƒîò\";\r\n                                                        else if (name.includes('lunar eclipse')) icon = \"≡ƒîÿ\";\r\n                                                        else if (name.includes('solar eclipse')) icon = \"≡ƒîæ\";\r\n                                                        else if (name.includes('meteor')) icon = \"Γ£¿\";\r\n                                                        else if (name.includes('solstice') || name.includes('equinox')) icon = \"≡ƒìé\";\r\n                                                        else if (type.includes('holiday')) icon = \"≡ƒÄë\";\r\n                                                        else if (evt.icon) icon = evt.icon;\r\n\r\n                                                        return (\r\n                                                            <span key={evt.id || evtIndex} title={evt.title || evt.name} style={{ fontSize: '14px' }}>\r\n                                                                {icon}\r\n                                                            </span>\r\n                                                        );\r\n                                                    })}\r\n                                                </div>\r\n                                            )}\r\n                                        </div>\r\n                                    );\r\n                                })}\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Selected Day Events */}\r\n                        {selectedDate && (\r\n                            <div>\r\n                                <div style={{\r\n                                    background: '#111',\r\n                                    border: '1px solid #333',\r\n                                    borderRadius: '12px',\r\n                                    padding: '1.5rem',\r\n                                    position: 'sticky',\r\n                                    top: '100px'\r\n                                }}>\r\n                                    <h3 style={{ fontSize: '1.2rem', fontWeight: 'bold', marginBottom: '1rem' }}>\r\n                                        {selectedDate.toLocaleDateString('en-US', {\r\n                                            weekday: 'long',\r\n                                            month: 'long',\r\n                                            day: 'numeric'\r\n                                        })}\r\n                                    </h3>\r\n\r\n                                    {/* Search photos from this date button */}\r\n                                    <button\r\n                                        onClick={() => navigate(`/search?date=${formatDateForInput(selectedDate)}`)}\r\n                                        style={{\r\n                                            width: '100%',\r\n                                            padding: '0.75rem',\r\n                                            background: 'rgba(127, 255, 212, 0.1)',\r\n                                            border: '1px solid #7FFFD4',\r\n                                            borderRadius: '8px',\r\n                                            color: '#7FFFD4',\r\n                                            fontWeight: '600',\r\n                                            cursor: 'pointer',\r\n                                            display: 'flex',\r\n                                            alignItems: 'center',\r\n                                            justifyContent: 'center',\r\n                                            gap: '0.5rem',\r\n                                            marginBottom: '1rem'\r\n                                        }}\r\n                                    >\r\n                                        <FaSearch /> Search photos from this date\r\n                                    </button>\r\n\r\n                                    {selectedDayEvents.length === 0 ? (\r\n                                        <div style={{ color: '#666', textAlign: 'center', padding: '2rem 0' }}>\r\n                                            No events on this day\r\n                                        </div>\r\n                                    ) : (\r\n                                        <div style={{ display: 'flex', flexDirection: 'column', gap: '1rem' }}>\r\n                                            {selectedDayEvents.map(event => (\r\n                                                <div\r\n                                                    key={event.id}\r\n                                                    style={{\r\n                                                        background: '#222',\r\n                                                        border: '1px solid #333',\r\n                                                        borderRadius: '8px',\r\n                                                        padding: '1rem'\r\n                                                    }}\r\n                                                >\r\n                                                    <div style={{ fontWeight: 'bold', marginBottom: '0.5rem' }}>\r\n                                                        {event.title}\r\n                                                    </div>\r\n                                                    {event.description && (\r\n                                                        <div style={{ fontSize: '0.9rem', color: '#ccc', marginBottom: '0.5rem' }}>\r\n                                                            {event.description}\r\n                                                        </div>\r\n                                                    )}\r\n                                                    <div style={{ fontSize: '0.8rem', color: '#7FFFD4' }}>\r\n                                                        {new Date(event.eventDate).toLocaleTimeString('en-US', {\r\n                                                            hour: 'numeric',\r\n                                                            minute: '2-digit'\r\n                                                        })}\r\n                                                    </div>\r\n                                                    {event.eventType && (\r\n                                                        <div style={{\r\n                                                            display: 'inline-block',\r\n                                                            marginTop: '0.5rem',\r\n                                                            padding: '0.25rem 0.75rem',\r\n                                                            background: 'rgba(127, 255, 212, 0.2)',\r\n                                                            borderRadius: '12px',\r\n                                                            fontSize: '0.75rem',\r\n                                                            color: '#7FFFD4'\r\n                                                        }}>\r\n                                                            {event.eventType}\r\n                                                        </div>\r\n                                                    )}\r\n                                                </div>\r\n                                            ))}\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n\r\n\r\n    );\r\n};\r\n\r\nexport default Calendar;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\pages\\CampusHub.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaSearch' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":32},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'emailStatus' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":11,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":23}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { InstitutionService } from '@/services/InstitutionService';\r\nimport { FaUniversity, FaSearch, FaLock, FaCheckCircle } from 'react-icons/fa';\r\nimport SEO from '@/components/SEO';\r\n\r\nconst CampusHub = () => {\r\n    const { currentUser } = useAuth();\r\n    const [loading, setLoading] = useState(true);\r\n    const [institution, setInstitution] = useState(null);\r\n    const [emailStatus, setEmailStatus] = useState('checking'); // checking, valid, invalid_domain, no_email\r\n\r\n    useEffect(() => {\r\n        const checkInstitution = async () => {\r\n            if (!currentUser) {\r\n                setLoading(false);\r\n                return;\r\n            }\r\n\r\n            // 1. Check if user is already linked\r\n            if (currentUser.institutionId) {\r\n                const inst = await InstitutionService.getInstitution(currentUser.institutionId);\r\n                setInstitution(inst);\r\n                setLoading(false);\r\n                return;\r\n            }\r\n\r\n            // 2. If not linked, check email domain\r\n            if (currentUser.email) {\r\n                const inst = await InstitutionService.findInstitutionByEmail(currentUser.email);\r\n                if (inst) {\r\n                    setInstitution(inst);\r\n                    setEmailStatus('valid');\r\n                    // Auto-join if found? Or ask confirmation? \r\n                    // Let's ask confirmation in UI.\r\n                } else {\r\n                    setEmailStatus('invalid_domain');\r\n                }\r\n            } else {\r\n                setEmailStatus('no_email');\r\n            }\r\n            setLoading(false);\r\n        };\r\n\r\n        checkInstitution();\r\n    }, [currentUser]);\r\n\r\n    const handleJoin = async () => {\r\n        if (!institution || !currentUser) return;\r\n        try {\r\n            await InstitutionService.joinInstitution(currentUser.uid, institution.id);\r\n            // Force refresh or update local state\r\n            window.location.reload();\r\n        } catch (err) {\r\n            alert(\"Failed to join institution.\");\r\n        }\r\n    };\r\n\r\n    if (loading) return <div style={{ padding: '2rem', color: '#fff', textAlign: 'center' }}>Loading Campus Hub...</div>;\r\n\r\n    // STATE 1: ALREADY JOINED\r\n    if (currentUser?.institutionId && institution) {\r\n        return (\r\n            <div style={{ minHeight: '100vh', background: '#000', color: '#fff', paddingBottom: '4rem' }}>\r\n                <SEO title={`${institution.name} Hub`} />\r\n\r\n                {/* Hero Header */}\r\n                <div style={{\r\n                    height: '250px',\r\n                    background: institution.coverImage ? `url(${institution.coverImage}) center/cover` : `linear-gradient(45deg, ${institution.primaryColor || '#003A2D'}, #000)`,\r\n                    position: 'relative',\r\n                    display: 'flex',\r\n                    alignItems: 'flex-end',\r\n                    padding: '2rem'\r\n                }}>\r\n                    <div style={{\r\n                        position: 'absolute',\r\n                        top: 0, left: 0, right: 0, bottom: 0,\r\n                        background: 'linear-gradient(to top, #000 0%, transparent 100%)'\r\n                    }}></div>\r\n\r\n                    <div style={{ position: 'relative', zIndex: 2, display: 'flex', alignItems: 'center', gap: '1.5rem' }}>\r\n                        <div style={{\r\n                            width: '80px', height: '80px',\r\n                            background: '#fff',\r\n                            borderRadius: '12px',\r\n                            display: 'flex', alignItems: 'center', justifyContent: 'center',\r\n                            color: '#000', fontSize: '2rem', fontWeight: 'bold'\r\n                        }}>\r\n                            {institution.logoUrl ? <img src={institution.logoUrl} style={{ width: '100%' }} /> : <FaUniversity />}\r\n                        </div>\r\n                        <div>\r\n                            <h1 style={{ margin: 0, fontSize: '2.5rem' }}>{institution.name}</h1>\r\n                            <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', color: '#7FFFD4' }}>\r\n                                <FaCheckCircle /> Official Campus Hub\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Content Area */}\r\n                <div style={{ maxWidth: '1200px', margin: '0 auto', padding: '2rem' }}>\r\n                    <div style={{\r\n                        background: '#111',\r\n                        borderRadius: '12px',\r\n                        padding: '2rem',\r\n                        textAlign: 'center',\r\n                        border: '1px solid #333'\r\n                    }}>\r\n                        <h2>Welcome to the {institution.name} Network</h2>\r\n                        <p style={{ color: '#aaa', maxWidth: '600px', margin: '0 auto 1.5rem' }}>\r\n                            Connect with fellow students, share your work, and access exclusive campus events.\r\n                        </p>\r\n                        <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))', gap: '1rem', marginTop: '2rem' }}>\r\n                            {['Campus Feed', 'Student Directory', 'Events', 'Marketplace'].map(feature => (\r\n                                <div key={feature} style={{\r\n                                    padding: '1.5rem',\r\n                                    background: '#222',\r\n                                    borderRadius: '8px',\r\n                                    cursor: 'pointer',\r\n                                    transition: 'transform 0.2s'\r\n                                }}>\r\n                                    <h3 style={{ margin: '0 0 0.5rem 0' }}>{feature}</h3>\r\n                                    <span style={{ color: '#7FFFD4', fontSize: '0.8rem' }}>COMING SOON</span>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // STATE 2: NOT JOINED (Discovery)\r\n    return (\r\n        <div style={{ minHeight: '100vh', background: '#000', color: '#fff', display: 'flex', alignItems: 'center', justifyContent: 'center', padding: '1rem' }}>\r\n            <SEO title=\"Campus Hub\" />\r\n            <div style={{ maxWidth: '500px', width: '100%', textAlign: 'center' }}>\r\n                <FaUniversity size={60} color=\"#7FFFD4\" style={{ marginBottom: '1.5rem' }} />\r\n                <h1 style={{ fontSize: '2.5rem', marginBottom: '0.5rem' }}>Find Your Campus</h1>\r\n                <p style={{ color: '#aaa', marginBottom: '2rem' }}>\r\n                    Join your university's exclusive network on Panospace.\r\n                </p>\r\n\r\n                {institution ? (\r\n                    <div style={{\r\n                        background: '#111',\r\n                        padding: '2rem',\r\n                        borderRadius: '16px',\r\n                        border: '1px solid #333',\r\n                        textAlign: 'left'\r\n                    }}>\r\n                        <div style={{ color: '#aaa', fontSize: '0.9rem', marginBottom: '0.5rem' }}>We found a match!</div>\r\n                        <h2 style={{ margin: '0 0 1rem 0' }}>{institution.name}</h2>\r\n                        <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', marginBottom: '1.5rem', color: '#ccc' }}>\r\n                            <FaCheckCircle color=\"#7FFFD4\" />\r\n                            <span>Matched via <strong>{currentUser.email}</strong></span>\r\n                        </div>\r\n                        <button\r\n                            onClick={handleJoin}\r\n                            style={{\r\n                                width: '100%',\r\n                                padding: '1rem',\r\n                                background: '#7FFFD4',\r\n                                color: '#000',\r\n                                border: 'none',\r\n                                borderRadius: '8px',\r\n                                fontSize: '1.1rem',\r\n                                fontWeight: 'bold',\r\n                                cursor: 'pointer'\r\n                            }}\r\n                        >\r\n                            Join {institution.name}\r\n                        </button>\r\n                    </div>\r\n                ) : (\r\n                    <div style={{\r\n                        background: '#111',\r\n                        padding: '2rem',\r\n                        borderRadius: '16px',\r\n                        border: '1px solid #333'\r\n                    }}>\r\n                        <div style={{ marginBottom: '1.5rem' }}>\r\n                            <FaLock size={24} color=\"#666\" style={{ marginBottom: '0.5rem' }} />\r\n                            <h3>No School Found</h3>\r\n                            <p style={{ color: '#888', fontSize: '0.9rem' }}>\r\n                                We couldn't match your email <strong>{currentUser?.email}</strong> to a partner university.\r\n                            </p>\r\n                        </div>\r\n                        <button style={{\r\n                            padding: '0.75rem 1.5rem',\r\n                            background: 'transparent',\r\n                            border: '1px solid #444',\r\n                            color: '#fff',\r\n                            borderRadius: '8px',\r\n                            cursor: 'pointer'\r\n                        }}>\r\n                            Browse All Schools\r\n                        </button>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CampusHub;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\pages\\CardDetailPage.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaClock' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":55,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":62},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":19,"column":38,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":43},{"ruleId":"no-undef","severity":1,"message":"'setCard' is not defined.","line":39,"column":13,"nodeType":"Identifier","messageId":"undef","endLine":39,"endColumn":20}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { FaArrowLeft, FaStar, FaShoppingCart, FaUser, FaClock, FaChartLine } from 'react-icons/fa';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { useToast } from '@/context/ToastContext';\r\nimport { useSpaceCard } from '@/hooks/useSpaceCard';\r\nimport { SpaceCardService, RARITY_TIERS } from '@/services/SpaceCardService';\r\nimport SpaceCardComponent from '@/components/SpaceCardComponent';\r\nimport { PageSkeleton } from '@/components/ui/Skeleton';\r\nimport { isFeatureEnabled } from '@/config/featureFlags';\r\n\r\nconst CardDetailPage = () => {\r\n    const { cardId } = useParams();\r\n    const navigate = useNavigate();\r\n    const { currentUser } = useAuth();\r\n    const { showError, showSuccess, showWarning } = useToast();\r\n\r\n    // Use custom hook for card data\r\n    const { card, listings, loading, error } = useSpaceCard(cardId);\r\n\r\n    const [minting, setMinting] = useState(false);\r\n\r\n    const handleMint = async () => {\r\n        if (!currentUser) {\r\n            showWarning('Please log in to mint cards');\r\n            return;\r\n        }\r\n\r\n        setMinting(true);\r\n        try {\r\n            await SpaceCardService.mintCard(\r\n                cardId,\r\n                currentUser.uid,\r\n                currentUser.displayName || currentUser.email\r\n            );\r\n            showSuccess('Card minted successfully!');\r\n            // Refresh card data\r\n            const updatedCard = await SpaceCardService.getCard(cardId);\r\n            setCard(updatedCard);\r\n        } catch (error) {\r\n            console.error('Error minting card:', error);\r\n            showError('Failed to mint card: ' + error.message);\r\n        } finally {\r\n            setMinting(false);\r\n        }\r\n    };\r\n\r\n    const handlePurchase = async (listingId) => {\r\n        if (!currentUser) {\r\n            showWarning('Please log in to purchase cards');\r\n            return;\r\n        }\r\n\r\n        try {\r\n            await SpaceCardService.purchaseCard(\r\n                listingId,\r\n                currentUser.uid,\r\n                currentUser.displayName || currentUser.email\r\n            );\r\n            showSuccess('Card purchased successfully!');\r\n            navigate('/profile/me');\r\n        } catch (error) {\r\n            console.error('Error purchasing card:', error);\r\n            showError('Failed to purchase card: ' + error.message);\r\n        }\r\n    };\r\n\r\n\r\n\r\n    if (loading) {\r\n        return <PageSkeleton />;\r\n    }\r\n\r\n    if (!card) {\r\n        return (\r\n            <div style={{ minHeight: '100vh', background: 'var(--black)', color: '#fff', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\r\n                Card not found\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const rarityStyle = RARITY_TIERS[card.rarity];\r\n    const isSoldOut = card.editionType === 'limited' && card.mintedCount >= card.editionSize;\r\n\r\n    return (\r\n        <div style={{ minHeight: '100vh', background: 'var(--black)', color: '#fff', paddingBottom: '80px' }}>\r\n            {/* Header */}\r\n            <div style={{ padding: '1rem', borderBottom: '1px solid #333', display: 'flex', alignItems: 'center', gap: '1rem' }}>\r\n                <button\r\n                    onClick={() => navigate(-1)}\r\n                    style={{\r\n                        background: 'transparent',\r\n                        border: 'none',\r\n                        color: '#fff',\r\n                        cursor: 'pointer',\r\n                        fontSize: '1.2rem'\r\n                    }}\r\n                >\r\n                    <FaArrowLeft />\r\n                </button>\r\n                <h1 style={{ margin: 0, fontSize: '1.5rem' }}>Card Details</h1>\r\n            </div>\r\n\r\n            {/* Content */}\r\n            <div className=\"container-md\">\r\n                <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '3rem', marginBottom: '3rem' }}>\r\n                    {/* Card Preview */}\r\n                    <div>\r\n                        <SpaceCardComponent card={card} />\r\n                    </div>\r\n\r\n                    {/* Card Info */}\r\n                    <div style={{ display: 'flex', flexDirection: 'column', gap: '1.5rem' }}>\r\n                        <div>\r\n                            <h2 style={{ margin: '0 0 0.5rem 0', fontSize: '2rem' }}>{card.title}</h2>\r\n                            <div style={{ color: '#888', display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                                <FaUser size={14} />\r\n                                Created by {card.creatorName}\r\n                            </div>\r\n                        </div>\r\n\r\n                        {card.description && (\r\n                            <p style={{ color: '#ccc', lineHeight: '1.6' }}>{card.description}</p>\r\n                        )}\r\n\r\n                        {/* Stats */}\r\n                        <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '1rem' }}>\r\n                            <div style={{ background: '#111', padding: '1rem', borderRadius: '8px' }}>\r\n                                <div style={{ color: '#888', fontSize: '0.8rem', marginBottom: '0.25rem' }}>Rarity</div>\r\n                                <div style={{ color: rarityStyle.color, fontWeight: 'bold', display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                                    <FaStar /> {card.rarity}\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div style={{ background: '#111', padding: '1rem', borderRadius: '8px' }}>\r\n                                <div style={{ color: '#888', fontSize: '0.8rem', marginBottom: '0.25rem' }}>Edition</div>\r\n                                <div style={{ fontWeight: 'bold' }}>\r\n                                    {card.editionType === 'limited' ? `${card.mintedCount}/${card.editionSize}` : card.editionType}\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div style={{ background: '#111', padding: '1rem', borderRadius: '8px' }}>\r\n                                <div style={{ color: '#888', fontSize: '0.8rem', marginBottom: '0.25rem' }}>Owners</div>\r\n                                <div style={{ fontWeight: 'bold' }}>{card.stats.totalOwners}</div>\r\n                            </div>\r\n\r\n                            <div style={{ background: '#111', padding: '1rem', borderRadius: '8px' }}>\r\n                                <div style={{ color: '#888', fontSize: '0.8rem', marginBottom: '0.25rem' }}>Floor Price</div>\r\n                                <div style={{ fontWeight: 'bold', color: '#7FFFD4' }}>\r\n                                    ${card.stats.floorPrice?.toFixed(2) || 'N/A'}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Mint Button (Primary Sale) */}\r\n                        {!isSoldOut && card.editionType !== 'unlimited' && isFeatureEnabled('SHOP') && (\r\n                            <button\r\n                                onClick={handleMint}\r\n                                disabled={minting}\r\n                                style={{\r\n                                    padding: '1rem 2rem',\r\n                                    background: minting ? '#333' : '#7FFFD4',\r\n                                    color: minting ? '#888' : '#000',\r\n                                    border: 'none',\r\n                                    borderRadius: '8px',\r\n                                    fontWeight: 'bold',\r\n                                    fontSize: '1.1rem',\r\n                                    cursor: minting ? 'not-allowed' : 'pointer',\r\n                                    display: 'flex',\r\n                                    alignItems: 'center',\r\n                                    justifyContent: 'center',\r\n                                    gap: '0.5rem'\r\n                                }}\r\n                            >\r\n                                <FaShoppingCart />\r\n                                {minting ? 'Minting...' : `Mint for $${card.basePrice}`}\r\n                            </button>\r\n                        )}\r\n\r\n                        {isSoldOut && (\r\n                            <div style={{\r\n                                padding: '1rem',\r\n                                background: 'rgba(255,0,0,0.1)',\r\n                                border: '1px solid #ff0000',\r\n                                borderRadius: '8px',\r\n                                textAlign: 'center',\r\n                                fontWeight: 'bold',\r\n                                color: '#ff0000'\r\n                            }}>\r\n                                SOLD OUT\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Marketplace Listings */}\r\n                {listings.length > 0 && isFeatureEnabled('SPACECARDS_MARKETPLACE') && (\r\n                    <div>\r\n                        <h3 style={{ marginBottom: '1rem', display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                            <FaChartLine /> Marketplace Listings\r\n                        </h3>\r\n                        <div style={{ display: 'grid', gap: '1rem' }}>\r\n                            {listings.map(listing => (\r\n                                <div\r\n                                    key={listing.listing.id}\r\n                                    style={{\r\n                                        background: '#111',\r\n                                        border: '1px solid #333',\r\n                                        borderRadius: '8px',\r\n                                        padding: '1.5rem',\r\n                                        display: 'flex',\r\n                                        justifyContent: 'space-between',\r\n                                        alignItems: 'center'\r\n                                    }}\r\n                                >\r\n                                    <div>\r\n                                        <div style={{ fontWeight: 'bold', marginBottom: '0.5rem' }}>\r\n                                            Edition #{listing.listing.editionNumber}\r\n                                            {listing.editionSize && `/${listing.editionSize}`}\r\n                                        </div>\r\n                                        <div style={{ color: '#888', fontSize: '0.9rem' }}>\r\n                                            Seller: {listing.listing.ownerName}\r\n                                        </div>\r\n                                    </div>\r\n                                    <div style={{ display: 'flex', alignItems: 'center', gap: '1rem' }}>\r\n                                        <div style={{ fontSize: '1.5rem', fontWeight: 'bold', color: '#7FFFD4' }}>\r\n                                            ${listing.listing.salePrice}\r\n                                        </div>\r\n                                        <button\r\n                                            onClick={() => handlePurchase(listing.listing.id)}\r\n                                            style={{\r\n                                                padding: '0.75rem 1.5rem',\r\n                                                background: '#7FFFD4',\r\n                                                color: '#000',\r\n                                                border: 'none',\r\n                                                borderRadius: '8px',\r\n                                                fontWeight: 'bold',\r\n                                                cursor: 'pointer'\r\n                                            }}\r\n                                        >\r\n                                            Buy Now\r\n                                        </button>\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CardDetailPage;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\pages\\CardMarketplace.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaStar' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":30,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":36},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchMarketplace'. Either include it or remove the dependency array.","line":23,"column":8,"nodeType":"ArrayExpression","endLine":23,"endColumn":93,"suggestions":[{"desc":"Update the dependencies array to be: [selectedRarity, selectedDiscipline, selectedEditionType, minPrice, maxPrice, sortBy, fetchMarketplace]","fix":{"range":[1007,1092],"text":"[selectedRarity, selectedDiscipline, selectedEditionType, minPrice, maxPrice, sortBy, fetchMarketplace]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { FaFilter, FaSearch, FaStar } from 'react-icons/fa';\r\nimport { SpaceCardService, RARITY_TIERS, CARD_DISCIPLINES, EDITION_TYPES } from '@/services/SpaceCardService';\r\nimport SpaceCardComponent from '@/components/SpaceCardComponent';\r\n\r\nconst CardMarketplace = () => {\r\n    const navigate = useNavigate();\r\n    const [cards, setCards] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n\r\n    // Filters\r\n    const [selectedRarity, setSelectedRarity] = useState('');\r\n    const [selectedDiscipline, setSelectedDiscipline] = useState('');\r\n    const [selectedEditionType, setSelectedEditionType] = useState('');\r\n    const [minPrice, setMinPrice] = useState('');\r\n    const [maxPrice, setMaxPrice] = useState('');\r\n    const [sortBy, setSortBy] = useState('newest');\r\n\r\n    useEffect(() => {\r\n        fetchMarketplace();\r\n    }, [selectedRarity, selectedDiscipline, selectedEditionType, minPrice, maxPrice, sortBy]);\r\n\r\n    const fetchMarketplace = async () => {\r\n        setLoading(true);\r\n        try {\r\n            const filters = {\r\n                rarity: selectedRarity || undefined,\r\n                discipline: selectedDiscipline || undefined,\r\n                editionType: selectedEditionType || undefined,\r\n                minPrice: minPrice ? parseFloat(minPrice) : undefined,\r\n                maxPrice: maxPrice ? parseFloat(maxPrice) : undefined,\r\n                sortBy\r\n            };\r\n\r\n            const marketplace = await SpaceCardService.getMarketplace(filters);\r\n            setCards(marketplace);\r\n        } catch (error) {\r\n            console.error('Error fetching marketplace:', error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const filteredCards = cards.filter(card => {\r\n        if (!searchTerm) return true;\r\n        const search = searchTerm.toLowerCase();\r\n        return (\r\n            card.title.toLowerCase().includes(search) ||\r\n            card.creatorName.toLowerCase().includes(search) ||\r\n            card.description?.toLowerCase().includes(search)\r\n        );\r\n    });\r\n\r\n    return (\r\n        <div style={{ minHeight: '100vh', background: 'var(--black)', color: '#fff', paddingBottom: '80px' }}>\r\n            {/* Header */}\r\n            <div style={{ padding: '1.5rem', borderBottom: '1px solid #333' }}>\r\n                <h1 style={{ margin: '0 0 1rem 0', fontSize: '2rem' }}>SpaceCards Marketplace</h1>\r\n\r\n                {/* Search Bar */}\r\n                <div style={{ position: 'relative', marginBottom: '1rem' }}>\r\n                    <FaSearch style={{ position: 'absolute', left: '1rem', top: '50%', transform: 'translateY(-50%)', color: '#888' }} />\r\n                    <input\r\n                        type=\"text\"\r\n                        placeholder=\"Search cards by name, creator, or description...\"\r\n                        value={searchTerm}\r\n                        onChange={(e) => setSearchTerm(e.target.value)}\r\n                        style={{\r\n                            width: '100%',\r\n                            padding: '0.75rem 1rem 0.75rem 2.5rem',\r\n                            background: '#111',\r\n                            border: '1px solid #333',\r\n                            borderRadius: '8px',\r\n                            color: '#fff',\r\n                            fontSize: '1rem'\r\n                        }}\r\n                    />\r\n                </div>\r\n\r\n                {/* Filters */}\r\n                <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(150px, 1fr))', gap: '0.75rem' }}>\r\n                    <select\r\n                        value={selectedRarity}\r\n                        onChange={(e) => setSelectedRarity(e.target.value)}\r\n                        style={{\r\n                            padding: '0.75rem',\r\n                            background: '#111',\r\n                            border: '1px solid #333',\r\n                            borderRadius: '8px',\r\n                            color: '#fff'\r\n                        }}\r\n                    >\r\n                        <option value=\"\">All Rarities</option>\r\n                        {Object.keys(RARITY_TIERS).map(rarity => (\r\n                            <option key={rarity} value={rarity}>{rarity}</option>\r\n                        ))}\r\n                    </select>\r\n\r\n                    <select\r\n                        value={selectedDiscipline}\r\n                        onChange={(e) => setSelectedDiscipline(e.target.value)}\r\n                        style={{\r\n                            padding: '0.75rem',\r\n                            background: '#111',\r\n                            border: '1px solid #333',\r\n                            borderRadius: '8px',\r\n                            color: '#fff'\r\n                        }}\r\n                    >\r\n                        <option value=\"\">All Disciplines</option>\r\n                        {Object.values(CARD_DISCIPLINES).map(disc => (\r\n                            <option key={disc} value={disc}>{disc}</option>\r\n                        ))}\r\n                    </select>\r\n\r\n                    <select\r\n                        value={selectedEditionType}\r\n                        onChange={(e) => setSelectedEditionType(e.target.value)}\r\n                        style={{\r\n                            padding: '0.75rem',\r\n                            background: '#111',\r\n                            border: '1px solid #333',\r\n                            borderRadius: '8px',\r\n                            color: '#fff'\r\n                        }}\r\n                    >\r\n                        <option value=\"\">All Editions</option>\r\n                        <option value={EDITION_TYPES.LIMITED}>Limited</option>\r\n                        <option value={EDITION_TYPES.TIMED}>Timed</option>\r\n                        <option value={EDITION_TYPES.CHALLENGE}>Challenge</option>\r\n                        <option value={EDITION_TYPES.CONTEST}>Contest</option>\r\n                    </select>\r\n\r\n                    <select\r\n                        value={sortBy}\r\n                        onChange={(e) => setSortBy(e.target.value)}\r\n                        style={{\r\n                            padding: '0.75rem',\r\n                            background: '#111',\r\n                            border: '1px solid #333',\r\n                            borderRadius: '8px',\r\n                            color: '#fff'\r\n                        }}\r\n                    >\r\n                        <option value=\"newest\">Newest</option>\r\n                        <option value=\"price_asc\">Price: Low to High</option>\r\n                        <option value=\"price_desc\">Price: High to Low</option>\r\n                    </select>\r\n                </div>\r\n\r\n                {/* Price Range */}\r\n                <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '0.75rem', marginTop: '0.75rem' }}>\r\n                    <input\r\n                        type=\"number\"\r\n                        placeholder=\"Min Price\"\r\n                        value={minPrice}\r\n                        onChange={(e) => setMinPrice(e.target.value)}\r\n                        style={{\r\n                            padding: '0.75rem',\r\n                            background: '#111',\r\n                            border: '1px solid #333',\r\n                            borderRadius: '8px',\r\n                            color: '#fff'\r\n                        }}\r\n                    />\r\n                    <input\r\n                        type=\"number\"\r\n                        placeholder=\"Max Price\"\r\n                        value={maxPrice}\r\n                        onChange={(e) => setMaxPrice(e.target.value)}\r\n                        style={{\r\n                            padding: '0.75rem',\r\n                            background: '#111',\r\n                            border: '1px solid #333',\r\n                            borderRadius: '8px',\r\n                            color: '#fff'\r\n                        }}\r\n                    />\r\n                </div>\r\n            </div>\r\n\r\n            {/* Results */}\r\n            <div style={{ padding: '1.5rem' }}>\r\n                <div style={{ marginBottom: '1rem', color: '#888' }}>\r\n                    {filteredCards.length} {filteredCards.length === 1 ? 'card' : 'cards'} available\r\n                </div>\r\n\r\n                {loading ? (\r\n                    <div style={{ textAlign: 'center', padding: '3rem', color: '#666' }}>\r\n                        Loading marketplace...\r\n                    </div>\r\n                ) : filteredCards.length === 0 ? (\r\n                    <div style={{ textAlign: 'center', padding: '3rem', color: '#666' }}>\r\n                        <FaFilter size={48} style={{ marginBottom: '1rem', opacity: 0.5 }} />\r\n                        <div>No cards found matching your filters</div>\r\n                    </div>\r\n                ) : (\r\n                    <div style={{\r\n                        display: 'grid',\r\n                        gridTemplateColumns: 'repeat(auto-fill, minmax(200px, 1fr))',\r\n                        gap: '1.5rem'\r\n                    }}>\r\n                        {filteredCards.map(card => (\r\n                            <div\r\n                                key={card.listing.id}\r\n                                onClick={() => navigate(`/cards/${card.id}`)}\r\n                                style={{ cursor: 'pointer' }}\r\n                            >\r\n                                <SpaceCardComponent\r\n                                    card={card}\r\n                                    ownership={card.listing}\r\n                                    showPrice={true}\r\n                                />\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CardMarketplace;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\pages\\CheckoutSuccess.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect } from 'react';\r\nimport { useNavigate, useSearchParams } from 'react-router-dom';\r\nimport { FaCheckCircle } from 'react-icons/fa';\r\n\r\nconst CheckoutSuccess = () => {\r\n    const navigate = useNavigate();\r\n    const [searchParams] = useSearchParams();\r\n    const sessionId = searchParams.get('session_id');\r\n\r\n    useEffect(() => {\r\n        if (!sessionId) {\r\n            navigate('/');\r\n        }\r\n    }, [sessionId, navigate]);\r\n\r\n    return (\r\n        <div style={{\r\n            height: '100vh',\r\n            width: '100vw',\r\n            background: '#000',\r\n            color: '#fff',\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            justifyContent: 'center',\r\n            alignItems: 'center',\r\n            gap: '2rem',\r\n            padding: '2rem',\r\n            textAlign: 'center'\r\n        }}>\r\n            <FaCheckCircle size={80} color=\"#4BB543\" />\r\n            <h1>Payment Successful!</h1>\r\n            <p style={{ maxWidth: '600px', color: '#ccc' }}>\r\n                Thank you for your purchase. Your order has been received and is being processed.\r\n                You will receive an email confirmation shortly.\r\n            </p>\r\n            <div style={{ display: 'flex', gap: '1rem' }}>\r\n                <button\r\n                    onClick={() => navigate('/')}\r\n                    style={{\r\n                        padding: '1rem 2rem',\r\n                        background: '#fff',\r\n                        color: '#000',\r\n                        border: 'none',\r\n                        borderRadius: '30px',\r\n                        fontSize: '1rem',\r\n                        fontWeight: 'bold',\r\n                        cursor: 'pointer'\r\n                    }}\r\n                >\r\n                    Return Home\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CheckoutSuccess;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\pages\\CollectionDetail.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { doc, getDoc, getDocs, query, where, collection as firestoreCollection, documentId, orderBy, limit } from 'firebase/firestore';\r\nimport { db } from '@/firebase';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { useCollection, useCreateCollection } from '@/hooks/useCollections';\r\nimport { FaArrowLeft, FaLock, FaUsers, FaGlobe, FaStore, FaEdit, FaShoppingCart, FaPlus } from 'react-icons/fa';\r\nimport SmartImage from '@/components/SmartImage';\r\n\r\nconst CollectionDetail = () => {\r\n    const { id } = useParams();\r\n    const navigate = useNavigate();\r\n    const { currentUser } = useAuth();\r\n    const { collection, loading, error, refetch } = useCollection(id);\r\n    const { addPostToCollection } = useCreateCollection();\r\n\r\n    const [allImages, setAllImages] = useState([]);\r\n    const [imagesLoading, setImagesLoading] = useState(true);\r\n    const [owner, setOwner] = useState(null);\r\n    const [userPosts, setUserPosts] = useState([]);\r\n    const [showAddPostModal, setShowAddPostModal] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const fetchCollectionImages = async () => {\r\n            if (!collection) {\r\n                setImagesLoading(false);\r\n                return;\r\n            }\r\n\r\n            try {\r\n                setImagesLoading(true);\r\n\r\n                const images = [];\r\n\r\n                // 1. Add initial collection items (manually uploaded images)\r\n                if (collection.items && collection.items.length > 0) {\r\n                    collection.items.forEach(item => {\r\n                        images.push({\r\n                            type: 'collection-item',\r\n                            imageUrl: item.imageUrl,\r\n                            exif: item.exif,\r\n                            aspectRatio: item.aspectRatio\r\n                        });\r\n                    });\r\n                }\r\n\r\n                // 2. Add images from referenced posts (BATCH FETCH)\r\n                if (collection.postRefs && collection.postRefs.length > 0) {\r\n                    // Batch fetch posts in groups of 10 (Firestore 'in' limit)\r\n                    const batchSize = 10;\r\n                    const batches = [];\r\n\r\n                    for (let i = 0; i < collection.postRefs.length; i += batchSize) {\r\n                        const batch = collection.postRefs.slice(i, i + batchSize);\r\n                        const q = query(\r\n                            firestoreCollection(db, 'posts'),\r\n                            where(documentId(), 'in', batch)\r\n                        );\r\n                        batches.push(getDocs(q));\r\n                    }\r\n\r\n                    const batchResults = await Promise.all(batches);\r\n\r\n                    batchResults.forEach(snapshot => {\r\n                        snapshot.docs.forEach(postDoc => {\r\n                            const postData = postDoc.data();\r\n                            const postImages = postData.images || postData.items || [];\r\n\r\n                            postImages.forEach(img => {\r\n                                images.push({\r\n                                    type: 'post-image',\r\n                                    postId: postDoc.id,\r\n                                    postTitle: postData.title,\r\n                                    imageUrl: img.url || img.imageUrl,\r\n                                    exif: img.exif,\r\n                                    aspectRatio: img.aspectRatio\r\n                                });\r\n                            });\r\n                        });\r\n                    });\r\n                }\r\n\r\n                setAllImages(images);\r\n\r\n                // Fetch owner info\r\n                if (collection.ownerId) {\r\n                    const ownerDoc = await getDoc(doc(db, 'users', collection.ownerId));\r\n                    if (ownerDoc.exists()) {\r\n                        setOwner({ id: ownerDoc.id, ...ownerDoc.data() });\r\n                    }\r\n                }\r\n\r\n                // Fetch user's posts if owner (with limit)\r\n                if (currentUser && collection.ownerId === currentUser.uid) {\r\n                    const postsQuery = query(\r\n                        firestoreCollection(db, 'posts'),\r\n                        where('authorId', '==', currentUser.uid),\r\n                        orderBy('createdAt', 'desc'),\r\n                        limit(20)\r\n                    );\r\n                    const postsSnap = await getDocs(postsQuery);\r\n                    const posts = postsSnap.docs.map(d => ({ id: d.id, ...d.data() }));\r\n                    setUserPosts(posts);\r\n                }\r\n            } catch (err) {\r\n                console.error('Error fetching collection images:', err);\r\n            } finally {\r\n                setImagesLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchCollectionImages();\r\n    }, [collection, currentUser]);\r\n\r\n    const handleAddPost = async (postId) => {\r\n        try {\r\n            await addPostToCollection(id, postId);\r\n            setShowAddPostModal(false);\r\n            refetch();\r\n        } catch (err) {\r\n            console.error('Error adding post:', err);\r\n            alert('Failed to add post to collection');\r\n        }\r\n    };\r\n\r\n    if (loading || imagesLoading) {\r\n        return (\r\n            <div style={{ height: '100vh', background: '#000', color: '#fff', display: 'flex', justifyContent: 'center', alignItems: 'center' }}>\r\n                Loading collection...\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (error || !collection) {\r\n        return (\r\n            <div style={{ height: '100vh', background: '#000', color: '#fff', display: 'flex', flexDirection: 'column', justifyContent: 'center', alignItems: 'center', gap: '1rem' }}>\r\n                <h2>Collection not found</h2>\r\n                <button\r\n                    onClick={() => navigate(-1)}\r\n                    style={{ padding: '0.75rem 1.5rem', background: '#333', border: 'none', borderRadius: '8px', color: '#fff', cursor: 'pointer' }}\r\n                >\r\n                    Go Back\r\n                </button>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const isOwner = currentUser?.uid === collection.ownerId;\r\n    const canView = collection.visibility === 'public' || isOwner ||\r\n        (collection.visibility === 'followers' && currentUser);\r\n\r\n    if (!canView) {\r\n        return (\r\n            <div style={{ height: '100vh', background: '#000', color: '#fff', display: 'flex', flexDirection: 'column', justifyContent: 'center', alignItems: 'center', gap: '1rem' }}>\r\n                <FaLock style={{ fontSize: '3rem', color: '#666' }} />\r\n                <h2>This collection is private</h2>\r\n                <button\r\n                    onClick={() => navigate(-1)}\r\n                    style={{ padding: '0.75rem 1.5rem', background: '#333', border: 'none', borderRadius: '8px', color: '#fff', cursor: 'pointer' }}\r\n                >\r\n                    Go Back\r\n                </button>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const visibilityIcon = {\r\n        public: FaGlobe,\r\n        followers: FaUsers,\r\n        private: FaLock\r\n    }[collection.visibility];\r\n\r\n    const VisibilityIcon = visibilityIcon || FaGlobe;\r\n\r\n    return (\r\n        <div style={{ minHeight: '100vh', background: '#000', color: '#fff', paddingBottom: '6rem' }}>\r\n            {/* Header */}\r\n            <div className=\"container-md\">\r\n                <button\r\n                    onClick={() => navigate(-1)}\r\n                    style={{\r\n                        background: 'transparent',\r\n                        border: 'none',\r\n                        color: '#888',\r\n                        cursor: 'pointer',\r\n                        fontSize: '1rem',\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        gap: '0.5rem',\r\n                        marginBottom: '2rem'\r\n                    }}\r\n                >\r\n                    <FaArrowLeft /> Back\r\n                </button>\r\n\r\n                {/* Collection Info */}\r\n                <div style={{ marginBottom: '3rem' }}>\r\n                    {collection.coverImage && (\r\n                        <div style={{\r\n                            width: '100%',\r\n                            maxHeight: '400px',\r\n                            borderRadius: '12px',\r\n                            overflow: 'hidden',\r\n                            marginBottom: '2rem'\r\n                        }}>\r\n                            <SmartImage\r\n                                src={collection.coverImage}\r\n                                alt={collection.title}\r\n                            />\r\n                        </div>\r\n                    )}\r\n\r\n                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'start', flexWrap: 'wrap', gap: '1rem' }}>\r\n                        <div style={{ flex: 1 }}>\r\n                            <h1 style={{ fontSize: '2.5rem', fontWeight: 'bold', marginBottom: '0.5rem' }}>\r\n                                {collection.title}\r\n                            </h1>\r\n\r\n                            {collection.description && (\r\n                                <p style={{ color: '#ccc', fontSize: '1.1rem', marginBottom: '1rem', lineHeight: '1.6' }}>\r\n                                    {collection.description}\r\n                                </p>\r\n                            )}\r\n\r\n                            <div style={{ display: 'flex', gap: '1rem', flexWrap: 'wrap', alignItems: 'center', color: '#888', fontSize: '0.9rem' }}>\r\n                                <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                                    <VisibilityIcon />\r\n                                    <span>{collection.visibility}</span>\r\n                                </div>\r\n\r\n                                {owner && (\r\n                                    <div\r\n                                        onClick={() => navigate(`/profile/${owner.id}`)}\r\n                                        style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', cursor: 'pointer' }}\r\n                                    >\r\n                                        by <span style={{ color: '#7FFFD4' }}>{owner.displayName}</span>\r\n                                    </div>\r\n                                )}\r\n\r\n                                <div>{allImages.length} images</div>\r\n                                <div>{collection.items?.length || 0} original</div>\r\n                                <div>{collection.postRefs?.length || 0} posts added</div>\r\n\r\n                                {collection.shopSettings?.showInStore && (\r\n                                    <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', color: '#7FFFD4' }}>\r\n                                        <FaStore />\r\n                                        <span>In Store</span>\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div style={{ display: 'flex', gap: '1rem', alignItems: 'center', flexWrap: 'wrap' }}>\r\n                            {isOwner && (\r\n                                <>\r\n                                    <button\r\n                                        onClick={() => setShowAddPostModal(true)}\r\n                                        style={{\r\n                                            padding: '0.75rem 1.5rem',\r\n                                            background: '#333',\r\n                                            border: 'none',\r\n                                            borderRadius: '8px',\r\n                                            color: '#fff',\r\n                                            cursor: 'pointer',\r\n                                            display: 'flex',\r\n                                            alignItems: 'center',\r\n                                            gap: '0.5rem',\r\n                                            fontWeight: '600'\r\n                                        }}\r\n                                    >\r\n                                        <FaPlus /> Add Post\r\n                                    </button>\r\n                                    <button\r\n                                        onClick={() => navigate(`/collection/${id}/edit`)}\r\n                                        style={{\r\n                                            padding: '0.75rem 1.5rem',\r\n                                            background: '#333',\r\n                                            border: 'none',\r\n                                            borderRadius: '8px',\r\n                                            color: '#fff',\r\n                                            cursor: 'pointer',\r\n                                            display: 'flex',\r\n                                            alignItems: 'center',\r\n                                            gap: '0.5rem',\r\n                                            fontWeight: '600'\r\n                                        }}\r\n                                    >\r\n                                        <FaEdit /> Edit\r\n                                    </button>\r\n                                </>\r\n                            )}\r\n\r\n                            {collection.shopSettings?.bundlePrice && collection.shopSettings?.showInStore && (\r\n                                <button\r\n                                    style={{\r\n                                        padding: '0.75rem 1.5rem',\r\n                                        background: '#7FFFD4',\r\n                                        border: 'none',\r\n                                        borderRadius: '8px',\r\n                                        color: '#000',\r\n                                        cursor: 'pointer',\r\n                                        display: 'flex',\r\n                                        alignItems: 'center',\r\n                                        gap: '0.5rem',\r\n                                        fontWeight: 'bold',\r\n                                        fontSize: '1.1rem'\r\n                                    }}\r\n                                >\r\n                                    <FaShoppingCart /> ${collection.shopSettings.bundlePrice.toFixed(2)}\r\n                                </button>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Images Grid */}\r\n                <div>\r\n                    <h2 style={{ fontSize: '1.5rem', fontWeight: 'bold', marginBottom: '1.5rem', borderBottom: '1px solid #333', paddingBottom: '0.75rem' }}>\r\n                        All Images\r\n                    </h2>\r\n\r\n                    {allImages.length === 0 ? (\r\n                        <div style={{ textAlign: 'center', padding: '3rem', color: '#666' }}>\r\n                            No images in this collection yet.\r\n                        </div>\r\n                    ) : (\r\n                        <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(250px, 1fr))', gap: '1rem' }}>\r\n                            {allImages.map((image, index) => (\r\n                                <div\r\n                                    key={index}\r\n                                    onClick={() => image.type === 'post-image' && navigate(`/post/${image.postId}`)}\r\n                                    style={{\r\n                                        aspectRatio: image.aspectRatio || '1',\r\n                                        background: '#111',\r\n                                        borderRadius: '8px',\r\n                                        overflow: 'hidden',\r\n                                        cursor: image.type === 'post-image' ? 'pointer' : 'default',\r\n                                        transition: 'transform 0.2s',\r\n                                        border: '1px solid #222',\r\n                                        position: 'relative'\r\n                                    }}\r\n                                >\r\n                                    <SmartImage\r\n                                        src={image.imageUrl}\r\n                                        alt=\"\"\r\n                                    />\r\n                                    {image.type === 'post-image' && image.postTitle && (\r\n                                        <div style={{\r\n                                            position: 'absolute',\r\n                                            bottom: 0,\r\n                                            left: 0,\r\n                                            right: 0,\r\n                                            background: 'rgba(0,0,0,0.8)',\r\n                                            padding: '0.5rem',\r\n                                            fontSize: '0.85rem',\r\n                                            color: '#7FFFD4'\r\n                                        }}>\r\n                                            From: {image.postTitle}\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Add Post Modal */}\r\n            {showAddPostModal && (\r\n                <div style={{\r\n                    position: 'fixed',\r\n                    top: 0,\r\n                    left: 0,\r\n                    right: 0,\r\n                    bottom: 0,\r\n                    background: 'rgba(0, 0, 0, 0.92)',\r\n                    backdropFilter: 'blur(8px)',\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'center',\r\n                    zIndex: 1000,\r\n                    padding: '1rem'\r\n                }}>\r\n                    <div style={{\r\n                        background: 'linear-gradient(135deg, rgba(17,17,17,0.98), rgba(10,10,10,0.99))',\r\n                        backdropFilter: 'blur(20px)',\r\n                        borderRadius: '12px',\r\n                        maxWidth: '600px',\r\n                        width: '100%',\r\n                        maxHeight: '80vh',\r\n                        overflow: 'auto',\r\n                        border: '1px solid rgba(127, 255, 212, 0.15)',\r\n                        padding: '2rem',\r\n                        boxShadow: '0 16px 48px rgba(0,0,0,0.6), 0 0 0 1px rgba(127, 255, 212, 0.1)'\r\n                    }}>\r\n                        <h2 style={{ marginBottom: '1.5rem' }}>Add Post to Collection</h2>\r\n\r\n                        {userPosts.filter(p => !collection.postRefs?.includes(p.id)).length === 0 ? (\r\n                            <div style={{ textAlign: 'center', padding: '2rem', color: '#666' }}>\r\n                                No posts available to add.\r\n                            </div>\r\n                        ) : (\r\n                            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(120px, 1fr))', gap: '1rem' }}>\r\n                                {userPosts\r\n                                    .filter(p => !collection.postRefs?.includes(p.id))\r\n                                    .map(post => (\r\n                                        <div\r\n                                            key={post.id}\r\n                                            onClick={() => handleAddPost(post.id)}\r\n                                            style={{\r\n                                                aspectRatio: '1',\r\n                                                background: '#222',\r\n                                                borderRadius: '8px',\r\n                                                overflow: 'hidden',\r\n                                                cursor: 'pointer',\r\n                                                border: '2px solid transparent',\r\n                                                transition: 'border 0.2s'\r\n                                            }}\r\n                                            onMouseEnter={(e) => e.currentTarget.style.borderColor = '#7FFFD4'}\r\n                                            onMouseLeave={(e) => e.currentTarget.style.borderColor = 'transparent'}\r\n                                        >\r\n                                            {post.images?.[0]?.url || post.imageUrl ? (\r\n                                                <SmartImage\r\n                                                    src={post.images?.[0]?.url || post.imageUrl}\r\n                                                    alt={post.title}\r\n                                                />\r\n                                            ) : (\r\n                                                <div style={{ width: '100%', height: '100%', display: 'flex', alignItems: 'center', justifyContent: 'center', color: '#666' }}>\r\n                                                    {post.title}\r\n                                                </div>\r\n                                            )}\r\n                                        </div>\r\n                                    ))}\r\n                            </div>\r\n                        )}\r\n\r\n                        <button\r\n                            onClick={() => setShowAddPostModal(false)}\r\n                            style={{\r\n                                marginTop: '1.5rem',\r\n                                padding: '0.75rem 1.5rem',\r\n                                background: '#333',\r\n                                border: 'none',\r\n                                borderRadius: '8px',\r\n                                color: '#fff',\r\n                                cursor: 'pointer',\r\n                                width: '100%'\r\n                            }}\r\n                        >\r\n                            Cancel\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CollectionDetail;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\pages\\ColorBackfillPage.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Admin Color Backfill Page\r\nimport React, { useState } from 'react';\r\nimport { colorBackfillTool } from '@/core/utils/colors';\r\n\r\nconst ColorBackfillPage = () => {\r\n    const [isRunning, setIsRunning] = useState(false);\r\n    const [stats, setStats] = useState({ processed: 0, succeeded: 0, failed: 0, skipped: 0 });\r\n    const [logs, setLogs] = useState([]);\r\n    const [batchSize, setBatchSize] = useState(20);\r\n\r\n    const addLog = (message, type = 'info') => {\r\n        const timestamp = new Date().toLocaleTimeString();\r\n        setLogs(prev => [...prev, { timestamp, message, type }]);\r\n    };\r\n\r\n    const runBackfill = async () => {\r\n        setIsRunning(true);\r\n        setLogs([]);\r\n        addLog(`Starting backfill for ${batchSize} posts...`, 'info');\r\n\r\n        try {\r\n            await colorBackfillTool.backfillColors(batchSize, (progress) => {\r\n                setStats(colorBackfillTool.getStats());\r\n\r\n                const msg = `[${progress.current}/${progress.total}] ${progress.postId?.substring(0, 10)}... - ${progress.status}`;\r\n                const logType = progress.status === 'success' ? 'success' :\r\n                    progress.status === 'failed' ? 'error' : 'info';\r\n\r\n                if (progress.color) {\r\n                    addLog(`${msg} (${progress.color})`, logType);\r\n                } else if (progress.error) {\r\n                    addLog(`${msg} - ${progress.error}`, logType);\r\n                } else {\r\n                    addLog(msg, logType);\r\n                }\r\n            });\r\n\r\n            const finalStats = colorBackfillTool.getStats();\r\n            setStats(finalStats);\r\n            addLog(`Γ£à Backfill complete! Succeeded: ${finalStats.succeeded}, Failed: ${finalStats.failed}, Skipped: ${finalStats.skipped}`, 'success');\r\n        } catch (error) {\r\n            addLog(`Γ¥î Error: ${error.message}`, 'error');\r\n        } finally {\r\n            setIsRunning(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div style={{\r\n            padding: '2rem',\r\n            maxWidth: '1200px',\r\n            margin: '0 auto',\r\n            background: '#0a0a0a',\r\n            minHeight: '100vh',\r\n            color: '#fff'\r\n        }}>\r\n            <h1 style={{ color: '#7FFFD4', marginBottom: '2rem' }}>≡ƒÄ¿ Color Backfill Tool</h1>\r\n\r\n            {/* Controls */}\r\n            <div style={{\r\n                background: 'rgba(127, 255, 212, 0.05)',\r\n                border: '1px solid rgba(127, 255, 212, 0.2)',\r\n                borderRadius: '8px',\r\n                padding: '1.5rem',\r\n                marginBottom: '2rem'\r\n            }}>\r\n                <div style={{ marginBottom: '1rem' }}>\r\n                    <label style={{ display: 'block', marginBottom: '0.5rem', color: '#7FFFD4' }}>\r\n                        Batch Size:\r\n                    </label>\r\n                    <input\r\n                        type=\"number\"\r\n                        value={batchSize}\r\n                        onChange={(e) => setBatchSize(parseInt(e.target.value))}\r\n                        min=\"1\"\r\n                        max=\"100\"\r\n                        disabled={isRunning}\r\n                        style={{\r\n                            padding: '0.5rem',\r\n                            background: '#1a1a1a',\r\n                            border: '1px solid rgba(127, 255, 212, 0.3)',\r\n                            borderRadius: '4px',\r\n                            color: '#fff',\r\n                            width: '100px'\r\n                        }}\r\n                    />\r\n                    <span style={{ marginLeft: '1rem', color: '#888' }}>\r\n                        (Recommended: 10-20 for first run)\r\n                    </span>\r\n                </div>\r\n\r\n                <button\r\n                    onClick={runBackfill}\r\n                    disabled={isRunning}\r\n                    style={{\r\n                        padding: '0.75rem 2rem',\r\n                        background: isRunning ? '#555' : '#7FFFD4',\r\n                        color: isRunning ? '#aaa' : '#000',\r\n                        border: 'none',\r\n                        borderRadius: '4px',\r\n                        fontSize: '1rem',\r\n                        fontWeight: 'bold',\r\n                        cursor: isRunning ? 'not-allowed' : 'pointer',\r\n                        transition: 'all 0.2s'\r\n                    }}\r\n                >\r\n                    {isRunning ? 'ΓÅ│ Running...' : 'Γû╢∩╕Å Start Backfill'}\r\n                </button>\r\n            </div>\r\n\r\n            {/* Stats */}\r\n            <div style={{\r\n                display: 'grid',\r\n                gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))',\r\n                gap: '1rem',\r\n                marginBottom: '2rem'\r\n            }}>\r\n                <StatCard label=\"Processed\" value={stats.processed} color=\"#7FFFD4\" />\r\n                <StatCard label=\"Succeeded\" value={stats.succeeded} color=\"#00ff88\" />\r\n                <StatCard label=\"Failed\" value={stats.failed} color=\"#ff4444\" />\r\n                <StatCard label=\"Skipped\" value={stats.skipped} color=\"#ffaa00\" />\r\n            </div>\r\n\r\n            {/* Logs */}\r\n            <div style={{\r\n                background: '#1a1a1a',\r\n                border: '1px solid rgba(127, 255, 212, 0.2)',\r\n                borderRadius: '8px',\r\n                padding: '1rem',\r\n                maxHeight: '500px',\r\n                overflowY: 'auto'\r\n            }}>\r\n                <h3 style={{ color: '#7FFFD4', marginBottom: '1rem' }}>≡ƒôï Logs</h3>\r\n                {logs.length === 0 ? (\r\n                    <p style={{ color: '#888' }}>No logs yet. Click \"Start Backfill\" to begin.</p>\r\n                ) : (\r\n                    <div style={{ fontFamily: 'monospace', fontSize: '0.9rem' }}>\r\n                        {logs.map((log, i) => (\r\n                            <div\r\n                                key={i}\r\n                                style={{\r\n                                    padding: '0.5rem',\r\n                                    borderBottom: '1px solid rgba(127, 255, 212, 0.1)',\r\n                                    color: log.type === 'success' ? '#00ff88' :\r\n                                        log.type === 'error' ? '#ff4444' :\r\n                                            log.type === 'warning' ? '#ffaa00' : '#aaa'\r\n                                }}\r\n                            >\r\n                                <span style={{ color: '#666' }}>[{log.timestamp}]</span> {log.message}\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Instructions */}\r\n            <div style={{\r\n                marginTop: '2rem',\r\n                padding: '1rem',\r\n                background: 'rgba(127, 255, 212, 0.05)',\r\n                border: '1px solid rgba(127, 255, 212, 0.2)',\r\n                borderRadius: '8px',\r\n                fontSize: '0.9rem',\r\n                color: '#aaa'\r\n            }}>\r\n                <h4 style={{ color: '#7FFFD4', marginBottom: '0.5rem' }}>Γä╣∩╕Å Instructions</h4>\r\n                <ul style={{ marginLeft: '1.5rem' }}>\r\n                    <li>Start with a small batch (10-20 posts) to test</li>\r\n                    <li>The tool will extract colors from post images and save them to Firestore</li>\r\n                    <li>Posts that already have colors will be skipped</li>\r\n                    <li>Processing takes ~200ms per post (rate limited)</li>\r\n                    <li>You can run multiple batches until all posts are processed</li>\r\n                    <li>Check the logs for any errors or issues</li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst StatCard = ({ label, value, color }) => (\r\n    <div style={{\r\n        background: 'rgba(127, 255, 212, 0.05)',\r\n        border: `1px solid ${color}33`,\r\n        borderRadius: '8px',\r\n        padding: '1rem',\r\n        textAlign: 'center'\r\n    }}>\r\n        <div style={{ fontSize: '2rem', fontWeight: 'bold', color }}>{value}</div>\r\n        <div style={{ color: '#888', fontSize: '0.9rem', marginTop: '0.5rem' }}>{label}</div>\r\n    </div>\r\n);\r\n\r\nexport default ColorBackfillPage;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\pages\\CommissionsPage.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'navigate' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":7,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":19}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport CommissionList from '@/components/monetization/CommissionList';\r\nimport HeaderBar from '@/components/HeaderBar';\r\n\r\nconst CommissionsPage = () => {\r\n    const navigate = useNavigate();\r\n\r\n    return (\r\n        <div style={{\r\n            minHeight: '100vh',\r\n            background: '#000',\r\n            color: '#fff',\r\n            paddingBottom: '80px' // Space for bottom nav\r\n        }}>\r\n            <HeaderBar title=\"Commissions\" variant=\"blur\" />\r\n\r\n            <div style={{ padding: '1rem' }}>\r\n                <CommissionList />\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CommissionsPage;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\pages\\Contest.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"react-hooks/rules-of-hooks","severity":1,"message":"React Hook \"useCountdown\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":65,"column":23,"nodeType":"Identifier","endLine":65,"endColumn":35},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":2,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":176,"column":34,"nodeType":"Block","messageId":"tsIgnoreInsteadOfExpectError","endLine":176,"endColumn":50,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[9479,9495],"text":"/* @ts-expect-error */"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":2,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":209,"column":30,"nodeType":"Block","messageId":"tsIgnoreInsteadOfExpectError","endLine":209,"endColumn":46,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[11676,11692],"text":"/* @ts-expect-error */"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":2,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":254,"column":38,"nodeType":"Block","messageId":"tsIgnoreInsteadOfExpectError","endLine":254,"endColumn":54,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[14720,14736],"text":"/* @ts-expect-error */"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useCountdown } from '@/hooks/useCountdown';\r\nimport { getContestStats, getAllWinners } from '@/services/contestService';\r\nimport type { ContestStats, MonthlyWinner } from '@/core/types/contest';\r\nimport { FaTrophy, FaCrown, FaFire, FaInfoCircle, FaPlus } from 'react-icons/fa';\r\nimport SmartImage from '@/components/SmartImage';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { getUserTier, USER_TIERS } from '@/core/services/firestore/monetization.service';\r\nimport PaywallModal from '@/components/monetization/PaywallModal';\r\n\r\nconst Contest = () => {\r\n    const navigate = useNavigate();\r\n    const { currentUser } = useAuth();\r\n    const [stats, setStats] = useState<ContestStats | null>(null);\r\n    const [winners, setWinners] = useState<MonthlyWinner[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [showPaywall, setShowPaywall] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const fetchData = async () => {\r\n            try {\r\n                const [contestStats, allWinners] = await Promise.all([\r\n                    getContestStats(),\r\n                    getAllWinners()\r\n                ]);\r\n                setStats(contestStats);\r\n                setWinners(allWinners);\r\n            } catch (error) {\r\n                console.error('Error loading contest data:', error);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n        fetchData();\r\n    }, []);\r\n\r\n    const handleHostClick = async () => {\r\n        if (!currentUser) {\r\n            navigate('/login');\r\n            return;\r\n        }\r\n\r\n        const tier = await getUserTier(currentUser.uid);\r\n        if (tier === USER_TIERS.ULTRA || tier === USER_TIERS.PARTNER) {\r\n            // Navigate to the unified event creator with contest type pre-selected\r\n            navigate('/event/create?type=contest');\r\n        } else {\r\n            setShowPaywall(true);\r\n        }\r\n    };\r\n\r\n    if (loading) {\r\n        return (\r\n            <div style={{ minHeight: '100vh', background: '#000', color: '#fff', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\r\n                Loading contest...\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const monthName = new Date(2024, (stats?.currentMonth || 1) - 1).toLocaleDateString('en-US', { month: 'long' });\r\n\r\n    // Countdown for current month\r\n    const targetDate = stats ? new Date(stats.currentYear, stats.currentMonth, 0) : null;\r\n    const { total } = useCountdown(targetDate);\r\n    const daysRemaining = Math.ceil(total / (1000 * 60 * 60 * 24));\r\n\r\n    return (\r\n        <div style={{ minHeight: '100vh', background: '#000', color: '#fff', paddingBottom: '6rem' }}>\r\n            {/* Hero Section */}\r\n            <div style={{ background: 'linear-gradient(135deg, #1a1a1a 0%, #0a0a0a 100%)', padding: '4rem 2rem', textAlign: 'center', borderBottom: '2px solid #7FFFD4', position: 'relative' }}>\r\n\r\n                {/* Host Button (Top Right) */}\r\n                <button\r\n                    onClick={handleHostClick}\r\n                    style={{\r\n                        position: 'absolute',\r\n                        top: '2rem',\r\n                        right: '2rem',\r\n                        background: 'rgba(255, 215, 0, 0.15)',\r\n                        border: '1px solid #FFD700',\r\n                        color: '#FFD700',\r\n                        padding: '0.8rem 1.5rem',\r\n                        borderRadius: '30px',\r\n                        cursor: 'pointer',\r\n                        fontWeight: 'bold',\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        gap: '0.5rem',\r\n                        transition: 'all 0.2s',\r\n                        zIndex: 10\r\n                    }}\r\n                    onMouseEnter={(e) => {\r\n                        e.currentTarget.style.background = 'rgba(255, 215, 0, 0.3)';\r\n                        e.currentTarget.style.transform = 'scale(1.05)';\r\n                    }}\r\n                    onMouseLeave={(e) => {\r\n                        e.currentTarget.style.background = 'rgba(255, 215, 0, 0.15)';\r\n                        e.currentTarget.style.transform = 'scale(1)';\r\n                    }}\r\n                >\r\n                    <FaPlus /> Host a Contest\r\n                </button>\r\n\r\n                <div style={{ fontSize: '4rem', marginBottom: '1rem' }}>≡ƒô╕</div>\r\n                <h1 style={{ fontSize: '3rem', fontWeight: 'bold', marginBottom: '1rem', background: 'linear-gradient(90deg, #7FFFD4, #FFD700)', WebkitBackgroundClip: 'text', WebkitTextFillColor: 'transparent' }}>\r\n                    Photo of the Month\r\n                </h1>\r\n                <p style={{ fontSize: '1.2rem', color: '#888', maxWidth: '600px', margin: '0 auto' }}>\r\n                    Post your best work. Get votes. Win monthly glory.\r\n                </p>\r\n\r\n                {/* Countdown */}\r\n                {stats && (\r\n                    <div style={{ marginTop: '2rem', padding: '1rem 2rem', background: 'rgba(127, 255, 212, 0.1)', border: '1px solid #7FFFD4', borderRadius: '12px', display: 'inline-block' }}>\r\n                        <div style={{ fontSize: '2.5rem', fontWeight: 'bold', color: '#7FFFD4' }}>\r\n                            {daysRemaining}\r\n                        </div>\r\n                        <div style={{ fontSize: '0.9rem', color: '#888' }}>\r\n                            days left in {monthName}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* How It Works */}\r\n            <div style={{ maxWidth: '800px', margin: '3rem auto', padding: '0 2rem' }}>\r\n                <div style={{ background: '#111', border: '1px solid #222', borderRadius: '12px', padding: '2rem' }}>\r\n                    <h2 style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', fontSize: '1.5rem', marginBottom: '1.5rem' }}>\r\n                        <FaInfoCircle style={{ color: '#7FFFD4' }} /> How It Works\r\n                    </h2>\r\n                    <div style={{ display: 'flex', flexDirection: 'column', gap: '1rem', color: '#aaa' }}>\r\n                        <div style={{ display: 'flex', gap: '1rem', alignItems: 'flex-start' }}>\r\n                            <div style={{ background: '#7FFFD4', color: '#000', width: '32px', height: '32px', borderRadius: '50%', display: 'flex', alignItems: 'center', justifyContent: 'center', flexShrink: 0, fontWeight: 'bold' }}>1</div>\r\n                            <div>\r\n                                <strong style={{ color: '#fff' }}>Post your photo</strong> ΓÇö Any post you create is automatically entered\r\n                            </div>\r\n                        </div>\r\n                        <div style={{ display: 'flex', gap: '1rem', alignItems: 'flex-start' }}>\r\n                            <div style={{ background: '#7FFFD4', color: '#000', width: '32px', height: '32px', borderRadius: '50%', display: 'flex', alignItems: 'center', justifyContent: 'center', flexShrink: 0, fontWeight: 'bold' }}>2</div>\r\n                            <div>\r\n                                <strong style={{ color: '#fff' }}>Share & get votes</strong> ΓÇö Tap the smiley on posts to vote\r\n                            </div>\r\n                        </div>\r\n                        <div style={{ display: 'flex', gap: '1rem', alignItems: 'flex-start' }}>\r\n                            <div style={{ background: '#7FFFD4', color: '#000', width: '32px', height: '32px', borderRadius: '50%', display: 'flex', alignItems: 'center', justifyContent: 'center', flexShrink: 0, fontWeight: 'bold' }}>3</div>\r\n                            <div>\r\n                                <strong style={{ color: '#fff' }}>Win the month</strong> ΓÇö Top post wins Verified Artist badge & Hall of Fame\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Current Leaderboard */}\r\n            {stats && stats.topPosts.length > 0 && (\r\n                <div style={{ maxWidth: '1200px', margin: '3rem auto', padding: '0 2rem' }}>\r\n                    <h2 style={{ fontSize: '2rem', fontWeight: 'bold', marginBottom: '2rem', display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                        <FaFire style={{ color: '#FF4500' }} /> Current Leaders\r\n                    </h2>\r\n                    <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(200px, 1fr))', gap: '1rem' }}>\r\n                        {stats.topPosts.slice(0, 20).map(entry => (\r\n                            <div\r\n                                key={entry.postId}\r\n                                onClick={() => navigate(`/post/${entry.postId}`)}\r\n                                style={{\r\n                                    position: 'relative',\r\n                                    aspectRatio: '1',\r\n                                    background: '#111',\r\n                                    borderRadius: '8px',\r\n                                    overflow: 'hidden',\r\n                                    cursor: 'pointer',\r\n                                    border: entry.rank <= 3 ? '2px solid #FFD700' : '1px solid #222'\r\n                                }}\r\n                            >\r\n                                {/* @ts-ignore */}\r\n                                <SmartImage src={entry.imageUrl} alt={entry.title} />\r\n                                <div style={{ position: 'absolute', top: '0.5rem', left: '0.5rem', background: entry.rank === 1 ? '#FFD700' : '#000', color: entry.rank === 1 ? '#000' : '#fff', padding: '0.3rem 0.6rem', borderRadius: '6px', fontWeight: 'bold', fontSize: '0.9rem' }}>\r\n                                    #{entry.rank}\r\n                                </div>\r\n                                <div style={{ position: 'absolute', bottom: 0, left: 0, right: 0, background: 'rgba(0,0,0,0.8)', padding: '0.8rem', color: '#fff' }}>\r\n                                    <div style={{ fontSize: '0.9rem', fontWeight: 'bold', marginBottom: '0.2rem' }}>{entry.likeCount} ≡ƒÿè</div>\r\n                                    <div style={{ fontSize: '0.8rem', color: '#888' }}>{entry.userName}</div>\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Previous Winner */}\r\n            {stats?.previousWinner && (\r\n                <div style={{ maxWidth: '800px', margin: '4rem auto', padding: '0 2rem' }}>\r\n                    <h2 style={{ fontSize: '2rem', fontWeight: 'bold', marginBottom: '2rem', display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                        <FaCrown style={{ color: '#FFD700' }} /> Last Month's Champion\r\n                    </h2>\r\n                    <div\r\n                        onClick={() => navigate(`/post/${stats.previousWinner!.postId}`)}\r\n                        style={{\r\n                            background: 'linear-gradient(135deg, #1a1a1a, #0a0a0a)',\r\n                            border: '3px solid #FFD700',\r\n                            borderRadius: '16px',\r\n                            overflow: 'hidden',\r\n                            cursor: 'pointer',\r\n                            boxShadow: '0 0 40px rgba(255, 215, 0, 0.3)'\r\n                        }}\r\n                    >\r\n                        <div style={{ aspectRatio: '16/9', position: 'relative' }}>\r\n                            {/* @ts-ignore */}\r\n                            <SmartImage src={stats.previousWinner.imageUrl} alt={stats.previousWinner.title} />\r\n                            <div style={{ position: 'absolute', top: '1rem', right: '1rem', background: '#FFD700', color: '#000', padding: '0.5rem 1rem', borderRadius: '8px', fontWeight: 'bold', display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                                <FaTrophy /> WINNER\r\n                            </div>\r\n                        </div>\r\n                        <div style={{ padding: '2rem' }}>\r\n                            <h3 style={{ fontSize: '1.8rem', fontWeight: 'bold', marginBottom: '0.5rem' }}>{stats.previousWinner.title}</h3>\r\n                            <div style={{ color: '#888', marginBottom: '1rem' }}>by {stats.previousWinner.userName}</div>\r\n                            <div style={{ display: 'flex', alignItems: 'center', gap: '2rem', fontSize: '1.2rem' }}>\r\n                                <span>{stats.previousWinner.likeCount} ≡ƒÿè</span>\r\n                                <span style={{ color: '#7FFFD4' }}>{stats.previousWinner.monthLabel}</span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Hall of Fame */}\r\n            {winners.length > 0 && (\r\n                <div style={{ maxWidth: '1200px', margin: '4rem auto', padding: '0 2rem' }}>\r\n                    <h2 style={{ fontSize: '2.5rem', fontWeight: 'bold', marginBottom: '2rem', textAlign: 'center', background: 'linear-gradient(90deg, #7FFFD4, #FFD700)', WebkitBackgroundClip: 'text', WebkitTextFillColor: 'transparent' }}>\r\n                        ≡ƒÅ¢∩╕Å Hall of Fame\r\n                    </h2>\r\n                    <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(250px, 1fr))', gap: '2rem' }}>\r\n                        {winners.map(winner => (\r\n                            <div\r\n                                key={winner.id}\r\n                                onClick={() => navigate(`/post/${winner.postId}`)}\r\n                                style={{\r\n                                    background: '#111',\r\n                                    border: '2px solid #333',\r\n                                    borderRadius: '12px',\r\n                                    overflow: 'hidden',\r\n                                    cursor: 'pointer',\r\n                                    transition: 'border-color 0.2s',\r\n                                }}\r\n                                onMouseEnter={e => {\r\n                                    e.currentTarget.style.borderColor = '#7FFFD4';\r\n                                }}\r\n                                onMouseLeave={e => {\r\n                                    e.currentTarget.style.borderColor = '#333';\r\n                                }}\r\n                            >\r\n                                <div style={{ aspectRatio: '1', position: 'relative' }}>\r\n                                    {/* @ts-ignore */}\r\n                                    <SmartImage src={winner.imageUrl} alt={winner.title} />\r\n                                    <div style={{ position: 'absolute', top: '0.5rem', right: '0.5rem', background: '#FFD700', color: '#000', padding: '0.3rem 0.6rem', borderRadius: '6px', fontWeight: 'bold', fontSize: '0.8rem' }}>\r\n                                        <FaTrophy />\r\n                                    </div>\r\n                                </div>\r\n                                <div style={{ padding: '1rem' }}>\r\n                                    <div style={{ fontSize: '1rem', fontWeight: 'bold', marginBottom: '0.5rem' }}>{winner.title}</div>\r\n                                    <div style={{ fontSize: '0.8rem', color: '#888', marginBottom: '0.5rem' }}>by {winner.userName}</div>\r\n                                    <div style={{ fontSize: '0.9rem', color: '#7FFFD4', marginBottom: '0.3rem' }}>{winner.monthLabel}</div>\r\n                                    <div style={{ fontSize: '0.8rem', color: '#666' }}>{winner.likeCount} votes</div>\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Modals */}\r\n            {showPaywall && (\r\n                <PaywallModal\r\n                    featureName=\"Host Contests\"\r\n                    onClose={() => setShowPaywall(false)}\r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Contest;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\pages\\ContestDetail.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'currentUser' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":13,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":16,"column":44,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":49},{"ruleId":"no-undef","severity":1,"message":"'getContestLeaderboard' is not defined.","line":188,"column":25,"nodeType":"Identifier","messageId":"undef","endLine":188,"endColumn":46},{"ruleId":"no-undef","severity":1,"message":"'setLeaderboard' is not defined.","line":188,"column":63,"nodeType":"Identifier","messageId":"undef","endLine":188,"endColumn":77}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { FaTrophy, FaClock, FaUsers, FaDollarSign, FaArrowLeft } from 'react-icons/fa';\r\nimport { useContest } from '@/hooks/useContest';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport SmartImage from '@/components/SmartImage';\r\nimport ContestEntryModal from '@/components/contests/ContestEntryModal';\r\nimport { PageSkeleton } from '@/components/ui/Skeleton';\r\n\r\nconst ContestDetail = () => {\r\n    const { contestId } = useParams();\r\n    const navigate = useNavigate();\r\n    const { currentUser } = useAuth();\r\n\r\n    // Use custom hook for contest data\r\n    const { contest, leaderboard, loading, error } = useContest(contestId);\r\n\r\n    const [showEntryModal, setShowEntryModal] = useState(false);\r\n    const [selectedPost, setSelectedPost] = useState(null);\r\n\r\n\r\n\r\n    if (loading) {\r\n        return <PageSkeleton />;\r\n    }\r\n\r\n    if (!contest) {\r\n        return (\r\n            <div style={{ minHeight: '100vh', background: '#000', color: '#fff', display: 'flex', alignItems: 'center', justifyContent: 'center', flexDirection: 'column', gap: '1rem' }}>\r\n                <div style={{ fontSize: '3rem' }}>≡ƒÅå</div>\r\n                <div>Contest not found</div>\r\n                <button onClick={() => navigate('/search')} style={{ padding: '0.75rem 1.5rem', background: 'var(--ice-mint)', color: '#000', border: 'none', borderRadius: '8px', cursor: 'pointer', fontWeight: 'bold' }}>\r\n                    Browse Contests\r\n                </button>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const timeRemaining = contest.endAt.toMillis() - Date.now();\r\n    const daysRemaining = Math.ceil(timeRemaining / (1000 * 60 * 60 * 24));\r\n    const isActive = contest.status === 'active';\r\n    const isClosed = contest.status === 'closed';\r\n\r\n    return (\r\n        <div style={{ minHeight: '100vh', background: '#000', color: '#fff', paddingBottom: '6rem' }}>\r\n            {/* Header */}\r\n            <div style={{ background: 'linear-gradient(135deg, #1a1a1a 0%, #0a0a0a 100%)', padding: '2rem', borderBottom: '2px solid #7FFFD4' }}>\r\n                <button\r\n                    onClick={() => navigate(-1)}\r\n                    style={{\r\n                        background: 'transparent',\r\n                        border: '1px solid #333',\r\n                        color: '#fff',\r\n                        padding: '0.5rem 1rem',\r\n                        borderRadius: '8px',\r\n                        cursor: 'pointer',\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        gap: '0.5rem',\r\n                        marginBottom: '1rem'\r\n                    }}\r\n                >\r\n                    <FaArrowLeft /> Back\r\n                </button>\r\n\r\n                <div style={{ maxWidth: '1200px', margin: '0 auto' }}>\r\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '1rem', marginBottom: '1rem' }}>\r\n                        <FaTrophy style={{ fontSize: '3rem', color: '#FFD700' }} />\r\n                        <div style={{ flex: 1 }}>\r\n                            <h1 style={{ margin: '0 0 0.5rem 0', fontSize: '2.5rem' }}>{contest.title}</h1>\r\n                            <p style={{ margin: 0, color: '#aaa', fontSize: '1.1rem' }}>{contest.description}</p>\r\n                        </div>\r\n                        <div style={{\r\n                            padding: '0.5rem 1rem',\r\n                            borderRadius: '20px',\r\n                            background: isActive ? 'rgba(127, 255, 212, 0.1)' : isClosed ? 'rgba(255, 0, 0, 0.1)' : 'rgba(255, 255, 255, 0.1)',\r\n                            color: isActive ? 'var(--ice-mint)' : isClosed ? '#ff4444' : '#888',\r\n                            fontSize: '0.9rem',\r\n                            fontWeight: 600\r\n                        }}>\r\n                            {isActive ? 'ACTIVE' : isClosed ? 'CLOSED' : 'UPCOMING'}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Stats */}\r\n                    <div style={{ display: 'flex', gap: '1.5rem', flexWrap: 'wrap', marginTop: '1.5rem' }}>\r\n                        <div style={{ padding: '1rem 1.5rem', background: 'rgba(127, 255, 212, 0.1)', borderRadius: '12px', border: '1px solid var(--ice-mint)' }}>\r\n                            <div style={{ fontSize: '0.85rem', color: '#888', marginBottom: '0.25rem' }}>Prize Pool</div>\r\n                            <div style={{ fontSize: '1.8rem', fontWeight: 'bold', color: 'var(--ice-mint)' }}>\r\n                                ${contest.totalPrizePool || contest.prizePool}\r\n                            </div>\r\n                        </div>\r\n                        {isActive && (\r\n                            <div style={{ padding: '1rem 1.5rem', background: 'rgba(255, 255, 255, 0.05)', borderRadius: '12px', border: '1px solid #333' }}>\r\n                                <div style={{ fontSize: '0.85rem', color: '#888', marginBottom: '0.25rem' }}>Time Remaining</div>\r\n                                <div style={{ fontSize: '1.8rem', fontWeight: 'bold', color: '#fff', display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                                    <FaClock /> {daysRemaining} days\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n                        <div style={{ padding: '1rem 1.5rem', background: 'rgba(255, 255, 255, 0.05)', borderRadius: '12px', border: '1px solid #333' }}>\r\n                            <div style={{ fontSize: '0.85rem', color: '#888', marginBottom: '0.25rem' }}>Entries</div>\r\n                            <div style={{ fontSize: '1.8rem', fontWeight: 'bold', color: '#fff', display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                                <FaUsers /> {contest.entryCount || leaderboard.length}\r\n                            </div>\r\n                        </div>\r\n                        {contest.entryType === 'paid' && (\r\n                            <div style={{ padding: '1rem 1.5rem', background: 'rgba(255, 215, 0, 0.1)', borderRadius: '12px', border: '1px solid #FFD700' }}>\r\n                                <div style={{ fontSize: '0.85rem', color: '#888', marginBottom: '0.25rem' }}>Entry Fee</div>\r\n                                <div style={{ fontSize: '1.8rem', fontWeight: 'bold', color: '#FFD700', display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                                    <FaDollarSign /> {contest.entryFee}\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Entry Requirements */}\r\n            {(contest.requireOriginalContent || !contest.allowAIArt || contest.requiredTags?.length > 0) && (\r\n                <div style={{ maxWidth: '1200px', margin: '2rem auto', padding: '0 2rem' }}>\r\n                    <div style={{ background: '#111', border: '1px solid #222', borderRadius: '12px', padding: '1.5rem' }}>\r\n                        <h3 style={{ margin: '0 0 1rem 0' }}>Entry Requirements</h3>\r\n                        <div style={{ display: 'flex', flexDirection: 'column', gap: '0.5rem', color: '#aaa' }}>\r\n                            {contest.requireOriginalContent && <div>Γ£ô Original content only (no resold posts)</div>}\r\n                            {!contest.allowAIArt && <div>Γ£ô No AI-generated art</div>}\r\n                            {contest.requiredTags && contest.requiredTags.length > 0 && (\r\n                                <div>Γ£ô Must include tags: {contest.requiredTags.map(t => `#${t}`).join(', ')}</div>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Leaderboard */}\r\n            <div style={{ maxWidth: '1200px', margin: '2rem auto', padding: '0 2rem' }}>\r\n                <h2 style={{ fontSize: '2rem', fontWeight: 'bold', marginBottom: '1.5rem' }}>\r\n                    {isClosed ? '≡ƒÅå Final Results' : '≡ƒôè Current Leaderboard'}\r\n                </h2>\r\n                {leaderboard.length > 0 ? (\r\n                    <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(200px, 1fr))', gap: '1rem' }}>\r\n                        {leaderboard.map(entry => (\r\n                            <div\r\n                                key={entry.id}\r\n                                onClick={() => navigate(`/post/${entry.postId}`)}\r\n                                style={{\r\n                                    position: 'relative',\r\n                                    aspectRatio: '1',\r\n                                    background: '#111',\r\n                                    borderRadius: '8px',\r\n                                    overflow: 'hidden',\r\n                                    cursor: 'pointer',\r\n                                    border: entry.finalRank <= 3 ? '2px solid #FFD700' : '1px solid #222'\r\n                                }}\r\n                            >\r\n                                <SmartImage src={entry.imageUrl} alt={entry.title} />\r\n                                <div style={{ position: 'absolute', top: '0.5rem', left: '0.5rem', background: entry.finalRank === 1 ? '#FFD700' : '#000', color: entry.finalRank === 1 ? '#000' : '#fff', padding: '0.3rem 0.6rem', borderRadius: '6px', fontWeight: 'bold', fontSize: '0.9rem' }}>\r\n                                    #{entry.finalRank}\r\n                                </div>\r\n                                <div style={{ position: 'absolute', bottom: 0, left: 0, right: 0, background: 'rgba(0,0,0,0.8)', padding: '0.8rem', color: '#fff' }}>\r\n                                    <div style={{ fontSize: '0.9rem', fontWeight: 'bold', marginBottom: '0.2rem' }}>\r\n                                        {entry.validLikeCount ?? entry.likeCount ?? 0} ≡ƒÿè\r\n                                    </div>\r\n                                    <div style={{ fontSize: '0.8rem', color: '#888' }}>{entry.userName}</div>\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                ) : (\r\n                    <div style={{ textAlign: 'center', padding: '4rem', color: '#555' }}>\r\n                        <div style={{ fontSize: '3rem', marginBottom: '1rem' }}>≡ƒô╕</div>\r\n                        <p>No entries yet. Be the first to enter!</p>\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Entry Modal */}\r\n            {showEntryModal && selectedPost && (\r\n                <ContestEntryModal\r\n                    contest={contest}\r\n                    post={selectedPost}\r\n                    onClose={() => {\r\n                        setShowEntryModal(false);\r\n                        setSelectedPost(null);\r\n                    }}\r\n                    onSuccess={() => {\r\n                        // Refresh leaderboard\r\n                        getContestLeaderboard(contestId).then(setLeaderboard);\r\n                    }}\r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ContestDetail;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\pages\\CreateCollection.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'PaywallModal' is defined but never used. Allowed unused vars must match /^_/u.","line":13,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'showSuccess' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":36,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":36,"endColumn":35},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'creating' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":37,"column":40,"nodeType":"Identifier","messageId":"unusedVar","endLine":37,"endColumn":48},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'fetchingTier' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":78,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":78,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'activeImage' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":355,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":355,"endColumn":22}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useRef, useMemo } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { useToast } from '@/context/ToastContext';\r\nimport { ref, uploadBytes, getDownloadURL } from 'firebase/storage';\r\nimport { storage } from '@/firebase';\r\nimport { useCreateCollection } from '@/hooks/useCollections';\r\nimport { db } from '@/firebase';\r\nimport { collection, addDoc, serverTimestamp } from 'firebase/firestore';\r\nimport exifr from 'exifr';\r\nimport { PRINT_PRODUCTS, PRINT_TIERS, calculateBundlePricing } from '@/domain/shop/pricing';\r\nimport { getUserTier, USER_TIERS } from '@/core/services/firestore/monetization.service';\r\nimport PaywallModal from '@/components/monetization/PaywallModal';\r\nimport { logger } from '@/core/utils/logger';\r\nconst PRINT_SIZES = PRINT_PRODUCTS;\r\n\r\nimport { createMagazine, calculateNextReleaseDate } from '@/services/magazineService';\r\nimport ImageUploadPanel from '@/components/create-collection/ImageUploadPanel';\r\nimport MagazineModePanel from '@/components/create-collection/MagazineModePanel';\r\nimport MuseumModePanel from '@/components/create-collection/MuseumModePanel';\r\nimport CollectionModePanel from '@/components/create-collection/CollectionModePanel';\r\nimport StudioModePanel from '@/components/create-collection/GalleryModePanel';\r\nimport PageHeader from '@/components/PageHeader';\r\nimport PSButton from '@/components/PSButton';\r\nimport ModeSelector from '@/components/create-collection/ModeSelector';\r\nimport CollectionFields from '@/components/create-collection/CollectionFields';\r\n\r\nimport SubmitBar from '@/components/create-collection/SubmitBar';\r\nimport { sanitizeTitle, sanitizeDescription } from '@/core/utils/sanitize';\r\n\r\nimport { useLayoutEngine } from '@/core/responsive/useLayoutEngine';\r\n\r\nconst CreateCollection = () => {\r\n    const { currentUser } = useAuth();\r\n    const navigate = useNavigate();\r\n    const { showError, showSuccess } = useToast();\r\n    const { createCollection, loading: creating } = useCreateCollection();\r\n    const fileInputRef = useRef(null);\r\n\r\n    // Responsive Layout Engine\r\n    const { layout, isMobile, isLandscape, getSafeSpacing } = useLayoutEngine('create_collection');\r\n\r\n    const containerStyle = {\r\n        maxWidth: layout.containerWidth === '100%' ? '100%' : layout.containerWidth,\r\n        margin: '0 auto',\r\n        padding: `${layout.paddingY} ${layout.paddingX}`,\r\n        paddingBottom: '6rem', // Always ensure space for bottom bar/scrolling\r\n        width: '100%',\r\n        boxSizing: 'border-box',\r\n        minHeight: '100vh',\r\n        paddingTop: getSafeSpacing('top', layout.headerHeight)\r\n    };\r\n\r\n    const gridStyle = {\r\n        display: 'grid',\r\n        gridTemplateColumns: isMobile && !isLandscape ? '1fr' : '1fr 1fr',\r\n        gap: layout.gridGap && layout.gridGap !== '1px' ? layout.gridGap : (isMobile ? '2rem' : '3rem'),\r\n        alignItems: 'start'\r\n    };\r\n\r\n    // Generate stars once and memoize them\r\n    const stars = useMemo(() => {\r\n        return [...Array(100)].map((_, i) => ({\r\n            id: i,\r\n            width: Math.random() * 2 + 1,\r\n            height: Math.random() * 2 + 1,\r\n            top: Math.random() * 100,\r\n            left: Math.random() * 100,\r\n            opacity: Math.random() * 0.5 + 0.3,\r\n            duration: Math.random() * 3 + 2,\r\n            delay: Math.random() * 2,\r\n            glow: Math.random() * 3 + 2\r\n        }));\r\n    }, []);\r\n\r\n    const [creationMode, setCreationMode] = useState('collection'); // 'collection', 'gallery', 'museum', or 'magazine'\r\n    const [userTier, setUserTier] = useState(null);\r\n    const [fetchingTier, setFetchingTier] = useState(true);\r\n    const [title, setTitle] = useState('');\r\n    const [description, setDescription] = useState('');\r\n    const [visibility, setVisibility] = useState('public');\r\n    const [postToFeed, setPostToFeed] = useState(true);\r\n    const [showInStore, setShowInStore] = useState(false);\r\n    const [productTier, setProductTier] = useState(PRINT_TIERS.ECONOMY);\r\n    const [defaultSizeId, setDefaultSizeId] = useState('8x10');\r\n\r\n    // Magazine-specific state\r\n    const [releaseFrequency, setReleaseFrequency] = useState('monthly');\r\n    const [releaseTime, setReleaseTime] = useState('09:00');\r\n    const [releaseDay, setReleaseDay] = useState(1);\r\n    const [linkedGalleryId, setLinkedGalleryId] = useState('');\r\n\r\n    const [images, setImages] = useState([]);\r\n    const [activeImageIndex, setActiveImageIndex] = useState(0);\r\n    const [uploading, setUploading] = useState(false);\r\n    const [uploadProgress, setUploadProgress] = useState(0);\r\n\r\n    // Fetch user tier\r\n    React.useEffect(() => {\r\n        const fetchTier = async () => {\r\n            if (!currentUser) {\r\n                setFetchingTier(false);\r\n                return;\r\n            }\r\n            try {\r\n                const tier = await getUserTier(currentUser.uid);\r\n                setUserTier(tier);\r\n            } catch (error) {\r\n                console.error('Error fetching user tier:', error);\r\n            } finally {\r\n                setFetchingTier(false);\r\n            }\r\n        };\r\n        fetchTier();\r\n    }, [currentUser]);\r\n\r\n    const handleFileSelect = async (e) => {\r\n        const files = Array.from(e.target.files);\r\n        if (files.length === 0) return;\r\n\r\n        const filesToAdd = files.slice(0, 10 - images.length);\r\n\r\n        const newImages = await Promise.all(\r\n            filesToAdd.map(async (file) => {\r\n                const preview = URL.createObjectURL(file);\r\n\r\n                let exif = null;\r\n                try {\r\n                    const exifData = await exifr.parse(file);\r\n                    if (exifData) {\r\n                        exif = {\r\n                            camera: exifData.Make || null,\r\n                            lens: exifData.LensModel || null,\r\n                            focalLength: exifData.FocalLength || null,\r\n                            aperture: exifData.FNumber || null,\r\n                            shutterSpeed: exifData.ExposureTime || null,\r\n                            iso: exifData.ISO || null,\r\n                            dateTaken: exifData.DateTimeOriginal || null\r\n                        };\r\n                    }\r\n                } catch (err) {\r\n                    logger.warn('EXIF extraction failed:', err);\r\n                }\r\n\r\n                const img = new Image();\r\n                img.src = preview;\r\n                await new Promise(resolve => { img.onload = resolve; });\r\n\r\n                return {\r\n                    file,\r\n                    preview,\r\n                    exif,\r\n                    aspectRatio: img.width / img.height,\r\n                    width: img.width,\r\n                    height: img.height,\r\n                    sizeId: defaultSizeId,\r\n                    sizeLabel: PRINT_SIZES.find(s => s.id === defaultSizeId)?.label || '8\" ├ù 10\"'\r\n                };\r\n            })\r\n        );\r\n\r\n        setImages(prev => [...prev, ...newImages]);\r\n        if (images.length === 0) setActiveImageIndex(0);\r\n    };\r\n\r\n    const removeImage = (index) => {\r\n        setImages(prev => prev.filter((_, i) => i !== index));\r\n        if (activeImageIndex >= images.length - 1) {\r\n            setActiveImageIndex(Math.max(0, images.length - 2));\r\n        }\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n\r\n\r\n        if (!title.trim()) {\r\n            showError(`Please enter a ${creationMode} title`);\r\n            return;\r\n        }\r\n\r\n        // Magazine mode\r\n        if (creationMode === 'magazine') {\r\n            try {\r\n                setUploading(true);\r\n\r\n                let finalCoverImageUrl = null;\r\n\r\n                // Upload cover image if selected\r\n                if (images.length > 0) {\r\n                    const image = images[0];\r\n                    const fileName = `magazines/${currentUser.uid}/${Date.now()}_cover_${image.file.name}`;\r\n                    const storageRef = ref(storage, fileName);\r\n                    await uploadBytes(storageRef, image.file);\r\n                    finalCoverImageUrl = await getDownloadURL(storageRef);\r\n                }\r\n\r\n                // Calculate next release date\r\n                const nextReleaseDate = calculateNextReleaseDate(releaseFrequency, releaseDay, releaseTime);\r\n\r\n                const magazineData = {\r\n                    ownerId: currentUser.uid,\r\n                    ownerName: currentUser.displayName || 'Anonymous',\r\n                    title: sanitizeTitle(title),\r\n                    description: sanitizeDescription(description),\r\n                    coverImage: finalCoverImageUrl,\r\n                    releaseFrequency,\r\n                    releaseTime,\r\n                    releaseDay,\r\n                    nextReleaseDate,\r\n                    galleryId: linkedGalleryId || null,\r\n                    collaborationEnabled: !!linkedGalleryId,\r\n                    visibility\r\n                };\r\n\r\n                const newMagazine = await createMagazine(magazineData);\r\n                navigate(`/magazine/${newMagazine.id}`);\r\n                return;\r\n            } catch (err) {\r\n                console.error('[CreateCollection] Error creating magazine:', err);\r\n                showError(`Failed to create magazine: ${err.message}`);\r\n            } finally {\r\n                setUploading(false);\r\n            }\r\n            return;\r\n        }\r\n\r\n        // Museum mode\r\n        if (creationMode === 'museum') {\r\n            // Check if user is Ultra-tier Space Creator\r\n            if (userTier !== USER_TIERS.ULTRA && userTier !== USER_TIERS.PARTNER) {\r\n                showError('Museums are exclusive to Space Creator members. Please upgrade to continue.');\r\n                return;\r\n            }\r\n\r\n            try {\r\n                setUploading(true);\r\n\r\n                let finalCoverImageUrl = null;\r\n\r\n                // Upload cover image if selected\r\n                if (images.length > 0) {\r\n                    const image = images[0];\r\n                    const fileName = `museums/${currentUser.uid}/${Date.now()}_cover_${image.file.name}`;\r\n                    const storageRef = ref(storage, fileName);\r\n                    await uploadBytes(storageRef, image.file);\r\n                    finalCoverImageUrl = await getDownloadURL(storageRef);\r\n                }\r\n\r\n                const museumData = {\r\n                    type: 'museum',\r\n                    ownerId: currentUser.uid,\r\n                    ownerName: currentUser.displayName || 'Anonymous',\r\n                    title: sanitizeTitle(title),\r\n                    description: sanitizeDescription(description),\r\n                    coverImage: finalCoverImageUrl,\r\n                    galleryIds: [], // Will be populated when galleries are added\r\n                    profileIds: [], // Will be populated when profiles are added\r\n                    members: [currentUser.uid], // Owner is first member\r\n                    memberCount: 1,\r\n                    visibility,\r\n                    createdAt: serverTimestamp(),\r\n                    updatedAt: serverTimestamp()\r\n                };\r\n\r\n                const docRef = await addDoc(collection(db, 'museums'), museumData);\r\n\r\n                navigate(`/museum/${docRef.id}`);\r\n                return;\r\n            } catch (err) {\r\n                console.error('[CreateCollection] Error creating museum:', err);\r\n                showError(`Failed to create museum: ${err.message}`);\r\n            } finally {\r\n                setUploading(false);\r\n            }\r\n            return;\r\n        }\r\n\r\n        // Collection/Gallery mode - images required\r\n        if (images.length === 0) {\r\n            showError('Please add at least 1 image to your collection (max 10)');\r\n            return;\r\n        }\r\n\r\n        // Check if user is Ultra-tier Space Creator for Studio creation\r\n        if (creationMode === 'gallery' && userTier !== USER_TIERS.ULTRA && userTier !== USER_TIERS.PARTNER) {\r\n            showError('Studios are exclusive to Space Creator members. Please upgrade to continue.');\r\n            return;\r\n        }\r\n\r\n\r\n\r\n        try {\r\n            setUploading(true);\r\n            setUploadProgress(0);\r\n\r\n            const uploadedItems = [];\r\n            for (let i = 0; i < images.length; i++) {\r\n                const image = images[i];\r\n                const fileName = `collections/${currentUser.uid}/${Date.now()}_${i}_${image.file.name}`;\r\n                const storageRef = ref(storage, fileName);\r\n\r\n                await uploadBytes(storageRef, image.file);\r\n                const imageUrl = await getDownloadURL(storageRef);\r\n\r\n                uploadedItems.push({\r\n                    imageUrl,\r\n                    exif: image.exif,\r\n                    aspectRatio: image.aspectRatio,\r\n                    storagePath: fileName,\r\n                    sizeId: image.sizeId,\r\n                    sizeLabel: image.sizeLabel\r\n                });\r\n\r\n                setUploadProgress(((i + 1) / images.length) * 100);\r\n            }\r\n\r\n            const bundlePricing = calculateBundlePricing(\r\n                uploadedItems.map(item => ({\r\n                    sizeId: item.sizeId,\r\n                    sizeLabel: item.sizeLabel\r\n                })),\r\n                productTier\r\n            );\r\n\r\n            const collectionData = {\r\n                type: creationMode, // 'collection' or 'gallery'\r\n                ownerId: currentUser.uid,\r\n                title: sanitizeTitle(title),\r\n                description: sanitizeDescription(description),\r\n                coverImage: uploadedItems[0].imageUrl,\r\n                items: uploadedItems,\r\n                postRefs: [],\r\n                visibility,\r\n                postToFeed,\r\n                productTier,\r\n                bundlePricing,\r\n                shopSettings: {\r\n                    showInStore,\r\n                    productTier\r\n                }\r\n            };\r\n\r\n            const newCollection = await createCollection(collectionData);\r\n\r\n            navigate(`/collection/${newCollection.id}`);\r\n        } catch (err) {\r\n            console.error('[CreateCollection] Error:', err);\r\n            showError(`Failed to create collection: ${err.message}`);\r\n        } finally {\r\n            setUploading(false);\r\n        }\r\n    };\r\n\r\n    const activeImage = images[activeImageIndex];\r\n\r\n    return (\r\n        <div className=\"ps-page-overflow\">\r\n            {/* Animated Stars Background */}\r\n            <div style={{\r\n                position: 'fixed',\r\n                top: 0,\r\n                left: 0,\r\n                right: 0,\r\n                bottom: 0,\r\n                pointerEvents: 'none',\r\n                zIndex: 0\r\n            }}>\r\n                {stars.map((star) => (\r\n                    <div\r\n                        key={star.id}\r\n                        style={{\r\n                            position: 'absolute',\r\n                            width: star.width + 'px',\r\n                            height: star.height + 'px',\r\n                            background: '#7FFFD4',\r\n                            borderRadius: '50%',\r\n                            top: star.top + '%',\r\n                            left: star.left + '%',\r\n                            opacity: star.opacity,\r\n                            animation: `twinkle ${star.duration}s ease-in-out infinite`,\r\n                            animationDelay: `${star.delay}s`,\r\n                            boxShadow: `0 0 ${star.glow}px #7FFFD4`\r\n                        }}\r\n                    />\r\n                ))}\r\n            </div>\r\n            <style>{`\r\n                @keyframes twinkle {\r\n                    0%, 100% { opacity: 0.3; transform: scale(1); }\r\n                    50% { opacity: 1; transform: scale(1.2); }\r\n                }\r\n            `}</style>\r\n\r\n            {/* \r\n               Header now respects Safe Spacing via padding in parent or explicit margin\r\n               Since we are in a 'ps-page-overflow' (assuming it handles scrollTop), \r\n               we might want absolute positioning or fixed header. \r\n               The 'PageHeader' component likely handles its own positioning, \r\n               but we should ensure it doesn't overlap. \r\n               \r\n               Actually, PageHeader is usually fixed. \r\n            */}\r\n\r\n            <PageHeader\r\n                title={\r\n                    creationMode === 'gallery' ? 'Create Studio' :\r\n                        creationMode === 'museum' ? 'Create Museum' :\r\n                            creationMode === 'magazine' ? 'Create Magazine' :\r\n                                'Create Collection'\r\n                }\r\n                leftAction={\r\n                    <PSButton\r\n                        variant=\"ghost\"\r\n                        size=\"md\"\r\n                        onClick={() => navigate(-1)}\r\n                    >\r\n                        Cancel\r\n                    </PSButton>\r\n                }\r\n                rightAction={\r\n                    <PSButton\r\n                        variant=\"mint\"\r\n                        size=\"md\"\r\n                        disabled={uploading || (creationMode !== 'museum' && creationMode !== 'magazine' && images.length === 0)}\r\n                        onClick={handleSubmit}\r\n                    >\r\n                        {uploading ? `${Math.round(uploadProgress)}%` : 'Create'}\r\n                    </PSButton>\r\n                }\r\n                showProgress={uploading}\r\n                bottomSlot={\r\n                    <ModeSelector\r\n                        creationMode={creationMode}\r\n                        setCreationMode={setCreationMode}\r\n                        noPadding={true}\r\n                    />\r\n                }\r\n            // Pass layout config to PageHeader if it supports it, \r\n            // or assume PageHeader handles basic top spacing. \r\n            // We'll rely on the container's paddingTop for content spacing.\r\n            />\r\n\r\n            <div style={containerStyle}>\r\n                <div style={gridStyle}>\r\n                    <div>\r\n                        <ImageUploadPanel\r\n                            images={images}\r\n                            activeImageIndex={activeImageIndex}\r\n                            setActiveImageIndex={setActiveImageIndex}\r\n                            removeImage={removeImage}\r\n                            handleFileSelect={handleFileSelect}\r\n                            fileInputRef={fileInputRef}\r\n                            creationMode={creationMode}\r\n                        />\r\n                    </div>\r\n\r\n                    <div style={{ display: 'flex', flexDirection: 'column', gap: '1.5rem' }}>\r\n                        <CollectionFields\r\n                            creationMode={creationMode}\r\n                            title={title}\r\n                            setTitle={setTitle}\r\n                        />\r\n\r\n                        {creationMode === 'magazine' && (\r\n                            <MagazineModePanel\r\n                                images={images}\r\n                                fileInputRef={fileInputRef}\r\n                                releaseFrequency={releaseFrequency}\r\n                                setReleaseFrequency={setReleaseFrequency}\r\n                                releaseDay={releaseDay}\r\n                                setReleaseDay={setReleaseDay}\r\n                                releaseTime={releaseTime}\r\n                                setReleaseTime={setReleaseTime}\r\n                                linkedGalleryId={linkedGalleryId}\r\n                                setLinkedGalleryId={setLinkedGalleryId}\r\n                                description={description}\r\n                                setDescription={setDescription}\r\n                                visibility={visibility}\r\n                                setVisibility={setVisibility}\r\n                            />\r\n                        )}\r\n\r\n                        {creationMode === 'museum' && (\r\n                            <MuseumModePanel\r\n                                images={images}\r\n                                fileInputRef={fileInputRef}\r\n                                description={description}\r\n                                setDescription={setDescription}\r\n                                visibility={visibility}\r\n                                setVisibility={setVisibility}\r\n                            />\r\n                        )}\r\n\r\n                        {creationMode === 'collection' && (\r\n                            <CollectionModePanel\r\n                                description={description}\r\n                                setDescription={setDescription}\r\n                                visibility={visibility}\r\n                                setVisibility={setVisibility}\r\n                                postToFeed={postToFeed}\r\n                                setPostToFeed={setPostToFeed}\r\n                                showInStore={showInStore}\r\n                                setShowInStore={setShowInStore}\r\n                                productTier={productTier}\r\n                                setProductTier={setProductTier}\r\n                                defaultSizeId={defaultSizeId}\r\n                                setDefaultSizeId={setDefaultSizeId}\r\n                                images={images}\r\n                                setImages={setImages}\r\n                                creationMode={creationMode}\r\n                            />\r\n                        )}\r\n\r\n                        {creationMode === 'gallery' && (\r\n                            <StudioModePanel\r\n                                description={description}\r\n                                setDescription={setDescription}\r\n                                visibility={visibility}\r\n                                setVisibility={setVisibility}\r\n                                postToFeed={postToFeed}\r\n                                setPostToFeed={setPostToFeed}\r\n                                showInStore={showInStore}\r\n                                setShowInStore={setShowInStore}\r\n                                productTier={productTier}\r\n                                setProductTier={setProductTier}\r\n                                defaultSizeId={defaultSizeId}\r\n                                setDefaultSizeId={setDefaultSizeId}\r\n                                images={images}\r\n                                setImages={setImages}\r\n                                creationMode={creationMode}\r\n                            />\r\n                        )}\r\n                    </div>\r\n\r\n                    <SubmitBar\r\n                        creationMode={creationMode}\r\n                        images={images}\r\n                    />\r\n                </div>\r\n            </div>\r\n        </div >\r\n    );\r\n};\r\n\r\nexport default CreateCollection;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\pages\\CreateGallery.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'showSuccess' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":24,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":35}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useRef, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { useToast } from '@/context/ToastContext';\r\nimport { createGallery } from '@/core/services/firestore/studios.service';\r\nimport { FaImage, FaTags, FaMapMarkerAlt, FaLock, FaGlobe, FaArrowLeft } from 'react-icons/fa';\r\nimport { doc, getDoc } from 'firebase/firestore';\r\nimport { db } from '@/firebase';\r\nimport { getUserTier, USER_TIERS } from '@/core/services/firestore/monetization.service';\r\nimport PaywallModal from '@/components/monetization/PaywallModal';\r\nimport '@/styles/create-gallery.css';\r\nimport StarBackground from '@/components/StarBackground';\r\nimport { sanitizeTitle, sanitizeDescription } from '@/core/utils/sanitize';\r\n\r\nconst POPULAR_TAGS = [\r\n    'landscape', 'portrait', 'street', 'nature', 'urban', 'film',\r\n    'digital', 'black-and-white', 'color', 'architecture', 'wildlife',\r\n    'macro', 'night', 'sunset', 'travel', 'documentary'\r\n];\r\n\r\nconst CreateStudio = () => {\r\n    const navigate = useNavigate();\r\n    const { currentUser } = useAuth();\r\n    const { showError, showSuccess, showWarning } = useToast();\r\n    const [userProfile, setUserProfile] = useState(null);\r\n    const [fetchingProfile, setFetchingProfile] = useState(true);\r\n    const [userTier, setUserTier] = useState(null);\r\n    const fileInputRef = useRef(null);\r\n\r\n    // Fetch user profile and tier\r\n    useEffect(() => {\r\n        const fetchProfile = async () => {\r\n            if (!currentUser) return;\r\n            try {\r\n                const userDoc = await getDoc(doc(db, 'users', currentUser.uid));\r\n                if (userDoc.exists()) {\r\n                    setUserProfile(userDoc.data());\r\n                }\r\n                const tier = await getUserTier(currentUser.uid);\r\n                setUserTier(tier);\r\n            } catch (error) {\r\n                console.error('Error fetching user profile:', error);\r\n            } finally {\r\n                setFetchingProfile(false);\r\n            }\r\n        };\r\n        fetchProfile();\r\n    }, [currentUser]);\r\n\r\n    // Form state\r\n    const [title, setTitle] = useState('');\r\n    const [description, setDescription] = useState('');\r\n    const [coverImage, setCoverImage] = useState(null);\r\n    const [coverImagePreview, setCoverImagePreview] = useState(null);\r\n    const [contentType, setContentType] = useState('both');\r\n    const [requiredTags, setRequiredTags] = useState([]);\r\n    const [customTag, setCustomTag] = useState('');\r\n    const [requiredLocations, setRequiredLocations] = useState([]);\r\n    const [locationInput, setLocationInput] = useState('');\r\n    const [isPublic, setIsPublic] = useState(true);\r\n    const [moderationEnabled, setModerationEnabled] = useState(false);\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    if (fetchingProfile) {\r\n        return <div className=\"loading-spinner\">Loading profile...</div>;\r\n    }\r\n\r\n    // Check if user is Ultra-tier Space Creator\r\n    if (userTier !== USER_TIERS.ULTRA && userTier !== USER_TIERS.PARTNER) {\r\n        return (\r\n            <>\r\n                <PaywallModal\r\n                    featureName=\"Studios\"\r\n                    onClose={() => navigate(-1)}\r\n                />\r\n            </>\r\n        );\r\n    }\r\n\r\n    const handleCoverImageSelect = (e) => {\r\n        const file = e.target.files[0];\r\n        if (file) {\r\n            setCoverImage(file);\r\n            const reader = new FileReader();\r\n            reader.onloadend = () => {\r\n                setCoverImagePreview(reader.result);\r\n            };\r\n            reader.readAsDataURL(file);\r\n        }\r\n    };\r\n\r\n    const handleTagToggle = (tag) => {\r\n        setRequiredTags(prev =>\r\n            prev.includes(tag)\r\n                ? prev.filter(t => t !== tag)\r\n                : [...prev, tag]\r\n        );\r\n    };\r\n\r\n    const handleAddCustomTag = () => {\r\n        if (customTag.trim() && !requiredTags.includes(customTag.trim())) {\r\n            setRequiredTags(prev => [...prev, customTag.trim()]);\r\n            setCustomTag('');\r\n        }\r\n    };\r\n\r\n    const handleAddLocation = () => {\r\n        if (locationInput.trim() && !requiredLocations.includes(locationInput.trim())) {\r\n            setRequiredLocations(prev => [...prev, locationInput.trim()]);\r\n            setLocationInput('');\r\n        }\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n\r\n\r\n        if (!title.trim()) {\r\n            showError('Please enter a studio title');\r\n            return;\r\n        }\r\n\r\n        if (!currentUser || !userProfile) {\r\n            console.error('Missing user data:', { currentUser, userProfile });\r\n            showError('User data missing. Please try refreshing the page.');\r\n            return;\r\n        }\r\n\r\n        setLoading(true);\r\n\r\n        try {\r\n            const studioData = {\r\n                title: sanitizeTitle(title),\r\n                description: sanitizeDescription(description),\r\n                contentType,\r\n                requiredTags,\r\n                requiredLocations,\r\n                isPublic,\r\n                moderationEnabled\r\n            };\r\n\r\n\r\n\r\n            const studio = await createGallery(\r\n                studioData,\r\n                coverImage,\r\n                currentUser.uid,\r\n                userProfile\r\n            );\r\n\r\n\r\n\r\n            if (studio && studio.id) {\r\n\r\n                navigate(`/gallery/${studio.id}`);\r\n            } else {\r\n                console.error('Studio created but no ID returned:', studio);\r\n                showWarning('Studio created but ID missing. Check console.');\r\n            }\r\n        } catch (error) {\r\n            console.error('Error creating studio:', error);\r\n            showError(`Failed to create studio: ${error.message}`);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n\r\n    return (\r\n        <div className=\"create-gallery-container\" style={{ position: 'relative', overflow: 'hidden' }}>\r\n            {/* Animated Stars Background */}\r\n            {/* Animated Stars Background */}\r\n            <StarBackground />\r\n\r\n            <div className=\"create-gallery-header\" style={{ position: 'relative', zIndex: 1 }}>\r\n                <button onClick={() => navigate(-1)} className=\"back-btn\">\r\n                    <FaArrowLeft /> Back\r\n                </button>\r\n                <h1>Create Studio</h1>\r\n                <p className=\"subtitle\">Create a collaborative space for sharing content</p>\r\n            </div>\r\n\r\n            <form onSubmit={handleSubmit} className=\"create-gallery-form\">\r\n                {/* Cover Image */}\r\n                <div className=\"form-section\">\r\n                    <h3><FaImage /> Cover Image</h3>\r\n                    <div\r\n                        className=\"cover-upload-area\"\r\n                        onClick={() => fileInputRef.current?.click()}\r\n                        style={{\r\n                            backgroundImage: coverImagePreview ? `url(${coverImagePreview})` : 'none'\r\n                        }}\r\n                    >\r\n                        {!coverImagePreview && (\r\n                            <div className=\"upload-placeholder\">\r\n                                <FaImage size={48} />\r\n                                <p>Click to upload cover image</p>\r\n                                <span>Recommended: 1200x400px</span>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                    <input\r\n                        ref={fileInputRef}\r\n                        type=\"file\"\r\n                        accept=\"image/*\"\r\n                        onChange={handleCoverImageSelect}\r\n                        style={{ display: 'none' }}\r\n                    />\r\n                </div>\r\n\r\n                {/* Basic Info */}\r\n                <div className=\"form-section\">\r\n                    <h3>Basic Information</h3>\r\n                    <div className=\"form-field\">\r\n                        <label>Studio Title *</label>\r\n                        <input\r\n                            type=\"text\"\r\n                            value={title}\r\n                            onChange={(e) => setTitle(e.target.value)}\r\n                            placeholder=\"e.g., Landscape Photography Studio\"\r\n                            maxLength={100}\r\n                            required\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-field\">\r\n                        <label>Description</label>\r\n                        <textarea\r\n                            value={description}\r\n                            onChange={(e) => setDescription(e.target.value)}\r\n                            placeholder=\"Describe what this studio is about...\"\r\n                            rows={4}\r\n                            maxLength={500}\r\n                        />\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Content Type */}\r\n                <div className=\"form-section\">\r\n                    <h3>Content Type</h3>\r\n                    <p className=\"field-hint\">What can members add to this studio?</p>\r\n                    <div className=\"content-type-options\">\r\n                        <label className={`content-type-option ${contentType === 'posts' ? 'active' : ''}`}>\r\n                            <input\r\n                                type=\"radio\"\r\n                                value=\"posts\"\r\n                                checked={contentType === 'posts'}\r\n                                onChange={(e) => setContentType(e.target.value)}\r\n                            />\r\n                            <div>\r\n                                <strong>Posts Only</strong>\r\n                                <span>Individual photos and images</span>\r\n                            </div>\r\n                        </label>\r\n                        <label className={`content-type-option ${contentType === 'collections' ? 'active' : ''}`}>\r\n                            <input\r\n                                type=\"radio\"\r\n                                value=\"collections\"\r\n                                checked={contentType === 'collections'}\r\n                                onChange={(e) => setContentType(e.target.value)}\r\n                            />\r\n                            <div>\r\n                                <strong>Collections Only</strong>\r\n                                <span>Curated collections of posts</span>\r\n                            </div>\r\n                        </label>\r\n                        <label className={`content-type-option ${contentType === 'both' ? 'active' : ''}`}>\r\n                            <input\r\n                                type=\"radio\"\r\n                                value=\"both\"\r\n                                checked={contentType === 'both'}\r\n                                onChange={(e) => setContentType(e.target.value)}\r\n                            />\r\n                            <div>\r\n                                <strong>Both</strong>\r\n                                <span>Posts and collections</span>\r\n                            </div>\r\n                        </label>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Required Tags */}\r\n                <div className=\"form-section\">\r\n                    <h3><FaTags /> Studio Tags (Optional)</h3>\r\n                    <p className=\"field-hint\">Tags help users discover your studio through search</p>\r\n\r\n                    <div className=\"tag-selector\">\r\n                        {POPULAR_TAGS.map(tag => (\r\n                            <button\r\n                                key={tag}\r\n                                type=\"button\"\r\n                                className={`tag-btn ${requiredTags.includes(tag) ? 'active' : ''}`}\r\n                                onClick={() => handleTagToggle(tag)}\r\n                            >\r\n                                {tag}\r\n                            </button>\r\n                        ))}\r\n                    </div>\r\n\r\n                    <div className=\"custom-tag-input\">\r\n                        <input\r\n                            type=\"text\"\r\n                            value={customTag}\r\n                            onChange={(e) => setCustomTag(e.target.value)}\r\n                            placeholder=\"Add custom tag...\"\r\n                            onKeyPress={(e) => e.key === 'Enter' && (e.preventDefault(), handleAddCustomTag())}\r\n                        />\r\n                        <button type=\"button\" onClick={handleAddCustomTag}>Add</button>\r\n                    </div>\r\n\r\n                    {requiredTags.length > 0 && (\r\n                        <div className=\"selected-tags\">\r\n                            <strong>Studio tags:</strong>\r\n                            {requiredTags.map(tag => (\r\n                                <span key={tag} className=\"selected-tag\">\r\n                                    {tag}\r\n                                    <button type=\"button\" onClick={() => handleTagToggle(tag)}>├ù</button>\r\n                                </span>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Required Locations */}\r\n                <div className=\"form-section\">\r\n                    <h3><FaMapMarkerAlt /> Location Focus (Optional)</h3>\r\n                    <p className=\"field-hint\">Specify locations this studio focuses on</p>\r\n\r\n                    <div className=\"location-input\">\r\n                        <input\r\n                            type=\"text\"\r\n                            value={locationInput}\r\n                            onChange={(e) => setLocationInput(e.target.value)}\r\n                            placeholder=\"e.g., New York, Tokyo, Paris...\"\r\n                            onKeyPress={(e) => e.key === 'Enter' && (e.preventDefault(), handleAddLocation())}\r\n                        />\r\n                        <button type=\"button\" onClick={handleAddLocation}>Add</button>\r\n                    </div>\r\n\r\n                    {requiredLocations.length > 0 && (\r\n                        <div className=\"selected-locations\">\r\n                            {requiredLocations.map(loc => (\r\n                                <span key={loc} className=\"selected-location\">\r\n                                    {loc}\r\n                                    <button\r\n                                        type=\"button\"\r\n                                        onClick={() => setRequiredLocations(prev => prev.filter(l => l !== loc))}\r\n                                    >\r\n                                        ├ù\r\n                                    </button>\r\n                                </span>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Settings */}\r\n                <div className=\"form-section\">\r\n                    <h3>Studio Settings</h3>\r\n\r\n                    <label className=\"toggle-option\">\r\n                        <input\r\n                            type=\"checkbox\"\r\n                            checked={isPublic}\r\n                            onChange={(e) => setIsPublic(e.target.checked)}\r\n                        />\r\n                        <div>\r\n                            <strong>{isPublic ? <FaGlobe /> : <FaLock />} {isPublic ? 'Public' : 'Private'}</strong>\r\n                            <span>{isPublic ? 'Anyone can view this studio' : 'Only members can view'}</span>\r\n                        </div>\r\n                    </label>\r\n\r\n                    <label className=\"toggle-option\">\r\n                        <input\r\n                            type=\"checkbox\"\r\n                            checked={moderationEnabled}\r\n                            onChange={(e) => setModerationEnabled(e.target.checked)}\r\n                        />\r\n                        <div>\r\n                            <strong>Require Approval</strong>\r\n                            <span>You must approve content before it appears</span>\r\n                        </div>\r\n                    </label>\r\n                </div>\r\n\r\n                {/* Submit */}\r\n                <div className=\"form-actions\">\r\n                    <button type=\"button\" onClick={() => navigate(-1)} className=\"cancel-btn\">\r\n                        Cancel\r\n                    </button>\r\n                    <button type=\"submit\" disabled={loading} className=\"create-btn\">\r\n                        {loading ? 'Creating...' : 'Create Studio'}\r\n                    </button>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CreateStudio;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\pages\\CreateMagazineIssue.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaCheck' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":57,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":64},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'issueRef' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":241,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":241,"endColumn":27}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useRef, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { ref, uploadBytes, getDownloadURL } from 'firebase/storage';\r\nimport { storage, db } from '@/firebase';\r\nimport { collection, addDoc, serverTimestamp, doc, getDoc } from 'firebase/firestore';\r\nimport { FaImage, FaTimes, FaPlus, FaArrowLeft, FaBook, FaCheck, FaGripVertical } from 'react-icons/fa';\r\nimport { MAGAZINE_CONFIG } from '@/core/constants/magazineConfig';\r\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd';\r\nimport { sanitizeDescription } from '@/core/utils/sanitize';\r\n\r\nconst CreateMagazineIssue = () => {\r\n    const { id: magazineId } = useParams();\r\n    const navigate = useNavigate();\r\n    const { currentUser } = useAuth();\r\n    const fileInputRef = useRef(null);\r\n\r\n    const [magazine, setMagazine] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [slides, setSlides] = useState([]);\r\n    const [uploading, setUploading] = useState(false);\r\n    const [uploadProgress, setUploadProgress] = useState(0);\r\n    const [includeCover, setIncludeCover] = useState(true);\r\n\r\n    useEffect(() => {\r\n        const fetchMagazine = async () => {\r\n            try {\r\n                const magazineRef = doc(db, 'magazines', magazineId);\r\n                const magazineSnap = await getDoc(magazineRef);\r\n\r\n                if (magazineSnap.exists()) {\r\n                    const data = { id: magazineSnap.id, ...magazineSnap.data() };\r\n                    setMagazine(data);\r\n\r\n                    // Check if user is owner\r\n                    if (data.ownerId !== currentUser?.uid) {\r\n                        alert('You do not have permission to create issues for this magazine');\r\n                        navigate(`/magazine/${magazineId}`);\r\n                    }\r\n                } else {\r\n                    alert('Magazine not found');\r\n                    navigate('/');\r\n                }\r\n            } catch (err) {\r\n                console.error('Error fetching magazine:', err);\r\n                alert('Failed to load magazine');\r\n                navigate('/');\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        if (magazineId && currentUser) {\r\n            fetchMagazine();\r\n        }\r\n    }, [magazineId, currentUser, navigate]);\r\n\r\n    const handleFileSelect = async (e) => {\r\n        const files = Array.from(e.target.files);\r\n        if (files.length === 0) return;\r\n\r\n        const maxSlides = includeCover ? MAGAZINE_CONFIG.MAX_SLIDES + 1 : MAGAZINE_CONFIG.MAX_SLIDES;\r\n        const remainingSlots = maxSlides - slides.length;\r\n        const filesToAdd = files.slice(0, remainingSlots);\r\n\r\n        const validSlides = [];\r\n        const errors = [];\r\n\r\n        for (const file of filesToAdd) {\r\n            const preview = URL.createObjectURL(file);\r\n\r\n            // Check aspect ratio\r\n            const img = new Image();\r\n            img.src = preview;\r\n            await new Promise(resolve => { img.onload = resolve; });\r\n\r\n            const aspectRatio = img.width / img.height;\r\n            const expectedRatio = MAGAZINE_CONFIG.ASPECT_RATIO;\r\n            const tolerance = 0.05;\r\n\r\n            // VALIDATION: Block submission if aspect ratio is incorrect beyond tolerance\r\n            if (Math.abs(aspectRatio - expectedRatio) > tolerance) {\r\n                errors.push(`\"${file.name}\" has incorrect aspect ratio ${aspectRatio.toFixed(2)} (expected ${expectedRatio.toFixed(2)} ┬▒ ${tolerance})`);\r\n                URL.revokeObjectURL(preview);\r\n                continue;\r\n            }\r\n\r\n            // VALIDATION: Prevent submitting identical slide twice (check file name and size)\r\n            const isDuplicate = slides.some(existingSlide =>\r\n                existingSlide.file.name === file.name &&\r\n                existingSlide.file.size === file.size\r\n            );\r\n\r\n            if (isDuplicate) {\r\n                errors.push(`\"${file.name}\" is already added to this issue`);\r\n                URL.revokeObjectURL(preview);\r\n                continue;\r\n            }\r\n\r\n            // VALIDATION: Add preview dimension warnings\r\n            const warnings = [];\r\n            if (img.width < 2550 || img.height < 3300) {\r\n                warnings.push(`Low resolution (${img.width}├ù${img.height}px). Recommended: 2550├ù3300px or higher for print quality`);\r\n            }\r\n            if (img.width > 8500 || img.height > 11000) {\r\n                warnings.push(`Very large file (${img.width}├ù${img.height}px). May cause slow upload`);\r\n            }\r\n\r\n            validSlides.push({\r\n                file,\r\n                preview,\r\n                caption: '',\r\n                aspectRatio,\r\n                width: img.width,\r\n                height: img.height,\r\n                order: slides.length + validSlides.length,\r\n                warnings\r\n            });\r\n        }\r\n\r\n        // Show specific error toasts\r\n        if (errors.length > 0) {\r\n            alert(`Could not add ${errors.length} file(s):\\n\\n${errors.join('\\n')}`);\r\n        }\r\n\r\n        if (validSlides.length > 0) {\r\n            setSlides(prev => [...prev, ...validSlides]);\r\n        }\r\n    };\r\n\r\n    const removeSlide = (index) => {\r\n        setSlides(prev => prev.filter((_, i) => i !== index).map((slide, i) => ({ ...slide, order: i })));\r\n    };\r\n\r\n    const updateCaption = (index, caption) => {\r\n        setSlides(prev => prev.map((slide, i) => i === index ? { ...slide, caption } : slide));\r\n    };\r\n\r\n    const handleDragEnd = (result) => {\r\n        if (!result.destination) return;\r\n\r\n        // SAFETY: Ensure drag-drop reordering updates order correctly\r\n        if (result.source.index === result.destination.index) return;\r\n\r\n        const items = Array.from(slides);\r\n        const [reorderedItem] = items.splice(result.source.index, 1);\r\n        items.splice(result.destination.index, 0, reorderedItem);\r\n\r\n        // SAFETY: Explicitly update order property to match new index\r\n        const reorderedSlides = items.map((slide, index) => ({\r\n            ...slide,\r\n            order: index\r\n        }));\r\n\r\n        setSlides(reorderedSlides);\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n\r\n        const minSlides = includeCover ? MAGAZINE_CONFIG.MIN_SLIDES + 1 : MAGAZINE_CONFIG.MIN_SLIDES;\r\n        const maxSlides = includeCover ? MAGAZINE_CONFIG.MAX_SLIDES + 1 : MAGAZINE_CONFIG.MAX_SLIDES;\r\n\r\n        // VALIDATION: More specific error messages\r\n        if (slides.length < minSlides) {\r\n            alert(`Γ¥î Not enough slides\\n\\nYou have ${slides.length} slide${slides.length !== 1 ? 's' : ''}, but need at least ${minSlides} slides${includeCover ? ' (including cover)' : ''}.\\n\\nPlease add ${minSlides - slides.length} more slide${minSlides - slides.length !== 1 ? 's' : ''}.`);\r\n            return;\r\n        }\r\n\r\n        if (slides.length > maxSlides) {\r\n            alert(`Γ¥î Too many slides\\n\\nYou have ${slides.length} slides, but the maximum is ${maxSlides} slides${includeCover ? ' (including cover)' : ''}.\\n\\nPlease remove ${slides.length - maxSlides} slide${slides.length - maxSlides !== 1 ? 's' : ''}.`);\r\n            return;\r\n        }\r\n\r\n        // VALIDATION: Final aspect ratio check before submission\r\n        const expectedRatio = MAGAZINE_CONFIG.ASPECT_RATIO;\r\n        const tolerance = 0.05;\r\n        const invalidSlides = slides.filter(slide =>\r\n            Math.abs(slide.aspectRatio - expectedRatio) > tolerance\r\n        );\r\n\r\n        if (invalidSlides.length > 0) {\r\n            alert(`Γ¥î Invalid aspect ratios detected\\n\\n${invalidSlides.length} slide${invalidSlides.length !== 1 ? 's have' : ' has'} incorrect aspect ratio.\\n\\nExpected: ${expectedRatio.toFixed(2)} (8.5\" ├ù 11\")\\nTolerance: ┬▒${tolerance}\\n\\nPlease remove or replace the invalid slide${invalidSlides.length !== 1 ? 's' : ''}.`);\r\n            return;\r\n        }\r\n\r\n        // VALIDATION: Check for duplicate slides before submission\r\n        const duplicates = [];\r\n        for (let i = 0; i < slides.length; i++) {\r\n            for (let j = i + 1; j < slides.length; j++) {\r\n                if (slides[i].file.name === slides[j].file.name &&\r\n                    slides[i].file.size === slides[j].file.size) {\r\n                    duplicates.push(slides[i].file.name);\r\n                }\r\n            }\r\n        }\r\n\r\n        if (duplicates.length > 0) {\r\n            alert(`Γ¥î Duplicate slides detected\\n\\nThe following file${duplicates.length !== 1 ? 's are' : ' is'} added multiple times:\\n\\n${duplicates.join('\\n')}\\n\\nPlease remove duplicate${duplicates.length !== 1 ? 's' : ''}.`);\r\n            return;\r\n        }\r\n\r\n        try {\r\n            setUploading(true);\r\n            setUploadProgress(0);\r\n\r\n            // Upload all slides\r\n            const uploadedSlides = [];\r\n            for (let i = 0; i < slides.length; i++) {\r\n                const slide = slides[i];\r\n                const fileName = `magazines/${magazineId}/issues/${Date.now()}_slide_${i.toString().padStart(3, '0')}_${slide.file.name}`;\r\n                const storageRef = ref(storage, fileName);\r\n\r\n                await uploadBytes(storageRef, slide.file);\r\n                const imageUrl = await getDownloadURL(storageRef);\r\n\r\n                uploadedSlides.push({\r\n                    imageUrl,\r\n                    storagePath: fileName,\r\n                    caption: sanitizeDescription(slide.caption || ''),\r\n                    contributorId: currentUser.uid,\r\n                    order: i\r\n                });\r\n\r\n                setUploadProgress(((i + 1) / slides.length) * 100);\r\n            }\r\n\r\n            // Create issue document\r\n            const issueData = {\r\n                magazineId,\r\n                issueNumber: (magazine.issueCount || 0) + 1,\r\n                status: 'queued',\r\n                scheduledPublishDate: magazine.nextReleaseDate,\r\n                publishedAt: null,\r\n                slides: uploadedSlides,\r\n                includeCover,\r\n                createdAt: serverTimestamp(),\r\n                updatedAt: serverTimestamp()\r\n            };\r\n\r\n            const issueRef = await addDoc(collection(db, 'magazineIssues'), issueData);\r\n\r\n\r\n            alert('Issue queued successfully! It will be published on the scheduled date.');\r\n            navigate(`/magazine/${magazineId}`);\r\n        } catch (err) {\r\n            console.error('Error creating issue:', err);\r\n            // More specific error toast\r\n            const errorMessage = err.code === 'storage/unauthorized'\r\n                ? 'Upload failed: Permission denied. Please check your authentication.'\r\n                : err.code === 'storage/quota-exceeded'\r\n                    ? 'Upload failed: Storage quota exceeded. Please contact support.'\r\n                    : err.code === 'storage/canceled'\r\n                        ? 'Upload canceled by user.'\r\n                        : `Failed to create issue: ${err.message || 'Unknown error occurred'}`;\r\n\r\n            alert(`Γ¥î ${errorMessage}`);\r\n        } finally {\r\n            setUploading(false);\r\n        }\r\n    };\r\n\r\n    if (loading) return <div style={{ height: '100vh', display: 'flex', alignItems: 'center', justifyContent: 'center', color: '#fff' }}>Loading...</div>;\r\n    if (!magazine) return null;\r\n\r\n    const minSlides = includeCover ? MAGAZINE_CONFIG.MIN_SLIDES + 1 : MAGAZINE_CONFIG.MIN_SLIDES;\r\n    const maxSlides = includeCover ? MAGAZINE_CONFIG.MAX_SLIDES + 1 : MAGAZINE_CONFIG.MAX_SLIDES;\r\n    const isValid = slides.length >= minSlides && slides.length <= maxSlides;\r\n\r\n    return (\r\n        <div style={{ minHeight: '100vh', background: '#000', color: '#fff', paddingBottom: '6rem' }}>\r\n            {/* Header */}\r\n            <div style={{\r\n                padding: '1rem 2rem',\r\n                borderBottom: '1px solid #333',\r\n                display: 'flex',\r\n                justifyContent: 'space-between',\r\n                alignItems: 'center',\r\n                position: 'sticky',\r\n                top: 0,\r\n                background: '#000',\r\n                zIndex: 100\r\n            }}>\r\n                <button\r\n                    onClick={() => navigate(`/magazine/${magazineId}`)}\r\n                    style={{\r\n                        background: 'transparent',\r\n                        border: 'none',\r\n                        color: '#888',\r\n                        cursor: 'pointer',\r\n                        fontSize: '1rem',\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        gap: '0.5rem'\r\n                    }}\r\n                >\r\n                    <FaArrowLeft /> Cancel\r\n                </button>\r\n                <h1 style={{ fontSize: '1.2rem', fontWeight: 'bold' }}>Create Issue #{(magazine.issueCount || 0) + 1}</h1>\r\n                <button\r\n                    onClick={handleSubmit}\r\n                    disabled={uploading || !isValid}\r\n                    style={{\r\n                        background: uploading || !isValid ? '#333' : '#7FFFD4',\r\n                        color: uploading || !isValid ? '#666' : '#000',\r\n                        border: 'none',\r\n                        padding: '0.5rem 1.5rem',\r\n                        borderRadius: '20px',\r\n                        fontWeight: 'bold',\r\n                        cursor: uploading || !isValid ? 'not-allowed' : 'pointer'\r\n                    }}\r\n                >\r\n                    {uploading ? `${Math.round(uploadProgress)}%` : 'Queue Issue'}\r\n                </button>\r\n            </div>\r\n\r\n            <div style={{ maxWidth: '1200px', margin: '0 auto', padding: '2rem' }}>\r\n                {/* Magazine Info */}\r\n                <div style={{ marginBottom: '2rem', padding: '1.5rem', background: '#111', borderRadius: '12px', border: '1px solid #333' }}>\r\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '1rem', marginBottom: '1rem' }}>\r\n                        <FaBook style={{ color: '#7FFFD4', fontSize: '1.5rem' }} />\r\n                        <div>\r\n                            <h2 style={{ margin: 0, fontSize: '1.5rem' }}>{magazine.title}</h2>\r\n                            <p style={{ margin: '0.25rem 0 0 0', color: '#888', fontSize: '0.9rem' }}>\r\n                                Next Release: {magazine.nextReleaseDate?.toDate ? magazine.nextReleaseDate.toDate().toLocaleDateString() : 'Not scheduled'}\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Cover Slide Toggle */}\r\n                    <label style={{ display: 'flex', alignItems: 'center', gap: '0.75rem', cursor: 'pointer', marginTop: '1rem' }}>\r\n                        <input\r\n                            type=\"checkbox\"\r\n                            checked={includeCover}\r\n                            onChange={(e) => setIncludeCover(e.target.checked)}\r\n                            style={{ width: '20px', height: '20px', cursor: 'pointer' }}\r\n                        />\r\n                        <div>\r\n                            <div style={{ fontWeight: '600', color: '#ccc' }}>Include Cover Slide</div>\r\n                            <div style={{ fontSize: '0.85rem', color: '#666', marginTop: '0.25rem' }}>\r\n                                First slide will be used as the issue cover\r\n                            </div>\r\n                        </div>\r\n                    </label>\r\n                </div>\r\n\r\n                {/* Slide Counter */}\r\n                <div style={{\r\n                    marginBottom: '1.5rem',\r\n                    padding: '1rem',\r\n                    background: slides.length >= minSlides && slides.length <= maxSlides ? 'rgba(127, 255, 212, 0.1)' : 'rgba(255, 68, 68, 0.1)',\r\n                    border: `1px solid ${slides.length >= minSlides && slides.length <= maxSlides ? 'rgba(127, 255, 212, 0.3)' : 'rgba(255, 68, 68, 0.3)'}`,\r\n                    borderRadius: '8px',\r\n                    color: slides.length >= minSlides && slides.length <= maxSlides ? '#7FFFD4' : '#ff4444',\r\n                    fontSize: '0.9rem',\r\n                    textAlign: 'center'\r\n                }}>\r\n                    {slides.length} / {minSlides}-{maxSlides} slides\r\n                    {slides.length < minSlides && ` (need ${minSlides - slides.length} more)`}\r\n                    {slides.length > maxSlides && ` (remove ${slides.length - maxSlides})`}\r\n                </div>\r\n\r\n                {/* Slide Grid */}\r\n                {slides.length === 0 ? (\r\n                    <div\r\n                        onClick={() => fileInputRef.current?.click()}\r\n                        style={{\r\n                            aspectRatio: '3/2',\r\n                            background: '#111',\r\n                            border: '2px dashed #333',\r\n                            borderRadius: '12px',\r\n                            display: 'flex',\r\n                            flexDirection: 'column',\r\n                            alignItems: 'center',\r\n                            justifyContent: 'center',\r\n                            cursor: 'pointer',\r\n                            gap: '1rem',\r\n                            marginBottom: '2rem'\r\n                        }}\r\n                    >\r\n                        <FaImage style={{ fontSize: '3rem', color: '#666' }} />\r\n                        <div style={{ color: '#888', textAlign: 'center' }}>\r\n                            <div style={{ fontWeight: 'bold', marginBottom: '0.5rem' }}>\r\n                                Add Slides to Issue\r\n                            </div>\r\n                            <div style={{ fontSize: '0.9rem' }}>\r\n                                {minSlides}-{maxSlides} slides required ΓÇó 8.5\" ├ù 11\" aspect ratio\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                ) : (\r\n                    <DragDropContext onDragEnd={handleDragEnd}>\r\n                        <Droppable droppableId=\"slides\">\r\n                            {(provided) => (\r\n                                <div\r\n                                    {...provided.droppableProps}\r\n                                    ref={provided.innerRef}\r\n                                    style={{ display: 'flex', flexDirection: 'column', gap: '1rem', marginBottom: '2rem' }}\r\n                                >\r\n                                    {slides.map((slide, index) => (\r\n                                        <Draggable key={index} draggableId={`slide-${index}`} index={index}>\r\n                                            {(provided) => (\r\n                                                <div\r\n                                                    ref={provided.innerRef}\r\n                                                    {...provided.draggableProps}\r\n                                                    style={{\r\n                                                        ...provided.draggableProps.style,\r\n                                                        background: '#111',\r\n                                                        borderRadius: '12px',\r\n                                                        padding: '1rem',\r\n                                                        border: '1px solid #333',\r\n                                                        display: 'grid',\r\n                                                        gridTemplateColumns: 'auto 200px 1fr auto',\r\n                                                        gap: '1rem',\r\n                                                        alignItems: 'center'\r\n                                                    }}\r\n                                                >\r\n                                                    <div {...provided.dragHandleProps} style={{ cursor: 'grab', color: '#666' }}>\r\n                                                        <FaGripVertical />\r\n                                                    </div>\r\n\r\n                                                    <div style={{\r\n                                                        aspectRatio: '0.7727',\r\n                                                        background: `url(${slide.preview})`,\r\n                                                        backgroundSize: 'cover',\r\n                                                        backgroundPosition: 'center',\r\n                                                        borderRadius: '8px',\r\n                                                        border: '1px solid #333'\r\n                                                    }} />\r\n\r\n                                                    <div>\r\n                                                        <div style={{ fontSize: '0.9rem', color: '#7FFFD4', marginBottom: '0.5rem' }}>\r\n                                                            {index === 0 && includeCover ? 'Cover Slide' : `Slide ${index + 1}`}\r\n                                                        </div>\r\n                                                        <input\r\n                                                            type=\"text\"\r\n                                                            value={slide.caption}\r\n                                                            onChange={(e) => updateCaption(index, e.target.value)}\r\n                                                            placeholder=\"Caption (optional)\"\r\n                                                            style={{\r\n                                                                width: '100%',\r\n                                                                padding: '0.5rem',\r\n                                                                background: '#000',\r\n                                                                border: '1px solid #333',\r\n                                                                borderRadius: '8px',\r\n                                                                color: '#fff',\r\n                                                                fontSize: '0.9rem'\r\n                                                            }}\r\n                                                        />\r\n                                                        {/* VALIDATION: Display dimension warnings */}\r\n                                                        {slide.warnings && slide.warnings.length > 0 && (\r\n                                                            <div style={{ marginTop: '0.5rem' }}>\r\n                                                                {slide.warnings.map((warning, wIndex) => (\r\n                                                                    <div key={wIndex} style={{\r\n                                                                        fontSize: '0.75rem',\r\n                                                                        color: '#ffa500',\r\n                                                                        display: 'flex',\r\n                                                                        alignItems: 'center',\r\n                                                                        gap: '0.25rem',\r\n                                                                        marginTop: '0.25rem'\r\n                                                                    }}>\r\n                                                                        <span>ΓÜá∩╕Å</span>\r\n                                                                        <span>{warning}</span>\r\n                                                                    </div>\r\n                                                                ))}\r\n                                                            </div>\r\n                                                        )}\r\n                                                    </div>\r\n\r\n                                                    <button\r\n                                                        onClick={() => removeSlide(index)}\r\n                                                        style={{\r\n                                                            background: 'rgba(255, 68, 68, 0.2)',\r\n                                                            border: '1px solid rgba(255, 68, 68, 0.5)',\r\n                                                            borderRadius: '8px',\r\n                                                            width: '40px',\r\n                                                            height: '40px',\r\n                                                            display: 'flex',\r\n                                                            alignItems: 'center',\r\n                                                            justifyContent: 'center',\r\n                                                            cursor: 'pointer',\r\n                                                            color: '#ff4444'\r\n                                                        }}\r\n                                                    >\r\n                                                        <FaTimes />\r\n                                                    </button>\r\n                                                </div>\r\n                                            )}\r\n                                        </Draggable>\r\n                                    ))}\r\n                                    {provided.placeholder}\r\n                                </div>\r\n                            )}\r\n                        </Droppable>\r\n                    </DragDropContext>\r\n                )}\r\n\r\n                {/* Add More Button */}\r\n                {slides.length > 0 && slides.length < maxSlides && (\r\n                    <button\r\n                        onClick={() => fileInputRef.current?.click()}\r\n                        style={{\r\n                            width: '100%',\r\n                            padding: '1rem',\r\n                            background: '#111',\r\n                            border: '2px dashed #333',\r\n                            borderRadius: '12px',\r\n                            color: '#7FFFD4',\r\n                            cursor: 'pointer',\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            justifyContent: 'center',\r\n                            gap: '0.5rem',\r\n                            fontWeight: 'bold',\r\n                            fontSize: '1rem'\r\n                        }}\r\n                    >\r\n                        <FaPlus /> Add More Slides ({maxSlides - slides.length} remaining)\r\n                    </button>\r\n                )}\r\n\r\n                <input\r\n                    ref={fileInputRef}\r\n                    type=\"file\"\r\n                    accept=\"image/*\"\r\n                    multiple\r\n                    onChange={handleFileSelect}\r\n                    style={{ display: 'none' }}\r\n                />\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CreateMagazineIssue;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\pages\\CreateMuseumPage.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport MuseumCreator from '@/components/monetization/MuseumCreator';\r\nimport HeaderBar from '@/components/HeaderBar';\r\n\r\nconst CreateMuseumPage = () => {\r\n    const navigate = useNavigate();\r\n\r\n    return (\r\n        <div style={{\r\n            minHeight: '100vh',\r\n            background: '#000',\r\n            color: '#fff',\r\n            paddingBottom: '80px'\r\n        }}>\r\n            <HeaderBar title=\"Create Museum\" variant=\"blur\" />\r\n\r\n            <div style={{ padding: '1rem' }}>\r\n                <MuseumCreator onClose={() => navigate('/museum')} />\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CreateMuseumPage;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\pages\\CreatePost.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isFeatureEnabled' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaPlus' is defined but never used. Allowed unused vars must match /^_/u.","line":20,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaTrash' is defined but never used. Allowed unused vars must match /^_/u.","line":20,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":34},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaPalette' is defined but never used. Allowed unused vars must match /^_/u.","line":20,"column":94,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":103},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":47,"column":34,"nodeType":"Identifier","messageId":"unusedVar","endLine":47,"endColumn":39},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'saveDraft' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":49,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":49,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'loadDraft' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":49,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":49,"endColumn":33},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'hasDraft' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":49,"column":47,"nodeType":"Identifier","messageId":"unusedVar","endLine":49,"endColumn":55},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'hasUnsavedChanges' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":53,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":53,"endColumn":29},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'atmosphereBackground' and 'slides'. Either include them or remove the dependency array.","line":104,"column":8,"nodeType":"ArrayExpression","endLine":104,"endColumn":43,"suggestions":[{"desc":"Update the dependencies array to be: [atmosphereBackground, slides, slides.length]","fix":{"range":[4725,4760],"text":"[atmosphereBackground, slides, slides.length]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a complex expression in the dependency array. Extract it to a separate variable so it can be statically checked.","line":104,"column":24,"nodeType":"ChainExpression","endLine":104,"endColumn":42},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setInstantPhotoCount' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":137,"column":31,"nodeType":"Identifier","messageId":"unusedVar","endLine":137,"endColumn":51},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setFilmMode' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":139,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":139,"endColumn":33},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setCreateSpaceCard' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":157,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":157,"endColumn":47},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setSpaceCardData' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":159,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":159,"endColumn":43}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":16,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useRef, useEffect, useMemo } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { useCreatePost } from '@/hooks/useCreatePost';\r\nimport { useCollections } from '@/hooks/useCollections';\r\nimport { isFeatureEnabled } from '@/config/featureFlags';\r\nimport { useDraftSaving } from '@/hooks/useDraftSaving';\r\n\r\nimport ThumbnailStrip from '@/components/create-post/ThumbnailStrip';\r\nimport ImageCarousel from '@/components/create-post/ImageCarousel';\r\nimport TagCategoryPanel from '@/components/create-post/TagCategoryPanel';\r\nimport FilmOptionsPanel from '@/components/create-post/FilmOptionsPanel';\r\nimport ManualExifEditor from '@/components/create-post/ManualExifEditor';\r\nimport CollectionSelector from '@/components/create-post/CollectionSelector';\r\nimport RatingSystemSelector from '@/components/create-post/RatingSystemSelector';\r\nimport { collection, query, where, orderBy, limit, getDocs } from 'firebase/firestore';\r\nimport { db } from '@/firebase';\r\nimport { SpaceCardService } from '@/services/SpaceCardService';\r\nimport PageHeader from '@/components/PageHeader';\r\nimport { FaTimes, FaPlus, FaTrash, FaMapMarkerAlt, FaRocket, FaImages, FaPen, FaCheckCircle, FaPalette, FaChevronLeft, FaChevronRight, FaArrowsAltV, FaArrowsAltH, FaThLarge, FaEye, FaArrowLeft } from 'react-icons/fa';\r\nimport Post from '@/components/Post';\r\nimport { extractDominantHue } from '@/core/utils/colorUtils';\r\nimport { generateStackPreview } from '@/core/utils/stackUtils';\r\nimport { logger } from '@/core/utils/logger';\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst StackThumbnail = ({ file }) => {\r\n    const [src, setSrc] = useState(null);\r\n    useEffect(() => {\r\n        if (!file) return;\r\n        const url = URL.createObjectURL(file);\r\n        setSrc(url);\r\n        return () => URL.revokeObjectURL(url);\r\n    }, [file]);\r\n\r\n    if (!src) return <div style={{ width: '100%', height: '100%', background: '#333' }}></div>;\r\n    return <img src={src} style={{ width: '100%', height: '100%', objectFit: 'cover' }} alt=\"thumbnail\" />;\r\n};\r\n\r\nconst CreatePost = () => {\r\n    const { currentUser } = useAuth();\r\n    const navigate = useNavigate();\r\n    const { createPost, loading, error, progress } = useCreatePost();\r\n    const { collections } = useCollections(currentUser?.uid);\r\n    const { saveDraft, loadDraft, clearDraft, hasDraft } = useDraftSaving();\r\n    const [selectedCollectionId, setSelectedCollectionId] = useState('');\r\n    const fileInputRef = useRef(null);\r\n    const submittingRef = useRef(false);\r\n    const [hasUnsavedChanges, setHasUnsavedChanges] = useState(false);\r\n\r\n    // Generate stars once and memoize them\r\n    const stars = useMemo(() => {\r\n        return [...Array(100)].map((_, i) => ({\r\n            id: i,\r\n            width: Math.random() * 2 + 1,\r\n            height: Math.random() * 2 + 1,\r\n            top: Math.random() * 100,\r\n            left: Math.random() * 100,\r\n            opacity: Math.random() * 0.5 + 0.3,\r\n            duration: Math.random() * 3 + 2,\r\n            delay: Math.random() * 2,\r\n            glow: Math.random() * 3 + 2\r\n        }));\r\n    }, []);\r\n\r\n    // Global Post State\r\n    const [title, setTitle] = useState('');\r\n    const [tags, setTags] = useState([]);\r\n    const [location, setLocation] = useState({ city: '', state: '', country: '' });\r\n    const [postType, setPostType] = useState('art'); // Unified Post Type State\r\n\r\n    // Slides State\r\n    const [slides, setSlides] = useState([]);\r\n    const [activeSlideIndex, setActiveSlideIndex] = useState(0);\r\n\r\n    // Cinematic Background State\r\n    const [atmosphereBackground, setAtmosphereBackground] = useState('black');\r\n    const [extractedColor, setExtractedColor] = useState(null);\r\n    const [calculatingColor, setCalculatingColor] = useState(false);\r\n\r\n    useEffect(() => {\r\n        if (slides.length === 1) {\r\n            const slide = slides[0];\r\n            // Use preview URL or create one temporarily\r\n            const src = slide.preview;\r\n            if (src) {\r\n                // Avoid re-extracting if we already have it for this specific slide? \r\n                // Simple check: if extractedColor matches what we expect? \r\n                // Actually, just re-run is safer for now, performance is handled by utility canvas size.\r\n                setCalculatingColor(true);\r\n                extractDominantHue(src).then(color => {\r\n                    setExtractedColor(color);\r\n                    setCalculatingColor(false);\r\n                });\r\n            }\r\n        } else {\r\n            // Revert to black for multi-post\r\n            if (atmosphereBackground !== 'black') setAtmosphereBackground('black');\r\n        }\r\n    }, [slides.length, slides[0]?.preview]); // Only re-run if length changes or first slide changes\r\n\r\n    // Manual EXIF state\r\n    const [showManualExif, setShowManualExif] = useState({});\r\n\r\n    // Carousel/Swipe state\r\n    const [touchStart, setTouchStart] = useState(null);\r\n    const [touchEnd, setTouchEnd] = useState(null);\r\n\r\n    // Tag Panel State\r\n    const [expandedCategories, setExpandedCategories] = useState({\r\n        aesthetics: true,\r\n        style: false,\r\n        subject: false,\r\n        technical: false\r\n    });\r\n\r\n    // Film Metadata State\r\n    const [filmMetadata, setFilmMetadata] = useState({\r\n        isFilm: false,\r\n        stock: '',\r\n        customStock: '',\r\n        format: '',\r\n        iso: '',\r\n        cameraOverride: '',\r\n        lensOverride: '',\r\n        scanner: '',\r\n        lab: ''\r\n    });\r\n\r\n    // Film UI Overlays State\r\n    const [enableSprocketOverlay, setEnableSprocketOverlay] = useState(false);\r\n    const [enableInstantPhotoOverlay, setEnableInstantPhotoOverlay] = useState(false);\r\n    const [instantPhotoCount, setInstantPhotoCount] = useState(1); // 1, 2, or 3 images per slide\r\n    const [instantPhotoStyle, setInstantPhotoStyle] = useState('thin'); // 'thin' or 'thick'\r\n    const [filmMode, setFilmMode] = useState('continuous'); // 'continuous' or 'cut'\r\n    const [enableQuartzDate, setEnableQuartzDate] = useState(false);\r\n    const [enableRatings, setEnableRatings] = useState(true); // true = 5-star rating, false = simple like\r\n    const [showInProfile, setShowInProfile] = useState(true); // Whether to show in user's profile feed\r\n    const [quartzDateString, setQuartzDateString] = useState(() => {\r\n        const today = new Date();\r\n        const d = String(today.getDate());\r\n        const m = String(today.getMonth() + 1);\r\n        const y = String(today.getFullYear()).slice(2);\r\n        return `${d.padStart(2, '0')} ${m.padStart(2, '0')} ${y}`;\r\n    });\r\n    const [quartzColor, setQuartzColor] = useState('#7FFFD4');\r\n    const [quartzDateFormat, setQuartzDateFormat] = useState('DD MM YY');\r\n\r\n    const [shareTitleAcrossImages, setShareTitleAcrossImages] = useState(true); // Share title across all images\r\n    const [isProcessingStack, setIsProcessingStack] = useState(false); // Loading state for stack generation\r\n\r\n    // Digital Collectibles State\r\n    const [createSpaceCard, setCreateSpaceCard] = useState(false);\r\n    const [showFeedPreview, setShowFeedPreview] = useState(false);\r\n    const [spaceCardData, setSpaceCardData] = useState({\r\n        title: '',\r\n        price: 0,\r\n        rarity: 'Common',\r\n        editionType: 'unlimited',\r\n        editionSize: 100,\r\n        collaborators: []\r\n    });\r\n\r\n    // Toggle Handlers\r\n    const handleSprocketToggle = (val) => {\r\n        setEnableSprocketOverlay(val);\r\n        if (val) setEnableInstantPhotoOverlay(false);\r\n    };\r\n\r\n    const handleInstantPhotoToggle = (val) => {\r\n        setEnableInstantPhotoOverlay(val);\r\n        if (val) {\r\n            setEnableSprocketOverlay(false);\r\n            setQuartzColor('#333333'); // Dark Gray for white border\r\n        } else {\r\n            setQuartzColor('#7FFFD4'); // Revert to Ice Mint\r\n        }\r\n    };\r\n\r\n    // Handle file selection\r\n    const handleFileSelect = (e) => {\r\n        const files = Array.from(e.target.files);\r\n        if (files.length === 0) return;\r\n\r\n        // Enforce 10 image limit\r\n        if (slides.length + files.length > 10) {\r\n            alert('You can only upload up to 10 images per post.');\r\n            return;\r\n        }\r\n\r\n        // Get ALL EXIF from first slide to auto-fill new slides\r\n        const firstSlideExif = slides.length > 0 ? (slides[0].manualExif || slides[0].exif) : null;\r\n        // Copy all fields from first slide's EXIF\r\n        const commonExif = firstSlideExif ? { ...firstSlideExif } : null;\r\n\r\n        const newSlides = files.map(file => ({\r\n            type: 'image',\r\n            file,\r\n            preview: URL.createObjectURL(file),\r\n            title: '', // Changed from caption to title\r\n            exif: null,\r\n            manualExif: commonExif // Auto-fill with ALL EXIF fields from first slide\r\n        }));\r\n\r\n        setSlides(prev => {\r\n            const updated = [...prev, ...newSlides];\r\n            if (prev.length === 0) setActiveSlideIndex(0);\r\n            return updated;\r\n        });\r\n    };\r\n\r\n    // Handle removing a slide\r\n    const removeSlide = (index, e) => {\r\n        e.stopPropagation();\r\n        const newSlides = [...slides];\r\n        if (newSlides[index].preview) {\r\n            URL.revokeObjectURL(newSlides[index].preview);\r\n        }\r\n        newSlides.splice(index, 1);\r\n        setSlides(newSlides);\r\n\r\n        const newShowManualExif = { ...showManualExif };\r\n        delete newShowManualExif[index];\r\n        setShowManualExif(newShowManualExif);\r\n\r\n        if (index === activeSlideIndex) {\r\n            setActiveSlideIndex(Math.max(0, index - 1));\r\n        } else if (index < activeSlideIndex) {\r\n            setActiveSlideIndex(activeSlideIndex - 1);\r\n        }\r\n    };\r\n\r\n    // Handle slide updates\r\n    const updateSlide = (index, updates) => {\r\n        const newSlides = [...slides];\r\n        newSlides[index] = { ...newSlides[index], ...updates };\r\n        setSlides(newSlides);\r\n    };\r\n\r\n    // Handle manual EXIF save for active slide\r\n    const handleManualExifSave = (exifData) => {\r\n        // Safe Merge: Preserve any existing fields in manualExif that aren't in exifData\r\n        const existingManualExif = slides[activeSlideIndex].manualExif || {};\r\n        const mergedExif = { ...existingManualExif, ...exifData };\r\n\r\n        updateSlide(activeSlideIndex, { manualExif: mergedExif });\r\n        setShowManualExif(prev => ({ ...prev, [activeSlideIndex]: false }));\r\n    };\r\n\r\n    // Photo reordering functions\r\n    const moveSlide = (fromIndex, direction) => {\r\n        const toIndex = direction === 'left' ? fromIndex - 1 : fromIndex + 1;\r\n\r\n        if (toIndex < 0 || toIndex >= slides.length) return;\r\n\r\n        const newSlides = [...slides];\r\n        [newSlides[fromIndex], newSlides[toIndex]] = [newSlides[toIndex], newSlides[fromIndex]];\r\n\r\n        setSlides(newSlides);\r\n\r\n        // Update active slide index\r\n        if (activeSlideIndex === fromIndex) {\r\n            setActiveSlideIndex(toIndex);\r\n        } else if (activeSlideIndex === toIndex) {\r\n            setActiveSlideIndex(fromIndex);\r\n        }\r\n    };\r\n\r\n    const reorderStackItems = async (slideIndex, itemIndex, direction) => {\r\n        const slide = slides[slideIndex];\r\n        if (!slide || slide.type !== 'stack' || !slide.items) return;\r\n\r\n        const toIndex = direction === 'left' ? itemIndex - 1 : itemIndex + 1;\r\n        if (toIndex < 0 || toIndex >= slide.items.length) return;\r\n\r\n        setIsProcessingStack(true);\r\n\r\n        try {\r\n            const newItems = [...slide.items];\r\n            // Swap\r\n            [newItems[itemIndex], newItems[toIndex]] = [newItems[toIndex], newItems[itemIndex]];\r\n\r\n            // Regenerate\r\n            const { previewUrl, blob } = await generateStackPreview(newItems, slide.layout);\r\n            const collageFile = new File([blob], `stack_${slide.layout}_${Date.now()}.jpg`, { type: 'image/jpeg' });\r\n\r\n            updateSlide(slideIndex, {\r\n                items: newItems,\r\n                file: collageFile,\r\n                preview: previewUrl\r\n            });\r\n        } catch (err) {\r\n            logger.error(\"Stack reorder error:\", err);\r\n            alert(\"Failed to reorder: \" + err.message);\r\n        } finally {\r\n            setIsProcessingStack(false);\r\n        }\r\n    };\r\n\r\n    const handleDragStart = (e, index) => {\r\n        e.dataTransfer.effectAllowed = 'move';\r\n        e.dataTransfer.setData('text/plain', index.toString());\r\n    };\r\n\r\n    const handleDragOver = (e) => {\r\n        e.preventDefault();\r\n        e.dataTransfer.dropEffect = 'move';\r\n    };\r\n\r\n    const handleDrop = (e, dropIndex) => {\r\n        e.preventDefault();\r\n        const dragIndex = parseInt(e.dataTransfer.getData('text/plain'));\r\n\r\n        if (dragIndex === dropIndex || isNaN(dragIndex)) return;\r\n\r\n        const newSlides = [...slides];\r\n        const [draggedSlide] = newSlides.splice(dragIndex, 1);\r\n        newSlides.splice(dropIndex, 0, draggedSlide);\r\n\r\n        setSlides(newSlides);\r\n\r\n        // Adjust active slide index\r\n        if (activeSlideIndex === dragIndex) {\r\n            setActiveSlideIndex(dropIndex);\r\n        } else if (dragIndex < activeSlideIndex && dropIndex >= activeSlideIndex) {\r\n            setActiveSlideIndex(activeSlideIndex - 1);\r\n        } else if (dragIndex > activeSlideIndex && dropIndex <= activeSlideIndex) {\r\n            setActiveSlideIndex(activeSlideIndex + 1);\r\n        }\r\n    };\r\n\r\n    // Tag Handling\r\n    const handleTagToggle = (tag) => {\r\n        setTags(prev => {\r\n            if (prev.includes(tag)) {\r\n                return prev.filter(t => t !== tag);\r\n            }\r\n            if (prev.length >= 20) return prev;\r\n            return [...prev, tag];\r\n        });\r\n    };\r\n\r\n    const toggleCategory = (catId) => {\r\n        setExpandedCategories(prev => ({\r\n            ...prev,\r\n            [catId]: !prev[catId]\r\n        }));\r\n    };\r\n\r\n    // Swipe handlers for carousel\r\n    const minSwipeDistance = 50;\r\n\r\n    const onTouchStart = (e) => {\r\n        setTouchEnd(null);\r\n        setTouchStart(e.targetTouches[0].clientX);\r\n    };\r\n\r\n    const onTouchMove = (e) => {\r\n        setTouchEnd(e.targetTouches[0].clientX);\r\n    };\r\n\r\n    const onTouchEnd = () => {\r\n        if (!touchStart || !touchEnd) return;\r\n        const distance = touchStart - touchEnd;\r\n        const isLeftSwipe = distance > minSwipeDistance;\r\n        const isRightSwipe = distance < -minSwipeDistance;\r\n\r\n        if (isLeftSwipe && activeSlideIndex < slides.length - 1) {\r\n            setActiveSlideIndex(activeSlideIndex + 1);\r\n        }\r\n        if (isRightSwipe && activeSlideIndex > 0) {\r\n            setActiveSlideIndex(activeSlideIndex - 1);\r\n        }\r\n    };\r\n\r\n\r\n\r\n    // Handle form submission\r\n    const handleSubmit = async () => {\r\n        // ≡ƒöÆ DOUBLE-POST PREVENTION\r\n        if (submittingRef.current || loading) {\r\n            logger.warn('Submit blocked: already submitting');\r\n            return;\r\n        }\r\n        submittingRef.current = true;\r\n\r\n        if (slides.length === 0) {\r\n            submittingRef.current = false;\r\n            return alert(\"Add at least one image\");\r\n        }\r\n\r\n        // Rate Limiting Check\r\n        try {\r\n            const postsRef = collection(db, 'posts');\r\n            const q = query(\r\n                postsRef,\r\n                where('authorId', '==', currentUser.uid),\r\n                orderBy('createdAt', 'desc'),\r\n                limit(1)\r\n            );\r\n            const snapshot = await getDocs(q);\r\n            if (!snapshot.empty) {\r\n                const lastPost = snapshot.docs[0].data();\r\n                if (lastPost.createdAt) {\r\n                    const lastPostTime = lastPost.createdAt.toDate();\r\n                    const now = new Date();\r\n                    const timeDiff = now - lastPostTime;\r\n                    const oneMinute = 60 * 1000;\r\n\r\n                    if (timeDiff < oneMinute) {\r\n                        const remainingSeconds = Math.ceil((oneMinute - timeDiff) / 1000);\r\n                        alert(`Please wait ${remainingSeconds} seconds before posting again.`);\r\n                        submittingRef.current = false;\r\n                        return;\r\n                    }\r\n                }\r\n            }\r\n        } catch (err) {\r\n            logger.error('Error checking rate limit:', err);\r\n            // Continue if check fails, don't block user for error\r\n        }\r\n\r\n        try {\r\n            logger.log('≡ƒÜÇ Starting post creation...');\r\n            // Get collection's postToFeed setting if a collection is selected\r\n            const selectedCollection = selectedCollectionId\r\n                ? collections.find(c => c.id === selectedCollectionId)\r\n                : null;\r\n\r\n            logger.log('≡ƒô¥ Processing slides...', slides.length);\r\n            // Apply shared title logic\r\n            const processedSlides = shareTitleAcrossImages\r\n                ? slides.map(slide => ({ ...slide, title: title }))\r\n                : slides;\r\n\r\n            logger.log('≡ƒôñ Calling createPost...');\r\n            await createPost({\r\n                title,\r\n                tags,\r\n                type: postType, // Pass selected type\r\n                location,\r\n                filmMetadata: filmMetadata.isFilm ? filmMetadata : null,\r\n                enableRatings: enableRatings,\r\n                collectionId: selectedCollectionId || null,\r\n                collectionPostToFeed: selectedCollection?.postToFeed ?? null,\r\n                showInProfile: showInProfile,\r\n                uiOverlays: {\r\n                    sprocketBorder: enableSprocketOverlay || false,\r\n                    instantPhotoBorder: enableInstantPhotoOverlay || false,\r\n                    instantPhotoCount: (enableInstantPhotoOverlay && instantPhotoCount) ? instantPhotoCount : 1,\r\n                    instantPhotoStyle: (enableInstantPhotoOverlay && instantPhotoStyle) ? instantPhotoStyle : 'thin',\r\n                    filmMode: filmMode || 'continuous',\r\n                    quartzDate: enableQuartzDate ? {\r\n                        text: quartzDateString || '',\r\n                        color: quartzColor || '#000000',\r\n                        format: quartzDateFormat || 'DD MM YY'\r\n                    } : null\r\n                },\r\n                atmosphereBackground: (slides.length === 1 && atmosphereBackground) ? atmosphereBackground : 'black',\r\n                gradientColor: (slides.length === 1 && extractedColor) ? extractedColor : null,\r\n            }, processedSlides);\r\n\r\n            // Create SpaceCard if requested\r\n            if (createSpaceCard) {\r\n                try {\r\n                    // We need the postId from the created post. \r\n                    // However, useCreatePost hook doesn't return it directly in the current implementation shown.\r\n                    // It likely returns it or we need to query for it.\r\n                    // Based on the previous code, it seemed to rely on querying the last post.\r\n                    // Let's assume for now we query the last post again or if createPost returns it.\r\n                    // Checking useCreatePost usage: const { createPost } = useCreatePost();\r\n                    // Usually these hooks return the ID. If not, we fall back to the query method used in rate limiting.\r\n\r\n                    // Let's query for the latest post by this user to link it\r\n                    const postsRef = collection(db, 'posts');\r\n                    const q = query(\r\n                        postsRef,\r\n                        where('authorId', '==', currentUser.uid),\r\n                        orderBy('createdAt', 'desc'),\r\n                        limit(1)\r\n                    );\r\n                    const snapshot = await getDocs(q);\r\n\r\n                    if (!snapshot.empty) {\r\n                        const newPostId = snapshot.docs[0].id;\r\n\r\n                        const cardData = {\r\n                            creatorUid: currentUser.uid,\r\n                            creatorName: currentUser.displayName || 'Anonymous',\r\n                            frontImage: slides[0].preview, // Note: In real app, use the uploaded URL from post\r\n                            title: spaceCardData.title || title || 'Untitled Card',\r\n                            description: title,\r\n                            rarity: spaceCardData.rarity,\r\n                            editionType: spaceCardData.editionType,\r\n                            editionSize: spaceCardData.editionSize,\r\n                            linkedPostId: newPostId,\r\n                            basePrice: spaceCardData.price,\r\n                            soundTag: null,\r\n                            isAudioCard: false\r\n                        };\r\n\r\n                        await SpaceCardService.createCard(cardData);\r\n                        // console.log(\"SpaceCard created successfully\");\r\n                    }\r\n                } catch (cardError) {\r\n                    logger.error(\"Error creating SpaceCard:\", cardError);\r\n                    alert(\"Post created, but SpaceCard creation failed: \" + cardError.message);\r\n                }\r\n            }\r\n\r\n            // Γ£à Clear draft on successful post\r\n            clearDraft();\r\n            setHasUnsavedChanges(false);\r\n\r\n            // Navigate directly to feed without alert\r\n            navigate('/');\r\n        } catch (err) {\r\n            logger.error('Error creating post:', err);\r\n            alert(`Failed to create post: ${err.message}`);\r\n        } finally {\r\n            submittingRef.current = false;\r\n        }\r\n    };\r\n\r\n    const activeSlide = slides[activeSlideIndex];\r\n    const hasExif = activeSlide?.exif || activeSlide?.manualExif;\r\n\r\n    const getPublishButtonState = () => {\r\n        if (loading) return { text: \"Publishing...\", disabled: true };\r\n        if (slides.length === 0) return { text: \"Add Images\", action: () => fileInputRef.current?.click(), disabled: false };\r\n        // Title no longer required\r\n        return { text: \"Publish\", action: handleSubmit, disabled: false };\r\n    };\r\n\r\n    // --- Stack Handler ---\r\n    const handleStackSelect = async (e, layout) => {\r\n        setIsProcessingStack(true);\r\n        try {\r\n            // Check slide limit\r\n            if (slides.length >= 10) {\r\n                alert(\"Maximum 10 slides allowed per post.\");\r\n                return;\r\n            }\r\n\r\n            const files = Array.from(e.target.files);\r\n            if (files.length < 2) {\r\n                alert(\"Please select at least 2 images for a stack.\");\r\n                return;\r\n            }\r\n            if (files.length > 4) {\r\n                alert(\"Maximum 4 images allowed per stack.\");\r\n                return;\r\n            }\r\n\r\n            // Generate collage\r\n            const { previewUrl, blob } = await generateStackPreview(files, layout);\r\n\r\n            // Create a File object from the blob for the main \"slide\" image\r\n            const collageFile = new File([blob], `stack_${layout}_${Date.now()}.jpg`, { type: 'image/jpeg' });\r\n\r\n            const newSlide = {\r\n                id: Date.now().toString(),\r\n                type: 'stack', // New Type\r\n                layout: layout,\r\n                items: files, // The original files\r\n                file: collageFile, // The collage (for upload/preview)\r\n                preview: previewUrl,\r\n                caption: '',\r\n                filter: 'normal',\r\n                aspectRatio: layout === 'vertical' ? 'auto' : 'auto', // Will be calculated\r\n            };\r\n\r\n            setSlides(prev => [...prev, newSlide]);\r\n            setActiveSlideIndex(slides.length); // Point to new slide\r\n\r\n            // Reset input\r\n            e.target.value = '';\r\n        } catch (err) {\r\n            alert(err.message);\r\n            logger.error(\"Stack generation error:\", err);\r\n            e.target.value = ''; // Reset input to allow retrying\r\n        } finally {\r\n            setIsProcessingStack(false);\r\n        }\r\n    };\r\n\r\n    // --- Scroll Lock for Feed Preview ---\r\n    useEffect(() => {\r\n        if (showFeedPreview) {\r\n            document.body.style.overflow = 'hidden';\r\n            document.documentElement.style.overflow = 'hidden';\r\n        } else {\r\n            document.body.style.overflow = '';\r\n            document.documentElement.style.overflow = '';\r\n        }\r\n        return () => {\r\n            document.body.style.overflow = '';\r\n            document.documentElement.style.overflow = '';\r\n        };\r\n    }, [showFeedPreview]);\r\n\r\n    // --- Feed Preview Data and Overlay ---\r\n    const previewPostData = useMemo(() => {\r\n        return {\r\n            id: 'preview-id',\r\n            userId: currentUser?.uid,\r\n            username: currentUser?.displayName || 'Post Preview',\r\n            authorPhotoUrl: currentUser?.photoURL,\r\n            title: title,\r\n            location: location,\r\n            // Map slides to the structure Post expects\r\n            items: slides.map((s) => {\r\n                if (s.type === 'stack') {\r\n                    // For stacks, return the collage preview URL (not the items array)\r\n                    return {\r\n                        type: 'image', // Treat as image for rendering\r\n                        url: s.preview, // The generated collage blob URL\r\n                        aspectRatio: s.aspectRatio\r\n                    };\r\n                }\r\n                return {\r\n                    type: 'image',\r\n                    url: s.preview,\r\n                    manualExif: s.manualExif,\r\n                };\r\n            }),\r\n            uiOverlays: {\r\n                sprocketBorder: enableSprocketOverlay,\r\n                instantPhotoBorder: enableInstantPhotoOverlay,\r\n                quartzDate: enableQuartzDate ? {\r\n                    text: quartzDateString,\r\n                    color: quartzColor,\r\n                    format: quartzDateFormat\r\n                } : null,\r\n                filmMode: filmMode,\r\n                instantPhotoStyle: instantPhotoStyle\r\n            },\r\n            atmosphereBackground: slides.length === 1 ? atmosphereBackground : 'black',\r\n            gradientColor: extractedColor,\r\n            spaceCardId: createSpaceCard ? 'preview-card' : null,\r\n            isSpaceCardCreator: true,\r\n            spaceCardRarity: spaceCardData.rarity,\r\n            tags: tags,\r\n            createdAt: { toDate: () => new Date() },\r\n            likes: 0,\r\n            comments: 0\r\n        };\r\n    }, [currentUser, title, location, slides, enableSprocketOverlay, enableInstantPhotoOverlay, enableQuartzDate, quartzDateString, quartzColor, quartzDateFormat, filmMode, instantPhotoStyle, atmosphereBackground, extractedColor, createSpaceCard, spaceCardData, tags]);\r\n\r\n\r\n\r\n    return (\r\n        <div className=\"create-post-container\">\r\n            <PageHeader\r\n                title=\"CREATE POST\"\r\n                leftAction={\r\n                    <button onClick={() => navigate(-1)} className=\"header-btn\">\r\n                        <FaTimes /> <span className=\"cancel-text\">Cancel</span>\r\n                    </button>\r\n                }\r\n                rightAction={\r\n                    <button\r\n                        onClick={() => {\r\n                            const state = getPublishButtonState();\r\n                            if (!state.disabled && state.action) state.action();\r\n                        }}\r\n                        disabled={getPublishButtonState().disabled}\r\n                        className=\"publish-btn-premium desktop-publish\"\r\n                    >\r\n                        {loading ? (\r\n                            <span>{Math.round(progress)}%</span>\r\n                        ) : (\r\n                            <>\r\n                                {getPublishButtonState().text === 'Publish' && <FaRocket size={14} />}\r\n                                {getPublishButtonState().text}\r\n                            </>\r\n                        )}\r\n                    </button>\r\n                }\r\n                showProgress={loading}\r\n                progress={progress}\r\n                style={{ zIndex: 2000 }}\r\n                bottomSlot={\r\n                    slides.length > 0 && (\r\n                        <div style={{\r\n                            width: '100%',\r\n                            padding: '0.5rem 1rem',\r\n                            background: 'rgba(0,0,0,0.8)',\r\n                            backdropFilter: 'blur(10px)',\r\n                            borderBottom: '1px solid rgba(255,255,255,0.1)'\r\n                        }}>\r\n                            <ThumbnailStrip\r\n                                slides={slides}\r\n                                activeSlideIndex={activeSlideIndex}\r\n                                setActiveSlideIndex={setActiveSlideIndex}\r\n                                handleDragStart={handleDragStart}\r\n                                handleDragOver={handleDragOver}\r\n                                handleDrop={handleDrop}\r\n                                moveSlide={moveSlide}\r\n                            />\r\n                        </div>\r\n                    )\r\n                }\r\n            />\r\n\r\n            {/* Progress Dots (Desktop Fixed) */}\r\n            <div className=\"progress-dots-container\">\r\n                <div className={`progress-dot ${slides.length > 0 ? 'completed' : 'active'}`} title=\"Add Images\">\r\n                    <div className=\"dot-icon\"><FaImages size={12} /></div>\r\n                    <div className=\"dot-line\"></div>\r\n                </div>\r\n                <div className={`progress-dot ${slides.length > 0 ? (title.trim().length > 0 ? 'completed' : 'active') : ''}`} title=\"Add Title (Optional)\">\r\n                    <div className=\"dot-icon\"><FaPen size={12} /></div>\r\n                    <div className=\"dot-line\"></div>\r\n                </div>\r\n                <div className={`progress-dot ${title.trim().length > 0 ? 'active' : ''}`} title=\"Ready\">\r\n                    <div className=\"dot-icon\"><FaCheckCircle size={12} /></div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Mobile Publish Button - Positioned via CSS */}\r\n            <button\r\n                onClick={() => {\r\n                    const state = getPublishButtonState();\r\n                    if (!state.disabled && state.action) state.action();\r\n                }}\r\n                disabled={getPublishButtonState().disabled}\r\n                className=\"mobile-publish-btn\"\r\n            >\r\n                {loading ? `Uploading ${Math.round(progress)}%` : getPublishButtonState().text}\r\n            </button>\r\n\r\n\r\n\r\n            <div className=\"create-post-layout\">\r\n                {/* LEFT COLUMN: Images, Previews, Tags */}\r\n                <div className=\"left-column\">\r\n                    {/* Loading Indicator for Photo Processing */}\r\n                    {isProcessingStack && (\r\n                        <div style={{\r\n                            width: '100%',\r\n                            height: '2px',\r\n                            background: 'rgba(255,255,255,0.1)',\r\n                            marginBottom: '1rem',\r\n                            overflow: 'hidden',\r\n                            borderRadius: '2px',\r\n                            position: 'relative'\r\n                        }}>\r\n                            <div style={{\r\n                                width: '50%',\r\n                                height: '100%',\r\n                                background: 'var(--ice-mint)',\r\n                                position: 'absolute',\r\n                                animation: 'loading-line 1s infinite linear',\r\n                            }}></div>\r\n                            <style>{`\r\n                                @keyframes loading-line {\r\n                                    0% { left: -50%; width: 50%; }\r\n                                    50% { left: 25%; width: 75%; }\r\n                                    100% { left: 100%; width: 50%; }\r\n                                }\r\n                            `}</style>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* 1. Image Carousel & Stack Controls */}\r\n                    <div style={{ marginBottom: '1rem', display: 'flex', gap: '0.5rem', flexWrap: 'wrap', opacity: isProcessingStack ? 0.5 : 1, pointerEvents: isProcessingStack ? 'none' : 'auto' }}>\r\n\r\n                        {/* Vertical Stack Button */}\r\n                        <label style={{\r\n                            background: 'rgba(255,255,255,0.1)',\r\n                            border: '1px solid rgba(255,255,255,0.2)',\r\n                            borderRadius: '8px',\r\n                            padding: '0.6rem 1rem',\r\n                            color: '#e0e0e0',\r\n                            display: 'flex', alignItems: 'center', gap: '0.5rem',\r\n                            cursor: 'pointer', fontSize: '0.85rem',\r\n                            position: 'relative'\r\n                        }}>\r\n                            <FaArrowsAltV /> Vertical Stack\r\n                            <input\r\n                                type=\"file\"\r\n                                multiple\r\n                                accept=\"image/*\"\r\n                                style={{ display: 'none' }}\r\n                                onChange={(e) => handleStackSelect(e, 'vertical')}\r\n                            />\r\n                        </label>\r\n\r\n                        {/* Horizontal Row Button */}\r\n                        <label style={{\r\n                            background: 'rgba(255,255,255,0.1)',\r\n                            border: '1px solid rgba(255,255,255,0.2)',\r\n                            borderRadius: '8px',\r\n                            padding: '0.6rem 1rem',\r\n                            color: '#e0e0e0',\r\n                            display: 'flex', alignItems: 'center', gap: '0.5rem',\r\n                            cursor: 'pointer', fontSize: '0.85rem'\r\n                        }}>\r\n                            <FaArrowsAltH /> Horizontal Row\r\n                            <input\r\n                                type=\"file\"\r\n                                multiple\r\n                                accept=\"image/*\"\r\n                                style={{ display: 'none' }}\r\n                                onChange={(e) => handleStackSelect(e, 'horizontal')}\r\n                            />\r\n                        </label>\r\n\r\n                        {/* Grid Collage Button */}\r\n                        <label style={{\r\n                            background: 'rgba(255,255,255,0.1)',\r\n                            border: '1px solid rgba(255,255,255,0.2)',\r\n                            borderRadius: '8px',\r\n                            padding: '0.6rem 1rem',\r\n                            color: '#e0e0e0',\r\n                            display: 'flex', alignItems: 'center', gap: '0.5rem',\r\n                            cursor: 'pointer', fontSize: '0.85rem'\r\n                        }}>\r\n                            <FaThLarge /> Grid Collage\r\n                            <input\r\n                                type=\"file\"\r\n                                multiple\r\n                                accept=\"image/*\"\r\n                                style={{ display: 'none' }}\r\n                                onChange={(e) => handleStackSelect(e, 'grid')}\r\n                            />\r\n                        </label>\r\n                    </div>\r\n\r\n                    <ImageCarousel\r\n                        slides={slides}\r\n                        activeSlideIndex={activeSlideIndex}\r\n                        setActiveSlideIndex={setActiveSlideIndex}\r\n                        removeSlide={removeSlide}\r\n                        updateSlide={updateSlide}\r\n                        onTouchStart={onTouchStart}\r\n                        onTouchMove={onTouchMove}\r\n                        onTouchEnd={onTouchEnd}\r\n                        handleDragStart={handleDragStart}\r\n                        handleDragOver={handleDragOver}\r\n                        handleDrop={handleDrop}\r\n                        moveSlide={moveSlide}\r\n                        onAddMoreClick={() => fileInputRef.current?.click()}\r\n                    />\r\n\r\n                    {/* Stack Order Settings - Below Image Preview */}\r\n                    {activeSlide?.type === 'stack' && activeSlide?.items && (\r\n                        <div style={{ marginTop: '1rem', background: 'rgba(255,255,255,0.05)', padding: '1rem', borderRadius: '8px' }}>\r\n                            <div style={{ fontSize: '0.9rem', color: '#aaa', marginBottom: '0.75rem', display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                                <span style={{ fontWeight: '600' }}>Stack Order</span>\r\n                                <span style={{ fontSize: '0.75rem', opacity: 0.7 }}>{activeSlide.items.length} items</span>\r\n                            </div>\r\n                            <div style={{ display: 'flex', gap: '0.75rem', overflowX: 'auto', paddingBottom: '0.5rem' }}>\r\n                                {activeSlide.items.map((file, idx) => (\r\n                                    <div key={idx} style={{\r\n                                        position: 'relative',\r\n                                        width: '70px',\r\n                                        flexShrink: 0,\r\n                                        opacity: isProcessingStack ? 0.5 : 1\r\n                                    }}>\r\n                                        <div style={{\r\n                                            width: '70px',\r\n                                            height: '70px',\r\n                                            borderRadius: '8px',\r\n                                            overflow: 'hidden',\r\n                                            marginBottom: '0.3rem',\r\n                                            border: '1px solid rgba(255,255,255,0.2)'\r\n                                        }}>\r\n                                            <StackThumbnail file={file} />\r\n                                        </div>\r\n                                        <div style={{ display: 'flex', justifyContent: 'space-between', gap: '0.25rem' }}>\r\n                                            <button\r\n                                                onClick={() => reorderStackItems(activeSlideIndex, idx, 'left')}\r\n                                                disabled={idx === 0 || isProcessingStack}\r\n                                                style={{\r\n                                                    background: 'rgba(255,255,255,0.1)',\r\n                                                    border: 'none',\r\n                                                    borderRadius: '4px',\r\n                                                    color: '#fff',\r\n                                                    width: '32px',\r\n                                                    height: '26px',\r\n                                                    cursor: 'pointer',\r\n                                                    display: 'flex', alignItems: 'center', justifyContent: 'center',\r\n                                                    opacity: idx === 0 ? 0.3 : 1,\r\n                                                    transition: 'all 0.2s'\r\n                                                }}\r\n                                            >\r\n                                                <FaChevronLeft size={10} />\r\n                                            </button>\r\n                                            <button\r\n                                                onClick={() => reorderStackItems(activeSlideIndex, idx, 'right')}\r\n                                                disabled={idx === activeSlide.items.length - 1 || isProcessingStack}\r\n                                                style={{\r\n                                                    background: 'rgba(255,255,255,0.1)',\r\n                                                    border: 'none',\r\n                                                    borderRadius: '4px',\r\n                                                    color: '#fff',\r\n                                                    width: '32px',\r\n                                                    height: '26px',\r\n                                                    cursor: 'pointer',\r\n                                                    display: 'flex', alignItems: 'center', justifyContent: 'center',\r\n                                                    opacity: idx === activeSlide.items.length - 1 ? 0.3 : 1,\r\n                                                    transition: 'all 0.2s'\r\n                                                }}\r\n                                            >\r\n                                                <FaChevronRight size={10} />\r\n                                            </button>\r\n                                        </div>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                            {isProcessingStack && <div style={{ fontSize: '0.75rem', color: 'var(--ice-mint)', marginTop: '0.5rem', textAlign: 'center' }}>Updating stack...</div>}\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* FEED PREVIEW BUTTON */}\r\n                    {slides.length > 0 && (\r\n                        <button\r\n                            onClick={() => setShowFeedPreview(true)}\r\n                            style={{\r\n                                width: '100%',\r\n                                marginTop: '0.5rem',\r\n                                padding: '0.75rem',\r\n                                background: 'rgba(255, 255, 255, 0.1)',\r\n                                border: '1px solid rgba(255, 255, 255, 0.2)',\r\n                                borderRadius: '8px',\r\n                                color: '#fff',\r\n                                display: 'flex',\r\n                                alignItems: 'center',\r\n                                justifyContent: 'center',\r\n                                gap: '0.5rem',\r\n                                cursor: 'pointer',\r\n                                fontWeight: '600',\r\n                                fontSize: '0.9rem',\r\n                                transition: 'all 0.2s'\r\n                            }}\r\n                            className=\"preview-feed-btn\"\r\n                        >\r\n                            <FaEye /> Feed Preview\r\n                        </button>\r\n                    )}\r\n                    <input\r\n                        ref={fileInputRef}\r\n                        type=\"file\"\r\n                        accept=\"image/*\"\r\n                        multiple\r\n                        onChange={handleFileSelect}\r\n                        style={{ display: 'none' }}\r\n                    />\r\n\r\n                    {/* 2. Tags & Categories (Moved to Left) */}\r\n                    <TagCategoryPanel\r\n                        tags={tags}\r\n                        handleTagToggle={handleTagToggle}\r\n                        expandedCategories={expandedCategories}\r\n                        toggleCategory={toggleCategory}\r\n                    />\r\n                </div>\r\n\r\n                {/* RIGHT COLUMN: Post Details & Settings */}\r\n                <div className=\"right-column\">\r\n                    <div className=\"form-section\" style={{\r\n                        padding: '0.75rem 0.75rem 0.75rem',\r\n                        border: '1px solid rgba(127, 255, 212, 0.15)',\r\n                        boxShadow: '0 0 8px rgba(127, 255, 212, 0.08)'\r\n                    }}>\r\n                        <style>{`\r\n                            input::placeholder {\r\n                                color: rgba(255, 255, 255, 0.45);\r\n                            }\r\n                        `}</style>\r\n\r\n                        {/* Post Type Toggle */}\r\n                        <div className=\"post-type-toggle\" style={{ marginBottom: '1rem', display: 'flex', alignItems: 'center' }}>\r\n                            <span style={{ marginRight: '0.75rem', fontSize: '0.8rem', opacity: 0.8, fontWeight: 600, color: '#aaa' }}>\r\n                                POST TYPE:\r\n                            </span>\r\n                            <button\r\n                                type=\"button\"\r\n                                onClick={() => setPostType(\"art\")}\r\n                                style={{\r\n                                    padding: '0.4rem 0.8rem',\r\n                                    marginRight: '0.5rem',\r\n                                    borderRadius: '6px',\r\n                                    border: postType === \"art\" ? '1px solid #7FFFD4' : '1px solid rgba(255,255,255,0.1)',\r\n                                    background: postType === \"art\" ? 'rgba(127, 255, 212, 0.15)' : 'transparent',\r\n                                    color: postType === \"art\" ? '#7FFFD4' : '#888',\r\n                                    fontSize: '0.75rem',\r\n                                    fontWeight: '700',\r\n                                    textTransform: 'uppercase',\r\n                                    letterSpacing: '0.05em',\r\n                                    cursor: 'pointer',\r\n                                    transition: 'all 0.2s',\r\n                                    display: 'flex',\r\n                                    alignItems: 'center',\r\n                                    gap: '0.4rem'\r\n                                }}\r\n                            >\r\n                                Art\r\n                            </button>\r\n                            <button\r\n                                type=\"button\"\r\n                                onClick={() => setPostType(\"social\")}\r\n                                style={{\r\n                                    padding: '0.4rem 0.8rem',\r\n                                    borderRadius: '6px',\r\n                                    border: postType === \"social\" ? '1px solid #7FFFD4' : '1px solid rgba(255,255,255,0.1)',\r\n                                    background: postType === \"social\" ? 'rgba(127, 255, 212, 0.15)' : 'transparent',\r\n                                    color: postType === \"social\" ? '#7FFFD4' : '#888',\r\n                                    fontSize: '0.75rem',\r\n                                    fontWeight: '700',\r\n                                    textTransform: 'uppercase',\r\n                                    letterSpacing: '0.05em',\r\n                                    cursor: 'pointer',\r\n                                    transition: 'all 0.2s',\r\n                                    display: 'flex',\r\n                                    alignItems: 'center',\r\n                                    gap: '0.4rem'\r\n                                }}\r\n                            >\r\n                                Social\r\n                            </button>\r\n                        </div>\r\n\r\n                        {/* Cinematic Background Toggle (Single Photo Only) */}\r\n                        {slides.length === 1 && extractedColor && (\r\n                            <div className=\"form-section-item\" style={{ marginBottom: '1.5rem', animation: 'fadeIn 0.3s ease' }}>\r\n                                <div style={{\r\n                                    display: 'flex',\r\n                                    alignItems: 'center',\r\n                                    gap: '0.5rem',\r\n                                    marginBottom: '0.6rem',\r\n                                    paddingTop: '0.8rem',\r\n                                    borderTop: '1px solid rgba(255,255,255,0.05)'\r\n                                }}>\r\n                                    <span style={{ fontSize: '0.8rem', opacity: 0.8, fontWeight: 600, color: '#aaa', textTransform: 'uppercase' }}>\r\n                                        BACKGROUND STYLE\r\n                                    </span>\r\n                                    {calculatingColor && <span style={{ fontSize: '0.7rem', color: '#7FFFD4', fontStyle: 'italic' }}>Extracting color...</span>}\r\n                                </div>\r\n                                <div style={{ display: 'flex', gap: '0.5rem' }}>\r\n\r\n                                    {/* Black Option */}\r\n                                    <button\r\n                                        type=\"button\"\r\n                                        onClick={() => setAtmosphereBackground('black')}\r\n                                        style={{\r\n                                            flex: 1,\r\n                                            padding: '0.6rem',\r\n                                            borderRadius: '8px',\r\n                                            border: atmosphereBackground === 'black' ? '1px solid #fff' : '1px solid rgba(255,255,255,0.1)',\r\n                                            background: 'rgba(0,0,0,0.5)',\r\n                                            color: '#fff',\r\n                                            fontSize: '0.8rem',\r\n                                            cursor: 'pointer',\r\n                                            display: 'flex',\r\n                                            alignItems: 'center',\r\n                                            justifyContent: 'center',\r\n                                            gap: '0.5rem',\r\n                                            transition: 'all 0.2s'\r\n                                        }}\r\n                                    >\r\n                                        <div style={{ width: 12, height: 12, borderRadius: '50%', background: '#000', border: '1px solid #555' }}></div>\r\n                                        Standard\r\n                                    </button>\r\n\r\n                                    {/* Cinematic Gradient Option */}\r\n                                    <button\r\n                                        type=\"button\"\r\n                                        onClick={() => setAtmosphereBackground('cinematic-gradient')}\r\n                                        style={{\r\n                                            flex: 1,\r\n                                            padding: '0.6rem',\r\n                                            borderRadius: '8px',\r\n                                            border: atmosphereBackground === 'cinematic-gradient' ? '1px solid #7FFFD4' : '1px solid rgba(255,255,255,0.1)',\r\n                                            background: atmosphereBackground === 'cinematic-gradient' ? 'rgba(127, 255, 212, 0.1)' : 'rgba(0,0,0,0.5)',\r\n                                            color: atmosphereBackground === 'cinematic-gradient' ? '#7FFFD4' : '#888',\r\n                                            fontSize: '0.8rem',\r\n                                            cursor: 'pointer',\r\n                                            display: 'flex',\r\n                                            alignItems: 'center',\r\n                                            justifyContent: 'center',\r\n                                            gap: '0.5rem',\r\n                                            transition: 'all 0.2s'\r\n                                        }}\r\n                                    >\r\n                                        <div style={{\r\n                                            width: 12,\r\n                                            height: 12,\r\n                                            borderRadius: '50%',\r\n                                            background: `linear-gradient(135deg, ${extractedColor}, #000)`,\r\n                                            boxShadow: '0 0 4px rgba(0,0,0,0.5)'\r\n                                        }}></div>\r\n                                        Cinematic\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n\r\n                        <div style={{ marginBottom: '0.5rem' }}>\r\n                            <input\r\n                                type=\"text\"\r\n                                placeholder=\"Title your post\"\r\n                                value={title}\r\n                                onChange={(e) => setTitle(e.target.value)}\r\n                                className=\"form-input\"\r\n                                style={{\r\n                                    fontSize: '0.95rem',\r\n                                    fontWeight: '500',\r\n                                    border: 'none',\r\n                                    borderBottom: '1px solid #333',\r\n                                    borderRadius: 0,\r\n                                    padding: '0.5rem 0',\r\n                                    background: 'transparent',\r\n                                    color: '#7FFFD4',\r\n                                    transition: 'all 110ms ease-out',\r\n                                    boxShadow: 'inset 0 1px 2px rgba(0,0,0,0.1)'\r\n                                }}\r\n                            />\r\n                        </div>\r\n\r\n                        {/* Share Title Toggle */}\r\n                        <div style={{ marginTop: '0.75rem', marginBottom: '0.5rem' }}>\r\n                            <label style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', cursor: 'pointer', fontSize: '0.85rem', color: '#aaa' }}>\r\n                                <style>{`\r\n                                    input::placeholder {\r\n                                        color: rgba(255, 255, 255, 0.45);\r\n                                    }\r\n                                `}</style>\r\n                                <div style={{ position: 'relative', width: '36px', height: '18px' }}>\r\n                                    <input\r\n                                        type=\"checkbox\"\r\n                                        checked={shareTitleAcrossImages}\r\n                                        onChange={(e) => setShareTitleAcrossImages(e.target.checked)}\r\n                                        style={{ opacity: 0, width: 0, height: 0 }}\r\n                                    />\r\n                                    <div style={{\r\n                                        position: 'absolute', top: 0, left: 0, right: 0, bottom: 0,\r\n                                        background: shareTitleAcrossImages ? '#7FFFD4' : '#333',\r\n                                        borderRadius: '18px', transition: '0.3s'\r\n                                    }}></div>\r\n                                    <div style={{\r\n                                        position: 'absolute', top: '2px', left: shareTitleAcrossImages ? '20px' : '2px',\r\n                                        width: '14px', height: '14px', background: '#fff',\r\n                                        borderRadius: '50%', transition: '0.3s'\r\n                                    }}></div>\r\n                                </div>\r\n                                Use one title for all photos\r\n                            </label>\r\n                        </div>\r\n\r\n                        <div className=\"location-grid\" style={{ gap: '0.5rem' }}>\r\n                            <div className=\"location-input-wrapper\">\r\n                                <FaMapMarkerAlt className=\"location-icon\" />\r\n                                <input\r\n                                    type=\"text\"\r\n                                    placeholder=\"City\"\r\n                                    value={location.city}\r\n                                    onChange={(e) => setLocation({ ...location, city: e.target.value })}\r\n                                    className=\"form-input location-input\"\r\n                                />\r\n                            </div>\r\n                            <div className=\"location-input-wrapper\">\r\n                                <FaMapMarkerAlt className=\"location-icon\" />\r\n                                <input\r\n                                    type=\"text\"\r\n                                    placeholder=\"State\"\r\n                                    value={location.state}\r\n                                    onChange={(e) => setLocation({ ...location, state: e.target.value })}\r\n                                    className=\"form-input location-input\"\r\n                                />\r\n                            </div>\r\n                            <div className=\"location-input-wrapper\">\r\n                                <FaMapMarkerAlt className=\"location-icon\" />\r\n                                <input\r\n                                    type=\"text\"\r\n                                    placeholder=\"Country\"\r\n                                    value={location.country}\r\n                                    onChange={(e) => setLocation({ ...location, country: e.target.value })}\r\n                                    className=\"form-input location-input\"\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Collection Selection - Compact */}\r\n                    <CollectionSelector\r\n                        collections={collections}\r\n                        selectedCollectionId={selectedCollectionId}\r\n                        setSelectedCollectionId={setSelectedCollectionId}\r\n                        showInProfile={showInProfile}\r\n                        setShowInProfile={setShowInProfile}\r\n                    />\r\n\r\n                    {/* Film Options Panel with added Instant Photo toggle */}\r\n                    <FilmOptionsPanel\r\n                        filmMetadata={filmMetadata}\r\n                        setFilmMetadata={setFilmMetadata}\r\n                        enableQuartzDate={enableQuartzDate}\r\n                        setEnableQuartzDate={setEnableQuartzDate}\r\n                        quartzDateString={quartzDateString}\r\n                        setQuartzDateString={setQuartzDateString}\r\n                        quartzColor={quartzColor}\r\n                        setQuartzColor={setQuartzColor}\r\n                        quartzDateFormat={quartzDateFormat}\r\n                        setQuartzDateFormat={setQuartzDateFormat}\r\n                        enableSprocketOverlay={enableSprocketOverlay}\r\n                        setEnableSprocketOverlay={handleSprocketToggle}\r\n                        enableInstantPhotoOverlay={enableInstantPhotoOverlay}\r\n                        setEnableInstantPhotoOverlay={handleInstantPhotoToggle}\r\n                        instantPhotoStyle={instantPhotoStyle}\r\n                        setInstantPhotoStyle={setInstantPhotoStyle}\r\n                    />\r\n\r\n\r\n\r\n                    {/* Rating System Toggle */}\r\n                    <RatingSystemSelector\r\n                        enableRatings={enableRatings}\r\n                        setEnableRatings={setEnableRatings}\r\n                    />\r\n\r\n\r\n                    {/* Active Image Settings (Contextual) */}\r\n                    {activeSlide && (\r\n                        <div className=\"form-section\">\r\n                            <h3>Image Settings</h3>\r\n\r\n                            {/* Stack Reordering Controls - Moved to bottomSlot in PageHeader */}\r\n\r\n                            {/* Per-Image Title (only shown when shareTitleAcrossImages is false) */}\r\n                            {!shareTitleAcrossImages && (\r\n                                <div className=\"form-field\">\r\n                                    <label>Image Title</label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        placeholder=\"Title for this image...\"\r\n                                        value={activeSlide.title || ''}\r\n                                        onChange={(e) => updateSlide(activeSlideIndex, { title: e.target.value })}\r\n                                        className=\"form-input\"\r\n                                    />\r\n                                </div>\r\n                            )}\r\n\r\n\r\n                            {/* EXIF Controls */}\r\n                            <ManualExifEditor\r\n                                activeSlide={activeSlide}\r\n                                activeSlideIndex={activeSlideIndex}\r\n                                showManualExif={showManualExif}\r\n                                setShowManualExif={setShowManualExif}\r\n                                handleManualExifSave={handleManualExifSave}\r\n                                hasExif={hasExif}\r\n                            />\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div >\r\n\r\n            {/* Animated Stars Background */}\r\n            <div style={{\r\n                position: 'fixed',\r\n                top: 0,\r\n                left: 0,\r\n                right: 0,\r\n                bottom: 0,\r\n                pointerEvents: 'none',\r\n                zIndex: 0\r\n            }}>\r\n                {\r\n                    stars.map((star) => (\r\n                        <div\r\n                            key={star.id}\r\n                            style={{\r\n                                position: 'absolute',\r\n                                width: star.width + 'px',\r\n                                height: star.height + 'px',\r\n                                background: '#7FFFD4',\r\n                                borderRadius: '50%',\r\n                                top: star.top + '%',\r\n                                left: star.left + '%',\r\n                                opacity: star.opacity,\r\n                                animation: `twinkle ${star.duration}s ease-in-out infinite`,\r\n                                animationDelay: `${star.delay}s`,\r\n                                boxShadow: `0 0 ${star.glow}px #7FFFD4`\r\n                            }}\r\n                        />\r\n                    ))\r\n                }\r\n            </div>\r\n\r\n            {/* FEED PREVIEW OVERLAY */}\r\n            {showFeedPreview && (\r\n                <div style={{\r\n                    position: 'fixed',\r\n                    top: 0,\r\n                    left: 0,\r\n                    width: '100vw',\r\n                    height: '100dvh', // Dynamic viewport height\r\n                    background: '#000',\r\n                    zIndex: 9999,\r\n                    overflow: 'hidden', // Lock scroll\r\n                    overscrollBehavior: 'none', // Prevent bounce\r\n                    display: 'flex',\r\n                    flexDirection: 'column'\r\n                }}>\r\n                    <div style={{\r\n                        position: 'absolute',\r\n                        top: 'max(env(safe-area-inset-top), 20px)',\r\n                        left: '20px',\r\n                        zIndex: 100,\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        gap: '1rem',\r\n                        pointerEvents: 'auto'\r\n                    }}>\r\n                        <button\r\n                            onClick={() => setShowFeedPreview(false)}\r\n                            style={{\r\n                                background: 'rgba(0,0,0,0.6)',\r\n                                backdropFilter: 'blur(10px)',\r\n                                border: '1px solid rgba(255,255,255,0.2)',\r\n                                borderRadius: '50%',\r\n                                width: '44px',\r\n                                height: '44px',\r\n                                display: 'flex',\r\n                                alignItems: 'center',\r\n                                justifyContent: 'center',\r\n                                color: '#fff',\r\n                                cursor: 'pointer',\r\n                                fontSize: '1.2rem',\r\n                                boxShadow: '0 4px 12px rgba(0,0,0,0.3)'\r\n                            }}\r\n                        >\r\n                            <FaArrowLeft />\r\n                        </button>\r\n                        <span style={{\r\n                            color: 'rgba(255,255,255,0.8)',\r\n                            fontWeight: '600',\r\n                            textShadow: '0 2px 4px rgba(0,0,0,0.5)',\r\n                            background: 'rgba(0,0,0,0.4)',\r\n                            padding: '0.4rem 0.8rem',\r\n                            borderRadius: '20px'\r\n                        }}>\r\n                            Preview Mode\r\n                        </span>\r\n                    </div>\r\n                    {/* Render Post with full height/width */}\r\n                    <div style={{ width: '100%', height: '100%', position: 'relative', overflow: 'hidden' }}>\r\n                        <Post post={previewPostData} priority=\"high\" />\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            <style>{`\r\n                @keyframes twinkle {\r\n                    0%, 100% { opacity: 0.3; transform: scale(1); }\r\n                    50% { opacity: 1; transform: scale(1.2); }\r\n                }\r\n                \r\n                body {\r\n                    overflow-x: hidden;\r\n                    max-width: 100vw;\r\n                }\r\n                \r\n                .create-post-container * { box-sizing: border-box; }\r\n                .create-post-container {\r\n                    min-height: 100dvh;\r\n                    background: var(--black);\r\n                    color: #fff;\r\n                    padding-bottom: 80px;\r\n                    display: flex;\r\n                    flex-direction: column;\r\n                    position: relative;\r\n                    overflow-x: hidden;\r\n                    overflow-x: hidden;\r\n                    width: 100%;\r\n                    max-width: 100vw;\r\n                }\r\n                .header-btn, .header-btn-primary {\r\n                    padding: 0.6rem 1.2rem;\r\n                    border-radius: 8px;\r\n                    font-weight: 600;\r\n                    cursor: pointer;\r\n                    display: flex;\r\n                    align-items: center;\r\n                    gap: 0.5rem;\r\n                    border: none;\r\n                    line-height: 1;\r\n                    transition: all 0.2s ease;\r\n                }\r\n                .header-btn { \r\n                    background: transparent; \r\n                    color: rgba(255, 255, 255, 0.85);\r\n                    font-weight: 650;\r\n                    letter-spacing: 0.02em;\r\n                }\r\n                .header-btn:hover {\r\n                    background: rgba(255, 255, 255, 0.05);\r\n                    color: rgba(255, 255, 255, 0.95);\r\n                    box-shadow: 0 0 6px rgba(255, 255, 255, 0.1);\r\n                }\r\n                .header-btn svg {\r\n                    filter: drop-shadow(0 0 3px rgba(255, 255, 255, 0.3));\r\n                }\r\n                .header-btn-primary { background: var(--ice-mint); color: var(--black); }\r\n                .header-btn-primary:disabled { opacity: 0.5; cursor: not-allowed; }\r\n                \r\n                /* Mobile publish button - hidden by default */\r\n                .mobile-publish-btn {\r\n                    display: none;\r\n                }\r\n\r\n                /* Desktop: Make space for hamburger menu */\r\n                @media (min-width: 901px) {\r\n                    .page-header-container {\r\n                        padding-left: 80px !important;\r\n                        padding-right: 80px !important;\r\n                    }\r\n                    .page-header-content {\r\n                        justify-content: space-between !important;\r\n                    }\r\n                }\r\n\r\n                .create-post-layout {\r\n                    display: grid;\r\n                    grid-template-columns: 480px 1fr;\r\n                    gap: 2.75rem;\r\n                    max-width: 1400px;\r\n                    margin: 0 auto;\r\n                    margin-top: 1rem;\r\n                    padding: 2rem;\r\n                    width: 100%;\r\n                    height: calc(100dvh - 70px);\r\n                    overflow: hidden;\r\n                    overflow-y: hidden;\r\n                    position: relative;\r\n                    z-index: 1;\r\n                }\r\n\r\n                .left-column {\r\n                    height: 100%;\r\n                    overflow-y: auto;\r\n                    display: flex;\r\n                    flex-direction: column;\r\n                    gap: 1rem;\r\n                    padding-right: 0.5rem;\r\n                    width: 100%;\r\n                    max-width: 100%;\r\n                    box-sizing: border-box;\r\n                }\r\n\r\n                .right-column {\r\n                    height: 100%;\r\n                    overflow-y: auto;\r\n                    padding-right: 0.5rem;\r\n                    width: 100%;\r\n                    max-width: 100%;\r\n                    box-sizing: border-box;\r\n                }\r\n\r\n                .form-section {\r\n                    background: var(--graphite);\r\n                    border: 1px solid rgba(255, 255, 255, 0.1);\r\n                    border-radius: 12px;\r\n                    padding: 1.25rem 1.5rem;\r\n                    margin-bottom: 1.5rem;\r\n                    position: relative;\r\n                    z-index: 1;\r\n                    width: 100%;\r\n                    max-width: 100%;\r\n                    box-sizing: border-box;\r\n                }\r\n                .form-section h3 { margin-top: 0; color: var(--ice-mint); font-size: 1.1rem; margin-bottom: 1.5rem; }\r\n                \r\n                .form-input, .form-textarea {\r\n                    width: 100%;\r\n                    max-width: 100%;\r\n                    box-sizing: border-box;\r\n                    transition: all 110ms ease-out;\r\n                }\r\n                .form-input:focus, .form-textarea:focus {\r\n                    outline: none;\r\n                    border-color: rgba(127, 255, 212, 0.5) !important;\r\n                    box-shadow: 0 0 8px rgba(127, 255, 212, 0.2), inset 0 1px 3px rgba(0,0,0,0.15);\r\n                    background: radial-gradient(circle at center, rgba(127, 255, 212, 0.02), transparent 70%) !important;\r\n                }\r\n\r\n                .location-grid {\r\n                    display: grid;\r\n                    grid-template-columns: repeat(3, 1fr);\r\n                    gap: 0.5rem;\r\n                    width: 100%;\r\n                    max-width: 100%;\r\n                    box-sizing: border-box;\r\n                }\r\n                \r\n                .collectible-section {\r\n                    background: rgba(0, 255, 157, 0.05);\r\n                    border: 1px solid rgba(0, 255, 157, 0.2);\r\n                    border-radius: 12px;\r\n                    padding: 1.5rem;\r\n                    margin-bottom: 2rem;\r\n                }\r\n                \r\n                .collectible-header {\r\n                    display: flex;\r\n                    align-items: center;\r\n                    gap: 0.5rem;\r\n                    color: var(--ice-mint);\r\n                    margin-bottom: 1rem;\r\n                    font-weight: 600;\r\n                }\r\n\r\n                .toggle-row {\r\n                    display: flex;\r\n                    align-items: center;\r\n                    justify-content: space-between;\r\n                    margin-bottom: 1rem;\r\n                    padding-bottom: 1rem;\r\n                    border-bottom: 1px solid rgba(255,255,255,0.1);\r\n                }\r\n\r\n                .sound-tag-search {\r\n                    position: relative;\r\n                    margin-top: 1rem;\r\n                }\r\n\r\n                .sound-results {\r\n                    position: absolute;\r\n                    top: 100%;\r\n                    left: 0;\r\n                    right: 0;\r\n                    background: #1a1a1a;\r\n                    border: 1px solid #333;\r\n                    border-radius: 8px;\r\n                    max-height: 200px;\r\n                    overflow-y: auto;\r\n                    z-index: 10;\r\n                    margin-top: 0.5rem;\r\n                }\r\n\r\n                .sound-result-item {\r\n                    padding: 0.75rem;\r\n                    cursor: pointer;\r\n                    display: flex;\r\n                    align-items: center;\r\n                    gap: 0.5rem;\r\n                    border-bottom: 1px solid #333;\r\n                }\r\n                .sound-result-item:hover { background: #333; }\r\n\r\n                /* Carousel & Thumbnails */\r\n                .carousel-container { width: 100%; position: relative; z-index: 1; background: var(--black); }\r\n                .carousel-track { display: flex; width: 100%; }\r\n                .carousel-slide { \r\n                    min-width: 100%; \r\n                    aspect-ratio: 1; \r\n                    background: var(--graphite); \r\n                    border-radius: 12px; \r\n                    overflow: hidden; \r\n                    position: relative; \r\n                    border: 2px solid rgba(255, 255, 255, 0.1); \r\n                }\r\n                .carousel-slide img { width: 100%; height: 100%; object-fit: contain; user-select: none; }\r\n                .carousel-overlay { position: absolute; inset: 0; pointer-events: none; }\r\n                .carousel-overlay button, .carousel-overlay label { pointer-events: auto; }\r\n                \r\n                .carousel-dots { display: flex; justify-content: center; gap: 0.5rem; padding: 1rem 0; }\r\n                .carousel-dots .dot { width: 8px; height: 8px; border-radius: 50%; background: rgba(255, 255, 255, 0.3); border: none; cursor: pointer; padding: 0; transition: all 0.2s; }\r\n                .carousel-dots .dot.active { background: var(--ice-mint); width: 24px; border-radius: 4px; }\r\n\r\n                .thumbnail-scrollbar { display: flex; gap: 0.5rem; overflow-x: auto; padding: 0.5rem 0; margin: 0.5rem 0; }\r\n                .thumbnail-scrollbar::-webkit-scrollbar { height: 8px; }\r\n                .thumbnail-scrollbar::-webkit-scrollbar-track { background: rgba(255, 255, 255, 0.05); border-radius: 4px; }\r\n                .thumbnail-scrollbar::-webkit-scrollbar-thumb { background: rgba(127, 255, 212, 0.6); border-radius: 4px; }\r\n                .thumbnail { min-width: 40px; height: 40px; border-radius: 8px; overflow: hidden; cursor: pointer; position: relative; border: 2px solid rgba(255, 255, 255, 0.2); transition: all 0.2s; }\r\n                .thumbnail:hover { border-color: var(--ice-mint); transform: scale(1.05); }\r\n                .thumbnail.active { border-color: var(--ice-mint); box-shadow: 0 0 10px rgba(127, 255, 212, 0.3); }\r\n\r\n                .slide-remove-btn { position: absolute; top: 10px; right: 10px; background: rgba(0,0,0,0.6); border: none; color: #fff; width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; }\r\n                .overlay-bottom-bar { position: absolute; bottom: 0; left: 0; right: 0; background: linear-gradient(transparent, rgba(0,0,0,0.9)); padding: 1rem; display: flex; justify-content: space-between; align-items: center; }\r\n                \r\n                .shop-toggle-small { display: flex; align-items: center; gap: 0.5rem; color: #fff; cursor: pointer; font-size: 0.8rem; }\r\n                .exif-badge { background: var(--ice-mint); color: #000; padding: 0.2rem 0.5rem; border-radius: 4px; font-size: 0.7rem; }\r\n                \r\n                .empty-state { \r\n                    padding: 3rem; \r\n                    text-align: center; \r\n                    color: var(--slate); \r\n                    border: 1px solid var(--ice-mint); \r\n                    box-shadow: 0 0 12px rgba(127, 255, 212, 0.12), inset 0 0 15px rgba(127, 255, 212, 0.04), 0 4px 12px rgba(0, 0, 0, 0.2);\r\n                    border-radius: 12px; \r\n                    cursor: pointer;\r\n                    aspect-ratio: auto;\r\n                    min-height: 282px;\r\n                    display: flex;\r\n                    flex-direction: column;\r\n                    align-items: center;\r\n                    justify-content: center;\r\n                    gap: 0.5rem;\r\n                    position: relative;\r\n                    overflow: hidden;\r\n                    transition: all 110ms ease-out;\r\n                }\r\n                .empty-state:hover {\r\n                    box-shadow: 0 0 18px rgba(127, 255, 212, 0.18), inset 0 0 20px rgba(127, 255, 212, 0.06), 0 6px 16px rgba(0, 0, 0, 0.25);\r\n                    transform: translateY(-2px);\r\n                }\r\n                @keyframes float {\r\n                    0%, 100% { transform: translateY(0); }\r\n                    50% { transform: translateY(-10px); }\r\n                }\r\n                @keyframes pulse {\r\n                    0%, 100% { transform: scale(1); opacity: 0.5; }\r\n                    50% { transform: scale(1.5); opacity: 1; }\r\n                }\r\n                \r\n                .add-more-carousel-btn {\r\n                    width: 100%;\r\n                    padding: 0.75rem;\r\n                    margin-top: 0.5rem;\r\n                    background: rgba(127, 255, 212, 0.1);\r\n                    border: 1px dashed var(--ice-mint);\r\n                    color: var(--ice-mint);\r\n                    border-radius: 8px;\r\n                    cursor: pointer;\r\n                    display: flex;\r\n                    align-items: center;\r\n                    justify-content: center;\r\n                    gap: 0.5rem;\r\n                    font-size: 0.9rem;\r\n                    transition: all 0.2s;\r\n                }\r\n                .add-more-carousel-btn:hover {\r\n                    background: rgba(127, 255, 212, 0.2);\r\n                }\r\n\r\n                .sprocket-overlay { position: absolute; inset: 0; background-image: url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\" preserveAspectRatio=\"none\"><defs><pattern id=\"sprocket\" x=\"0\" y=\"0\" width=\"10\" height=\"100\" patternUnits=\"userSpaceOnUse\"><rect x=\"2\" y=\"0\" width=\"6\" height=\"4\" fill=\"rgba(0,0,0,0.85)\" /><rect x=\"2\" y=\"96\" width=\"6\" height=\"4\" fill=\"rgba(0,0,0,0.85)\" /></pattern></defs><rect width=\"100\" height=\"100\" fill=\"url(%23sprocket)\" /></svg>'); background-size: 100% 100%; background-repeat: no-repeat; pointer-events: none; z-index: 5; }\r\n                .quartz-date-stamp { position: absolute; bottom: 12px; right: 12px; font-family: 'Courier New', 'Courier', monospace; font-size: 16px; font-weight: bold; letter-spacing: 2px; text-shadow: 0 0 4px rgba(0,0,0,0.9), 1px 1px 2px rgba(0,0,0,0.8); pointer-events: none; z-index: 6; padding: 4px 6px; background: rgba(0,0,0,0.3); border-radius: 2px; }\r\n\r\n                /* ≡ƒö╣ UNIVERSAL RESPONSIVE ALGORITHM - MOBILE IMPLEMENTATION */\r\n                @media (max-width: 900px) and (orientation: landscape) {\r\n                    .create-post-layout {\r\n                        display: grid !important;\r\n                        grid-template-columns: 300px 1fr !important;\r\n                        padding: 1rem !important;\r\n                        gap: 1rem !important;\r\n                        height: 100dvh !important;\r\n                        overflow: hidden !important;\r\n                    }\r\n                    .left-column, .right-column {\r\n                        height: 100% !important;\r\n                        overflow-y: auto !important;\r\n                        width: 100% !important;\r\n                        max-width: 100% !important;\r\n                    }\r\n                    .desktop-publish { display: flex !important; }\r\n                    .mobile-publish-btn { display: none !important; }\r\n                    \r\n                    /* Ensure tags scroll in landscape too */\r\n                    .tags-grid {\r\n                        display: grid !important;\r\n                        grid-auto-flow: column !important;\r\n                        overflow-x: auto !important;\r\n                        max-width: 100% !important;\r\n                        gap: 0.5rem !important;\r\n                    }\r\n                    .tag-filter-panel, .panel-content {\r\n                        max-width: 100% !important;\r\n                        overflow: hidden !important;\r\n                    }\r\n                }\r\n\r\n                @media (max-width: 900px) and (orientation: portrait) {\r\n                    .create-post-layout {\r\n                        display: flex !important;\r\n                        flex-direction: column !important;\r\n                        height: auto !important;\r\n                        overflow: visible;\r\n                        /* Rule: horizontal padding = 4vw */\r\n                        padding: 4vw; \r\n                        padding-top: max(4vw, env(safe-area-inset-top));\r\n                        padding-bottom: max(4vw, env(safe-area-inset-bottom));\r\n                        gap: 4vw;\r\n                        max-width: 100vw;\r\n                        box-sizing: border-box;\r\n                    }\r\n                    .left-column, .right-column {\r\n                        height: auto;\r\n                        overflow: visible;\r\n                        padding-right: 0;\r\n                        width: 100%;\r\n                        max-width: 100%;\r\n                    }\r\n                    .create-post-container {\r\n                        overflow-x: hidden;\r\n                        overflow-y: auto;\r\n                        height: auto;\r\n                        min-height: 100dvh;\r\n                        padding-bottom: 2rem;\r\n                    }\r\n                    \r\n                    /* Carousel Sizing - 16:9 Aspect Ratio */\r\n                    .carousel-slide { \r\n                        aspect-ratio: 16/9;\r\n                        max-height: 35vh;\r\n                    }\r\n                    .empty-state {\r\n                        aspect-ratio: auto;\r\n                        min-height: 30vh;\r\n                        height: auto;\r\n                        padding: 6vw 4vw;\r\n                    }\r\n                    .empty-state svg {\r\n                        /* Rule: icon-size = max(4vw, 18px) - scaled up slightly for main icon */\r\n                        width: max(8vw, 32px);\r\n                        height: max(8vw, 32px);\r\n                    }\r\n                    .empty-state p {\r\n                        /* Rule: font-size = max(3.5vw, 14px) */\r\n                        font-size: max(3.5vw, 14px);\r\n                        margin: 0.5rem 0 0 0;\r\n                    }\r\n                    .empty-state span {\r\n                        font-size: max(3vw, 12px);\r\n                    }\r\n                    \r\n                    .form-section {\r\n                        /* Rule: horizontal padding = 4vw */\r\n                        padding: 4vw;\r\n                        margin-left: 0;\r\n                        margin-right: 0;\r\n                        margin-bottom: 4vw;\r\n                        width: 100%;\r\n                    }\r\n                    \r\n                    /* Hide desktop publish, show mobile publish */\r\n                    .desktop-publish {\r\n                        display: none !important;\r\n                    }\r\n                    .mobile-publish-btn {\r\n                        display: block !important;\r\n                        position: static !important;\r\n                        transform: none !important;\r\n                        width: 100% !important;\r\n                        min-width: auto !important;\r\n                        margin-top: 4vw !important;\r\n                        margin-bottom: 4vw !important;\r\n                        left: auto !important;\r\n                        bottom: auto !important;\r\n                        \r\n                        /* Rule: height = 12vw (capped at 60px) */\r\n                        height: min(12vw, 60px);\r\n                        /* Rule: font-size = max(3.5vw, 14px) */\r\n                        font-size: max(3.5vw, 14px);\r\n                        \r\n                        background: var(--ice-mint);\r\n                        color: #000;\r\n                        border: none;\r\n                        border-radius: 12px;\r\n                        font-weight: 600;\r\n                        cursor: pointer;\r\n                        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);\r\n                    }\r\n                    \r\n                    /* Hide Cancel text, keep icon */\r\n                    .cancel-text {\r\n                        display: none;\r\n                    }\r\n                    \r\n                    /* Adjust header title alignment */\r\n                    .page-header-title {\r\n                        text-align: left !important;\r\n                        font-size: max(3.5vw, 14px) !important;\r\n                    }\r\n                    \r\n                    /* Tag Panels - Compact & Scaled */\r\n                    .tag-filter-panel {\r\n                        margin-bottom: 2vw !important;\r\n                        border-radius: 12px !important;\r\n                        max-width: 100% !important;\r\n                        overflow: hidden !important;\r\n                    }\r\n                    .panel-header {\r\n                        padding: 3vw 4vw !important;\r\n                    }\r\n                    .panel-header span:first-child {\r\n                        font-size: max(3vw, 12px) !important;\r\n                    }\r\n                    .panel-header span:last-child {\r\n                        font-size: max(2.5vw, 10px) !important;\r\n                    }\r\n                    .panel-content {\r\n                        padding: 2vw 4vw 3vw !important;\r\n                        max-width: 100% !important;\r\n                        overflow: hidden !important;\r\n                    }\r\n                    .tags-grid {\r\n                        display: grid !important;\r\n                        grid-auto-flow: column !important;\r\n                        overflow-x: auto !important;\r\n                        max-width: 100% !important;\r\n                        gap: 1.5vw !important;\r\n                    }\r\n                    .tags-grid button {\r\n                        padding: 1.5vw 2.5vw !important;\r\n                        font-size: max(2.5vw, 10px) !important;\r\n                        border-radius: 5px !important;\r\n                    }\r\n                    \r\n                    .location-grid { \r\n                        grid-template-columns: 1fr;\r\n                        gap: 2vw;\r\n                    }\r\n                    \r\n                    .add-more-carousel-btn {\r\n                        padding: 3vw;\r\n                        font-size: max(3vw, 12px);\r\n                    }\r\n                }\r\n\r\n                @media (max-width: 480px) {\r\n                    /* Additional tweaks for very small screens if needed, \r\n                       but the vw-unit scaling should handle most of it automatically! */\r\n                    \r\n                    /* Ensure carousel doesn't get too tall on very wide/short phones */\r\n                    .carousel-slide {\r\n                        max-height: 30vh;\r\n                    }\r\n                    .empty-state {\r\n                        max-height: 30vh;\r\n                    }\r\n                }\r\n                /* Premium Publish Button */\r\n                .publish-btn-premium {\r\n                    background: linear-gradient(135deg, #7FFFD4, #40E0D0);\r\n                    color: #000;\r\n                    border: none;\r\n                    border-radius: 12px;\r\n                    padding: 0.6rem 1.5rem;\r\n                    font-weight: 700;\r\n                    letter-spacing: 0.05em;\r\n                    text-transform: uppercase;\r\n                    cursor: pointer;\r\n                    position: relative;\r\n                    overflow: hidden;\r\n                    transition: all 140ms cubic-bezier(0.2, 0.8, 0.2, 1);\r\n                    box-shadow: 0 0 6px rgba(127, 255, 212, 0.18), 0 4px 12px rgba(0, 0, 0, 0.3);\r\n                    display: flex;\r\n                    align-items: center;\r\n                    gap: 0.5rem;\r\n                    line-height: 1;\r\n                    height: fit-content;\r\n                }\r\n                .publish-btn-premium:hover {\r\n                    transform: translateY(-2px) scale(1.02);\r\n                    box-shadow: 0 0 12px rgba(127, 255, 212, 0.3), 0 6px 20px rgba(0, 0, 0, 0.4);\r\n                }\r\n                .publish-btn-premium:active {\r\n                    transform: translateY(0px) scale(0.98);\r\n                    transition: all 70ms ease-out;\r\n                }\r\n                .publish-btn-premium::after {\r\n                    content: '';\r\n                    position: absolute;\r\n                    top: 0;\r\n                    left: -100%;\r\n                    width: 100%;\r\n                    height: 100%;\r\n                    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);\r\n                    animation: shimmer 3s infinite;\r\n                }\r\n                @keyframes shimmer {\r\n                    0% { left: -100%; }\r\n                    20% { left: 100%; }\r\n                    100% { left: 100%; }\r\n                }\r\n\r\n                /* Progress Dots */\r\n                .progress-dots-container {\r\n                    position: fixed;\r\n                    right: 20px;\r\n                    top: 50%;\r\n                    transform: translateY(-50%);\r\n                    display: flex;\r\n                    flex-direction: column;\r\n                    align-items: center;\r\n                    gap: 0.5rem;\r\n                    z-index: 100;\r\n                }\r\n                .progress-dot {\r\n                    width: 32px;\r\n                    height: 32px;\r\n                    border-radius: 50%;\r\n                    background: rgba(255,255,255,0.1);\r\n                    display: flex;\r\n                    align-items: center;\r\n                    justify-content: center;\r\n                    color: rgba(255,255,255,0.3);\r\n                    transition: all 0.3s ease;\r\n                    position: relative;\r\n                }\r\n                .progress-dot.active {\r\n                    background: rgba(127, 255, 212, 0.2);\r\n                    color: var(--ice-mint);\r\n                    box-shadow: 0 0 10px rgba(127, 255, 212, 0.2);\r\n                }\r\n                .progress-dot.completed {\r\n                    background: var(--ice-mint);\r\n                    color: #000;\r\n                    box-shadow: 0 0 15px rgba(127, 255, 212, 0.4);\r\n                }\r\n                .dot-line {\r\n                    position: absolute;\r\n                    bottom: -10px;\r\n                    width: 2px;\r\n                    height: 10px;\r\n                    background: rgba(255,255,255,0.1);\r\n                }\r\n                .progress-dot.completed .dot-line {\r\n                    background: var(--ice-mint);\r\n                }\r\n                @media (max-width: 900px) {\r\n                    .progress-dots-container { display: none; }\r\n                }\r\n\r\n                /* Location Inputs */\r\n                .location-input-wrapper {\r\n                    position: relative;\r\n                    display: flex;\r\n                    align-items: center;\r\n                    background: rgba(255,255,255,0.03);\r\n                    border-radius: 8px;\r\n                    border: 1px solid rgba(255,255,255,0.1);\r\n                    transition: all 0.2s;\r\n                }\r\n                .location-input-wrapper:focus-within {\r\n                    border-color: var(--ice-mint);\r\n                    box-shadow: 0 0 10px rgba(127, 255, 212, 0.1);\r\n                }\r\n                .location-icon {\r\n                    margin-left: 0.8rem;\r\n                    color: var(--ice-mint);\r\n                    opacity: 0.7;\r\n                }\r\n                .location-input {\r\n                    background: transparent !important;\r\n                    border: none !important;\r\n                    padding: 0.6rem !important;\r\n                    color: #fff !important;\r\n                    width: 100%;\r\n                }\r\n                .location-input:focus {\r\n                    outline: none;\r\n                }\r\n\r\n                /* Mobile Publish Button Style Update */\r\n                .mobile-publish-btn {\r\n                    background: linear-gradient(135deg, #7FFFD4, #40E0D0) !important;\r\n                    color: #000 !important;\r\n                    box-shadow: 0 4px 20px rgba(127, 255, 212, 0.3) !important;\r\n                    text-transform: uppercase;\r\n                    letter-spacing: 0.05em;\r\n                }\r\n            `}</style>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CreatePost;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\pages\\Credits.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { FaArrowLeft } from 'react-icons/fa';\r\nimport StarBackground from '@/components/StarBackground';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\nconst Credits = () => {\r\n    const navigate = useNavigate();\r\n    const { t } = useTranslation();\r\n\r\n    return (\r\n        <div style={{\r\n            minHeight: '100vh',\r\n            background: '#000000',\r\n            color: 'var(--text-primary, #d8fff1)',\r\n            paddingBottom: '80px',\r\n            position: 'relative',\r\n            overflow: 'hidden'\r\n        }}>\r\n            <StarBackground starColor=\"#6effd8\" transparent={true} />\r\n\r\n            {/* Header */}\r\n            <div style={{\r\n                padding: '1rem 2rem',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'center',\r\n                background: 'rgba(0, 0, 0, 0.95)',\r\n                backdropFilter: 'blur(10px)',\r\n                borderBottom: '1px solid rgba(110, 255, 216, 0.2)',\r\n                position: 'sticky',\r\n                top: 0,\r\n                zIndex: 100,\r\n                width: '100%',\r\n                boxSizing: 'border-box'\r\n            }}>\r\n                <button\r\n                    onClick={() => navigate('/settings')}\r\n                    style={{\r\n                        background: 'transparent',\r\n                        border: 'none',\r\n                        color: 'var(--accent, #6effd8)',\r\n                        cursor: 'pointer',\r\n                        fontSize: '1.2rem',\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        padding: 0,\r\n                        position: 'absolute',\r\n                        left: '2rem'\r\n                    }}\r\n                >\r\n                    <FaArrowLeft />\r\n                </button>\r\n                <h1 style={{\r\n                    color: '#fff',\r\n                    fontSize: '1.4rem',\r\n                    fontWeight: '900',\r\n                    textShadow: '0 2px 8px rgba(127, 255, 212, 0.4)',\r\n                    fontFamily: \"'Orbitron', 'Rajdhani', 'Exo 2', 'Audiowide', monospace\",\r\n                    letterSpacing: '0.1em',\r\n                    textTransform: 'uppercase',\r\n                    background: 'linear-gradient(135deg, #7FFFD4, #00CED1)',\r\n                    WebkitBackgroundClip: 'text',\r\n                    WebkitTextFillColor: 'transparent',\r\n                    backgroundClip: 'text',\r\n                    margin: 0\r\n                }}>\r\n                    PANOSPACE\r\n                </h1>\r\n            </div>\r\n\r\n            {/* Content */}\r\n            <div style={{\r\n                padding: '2rem 1.5rem',\r\n                maxWidth: '600px',\r\n                margin: '0 auto',\r\n                display: 'flex',\r\n                flexDirection: 'column',\r\n                gap: '2.5rem'\r\n            }}>\r\n                {/* Main Title */}\r\n                <div style={{ textAlign: 'center' }}>\r\n                    <div style={{ position: 'relative', display: 'inline-block', marginBottom: '1rem' }}>\r\n                        <div style={{\r\n                            position: 'absolute',\r\n                            top: '50%',\r\n                            left: '50%',\r\n                            transform: 'translate(-50%, -50%)',\r\n                            width: '80px',\r\n                            height: '80px',\r\n                            background: 'radial-gradient(circle, rgba(110,255,216,0.3) 0%, transparent 70%)',\r\n                            borderRadius: '50%',\r\n                            pointerEvents: 'none'\r\n                        }} />\r\n                        <img\r\n                            src=\"/favicon.svg\"\r\n                            alt=\"Panospace\"\r\n                            style={{\r\n                                width: '48px',\r\n                                height: '48px',\r\n                                position: 'relative',\r\n                                zIndex: 1,\r\n                                borderRadius: '50%'\r\n                            }}\r\n                        />\r\n                    </div>\r\n                    <h2 style={{\r\n                        fontSize: '1.5rem',\r\n                        fontWeight: '700',\r\n                        color: 'var(--accent, #6effd8)',\r\n                        letterSpacing: '0.1em',\r\n                        textTransform: 'uppercase',\r\n                        margin: 0,\r\n                        textShadow: '0 0 20px var(--accent-glow, rgba(110,255,216,0.35))'\r\n                    }}>\r\n                        {t('settings.credits')}\r\n                    </h2>\r\n                </div>\r\n\r\n                {/* Created By Section */}\r\n                <div style={{\r\n                    background: 'var(--bg-card, #050808)',\r\n                    borderRadius: '18px',\r\n                    padding: '3rem',\r\n                    border: '1px solid rgba(110, 255, 216, 0.15)',\r\n                    boxShadow: '0 0 40px rgba(110, 255, 216, 0.03)',\r\n                    textAlign: 'center'\r\n                }}>\r\n                    <p style={{\r\n                        fontSize: '0.85rem',\r\n                        color: 'var(--text-secondary, #6b7f78)',\r\n                        letterSpacing: '0.2em',\r\n                        textTransform: 'uppercase',\r\n                        marginBottom: '1rem',\r\n                        borderBottom: '1px solid rgba(110, 255, 216, 0.08)',\r\n                        paddingBottom: '0.5rem',\r\n                        display: 'inline-block'\r\n                    }}>\r\n                        Created by\r\n                    </p>\r\n                    <h3 style={{\r\n                        fontSize: '1.8rem',\r\n                        fontWeight: '700',\r\n                        color: 'var(--accent, #6effd8)',\r\n                        margin: '0 0 1.5rem 0',\r\n                        letterSpacing: '0.05em'\r\n                    }}>\r\n                        Parker Adlington\r\n                    </h3>\r\n                    <div style={{\r\n                        display: 'flex',\r\n                        flexDirection: 'column',\r\n                        gap: '0.75rem',\r\n                        color: 'var(--text-primary, #d8fff1)',\r\n                        fontSize: '0.95rem'\r\n                    }}>\r\n                        <p style={{ margin: 0 }}>Founder & Chief Executive Officer</p>\r\n                        <p style={{ margin: 0 }}>Product & Experience Architect</p>\r\n                        <p style={{ margin: 0 }}>Lead Designer</p>\r\n                        <p style={{ margin: 0 }}>Lead Engineer</p>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Special Thanks Section */}\r\n                <div style={{\r\n                    background: 'var(--bg-card, #050808)',\r\n                    borderRadius: '18px',\r\n                    padding: '3rem',\r\n                    border: '1px solid rgba(110, 255, 216, 0.15)',\r\n                    boxShadow: '0 0 40px rgba(110, 255, 216, 0.03)',\r\n                    textAlign: 'center'\r\n                }}>\r\n                    <p style={{\r\n                        fontSize: '0.85rem',\r\n                        color: 'var(--text-secondary, #6b7f78)',\r\n                        letterSpacing: '0.2em',\r\n                        textTransform: 'uppercase',\r\n                        marginBottom: '1rem',\r\n                        borderBottom: '1px solid rgba(110, 255, 216, 0.08)',\r\n                        paddingBottom: '0.5rem',\r\n                        display: 'inline-block'\r\n                    }}>\r\n                        Special Thanks\r\n                    </p>\r\n                    <h3 style={{\r\n                        fontSize: '1.2rem',\r\n                        fontWeight: '700',\r\n                        color: 'var(--accent, #6effd8)',\r\n                        margin: '0 0 1rem 0',\r\n                        letterSpacing: '0.05em'\r\n                    }}>\r\n                        To Our Users\r\n                    </h3>\r\n                    <p style={{\r\n                        margin: 0,\r\n                        color: 'var(--text-primary, #d8fff1)',\r\n                        fontSize: '0.95rem',\r\n                        lineHeight: '1.6'\r\n                    }}>\r\n                        For having good taste.\r\n                    </p>\r\n                </div>\r\n\r\n                {/* Copyright */}\r\n                <div style={{\r\n                    textAlign: 'center',\r\n                    color: 'var(--text-secondary, #6b7f78)',\r\n                    fontSize: '0.85rem',\r\n                    marginTop: '2rem',\r\n                    paddingTop: '2rem',\r\n                    borderTop: '1px solid rgba(110, 255, 216, 0.1)'\r\n                }}>\r\n                    <p style={{ margin: 0 }}>┬⌐ 2025 Panospace. All Rights Reserved.</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Credits;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\pages\\CustomFeedCreator.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaCompass' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":50,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":59},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaPalette' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":77,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":86}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { FaArrowLeft, FaCheck, FaGlobe, FaUsers, FaCompass, FaMapMarkerAlt, FaPalette, FaTimes, FaPlus } from 'react-icons/fa';\r\nimport { useCustomFeeds } from '@/hooks/useCustomFeeds';\r\nimport TagCategoryPanel from '@/components/create-post/TagCategoryPanel';\r\n\r\nconst CustomFeedCreator = () => {\r\n    const navigate = useNavigate();\r\n    const { createFeed } = useCustomFeeds();\r\n    const [saving, setSaving] = useState(false);\r\n\r\n    // Form State\r\n    const [name, setName] = useState('');\r\n    const [tags, setTags] = useState([]);\r\n    const [locations, setLocations] = useState([]);\r\n    const [locationInput, setLocationInput] = useState('');\r\n    const [orientation, setOrientation] = useState('any'); // any, portrait, landscape\r\n    const [includeGlobal, setIncludeGlobal] = useState(true);\r\n    const [includeFollowing, setIncludeFollowing] = useState(true);\r\n    const [selectedColors, setSelectedColors] = useState([]);\r\n\r\n    // Tag Panel State\r\n    const [expandedCategories, setExpandedCategories] = useState({\r\n        mood: false,\r\n        style: false,\r\n        subject: false,\r\n        technical: false\r\n    });\r\n\r\n    const toggleCategory = (id) => {\r\n        setExpandedCategories(prev => ({\r\n            ...prev,\r\n            [id]: !prev[id]\r\n        }));\r\n    };\r\n\r\n    const handleTagToggle = (tag) => {\r\n        if (tags.includes(tag)) {\r\n            setTags(tags.filter(t => t !== tag));\r\n        } else {\r\n            setTags([...tags, tag]);\r\n        }\r\n    };\r\n\r\n    const handleAddLocation = (e) => {\r\n        e.preventDefault();\r\n        if (locationInput.trim()) {\r\n            setLocations([...locations, locationInput.trim()]);\r\n            setLocationInput('');\r\n        }\r\n    };\r\n\r\n    const removeLocation = (loc) => {\r\n        setLocations(locations.filter(l => l !== loc));\r\n    };\r\n\r\n    const toggleColor = (color) => {\r\n        if (selectedColors.includes(color)) {\r\n            setSelectedColors(selectedColors.filter(c => c !== color));\r\n        } else {\r\n            setSelectedColors([...selectedColors, color]);\r\n        }\r\n    };\r\n\r\n    const handleSave = async () => {\r\n        if (!name.trim()) {\r\n            alert(\"Please enter a feed name\");\r\n            return;\r\n        }\r\n\r\n        setSaving(true);\r\n        try {\r\n            await createFeed({\r\n                name: name.trim(),\r\n                tags,\r\n                locations,\r\n                orientation,\r\n                includeGlobal,\r\n                includeFollowing,\r\n                colorFilters: selectedColors\r\n            });\r\n            navigate('/custom-feeds');\r\n        } catch (error) {\r\n            console.error(\"Failed to save feed\", error);\r\n            alert(\"Failed to save feed. Please try again.\");\r\n            setSaving(false);\r\n        }\r\n    };\r\n\r\n    // Simple color palette for selection\r\n    const availableColors = [\r\n        '#FF0000', '#FFA500', '#FFFF00', '#008000', '#0000FF', '#4B0082', '#EE82EE', // Rainbow\r\n        '#FFFFFF', '#000000', '#808080', '#A52A2A', '#FFC0CB', '#40E0D0' // Others\r\n    ];\r\n\r\n    return (\r\n        <div style={{\r\n            minHeight: '100vh',\r\n            background: 'var(--bg-darker, #020404)',\r\n            color: 'var(--text-primary, #d8fff1)',\r\n            paddingBottom: '100px'\r\n        }}>\r\n            {/* Header */}\r\n            <div style={{\r\n                padding: '1rem 2rem',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '1rem',\r\n                background: 'rgba(0, 0, 0, 0.95)',\r\n                backdropFilter: 'blur(10px)',\r\n                borderBottom: '1px solid rgba(110, 255, 216, 0.2)',\r\n                position: 'sticky',\r\n                top: 0,\r\n                zIndex: 100\r\n            }}>\r\n                <button\r\n                    onClick={() => navigate(-1)}\r\n                    style={{\r\n                        background: 'transparent',\r\n                        border: 'none',\r\n                        color: 'var(--accent, #6effd8)',\r\n                        cursor: 'pointer',\r\n                        fontSize: '1.2rem',\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        padding: 0\r\n                    }}\r\n                >\r\n                    <FaArrowLeft />\r\n                </button>\r\n                <h1 style={{\r\n                    fontSize: '1.2rem',\r\n                    fontWeight: '700',\r\n                    color: 'var(--accent, #6effd8)',\r\n                    fontFamily: 'var(--font-family-heading)',\r\n                    letterSpacing: '0.15em',\r\n                    textTransform: 'uppercase',\r\n                    margin: 0\r\n                }}>New Custom Feed</h1>\r\n                <button\r\n                    onClick={handleSave}\r\n                    disabled={saving}\r\n                    style={{\r\n                        marginLeft: 'auto',\r\n                        background: 'var(--accent, #6effd8)',\r\n                        color: '#000',\r\n                        border: 'none',\r\n                        borderRadius: '20px',\r\n                        padding: '0.5rem 1rem',\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        justifyContent: 'center',\r\n                        cursor: saving ? 'wait' : 'pointer',\r\n                        fontWeight: 'bold',\r\n                        fontSize: '0.9rem',\r\n                        opacity: saving ? 0.7 : 1\r\n                    }}\r\n                >\r\n                    {saving ? 'Saving...' : 'Save'}\r\n                </button>\r\n            </div>\r\n\r\n            <div style={{ padding: '1rem', maxWidth: '800px', margin: '0 auto' }}>\r\n\r\n                {/* Name Input */}\r\n                <div style={{ marginBottom: '2rem' }}>\r\n                    <label style={{ display: 'block', color: 'var(--text-secondary)', marginBottom: '0.5rem', fontSize: '0.9rem' }}>FEED NAME</label>\r\n                    <input\r\n                        type=\"text\"\r\n                        value={name}\r\n                        onChange={(e) => setName(e.target.value)}\r\n                        placeholder=\"e.g. Minimalist Architecture\"\r\n                        style={{\r\n                            width: '100%',\r\n                            background: 'transparent',\r\n                            border: 'none',\r\n                            borderBottom: '1px solid rgba(110, 255, 216, 0.3)',\r\n                            color: 'var(--text-primary)',\r\n                            fontSize: '1.5rem',\r\n                            padding: '0.5rem 0',\r\n                            outline: 'none',\r\n                            fontFamily: 'var(--font-family-heading)'\r\n                        }}\r\n                    />\r\n                </div>\r\n\r\n                {/* Sources Section */}\r\n                <div style={sectionStyle}>\r\n                    <h3 style={sectionHeaderStyle}>Sources</h3>\r\n                    <div style={{ display: 'flex', gap: '1rem', flexWrap: 'wrap' }}>\r\n                        <ToggleOption\r\n                            label=\"Include Global Feed\"\r\n                            active={includeGlobal}\r\n                            onClick={() => setIncludeGlobal(!includeGlobal)}\r\n                            icon={FaGlobe}\r\n                        />\r\n                        <ToggleOption\r\n                            label=\"Include Following\"\r\n                            active={includeFollowing}\r\n                            onClick={() => setIncludeFollowing(!includeFollowing)}\r\n                            icon={FaUsers}\r\n                        />\r\n                    </div>\r\n                    {!includeGlobal && !includeFollowing && (\r\n                        <p style={{ color: '#ff4444', fontSize: '0.8rem', marginTop: '0.5rem' }}>\r\n                            You must select at least one source (Global or Following)\r\n                        </p>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Orientation */}\r\n                <div style={sectionStyle}>\r\n                    <h3 style={sectionHeaderStyle}>Orientation</h3>\r\n                    <div style={{ display: 'flex', gap: '0.5rem', background: '#000', padding: '4px', borderRadius: '8px', border: '1px solid rgba(255,255,255,0.1)' }}>\r\n                        {['any', 'portrait', 'landscape'].map(opt => (\r\n                            <button\r\n                                key={opt}\r\n                                onClick={() => setOrientation(opt)}\r\n                                style={{\r\n                                    flex: 1,\r\n                                    padding: '0.6rem',\r\n                                    background: orientation === opt ? 'var(--dark-grey)' : 'transparent',\r\n                                    color: orientation === opt ? '#fff' : 'var(--text-secondary)',\r\n                                    border: 'none',\r\n                                    borderRadius: '6px',\r\n                                    textTransform: 'capitalize',\r\n                                    fontWeight: '600',\r\n                                    cursor: 'pointer',\r\n                                    fontSize: '0.9rem'\r\n                                }}\r\n                            >\r\n                                {opt}\r\n                            </button>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Colors */}\r\n                <div style={sectionStyle}>\r\n                    <h3 style={sectionHeaderStyle}>Color Filter</h3>\r\n                    <div style={{ display: 'flex', gap: '0.75rem', flexWrap: 'wrap' }}>\r\n                        {availableColors.map(color => {\r\n                            const isSelected = selectedColors.includes(color);\r\n                            return (\r\n                                <button\r\n                                    key={color}\r\n                                    onClick={() => toggleColor(color)}\r\n                                    style={{\r\n                                        width: '32px',\r\n                                        height: '32px',\r\n                                        borderRadius: '50%',\r\n                                        background: color,\r\n                                        border: isSelected ? '2px solid #fff' : '2px solid transparent',\r\n                                        cursor: 'pointer',\r\n                                        boxShadow: isSelected ? '0 0 10px rgba(255,255,255,0.5)' : 'none',\r\n                                        position: 'relative',\r\n                                        display: 'flex',\r\n                                        alignItems: 'center',\r\n                                        justifyContent: 'center'\r\n                                    }}\r\n                                >\r\n                                    {isSelected && <FaCheck size={12} color={['#FFFFFF', '#FFFF00', '#40E0D0', '#FFC0CB'].includes(color) ? '#000' : '#fff'} />}\r\n                                </button>\r\n                            );\r\n                        })}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Locations */}\r\n                <div style={sectionStyle}>\r\n                    <h3 style={sectionHeaderStyle}>Locations</h3>\r\n                    <form onSubmit={handleAddLocation} style={{ marginBottom: '1rem', display: 'flex', gap: '0.5rem' }}>\r\n                        <div style={{\r\n                            flex: 1,\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            background: 'rgba(255,255,255,0.05)',\r\n                            borderRadius: '8px',\r\n                            border: '1px solid rgba(255,255,255,0.1)',\r\n                            padding: '0 0.75rem'\r\n                        }}>\r\n                            <FaMapMarkerAlt color=\"var(--text-secondary)\" />\r\n                            <input\r\n                                type=\"text\"\r\n                                value={locationInput}\r\n                                onChange={(e) => setLocationInput(e.target.value)}\r\n                                placeholder=\"Add location (e.g. New York, Japan)\"\r\n                                style={{\r\n                                    flex: 1,\r\n                                    background: 'transparent',\r\n                                    border: 'none',\r\n                                    padding: '0.8rem',\r\n                                    color: '#fff',\r\n                                    outline: 'none'\r\n                                }}\r\n                            />\r\n                        </div>\r\n                        <button type=\"submit\" disabled={!locationInput.trim()} style={{\r\n                            background: 'var(--dark-grey)',\r\n                            border: '1px solid rgba(255,255,255,0.1)',\r\n                            color: '#fff',\r\n                            width: '40px',\r\n                            borderRadius: '8px',\r\n                            cursor: 'pointer',\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            justifyContent: 'center'\r\n                        }}>\r\n                            <FaPlus />\r\n                        </button>\r\n                    </form>\r\n                    <div style={{ display: 'flex', flexWrap: 'wrap', gap: '0.5rem' }}>\r\n                        {locations.map(loc => (\r\n                            <span key={loc} style={{\r\n                                background: 'rgba(110, 255, 216, 0.1)',\r\n                                border: '1px solid rgba(110, 255, 216, 0.2)',\r\n                                borderRadius: '6px',\r\n                                padding: '0.4rem 0.8rem',\r\n                                fontSize: '0.85rem',\r\n                                color: 'var(--accent)',\r\n                                display: 'flex',\r\n                                alignItems: 'center',\r\n                                gap: '0.5rem'\r\n                            }}>\r\n                                {loc}\r\n                                <button onClick={() => removeLocation(loc)} style={{ background: 'transparent', border: 'none', color: 'inherit', padding: 0, cursor: 'pointer', display: 'flex' }}>\r\n                                    <FaTimes size={10} />\r\n                                </button>\r\n                            </span>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Tags (Reusing Component) */}\r\n                <div style={sectionStyle}>\r\n                    <TagCategoryPanel\r\n                        tags={tags}\r\n                        handleTagToggle={handleTagToggle}\r\n                        expandedCategories={expandedCategories}\r\n                        toggleCategory={toggleCategory}\r\n                    />\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n// UI Helpers\r\nconst ToggleOption = ({ label, active, onClick, icon: Icon }) => (\r\n    <button\r\n        onClick={onClick}\r\n        style={{\r\n            flex: '1 1 150px',\r\n            background: active ? 'rgba(110, 255, 216, 0.15)' : 'rgba(255, 255, 255, 0.03)',\r\n            border: active ? '1px solid var(--accent, #6effd8)' : '1px solid rgba(255, 255, 255, 0.1)',\r\n            borderRadius: '10px',\r\n            padding: '1rem',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '1rem',\r\n            cursor: 'pointer',\r\n            transition: 'all 0.2s',\r\n            color: active ? 'var(--accent)' : 'var(--text-secondary)'\r\n        }}\r\n    >\r\n        <Icon size={20} />\r\n        <span style={{ fontWeight: '600', fontSize: '0.9rem' }}>{label}</span>\r\n        {active && <FaCheck style={{ marginLeft: 'auto' }} />}\r\n    </button>\r\n);\r\n\r\nconst sectionStyle = {\r\n    marginBottom: '2rem',\r\n    background: 'var(--bg-card, #050808)',\r\n    padding: '1.5rem',\r\n    borderRadius: '12px',\r\n    border: '1px solid rgba(255, 255, 255, 0.05)'\r\n};\r\n\r\nconst sectionHeaderStyle = {\r\n    fontSize: '0.9rem',\r\n    textTransform: 'uppercase',\r\n    color: 'var(--text-secondary)',\r\n    marginBottom: '1rem',\r\n    marginTop: 0,\r\n    letterSpacing: '0.05em'\r\n};\r\n\r\nexport default CustomFeedCreator;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\pages\\CustomFeedManager.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useEffect' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'switchToFeed' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":15,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { FaPlus, FaTrash, FaCheck, FaArrowLeft, FaFilter, FaMapMarkerAlt, FaPalette, FaCompass, FaUsers, FaGlobe } from 'react-icons/fa';\r\nimport { useCustomFeeds } from '@/hooks/useCustomFeeds';\r\nimport { useFeedStore } from '@/core/store/useFeedStore';\r\n\r\nconst CustomFeedManager = () => {\r\n    const navigate = useNavigate();\r\n    const { feeds, loading, deleteFeed } = useCustomFeeds();\r\n    const {\r\n        customFeedEnabled,\r\n        activeCustomFeedId,\r\n        setCustomFeedEnabled,\r\n        setActiveCustomFeed,\r\n        switchToFeed\r\n    } = useFeedStore();\r\n\r\n    const handleSelectFeed = (feed) => {\r\n        setActiveCustomFeed(feed.id, feed.name);\r\n        setCustomFeedEnabled(true);\r\n        // Ensure we are in a mode that renders content (Feed.jsx handles this now)\r\n        navigate('/');\r\n    };\r\n\r\n    const handleDelete = async (id, e) => {\r\n        e.stopPropagation();\r\n        if (window.confirm(\"Are you sure you want to delete this custom feed?\")) {\r\n            await deleteFeed(id);\r\n        }\r\n    };\r\n\r\n    const handleCreateNew = () => {\r\n        navigate('/custom-feeds/create');\r\n    };\r\n\r\n    return (\r\n        <div style={{\r\n            minHeight: '100vh',\r\n            background: 'var(--bg-darker, #020404)',\r\n            color: 'var(--text-primary, #d8fff1)',\r\n            paddingBottom: '80px'\r\n        }}>\r\n            {/* Header */}\r\n            <div style={{\r\n                padding: '1rem 2rem',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '1rem',\r\n                background: 'rgba(0, 0, 0, 0.95)',\r\n                backdropFilter: 'blur(10px)',\r\n                borderBottom: '1px solid rgba(110, 255, 216, 0.2)',\r\n                position: 'sticky',\r\n                top: 0,\r\n                zIndex: 100\r\n            }}>\r\n                <button\r\n                    onClick={() => navigate('/')}\r\n                    style={{\r\n                        background: 'transparent',\r\n                        border: 'none',\r\n                        color: 'var(--accent, #6effd8)',\r\n                        cursor: 'pointer',\r\n                        fontSize: '1.2rem',\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        padding: 0\r\n                    }}\r\n                >\r\n                    <FaArrowLeft />\r\n                </button>\r\n                <h1 style={{\r\n                    fontSize: '1.2rem',\r\n                    fontWeight: '700',\r\n                    color: 'var(--accent, #6effd8)',\r\n                    fontFamily: 'var(--font-family-heading)',\r\n                    letterSpacing: '0.15em',\r\n                    textTransform: 'uppercase',\r\n                    margin: 0\r\n                }}>Custom Feeds</h1>\r\n                <button\r\n                    onClick={handleCreateNew}\r\n                    style={{\r\n                        marginLeft: 'auto',\r\n                        background: 'var(--accent, #6effd8)',\r\n                        color: '#000',\r\n                        border: 'none',\r\n                        borderRadius: '50%',\r\n                        width: '32px',\r\n                        height: '32px',\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        justifyContent: 'center',\r\n                        cursor: 'pointer'\r\n                    }}\r\n                >\r\n                    <FaPlus size={14} />\r\n                </button>\r\n            </div>\r\n\r\n            <div style={{ padding: '1rem', maxWidth: '800px', margin: '0 auto' }}>\r\n                <p style={{\r\n                    color: 'var(--text-secondary, #6b7f78)',\r\n                    background: 'rgba(110, 255, 216, 0.05)',\r\n                    padding: '1rem',\r\n                    borderRadius: '8px',\r\n                    border: '1px solid rgba(110, 255, 216, 0.1)',\r\n                    marginBottom: '2rem',\r\n                    fontSize: '0.9rem'\r\n                }}>\r\n                    Create personalized feeds based on specific tags, locations, colors, or orientation.\r\n                    Switch to these feeds anytime from the main menu.\r\n                </p>\r\n\r\n                {loading ? (\r\n                    <div style={{ padding: '2rem', textAlign: 'center', color: 'var(--text-secondary)' }}>Loading...</div>\r\n                ) : feeds.length === 0 ? (\r\n                    <div style={{\r\n                        textAlign: 'center',\r\n                        padding: '3rem',\r\n                        border: '1px dashed rgba(110, 255, 216, 0.2)',\r\n                        borderRadius: '12px',\r\n                        color: 'var(--text-secondary, #6b7f78)'\r\n                    }}>\r\n                        <FaFilter size={32} style={{ marginBottom: '1rem', opacity: 0.5 }} />\r\n                        <p>No custom feeds yet.</p>\r\n                        <button\r\n                            onClick={handleCreateNew}\r\n                            style={{\r\n                                marginTop: '1rem',\r\n                                padding: '0.8rem 1.5rem',\r\n                                background: 'transparent',\r\n                                border: '1px solid var(--accent, #6effd8)',\r\n                                color: 'var(--accent, #6effd8)',\r\n                                borderRadius: '8px',\r\n                                cursor: 'pointer',\r\n                                fontWeight: '600'\r\n                            }}\r\n                        >\r\n                            Create Your First Feed\r\n                        </button>\r\n                    </div>\r\n                ) : (\r\n                    <div style={{ display: 'grid', gap: '1rem' }}>\r\n                        {feeds.map(feed => {\r\n                            const isActive = customFeedEnabled && activeCustomFeedId === feed.id;\r\n                            return (\r\n                                <div\r\n                                    key={feed.id}\r\n                                    onClick={() => handleSelectFeed(feed)}\r\n                                    style={{\r\n                                        background: isActive ? 'rgba(110, 255, 216, 0.1)' : 'var(--bg-card, #050808)',\r\n                                        border: isActive ? '1px solid var(--accent, #6effd8)' : '1px solid rgba(110, 255, 216, 0.1)',\r\n                                        borderRadius: '12px',\r\n                                        padding: '1.25rem',\r\n                                        cursor: 'pointer',\r\n                                        transition: 'all 0.2s',\r\n                                        position: 'relative'\r\n                                    }}\r\n                                >\r\n                                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: '0.75rem' }}>\r\n                                        <h3 style={{\r\n                                            margin: 0,\r\n                                            color: 'var(--text-primary, #d8fff1)',\r\n                                            fontSize: '1.1rem',\r\n                                            fontWeight: '600',\r\n                                            display: 'flex',\r\n                                            alignItems: 'center',\r\n                                            gap: '0.5rem'\r\n                                        }}>\r\n                                            {feed.name}\r\n                                            {isActive && <FaCheck size={14} color=\"var(--accent)\" />}\r\n                                        </h3>\r\n                                        <button\r\n                                            onClick={(e) => handleDelete(feed.id, e)}\r\n                                            style={{\r\n                                                background: 'transparent',\r\n                                                border: 'none',\r\n                                                color: '#ff4444',\r\n                                                opacity: 0.7,\r\n                                                cursor: 'pointer',\r\n                                                padding: '4px'\r\n                                            }}\r\n                                        >\r\n                                            <FaTrash />\r\n                                        </button>\r\n                                    </div>\r\n\r\n                                    {/* Filters Summary */}\r\n                                    <div style={{ display: 'flex', flexWrap: 'wrap', gap: '0.5rem' }}>\r\n                                        {feed.includeGlobal && (\r\n                                            <span style={pillStyle}><FaGlobe size={10} /> Global</span>\r\n                                        )}\r\n                                        {feed.includeFollowing && (\r\n                                            <span style={pillStyle}><FaUsers size={10} /> Following</span>\r\n                                        )}\r\n                                        {feed.orientation !== 'any' && (\r\n                                            <span style={pillStyle}><FaCompass size={10} /> {feed.orientation}</span>\r\n                                        )}\r\n                                        {feed.locations && feed.locations.length > 0 && (\r\n                                            <span style={pillStyle}><FaMapMarkerAlt size={10} /> {feed.locations.length} Locations</span>\r\n                                        )}\r\n                                        {feed.tags && feed.tags.length > 0 && (\r\n                                            <span style={pillStyle}><FaFilter size={10} /> {feed.tags.length} Tags</span>\r\n                                        )}\r\n                                        {feed.colorFilters && feed.colorFilters.length > 0 && (\r\n                                            <span style={pillStyle}><FaPalette size={10} /> {feed.colorFilters.length} Colors</span>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n                            );\r\n                        })}\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst pillStyle = {\r\n    background: 'rgba(255, 255, 255, 0.05)',\r\n    border: '1px solid rgba(255, 255, 255, 0.1)',\r\n    borderRadius: '100px',\r\n    padding: '4px 10px',\r\n    fontSize: '0.75rem',\r\n    color: 'var(--text-secondary, #6b7f78)',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    gap: '4px'\r\n};\r\n\r\nexport default CustomFeedManager;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\pages\\Debug.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\r\nimport { collection, getDocs, query, orderBy, limit } from 'firebase/firestore';\r\nimport { db } from '@/firebase';\r\nimport { logger } from '@/core/utils/logger';\r\n\r\nconst Debug = () => {\r\n    const [data, setData] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        const fetchData = async () => {\r\n            try {\r\n                logger.log(\"Running Debug Query...\");\r\n                const q = query(collection(db, 'posts'), orderBy('createdAt', 'desc'), limit(20));\r\n\r\n                const snapshot = await getDocs(q);\r\n                logger.log(\"Snapshot size:\", snapshot.size);\r\n\r\n                const posts = snapshot.docs.map(doc => ({\r\n                    id: doc.id,\r\n                    ...doc.data()\r\n                }));\r\n                setData(posts);\r\n            } catch (err) {\r\n                logger.error(\"Debug Query Error:\", err);\r\n                setData({ error: err.message, code: err.code });\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n        fetchData();\r\n    }, []);\r\n\r\n    return (\r\n        <div style={{ padding: '20px', background: '#fff', color: '#000', minHeight: '100vh' }}>\r\n            <h1>Debug Data - Latest 20 Posts</h1>\r\n            {loading ? <p>Loading...</p> : (\r\n                <pre>{JSON.stringify(data, null, 2)}</pre>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Debug;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\pages\\EditPost.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { db } from '@/firebase';\r\nimport { doc, getDoc, updateDoc, serverTimestamp } from 'firebase/firestore';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { FaArrowLeft, FaTags, FaMapMarkerAlt, FaSave, FaSmile } from 'react-icons/fa';\r\nimport Toast from '@/components/Toast';\r\nimport CosmicEmojiPicker from '@/components/common/CosmicEmojiPicker';\r\nimport { generateSearchKeywords } from '@/core/utils/searchKeywords';\r\n\r\nconst EditPost = () => {\r\n    const { id } = useParams();\r\n    const navigate = useNavigate();\r\n    const { currentUser } = useAuth();\r\n\r\n    const [loading, setLoading] = useState(true);\r\n    const [saving, setSaving] = useState(false);\r\n    const [post, setPost] = useState(null);\r\n\r\n    const [title, setTitle] = useState('');\r\n    const [tags, setTags] = useState('');\r\n    const [location, setLocation] = useState({ city: '', state: '', country: '' });\r\n\r\n    const [showToast, setShowToast] = useState(false);\r\n    const [showEmojiPicker, setShowEmojiPicker] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const fetchPost = async () => {\r\n            if (!currentUser) return;\r\n\r\n            try {\r\n                const docRef = doc(db, 'posts', id);\r\n                const docSnap = await getDoc(docRef);\r\n\r\n                if (docSnap.exists()) {\r\n                    const data = docSnap.data();\r\n                    if (data.authorId !== currentUser.uid) {\r\n                        alert(\"You are not authorized to edit this post.\");\r\n                        navigate('/');\r\n                        return;\r\n                    }\r\n                    setPost(data);\r\n                    setTitle(data.title || '');\r\n                    setTags(data.tags ? data.tags.join(', ') : '');\r\n                    setLocation({\r\n                        city: data.location?.city || '',\r\n                        state: data.location?.state || '',\r\n                        country: data.location?.country || ''\r\n                    });\r\n                } else {\r\n                    alert(\"Post not found.\");\r\n                    navigate('/');\r\n                }\r\n            } catch (error) {\r\n                console.error(\"Error fetching post:\", error);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchPost();\r\n    }, [id, currentUser, navigate]);\r\n\r\n\r\n\r\n    const handleSave = async () => {\r\n        if (!currentUser || !post) return;\r\n        setSaving(true);\r\n\r\n        try {\r\n            const tagList = tags.split(',').map(t => t.trim()).filter(t => t.length > 0);\r\n\r\n            const searchKeywords = [\r\n                ...generateSearchKeywords(currentUser.displayName || ''),\r\n                ...generateSearchKeywords(title),\r\n                ...tagList.map(t => t.toLowerCase()),\r\n                ...generateSearchKeywords(location.city),\r\n                ...generateSearchKeywords(location.state),\r\n                ...generateSearchKeywords(location.country)\r\n            ];\r\n\r\n            const docRef = doc(db, 'posts', id);\r\n            await updateDoc(docRef, {\r\n                title: title,\r\n                tags: tagList,\r\n                location: {\r\n                    city: location.city.trim(),\r\n                    state: location.state.trim(),\r\n                    country: location.country.trim()\r\n                },\r\n                searchKeywords: [...new Set(searchKeywords)],\r\n                updatedAt: serverTimestamp()\r\n            });\r\n\r\n            setShowToast(true);\r\n            setTimeout(() => {\r\n                navigate(-1); // Go back\r\n            }, 1500);\r\n\r\n        } catch (error) {\r\n            console.error(\"Error updating post:\", error);\r\n            alert(\"Failed to update post.\");\r\n        } finally {\r\n            setSaving(false);\r\n        }\r\n    };\r\n\r\n    if (loading) {\r\n        return <div style={{ height: '100vh', background: '#000', color: '#fff', display: 'flex', justifyContent: 'center', alignItems: 'center' }}>Loading...</div>;\r\n    }\r\n\r\n    return (\r\n        <div style={{ minHeight: '100vh', width: '100vw', display: 'flex', flexDirection: 'column', background: '#000', color: '#fff' }}>\r\n            {/* Header */}\r\n            <div style={{\r\n                padding: '1rem 2rem',\r\n                display: 'flex',\r\n                justifyContent: 'space-between',\r\n                alignItems: 'center',\r\n                background: 'rgba(20, 20, 20, 0.8)',\r\n                backdropFilter: 'blur(10px)',\r\n                borderBottom: '1px solid rgba(255, 255, 255, 0.1)',\r\n                zIndex: 10\r\n            }}>\r\n                <button onClick={() => navigate(-1)} style={{ background: 'transparent', border: 'none', color: '#fff', cursor: 'pointer', display: 'flex', alignItems: 'center', gap: '0.5rem', fontSize: '1rem', opacity: 0.8 }}>\r\n                    <FaArrowLeft /> Cancel\r\n                </button>\r\n                <h2 style={{ fontSize: '1.2rem', fontWeight: '700', letterSpacing: '0.05em', fontFamily: 'var(--font-family-heading)', textTransform: 'uppercase' }}>EDIT POST</h2>\r\n                <button\r\n                    onClick={handleSave}\r\n                    disabled={saving}\r\n                    style={{\r\n                        padding: '0.5rem 1.5rem',\r\n                        backgroundColor: '#fff',\r\n                        color: '#000',\r\n                        border: 'none',\r\n                        borderRadius: '20px',\r\n                        cursor: 'pointer',\r\n                        fontWeight: 'bold',\r\n                        opacity: saving ? 0.5 : 1,\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        gap: '0.5rem'\r\n                    }}\r\n                >\r\n                    <FaSave /> Save\r\n                </button>\r\n            </div>\r\n\r\n            {/* Main Content */}\r\n            <div style={{ flex: 1, display: 'flex', flexDirection: 'column', padding: '2rem', gap: '2rem', maxWidth: '800px', margin: '0 auto', width: '100%' }}>\r\n\r\n                {/* Preview Image (First Slide) */}\r\n                {post.items && post.items.length > 0 && post.items[0].type === 'image' && (\r\n                    <div style={{ width: '100%', height: '200px', borderRadius: '12px', overflow: 'hidden', border: '1px solid #333' }}>\r\n                        <img src={post.items[0].url} alt=\"Preview\" style={{ width: '100%', height: '100%', objectFit: 'cover' }} />\r\n                    </div>\r\n                )}\r\n\r\n                {/* Inputs */}\r\n                <div style={{ display: 'flex', flexDirection: 'column', gap: '1.5rem', background: '#111', padding: '2rem', borderRadius: '16px', border: '1px solid #333' }}>\r\n\r\n                    {/* Title */}\r\n                    <div style={{ display: 'flex', flexDirection: 'column', gap: '0.5rem' }}>\r\n                        <label style={{ color: '#888', fontSize: '0.9rem' }}>Title / Caption</label>\r\n                        <input\r\n                            type=\"text\"\r\n                            value={title}\r\n                            onChange={(e) => setTitle(e.target.value)}\r\n                            style={{ background: 'transparent', border: 'none', borderBottom: '1px solid #333', color: '#fff', fontSize: '1.2rem', padding: '0.5rem', outline: 'none' }}\r\n                        />\r\n                    </div>\r\n\r\n                    {/* Tags */}\r\n                    <div style={{ display: 'flex', flexDirection: 'column', gap: '0.5rem' }}>\r\n                        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                            <label style={{ color: '#888', fontSize: '0.9rem', display: 'flex', alignItems: 'center', gap: '0.5rem' }}><FaTags /> Tags</label>\r\n                            <button\r\n                                onClick={() => setShowEmojiPicker(!showEmojiPicker)}\r\n                                style={{ background: 'transparent', border: 'none', color: showEmojiPicker ? '#7FFFD4' : '#666', cursor: 'pointer', display: 'flex', alignItems: 'center' }}\r\n                            >\r\n                                <FaSmile size={16} />\r\n                            </button>\r\n                        </div>\r\n                        <input\r\n                            type=\"text\"\r\n                            placeholder=\"nature, portrait, b&w\"\r\n                            value={tags}\r\n                            onChange={(e) => setTags(e.target.value)}\r\n                            style={{ background: 'transparent', border: 'none', borderBottom: '1px solid #333', color: '#fff', fontSize: '1rem', padding: '0.5rem', outline: 'none' }}\r\n                        />\r\n                        <CosmicEmojiPicker\r\n                            visible={showEmojiPicker}\r\n                            onSelect={(emoji) => setTags(prev => prev + emoji)}\r\n                            style={{ marginTop: '0.5rem' }}\r\n                        />\r\n                    </div>\r\n\r\n                    {/* Location */}\r\n                    <div style={{ display: 'flex', flexDirection: 'column', gap: '0.5rem' }}>\r\n                        <label style={{ color: '#888', fontSize: '0.9rem', display: 'flex', alignItems: 'center', gap: '0.5rem' }}><FaMapMarkerAlt /> Location</label>\r\n                        <div style={{ display: 'flex', gap: '1rem', flexWrap: 'wrap' }}>\r\n                            <input\r\n                                type=\"text\"\r\n                                placeholder=\"City\"\r\n                                value={location.city}\r\n                                onChange={(e) => setLocation({ ...location, city: e.target.value })}\r\n                                style={{ flex: 1, minWidth: '150px', background: '#222', border: '1px solid #333', borderRadius: '8px', color: '#fff', padding: '0.8rem', outline: 'none' }}\r\n                            />\r\n                            <input\r\n                                type=\"text\"\r\n                                placeholder=\"State\"\r\n                                value={location.state}\r\n                                onChange={(e) => setLocation({ ...location, state: e.target.value })}\r\n                                style={{ flex: 1, minWidth: '150px', background: '#222', border: '1px solid #333', borderRadius: '8px', color: '#fff', padding: '0.8rem', outline: 'none' }}\r\n                            />\r\n                            <input\r\n                                type=\"text\"\r\n                                placeholder=\"Country\"\r\n                                value={location.country}\r\n                                onChange={(e) => setLocation({ ...location, country: e.target.value })}\r\n                                style={{ flex: 1, minWidth: '150px', background: '#222', border: '1px solid #333', borderRadius: '8px', color: '#fff', padding: '0.8rem', outline: 'none' }}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {showToast && (\r\n                <Toast\r\n                    message=\"Post updated successfully!\"\r\n                    type=\"success\"\r\n                    onClose={() => setShowToast(false)}\r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default EditPost;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\pages\\EditProfile.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useRef' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":38,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":44},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ART_DISCIPLINES' is defined but never used. Allowed unused vars must match /^_/u.","line":9,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'getGradientBackground' is defined but never used. Allowed unused vars must match /^_/u.","line":10,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":50},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'getCurrentGradientId' is defined but never used. Allowed unused vars must match /^_/u.","line":10,"column":52,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":72},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'getUnlockedGradients' is defined but never used. Allowed unused vars must match /^_/u.","line":10,"column":74,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":94},{"ruleId":"no-control-regex","severity":2,"message":"Unexpected control character(s) in regular expression: \\x00.","line":254,"column":25,"nodeType":"Literal","messageId":"unexpected","endLine":254,"endColumn":39},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\-.","line":289,"column":65,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":289,"endColumn":66,"suggestions":[{"messageId":"removeEscape","fix":{"range":[13707,13708],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[13707,13707],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'renderCosmicString' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":313,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":313,"endColumn":43},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'emojiCount' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":336,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":336,"endColumn":35},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'textCount' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":340,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":340,"endColumn":34}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef } from 'react';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { updateProfile } from 'firebase/auth';\r\nimport { doc, getDoc, setDoc, collection, query, where, getDocs } from 'firebase/firestore';\r\nimport { db, storage } from '@/firebase';\r\nimport { ref, uploadBytes, getDownloadURL } from 'firebase/storage';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { FaArrowLeft, FaCamera, FaSave, FaCheck, FaInfoCircle, FaLock } from 'react-icons/fa';\r\nimport { ART_DISCIPLINES } from '@/core/constants/artDisciplines';\r\nimport { PROFILE_GRADIENTS, getGradientBackground, getCurrentGradientId, getUnlockedGradients } from '@/core/constants/gradients';\r\nimport { ALL_COLORS } from '@/core/constants/colorPacks';\r\nimport DisciplineSelector from '@/components/DisciplineSelector';\r\nimport { generateUserSearchKeywords } from '@/core/utils/searchKeywords';\r\nimport { sanitizeDisplayName, sanitizeBio } from '@/core/utils/sanitize';\r\nimport ImageCropper from '@/components/ImageCropper';\r\nimport CosmicGuideModal from '@/components/CosmicGuideModal';\r\nimport { getRenderedUsernameLength } from '@/utils/usernameRenderer';\r\nimport BannerTypeSelector from '@/components/edit-profile/BannerTypeSelector';\r\nimport BannerColorSelector from '@/components/edit-profile/BannerColorSelector';\r\nimport { BANNER_TYPES } from '@/core/constants/bannerThemes';\r\n\r\nconst EditProfile = () => {\r\n    const { currentUser } = useAuth();\r\n    const navigate = useNavigate();\r\n    // Mock Premium Status check - In real app, check user subscription status\r\n    const isPremiumUser = currentUser?.isPremium || false;\r\n\r\n    const [showSymbolGuide, setShowSymbolGuide] = useState(false);\r\n\r\n    // ... (existing state init)\r\n    const [loading, setLoading] = useState(false);\r\n    // Removed separate displayName state as username is now the source of truth\r\n    const [username, setUsername] = useState('');\r\n    const [originalUsername, setOriginalUsername] = useState(''); // To check for changes\r\n    const [bio, setBio] = useState('');\r\n    const [profileBgColor, setProfileBgColor] = useState('#000000');\r\n    const [preview, setPreview] = useState(currentUser?.photoURL || '');\r\n\r\n    // New Discipline State\r\n    const [selectedMain, setSelectedMain] = useState([]); // Array of strings\r\n    const [selectedNiches, setSelectedNiches] = useState({}); // Object: { \"Photography\": [\"Landscape\"] }\r\n    const [expandedDiscipline, setExpandedDiscipline] = useState(null); // For UI accordion\r\n\r\n    // Profile Theme State\r\n    const [selectedGradient, setSelectedGradient] = useState('aurora-horizon');\r\n    const [unlockedGradients, setUnlockedGradients] = useState(['aurora-horizon']);\r\n    const [starColor, setStarColor] = useState('#7FFFD4'); // Default ice-mint\r\n    const [profileBorderColor, setProfileBorderColor] = useState('#7FFFD4');\r\n    const [usernameColor, setUsernameColor] = useState('#FFFFFF'); // Default white\r\n    const [bannerMode, setBannerMode] = useState('stars'); // 'stars' or 'gradient'\r\n    const [bannerColor, setBannerColor] = useState('#7FFFD4'); // Separate from border color\r\n    const [useStarsOverlay, setUseStarsOverlay] = useState(false);\r\n    const [textGlow, setTextGlow] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const fetchUserData = async () => {\r\n            if (currentUser) {\r\n                const userDoc = await getDoc(doc(db, 'users', currentUser.uid));\r\n                if (userDoc.exists()) {\r\n                    const data = userDoc.data();\r\n                    setBio(data.bio || '');\r\n                    setProfileBgColor(data.profileBgColor || '#000000');\r\n                    // Fetch username\r\n                    const fetchedUsername = data.username || currentUser.displayName || '';\r\n                    setUsername(fetchedUsername);\r\n                    setOriginalUsername(fetchedUsername);\r\n\r\n                    // Load disciplines if they exist\r\n                    if (data.disciplines) {\r\n                        setSelectedMain(data.disciplines.main || []);\r\n                        setSelectedNiches(data.disciplines.niches || {});\r\n                    }\r\n\r\n                    // Load profile theme\r\n                    if (data.profileTheme) {\r\n                        setSelectedGradient(data.profileTheme.gradientId || 'aurora-horizon');\r\n                        setUnlockedGradients(data.profileTheme.unlockedGradients || ['aurora-horizon']);\r\n                        setStarColor(data.profileTheme.starColor || '#7FFFD4');\r\n                        setProfileBorderColor(data.profileTheme.borderColor || '#7FFFD4');\r\n                        setUsernameColor(data.profileTheme.usernameColor || '#FFFFFF');\r\n                        setBannerMode(data.profileTheme.bannerMode || 'stars');\r\n                        setBannerColor(data.profileTheme.bannerColor || data.profileTheme.borderColor || '#7FFFD4'); // Fallback for legacy\r\n                        setUseStarsOverlay(data.profileTheme.useStarsOverlay || false);\r\n                        setTextGlow(data.profileTheme.textGlow || false);\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        fetchUserData();\r\n    }, [currentUser]);\r\n\r\n    const [showCropper, setShowCropper] = useState(false);\r\n    const [tempImageSrc, setTempImageSrc] = useState(null);\r\n\r\n    const handleFileChange = (e) => {\r\n        const file = e.target.files[0];\r\n        if (file) {\r\n            const reader = new FileReader();\r\n            reader.onloadend = () => {\r\n                setTempImageSrc(reader.result);\r\n                setShowCropper(true);\r\n            };\r\n            reader.readAsDataURL(file);\r\n        }\r\n        // Reset input\r\n        e.target.value = '';\r\n    };\r\n\r\n    const handleCropComplete = (blob) => {\r\n        const croppedUrl = URL.createObjectURL(blob);\r\n        setPreview(croppedUrl);\r\n\r\n        // Convert blob to file for upload\r\n        const file = new File([blob], \"profile_photo.jpg\", { type: \"image/jpeg\" });\r\n        setSelectedFile(file);\r\n        setShowCropper(false);\r\n        setTempImageSrc(null);\r\n    };\r\n\r\n    // Discipline Logic\r\n    const toggleMainDiscipline = (discipline) => {\r\n        if (selectedMain.includes(discipline)) {\r\n            // Remove\r\n            setSelectedMain(prev => prev.filter(d => d !== discipline));\r\n            // Also remove associated niches\r\n            const newNiches = { ...selectedNiches };\r\n            delete newNiches[discipline];\r\n            setSelectedNiches(newNiches);\r\n            if (expandedDiscipline === discipline) setExpandedDiscipline(null);\r\n        } else {\r\n            // Add (no limit)\r\n            setSelectedMain(prev => [...prev, discipline]);\r\n            setExpandedDiscipline(discipline); // Auto-expand to show niches\r\n        }\r\n    };\r\n\r\n    const toggleNiche = (discipline, niche) => {\r\n        const isSelected = selectedNiches[discipline]?.includes(niche);\r\n\r\n        if (isSelected) {\r\n            // Remove\r\n            setSelectedNiches(prev => ({\r\n                ...prev,\r\n                [discipline]: prev[discipline].filter(n => n !== niche)\r\n            }));\r\n        } else {\r\n            // Add (no limit)\r\n            setSelectedNiches(prev => ({\r\n                ...prev,\r\n                [discipline]: [...(prev[discipline] || []), niche]\r\n            }));\r\n        }\r\n    };\r\n\r\n    const [selectedFile, setSelectedFile] = useState(null);\r\n\r\n    // Helper: Generate Bio Color based on Username Color\r\n    const generateBioColor = (hexColor) => {\r\n        // Default check\r\n        if (!hexColor || hexColor === '#FFFFFF' || hexColor.toLowerCase() === '#fff') {\r\n            return 'rgba(255, 255, 255, 0.7)'; // Standard soft white\r\n        }\r\n\r\n        // If gradient, we can't easily parse. Return standard white/gray for readability or take primary logic.\r\n        // For UI simplicity if gradient string is passed, we fallback to our generic nice gray.\r\n        if (hexColor.includes('gradient') || hexColor.includes('var')) {\r\n            return 'rgba(255, 255, 255, 0.75)';\r\n        }\r\n\r\n        // Basic Hex Parsing\r\n        let c;\r\n        if (/^#([A-Fa-f0-9]{3}){1,2}$/.test(hexColor)) {\r\n            c = hexColor.substring(1).split('');\r\n            if (c.length === 3) {\r\n                c = [c[0], c[0], c[1], c[1], c[2], c[2]];\r\n            }\r\n            c = '0x' + c.join('');\r\n\r\n            const r = (c >> 16) & 255;\r\n            const g = (c >> 8) & 255;\r\n            const b = c & 255;\r\n\r\n            // Calculate Luma (Approx brightness)\r\n            const luma = 0.2126 * r + 0.7152 * g + 0.0722 * b;\r\n\r\n            // Logic:\r\n            // If Bright (> 200) -> Darken slightly? No, on black bg we want it bright still, but dimmer than username.\r\n            // Actually, for a black background:\r\n            // High brightness color -> reduce opacity significantly (0.7) or brightness (keep Hue).\r\n            // Low brightness color (Dark Blue) -> It will be invisible on black. We need to Lighten it.\r\n\r\n            if (luma < 60) {\r\n                // Too dark for black background. Lighten it.\r\n                // Simple approach: mix with white\r\n                const mix = (c1, c2, w) => c1 + (c2 - c1) * w;\r\n                const r2 = Math.round(mix(r, 255, 0.4));\r\n                const g2 = Math.round(mix(g, 255, 0.4));\r\n                const b2 = Math.round(mix(b, 255, 0.4));\r\n                return `rgba(${r2}, ${g2}, ${b2}, 0.8)`;\r\n            } else {\r\n                // Bright enough. Just lower opacity to create hierarchy.\r\n                return `rgba(${r}, ${g}, ${b}, 0.65)`;\r\n            }\r\n        }\r\n        return 'rgba(255, 255, 255, 0.7)';\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        // Starting profile save...\r\n\r\n        if (!currentUser) {\r\n            console.error(\"No current user found.\");\r\n            return;\r\n        }\r\n\r\n        setLoading(true);\r\n\r\n        try {\r\n            let newPhotoURL = currentUser.photoURL;\r\n\r\n            // 1. Handle Image Upload\r\n            if (selectedFile) {\r\n                try {\r\n                    const storageRef = ref(storage, `profile_photos/${currentUser.uid}_${Date.now()}`);\r\n                    await uploadBytes(storageRef, selectedFile);\r\n                    newPhotoURL = await getDownloadURL(storageRef);\r\n                } catch (uploadError) {\r\n                    console.error(\"Image upload failed:\", uploadError);\r\n                    alert(\"Failed to upload image, but saving profile data.\");\r\n                }\r\n            }\r\n\r\n            // 2. Sanitation Checks\r\n            const sanitizedUsername = sanitizeDisplayName(username); // Use sanitizeDisplayName for username too as it handles basic trim\r\n            const sanitizedBio = sanitizeBio(bio);\r\n\r\n            // 2.5 Username Validation (If changed)\r\n            if (username !== originalUsername) {\r\n                // Length Check\r\n                const renderedLen = getRenderedUsernameLength(username);\r\n                if (renderedLen < 3 || renderedLen > 20) {\r\n                    alert(`Username length must be 3-20 characters (currently ${renderedLen}).`);\r\n                    setLoading(false);\r\n                    return;\r\n                }\r\n\r\n                // Char Check\r\n                // Explicitly allow ONLY alphanumeric and our specific symbols.\r\n                // This regex excludes all high-byte characters (like emojis).\r\n                const usernameRegex = /^[a-zA-Z0-9_@.*/\"%#^\\\\?[\\](){}< \\-:]+$/;\r\n                if (!usernameRegex.test(username)) {\r\n                    // Check if it's potentially an emoji\r\n                    if (/[^\\x00-\\x7F]/.test(username)) {\r\n                        alert('External emojis are not allowed. Please use the provided cosmic symbols.');\r\n                    } else {\r\n                        alert('Username contains invalid characters.');\r\n                    }\r\n                    setLoading(false);\r\n                    return;\r\n                }\r\n\r\n                // **NEW: Emoji Usage Validation**\r\n                // 1. Check for Emoji-Only (must have at least one alphanumeric char)\r\n                if (!/[a-zA-Z0-9]/.test(username)) {\r\n                    alert('Username must contain at least one letter or number.');\r\n                    setLoading(false);\r\n                    return;\r\n                }\r\n\r\n                // 2. Check for Back-to-Back Emojis without text/numbers in between\r\n                // Logic: \r\n                // - Scan string.\r\n                // - If we find a symbol/pattern, trigger \"inEmoji\" state.\r\n                // - If we find another symbol/pattern while \"inEmoji\" is true, FAIL.\r\n                // - If we find alphanumeric, reset \"inEmoji\" to false.\r\n\r\n                // Simplified Regex Approach for \"Back-to-Back Symbols\"\r\n                // Matches any two symbolic characters/groups next to each other.\r\n                // Symbols: @ . * / \" _ % # ^ \\ ? [ ] ( ) { } < -\r\n                // NOTE: Some symbols like [] and () are multi-char patterns, but raw input is what we check.\r\n                // We want to prevent: \"@*\" or \"[]()\" or \"@.\"\r\n\r\n                // Let's define \"Symbolic Block\" as any contiguous run of non-alphanumeric characters.\r\n                // If a symbolic block length > 1 (and it's not a valid single multi-char pattern itself, actually just ban consecutive separate symbols).\r\n\r\n                // Better Rule: \"No consecutive cosmic symbols allowed unless separated by text/numbers.\"\r\n                // Regex for a single cosmic symbol char:\r\n                const symbolCharPattern = /[@.*/\"%#^\\\\?[\\](){}< \\-]/;\r\n\r\n                let lastWasSymbol = false;\r\n                for (let i = 0; i < username.length; i++) {\r\n                    const char = username[i];\r\n                    const isSymbol = symbolCharPattern.test(char);\r\n\r\n                    if (isSymbol) {\r\n                        if (lastWasSymbol) {\r\n                            // Special allowance for specific multi-char patterns if we want to support them\r\n                            // But request says \"do not allow emojis to be used back to back without text\", \r\n                            // and raw input like \"()\" is technically back to back chars.\r\n                            // However, \"()\" becomes ONE emoji. So \"()\" is fine. \"()()\" is bad.\r\n\r\n                            // We need to parse strictly based on \"Entities\".\r\n                            // Let's defer to a smarter logic.\r\n                        }\r\n                        // This simple loop is too naive for multi-char patterns like \"()\".\r\n                    }\r\n                    // lastWasSymbol = isSymbol;\r\n                }\r\n\r\n                // Smart Entity Validation\r\n                // 1. Tokenize username into \"Text\" and \"Emoji\" blocks using our Renderer Logic\r\n                const { renderCosmicString } = await import('@/utils/usernameRenderer'); // Dynamic import to be safe or use what we have\r\n                // Actually we can just implement a quick tokenizer here or standard regex.\r\n\r\n                // Regex to find ALL distinct emoji patterns in the raw string.\r\n                // We must match longer patterns first.\r\n                // Patterns: <() -( [] () {} < @ . * / \" _ % # ^ \\ ? -\r\n                const cosmicPatternRegex = /(:\\)|<3|\\(:\\)|\\(8\\)|\\(0\\)|\\(@\\)|<\\(\\)|-\\(\\)|\\[\\]|\\(\\)|\\{\\}|@|\\.|-|\\*|\\/|\"|_|%|#|\\^|\\\\|\\?|<)/g;\r\n\r\n                const tokens = username.split(cosmicPatternRegex).filter(Boolean);\r\n\r\n                let consecutiveEmojiCount = 0;\r\n                let emojiCount = 0;\r\n                let textCount = 0;\r\n\r\n                for (const token of tokens) {\r\n                    if (cosmicPatternRegex.test(token)) {\r\n                        // It's an emoji/symbol\r\n                        consecutiveEmojiCount++;\r\n                        if (consecutiveEmojiCount > 3) {\r\n                            alert('You can only use up to 3 cosmic symbols in a row.');\r\n                            setLoading(false);\r\n                            return;\r\n                        }\r\n                        emojiCount++;\r\n                    } else {\r\n                        // It's text/numbers\r\n                        consecutiveEmojiCount = 0; // Reset consecutive count\r\n                        textCount++;\r\n                    }\r\n                }\r\n\r\n                // Uniqueness Check\r\n                const q = query(collection(db, 'users'), where('username', '==', username));\r\n                const existingDocs = await getDocs(q);\r\n                if (!existingDocs.empty) {\r\n                    alert('Username is already taken.');\r\n                    setLoading(false);\r\n                    return;\r\n                }\r\n            }\r\n\r\n            // 3. Auth Update & Consistency\r\n            // User requested \"Username and Display Name are the same thing\".\r\n            // So we set displayName to username.\r\n            await updateProfile(currentUser, {\r\n                displayName: sanitizedUsername,\r\n                photoURL: newPhotoURL\r\n            });\r\n\r\n            // 4. Firestore Update\r\n\r\n            // Auto-generate bio color\r\n            const autoBioColor = generateBioColor(usernameColor);\r\n\r\n            // Construct the update object carefully to avoid undefined values\r\n            const userUpdate = {\r\n                username: sanitizedUsername, // Update username\r\n                displayName: sanitizedUsername, // Sync display name\r\n                photoURL: newPhotoURL,\r\n                bio: sanitizedBio,\r\n                profileBgColor: profileBgColor || '#000000',\r\n                email: currentUser.email,\r\n                updatedAt: new Date(),\r\n\r\n                // Nested Objects - ensure they are complete\r\n                disciplines: {\r\n                    main: selectedMain || [],\r\n                    niches: selectedNiches || {}\r\n                },\r\n                profileTheme: {\r\n                    gradientId: selectedGradient || 'aurora-horizon',\r\n                    unlockedGradients: unlockedGradients || ['aurora-horizon'],\r\n                    starColor: starColor || '#7FFFD4',\r\n                    borderColor: profileBorderColor || '#7FFFD4',\r\n                    usernameColor: usernameColor || '#FFFFFF',\r\n                    bioColor: autoBioColor,\r\n                    bannerMode: bannerMode,\r\n                    bannerColor: bannerColor,\r\n                    useStarsOverlay: useStarsOverlay,\r\n                    textGlow: textGlow\r\n                }\r\n            };\r\n\r\n            // Add search keywords\r\n            userUpdate.searchKeywords = generateUserSearchKeywords({\r\n                displayName: sanitizedUsername,\r\n                email: currentUser.email,\r\n                bio: sanitizedBio,\r\n                artTypes: selectedMain || []\r\n            });\r\n\r\n            await setDoc(doc(db, 'users', currentUser.uid), userUpdate, { merge: true });\r\n\r\n            navigate('/profile/me');\r\n        } catch (error) {\r\n            console.error(\"Save failed:\", error);\r\n            alert(\"Could not save profile: \" + error.message);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div style={{ minHeight: '100vh', backgroundColor: '#000', color: '#fff', paddingBottom: '100px' }}>\r\n            {/* Header */}\r\n            <div style={{\r\n                padding: '1rem 2rem',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '1rem',\r\n                background: 'rgba(0, 0, 0, 0.95)',\r\n                backdropFilter: 'blur(10px)',\r\n                borderBottom: '1px solid rgba(127, 255, 212, 0.2)',\r\n                position: 'sticky',\r\n                top: 0,\r\n                zIndex: 100\r\n            }}>\r\n                <button onClick={() => navigate('/profile/me')} style={{ background: 'transparent', border: 'none', color: '#7FFFD4', cursor: 'pointer', fontSize: '1.2rem' }}>\r\n                    <FaArrowLeft />\r\n                </button>\r\n                <h1 style={{\r\n                    fontSize: '1.2rem',\r\n                    fontWeight: '700',\r\n                    color: '#7FFFD4',\r\n                    fontFamily: 'var(--font-family-heading)',\r\n                    letterSpacing: '0.05em',\r\n                    textTransform: 'uppercase',\r\n                    margin: 0\r\n                }}>Edit Profile</h1>\r\n            </div>\r\n\r\n            <div style={{ padding: '1.5rem', maxWidth: '600px', margin: '0 auto' }}>\r\n                <CosmicGuideModal isOpen={showSymbolGuide} onClose={() => setShowSymbolGuide(false)} />\r\n\r\n                <form onSubmit={handleSubmit} style={{ display: 'flex', flexDirection: 'column', gap: '2rem' }}>\r\n\r\n                    {/* Photo Section */}\r\n                    <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', gap: '1rem' }}>\r\n                        <div style={{\r\n                            width: '100px',\r\n                            height: '100px',\r\n                            borderRadius: '16px',\r\n                            overflow: 'hidden',\r\n                            border: `3px solid ${profileBorderColor}`,\r\n                            background: '#111',\r\n                            boxShadow: `0 0 20px ${profileBorderColor}40`\r\n                        }}>\r\n                            {preview ? (\r\n                                <img src={preview} alt=\"Profile\" style={{ width: '100%', height: '100%', objectFit: 'cover' }} />\r\n                            ) : (\r\n                                <div style={{ width: '100%', height: '100%', display: 'flex', alignItems: 'center', justifyContent: 'center', color: '#666' }}>No Photo</div>\r\n                            )}\r\n                        </div>\r\n                        <label style={{\r\n                            cursor: 'pointer',\r\n                            color: '#000',\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            gap: '0.5rem',\r\n                            fontSize: '0.85rem',\r\n                            padding: '0.6rem 1.2rem',\r\n                            background: '#7FFFD4',\r\n                            borderRadius: '20px',\r\n                            fontWeight: '600',\r\n                            transition: 'all 0.2s',\r\n                            border: 'none'\r\n                        }}>\r\n                            <FaCamera /> Change Photo\r\n                            <input type=\"file\" accept=\"image/*\" onChange={handleFileChange} style={{ display: 'none' }} />\r\n                        </label>\r\n                    </div>\r\n\r\n                    {/* Profile Picture Border Color Customization (Scrollable) */}\r\n                    <div className=\"form-group\" style={{ maxWidth: '100%', overflow: 'hidden' }}>\r\n                        <label style={{ display: 'block', color: '#7FFFD4', marginBottom: '0.5rem', fontSize: '0.85rem', fontWeight: '600', letterSpacing: '0.05em', textTransform: 'uppercase', textAlign: 'center' }}>Profile Border</label>\r\n\r\n                        <div style={{\r\n                            display: 'flex',\r\n                            gap: '1rem',\r\n                            overflowX: 'auto',\r\n                            padding: '0.5rem',\r\n                            scrollBehavior: 'smooth',\r\n                            justifyContent: 'flex-start',\r\n                            maskImage: 'linear-gradient(to right, black 85%, transparent 100%)'\r\n                        }}>\r\n                            {ALL_COLORS.map(option => {\r\n                                const isPremiumLocked = option.isPremium && !isPremiumUser;\r\n\r\n                                return (\r\n                                    <button\r\n                                        key={option.id}\r\n                                        type=\"button\"\r\n                                        onClick={() => !isPremiumLocked && setProfileBorderColor(option.color)}\r\n                                        style={{\r\n                                            flex: '0 0 auto',\r\n                                            padding: '0',\r\n                                            border: profileBorderColor === option.color ? '3px solid #fff' : '2px solid #333',\r\n                                            borderRadius: '50%',\r\n                                            width: '40px',\r\n                                            height: '40px',\r\n                                            overflow: 'hidden',\r\n                                            cursor: isPremiumLocked ? 'not-allowed' : 'pointer',\r\n                                            background: option.color,\r\n                                            position: 'relative',\r\n                                            boxShadow: profileBorderColor === option.color ? `0 0 10px ${option.color.includes('gradient') ? '#fff' : option.color}` : 'none',\r\n                                            opacity: isPremiumLocked ? 0.6 : 1\r\n                                        }}\r\n                                        title={option.name}\r\n                                    >\r\n                                        {/* Lock Overlay */}\r\n                                        {isPremiumLocked && (\r\n                                            <div style={{ position: 'absolute', inset: 0, background: 'rgba(0,0,0,0.6)', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\r\n                                                <FaLock size={12} color=\"#fff\" />\r\n                                            </div>\r\n                                        )}\r\n                                    </button>\r\n                                )\r\n                            })}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Basic Info */}\r\n                    <div className=\"form-group\">\r\n                        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '0.5rem' }}>\r\n                            <label style={{ display: 'block', color: '#7FFFD4', fontSize: '0.85rem', fontWeight: '600', letterSpacing: '0.05em', textTransform: 'uppercase' }}>Username</label>\r\n                            <button\r\n                                type=\"button\"\r\n                                onClick={() => setShowSymbolGuide(true)}\r\n                                style={{\r\n                                    background: 'rgba(127, 255, 212, 0.1)',\r\n                                    border: '1px solid rgba(127, 255, 212, 0.3)',\r\n                                    borderRadius: '12px',\r\n                                    padding: '4px 10px',\r\n                                    color: '#7FFFD4',\r\n                                    fontSize: '0.7rem',\r\n                                    fontWeight: '600',\r\n                                    cursor: 'pointer',\r\n                                    display: 'flex',\r\n                                    alignItems: 'center',\r\n                                    gap: '6px',\r\n                                    textTransform: 'uppercase'\r\n                                }}\r\n                            >\r\n                                <FaInfoCircle size={10} /> Symbol Chart\r\n                            </button>\r\n                        </div>\r\n                        <input\r\n                            type=\"text\"\r\n                            value={username}\r\n                            onChange={(e) => setUsername(e.target.value.toLowerCase())}\r\n                            style={{\r\n                                width: '100%',\r\n                                padding: '0.8rem',\r\n                                background: 'rgba(127, 255, 212, 0.05)',\r\n                                border: '1px solid rgba(127, 255, 212, 0.2)',\r\n                                borderRadius: '8px',\r\n                                color: '#fff',\r\n                                fontSize: '1rem',\r\n                                transition: 'all 0.2s',\r\n                            }}\r\n                            onFocus={(e) => {\r\n                                e.target.style.borderColor = '#7FFFD4';\r\n                                e.target.style.background = 'rgba(127, 255, 212, 0.1)';\r\n                            }}\r\n                            onBlur={(e) => {\r\n                                e.target.style.borderColor = 'rgba(127, 255, 212, 0.2)';\r\n                                e.target.style.background = 'rgba(127, 255, 212, 0.05)';\r\n                            }}\r\n                            placeholder=\"@username\"\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"form-group\">\r\n                        <label style={{ display: 'block', color: '#7FFFD4', marginBottom: '0.5rem', fontSize: '0.85rem', fontWeight: '600', letterSpacing: '0.05em', textTransform: 'uppercase' }}>Bio</label>\r\n                        <textarea\r\n                            value={bio}\r\n                            onChange={(e) => setBio(e.target.value)}\r\n                            style={{\r\n                                width: '100%',\r\n                                padding: '0.8rem',\r\n                                background: 'rgba(127, 255, 212, 0.05)',\r\n                                border: '1px solid rgba(127, 255, 212, 0.2)',\r\n                                borderRadius: '8px',\r\n                                color: '#fff',\r\n                                fontSize: '1rem',\r\n                                minHeight: '80px',\r\n                                resize: 'vertical',\r\n                                transition: 'all 0.2s'\r\n                            }}\r\n                            onFocus={(e) => {\r\n                                e.target.style.borderColor = '#7FFFD4';\r\n                                e.target.style.background = 'rgba(127, 255, 212, 0.1)';\r\n                            }}\r\n                            onBlur={(e) => {\r\n                                e.target.style.borderColor = 'rgba(127, 255, 212, 0.2)';\r\n                                e.target.style.background = 'rgba(127, 255, 212, 0.05)';\r\n                            }}\r\n                            placeholder=\"Tell us about yourself...\"\r\n                        />\r\n                    </div>\r\n\r\n                    {/* Discipline Selection */}\r\n                    <DisciplineSelector\r\n                        selectedMain={selectedMain}\r\n                        selectedNiches={selectedNiches}\r\n                        expandedDiscipline={expandedDiscipline}\r\n                        setExpandedDiscipline={setExpandedDiscipline}\r\n                        toggleMainDiscipline={toggleMainDiscipline}\r\n                        toggleNiche={toggleNiche}\r\n                    />\r\n\r\n                    {/* Profile Theme (Username Color) - Slider Box */}\r\n                    <div className=\"form-group\" style={{ maxWidth: '100%', overflow: 'hidden' }}>\r\n                        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '0.5rem' }}>\r\n                            <label style={{ color: '#fff', fontSize: '1rem', fontWeight: '600' }}>Profile Theme</label>\r\n                        </div>\r\n                        <p style={{ fontSize: '0.8rem', color: '#888', marginBottom: '1rem' }}>\r\n                            Choose a color for your username.\r\n                        </p>\r\n\r\n                        {/* Text Glow Toggle */}\r\n                        <div style={{ marginBottom: '1rem', display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                            <input\r\n                                type=\"checkbox\"\r\n                                id=\"textGlow\"\r\n                                checked={textGlow}\r\n                                onChange={(e) => setTextGlow(e.target.checked)}\r\n                                style={{ width: '16px', height: '16px', accentColor: '#7FFFD4', cursor: 'pointer' }}\r\n                            />\r\n                            <label htmlFor=\"textGlow\" style={{ color: '#fff', fontSize: '0.9rem', cursor: 'pointer' }}>\r\n                                Enable neon glow effect\r\n                            </label>\r\n                        </div>\r\n\r\n                        <div style={{\r\n                            display: 'flex',\r\n                            gap: '1rem',\r\n                            overflowX: 'auto',\r\n                            padding: '0.5rem',\r\n                            scrollBehavior: 'smooth',\r\n                            justifyContent: 'flex-start',\r\n                            maskImage: 'linear-gradient(to right, black 85%, transparent 100%)'\r\n                        }}>\r\n                            {ALL_COLORS.filter(c => c.color !== '#000000').map(option => {\r\n                                const isPremiumLocked = option.isPremium && !isPremiumUser;\r\n                                const backgroundStyle = option.color.includes('gradient')\r\n                                    ? { background: option.color }\r\n                                    : { backgroundColor: option.color };\r\n\r\n                                return (\r\n                                    <button\r\n                                        key={option.id}\r\n                                        type=\"button\"\r\n                                        onClick={() => !isPremiumLocked && setUsernameColor(option.color)}\r\n                                        style={{\r\n                                            flex: '0 0 auto',\r\n                                            width: '80px',\r\n                                            padding: '0',\r\n                                            border: usernameColor === option.color ? '3px solid var(--ice-mint)' : '2px solid #333',\r\n                                            borderRadius: '12px',\r\n                                            overflow: 'hidden',\r\n                                            cursor: isPremiumLocked ? 'not-allowed' : 'pointer',\r\n                                            background: 'transparent',\r\n                                            position: 'relative',\r\n                                            opacity: isPremiumLocked ? 0.6 : 1\r\n                                        }}\r\n                                    >\r\n                                        <div style={{\r\n                                            height: '40px',\r\n                                            background: '#000',\r\n                                            display: 'flex',\r\n                                            alignItems: 'center',\r\n                                            justifyContent: 'center',\r\n                                            position: 'relative',\r\n                                            overflow: 'hidden'\r\n                                        }}>\r\n                                            {isPremiumLocked && (\r\n                                                <div style={{ position: 'absolute', inset: 0, background: 'rgba(0,0,0,0.6)', zIndex: 10, display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\r\n                                                    <FaLock size={16} color=\"#888\" />\r\n                                                </div>\r\n                                            )}\r\n                                            <span style={{\r\n                                                fontSize: '1rem',\r\n                                                fontWeight: '800',\r\n                                                ...backgroundStyle,\r\n                                                WebkitBackgroundClip: option.color.includes('gradient') ? 'text' : 'border-box',\r\n                                                WebkitTextFillColor: option.color.includes('gradient') ? 'transparent' : option.color,\r\n                                                color: option.color.includes('gradient') ? 'transparent' : option.color\r\n                                            }}>Aa</span>\r\n                                        </div>\r\n                                        <div style={{\r\n                                            padding: '0.4rem',\r\n                                            background: '#111',\r\n                                            textAlign: 'center',\r\n                                            fontSize: '0.75rem',\r\n                                            color: usernameColor === option.color ? '#fff' : '#888',\r\n                                            fontWeight: usernameColor === option.color ? '600' : '400'\r\n                                        }}>{option.name}</div>\r\n                                    </button>\r\n                                )\r\n                            })}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Profile Banner Theme - Slider Box */}\r\n                    <div className=\"form-group\" style={{ maxWidth: '100%', overflow: 'hidden' }}>\r\n                        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '0.5rem' }}>\r\n                            <label style={{ color: '#fff', fontSize: '1rem', fontWeight: '600' }}>Profile Banner Theme</label>\r\n                            <FaInfoCircle size={14} color=\"#888\" title=\"Unlock more gradients through achievements\" />\r\n                        </div>\r\n                        <p style={{ fontSize: '0.8rem', color: '#888', marginBottom: '1rem' }}>\r\n                            Customize your profile with different themes and gradients.\r\n                        </p>\r\n\r\n                        {/* Modular Banner Theme Selectors */}\r\n                        <div style={{ marginBottom: '1rem' }}>\r\n                            <BannerTypeSelector\r\n                                selectedType={bannerMode}\r\n                                onSelect={setBannerMode}\r\n                            />\r\n                        </div>\r\n\r\n                        {/* Contextual Color Selector */}\r\n                        {BANNER_TYPES.find(t => t.id === bannerMode)?.needsColor && (\r\n                            <div style={{ paddingBottom: '1rem', borderBottom: '1px solid rgba(255,255,255,0.05)', marginBottom: '1rem' }}>\r\n                                <label style={{ fontSize: '0.75rem', color: '#888', textTransform: 'uppercase', letterSpacing: '0.05em', display: 'block', marginBottom: '4px' }}>\r\n                                    Theme Accent Color\r\n                                </label>\r\n                                <BannerColorSelector\r\n                                    selectedColor={bannerColor}\r\n                                    onSelect={setBannerColor}\r\n                                />\r\n                            </div>\r\n                        )}\r\n\r\n                        {/* Stars Overlay Toggle - Only for Star Modes if needed, or remove? \r\n                            Prompt says \"Do NOT modify unrelated features\". \r\n                            But this toggle was tied to 'gradient' mode in previous code to ADD stars.\r\n                            If I have 'stars' mode, it has stars. \r\n                            If I have 'gradient' mode, user might want stars.\r\n                            Let's keep it but styling might need tweak. \r\n                            Actually, 'stars' IS a mode now.\r\n                        */}\r\n                        {/* Stars Overlay & Color - Expanded to Cities & Oceans */}\r\n                        {(bannerMode === 'gradient' || bannerMode === 'neonGrid' || bannerMode.startsWith('city') || (bannerMode.startsWith('ocean') && bannerMode !== 'underwaterY2K')) && (\r\n                            <div style={{ marginBottom: '1rem' }}>\r\n                                <div style={{ marginBottom: '0.5rem', display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                                    <input\r\n                                        type=\"checkbox\"\r\n                                        id=\"useStarsOverlay\"\r\n                                        checked={useStarsOverlay}\r\n                                        onChange={(e) => setUseStarsOverlay(e.target.checked)}\r\n                                        style={{ width: '16px', height: '16px', accentColor: '#7FFFD4', cursor: 'pointer' }}\r\n                                    />\r\n                                    <label htmlFor=\"useStarsOverlay\" style={{ color: '#fff', fontSize: '0.9rem', cursor: 'pointer' }}>\r\n                                        {bannerMode.startsWith('city') ? 'Show Stars' : 'Overlay Stars'}\r\n                                    </label>\r\n                                </div>\r\n\r\n\r\n                            </div>\r\n                        )}\r\n\r\n                        {/* Legacy Gradient Selector - Shown only when 'gradient' mode is active */}\r\n                        {bannerMode === 'gradient' && (\r\n                            <div style={{\r\n                                display: 'flex',\r\n                                gap: '1rem',\r\n                                overflowX: 'auto',\r\n                                padding: '0.5rem',\r\n                                scrollBehavior: 'smooth',\r\n                                justifyContent: 'flex-start',\r\n                                maskImage: 'linear-gradient(to right, black 85%, transparent 100%)'\r\n                            }}>\r\n                                {Object.values(PROFILE_GRADIENTS).map(gradient => {\r\n                                    const isUnlocked = unlockedGradients.includes(gradient.id) || gradient.unlockCondition === 'free' || gradient.isDefault;\r\n                                    const isSelected = selectedGradient === gradient.id;\r\n\r\n                                    return (\r\n                                        <button\r\n                                            key={gradient.id}\r\n                                            type=\"button\"\r\n                                            onClick={() => isUnlocked && setSelectedGradient(gradient.id)}\r\n                                            disabled={!isUnlocked}\r\n                                            style={{\r\n                                                flex: '0 0 auto',\r\n                                                width: '140px',\r\n                                                padding: '0',\r\n                                                border: isSelected ? '2px solid var(--ice-mint)' : '2px solid #333',\r\n                                                borderRadius: '12px',\r\n                                                overflow: 'hidden',\r\n                                                cursor: isUnlocked ? 'pointer' : 'not-allowed',\r\n                                                opacity: isUnlocked ? 1 : 0.4,\r\n                                                position: 'relative',\r\n                                                background: 'transparent'\r\n                                            }}\r\n                                        >\r\n                                            <div style={{\r\n                                                height: '80px',\r\n                                                background: gradient.background,\r\n                                                display: 'flex',\r\n                                                alignItems: 'center',\r\n                                                justifyContent: 'center',\r\n                                                position: 'relative'\r\n                                            }}>\r\n                                                {!isUnlocked && (\r\n                                                    <div style={{\r\n                                                        position: 'absolute',\r\n                                                        inset: 0,\r\n                                                        background: 'rgba(0,0,0,0.7)',\r\n                                                        display: 'flex',\r\n                                                        alignItems: 'center',\r\n                                                        justifyContent: 'center'\r\n                                                    }}>\r\n                                                        <FaLock color=\"#666\" size={20} />\r\n                                                    </div>\r\n                                                )}\r\n                                                {isSelected && (\r\n                                                    <div style={{\r\n                                                        position: 'absolute',\r\n                                                        top: '8px',\r\n                                                        right: '8px',\r\n                                                        background: 'var(--ice-mint)',\r\n                                                        borderRadius: '50%',\r\n                                                        width: '24px',\r\n                                                        height: '24px',\r\n                                                        display: 'flex',\r\n                                                        alignItems: 'center',\r\n                                                        justifyContent: 'center'\r\n                                                    }}>\r\n                                                        <FaCheck color=\"#000\" size={12} />\r\n                                                    </div>\r\n                                                )}\r\n                                            </div>\r\n                                            <div style={{\r\n                                                padding: '0.5rem',\r\n                                                background: '#111',\r\n                                                textAlign: 'center'\r\n                                            }}>\r\n                                                <div style={{ fontSize: '0.85rem', fontWeight: '600', color: isUnlocked ? '#fff' : '#666' }}>\r\n                                                    {gradient.name}\r\n                                                </div>\r\n                                                <div style={{ fontSize: '0.7rem', color: '#888', marginTop: '2px' }}>\r\n                                                    {gradient.description}\r\n                                                </div>\r\n                                            </div>\r\n                                        </button>\r\n                                    );\r\n                                })}\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Star Color Customization - Slider Box */}\r\n                    <div className=\"form-group\" style={{ maxWidth: '100%', overflow: 'hidden' }}>\r\n                        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '0.5rem' }}>\r\n                            <label style={{ color: '#fff', fontSize: '1rem', fontWeight: '600' }}>Profile Banner Star Color</label>\r\n                        </div>\r\n                        <p style={{ fontSize: '0.8rem', color: '#888', marginBottom: '1rem' }}>\r\n                            Customize the color of the animated stars on your profile banner.\r\n                        </p>\r\n\r\n                        <div style={{\r\n                            display: 'flex',\r\n                            gap: '1rem',\r\n                            overflowX: 'auto',\r\n                            padding: '0.5rem',\r\n                            scrollBehavior: 'smooth',\r\n                            justifyContent: 'flex-start',\r\n                            maskImage: 'linear-gradient(to right, black 85%, transparent 100%)'\r\n                        }}>\r\n                            {ALL_COLORS.map(option => {\r\n                                const isPremiumLocked = option.isPremium && !isPremiumUser;\r\n\r\n                                return (\r\n                                    <button\r\n                                        key={option.id}\r\n                                        type=\"button\"\r\n                                        onClick={() => !isPremiumLocked && setStarColor(option.color)}\r\n                                        style={{\r\n                                            flex: '0 0 auto',\r\n                                            width: '80px',\r\n                                            padding: '0',\r\n                                            border: starColor === option.color ? '3px solid var(--ice-mint)' : '2px solid #333',\r\n                                            borderRadius: '12px',\r\n                                            overflow: 'hidden',\r\n                                            cursor: isPremiumLocked ? 'not-allowed' : 'pointer',\r\n                                            background: 'transparent',\r\n                                            position: 'relative',\r\n                                            opacity: isPremiumLocked ? 0.6 : 1\r\n                                        }}\r\n                                    >\r\n                                        <div style={{\r\n                                            height: '60px',\r\n                                            background: '#000',\r\n                                            display: 'flex',\r\n                                            alignItems: 'center',\r\n                                            justifyContent: 'center',\r\n                                            position: 'relative',\r\n                                            overflow: 'hidden'\r\n                                        }}>\r\n                                            {/* Premium Lock Overlay */}\r\n                                            {isPremiumLocked && (\r\n                                                <div style={{ position: 'absolute', inset: 0, background: 'rgba(0,0,0,0.6)', zIndex: 10, display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\r\n                                                    <FaLock size={16} color=\"#888\" />\r\n                                                </div>\r\n                                            )}\r\n\r\n                                            {/* Preview stars */}\r\n                                            {[...Array(5)].map((_, i) => (\r\n                                                <div\r\n                                                    key={i}\r\n                                                    style={{\r\n                                                        position: 'absolute',\r\n                                                        width: '2px',\r\n                                                        height: '2px',\r\n                                                        background: option.color, // Works for gradient string too on div background\r\n                                                        borderRadius: '50%',\r\n                                                        top: `${20 + i * 15}%`,\r\n                                                        left: `${15 + i * 15}%`,\r\n                                                        boxShadow: option.color.includes('gradient') ? 'none' : `0 0 3px ${option.color}`\r\n                                                    }}\r\n                                                />\r\n                                            ))}\r\n                                        </div>\r\n                                        <div style={{\r\n                                            padding: '0.4rem',\r\n                                            background: '#111',\r\n                                            textAlign: 'center',\r\n                                            fontSize: '0.75rem',\r\n                                            color: starColor === option.color ? '#fff' : '#888',\r\n                                            fontWeight: starColor === option.color ? '600' : '400'\r\n                                        }}>\r\n                                            {option.name}\r\n                                        </div>\r\n                                    </button>\r\n                                )\r\n                            })}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Profile Border Color Customization */}\r\n\r\n\r\n\r\n\r\n                    <button\r\n                        type=\"submit\"\r\n                        disabled={loading}\r\n                        style={{\r\n                            padding: '1rem',\r\n                            background: '#7FFFD4',\r\n                            color: '#000',\r\n                            border: 'none',\r\n                            borderRadius: '30px',\r\n                            fontSize: '1rem',\r\n                            fontWeight: 'bold',\r\n                            cursor: 'pointer',\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            justifyContent: 'center',\r\n                            gap: '0.5rem',\r\n                            marginTop: '1rem',\r\n                            opacity: loading ? 0.7 : 1,\r\n                            position: 'sticky',\r\n                            bottom: '20px',\r\n                            boxShadow: '0 4px 20px rgba(127, 255, 212, 0.3)',\r\n                            transition: 'all 0.2s',\r\n                            fontFamily: 'var(--font-family-heading)',\r\n                            letterSpacing: '0.05em',\r\n                            textTransform: 'uppercase'\r\n                        }}\r\n                    >\r\n                        {loading ? 'Saving...' : <><FaSave /> Save Changes</>}\r\n                    </button>\r\n                </form>\r\n            </div>\r\n\r\n            {showCropper && tempImageSrc && (\r\n                <ImageCropper\r\n                    imageSrc={tempImageSrc}\r\n                    onCrop={handleCropComplete}\r\n                    onCancel={() => {\r\n                        setShowCropper(false);\r\n                        setTempImageSrc(null);\r\n                    }}\r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default EditProfile;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\pages\\EventCreator.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaGlobe' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":52,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":59},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'showWarning' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":12,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":35},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setAutoStart' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":51,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":51,"endColumn":35},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setAutoEnd' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":52,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":52,"endColumn":31},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setAllowSubmissionsBeforeStart' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":53,"column":41,"nodeType":"Identifier","messageId":"unusedVar","endLine":53,"endColumn":71},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setAllowSubmissionsAfterEnd' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":54,"column":38,"nodeType":"Identifier","messageId":"unusedVar","endLine":54,"endColumn":65},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setAestheticTagsRequired' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":69,"column":35,"nodeType":"Identifier","messageId":"unusedVar","endLine":69,"endColumn":59},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'aestheticTagInput' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":70,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":70,"endColumn":29},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setAestheticTagInput' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":70,"column":31,"nodeType":"Identifier","messageId":"unusedVar","endLine":70,"endColumn":51},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setCampusVerificationRequired' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":74,"column":40,"nodeType":"Identifier","messageId":"unusedVar","endLine":74,"endColumn":69}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useMemo } from 'react';\r\nimport { useNavigate, useSearchParams } from 'react-router-dom';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { useToast } from '@/context/ToastContext';\r\nimport { useEventSystem } from '@/hooks/useEventSystem';\r\nimport { FaCalendarAlt, FaClock, FaTrophy, FaLock, FaGlobe, FaInfoCircle, FaDollarSign, FaGem, FaHashtag, FaTimes } from 'react-icons/fa';\r\n\r\nconst EventCreator = () => {\r\n    const { currentUser } = useAuth();\r\n    const navigate = useNavigate();\r\n    const [searchParams] = useSearchParams();\r\n    const { showError, showWarning } = useToast();\r\n    const { createEvent, generateUniqueTagSet, loading } = useEventSystem();\r\n\r\n    // Generate stars once and memoize them\r\n    const stars = useMemo(() => {\r\n        return [...Array(100)].map((_, i) => ({\r\n            id: i,\r\n            width: Math.random() * 2 + 1,\r\n            height: Math.random() * 2 + 1,\r\n            top: Math.random() * 100,\r\n            left: Math.random() * 100,\r\n            opacity: Math.random() * 0.5 + 0.3,\r\n            duration: Math.random() * 3 + 2,\r\n            delay: Math.random() * 2,\r\n            glow: Math.random() * 3 + 2\r\n        }));\r\n    }, []);\r\n\r\n    const [title, setTitle] = useState('');\r\n    const [description, setDescription] = useState('');\r\n    const [eventType, setEventType] = useState('contest'); // Default to contest\r\n    const [isTimedDrop, setIsTimedDrop] = useState(false);\r\n    const [promptText, setPromptText] = useState('');\r\n\r\n    // Tags\r\n    const [requiredTags, setRequiredTags] = useState([]);\r\n    const [tagInput, setTagInput] = useState('');\r\n    const [isGeneratingTag, setIsGeneratingTag] = useState(false);\r\n\r\n    // Monetization\r\n    const [isPayToEnter, setIsPayToEnter] = useState(false);\r\n    const [entryFee, setEntryFee] = useState(5); // Default $5\r\n\r\n    // Dates\r\n    const [startTime, setStartTime] = useState(new Date().toISOString().slice(0, 16));\r\n    const [expiresAt, setExpiresAt] = useState('');\r\n    const [dropTime, setDropTime] = useState('');\r\n\r\n    // Timing controls\r\n    const [autoStart, setAutoStart] = useState(true);\r\n    const [autoEnd, setAutoEnd] = useState(true);\r\n    const [allowSubmissionsBeforeStart, setAllowSubmissionsBeforeStart] = useState(false);\r\n    const [allowSubmissionsAfterEnd, setAllowSubmissionsAfterEnd] = useState(false);\r\n\r\n    // Requirements\r\n    const [requirements, setRequirements] = useState({\r\n        location: '',\r\n        camera: '',\r\n        lens: '',\r\n        filmStock: '',\r\n        filmFormat: '',\r\n        campus: '',\r\n        park: '',\r\n        city: ''\r\n    });\r\n\r\n    // Optional constraints\r\n    const [aestheticTagsRequired, setAestheticTagsRequired] = useState([]);\r\n    const [aestheticTagInput, setAestheticTagInput] = useState('');\r\n    const [shotDateRequired, setShotDateRequired] = useState(false);\r\n    const [filmRequired, setFilmRequired] = useState(false);\r\n    const [digitalOnly, setDigitalOnly] = useState(false);\r\n    const [campusVerificationRequired, setCampusVerificationRequired] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const typeParam = searchParams.get('type');\r\n        if (typeParam) {\r\n            setEventType(typeParam);\r\n        }\r\n    }, [searchParams]);\r\n\r\n    // Auto-generate tag from title on blur\r\n    const handleTitleBlur = async () => {\r\n        if (title && requiredTags.length === 0) {\r\n            setIsGeneratingTag(true);\r\n            try {\r\n                const uniqueTags = await generateUniqueTagSet([title]);\r\n                setRequiredTags(uniqueTags);\r\n            } catch (error) {\r\n                console.error(\"Failed to generate tag\", error);\r\n            } finally {\r\n                setIsGeneratingTag(false);\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleAddTag = async (e) => {\r\n        e.preventDefault();\r\n        if (!tagInput.trim()) return;\r\n\r\n        setIsGeneratingTag(true);\r\n        try {\r\n            // Check if the new tag set (existing + new) is unique\r\n            const newTagSet = [...requiredTags, tagInput];\r\n            const uniqueTags = await generateUniqueTagSet(newTagSet);\r\n            setRequiredTags(uniqueTags);\r\n            setTagInput('');\r\n        } catch (error) {\r\n            showError(\"Error checking tag availability\");\r\n        } finally {\r\n            setIsGeneratingTag(false);\r\n        }\r\n    };\r\n\r\n    const removeTag = (tagToRemove) => {\r\n        setRequiredTags(requiredTags.filter(tag => tag !== tagToRemove));\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        if (!title || !startTime) { showError(\"Title and Start Time are required.\"); return; }\r\n        if (!expiresAt) { showError(\"End Time is required.\"); return; }\r\n        if (isTimedDrop && !dropTime) { showError(\"Drop Time is required for Timed Drops.\"); return; }\r\n        if (isPayToEnter && entryFee < 1) { showError(\"Entry fee must be at least $1.\"); return; }\r\n        if (requiredTags.length === 0) { showError(\"At least one unique event tag is required.\"); return; }\r\n\r\n        try {\r\n            const eventData = {\r\n                title,\r\n                description,\r\n                eventType,\r\n                isContest: eventType === 'contest' || eventType === 'photo-month',\r\n                isPhotoOfMonth: eventType === 'photo-month',\r\n                isTimedDrop,\r\n                promptText: eventType === 'prompt' ? promptText : null,\r\n\r\n                // Monetization\r\n                isPayToEnter,\r\n                entryFee: isPayToEnter ? parseFloat(entryFee) : 0,\r\n                prizeDistribution: isPayToEnter ? {\r\n                    winner: 80,\r\n                    platform: 20\r\n                } : null,\r\n\r\n                startTime,\r\n                expiresAt,\r\n                dropTime: isTimedDrop ? dropTime : null,\r\n                autoStart,\r\n                autoEnd,\r\n                allowSubmissionsBeforeStart,\r\n                allowSubmissionsAfterEnd,\r\n                requirements: Object.fromEntries(\r\n                    Object.entries(requirements).filter(([_, v]) => v && v.trim())\r\n                ),\r\n                requiredTags, // New field\r\n                aestheticTagsRequired: aestheticTagsRequired.length > 0 ? aestheticTagsRequired : null,\r\n                shotDateRequired: shotDateRequired || null,\r\n                filmRequired: filmRequired || null,\r\n                digitalOnly: digitalOnly || null,\r\n                campusVerificationRequired: campusVerificationRequired || null\r\n            };\r\n\r\n            const result = await createEvent(eventData, currentUser);\r\n            navigate(`/events/${result.id}`);\r\n        } catch (err) {\r\n            showError(\"Failed to create event: \" + err.message);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"ps-page-overflow\">\r\n            {/* Animated Stars Background */}\r\n            <div style={{\r\n                position: 'fixed',\r\n                top: 0,\r\n                left: 0,\r\n                right: 0,\r\n                bottom: 0,\r\n                pointerEvents: 'none',\r\n                zIndex: 0\r\n            }}>\r\n                {stars.map((star) => (\r\n                    <div\r\n                        key={star.id}\r\n                        style={{\r\n                            position: 'absolute',\r\n                            width: star.width + 'px',\r\n                            height: star.height + 'px',\r\n                            background: '#7FFFD4',\r\n                            borderRadius: '50%',\r\n                            top: star.top + '%',\r\n                            left: star.left + '%',\r\n                            opacity: star.opacity,\r\n                            animation: `twinkle ${star.duration}s ease-in-out infinite`,\r\n                            animationDelay: `${star.delay}s`,\r\n                            boxShadow: `0 0 ${star.glow}px #7FFFD4`\r\n                        }}\r\n                    />\r\n                ))}\r\n            </div>\r\n\r\n            {/* Header */}\r\n            <div className=\"ps-sticky-header-padded\" style={{\r\n                display: 'flex',\r\n                justifyContent: 'space-between',\r\n                alignItems: 'center'\r\n            }}>\r\n                <h1 style={{ fontSize: '1.2rem', fontWeight: 'bold' }}>Create Event</h1>\r\n                <button\r\n                    onClick={() => navigate(-1)}\r\n                    style={{ background: 'transparent', border: 'none', color: '#888', cursor: 'pointer' }}\r\n                >\r\n                    Cancel\r\n                </button>\r\n            </div>\r\n\r\n            <div style={{ maxWidth: '800px', margin: '0 auto', padding: '2rem', position: 'relative', zIndex: 1 }}>\r\n                <form onSubmit={handleSubmit} style={{ display: 'flex', flexDirection: 'column', gap: '2rem' }}>\r\n\r\n                    {/* Event Type Selector */}\r\n                    <section>\r\n                        <h2 style={{ fontSize: '1.1rem', color: '#7FFFD4', marginBottom: '1rem', display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                            <FaTrophy /> Event Type\r\n                        </h2>\r\n                        <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(150px, 1fr))', gap: '1rem' }}>\r\n                            <div\r\n                                onClick={() => setEventType('contest')}\r\n                                style={{\r\n                                    padding: '1rem',\r\n                                    background: eventType === 'contest' ? 'rgba(127, 255, 212, 0.1)' : '#111',\r\n                                    border: eventType === 'contest' ? '1px solid #7FFFD4' : '1px solid #333',\r\n                                    borderRadius: '8px',\r\n                                    cursor: 'pointer',\r\n                                    transition: 'all 0.2s'\r\n                                }}\r\n                            >\r\n                                <div style={{ fontWeight: 'bold', marginBottom: '0.5rem', color: eventType === 'prompt' ? '#7FFFD4' : '#fff' }}>Photo Prompt</div>\r\n                                <div style={{ fontSize: '0.8rem', color: '#888' }}>Creative challenge with optional rules.</div>\r\n                            </div>\r\n\r\n                            <div\r\n                                onClick={() => setEventType('timed-drop')}\r\n                                style={{\r\n                                    padding: '1rem',\r\n                                    background: eventType === 'timed-drop' ? 'rgba(127, 255, 212, 0.1)' : '#111',\r\n                                    border: eventType === 'timed-drop' ? '1px solid #7FFFD4' : '1px solid #333',\r\n                                    borderRadius: '8px',\r\n                                    cursor: 'pointer',\r\n                                    transition: 'all 0.2s'\r\n                                }}\r\n                            >\r\n                                <div style={{ fontWeight: 'bold', marginBottom: '0.5rem', color: eventType === 'timed-drop' ? '#7FFFD4' : '#fff' }}>Timed Drop</div>\r\n                                <div style={{ fontSize: '0.8rem', color: '#888' }}>All submissions reveal at once.</div>\r\n                            </div>\r\n                        </div>\r\n                    </section>\r\n\r\n                    {/* Basic Info */}\r\n                    <section>\r\n                        <h2 style={{ fontSize: '1.1rem', color: '#7FFFD4', marginBottom: '1rem', display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                            <FaInfoCircle /> Event Details\r\n                        </h2>\r\n                        <div style={{ display: 'flex', flexDirection: 'column', gap: '1rem' }}>\r\n                            <div>\r\n                                <label style={{ display: 'block', color: '#ccc', marginBottom: '0.5rem' }}>Event Title</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={title}\r\n                                    onChange={e => setTitle(e.target.value)}\r\n                                    onBlur={handleTitleBlur}\r\n                                    placeholder=\"e.g., Neon Nights Challenge\"\r\n                                    style={{ width: '100%', padding: '0.8rem', background: '#111', border: '1px solid #333', borderRadius: '8px', color: '#fff' }}\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                                <label style={{ display: 'block', color: '#ccc', marginBottom: '0.5rem' }}>Description</label>\r\n                                <textarea\r\n                                    value={description}\r\n                                    onChange={e => setDescription(e.target.value)}\r\n                                    placeholder=\"Describe the theme, rules, or prompt...\"\r\n                                    rows={4}\r\n                                    style={{ width: '100%', padding: '0.8rem', background: '#111', border: '1px solid #333', borderRadius: '8px', color: '#fff' }}\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                    </section>\r\n\r\n                    {/* Required Tags */}\r\n                    <section>\r\n                        <h2 style={{ fontSize: '1.1rem', color: '#7FFFD4', marginBottom: '1rem', display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                            <FaHashtag /> Required Tags\r\n                        </h2>\r\n                        <div style={{ marginBottom: '1rem', color: '#888', fontSize: '0.9rem' }}>\r\n                            Posts must have ALL these tags to enter. Events can share individual tags, but the complete tag combination must be unique.\r\n                        </div>\r\n\r\n                        <div style={{\r\n                            display: 'grid',\r\n                            gridTemplateRows: 'repeat(2, min-content)',\r\n                            gridAutoFlow: 'column',\r\n                            gridAutoColumns: 'max-content',\r\n                            gap: '0.5rem',\r\n                            rowGap: '0.8rem',\r\n                            width: '100%',\r\n                            overflowX: 'auto',\r\n                            overflowY: 'hidden',\r\n                            paddingBottom: '0.5rem',\r\n                            marginBottom: '1rem',\r\n                            scrollbarWidth: 'thin',\r\n                            scrollbarColor: 'rgba(127, 255, 212, 0.3) rgba(255, 255, 255, 0.02)'\r\n                        }}>\r\n                            {requiredTags.map(tag => (\r\n                                <div key={tag} style={{\r\n                                    background: 'rgba(127, 255, 212, 0.1)',\r\n                                    border: '1px solid #7FFFD4',\r\n                                    color: '#7FFFD4',\r\n                                    padding: '0.4rem 0.8rem',\r\n                                    borderRadius: '20px',\r\n                                    display: 'flex',\r\n                                    alignItems: 'center',\r\n                                    gap: '0.5rem',\r\n                                    whiteSpace: 'nowrap'\r\n                                }}>\r\n                                    #{tag}\r\n                                    <FaTimes\r\n                                        style={{ cursor: 'pointer' }}\r\n                                        onClick={() => removeTag(tag)}\r\n                                    />\r\n                                </div>\r\n                            ))}\r\n                            {isGeneratingTag && <div style={{ color: '#888', padding: '0.4rem', whiteSpace: 'nowrap' }}>Checking availability...</div>}\r\n                        </div>\r\n\r\n                        <div style={{ display: 'flex', gap: '0.5rem' }}>\r\n                            <input\r\n                                type=\"text\"\r\n                                value={tagInput}\r\n                                onChange={e => setTagInput(e.target.value)}\r\n                                placeholder=\"Add custom tag...\"\r\n                                style={{ flex: 1, padding: '0.8rem', background: '#111', border: '1px solid #333', borderRadius: '8px', color: '#fff' }}\r\n                            />\r\n                            <button\r\n                                onClick={handleAddTag}\r\n                                disabled={!tagInput.trim() || isGeneratingTag}\r\n                                style={{\r\n                                    padding: '0 1.5rem',\r\n                                    background: '#333',\r\n                                    color: '#fff',\r\n                                    border: 'none',\r\n                                    borderRadius: '8px',\r\n                                    cursor: 'pointer'\r\n                                }}\r\n                            >\r\n                                Add\r\n                            </button>\r\n                        </div>\r\n                    </section>\r\n\r\n                    {/* Monetization (Contests Only) */}\r\n                    {(eventType === 'contest' || eventType === 'photo-month') && (\r\n                        <section style={{\r\n                            background: 'linear-gradient(135deg, #1a1a1a 0%, #222 100%)',\r\n                            padding: '1.5rem',\r\n                            borderRadius: '12px',\r\n                            border: '1px solid #FFD700'\r\n                        }}>\r\n                            <h2 style={{ fontSize: '1.1rem', color: '#FFD700', marginBottom: '1rem', display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                                <FaGem /> Monetization\r\n                            </h2>\r\n\r\n                            <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', marginBottom: '1.5rem' }}>\r\n                                <div>\r\n                                    <div style={{ fontWeight: 'bold', color: '#fff', marginBottom: '0.2rem' }}>Pay-to-Enter Contest</div>\r\n                                    <div style={{ fontSize: '0.8rem', color: '#888' }}>Participants pay an entry fee to join.</div>\r\n                                </div>\r\n                                <div\r\n                                    onClick={() => setIsPayToEnter(!isPayToEnter)}\r\n                                    style={{\r\n                                        width: '50px', height: '26px',\r\n                                        background: isPayToEnter ? '#FFD700' : '#333',\r\n                                        borderRadius: '13px', position: 'relative', cursor: 'pointer',\r\n                                        transition: 'background 0.2s'\r\n                                    }}\r\n                                >\r\n                                    <div style={{\r\n                                        width: '22px', height: '22px', background: '#fff', borderRadius: '50%',\r\n                                        position: 'absolute', top: '2px',\r\n                                        left: isPayToEnter ? '26px' : '2px', transition: 'left 0.2s'\r\n                                    }} />\r\n                                </div>\r\n                            </div>\r\n\r\n                            {isPayToEnter && (\r\n                                <div style={{ animation: 'fadeIn 0.3s ease-out' }}>\r\n                                    <div style={{ marginBottom: '1rem' }}>\r\n                                        <label style={{ display: 'block', color: '#ccc', marginBottom: '0.5rem' }}>Entry Fee ($)</label>\r\n                                        <div style={{ position: 'relative' }}>\r\n                                            <FaDollarSign style={{ position: 'absolute', left: '10px', top: '50%', transform: 'translateY(-50%)', color: '#888' }} />\r\n                                            <input\r\n                                                type=\"number\"\r\n                                                min=\"1\"\r\n                                                value={entryFee}\r\n                                                onChange={e => setEntryFee(e.target.value)}\r\n                                                style={{ width: '100%', padding: '0.8rem 0.8rem 0.8rem 2.5rem', background: '#000', border: '1px solid #444', borderRadius: '8px', color: '#fff' }}\r\n                                            />\r\n                                        </div>\r\n                                    </div>\r\n                                    <div style={{\r\n                                        padding: '1rem',\r\n                                        background: 'rgba(255, 215, 0, 0.1)',\r\n                                        borderRadius: '8px',\r\n                                        border: '1px solid rgba(255, 215, 0, 0.3)',\r\n                                        fontSize: '0.9rem',\r\n                                        color: '#FFD700'\r\n                                    }}>\r\n                                        <strong>Prize Pool Split:</strong> 80% to Winner / 20% to Platform\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n                        </section>\r\n                    )}\r\n\r\n                    {/* Prompt Text (for prompt events) */}\r\n                    {eventType === 'prompt' && (\r\n                        <section>\r\n                            <h2 style={{ fontSize: '1.1rem', color: '#7FFFD4', marginBottom: '1rem' }}>Prompt Text</h2>\r\n                            <textarea\r\n                                value={promptText}\r\n                                onChange={e => setPromptText(e.target.value)}\r\n                                placeholder=\"e.g., Shoot something red, Self-portrait, Reflections...\"\r\n                                rows={3}\r\n                                style={{ width: '100%', padding: '0.8rem', background: '#111', border: '1px solid #333', borderRadius: '8px', color: '#fff' }}\r\n                            />\r\n                        </section>\r\n                    )}\r\n\r\n                    {/* Timed Drop Toggle */}\r\n                    <section>\r\n                        <h2 style={{ fontSize: '1.1rem', color: '#7FFFD4', marginBottom: '1rem', display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                            <FaClock /> Timed Drop\r\n                        </h2>\r\n                        <div\r\n                            onClick={() => setIsTimedDrop(!isTimedDrop)}\r\n                            style={{\r\n                                padding: '1rem',\r\n                                background: isTimedDrop ? 'rgba(127, 255, 212, 0.1)' : '#111',\r\n                                border: isTimedDrop ? '1px solid #7FFFD4' : '1px solid #333',\r\n                                borderRadius: '8px',\r\n                                cursor: 'pointer',\r\n                                display: 'flex',\r\n                                justifyContent: 'space-between',\r\n                                alignItems: 'center'\r\n                            }}\r\n                        >\r\n                            <div>\r\n                                <div style={{ fontWeight: 'bold', marginBottom: '0.2rem' }}>Enable Timed Drop</div>\r\n                                <div style={{ fontSize: '0.8rem', color: '#888' }}>\r\n                                    Submissions are hidden until the drop time.\r\n                                </div>\r\n                            </div>\r\n                            <div style={{\r\n                                width: '40px', height: '20px',\r\n                                background: isTimedDrop ? '#7FFFD4' : '#333',\r\n                                borderRadius: '10px', position: 'relative'\r\n                            }}>\r\n                                <div style={{\r\n                                    width: '16px', height: '16px', background: '#fff', borderRadius: '50%',\r\n                                    position: 'absolute', top: '2px',\r\n                                    left: isTimedDrop ? '22px' : '2px', transition: 'left 0.2s'\r\n                                }} />\r\n                            </div>\r\n                        </div>\r\n                    </section>\r\n\r\n                    {/* Requirements (Optional) */}\r\n                    <section>\r\n                        <h2 style={{ fontSize: '1.1rem', color: '#7FFFD4', marginBottom: '1rem', display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                            <FaLock /> Submission Requirements (Optional)\r\n                        </h2>\r\n                        <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '1rem' }}>\r\n                            <div>\r\n                                <label style={{ display: 'block', color: '#ccc', marginBottom: '0.5rem', fontSize: '0.9rem' }}>Park</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={requirements.park}\r\n                                    onChange={e => setRequirements({ ...requirements, park: e.target.value })}\r\n                                    placeholder=\"e.g., Yosemite\"\r\n                                    style={{ width: '100%', padding: '0.6rem', background: '#111', border: '1px solid #333', borderRadius: '6px', color: '#fff', fontSize: '0.9rem' }}\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                                <label style={{ display: 'block', color: '#ccc', marginBottom: '0.5rem', fontSize: '0.9rem' }}>City</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={requirements.city}\r\n                                    onChange={e => setRequirements({ ...requirements, city: e.target.value })}\r\n                                    placeholder=\"e.g., Chicago\"\r\n                                    style={{ width: '100%', padding: '0.6rem', background: '#111', border: '1px solid #333', borderRadius: '6px', color: '#fff', fontSize: '0.9rem' }}\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                                <label style={{ display: 'block', color: '#ccc', marginBottom: '0.5rem', fontSize: '0.9rem' }}>Film Stock</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={requirements.filmStock}\r\n                                    onChange={e => setRequirements({ ...requirements, filmStock: e.target.value })}\r\n                                    placeholder=\"e.g., Portra 400\"\r\n                                    style={{ width: '100%', padding: '0.6rem', background: '#111', border: '1px solid #333', borderRadius: '6px', color: '#fff', fontSize: '0.9rem' }}\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                                <label style={{ display: 'block', color: '#ccc', marginBottom: '0.5rem', fontSize: '0.9rem' }}>Film Format</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={requirements.filmFormat}\r\n                                    onChange={e => setRequirements({ ...requirements, filmFormat: e.target.value })}\r\n                                    placeholder=\"e.g., 35mm\"\r\n                                    style={{ width: '100%', padding: '0.6rem', background: '#111', border: '1px solid #333', borderRadius: '6px', color: '#fff', fontSize: '0.9rem' }}\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                                <label style={{ display: 'block', color: '#ccc', marginBottom: '0.5rem', fontSize: '0.9rem' }}>Camera</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={requirements.camera}\r\n                                    onChange={e => setRequirements({ ...requirements, camera: e.target.value })}\r\n                                    placeholder=\"e.g., Canon AE-1\"\r\n                                    style={{ width: '100%', padding: '0.6rem', background: '#111', border: '1px solid #333', borderRadius: '6px', color: '#fff', fontSize: '0.9rem' }}\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                                <label style={{ display: 'block', color: '#ccc', marginBottom: '0.5rem', fontSize: '0.9rem' }}>Lens</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={requirements.lens}\r\n                                    onChange={e => setRequirements({ ...requirements, lens: e.target.value })}\r\n                                    placeholder=\"e.g., 50mm f/1.8\"\r\n                                    style={{ width: '100%', padding: '0.6rem', background: '#111', border: '1px solid #333', borderRadius: '6px', color: '#fff', fontSize: '0.9rem' }}\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                    </section>\r\n\r\n                    {/* Constraints (Optional) */}\r\n                    <section>\r\n                        <h2 style={{ fontSize: '1.1rem', color: '#7FFFD4', marginBottom: '1rem' }}>Additional Constraints</h2>\r\n                        <div style={{ display: 'flex', flexDirection: 'column', gap: '0.75rem' }}>\r\n                            <label style={{ display: 'flex', alignItems: 'center', gap: '0.75rem', cursor: 'pointer', padding: '0.75rem', background: '#111', borderRadius: '6px' }}>\r\n                                <input\r\n                                    type=\"checkbox\"\r\n                                    checked={filmRequired}\r\n                                    onChange={e => setFilmRequired(e.target.checked)}\r\n                                    style={{ width: '18px', height: '18px' }}\r\n                                />\r\n                                <span style={{ color: '#fff' }}>Film Photography Required</span>\r\n                            </label>\r\n                            <label style={{ display: 'flex', alignItems: 'center', gap: '0.75rem', cursor: 'pointer', padding: '0.75rem', background: '#111', borderRadius: '6px' }}>\r\n                                <input\r\n                                    type=\"checkbox\"\r\n                                    checked={digitalOnly}\r\n                                    onChange={e => setDigitalOnly(e.target.checked)}\r\n                                    style={{ width: '18px', height: '18px' }}\r\n                                />\r\n                                <span style={{ color: '#fff' }}>Digital Only</span>\r\n                            </label>\r\n                            <label style={{ display: 'flex', alignItems: 'center', gap: '0.75rem', cursor: 'pointer', padding: '0.75rem', background: '#111', borderRadius: '6px' }}>\r\n                                <input\r\n                                    type=\"checkbox\"\r\n                                    checked={shotDateRequired}\r\n                                    onChange={e => setShotDateRequired(e.target.checked)}\r\n                                    style={{ width: '18px', height: '18px' }}\r\n                                />\r\n                                <span style={{ color: '#fff' }}>Shot Date Required</span>\r\n                            </label>\r\n                        </div>\r\n                    </section>\r\n\r\n                    {/* Schedule */}\r\n                    <section>\r\n                        <h2 style={{ fontSize: '1.1rem', color: '#7FFFD4', marginBottom: '1rem', display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                            <FaCalendarAlt /> Schedule\r\n                        </h2>\r\n                        <div style={{ display: 'flex', flexDirection: 'column', gap: '1rem' }}>\r\n                            <div>\r\n                                <label style={{ display: 'block', color: '#ccc', marginBottom: '0.5rem' }}>Start Time</label>\r\n                                <input\r\n                                    type=\"datetime-local\"\r\n                                    value={startTime}\r\n                                    onChange={e => setStartTime(e.target.value)}\r\n                                    style={{ width: '100%', padding: '0.8rem', background: '#111', border: '1px solid #333', borderRadius: '8px', color: '#fff' }}\r\n                                />\r\n                            </div>\r\n                            {isTimedDrop && (\r\n                                <div>\r\n                                    <label style={{ display: 'block', color: '#ccc', marginBottom: '0.5rem' }}>Drop Reveal Time</label>\r\n                                    <input\r\n                                        type=\"datetime-local\"\r\n                                        value={dropTime}\r\n                                        onChange={e => setDropTime(e.target.value)}\r\n                                        style={{ width: '100%', padding: '0.8rem', background: '#111', border: '1px solid #333', borderRadius: '8px', color: '#fff' }}\r\n                                    />\r\n                                </div>\r\n                            )}\r\n                            <div>\r\n                                <label style={{ display: 'block', color: '#ccc', marginBottom: '0.5rem' }}>End Time (Expiration)</label>\r\n                                <input\r\n                                    type=\"datetime-local\"\r\n                                    value={expiresAt}\r\n                                    onChange={e => setExpiresAt(e.target.value)}\r\n                                    style={{ width: '100%', padding: '0.8rem', background: '#111', border: '1px solid #333', borderRadius: '8px', color: '#fff' }}\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                    </section>\r\n\r\n                    <button\r\n                        type=\"submit\"\r\n                        disabled={loading}\r\n                        style={{\r\n                            width: '100%',\r\n                            padding: '1rem',\r\n                            background: '#7FFFD4',\r\n                            color: '#000',\r\n                            border: 'none',\r\n                            borderRadius: '8px',\r\n                            fontWeight: 'bold',\r\n                            fontSize: '1rem',\r\n                            cursor: loading ? 'not-allowed' : 'pointer',\r\n                            opacity: loading ? 0.7 : 1\r\n                        }}\r\n                    >\r\n                        {loading ? 'Creating Event...' : 'Create Event'}\r\n                    </button>\r\n                </form>\r\n            </div>\r\n\r\n            {/* Twinkle Animation CSS */}\r\n            <style>{`\r\n                @keyframes twinkle {\r\n                    0%, 100% { opacity: 0.3; transform: scale(1); }\r\n                    50% { opacity: 1; transform: scale(1.2); }\r\n                }\r\n            `}</style>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default EventCreator;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\pages\\EventFeedPage.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useAuth' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaStar' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":50,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":56}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { EventService } from '@/services/EventService';\r\nimport InfiniteGrid from '@/components/InfiniteGrid';\r\nimport StarBackground from '@/components/StarBackground';\r\nimport { FaArrowLeft, FaFire, FaClock, FaTrophy, FaStar } from 'react-icons/fa';\r\nimport { useThemeStore } from '@/core/store/useThemeStore';\r\nimport { logger } from '@/core/utils/logger';\r\n\r\nconst EventFeedPage = () => {\r\n    const { eventId } = useParams();\r\n    const navigate = useNavigate();\r\n    const { accentColor } = useThemeStore();\r\n    const [event, setEvent] = useState(null);\r\n    const [activeTab, setActiveTab] = useState('rising'); // 'top', 'rising', 'new'\r\n    const [posts, setPosts] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        const loadEvent = async () => {\r\n            let data = null;\r\n\r\n            if (eventId === 'daily' || eventId === 'weekly' || eventId === 'all' || eventId === 'contest') {\r\n                // Special handlers for current/latest events\r\n                const events = await EventService.getVisibleEvents();\r\n                // Sort by visibleDate DESC to get latest\r\n                events.sort((a, b) => b.visibleDate.toMillis() - a.visibleDate.toMillis());\r\n\r\n                if (eventId === 'daily') {\r\n                    // Find latest active daily feature\r\n                    data = events.find(e => e.type === 'daily_feature' && e.active);\r\n                } else if (eventId === 'weekly') {\r\n                    data = events.find(e => e.category === 'weekly' && e.active);\r\n                } else if (eventId === 'contest') {\r\n                    data = events.find(e => e.category === 'contest' && e.active);\r\n                } else if (eventId === 'all') {\r\n                    // \"All Events\" is a virtual event\r\n                    data = {\r\n                        id: 'all',\r\n                        name: 'All Events',\r\n                        description: 'Combined feed of all currently active events.',\r\n                        active: true\r\n                    };\r\n                }\r\n            } else {\r\n                data = await EventService.getEventById(eventId);\r\n            }\r\n\r\n            if (data) {\r\n                setEvent(data);\r\n            } else {\r\n                // Event not found\r\n                logger.warn(\"Event not found:\", eventId);\r\n                // navigate('/search'); // Optional: redirect\r\n            }\r\n        };\r\n        loadEvent();\r\n    }, [eventId, navigate]);\r\n\r\n    useEffect(() => {\r\n        const loadPosts = async () => {\r\n            if (!event) return;\r\n            setLoading(true);\r\n            setPosts([]); // Clear previous\r\n\r\n            let fetchedPostIds = [];\r\n            if (eventId === 'all') {\r\n                // Fetch all active events, aggregate their feedPosts\r\n                // This logic ideally belongs in EventService.getAllEventsFeed()\r\n                // For now, let's keep it simple or assume getEventFeedPosts handles 'all' if passed\r\n                // Actually, let's add getAllEventsFeed to EventService later if needed, \r\n                // but here we can just query posts that have relevant tags? \r\n                // No, \"feedPosts\" subcollections are the source of truth.\r\n                // We will skip strict implementation of 'All' aggregation in this step to keep it safe \r\n                // and assume the user will implement the backend function or we return empty.\r\n                // Better: \"Coming Soon\" or query standard feed with filters.\r\n\r\n                fetchedPostIds = []; // Placeholder\r\n            } else {\r\n                fetchedPostIds = await EventService.getEventFeedPosts(event.id, activeTab);\r\n            }\r\n\r\n            // NOTE: EventService currently returns IDs. InfiniteGrid usually expects full post objects or handles IDs?\r\n            // Existing InfiniteGrid usage in Search.jsx suggests it takes \"items\" which are posts.\r\n            // We need to fetch the full post data. \r\n            // Since we can't easily do `select * from posts where id in (...)` for massive lists in one go,\r\n            // we should ideally update EventService to populate data, or do it here.\r\n            // For MVP/Demo: we will assume EventService or a helper here fetches the data.\r\n            // Let's implement a quick fetch logic here for the IDs.\r\n\r\n            if (fetchedPostIds.length > 0) {\r\n                // In a real app, use a service like `PostService.getPostsByIds(fetchedPostIds)`.\r\n                // Here, we might need to manually fetch if we don't have that service exposed.\r\n                // Actually, let's assume `EventService.getEventFeedPosts` returns objects or we patch it.\r\n                // But wait, my previous implementation of EventService returned IDs.\r\n\r\n                // Let's import getDoc/doc to fetch them.\r\n                // Optimization: Only fetch first 20, then load more. InfiniteGrid handles pagination?\r\n                // InfiniteGrid typically takes `items` prop. \r\n\r\n                const { doc, getDoc } = await import('firebase/firestore');\r\n                const { db } = await import('@/firebase');\r\n\r\n                const loadedPosts = await Promise.all(fetchedPostIds.slice(0, 50).map(async (pid) => {\r\n                    // This is N reads, not ideal for unrelated detailed read, but fine for prototype.\r\n                    const d = await getDoc(doc(db, 'posts', pid));\r\n                    return d.exists() ? { id: d.id, ...d.data() } : null;\r\n                }));\r\n\r\n                setPosts(loadedPosts.filter(p => p !== null));\r\n            } else {\r\n                setPosts([]);\r\n            }\r\n\r\n            setLoading(false);\r\n        };\r\n        loadPosts();\r\n    }, [event, activeTab, eventId]);\r\n\r\n    const tabs = [\r\n        { id: 'rising', label: 'Rising', icon: FaFire },\r\n        { id: 'top', label: 'Top', icon: FaTrophy },\r\n        { id: 'new', label: 'New', icon: FaClock },\r\n        // { id: 'staff', label: 'Staff Picks', icon: FaStar }\r\n    ];\r\n\r\n    if (!event) return <div style={{ background: '#000', minHeight: '100vh' }} />;\r\n\r\n    return (\r\n        <div style={{ background: '#000', minHeight: '100vh', color: '#fff', paddingBottom: '80px' }}>\r\n            <StarBackground />\r\n\r\n            {/* Header */}\r\n            <div style={{\r\n                position: 'sticky',\r\n                top: 0,\r\n                zIndex: 100,\r\n                background: 'rgba(0,0,0,0.8)',\r\n                backdropFilter: 'blur(20px)',\r\n                borderBottom: '1px solid rgba(255,255,255,0.1)',\r\n                padding: '1rem'\r\n            }}>\r\n                <button\r\n                    onClick={() => navigate(-1)}\r\n                    style={{\r\n                        background: 'transparent',\r\n                        border: 'none',\r\n                        color: '#fff',\r\n                        cursor: 'pointer',\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        gap: '0.5rem',\r\n                        fontSize: '0.9rem',\r\n                        marginBottom: '0.5rem'\r\n                    }}\r\n                >\r\n                    <FaArrowLeft /> Back\r\n                </button>\r\n\r\n                <h1 style={{ margin: 0, fontSize: '1.5rem', color: accentColor }}>{event.name}</h1>\r\n                <p style={{ margin: '0.5rem 0 0 0', opacity: 0.7, fontSize: '0.9rem' }}>{event.description}</p>\r\n\r\n                {/* Event Category Tabs - Only show if we are viewing one of the 'virtual' event categories */}\r\n                {['daily', 'weekly', 'all', 'contest'].includes(eventId) && (\r\n                    <div style={{\r\n                        display: 'flex',\r\n                        gap: '0.5rem',\r\n                        marginTop: '1rem',\r\n                        overflowX: 'auto',\r\n                        paddingBottom: '0.5rem',\r\n                        borderBottom: '1px solid rgba(255,255,255,0.05)'\r\n                    }}>\r\n                        {[\r\n                            { id: 'all', label: 'All' },\r\n                            { id: 'daily', label: 'Daily' },\r\n                            { id: 'weekly', label: 'Weekly' },\r\n                            { id: 'contest', label: 'Contest' }\r\n                        ].map(cat => (\r\n                            <button\r\n                                key={cat.id}\r\n                                onClick={() => navigate(`/events/${cat.id}`)}\r\n                                style={{\r\n                                    padding: '0.4rem 0.8rem',\r\n                                    borderRadius: '16px',\r\n                                    border: 'none',\r\n                                    background: eventId === cat.id ? accentColor : 'rgba(255,255,255,0.05)',\r\n                                    color: eventId === cat.id ? '#000' : '#fff',\r\n                                    fontSize: '0.8rem',\r\n                                    cursor: 'pointer',\r\n                                    fontWeight: eventId === cat.id ? 'bold' : 'normal',\r\n                                    whiteSpace: 'nowrap',\r\n                                    transition: 'all 0.2s'\r\n                                }}\r\n                            >\r\n                                {cat.label}\r\n                            </button>\r\n                        ))}\r\n                    </div>\r\n                )}\r\n\r\n                {/* Tabs */}\r\n                <div style={{ display: 'flex', gap: '1rem', marginTop: '1.5rem' }}>\r\n                    {tabs.map(tab => {\r\n                        const Icon = tab.icon;\r\n                        const isActive = activeTab === tab.id;\r\n                        return (\r\n                            <button\r\n                                key={tab.id}\r\n                                onClick={() => setActiveTab(tab.id)}\r\n                                style={{\r\n                                    background: 'transparent',\r\n                                    border: 'none',\r\n                                    borderBottom: isActive ? `2px solid ${accentColor}` : '2px solid transparent',\r\n                                    color: isActive ? accentColor : '#888',\r\n                                    padding: '0.5rem 0',\r\n                                    cursor: 'pointer',\r\n                                    display: 'flex',\r\n                                    alignItems: 'center',\r\n                                    gap: '0.5rem',\r\n                                    fontSize: '0.9rem',\r\n                                    fontWeight: isActive ? 'bold' : 'normal',\r\n                                    transition: 'all 0.2s'\r\n                                }}\r\n                            >\r\n                                <Icon size={14} /> {tab.label}\r\n                            </button>\r\n                        );\r\n                    })}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Content */}\r\n            <div style={{ padding: '1rem' }}>\r\n                {loading ? (\r\n                    <div style={{ padding: '2rem', textAlign: 'center', opacity: 0.5 }}>Loading feed...</div>\r\n                ) : (\r\n                    <InfiniteGrid\r\n                        items={posts}\r\n                        hasMore={false} // Simple MVP\r\n                        loadMore={() => { }}\r\n                        loading={false}\r\n                    />\r\n                )}\r\n\r\n                {!loading && posts.length === 0 && (\r\n                    <div style={{ padding: '3rem', textAlign: 'center', opacity: 0.5 }}>\r\n                        No posts found for this event yet.\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default EventFeedPage;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\pages\\EventPage.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useEffect' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":36},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'currentUser' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":13,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'subsLoading' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":17,"column":35,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":46}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { useEvent, useEventSubmissions } from '@/hooks/useEventSystem';\r\nimport EventSubmissionModal from '@/components/EventSubmissionModal';\r\nimport { useCountdown } from '@/hooks/useCountdown';\r\nimport { FaClock, FaTag, FaUser, FaCamera, FaLock } from 'react-icons/fa';\r\nimport SmartImage from '@/components/SmartImage';\r\n\r\nconst EventPage = () => {\r\n    const { eventId } = useParams();\r\n    const navigate = useNavigate();\r\n    const { currentUser } = useAuth();\r\n    const { event, loading: eventLoading, error } = useEvent(eventId);\r\n\r\n    // We pass event data to the hook to handle timed drop logic\r\n    const { submissions, loading: subsLoading, isRevealed } = useEventSubmissions(\r\n        eventId,\r\n        event?.isTimedDrop,\r\n        event?.dropTime\r\n    );\r\n\r\n    const [showSubmitModal, setShowSubmitModal] = useState(false);\r\n\r\n    // Countdown timer for timed drops\r\n    const { hours, minutes, seconds, isExpired } = useCountdown(\r\n        (event?.isTimedDrop && event?.dropTime && !isRevealed) ? event.dropTime : null\r\n    );\r\n\r\n    const timeLeft = isExpired ? 'Live Now' : `${hours}h ${minutes}m ${seconds}s`;\r\n\r\n    if (eventLoading) return <div style={{ padding: '2rem', color: '#fff' }}>Loading event...</div>;\r\n    if (error) return <div style={{ padding: '2rem', color: '#ff4444' }}>Error: {error}</div>;\r\n    if (!event) return null;\r\n\r\n    return (\r\n        <div style={{ minHeight: '100vh', background: '#000', color: '#fff', paddingBottom: '6rem' }}>\r\n            {/* Hero Section */}\r\n            <div style={{\r\n                padding: '3rem 2rem',\r\n                background: 'linear-gradient(to bottom, #1a1a1a, #000)',\r\n                borderBottom: '1px solid #333'\r\n            }}>\r\n                <div style={{ maxWidth: '1000px', margin: '0 auto' }}>\r\n                    <div style={{\r\n                        display: 'inline-block',\r\n                        padding: '0.25rem 0.75rem',\r\n                        background: event.isExpired ? '#ff4444' : (event.isContest ? '#FFD700' : '#7FFFD4'),\r\n                        color: event.isExpired ? '#fff' : '#000',\r\n                        borderRadius: '20px',\r\n                        fontSize: '0.8rem',\r\n                        fontWeight: 'bold',\r\n                        marginBottom: '1rem'\r\n                    }}>\r\n                        {event.isExpired ? 'EVENT CLOSED' : (event.isContest ? 'CONTEST' : 'EVENT')}\r\n                    </div>\r\n\r\n                    <h1 style={{ fontSize: '2.5rem', fontWeight: 'bold', marginBottom: '1rem' }}>{event.title}</h1>\r\n                    <p style={{ fontSize: '1.1rem', color: '#ccc', maxWidth: '600px', lineHeight: '1.6' }}>{event.description}</p>\r\n\r\n                    <div style={{ display: 'flex', gap: '2rem', marginTop: '2rem', flexWrap: 'wrap' }}>\r\n                        <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', color: '#888' }}>\r\n                            <FaUser /> Created by {event.creatorName}\r\n                        </div>\r\n                        <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', color: '#7FFFD4', fontFamily: 'var(--font-family-tag)', letterSpacing: '0.05em', textTransform: 'uppercase' }}>\r\n                            <FaTag /> {event.autoTag}\r\n                        </div>\r\n                        {event.isTimedDrop && (\r\n                            <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', color: isRevealed ? '#7FFFD4' : '#ff4444' }}>\r\n                                <FaClock /> {isRevealed ? 'Drop Live' : `Drops in: ${timeLeft}`}\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    {!event.isExpired ? (\r\n                        <button\r\n                            onClick={() => setShowSubmitModal(true)}\r\n                            style={{\r\n                                marginTop: '2rem',\r\n                                padding: '0.8rem 2rem',\r\n                                background: '#fff',\r\n                                color: '#000',\r\n                                border: 'none',\r\n                                borderRadius: '30px',\r\n                                fontWeight: 'bold',\r\n                                fontSize: '1rem',\r\n                                cursor: 'pointer',\r\n                                display: 'flex',\r\n                                alignItems: 'center',\r\n                                gap: '0.5rem'\r\n                            }}\r\n                        >\r\n                            <FaCamera /> Submit Photo\r\n                        </button>\r\n                    ) : (\r\n                        <div style={{ marginTop: '2rem', padding: '1rem', background: 'rgba(255, 68, 68, 0.1)', border: '1px solid #ff4444', borderRadius: '8px', color: '#ff4444' }}>\r\n                            This event has ended. Submissions are closed.\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Submissions Grid */}\r\n            <div className=\"container-md\">\r\n                <h2 style={{ fontSize: '1.5rem', marginBottom: '1.5rem', borderBottom: '1px solid #333', paddingBottom: '0.5rem' }}>\r\n                    Submissions ({submissions.length})\r\n                </h2>\r\n\r\n                {event.isTimedDrop && !isRevealed ? (\r\n                    <div style={{\r\n                        textAlign: 'center',\r\n                        padding: '4rem',\r\n                        background: '#111',\r\n                        borderRadius: '12px',\r\n                        border: '1px dashed #333'\r\n                    }}>\r\n                        <FaLock style={{ fontSize: '3rem', color: '#333', marginBottom: '1rem' }} />\r\n                        <h3 style={{ fontSize: '1.5rem', marginBottom: '0.5rem' }}>Studio Locked</h3>\r\n                        <p style={{ color: '#888' }}>Submissions will be revealed when the drop goes live.</p>\r\n                        <div style={{\r\n                            marginTop: '1.5rem',\r\n                            fontSize: '2rem',\r\n                            fontWeight: 'bold',\r\n                            color: '#7FFFD4',\r\n                            fontFamily: 'monospace'\r\n                        }}>\r\n                            {timeLeft}\r\n                        </div>\r\n                    </div>\r\n                ) : (\r\n                    <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(250px, 1fr))', gap: '1rem' }}>\r\n                        {submissions.map(sub => (\r\n                            <div key={sub.id} style={{ aspectRatio: '1', background: '#111', borderRadius: '8px', overflow: 'hidden', position: 'relative' }}>\r\n                                <SmartImage\r\n                                    src={sub.postImage}\r\n                                    alt=\"Submission\"\r\n                                    onClick={() => navigate(`/post/${sub.postId}`)}\r\n                                    style={{ cursor: 'pointer' }}\r\n                                />\r\n                                <div style={{\r\n                                    position: 'absolute', bottom: 0, left: 0, right: 0,\r\n                                    padding: '0.5rem', background: 'linear-gradient(transparent, rgba(0,0,0,0.8))',\r\n                                    fontSize: '0.8rem'\r\n                                }}>\r\n                                    by {sub.creatorName}\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                        {submissions.length === 0 && (\r\n                            <div style={{ gridColumn: '1/-1', textAlign: 'center', padding: '2rem', color: '#666' }}>\r\n                                No submissions yet. Be the first!\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            <EventSubmissionModal\r\n                isOpen={showSubmitModal}\r\n                onClose={() => setShowSubmitModal(false)}\r\n                eventId={eventId}\r\n                eventTitle={event.title}\r\n                isExpired={event.isExpired}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default EventPage;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\pages\\Feed.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useState' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useCallback' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":46,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":57},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaCalendarAlt' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":31},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaRocket' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":33,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":41},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'showToast' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":19,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'lastScrollPositionRef' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":22,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":22,"endColumn":32},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isRestoringScrollRef' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":23,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":31},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'hasMore' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":62,"column":36,"nodeType":"Identifier","messageId":"unusedVar","endLine":62,"endColumn":43},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'loadMore' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":62,"column":45,"nodeType":"Identifier","messageId":"unusedVar","endLine":62,"endColumn":53},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'currentTheme' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":71,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":71,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setFollowingOnly' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":74,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":74,"endColumn":29}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef, useCallback } from 'react';\r\nimport { usePersonalizedFeed } from '@/hooks/usePersonalizedFeed';\r\nimport { FaRedo, FaCalendarAlt, FaRocket } from 'react-icons/fa';\r\nimport Post from '@/components/Post';\r\nimport { getCurrentTheme } from '@/core/constants/monthlyThemes';\r\nimport { useBlock } from '@/hooks/useBlock';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\nimport SEO from '@/components/SEO';\r\nimport StarBackground from '@/components/StarBackground';\r\nimport { useThemeColors } from '@/core/store/useThemeStore';\r\nimport { filterVisiblePosts } from '@/core/utils/filterHelpers';\r\nimport { useToast } from '@/context/ToastContext';\r\nimport { useFeedStore } from '@/core/store/useFeedStore';\r\nimport VirtualizedPostContainer from '@/components/feed/VirtualizedPostContainer';\r\n\r\n// Feed component - Main home feed view\r\nconst Feed = () => {\r\n    const { accentColor, secondaryColor, glowColorStrong } = useThemeColors();\r\n    const { showToast } = useToast();\r\n    const scrollContainerRef = useRef(null);\r\n    const location = useLocation();\r\n    const lastScrollPositionRef = useRef(0);\r\n    const isRestoringScrollRef = useRef(false);\r\n\r\n    // Pass currentFeed to hook if dual feeds enabled, otherwise null (show all)\r\n    // NOTE: usePersonalizedFeed expects boolean for showSocialPosts, but we're moving to currentFeed\r\n    // For now, we'll map currentFeed 'social' to true, 'art' to false if the hook logic supports it.\r\n    // However, the hook likely needs 'currentFeed' string or we adapt here.\r\n    // Based on previous code: showSocialPosts (bool)\r\n\r\n    // Import store at top level first! (I will need to add import in next step if not present, but I can't do multiple edits here easily without context)\r\n    // Actually, I should update the state usage.\r\n\r\n    // Changing local state to store state\r\n    // const [showSocialPosts, setShowSocialPosts] = useState(false); -> remove this\r\n    // const { currentFeed } = useFeedStore(); -> add this\r\n\r\n    // Logic:\r\n    // If currentFeed is 'social', showSocialPosts = true\r\n    // If currentFeed is 'art', showSocialPosts = false\r\n\r\n    // But I can't inject imports here. I will just update this block to use the store hook ASSUMING I will add the import.\r\n    // Wait, I should add the import first or do it all in one go if possible.\r\n    // I can't add import here because it's line 1.\r\n\r\n    // I made a mistake in planning. I need to add the import first.\r\n    // I'll skip this tool call and do the import first.\r\n\r\n    // RE-EVALUATING: I have valid tool calls above.\r\n\r\n    // Actually, I can use `useFeedStore` directly if imported.\r\n    // Let's modify the usage of `usePersonalizedFeed` to use `useFeedStore`.\r\n    // I will simply assume I will add `import { useFeedStore } from '@/core/store/useFeedStore';` at the top.\r\n\r\n    // BUT, I'll update the replacement content to just use a property specific to this block.\r\n    // I'll pause and add the import first in a separate 'replace' check.\r\n\r\n    // For this specific block:\r\n    const { currentFeed, followingOnly, customFeedEnabled, activeCustomFeedId } = useFeedStore();\r\n    const showSocialPosts = currentFeed === 'social';\r\n\r\n    const { posts, loading, error, hasMore, loadMore, refresh } = usePersonalizedFeed(\r\n        'HOME',\r\n        {},\r\n        showSocialPosts,\r\n        followingOnly,\r\n        customFeedEnabled,\r\n        activeCustomFeedId\r\n    );\r\n\r\n    const currentTheme = getCurrentTheme();\r\n    const { blockedUsers } = useBlock();\r\n    const navigate = useNavigate();\r\n    const { setFollowingOnly } = useFeedStore(); // Needed for switch button\r\n\r\n    // Filter out blocked content - memoized to prevent re-renders\r\n    // STABILITY: Ensure posts is always an array\r\n    const visiblePosts = React.useMemo(() =>\r\n        filterVisiblePosts(posts || [], blockedUsers),\r\n        [posts, blockedUsers]\r\n    );\r\n\r\n    // Scroll behavior: Always start at top\r\n    // Previous scroll restoration logic removed as per user request\r\n    useEffect(() => {\r\n        // Reset scroll to top on mount if needed, though default browser behavior handles this mostly.\r\n        // Ensuring it for good measure.\r\n        if (scrollContainerRef.current) {\r\n            scrollContainerRef.current.scrollTop = 0;\r\n        }\r\n    }, [location.pathname]); // Run on navigation to this page\r\n\r\n    return (\r\n        <div style={{\r\n            height: '100vh',\r\n            width: '100vw',\r\n            background: '#000',\r\n            overflow: 'hidden',\r\n            position: 'relative',\r\n            userSelect: 'none',\r\n            WebkitUserSelect: 'none',\r\n            WebkitTouchCallout: 'none'\r\n        }}>\r\n            <SEO title=\"Home\" description=\"Your personalized feed of amazing art and photography.\" />\r\n\r\n            {/* Deep Space Background - Only show when empty */}\r\n            {visiblePosts.length === 0 && <StarBackground />}\r\n\r\n            {/* Planet Logo - Top Left (avoiding Dynamic Island) */}\r\n            <div style={{\r\n                position: 'absolute',\r\n                top: 'max(0.75rem, env(safe-area-inset-top))',\r\n                left: '1rem',\r\n                zIndex: 50,\r\n                pointerEvents: 'auto',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '1rem',\r\n                height: '40px',\r\n            }}>\r\n                <svg\r\n                    width=\"40\"\r\n                    height=\"40\"\r\n                    viewBox=\"-5 -5 34 34\"\r\n                    onClick={() => {\r\n                        navigate('/profile/me');\r\n                    }}\r\n                    style={{\r\n                        flexShrink: 0,\r\n                        filter: `drop-shadow(0 0 8px ${glowColorStrong})`,\r\n                        cursor: 'pointer',\r\n                        overflow: 'visible',\r\n                        transition: 'filter 0.2s ease'\r\n                    }}\r\n                    title=\"Go to Profile\"\r\n                >\r\n                    <defs>\r\n                        <radialGradient id=\"planetGradient\" cx=\"40%\" cy=\"40%\">\r\n                            <stop offset=\"0%\" style={{ stopColor: accentColor, stopOpacity: 1 }} />\r\n                            <stop offset=\"100%\" style={{ stopColor: secondaryColor, stopOpacity: 1 }} />\r\n                        </radialGradient>\r\n                        <filter id=\"planetGlow\" x=\"-50%\" y=\"-50%\" width=\"200%\" height=\"200%\">\r\n                            <feGaussianBlur stdDeviation=\"3\" result=\"coloredBlur\" />\r\n                            <feMerge>\r\n                                <feMergeNode in=\"coloredBlur\" />\r\n                                <feMergeNode in=\"SourceGraphic\" />\r\n                            </feMerge>\r\n                        </filter>\r\n                    </defs>\r\n                    <ellipse cx=\"12\" cy=\"12\" rx=\"14\" ry=\"4\" fill=\"none\" stroke={accentColor} strokeWidth=\"1.5\" opacity=\"0.4\" transform=\"rotate(-20 12 12)\" />\r\n                    <circle cx=\"12\" cy=\"12\" r=\"7\" fill=\"url(#planetGradient)\" opacity=\"0.95\" filter=\"url(#planetGlow)\" />\r\n                    <ellipse cx=\"12\" cy=\"12\" rx=\"14\" ry=\"4\" fill=\"none\" stroke={accentColor} strokeWidth=\"1.5\" opacity=\"0.6\" transform=\"rotate(-20 12 12)\" strokeDasharray=\"0,8,20,100\" />\r\n                    <circle cx=\"12\" cy=\"12\" r=\"7\" fill=\"none\" stroke={accentColor} strokeWidth=\"0.5\" opacity=\"0.3\" />\r\n                </svg>\r\n            </div>\r\n\r\n            {\r\n                loading && posts.length === 0 && (\r\n                    <div style={{ height: '100vh', display: 'flex', justifyContent: 'center', alignItems: 'center', color: '#fff', zIndex: 10, position: 'relative' }}>\r\n                        Loading...\r\n                    </div>\r\n                )\r\n            }\r\n\r\n            {\r\n                !loading && error && (\r\n                    <div style={{ height: '100vh', display: 'flex', flexDirection: 'column', justifyContent: 'center', alignItems: 'center', color: '#fff', gap: '1rem', textAlign: 'center', padding: '2rem', zIndex: 10, position: 'relative' }}>\r\n                        <h2 style={{ fontSize: '1.5rem', marginBottom: '0.5rem' }}>Unable to load feed</h2>\r\n                        <p style={{ color: '#aaa', maxWidth: '400px', marginBottom: '1.5rem' }}>{error}</p>\r\n                        <div style={{ display: 'flex', gap: '1rem' }}>\r\n                            <button onClick={refresh} style={{ background: 'var(--ice-mint)', border: 'none', color: '#000', padding: '0.6rem 1.2rem', borderRadius: '20px', cursor: 'pointer', display: 'flex', alignItems: 'center', gap: '0.5rem', fontWeight: 'bold' }}>\r\n                                <FaRedo /> Try Again\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                )\r\n            }\r\n\r\n            {\r\n                !loading && !error && visiblePosts.length === 0 && (\r\n                    <div style={{\r\n                        height: '100vh',\r\n                        width: '100vw',\r\n                        display: 'flex',\r\n                        flexDirection: 'column',\r\n                        justifyContent: 'center',\r\n                        alignItems: 'center',\r\n                        color: '#fff',\r\n                        gap: '1rem',\r\n                        position: 'fixed',\r\n                        top: 0,\r\n                        left: 0,\r\n                        zIndex: 5\r\n                    }}>\r\n                        <div style={{\r\n                            position: 'relative',\r\n                            zIndex: 10,\r\n                            textAlign: 'center',\r\n                            padding: '2rem'\r\n                        }}>\r\n                            <h2 style={{\r\n                                fontSize: '2rem',\r\n                                marginBottom: '1rem',\r\n                                color: '#7FFFD4',\r\n                                textShadow: '0 0 10px rgba(127, 255, 212, 0.5)',\r\n                                fontFamily: \"'Rajdhani', sans-serif\",\r\n                                fontWeight: '700',\r\n                                letterSpacing: '0.05em'\r\n                            }}>\r\n                                No posts yet\r\n                            </h2>\r\n                            <p style={{\r\n                                color: '#aaa',\r\n                                marginBottom: '1.5rem',\r\n                                fontSize: '1.1rem'\r\n                            }}>\r\n                                Follow some creators to see their work here!\r\n                            </p>\r\n                            <button\r\n                                onClick={() => navigate('/search')}\r\n                                style={{\r\n                                    padding: '0.75rem 1.5rem',\r\n                                    background: 'rgba(127, 255, 212, 0.1)',\r\n                                    color: '#7FFFD4',\r\n                                    border: '1px solid #7FFFD4',\r\n                                    borderRadius: '8px',\r\n                                    fontSize: '1rem',\r\n                                    fontWeight: 'bold',\r\n                                    cursor: 'pointer',\r\n                                    boxShadow: '0 0 20px rgba(127, 255, 212, 0.2)',\r\n                                    transition: 'all 0.2s',\r\n                                    display: 'inline-flex',\r\n                                    alignItems: 'center',\r\n                                    gap: '0.5rem',\r\n                                    backdropFilter: 'blur(5px)',\r\n                                    margin: '0 auto'\r\n                                }}\r\n                                onMouseOver={(e) => {\r\n                                    e.currentTarget.style.transform = 'scale(1.05)';\r\n                                    e.currentTarget.style.background = 'rgba(127, 255, 212, 0.2)';\r\n                                    e.currentTarget.style.boxShadow = '0 0 30px rgba(127, 255, 212, 0.4)';\r\n                                }}\r\n                                onMouseOut={(e) => {\r\n                                    e.currentTarget.style.transform = 'scale(1)';\r\n                                    e.currentTarget.style.background = 'rgba(127, 255, 212, 0.1)';\r\n                                    e.currentTarget.style.boxShadow = '0 0 20px rgba(127, 255, 212, 0.2)';\r\n                                }}\r\n                            >\r\n                                Find Creators\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                )\r\n            }\r\n\r\n            {visiblePosts.length > 0 && (\r\n                <>\r\n                    <style>\r\n                        {`\r\n                            .no-scrollbar::-webkit-scrollbar {\r\n                                display: none;\r\n                            }\r\n                            .no-scrollbar {\r\n                                -ms-overflow-style: none;\r\n                                scrollbar-width: none;\r\n                            }\r\n                        `}\r\n                    </style>\r\n                    <div\r\n                        style={{\r\n                            height: '100%',\r\n                            background: '#000' // Ensure background is black specifically for the container\r\n                        }}\r\n                    >\r\n                        {/* We import VirtualizedPostContainer dynamically or assume it is imported at top. \r\n                             Since I cannot add top-level imports easily in a small replace block without risk,\r\n                             I will use a lazy import or assume the previous step's context allows me to add the import separately.\r\n                             However, standard practice is to add import at top. \r\n                             \r\n                             I will update this block to use VirtualizedPostContainer. \r\n                             I'll handle the import in a separate tool call if needed or just replace the whole file content section if I need to add import.\r\n                             \r\n                             Actually, I'll replace the block assuming 'VirtualizedPostContainer' is available, \r\n                             and I will add the import line in a separate call or use a multi-replace to add it at the top.\r\n                          */}\r\n                        <VirtualizedPostContainer\r\n                            posts={visiblePosts}\r\n                            initialIndex={0}\r\n                            renderPost={(post, index, isCurrent) => (\r\n                                <Post\r\n                                    post={post}\r\n                                    displayMode=\"feed\"\r\n                                    priority={isCurrent ? 'high' : 'normal'}\r\n                                />\r\n                            )}\r\n                        />\r\n                    </div>\r\n                </>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\n\r\nexport default Feed;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\pages\\GalleryDetail.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'studioError' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":36,"column":46,"nodeType":"Identifier","messageId":"unusedVar","endLine":36,"endColumn":57},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'studio'. Either include it or remove the dependency array. Outer scope values like 'gallery' aren't valid dependencies because mutating them doesn't re-render the component.","line":79,"column":8,"nodeType":"ArrayExpression","endLine":79,"endColumn":21,"suggestions":[{"desc":"Update the dependencies array to be: [id, studio]","fix":{"range":[3132,3145],"text":"[id, studio]"}}]},{"ruleId":"no-undef","severity":1,"message":"'gallery' is not defined.","line":79,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":79,"endColumn":16},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadContent'. Either include it or remove the dependency array.","line":85,"column":8,"nodeType":"ArrayExpression","endLine":85,"endColumn":27,"suggestions":[{"desc":"Update the dependencies array to be: [activeTab, loadContent, studio]","fix":{"range":[3243,3262],"text":"[activeTab, loadContent, studio]"}}]},{"ruleId":"no-undef","severity":1,"message":"'gallery' is not defined.","line":160,"column":21,"nodeType":"Identifier","messageId":"undef","endLine":160,"endColumn":28},{"ruleId":"no-undef","severity":1,"message":"'gallery' is not defined.","line":160,"column":40,"nodeType":"Identifier","messageId":"undef","endLine":160,"endColumn":47},{"ruleId":"no-undef","severity":1,"message":"'gallery' is not defined.","line":162,"column":39,"nodeType":"Identifier","messageId":"undef","endLine":162,"endColumn":46},{"ruleId":"no-undef","severity":1,"message":"'loadGallery' is not defined.","line":501,"column":29,"nodeType":"Identifier","messageId":"undef","endLine":501,"endColumn":40}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { useGallery } from '@/hooks/useGallery';\r\nimport {\r\n    getGalleryPosts,\r\n    getGalleryCollections\r\n} from '@/core/services/firestore/studios.service';\r\nimport { db } from '@/firebase';\r\nimport { PageSkeleton, SkeletonGrid } from '@/components/ui/Skeleton';\r\nimport {\r\n    FaArrowLeft,\r\n    FaLock,\r\n    FaGlobe,\r\n    FaUserPlus,\r\n    FaImage,\r\n    FaFolderOpen,\r\n    FaUsers\r\n} from 'react-icons/fa';\r\nimport Post from '@/components/Post';\r\nimport InviteMembersModal from '@/components/galleries/InviteMembersModal';\r\nimport MagazineSubmissionBox from '@/components/MagazineSubmissionBox';\r\nimport { getMagazinesByGallery, getMagazineIssues } from '@/services/magazineService';\r\nimport { useStudioProjects } from '@/hooks/useProjects';\r\nimport CreateProjectModal from '@/components/CreateProjectModal';\r\nimport ProjectCard from '@/components/ProjectCard';\r\nimport { FaBriefcase } from 'react-icons/fa';\r\nimport '@/styles/gallery-page.css';\r\n\r\nconst StudioPage = () => {\r\n    const { id } = useParams();\r\n    const navigate = useNavigate();\r\n    const { currentUser } = useAuth();\r\n\r\n    // Use custom hook for studio data\r\n    const { gallery: studio, loading, error: studioError } = useGallery(id);\r\n\r\n    const [activeTab, setActiveTab] = useState('posts');\r\n    const [posts, setPosts] = useState([]);\r\n    const [collections, setCollections] = useState([]);\r\n    const [members, setMembers] = useState([]);\r\n    const [contentLoading, setContentLoading] = useState(false);\r\n    const [showInviteModal, setShowInviteModal] = useState(false);\r\n    const [magazine, setMagazine] = useState(null);\r\n    const [nextIssue, setNextIssue] = useState(null);\r\n    const [showCreateProjectModal, setShowCreateProjectModal] = useState(false);\r\n\r\n    // Fetch projects for this studio\r\n    const { projects, loading: projectsLoading, refetch: refetchProjects } = useStudioProjects(id);\r\n\r\n    // Check if current user is owner\r\n    const isOwner = currentUser && studio && studio.ownerId === currentUser.uid;\r\n    const isMember = currentUser && studio && studio.members?.includes(currentUser.uid);\r\n\r\n    // Load magazine data when gallery loads\r\n    useEffect(() => {\r\n        const loadMagazineData = async () => {\r\n            if (!studio) return;\r\n\r\n            try {\r\n                // Check if this studio has a linked magazine\r\n                const magazines = await getMagazinesByGallery(id);\r\n                if (magazines.length > 0) {\r\n                    const mag = magazines[0];\r\n                    setMagazine(mag);\r\n\r\n                    // Get next queued issue\r\n                    const issues = await getMagazineIssues(mag.id, 'queued');\r\n                    if (issues.length > 0) {\r\n                        setNextIssue(issues[0]);\r\n                    }\r\n                }\r\n            } catch (error) {\r\n                console.error('Error loading magazine data:', error);\r\n            }\r\n        };\r\n\r\n        loadMagazineData();\r\n    }, [gallery, id]);\r\n\r\n    useEffect(() => {\r\n        if (studio) {\r\n            loadContent();\r\n        }\r\n    }, [activeTab, studio]);\r\n\r\n    const loadContent = async () => {\r\n        setContentLoading(true);\r\n        try {\r\n            if (activeTab === 'posts') {\r\n                const galleryPosts = await getGalleryPosts(id);\r\n\r\n                // Extract post IDs and batch fetch\r\n                const postIds = galleryPosts.map(gp => gp.postId).filter(Boolean);\r\n\r\n                if (postIds.length === 0) {\r\n                    setPosts([]);\r\n                } else {\r\n                    // Firestore 'in' queries support max 30 items, so batch if needed\r\n                    const batchSize = 30;\r\n                    const batches = [];\r\n\r\n                    for (let i = 0; i < postIds.length; i += batchSize) {\r\n                        const batchIds = postIds.slice(i, i + batchSize);\r\n                        batches.push(batchIds);\r\n                    }\r\n\r\n                    // Execute batched queries in parallel\r\n                    const { query, where, getDocs, collection, documentId } = await import('firebase/firestore');\r\n                    const allPosts = [];\r\n\r\n                    await Promise.all(batches.map(async (batchIds) => {\r\n                        const postsQuery = query(\r\n                            collection(db, 'posts'),\r\n                            where(documentId(), 'in', batchIds)\r\n                        );\r\n                        const snapshot = await getDocs(postsQuery);\r\n                        snapshot.docs.forEach(doc => {\r\n                            allPosts.push({ id: doc.id, ...doc.data() });\r\n                        });\r\n                    }));\r\n\r\n                    setPosts(allPosts);\r\n                }\r\n            } else if (activeTab === 'collections') {\r\n                const galleryCollections = await getGalleryCollections(id);\r\n\r\n                // Extract collection IDs and batch fetch\r\n                const collectionIds = galleryCollections.map(gc => gc.collectionId).filter(Boolean);\r\n\r\n                if (collectionIds.length === 0) {\r\n                    setCollections([]);\r\n                } else {\r\n                    // Batch collections queries\r\n                    const batchSize = 30;\r\n                    const batches = [];\r\n\r\n                    for (let i = 0; i < collectionIds.length; i += batchSize) {\r\n                        const batchIds = collectionIds.slice(i, i + batchSize);\r\n                        batches.push(batchIds);\r\n                    }\r\n\r\n                    const { query, where, getDocs, collection, documentId } = await import('firebase/firestore');\r\n                    const allCollections = [];\r\n\r\n                    await Promise.all(batches.map(async (batchIds) => {\r\n                        const collectionsQuery = query(\r\n                            collection(db, 'collections'),\r\n                            where(documentId(), 'in', batchIds)\r\n                        );\r\n                        const snapshot = await getDocs(collectionsQuery);\r\n                        snapshot.docs.forEach(doc => {\r\n                            allCollections.push({ id: doc.id, ...doc.data() });\r\n                        });\r\n                    }));\r\n\r\n                    setCollections(allCollections);\r\n                }\r\n            } else if (activeTab === 'members') {\r\n                if (gallery.members && gallery.members.length > 0) {\r\n                    // Batch members queries\r\n                    const memberIds = gallery.members.filter(Boolean);\r\n\r\n                    if (memberIds.length === 0) {\r\n                        setMembers([]);\r\n                    } else {\r\n                        const batchSize = 30;\r\n                        const batches = [];\r\n\r\n                        for (let i = 0; i < memberIds.length; i += batchSize) {\r\n                            const batchIds = memberIds.slice(i, i + batchSize);\r\n                            batches.push(batchIds);\r\n                        }\r\n\r\n                        const { query, where, getDocs, collection, documentId } = await import('firebase/firestore');\r\n                        const allMembers = [];\r\n\r\n                        await Promise.all(batches.map(async (batchIds) => {\r\n                            const membersQuery = query(\r\n                                collection(db, 'users'),\r\n                                where(documentId(), 'in', batchIds)\r\n                            );\r\n                            const snapshot = await getDocs(membersQuery);\r\n                            snapshot.docs.forEach(doc => {\r\n                                allMembers.push({ id: doc.id, ...doc.data() });\r\n                            });\r\n                        }));\r\n\r\n                        setMembers(allMembers);\r\n                    }\r\n                } else {\r\n                    setMembers([]);\r\n                }\r\n            }\r\n        } catch (error) {\r\n            console.error('Error loading content:', error);\r\n        } finally {\r\n            setContentLoading(false);\r\n        }\r\n    };\r\n\r\n    if (loading) {\r\n        return <PageSkeleton />;\r\n    }\r\n\r\n    if (!studio) {\r\n        return (\r\n            <div className=\"gallery-error\">\r\n                <h2>Studio Not Found</h2>\r\n                <button onClick={() => navigate('/')}>Go Home</button>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"gallery-page\">\r\n            {studio.coverImage && (\r\n                <div\r\n                    className=\"gallery-cover\"\r\n                    style={{ backgroundImage: `url(${studio.coverImage})` }}\r\n                >\r\n                    <div className=\"cover-overlay\" />\r\n                </div>\r\n            )}\r\n\r\n            <div className=\"gallery-header\">\r\n                <button onClick={() => navigate(-1)} className=\"back-btn\">\r\n                    <FaArrowLeft /> Back\r\n                </button>\r\n\r\n                <div className=\"gallery-info\">\r\n                    <div className=\"gallery-meta\">\r\n                        <span className=\"visibility-badge\">\r\n                            {studio.isPublic ? <FaGlobe /> : <FaLock />}\r\n                            {studio.isPublic ? 'Public' : 'Private'}\r\n                        </span>\r\n                        <span className=\"content-type-badge\">\r\n                            {studio.contentType === 'posts' && 'Posts Only'}\r\n                            {studio.contentType === 'collections' && 'Collections Only'}\r\n                            {studio.contentType === 'both' && 'Posts & Collections'}\r\n                        </span>\r\n                    </div>\r\n\r\n                    <h1>{studio.title}</h1>\r\n\r\n                    {studio.description && (\r\n                        <p className=\"gallery-description\">{studio.description}</p>\r\n                    )}\r\n\r\n                    <div className=\"gallery-stats\">\r\n                        <span>by @{studio.ownerUsername}</span>\r\n                        <span>ΓÇó</span>\r\n                        <span>{studio.postsCount || 0} posts</span>\r\n                        <span>ΓÇó</span>\r\n                        <span>{studio.membersCount || 0} members</span>\r\n                    </div>\r\n\r\n                    {studio.requiredTags && studio.requiredTags.length > 0 && (\r\n                        <div className=\"required-tags\">\r\n                            <strong>Required tags:</strong>\r\n                            {studio.requiredTags.map(tag => (\r\n                                <span key={tag} className=\"tag-badge\">{tag}</span>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n\r\n                    {isOwner && (\r\n                        <button className=\"invite-btn\" onClick={() => setShowInviteModal(true)}>\r\n                            <FaUserPlus /> Invite Members\r\n                        </button>\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"gallery-tabs\">\r\n                <button\r\n                    className={`tab ${activeTab === 'posts' ? 'active' : ''}`}\r\n                    onClick={() => setActiveTab('posts')}\r\n                >\r\n                    <FaImage /> Posts ({studio.postsCount || 0})\r\n                </button>\r\n                <button\r\n                    className={`tab ${activeTab === 'collections' ? 'active' : ''}`}\r\n                    onClick={() => setActiveTab('collections')}\r\n                >\r\n                    <FaFolderOpen /> Collections ({studio.collectionsCount || 0})\r\n                </button>\r\n                <button\r\n                    className={`tab ${activeTab === 'members' ? 'active' : ''}`}\r\n                    onClick={() => setActiveTab('members')}\r\n                >\r\n                    <FaUsers /> Members ({studio.membersCount || 0})\r\n                </button>\r\n                <button\r\n                    className={`tab ${activeTab === 'projects' ? 'active' : ''}`}\r\n                    onClick={() => setActiveTab('projects')}\r\n                >\r\n                    <FaBriefcase /> Projects ({projects?.length || 0})\r\n                </button>\r\n            </div>\r\n\r\n            <div className=\"gallery-content\">\r\n                {/* Magazine Submission Box */}\r\n                {isMember && magazine && nextIssue && (\r\n                    <MagazineSubmissionBox\r\n                        magazine={magazine}\r\n                        gallery={studio}\r\n                        nextIssue={nextIssue}\r\n                    />\r\n                )}\r\n\r\n                {contentLoading ? (\r\n                    <SkeletonGrid count={6} aspectRatio=\"1/1\" columns=\"repeat(auto-fill, minmax(250px, 1fr))\" />\r\n                ) : (\r\n                    <>\r\n                        {activeTab === 'posts' && (\r\n                            <div className=\"posts-grid\">\r\n                                {posts.length === 0 ? (\r\n                                    <div className=\"empty-state\">\r\n                                        <FaImage size={48} />\r\n                                        <p>No posts yet</p>\r\n                                        {isMember && <span>Be the first to add a post!</span>}\r\n                                    </div>\r\n                                ) : (\r\n                                    posts.map(post => (\r\n                                        <Post key={post.id} post={post} />\r\n                                    ))\r\n                                )}\r\n                            </div>\r\n                        )}\r\n\r\n                        {activeTab === 'collections' && (\r\n                            <div className=\"collections-grid\">\r\n                                {collections.length === 0 ? (\r\n                                    <div className=\"empty-state\">\r\n                                        <FaFolderOpen size={48} />\r\n                                        <p>No collections yet</p>\r\n                                        {isMember && <span>Be the first to add a collection!</span>}\r\n                                    </div>\r\n                                ) : (\r\n                                    collections.map(collection => (\r\n                                        <div\r\n                                            key={collection.id}\r\n                                            className=\"collection-card\"\r\n                                            onClick={() => navigate(`/collection/${collection.id}`)}\r\n                                        >\r\n                                            <h3>{collection.title}</h3>\r\n                                            <p>{collection.description}</p>\r\n                                            <span className=\"collection-count\">\r\n                                                {collection.postRefs?.length || 0} posts\r\n                                            </span>\r\n                                        </div>\r\n                                    ))\r\n                                )}\r\n                            </div>\r\n                        )}\r\n\r\n                        {activeTab === 'members' && (\r\n                            <div className=\"members-grid\">\r\n                                {members.length === 0 ? (\r\n                                    <div className=\"empty-state\">\r\n                                        <FaUsers size={48} />\r\n                                        <p>No members yet</p>\r\n                                    </div>\r\n                                ) : (\r\n                                    members.map(member => {\r\n                                        // Team Logic\r\n                                        const teamId = studio.teamAssignments?.[member.id];\r\n                                        const team = teamId ? studio.teams?.[teamId] : null;\r\n                                        const teamColor = team?.color;\r\n\r\n                                        // Username Color Priority: Team Color (if in studio) > User Theme\r\n                                        const displayColor = teamColor ||\r\n                                            (member.profileTheme?.usernameColor && !member.profileTheme.usernameColor.includes('gradient')\r\n                                                ? member.profileTheme.usernameColor\r\n                                                : '#fff');\r\n\r\n                                        return (\r\n                                            <div\r\n                                                key={member.id}\r\n                                                className=\"member-card\"\r\n                                                onClick={() => navigate(`/profile/${member.id}`)}\r\n                                                style={{\r\n                                                    borderColor: teamColor ? teamColor : 'rgba(255,255,255,0.1)',\r\n                                                    borderWidth: teamColor ? '2px' : '1px'\r\n                                                }}\r\n                                            >\r\n                                                <div style={{ position: 'relative', width: '60px', height: '60px', margin: '0 auto 1rem' }}>\r\n                                                    <img\r\n                                                        src={member.photoURL || '/default-avatar.png'}\r\n                                                        alt={member.username}\r\n                                                        className=\"member-avatar\"\r\n                                                        style={{\r\n                                                            width: '100%',\r\n                                                            height: '100%',\r\n                                                            borderRadius: '50%',\r\n                                                            objectFit: 'cover',\r\n                                                            border: `2px solid ${teamColor || member.profileTheme?.borderColor || '#7FFFD4'}`\r\n                                                        }}\r\n                                                    />\r\n                                                    {team && (\r\n                                                        <div style={{\r\n                                                            position: 'absolute',\r\n                                                            bottom: '-5px',\r\n                                                            right: '-5px',\r\n                                                            background: teamColor,\r\n                                                            color: '#000',\r\n                                                            fontSize: '0.6rem',\r\n                                                            padding: '2px 6px',\r\n                                                            borderRadius: '10px',\r\n                                                            fontWeight: 'bold',\r\n                                                            boxShadow: '0 2px 5px rgba(0,0,0,0.5)'\r\n                                                        }}>\r\n                                                            {team.name}\r\n                                                        </div>\r\n                                                    )}\r\n                                                </div>\r\n\r\n                                                <div className=\"member-info\">\r\n                                                    <strong style={{\r\n                                                        color: displayColor,\r\n                                                        fontSize: '1.1rem',\r\n                                                        fontFamily: 'var(--font-family-heading)'\r\n                                                    }}>\r\n                                                        {member.displayName || member.username}\r\n                                                    </strong>\r\n                                                    <span style={{ opacity: 0.7 }}>@{member.username}</span>\r\n                                                </div>\r\n                                                {member.id === studio.ownerId && (\r\n                                                    <span className=\"owner-badge\">Owner</span>\r\n                                                )}\r\n                                            </div>\r\n                                        );\r\n                                    })\r\n                                )}\r\n                            </div>\r\n                        )}\r\n\r\n                        {activeTab === 'projects' && (\r\n                            <div className=\"projects-grid\">\r\n                                {isOwner && (\r\n                                    <div style={{\r\n                                        marginBottom: '1.5rem',\r\n                                        display: 'flex',\r\n                                        justifyContent: 'flex-end'\r\n                                    }}>\r\n                                        <button\r\n                                            onClick={() => setShowCreateProjectModal(true)}\r\n                                            style={{\r\n                                                padding: '0.75rem 1.5rem',\r\n                                                background: '#7FFFD4',\r\n                                                color: '#000',\r\n                                                border: 'none',\r\n                                                borderRadius: '8px',\r\n                                                fontWeight: 'bold',\r\n                                                cursor: 'pointer',\r\n                                                display: 'flex',\r\n                                                alignItems: 'center',\r\n                                                gap: '0.5rem'\r\n                                            }}\r\n                                        >\r\n                                            <FaBriefcase /> New Project\r\n                                        </button>\r\n                                    </div>\r\n                                )}\r\n                                {projectsLoading ? (\r\n                                    <div className=\"empty-state\">\r\n                                        <p>Loading projects...</p>\r\n                                    </div>\r\n                                ) : projects.length === 0 ? (\r\n                                    <div className=\"empty-state\">\r\n                                        <FaBriefcase size={48} />\r\n                                        <p>No projects yet</p>\r\n                                        {isOwner && <span>Create your first collaborative project!</span>}\r\n                                    </div>\r\n                                ) : (\r\n                                    <div style={{\r\n                                        display: 'grid',\r\n                                        gridTemplateColumns: 'repeat(auto-fill, minmax(300px, 1fr))',\r\n                                        gap: '1.5rem'\r\n                                    }}>\r\n                                        {projects.map(project => (\r\n                                            <ProjectCard key={project.id} project={project} studioId={id} />\r\n                                        ))}\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        )}\r\n                    </>\r\n                )}\r\n            </div>\r\n\r\n            {showInviteModal && (\r\n                <InviteMembersModal\r\n                    galleryId={id}\r\n                    existingMembers={studio.members || []}\r\n                    pendingInvites={studio.pendingInvites || []}\r\n                    onClose={(invitesSent) => {\r\n                        setShowInviteModal(false);\r\n                        if (invitesSent) {\r\n                            loadGallery();\r\n                        }\r\n                    }}\r\n                />\r\n            )}\r\n\r\n            {showCreateProjectModal && (\r\n                <CreateProjectModal\r\n                    isOpen={showCreateProjectModal}\r\n                    onClose={() => setShowCreateProjectModal(false)}\r\n                    studioId={id}\r\n                    onSuccess={(newProject) => {\r\n                        refetchProjects();\r\n                        navigate(`/project/${id}/${newProject.id}`);\r\n                    }}\r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default StudioPage;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\pages\\Legal.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { FaArrowLeft, FaShieldAlt, FaUserShield, FaGavel } from 'react-icons/fa';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst Legal = () => {\r\n    const navigate = useNavigate();\r\n    const [activeTab, setActiveTab] = useState('guidelines');\r\n\r\n    const containerStyle = {\r\n        minHeight: '100vh',\r\n        backgroundColor: '#000',\r\n        color: '#fff',\r\n        padding: '2rem',\r\n        fontFamily: 'Inter, sans-serif'\r\n    };\r\n\r\n    const headerStyle = {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        gap: '1rem',\r\n        marginBottom: '2rem',\r\n        paddingBottom: '1rem',\r\n        borderBottom: '1px solid #333'\r\n    };\r\n\r\n    const tabContainerStyle = {\r\n        display: 'flex',\r\n        gap: '1rem',\r\n        marginBottom: '2rem',\r\n        flexWrap: 'wrap'\r\n    };\r\n\r\n    const tabStyle = (isActive) => ({\r\n        padding: '0.8rem 1.5rem',\r\n        borderRadius: '20px',\r\n        border: isActive ? '1px solid #fff' : '1px solid #333',\r\n        background: isActive ? '#fff' : 'transparent',\r\n        color: isActive ? '#000' : '#aaa',\r\n        cursor: 'pointer',\r\n        fontWeight: '600',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        gap: '0.5rem',\r\n        transition: 'all 0.2s'\r\n    });\r\n\r\n    const sectionStyle = {\r\n        maxWidth: '800px',\r\n        margin: '0 auto',\r\n        lineHeight: '1.6',\r\n        color: '#ddd'\r\n    };\r\n\r\n    const h2Style = {\r\n        color: '#fff',\r\n        marginTop: '2rem',\r\n        marginBottom: '1rem',\r\n        fontSize: '1.5rem'\r\n    };\r\n\r\n    const h3Style = {\r\n        color: '#fff',\r\n        marginTop: '1.5rem',\r\n        marginBottom: '0.5rem',\r\n        fontSize: '1.2rem'\r\n    };\r\n\r\n    const ulStyle = {\r\n        paddingLeft: '1.5rem',\r\n        marginBottom: '1rem'\r\n    };\r\n\r\n    const liStyle = {\r\n        marginBottom: '0.5rem'\r\n    };\r\n\r\n    return (\r\n        <div style={containerStyle}>\r\n            <div style={headerStyle}>\r\n                <button onClick={() => navigate(-1)} style={{ background: 'transparent', border: 'none', color: '#fff', cursor: 'pointer', fontSize: '1.2rem' }}>\r\n                    <FaArrowLeft />\r\n                </button>\r\n                <h1 style={{ fontSize: '1.5rem', fontWeight: '600' }}>Legal & Guidelines</h1>\r\n            </div>\r\n\r\n            <div style={tabContainerStyle}>\r\n                <button onClick={() => setActiveTab('guidelines')} style={tabStyle(activeTab === 'guidelines')}>\r\n                    <FaShieldAlt /> Community Guidelines\r\n                </button>\r\n                <button onClick={() => setActiveTab('tos')} style={tabStyle(activeTab === 'tos')}>\r\n                    <FaGavel /> Terms of Service\r\n                </button>\r\n                <button onClick={() => setActiveTab('privacy')} style={tabStyle(activeTab === 'privacy')}>\r\n                    <FaUserShield /> Privacy Policy\r\n                </button>\r\n                <button onClick={() => setActiveTab('contact')} style={tabStyle(activeTab === 'contact')}>\r\n                    <FaShieldAlt /> Contact\r\n                </button>\r\n            </div>\r\n\r\n            <div style={sectionStyle}>\r\n                {activeTab === 'guidelines' && (\r\n                    <div className=\"fade-in\">\r\n                        <h2 style={h2Style}>Community Guidelines</h2>\r\n                        <p>Welcome to Panospace. We are an art-first community built for real artists, not influencers. Our mission is to highlight real human creativity, especially from young and undiscovered talent.</p>\r\n\r\n                        <h3 style={h3Style}>1. No Nudity or Sexual Content</h3>\r\n                        <p>We maintain a strict, safe environment for users 14+.</p>\r\n                        <ul style={ulStyle}>\r\n                            <li style={liStyle}><strong>No nudity of any kind.</strong></li>\r\n                            <li style={liStyle}>No pornographic, sexual, or suggestive content.</li>\r\n                        </ul>\r\n\r\n                        <h3 style={h3Style}>2. No AI Art</h3>\r\n                        <p>This platform is for human-made creative work only.</p>\r\n                        <ul style={ulStyle}>\r\n                            <li style={liStyle}><strong>No AI-generated artwork, images, edits, or composites.</strong></li>\r\n                            <li style={liStyle}>AI-generated content will be removed.</li>\r\n                        </ul>\r\n\r\n                        <h3 style={h3Style}>3. No Posting Art You Did Not Create</h3>\r\n                        <p><strong>ZERO TOLERANCE FOR ART THEFT.</strong></p>\r\n                        <ul style={ulStyle}>\r\n                            <li style={liStyle}>You may <strong>ONLY</strong> upload art you personally created.</li>\r\n                            <li style={liStyle}>No reposting, even with credit.</li>\r\n                            <li style={liStyle}>No screenshots of other people's work.</li>\r\n                            <li style={liStyle}>No \"sharing\" from Pinterest, Instagram, or Google.</li>\r\n                            <li style={liStyle}>No fan pages. Every post must be original.</li>\r\n                        </ul>\r\n                        <p style={{ color: '#ff4444', fontWeight: 'bold' }}>Violations will lead to immediate removal of posts and potential permanent account termination.</p>\r\n\r\n                        <h3 style={h3Style}>4. Respect & Community</h3>\r\n                        <ul style={ulStyle}>\r\n                            <li style={liStyle}>No harassment, bullying, discrimination, or hate speech.</li>\r\n                            <li style={liStyle}>No spam or irrelevant content.</li>\r\n                            <li style={liStyle}>No \"influencer-style\" content unrelated to art.</li>\r\n                            <li style={liStyle}>Respect the seriousness of the community. Promote growth and collaboration.</li>\r\n                        </ul>\r\n                    </div>\r\n                )}\r\n\r\n                {activeTab === 'tos' && (\r\n                    <div className=\"fade-in\">\r\n                        <h2 style={h2Style}>Terms of Service</h2>\r\n\r\n                        <h3 style={h3Style}>1. Acceptance of Terms</h3>\r\n                        <p>By accessing or using Panospace, you agree to be bound by these Terms. If you do not agree, you may not use the platform.</p>\r\n\r\n                        <h3 style={h3Style}>2. Age Requirement</h3>\r\n                        <p>You must be at least <strong>14 years old</strong> to use Panospace. By creating an account, you confirm you meet this age requirement. Parents are responsible for monitoring their minor's use of the platform.</p>\r\n\r\n                        <h3 style={h3Style}>3. User Content Rights</h3>\r\n                        <ul style={ulStyle}>\r\n                            <li style={liStyle}><strong>You retain full ownership and rights to your content.</strong></li>\r\n                            <li style={liStyle}>By posting, you grant Panospace a non-exclusive license to display your work on the platform.</li>\r\n                            <li style={liStyle}>We do not claim ownership of your artwork.</li>\r\n                        </ul>\r\n\r\n                        <h3 style={h3Style}>4. Prohibited Conduct</h3>\r\n                        <p>You agree NOT to:</p>\r\n                        <ul style={ulStyle}>\r\n                            <li style={liStyle}>Upload content you do not own (No Reposting).</li>\r\n                            <li style={liStyle}>Upload AI-generated content.</li>\r\n                            <li style={liStyle}>Upload nudity or sexual content.</li>\r\n                            <li style={liStyle}>Impersonate other artists.</li>\r\n                        </ul>\r\n\r\n                        <h3 style={h3Style}>5. Termination</h3>\r\n                        <p>We reserve the right to suspend or terminate accounts that violate these terms, particularly for repeat offenses regarding art theft, AI content, or inappropriate behavior.</p>\r\n\r\n                        <h3 style={h3Style}>6. Disclaimers & Liability</h3>\r\n                        <p>Panospace is provided \"as is\". We are not responsible for disputes between users or for the content posted by users. We disclaim all liability to the fullest extent permitted by law.</p>\r\n                    </div>\r\n                )}\r\n\r\n                {activeTab === 'privacy' && (\r\n                    <div className=\"fade-in\">\r\n                        <h2 style={h2Style}>Privacy Policy</h2>\r\n\r\n                        <h3 style={h3Style}>1. Data We Collect</h3>\r\n                        <p>We collect minimal data necessary to operate the platform:</p>\r\n                        <ul style={ulStyle}>\r\n                            <li style={liStyle}>Account info: Username, email address.</li>\r\n                            <li style={liStyle}>Content: Posts, likes, comments.</li>\r\n                            <li style={liStyle}>Technical: Device logs for security and debugging.</li>\r\n                        </ul>\r\n\r\n                        <h3 style={h3Style}>2. How We Use Your Data</h3>\r\n                        <p>We use your data solely to provide and improve the Panospace service. <strong>We do NOT sell your personal data to third parties.</strong></p>\r\n\r\n                        <h3 style={h3Style}>3. Data Security</h3>\r\n                        <p>We use industry-standard security measures to protect your information. However, no method of transmission over the internet is 100% secure.</p>\r\n\r\n                        <h3 style={h3Style}>4. Cookies & Tracking</h3>\r\n                        <p>We use cookies solely for authentication and session management. We do not use third-party tracking cookies for advertising purposes.</p>\r\n\r\n                        <h3 style={h3Style}>5. Your Rights</h3>\r\n                        <p>You have the right to access, correct, or delete your personal data. You can request account deletion at any time through your profile settings.</p>\r\n                    </div>\r\n                )}\r\n\r\n                {activeTab === 'contact' && (\r\n                    <div className=\"fade-in\">\r\n                        <h2 style={h2Style}>Contact & Support</h2>\r\n                        <p>If you have any questions, concerns, or need to report a violation, please contact us.</p>\r\n\r\n                        <div style={{ marginTop: '2rem', background: '#111', padding: '1.5rem', borderRadius: '12px', border: '1px solid #333' }}>\r\n                            <h3 style={{ ...h3Style, marginTop: 0 }}>General Support</h3>\r\n                            <p style={{ color: '#aaa' }}>For account issues, bugs, or feedback:</p>\r\n                            <a href=\"mailto:support@panospace.app\" style={{ color: '#fff', textDecoration: 'underline', fontSize: '1.1rem' }}>support@panospace.app</a>\r\n                        </div>\r\n\r\n                        <div style={{ marginTop: '1rem', background: '#111', padding: '1.5rem', borderRadius: '12px', border: '1px solid #333' }}>\r\n                            <h3 style={{ ...h3Style, marginTop: 0 }}>Legal & Safety</h3>\r\n                            <p style={{ color: '#aaa' }}>For DMCA takedowns, safety reports, or legal inquiries:</p>\r\n                            <a href=\"mailto:legal@panospace.app\" style={{ color: '#fff', textDecoration: 'underline', fontSize: '1.1rem' }}>legal@panospace.app</a>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Legal;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\pages\\Login.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useRef, useState } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport SEO from '@/components/SEO';\r\nimport StarBackground from '@/components/StarBackground';\r\n\r\nconst Login = () => {\r\n    const emailRef = useRef();\r\n    const passwordRef = useRef();\r\n    const { login, googleSignIn } = useAuth();\r\n    const [error, setError] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n    const navigate = useNavigate();\r\n\r\n    async function handleSubmit(e) {\r\n        e.preventDefault();\r\n\r\n        try {\r\n            setError('');\r\n            setLoading(true);\r\n            await login(emailRef.current.value, passwordRef.current.value);\r\n            navigate('/');\r\n        } catch (err) {\r\n            setError('Failed to log in: ' + err.message);\r\n        }\r\n\r\n        setLoading(false);\r\n    }\r\n\r\n    async function handleGoogleSignIn() {\r\n        try {\r\n            setError('');\r\n            setLoading(true);\r\n            await googleSignIn();\r\n            navigate('/');\r\n        } catch (err) {\r\n            setError('Failed to log in with Google: ' + err.message);\r\n        }\r\n        setLoading(false);\r\n    }\r\n\r\n    const containerStyle = {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        minHeight: '100vh',\r\n        width: '100vw',\r\n        background: 'radial-gradient(ellipse at center, rgba(20, 20, 40, 0.4) 0%, #000 70%)',\r\n        color: '#fff',\r\n        position: 'relative',\r\n        overflow: 'auto', // Changed from 'hidden' to allow scrolling\r\n        padding: '2rem 1rem' // Add padding for mobile landscape\r\n    };\r\n\r\n    const cardStyle = {\r\n        padding: '2.5rem',\r\n        borderRadius: '24px',\r\n        background: 'linear-gradient(135deg, rgba(15, 15, 20, 0.85) 0%, rgba(10, 10, 15, 0.75) 100%)',\r\n        backdropFilter: 'blur(40px) saturate(180%)',\r\n        border: '1px solid rgba(127, 255, 212, 0.15)',\r\n        boxShadow: `\r\n            0 0 60px rgba(127, 255, 212, 0.15),\r\n            0 0 120px rgba(76, 201, 240, 0.08),\r\n            0 20px 60px rgba(0, 0, 0, 0.6),\r\n            inset 0 1px 0 rgba(255, 255, 255, 0.1),\r\n            inset 0 -1px 0 rgba(127, 255, 212, 0.05)\r\n        `,\r\n        width: '100%',\r\n        maxWidth: '420px',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        gap: '1.75rem',\r\n        position: 'relative',\r\n        zIndex: 1,\r\n        animation: 'cardFadeIn 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards',\r\n        opacity: 0,\r\n        transform: 'translateY(20px)',\r\n        margin: 'auto' // Center in landscape\r\n    };\r\n\r\n    return (\r\n        <div style={containerStyle}>\r\n            <SEO title=\"Login\" />\r\n\r\n            {/* Animated Stars Background */}\r\n            <StarBackground />\r\n\r\n            {/* Galaxy Mist Layer */}\r\n            <div className=\"galaxy-mist\"></div>\r\n\r\n            <style>{`\r\n                /* Card Fade-In Animation */\r\n                @keyframes cardFadeIn {\r\n                    to {\r\n                        opacity: 1;\r\n                        transform: translateY(0);\r\n                    }\r\n                }\r\n\r\n                /* Ambient Glow Pulse */\r\n                @keyframes glowPulse {\r\n                    0%, 100% {\r\n                        box-shadow: \r\n                            0 0 60px rgba(127, 255, 212, 0.15),\r\n                            0 0 120px rgba(76, 201, 240, 0.08),\r\n                            0 20px 60px rgba(0, 0, 0, 0.6),\r\n                            inset 0 1px 0 rgba(255, 255, 255, 0.1),\r\n                            inset 0 -1px 0 rgba(127, 255, 212, 0.05);\r\n                    }\r\n                    50% {\r\n                        box-shadow: \r\n                            0 0 80px rgba(127, 255, 212, 0.2),\r\n                            0 0 140px rgba(76, 201, 240, 0.12),\r\n                            0 20px 60px rgba(0, 0, 0, 0.6),\r\n                            inset 0 1px 0 rgba(255, 255, 255, 0.15),\r\n                            inset 0 -1px 0 rgba(127, 255, 212, 0.08);\r\n                    }\r\n                }\r\n\r\n                /* Button Pulse */\r\n                @keyframes buttonPulse {\r\n                    0%, 100% {\r\n                        box-shadow: \r\n                            0 0 20px rgba(127, 255, 212, 0.3),\r\n                            0 0 40px rgba(127, 255, 212, 0.15),\r\n                            inset 0 1px 0 rgba(255, 255, 255, 0.3);\r\n                    }\r\n                    50% {\r\n                        box-shadow: \r\n                            0 0 30px rgba(127, 255, 212, 0.5),\r\n                            0 0 60px rgba(127, 255, 212, 0.25),\r\n                            inset 0 1px 0 rgba(255, 255, 255, 0.4);\r\n                    }\r\n                }\r\n\r\n                /* Premium Input Fields */\r\n                .y2k-input {\r\n                    padding: 1.1rem 1.2rem;\r\n                    border-radius: 14px;\r\n                    border: 1px solid rgba(127, 255, 212, 0.12);\r\n                    background: linear-gradient(135deg, rgba(0, 0, 0, 0.6) 0%, rgba(10, 10, 15, 0.5) 100%);\r\n                    color: #fff;\r\n                    font-size: 1rem;\r\n                    width: 100%;\r\n                    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\r\n                    outline: none;\r\n                    position: relative;\r\n                    box-shadow: \r\n                        inset 0 1px 3px rgba(0, 0, 0, 0.4),\r\n                        0 0 0 rgba(127, 255, 212, 0);\r\n                }\r\n\r\n                .y2k-input::placeholder {\r\n                    color: rgba(255, 255, 255, 0.35);\r\n                    font-weight: 300;\r\n                    letter-spacing: 0.5px;\r\n                }\r\n\r\n                .y2k-input:focus {\r\n                    border-color: rgba(127, 255, 212, 0.5);\r\n                    background: linear-gradient(135deg, rgba(5, 5, 10, 0.8) 0%, rgba(15, 15, 20, 0.7) 100%);\r\n                    box-shadow: \r\n                        inset 0 1px 3px rgba(0, 0, 0, 0.4),\r\n                        0 0 20px rgba(127, 255, 212, 0.15),\r\n                        0 0 40px rgba(127, 255, 212, 0.08),\r\n                        inset 0 0 30px rgba(127, 255, 212, 0.03);\r\n                    transform: translateY(-1px);\r\n                }\r\n\r\n                /* Premium Button */\r\n                .y2k-button {\r\n                    padding: 1.1rem 1.5rem;\r\n                    border-radius: 14px;\r\n                    border: none;\r\n                    background: linear-gradient(135deg, #7FFFD4 0%, #4CC9F0 50%, #7FFFD4 100%);\r\n                    background-size: 200% 100%;\r\n                    color: #000;\r\n                    font-size: 1rem;\r\n                    font-weight: 800;\r\n                    cursor: pointer;\r\n                    width: 100%;\r\n                    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\r\n                    box-shadow: \r\n                        0 0 20px rgba(127, 255, 212, 0.3),\r\n                        0 0 40px rgba(127, 255, 212, 0.15),\r\n                        inset 0 1px 0 rgba(255, 255, 255, 0.3);\r\n                    text-transform: uppercase;\r\n                    letter-spacing: 1.5px;\r\n                    position: relative;\r\n                    overflow: hidden;\r\n                    animation: buttonPulse 3s ease-in-out infinite;\r\n                }\r\n\r\n                .y2k-button::before {\r\n                    content: '';\r\n                    position: absolute;\r\n                    top: 0;\r\n                    left: -100%;\r\n                    width: 100%;\r\n                    height: 100%;\r\n                    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);\r\n                    transition: left 0.5s;\r\n                }\r\n\r\n                .y2k-button:hover:not(:disabled)::before {\r\n                    left: 100%;\r\n                }\r\n\r\n                .y2k-button:hover:not(:disabled) {\r\n                    transform: translateY(-2px);\r\n                    background-position: 100% 0;\r\n                    box-shadow: \r\n                        0 0 30px rgba(127, 255, 212, 0.5),\r\n                        0 0 60px rgba(127, 255, 212, 0.25),\r\n                        0 4px 20px rgba(0, 0, 0, 0.3),\r\n                        inset 0 1px 0 rgba(255, 255, 255, 0.4);\r\n                }\r\n\r\n                .y2k-button:active:not(:disabled) {\r\n                    transform: translateY(0);\r\n                }\r\n\r\n                .y2k-button:disabled {\r\n                    opacity: 0.5;\r\n                    cursor: not-allowed;\r\n                    filter: grayscale(0.8);\r\n                    animation: none;\r\n                }\r\n\r\n                /* Google Button */\r\n                .google-button {\r\n                    padding: 1.1rem 1.5rem;\r\n                    border-radius: 14px;\r\n                    border: 1px solid rgba(127, 255, 212, 0.12);\r\n                    background: linear-gradient(135deg, rgba(255, 255, 255, 0.05) 0%, rgba(255, 255, 255, 0.02) 100%);\r\n                    color: #fff;\r\n                    font-size: 1rem;\r\n                    font-weight: 600;\r\n                    cursor: pointer;\r\n                    width: 100%;\r\n                    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\r\n                    position: relative;\r\n                    box-shadow: \r\n                        inset 0 1px 0 rgba(255, 255, 255, 0.05),\r\n                        0 0 0 rgba(127, 255, 212, 0);\r\n                    letter-spacing: 0.5px;\r\n                }\r\n\r\n                .google-button:hover:not(:disabled) {\r\n                    background: linear-gradient(135deg, rgba(255, 255, 255, 0.08) 0%, rgba(255, 255, 255, 0.05) 100%);\r\n                    border-color: rgba(127, 255, 212, 0.3);\r\n                    box-shadow: \r\n                        inset 0 1px 0 rgba(255, 255, 255, 0.08),\r\n                        0 0 15px rgba(127, 255, 212, 0.1);\r\n                    transform: translateY(-1px);\r\n                }\r\n\r\n                .google-button:disabled {\r\n                    opacity: 0.5;\r\n                    cursor: not-allowed;\r\n                }\r\n\r\n                /* Galaxy Mist Background Layers */\r\n                .galaxy-mist {\r\n                    position: absolute;\r\n                    width: 100%;\r\n                    height: 100%;\r\n                    top: 0;\r\n                    left: 0;\r\n                    pointer-events: none;\r\n                    opacity: 0.3;\r\n                }\r\n\r\n                .galaxy-mist::before {\r\n                    content: '';\r\n                    position: absolute;\r\n                    width: 600px;\r\n                    height: 600px;\r\n                    top: 50%;\r\n                    left: 50%;\r\n                    transform: translate(-50%, -50%);\r\n                    background: radial-gradient(circle, rgba(127, 255, 212, 0.08) 0%, transparent 70%);\r\n                    filter: blur(80px);\r\n                    animation: galaxyPulse 8s ease-in-out infinite;\r\n                }\r\n\r\n                .galaxy-mist::after {\r\n                    content: '';\r\n                    position: absolute;\r\n                    width: 800px;\r\n                    height: 800px;\r\n                    top: 50%;\r\n                    left: 50%;\r\n                    transform: translate(-50%, -50%);\r\n                    background: radial-gradient(circle, rgba(76, 201, 240, 0.05) 0%, transparent 70%);\r\n                    filter: blur(100px);\r\n                    animation: galaxyPulse 10s ease-in-out infinite reverse;\r\n                }\r\n\r\n                @keyframes galaxyPulse {\r\n                    0%, 100% {\r\n                        opacity: 0.3;\r\n                        transform: translate(-50%, -50%) scale(1);\r\n                    }\r\n                    50% {\r\n                        opacity: 0.5;\r\n                        transform: translate(-50%, -50%) scale(1.1);\r\n                    }\r\n                }\r\n\r\n                /* Landscape Mobile Optimization */\r\n                @media (max-height: 500px) and (orientation: landscape) {\r\n                    /* Reduce card padding in landscape */\r\n                    .login-card {\r\n                        padding: 1.5rem !important;\r\n                        gap: 1rem !important;\r\n                        max-width: 90vw !important;\r\n                    }\r\n\r\n                    /* Smaller title in landscape */\r\n                    .login-title {\r\n                        font-size: 1.5rem !important;\r\n                        margin-bottom: 0.5rem !important;\r\n                    }\r\n\r\n                    /* Smaller subtitle */\r\n                    .login-subtitle {\r\n                        font-size: 0.7rem !important;\r\n                        margin-top: 0.25rem !important;\r\n                    }\r\n\r\n                    /* Compact inputs */\r\n                    .y2k-input {\r\n                        padding: 0.8rem 1rem !important;\r\n                        font-size: 0.9rem !important;\r\n                    }\r\n\r\n                    /* Compact buttons */\r\n                    .y2k-button, .google-button {\r\n                        padding: 0.8rem 1.2rem !important;\r\n                        font-size: 0.9rem !important;\r\n                    }\r\n\r\n                    /* Reduce form gap */\r\n                    .login-form {\r\n                        gap: 0.8rem !important;\r\n                    }\r\n                }\r\n            `}</style>\r\n\r\n            <div style={cardStyle} className=\"login-card\">\r\n                {/* Holographic Card Accent */}\r\n                <div style={{\r\n                    position: 'absolute',\r\n                    top: '-1px',\r\n                    left: '-1px',\r\n                    right: '-1px',\r\n                    bottom: '-1px',\r\n                    borderRadius: '24px',\r\n                    background: 'linear-gradient(135deg, rgba(127, 255, 212, 0.1) 0%, transparent 20%, transparent 80%, rgba(76, 201, 240, 0.1) 100%)',\r\n                    pointerEvents: 'none',\r\n                    zIndex: -1\r\n                }}></div>\r\n\r\n                <div style={{ textAlign: 'center', marginBottom: '1rem', width: '100%', overflow: 'hidden' }}>\r\n                    <h2 className=\"login-title\" style={{\r\n                        fontSize: 'clamp(1.75rem, 6vw, 2.5rem)',\r\n                        fontWeight: '800',\r\n                        margin: 0,\r\n                        background: 'linear-gradient(135deg, #fff 0%, #aaa 100%)',\r\n                        WebkitBackgroundClip: 'text',\r\n                        WebkitTextFillColor: 'transparent',\r\n                        letterSpacing: 'clamp(0px, 0.5vw, 2px)',\r\n                        whiteSpace: 'nowrap',\r\n                        overflow: 'hidden',\r\n                        textOverflow: 'ellipsis',\r\n                        width: '100%'\r\n                    }}>\r\n                        PANOSPACE\r\n                    </h2>\r\n                    <h3 className=\"login-subtitle\" style={{\r\n                        fontSize: 'clamp(0.75rem, 3vw, 1rem)',\r\n                        color: '#7FFFD4',\r\n                        margin: '0.5rem 0 0 0',\r\n                        fontWeight: '400',\r\n                        letterSpacing: 'clamp(1px, 0.5vw, 2px)',\r\n                        textTransform: 'uppercase',\r\n                        opacity: 0.8\r\n                    }}>\r\n                        Enter the Visual Universe\r\n                    </h3>\r\n                </div>\r\n\r\n                {error && <div style={{\r\n                    padding: '0.75rem',\r\n                    background: 'rgba(255, 107, 107, 0.1)',\r\n                    border: '1px solid rgba(255, 107, 107, 0.3)',\r\n                    borderRadius: '8px',\r\n                    color: '#ff6b6b',\r\n                    textAlign: 'center',\r\n                    fontSize: '0.9rem'\r\n                }}>{error}</div>}\r\n\r\n                <form onSubmit={handleSubmit} className=\"login-form\" style={{ display: 'flex', flexDirection: 'column', gap: '1.2rem' }}>\r\n                    <input\r\n                        type=\"email\"\r\n                        ref={emailRef}\r\n                        required\r\n                        placeholder=\"Email\"\r\n                        className=\"y2k-input\"\r\n                    />\r\n                    <input\r\n                        type=\"password\"\r\n                        ref={passwordRef}\r\n                        required\r\n                        placeholder=\"Password\"\r\n                        className=\"y2k-input\"\r\n                    />\r\n                    <button disabled={loading} type=\"submit\" className=\"y2k-button\">\r\n                        {loading ? 'Logging In...' : 'Log In'}\r\n                    </button>\r\n                </form>\r\n\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: '1rem', color: 'rgba(127, 255, 212, 0.15)' }}>\r\n                    <div style={{ flex: 1, height: '1px', background: 'linear-gradient(90deg, transparent, rgba(127, 255, 212, 0.2), transparent)' }}></div>\r\n                    <span style={{ fontSize: '0.75rem', textTransform: 'uppercase', letterSpacing: '1.5px', color: 'rgba(255, 255, 255, 0.3)' }}>or</span>\r\n                    <div style={{ flex: 1, height: '1px', background: 'linear-gradient(90deg, transparent, rgba(127, 255, 212, 0.2), transparent)' }}></div>\r\n                </div>\r\n\r\n                <button disabled={loading} onClick={handleGoogleSignIn} className=\"google-button\">\r\n                    Continue with Google\r\n                </button>\r\n\r\n                <div style={{ textAlign: 'center', marginTop: '1rem', fontSize: '0.9rem', color: '#888' }}>\r\n                    Need an account? <Link to=\"/signup\" style={{ color: '#7FFFD4', textDecoration: 'none', fontWeight: 'bold' }}>Sign Up</Link>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Login;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\pages\\MagazineCuration.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaUsers' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":50,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":57},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadData'. Either include it or remove the dependency array.","line":23,"column":8,"nodeType":"ArrayExpression","endLine":23,"endColumn":29,"suggestions":[{"desc":"Update the dependencies array to be: [magazineId, issueId, loadData]","fix":{"range":[1106,1127],"text":"[magazineId, issueId, loadData]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { getMagazine, getMagazineIssue } from '@/services/magazineService';\r\nimport { getIssueSubmissions, updateSubmissionStatus, approveSubmissionImages } from '@/services/submissionService';\r\nimport { notifySubmissionApproved, notifySubmissionRejected } from '@/services/notificationService';\r\nimport { FaArrowLeft, FaCheck, FaTimes, FaImage, FaUsers, FaClock } from 'react-icons/fa';\r\n\r\nconst MagazineCuration = () => {\r\n    const { magazineId, issueId } = useParams();\r\n    const navigate = useNavigate();\r\n    const { currentUser } = useAuth();\r\n\r\n    const [magazine, setMagazine] = useState(null);\r\n    const [issue, setIssue] = useState(null);\r\n    const [submissions, setSubmissions] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [selectedImages, setSelectedImages] = useState(new Set());\r\n    const [processing, setProcessing] = useState(false);\r\n\r\n    useEffect(() => {\r\n        loadData();\r\n    }, [magazineId, issueId]);\r\n\r\n    const loadData = async () => {\r\n        try {\r\n            setLoading(true);\r\n\r\n            // Load magazine\r\n            const mag = await getMagazine(magazineId);\r\n\r\n            // Check ownership\r\n            if (mag.ownerId !== currentUser?.uid) {\r\n                alert('You do not have permission to curate this magazine');\r\n                navigate(`/magazine/${magazineId}`);\r\n                return;\r\n            }\r\n\r\n            setMagazine(mag);\r\n\r\n            // Load issue\r\n            const iss = await getMagazineIssue(issueId);\r\n            setIssue(iss);\r\n\r\n            // Load submissions\r\n            const subs = await getIssueSubmissions(issueId);\r\n            setSubmissions(subs);\r\n        } catch (err) {\r\n            console.error('Error loading data:', err);\r\n            alert('Failed to load submissions');\r\n            navigate(`/magazine/${magazineId}`);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const toggleImageSelection = (submissionId, imageIndex) => {\r\n        const key = `${submissionId}-${imageIndex}`;\r\n        const newSelected = new Set(selectedImages);\r\n\r\n        if (newSelected.has(key)) {\r\n            newSelected.delete(key);\r\n        } else {\r\n            newSelected.add(key);\r\n        }\r\n\r\n        setSelectedImages(newSelected);\r\n    };\r\n\r\n    const isImageSelected = (submissionId, imageIndex) => {\r\n        return selectedImages.has(`${submissionId}-${imageIndex}`);\r\n    };\r\n\r\n    const handleApproveSubmission = async (submissionId) => {\r\n        try {\r\n            setProcessing(true);\r\n\r\n            // Get selected images for this submission\r\n            const selectedForSubmission = Array.from(selectedImages)\r\n                .filter(key => key.startsWith(`${submissionId}-`))\r\n                .map(key => parseInt(key.split('-')[1]));\r\n\r\n            if (selectedForSubmission.length === 0) {\r\n                alert('Please select at least one image to approve');\r\n                return;\r\n            }\r\n\r\n            await approveSubmissionImages(submissionId, selectedForSubmission);\r\n\r\n            // Notify contributor\r\n            const submission = submissions.find(s => s.id === submissionId);\r\n            if (submission) {\r\n                await notifySubmissionApproved(submission.userId, magazine.title, issue.issueNumber);\r\n            }\r\n\r\n            await loadData();\r\n\r\n            // Clear selections for this submission\r\n            const newSelected = new Set(\r\n                Array.from(selectedImages).filter(key => !key.startsWith(`${submissionId}-`))\r\n            );\r\n            setSelectedImages(newSelected);\r\n        } catch (err) {\r\n            console.error('Error approving submission:', err);\r\n            alert('Failed to approve submission');\r\n        } finally {\r\n            setProcessing(false);\r\n        }\r\n    };\r\n\r\n    const handleRejectSubmission = async (submissionId) => {\r\n        if (!confirm('Are you sure you want to reject this submission?')) return;\r\n\r\n        try {\r\n            setProcessing(true);\r\n\r\n            // Get submission for notification\r\n            const submission = submissions.find(s => s.id === submissionId);\r\n\r\n            await updateSubmissionStatus(submissionId, 'rejected');\r\n\r\n            // Notify contributor\r\n            if (submission) {\r\n                await notifySubmissionRejected(submission.userId, magazine.title, issue.issueNumber);\r\n            }\r\n\r\n            await loadData();\r\n        } catch (err) {\r\n            console.error('Error rejecting submission:', err);\r\n            alert('Failed to reject submission');\r\n        } finally {\r\n            setProcessing(false);\r\n        }\r\n    };\r\n\r\n    const getSubmissionStats = () => {\r\n        const total = submissions.length;\r\n        const pending = submissions.filter(s => s.status === 'pending').length;\r\n        const approved = submissions.filter(s => s.status === 'approved').length;\r\n        const rejected = submissions.filter(s => s.status === 'rejected').length;\r\n\r\n        return { total, pending, approved, rejected };\r\n    };\r\n\r\n    if (loading) {\r\n        return (\r\n            <div style={{ height: '100vh', display: 'flex', alignItems: 'center', justifyContent: 'center', color: '#fff', background: '#000' }}>\r\n                Loading submissions...\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const stats = getSubmissionStats();\r\n    const pendingSubmissions = submissions.filter(s => s.status === 'pending');\r\n\r\n    return (\r\n        <div style={{ minHeight: '100vh', background: '#000', color: '#fff', paddingBottom: '4rem' }}>\r\n            {/* Header */}\r\n            <div style={{\r\n                padding: '1rem 2rem',\r\n                borderBottom: '1px solid #333',\r\n                position: 'sticky',\r\n                top: 0,\r\n                background: '#000',\r\n                zIndex: 100\r\n            }}>\r\n                <button\r\n                    onClick={() => navigate(`/magazine/${magazineId}`)}\r\n                    style={{\r\n                        background: 'transparent',\r\n                        border: 'none',\r\n                        color: '#888',\r\n                        cursor: 'pointer',\r\n                        fontSize: '1rem',\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        gap: '0.5rem',\r\n                        marginBottom: '1rem'\r\n                    }}\r\n                >\r\n                    <FaArrowLeft /> Back to Magazine\r\n                </button>\r\n\r\n                <h1 style={{ fontSize: '1.5rem', margin: '0 0 0.5rem 0' }}>\r\n                    Curate Issue #{issue?.issueNumber}\r\n                </h1>\r\n                <p style={{ margin: 0, color: '#888' }}>{magazine?.title}</p>\r\n            </div>\r\n\r\n            <div style={{ maxWidth: '1400px', margin: '0 auto', padding: '2rem' }}>\r\n                {/* Stats */}\r\n                <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))', gap: '1rem', marginBottom: '2rem' }}>\r\n                    <div style={{ background: '#111', border: '1px solid #333', borderRadius: '12px', padding: '1.5rem' }}>\r\n                        <div style={{ fontSize: '2rem', fontWeight: 'bold', color: '#7FFFD4' }}>{stats.total}</div>\r\n                        <div style={{ color: '#888', fontSize: '0.9rem' }}>Total Submissions</div>\r\n                    </div>\r\n                    <div style={{ background: '#111', border: '1px solid #333', borderRadius: '12px', padding: '1.5rem' }}>\r\n                        <div style={{ fontSize: '2rem', fontWeight: 'bold', color: '#ffaa00' }}>{stats.pending}</div>\r\n                        <div style={{ color: '#888', fontSize: '0.9rem' }}>Pending Review</div>\r\n                    </div>\r\n                    <div style={{ background: '#111', border: '1px solid #333', borderRadius: '12px', padding: '1.5rem' }}>\r\n                        <div style={{ fontSize: '2rem', fontWeight: 'bold', color: '#7FFFD4' }}>{stats.approved}</div>\r\n                        <div style={{ color: '#888', fontSize: '0.9rem' }}>Approved</div>\r\n                    </div>\r\n                    <div style={{ background: '#111', border: '1px solid #333', borderRadius: '12px', padding: '1.5rem' }}>\r\n                        <div style={{ fontSize: '2rem', fontWeight: 'bold', color: '#ff4444' }}>{stats.rejected}</div>\r\n                        <div style={{ color: '#888', fontSize: '0.9rem' }}>Rejected</div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Submissions */}\r\n                {pendingSubmissions.length === 0 ? (\r\n                    <div style={{\r\n                        textAlign: 'center',\r\n                        padding: '4rem',\r\n                        background: '#111',\r\n                        border: '1px solid #333',\r\n                        borderRadius: '12px'\r\n                    }}>\r\n                        <FaImage style={{ fontSize: '3rem', color: '#666', marginBottom: '1rem' }} />\r\n                        <h3 style={{ margin: '0 0 0.5rem 0', color: '#888' }}>No Pending Submissions</h3>\r\n                        <p style={{ margin: 0, color: '#666' }}>\r\n                            {stats.total === 0 ? 'No submissions received yet' : 'All submissions have been reviewed'}\r\n                        </p>\r\n                    </div>\r\n                ) : (\r\n                    <div style={{ display: 'flex', flexDirection: 'column', gap: '2rem' }}>\r\n                        {pendingSubmissions.map(submission => (\r\n                            <div\r\n                                key={submission.id}\r\n                                style={{\r\n                                    background: '#111',\r\n                                    border: '1px solid #333',\r\n                                    borderRadius: '12px',\r\n                                    padding: '1.5rem'\r\n                                }}\r\n                            >\r\n                                {/* Submission Header */}\r\n                                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '1.5rem' }}>\r\n                                    <div>\r\n                                        <h3 style={{ margin: '0 0 0.25rem 0', fontSize: '1.2rem' }}>\r\n                                            {submission.userName}\r\n                                        </h3>\r\n                                        <div style={{ display: 'flex', gap: '1rem', fontSize: '0.9rem', color: '#888' }}>\r\n                                            <span style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                                                <FaImage /> {submission.images?.length || 0} images\r\n                                            </span>\r\n                                            <span style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                                                <FaClock /> {submission.submittedAt?.toDate ? submission.submittedAt.toDate().toLocaleDateString() : 'Unknown'}\r\n                                            </span>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div style={{ display: 'flex', gap: '0.5rem' }}>\r\n                                        <button\r\n                                            onClick={() => handleApproveSubmission(submission.id)}\r\n                                            disabled={processing}\r\n                                            style={{\r\n                                                background: '#7FFFD4',\r\n                                                color: '#000',\r\n                                                border: 'none',\r\n                                                padding: '0.5rem 1.5rem',\r\n                                                borderRadius: '8px',\r\n                                                fontWeight: 'bold',\r\n                                                cursor: processing ? 'not-allowed' : 'pointer',\r\n                                                display: 'flex',\r\n                                                alignItems: 'center',\r\n                                                gap: '0.5rem',\r\n                                                opacity: processing ? 0.5 : 1\r\n                                            }}\r\n                                        >\r\n                                            <FaCheck /> Approve Selected\r\n                                        </button>\r\n                                        <button\r\n                                            onClick={() => handleRejectSubmission(submission.id)}\r\n                                            disabled={processing}\r\n                                            style={{\r\n                                                background: 'rgba(255, 68, 68, 0.2)',\r\n                                                color: '#ff4444',\r\n                                                border: '1px solid rgba(255, 68, 68, 0.5)',\r\n                                                padding: '0.5rem 1.5rem',\r\n                                                borderRadius: '8px',\r\n                                                fontWeight: 'bold',\r\n                                                cursor: processing ? 'not-allowed' : 'pointer',\r\n                                                display: 'flex',\r\n                                                alignItems: 'center',\r\n                                                gap: '0.5rem',\r\n                                                opacity: processing ? 0.5 : 1\r\n                                            }}\r\n                                        >\r\n                                            <FaTimes /> Reject All\r\n                                        </button>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                {/* Images Grid */}\r\n                                <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(200px, 1fr))', gap: '1rem' }}>\r\n                                    {submission.images?.map((image, index) => (\r\n                                        <div\r\n                                            key={index}\r\n                                            onClick={() => toggleImageSelection(submission.id, index)}\r\n                                            style={{\r\n                                                position: 'relative',\r\n                                                cursor: 'pointer',\r\n                                                border: isImageSelected(submission.id, index) ? '3px solid #7FFFD4' : '1px solid #333',\r\n                                                borderRadius: '8px',\r\n                                                overflow: 'hidden',\r\n                                                transition: 'all 0.2s'\r\n                                            }}\r\n                                        >\r\n                                            <div style={{\r\n                                                aspectRatio: '1',\r\n                                                background: `url(${image.imageUrl})`,\r\n                                                backgroundSize: 'cover',\r\n                                                backgroundPosition: 'center'\r\n                                            }} />\r\n\r\n                                            {isImageSelected(submission.id, index) && (\r\n                                                <div style={{\r\n                                                    position: 'absolute',\r\n                                                    top: '8px',\r\n                                                    right: '8px',\r\n                                                    background: '#7FFFD4',\r\n                                                    color: '#000',\r\n                                                    borderRadius: '50%',\r\n                                                    width: '32px',\r\n                                                    height: '32px',\r\n                                                    display: 'flex',\r\n                                                    alignItems: 'center',\r\n                                                    justifyContent: 'center',\r\n                                                    fontWeight: 'bold'\r\n                                                }}>\r\n                                                    <FaCheck />\r\n                                                </div>\r\n                                            )}\r\n\r\n                                            {image.caption && (\r\n                                                <div style={{\r\n                                                    position: 'absolute',\r\n                                                    bottom: 0,\r\n                                                    left: 0,\r\n                                                    right: 0,\r\n                                                    background: 'rgba(0,0,0,0.8)',\r\n                                                    padding: '0.5rem',\r\n                                                    fontSize: '0.85rem',\r\n                                                    color: '#ccc'\r\n                                                }}>\r\n                                                    {image.caption}\r\n                                                </div>\r\n                                            )}\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default MagazineCuration;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\pages\\MagazineView.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { useMagazine } from '@/hooks/useMagazine';\r\nimport { FaArrowLeft, FaBook, FaClock, FaCalendar, FaImage, FaUsers, FaEye } from 'react-icons/fa';\r\nimport SEO from '@/components/SEO';\r\nimport StarBackground from '@/components/StarBackground';\r\nimport { PageSkeleton } from '@/components/ui/Skeleton';\r\n\r\nconst MagazineView = () => {\r\n    const { id } = useParams();\r\n    const navigate = useNavigate();\r\n    const { currentUser } = useAuth();\r\n\r\n    // Use custom hook for magazine data\r\n    const { magazine, issues, loading, error } = useMagazine(id);\r\n\r\n    const formatReleaseFrequency = (frequency) => {\r\n        return frequency === 'monthly' ? 'Monthly' : 'Bi-Monthly';\r\n    };\r\n\r\n    const formatNextReleaseDate = (date) => {\r\n        if (!date) return 'Not scheduled';\r\n        const releaseDate = date.toDate ? date.toDate() : new Date(date);\r\n        return releaseDate.toLocaleDateString('en-US', {\r\n            month: 'long',\r\n            day: 'numeric',\r\n            year: 'numeric',\r\n            hour: '2-digit',\r\n            minute: '2-digit'\r\n        });\r\n    };\r\n\r\n    const isOwner = magazine?.ownerId === currentUser?.uid;\r\n\r\n    if (loading) return <PageSkeleton />;\r\n    if (error || !magazine) return <div style={{ height: '100vh', display: 'flex', alignItems: 'center', justifyContent: 'center', color: '#fff' }}>{error || 'Magazine not found'}</div>;\r\n\r\n    return (\r\n        <div style={{ minHeight: '100vh', background: '#000', color: '#fff', paddingBottom: '4rem', position: 'relative', overflow: 'hidden' }}>\r\n            <SEO title={magazine.title} description={magazine.description} />\r\n            <StarBackground />\r\n\r\n            {/* Hero Section */}\r\n            <div style={{ position: 'relative', height: '40vh', minHeight: '300px' }}>\r\n                <div style={{ position: 'absolute', inset: 0 }}>\r\n                    {magazine.coverImage ? (\r\n                        <img src={magazine.coverImage} alt={magazine.title} style={{ width: '100%', height: '100%', objectFit: 'cover' }} />\r\n                    ) : (\r\n                        <div style={{ width: '100%', height: '100%', background: 'linear-gradient(135deg, #1a1a2e 0%, #16213e 100%)' }} />\r\n                    )}\r\n                    <div style={{ position: 'absolute', inset: 0, background: 'linear-gradient(to bottom, rgba(0,0,0,0.3), #000)' }} />\r\n                </div>\r\n\r\n                <div style={{ position: 'absolute', top: '20px', left: '20px', zIndex: 10 }}>\r\n                    <button onClick={() => navigate(-1)} style={{ background: 'rgba(0,0,0,0.5)', border: 'none', color: '#fff', padding: '10px', borderRadius: '50%', cursor: 'pointer', backdropFilter: 'blur(4px)' }}>\r\n                        <FaArrowLeft />\r\n                    </button>\r\n                </div>\r\n\r\n                {isOwner && (\r\n                    <div style={{ position: 'absolute', top: '20px', right: '20px', zIndex: 10 }}>\r\n                        <button\r\n                            onClick={() => navigate(`/magazine/${id}/create-issue`)}\r\n                            style={{\r\n                                background: '#7FFFD4',\r\n                                color: '#000',\r\n                                border: 'none',\r\n                                padding: '0.5rem 1.5rem',\r\n                                borderRadius: '20px',\r\n                                fontWeight: 'bold',\r\n                                cursor: 'pointer',\r\n                                display: 'flex',\r\n                                alignItems: 'center',\r\n                                gap: '0.5rem'\r\n                            }}\r\n                        >\r\n                            <FaImage /> Create Issue\r\n                        </button>\r\n                    </div>\r\n                )}\r\n\r\n                <div className=\"container-md\" style={{ position: 'absolute', bottom: 0, left: 0, right: 0 }}>\r\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '1rem', marginBottom: '0.5rem', color: '#7FFFD4' }}>\r\n                        <FaBook size={24} />\r\n                        <span style={{ textTransform: 'uppercase', letterSpacing: '2px', fontWeight: 'bold', fontSize: '0.9rem' }}>Magazine</span>\r\n                    </div>\r\n                    <h1 style={{ fontSize: '3rem', fontWeight: 'bold', margin: '0 0 1rem 0', textShadow: '0 2px 10px rgba(0,0,0,0.5)' }}>{magazine.title}</h1>\r\n                    <p style={{ fontSize: '1.1rem', color: '#ccc', maxWidth: '600px', lineHeight: '1.6' }}>{magazine.description}</p>\r\n\r\n                    <div style={{ display: 'flex', gap: '1rem', marginTop: '1.5rem', flexWrap: 'wrap' }}>\r\n                        <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', background: 'rgba(255,255,255,0.1)', padding: '0.5rem 1rem', borderRadius: '20px', backdropFilter: 'blur(4px)' }}>\r\n                            <FaClock style={{ color: '#7FFFD4' }} />\r\n                            <span>{formatReleaseFrequency(magazine.releaseFrequency)}</span>\r\n                        </div>\r\n                        <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', background: 'rgba(255,255,255,0.1)', padding: '0.5rem 1rem', borderRadius: '20px', backdropFilter: 'blur(4px)' }}>\r\n                            <FaCalendar style={{ color: '#7FFFD4' }} />\r\n                            <span>Next: {formatNextReleaseDate(magazine.nextReleaseDate)}</span>\r\n                        </div>\r\n                        <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', background: 'rgba(255,255,255,0.1)', padding: '0.5rem 1rem', borderRadius: '20px', backdropFilter: 'blur(4px)' }}>\r\n                            <FaBook style={{ color: '#7FFFD4' }} />\r\n                            <span>{magazine.issueCount || 0} Issues</span>\r\n                        </div>\r\n                        {magazine.collaborationEnabled && (\r\n                            <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', background: 'rgba(127, 255, 212, 0.2)', padding: '0.5rem 1rem', borderRadius: '20px', backdropFilter: 'blur(4px)', border: '1px solid #7FFFD4' }}>\r\n                                <FaUsers style={{ color: '#7FFFD4' }} />\r\n                                <span style={{ color: '#7FFFD4' }}>Collaborative</span>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Content Section */}\r\n            <div className=\"container-md\" style={{ padding: '2rem 1rem' }}>\r\n                {issues.length === 0 ? (\r\n                    <div style={{ textAlign: 'center', padding: '4rem', color: '#666' }}>\r\n                        <FaBook size={48} style={{ marginBottom: '1rem', opacity: 0.5 }} />\r\n                        <p>No issues yet.</p>\r\n                        {isOwner && (\r\n                            <button\r\n                                onClick={() => navigate(`/magazine/${id}/create-issue`)}\r\n                                style={{\r\n                                    marginTop: '1rem',\r\n                                    background: '#7FFFD4',\r\n                                    color: '#000',\r\n                                    border: 'none',\r\n                                    padding: '0.75rem 2rem',\r\n                                    borderRadius: '20px',\r\n                                    fontWeight: 'bold',\r\n                                    cursor: 'pointer'\r\n                                }}\r\n                            >\r\n                                Create Your First Issue\r\n                            </button>\r\n                        )}\r\n                    </div>\r\n                ) : (\r\n                    <div>\r\n                        <h2 style={{ marginBottom: '1.5rem' }}>Issues</h2>\r\n                        <div style={{ display: 'flex', flexDirection: 'column', gap: '1rem' }}>\r\n                            {issues.map(issue => (\r\n                                <div\r\n                                    key={issue.id}\r\n                                    style={{\r\n                                        background: '#111',\r\n                                        border: '1px solid #333',\r\n                                        borderRadius: '12px',\r\n                                        padding: '1.5rem',\r\n                                        display: 'flex',\r\n                                        justifyContent: 'space-between',\r\n                                        alignItems: 'center'\r\n                                    }}\r\n                                >\r\n                                    <div>\r\n                                        <h3 style={{ margin: '0 0 0.5rem 0', fontSize: '1.2rem' }}>\r\n                                            Issue #{issue.issueNumber}\r\n                                        </h3>\r\n                                        <div style={{ display: 'flex', gap: '1rem', fontSize: '0.9rem', color: '#888' }}>\r\n                                            <span>{issue.slides?.length || 0} slides</span>\r\n                                            <span>ΓÇó</span>\r\n                                            <span style={{\r\n                                                color: issue.status === 'published' ? '#7FFFD4' :\r\n                                                    issue.status === 'queued' ? '#ffaa00' : '#888'\r\n                                            }}>\r\n                                                {issue.status === 'published' ? 'Published' :\r\n                                                    issue.status === 'queued' ? 'Queued' : 'Draft'}\r\n                                            </span>\r\n                                            {issue.scheduledPublishDate && (\r\n                                                <>\r\n                                                    <span>ΓÇó</span>\r\n                                                    <span>\r\n                                                        {issue.status === 'queued' ? 'Publishes' : 'Published'} {\r\n                                                            issue.scheduledPublishDate.toDate ?\r\n                                                                issue.scheduledPublishDate.toDate().toLocaleDateString() :\r\n                                                                'Unknown'\r\n                                                        }\r\n                                                    </span>\r\n                                                </>\r\n                                            )}\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    {isOwner && issue.status === 'queued' && (\r\n                                        <button\r\n                                            onClick={() => navigate(`/magazine/${id}/issue/${issue.id}/curate`)}\r\n                                            style={{\r\n                                                background: 'rgba(127, 255, 212, 0.2)',\r\n                                                color: '#7FFFD4',\r\n                                                border: '1px solid #7FFFD4',\r\n                                                padding: '0.5rem 1.5rem',\r\n                                                borderRadius: '8px',\r\n                                                fontWeight: 'bold',\r\n                                                cursor: 'pointer',\r\n                                                display: 'flex',\r\n                                                alignItems: 'center',\r\n                                                gap: '0.5rem'\r\n                                            }}\r\n                                        >\r\n                                            <FaEye /> Review Submissions\r\n                                        </button>\r\n                                    )}\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default MagazineView;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\pages\\MigrateDates.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { migrateDateFormats } from '@/core/utils/dates';\r\nimport { useAuth } from '@/context/AuthContext';\r\n\r\n/**\r\n * Admin utility page to migrate date formats in existing posts\r\n * This converts old \"MM.DD.YY\" format to new \"D M 'Y\" format\r\n */\r\nconst MigrateDates = () => {\r\n    const { currentUser } = useAuth();\r\n    const [status, setStatus] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n    const [result, setResult] = useState(null);\r\n\r\n    const handleMigration = async () => {\r\n        if (!window.confirm('This will update all posts with old date formats. Continue?')) {\r\n            return;\r\n        }\r\n\r\n        setLoading(true);\r\n        setStatus('Running migration...');\r\n\r\n        try {\r\n            const result = await migrateDateFormats();\r\n            setResult(result);\r\n\r\n            if (result.success) {\r\n                setStatus(`Γ£à Migration complete! Updated ${result.updated} posts, skipped ${result.skipped} posts.`);\r\n            } else {\r\n                setStatus(`Γ¥î Migration failed: ${result.error}`);\r\n            }\r\n        } catch (error) {\r\n            setStatus(`Γ¥î Error: ${error.message}`);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    if (!currentUser) {\r\n        return (\r\n            <div style={{ padding: '2rem', color: '#fff' }}>\r\n                <h2>Please log in to access this page</h2>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div style={{\r\n            padding: '2rem',\r\n            maxWidth: '800px',\r\n            margin: '0 auto',\r\n            color: '#fff'\r\n        }}>\r\n            <h1>Date Format Migration</h1>\r\n            <p>This tool will update all existing posts to use the new date format:</p>\r\n            <ul>\r\n                <li><strong>Old format:</strong> MM.DD.YY (e.g., \"11.30.24\")</li>\r\n                <li><strong>New format:</strong> D M 'Y (e.g., \"30 11 '24\")</li>\r\n            </ul>\r\n\r\n            <button\r\n                onClick={handleMigration}\r\n                disabled={loading}\r\n                style={{\r\n                    padding: '1rem 2rem',\r\n                    fontSize: '1rem',\r\n                    background: loading ? '#666' : '#7FFFD4',\r\n                    color: '#000',\r\n                    border: 'none',\r\n                    borderRadius: '8px',\r\n                    cursor: loading ? 'not-allowed' : 'pointer',\r\n                    fontWeight: 'bold',\r\n                    marginTop: '1rem'\r\n                }}\r\n            >\r\n                {loading ? 'Migrating...' : 'Run Migration'}\r\n            </button>\r\n\r\n            {status && (\r\n                <div style={{\r\n                    marginTop: '2rem',\r\n                    padding: '1rem',\r\n                    background: 'rgba(255,255,255,0.1)',\r\n                    borderRadius: '8px',\r\n                    whiteSpace: 'pre-wrap'\r\n                }}>\r\n                    {status}\r\n                </div>\r\n            )}\r\n\r\n            {result && result.success && (\r\n                <div style={{\r\n                    marginTop: '1rem',\r\n                    padding: '1rem',\r\n                    background: 'rgba(127, 255, 212, 0.1)',\r\n                    border: '1px solid #7FFFD4',\r\n                    borderRadius: '8px'\r\n                }}>\r\n                    <h3>Migration Summary:</h3>\r\n                    <p>Γ£à Updated: {result.updated} posts</p>\r\n                    <p>ΓÅ¡∩╕Å Skipped: {result.skipped} posts</p>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default MigrateDates;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\pages\\MuseumPage.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaMapMarkerAlt' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":37},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaCalendar' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":39,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":49},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'GridPostCard' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":20},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadMuseum'. Either include it or remove the dependency array.","line":19,"column":8,"nodeType":"ArrayExpression","endLine":19,"endColumn":18,"suggestions":[{"desc":"Update the dependencies array to be: [loadMuseum, museumId]","fix":{"range":[792,802],"text":"[loadMuseum, museumId]"}}]},{"ruleId":"react/jsx-no-undef","severity":2,"message":"'FaUniversity' is not defined.","line":349,"column":26,"nodeType":"JSXIdentifier","messageId":"undefined","endLine":349,"endColumn":38},{"ruleId":"no-undef","severity":1,"message":"'FaUniversity' is not defined.","line":349,"column":26,"nodeType":"JSXIdentifier","messageId":"undef","endLine":349,"endColumn":38}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { doc, getDoc } from 'firebase/firestore';\r\nimport { db } from '@/firebase';\r\nimport { FaArrowLeft, FaMapMarkerAlt, FaCalendar, FaImage, FaUser, FaClock } from 'react-icons/fa';\r\nimport GridPostCard from '@/components/GridPostCard';\r\n\r\nconst MuseumPage = () => {\r\n    const { museumId } = useParams();\r\n    const navigate = useNavigate();\r\n    const [museum, setMuseum] = useState(null);\r\n    const [studios, setStudios] = useState([]); // Renamed from galleries\r\n    const [profiles, setProfiles] = useState([]);\r\n    const [exhibits, setExhibits] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        loadMuseum();\r\n    }, [museumId]);\r\n\r\n    const loadMuseum = async () => {\r\n        try {\r\n            // Try fetching from collections first (new standard)\r\n            let museumDoc = await getDoc(doc(db, 'collections', museumId));\r\n\r\n            // Fallback to museums collection if not found (legacy/partner support)\r\n            if (!museumDoc.exists()) {\r\n                museumDoc = await getDoc(doc(db, 'museums', museumId));\r\n            }\r\n\r\n            if (museumDoc.exists()) {\r\n                const data = museumDoc.data();\r\n                setMuseum({ id: museumDoc.id, ...data });\r\n\r\n                // Fetch referenced studios (formerly galleries)\r\n                if (data.galleryIds && data.galleryIds.length > 0) {\r\n                    const studioPromises = data.galleryIds.map(id =>\r\n                        getDoc(doc(db, 'collections', id))\r\n                    );\r\n                    const studioDocs = await Promise.all(studioPromises);\r\n                    const fetchedStudios = studioDocs\r\n                        .filter(d => d.exists())\r\n                        .map(d => ({ id: d.id, ...d.data() }));\r\n                    setStudios(fetchedStudios);\r\n                } else if (data.galleries && Array.isArray(data.galleries)) {\r\n                    // Handle legacy structure where galleries might be embedded\r\n                    setStudios(data.galleries);\r\n                }\r\n\r\n                // Fetch referenced profiles\r\n                if (data.profileIds && data.profileIds.length > 0) {\r\n                    const profilePromises = data.profileIds.map(id =>\r\n                        getDoc(doc(db, 'users', id))\r\n                    );\r\n                    const profileDocs = await Promise.all(profilePromises);\r\n                    const fetchedProfiles = profileDocs\r\n                        .filter(d => d.exists())\r\n                        .map(d => ({ id: d.id, ...d.data() }));\r\n                    setProfiles(fetchedProfiles);\r\n                }\r\n\r\n                // Fetch Exhibits\r\n                if (data.exhibits && Array.isArray(data.exhibits)) {\r\n                    const now = new Date();\r\n                    const activeExhibits = data.exhibits.filter(exhibit => {\r\n                        if (!exhibit.expiresAt) return true; // Keep if no expiry (safety)\r\n                        const expiresAt = exhibit.expiresAt.toDate ? exhibit.expiresAt.toDate() : new Date(exhibit.expiresAt);\r\n                        return expiresAt > now;\r\n                    });\r\n\r\n                    // Fetch studio details for active exhibits\r\n                    const exhibitPromises = activeExhibits.map(async (exhibit) => {\r\n                        if (!exhibit.studioId) return null;\r\n                        const studioDoc = await getDoc(doc(db, 'collections', exhibit.studioId));\r\n                        if (studioDoc.exists()) {\r\n                            return {\r\n                                ...exhibit,\r\n                                studio: { id: studioDoc.id, ...studioDoc.data() }\r\n                            };\r\n                        }\r\n                        return null;\r\n                    });\r\n\r\n                    const fetchedExhibits = (await Promise.all(exhibitPromises)).filter(Boolean);\r\n                    setExhibits(fetchedExhibits);\r\n                }\r\n            }\r\n        } catch (error) {\r\n            console.error('Error loading museum:', error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    if (loading) {\r\n        return (\r\n            <div style={{ padding: '2rem', textAlign: 'center', color: '#fff' }}>\r\n                Loading museum...\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (!museum) {\r\n        return (\r\n            <div style={{ padding: '2rem', textAlign: 'center', color: '#fff' }}>\r\n                Museum not found\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div style={{ minHeight: '100vh', background: '#000', paddingBottom: '80px' }}>\r\n            {/* Header */}\r\n            <div style={{ position: 'relative' }}>\r\n                <button\r\n                    onClick={() => navigate(-1)}\r\n                    style={{\r\n                        position: 'absolute',\r\n                        top: '1rem',\r\n                        left: '1rem',\r\n                        background: 'rgba(0,0,0,0.5)',\r\n                        border: 'none',\r\n                        color: '#fff',\r\n                        width: '40px',\r\n                        height: '40px',\r\n                        borderRadius: '50%',\r\n                        cursor: 'pointer',\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        justifyContent: 'center',\r\n                        zIndex: 10,\r\n                        backdropFilter: 'blur(10px)'\r\n                    }}\r\n                >\r\n                    <FaArrowLeft />\r\n                </button>\r\n\r\n                {museum.coverImage || museum.bannerImage ? (\r\n                    <div style={{\r\n                        height: '300px',\r\n                        background: `url(${museum.coverImage || museum.bannerImage}) center/cover`,\r\n                        position: 'relative'\r\n                    }}>\r\n                        <div style={{\r\n                            position: 'absolute',\r\n                            bottom: 0,\r\n                            left: 0,\r\n                            right: 0,\r\n                            background: 'linear-gradient(transparent, rgba(0,0,0,0.9))',\r\n                            padding: '3rem 2rem 2rem'\r\n                        }}>\r\n                            <h1 style={{ color: '#fff', fontSize: '2rem', margin: '0 0 0.5rem 0' }}>\r\n                                {museum.title || museum.name}\r\n                            </h1>\r\n                            <div style={{ color: '#888', fontSize: '0.9rem' }}>\r\n                                {museum.description}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                ) : (\r\n                    <div style={{\r\n                        padding: '3rem 2rem 2rem',\r\n                        background: 'linear-gradient(135deg, #1a1a1a 0%, #0a0a0a 100%)',\r\n                        minHeight: '200px',\r\n                        display: 'flex',\r\n                        flexDirection: 'column',\r\n                        justifyContent: 'flex-end'\r\n                    }}>\r\n                        <h1 style={{ color: '#fff', fontSize: '2rem', margin: '0 0 0.5rem 0' }}>\r\n                            {museum.title || museum.name}\r\n                        </h1>\r\n                        <div style={{ color: '#888', fontSize: '0.9rem' }}>\r\n                            {museum.description}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Content */}\r\n            <div className=\"container-md\">\r\n\r\n                {/* Exhibits Section (Timed) */}\r\n                {exhibits.length > 0 && (\r\n                    <div style={{ marginBottom: '3rem' }}>\r\n                        <h2 style={{ color: '#fff', fontSize: '1.5rem', marginBottom: '1.5rem', display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                            <FaClock style={{ color: '#ff6b6b' }} />\r\n                            Current Exhibits\r\n                        </h2>\r\n                        <div style={{\r\n                            display: 'grid',\r\n                            gridTemplateColumns: 'repeat(auto-fill, minmax(280px, 1fr))',\r\n                            gap: '1.5rem'\r\n                        }}>\r\n                            {exhibits.map((exhibit, index) => (\r\n                                <div\r\n                                    key={index}\r\n                                    style={{\r\n                                        background: '#1a1a1a',\r\n                                        borderRadius: '12px',\r\n                                        overflow: 'hidden',\r\n                                        border: '1px solid #ff6b6b',\r\n                                        cursor: 'pointer',\r\n                                        transition: 'transform 0.2s',\r\n                                        position: 'relative'\r\n                                    }}\r\n                                    onClick={() => navigate(`/collection/${exhibit.studio.id}`)}\r\n                                    onMouseEnter={e => e.currentTarget.style.transform = 'translateY(-4px)'}\r\n                                    onMouseLeave={e => e.currentTarget.style.transform = 'translateY(0)'}\r\n                                >\r\n                                    <div style={{ height: '180px', background: '#222', position: 'relative' }}>\r\n                                        {exhibit.studio.coverImage ? (\r\n                                            <img src={exhibit.studio.coverImage} alt={exhibit.studio.title} style={{ width: '100%', height: '100%', objectFit: 'cover' }} />\r\n                                        ) : (\r\n                                            <div style={{ width: '100%', height: '100%', display: 'flex', alignItems: 'center', justifyContent: 'center', color: '#444' }}>\r\n                                                <FaImage size={32} />\r\n                                            </div>\r\n                                        )}\r\n                                        <div style={{\r\n                                            position: 'absolute',\r\n                                            top: '0.5rem',\r\n                                            right: '0.5rem',\r\n                                            background: '#ff6b6b',\r\n                                            color: '#fff',\r\n                                            padding: '0.25rem 0.5rem',\r\n                                            borderRadius: '4px',\r\n                                            fontSize: '0.75rem',\r\n                                            fontWeight: 'bold'\r\n                                        }}>\r\n                                            EXHIBIT\r\n                                        </div>\r\n                                    </div>\r\n                                    <div style={{ padding: '1rem' }}>\r\n                                        <h3 style={{ color: '#fff', margin: '0 0 0.5rem 0', fontSize: '1.1rem' }}>\r\n                                            {exhibit.studio.title}\r\n                                        </h3 >\r\n                                        <div style={{ color: '#888', fontSize: '0.8rem', display: 'flex', alignItems: 'center', gap: '0.3rem' }}>\r\n                                            <FaClock size={12} />\r\n                                            Ends: {exhibit.expiresAt?.toDate ? exhibit.expiresAt.toDate().toLocaleDateString() : new Date(exhibit.expiresAt).toLocaleDateString()}\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Studios Section (Formerly Galleries) */}\r\n                {studios.length > 0 && (\r\n                    <div style={{ marginBottom: '3rem' }}>\r\n                        <h2 style={{ color: '#fff', fontSize: '1.5rem', marginBottom: '1.5rem', display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                            <FaImage style={{ color: '#7FFFD4' }} />\r\n                            Studios\r\n                        </h2>\r\n                        <div style={{\r\n                            display: 'grid',\r\n                            gridTemplateColumns: 'repeat(auto-fill, minmax(280px, 1fr))',\r\n                            gap: '1.5rem'\r\n                        }}>\r\n                            {studios.map((studio) => (\r\n                                <div\r\n                                    key={studio.id}\r\n                                    style={{\r\n                                        background: '#1a1a1a',\r\n                                        borderRadius: '12px',\r\n                                        overflow: 'hidden',\r\n                                        border: '1px solid #333',\r\n                                        cursor: 'pointer',\r\n                                        transition: 'transform 0.2s'\r\n                                    }}\r\n                                    onClick={() => navigate(`/collection/${studio.id}`)}\r\n                                    onMouseEnter={e => e.currentTarget.style.transform = 'translateY(-4px)'}\r\n                                    onMouseLeave={e => e.currentTarget.style.transform = 'translateY(0)'}\r\n                                >\r\n                                    <div style={{ height: '180px', background: '#222', position: 'relative' }}>\r\n                                        {studio.coverImage ? (\r\n                                            <img src={studio.coverImage} alt={studio.title} style={{ width: '100%', height: '100%', objectFit: 'cover' }} />\r\n                                        ) : (\r\n                                            <div style={{ width: '100%', height: '100%', display: 'flex', alignItems: 'center', justifyContent: 'center', color: '#444' }}>\r\n                                                <FaImage size={32} />\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                    <div style={{ padding: '1rem' }}>\r\n                                        <h3 style={{ color: '#fff', margin: '0 0 0.5rem 0', fontSize: '1.1rem' }}>\r\n                                            {studio.title || studio.name}\r\n                                        </h3 >\r\n                                        <p style={{ color: '#888', fontSize: '0.9rem', margin: 0, display: '-webkit-box', WebkitLineClamp: 2, WebkitBoxOrient: 'vertical', overflow: 'hidden' }}>\r\n                                            {studio.description || 'No description'}\r\n                                        </p>\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Profiles Section */}\r\n                {profiles.length > 0 && (\r\n                    <div>\r\n                        <h2 style={{ color: '#fff', fontSize: '1.5rem', marginBottom: '1.5rem', display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                            <FaUser style={{ color: '#7FFFD4' }} />\r\n                            Curators & Artists\r\n                        </h2>\r\n                        <div style={{\r\n                            display: 'grid',\r\n                            gridTemplateColumns: 'repeat(auto-fill, minmax(200px, 1fr))',\r\n                            gap: '1rem'\r\n                        }}>\r\n                            {profiles.map((profile) => (\r\n                                <div\r\n                                    key={profile.id}\r\n                                    style={{\r\n                                        background: '#1a1a1a',\r\n                                        borderRadius: '12px',\r\n                                        padding: '1rem',\r\n                                        border: '1px solid #333',\r\n                                        cursor: 'pointer',\r\n                                        display: 'flex',\r\n                                        alignItems: 'center',\r\n                                        gap: '1rem',\r\n                                        transition: 'background 0.2s'\r\n                                    }}\r\n                                    onClick={() => navigate(`/profile/${profile.id}`)}\r\n                                    onMouseEnter={e => e.currentTarget.style.background = '#222'}\r\n                                    onMouseLeave={e => e.currentTarget.style.background = '#1a1a1a'}\r\n                                >\r\n                                    <img\r\n                                        src={profile.photoURL || 'https://via.placeholder.com/50'}\r\n                                        alt={profile.displayName}\r\n                                        style={{ width: '50px', height: '50px', borderRadius: '50%', objectFit: 'cover' }}\r\n                                    />\r\n                                    <div style={{ overflow: 'hidden' }}>\r\n                                        <div style={{ color: '#fff', fontWeight: 'bold', whiteSpace: 'nowrap', overflow: 'hidden', textOverflow: 'ellipsis' }}>\r\n                                            {profile.displayName}\r\n                                        </div>\r\n                                        <div style={{ color: '#666', fontSize: '0.8rem' }}>\r\n                                            @{profile.username || 'user'}\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Empty State */}\r\n                {studios.length === 0 && profiles.length === 0 && exhibits.length === 0 && (\r\n                    <div style={{ textAlign: 'center', padding: '4rem', color: '#666', border: '1px dashed #333', borderRadius: '12px' }}>\r\n                        <FaUniversity size={48} style={{ marginBottom: '1rem', opacity: 0.5 }} />\r\n                        <h3>This museum is empty</h3>\r\n                        <p>No studios, exhibits, or profiles have been added yet.</p>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default MuseumPage;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\pages\\MuseumView.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'where' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":94,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":99},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Timestamp' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":101,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":110},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setProfiles' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":22,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":22,"endColumn":33},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'fetchedProfiles' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":47,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":47,"endColumn":38},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'id'. Either include it or remove the dependency array.","line":74,"column":8,"nodeType":"ArrayExpression","endLine":74,"endColumn":16,"suggestions":[{"desc":"Update the dependencies array to be: [id, museum]","fix":{"range":[3381,3389],"text":"[id, museum]"}}]},{"ruleId":"no-undef","severity":1,"message":"'galleries' is not defined.","line":324,"column":18,"nodeType":"Identifier","messageId":"undef","endLine":324,"endColumn":27}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { doc, getDoc, updateDoc, arrayUnion, increment, collection, query, orderBy, getDocs, where, Timestamp } from 'firebase/firestore';\r\nimport { db } from '@/firebase';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { useCollection } from '@/hooks/useCollections';\r\nimport { FaArrowLeft, FaUniversity, FaImage, FaUser, FaPlus, FaCheck, FaSearch } from 'react-icons/fa';\r\nimport SEO from '@/components/SEO';\r\nimport GalleryCard from '@/components/ui/cards/GalleryCard';\r\nimport StarBackground from '@/components/StarBackground';\r\nimport CreateExhibitModal from '@/components/museums/CreateExhibitModal';\r\nimport { FaClock } from 'react-icons/fa';\r\n\r\nconst MuseumView = () => {\r\n    const { id } = useParams();\r\n    const navigate = useNavigate();\r\n    const { currentUser } = useAuth();\r\n    const { collection: museum, loading: museumLoading, error: museumError } = useCollection(id);\r\n\r\n    const [studios, setStudios] = useState([]);\r\n    const [exhibits, setExhibits] = useState([]);\r\n    const [profiles, setProfiles] = useState([]);\r\n    const [contentLoading, setContentLoading] = useState(true);\r\n    const [joining, setJoining] = useState(false);\r\n    const [showCreateExhibitModal, setShowCreateExhibitModal] = useState(false);\r\n\r\n    const isMember = museum?.members?.includes(currentUser?.uid);\r\n    const isOwner = museum?.ownerId === currentUser?.uid;\r\n\r\n    useEffect(() => {\r\n        const fetchContent = async () => {\r\n            if (!museum) return;\r\n\r\n            setContentLoading(true);\r\n            try {\r\n                // Fetch Studios\r\n                const studioPromises = (museum.galleryIds || []).map(gId => getDoc(doc(db, 'galleries', gId)));\r\n                const studioSnaps = await Promise.all(studioPromises);\r\n                const fetchedStudios = studioSnaps\r\n                    .filter(snap => snap.exists())\r\n                    .map(snap => ({ id: snap.id, ...snap.data() }));\r\n                setStudios(fetchedStudios);\r\n\r\n                // Fetch Profiles\r\n                const profilePromises = (museum.profileIds || []).map(pId => getDoc(doc(db, 'users', pId)));\r\n                const profileSnaps = await Promise.all(profilePromises);\r\n                const fetchedProfiles = profileSnaps\r\n                    .filter(snap => snap.exists())\r\n                    .map(snap => ({ id: snap.id, ...snap.data() }));\r\n                setStudios(fetchedStudios);\r\n\r\n                // Fetch Exhibits\r\n                const exhibitsRef = collection(db, 'museums', id, 'exhibits');\r\n                const q = query(exhibitsRef, orderBy('createdAt', 'desc'));\r\n                const exhibitsSnap = await getDocs(q);\r\n                const now = new Date();\r\n                const fetchedExhibits = exhibitsSnap.docs\r\n                    .map(doc => ({ id: doc.id, ...doc.data() }))\r\n                    .filter(exhibit => exhibit.expiresAt?.toDate() > now);\r\n                setExhibits(fetchedExhibits);\r\n\r\n                // Fetch Profiles\r\n\r\n            } catch (err) {\r\n                console.error(\"Error fetching museum content:\", err);\r\n            } finally {\r\n                setContentLoading(false);\r\n            }\r\n        };\r\n\r\n        if (museum) {\r\n            fetchContent();\r\n        }\r\n    }, [museum]);\r\n\r\n    const handleJoinMuseum = async () => {\r\n        if (!currentUser || !museum || isMember || joining) return;\r\n\r\n        try {\r\n            setJoining(true);\r\n            const museumRef = doc(db, 'museums', id);\r\n\r\n            await updateDoc(museumRef, {\r\n                members: arrayUnion(currentUser.uid),\r\n                memberCount: increment(1)\r\n            });\r\n\r\n            // Optional: Update user's joinedMuseums if you want to track it on user profile\r\n            // const userRef = doc(db, 'users', currentUser.uid);\r\n            // await updateDoc(userRef, {\r\n            //     joinedMuseums: arrayUnion(id)\r\n            // });\r\n\r\n            alert('Successfully joined the museum!');\r\n        } catch (err) {\r\n            console.error('Error joining museum:', err);\r\n            alert('Failed to join museum');\r\n        } finally {\r\n            setJoining(false);\r\n        }\r\n    };\r\n\r\n    if (museumLoading) return <div style={{ height: '100vh', display: 'flex', alignItems: 'center', justifyContent: 'center', color: '#fff' }}>Loading Museum...</div>;\r\n    if (museumError || !museum) return <div style={{ height: '100vh', display: 'flex', alignItems: 'center', justifyContent: 'center', color: '#fff' }}>Museum not found</div>;\r\n\r\n    return (\r\n        <div style={{ minHeight: '100vh', background: '#000', color: '#fff', paddingBottom: '4rem' }}>\r\n            <SEO title={museum.title} description={museum.description} />\r\n\r\n            {/* Hero Section */}\r\n            <div style={{ position: 'relative', height: '40vh', minHeight: '300px' }}>\r\n                <div style={{ position: 'absolute', inset: 0 }}>\r\n                    {museum.coverImage ? (\r\n                        <img src={museum.coverImage} alt={museum.title} style={{ width: '100%', height: '100%', objectFit: 'cover' }} />\r\n                    ) : (\r\n                        <StarBackground />\r\n                    )}\r\n                    <div style={{ position: 'absolute', inset: 0, background: 'linear-gradient(to bottom, rgba(0,0,0,0.3), #000)' }} />\r\n                </div>\r\n\r\n                <div style={{ position: 'absolute', top: '20px', left: '20px', zIndex: 10 }}>\r\n                    <button onClick={() => navigate(-1)} style={{ background: 'rgba(0,0,0,0.5)', border: 'none', color: '#fff', padding: '10px', borderRadius: '50%', cursor: 'pointer', backdropFilter: 'blur(4px)' }}>\r\n                        <FaArrowLeft />\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Header Actions */}\r\n                <div style={{ position: 'absolute', top: '20px', right: '20px', zIndex: 10, display: 'flex', gap: '0.75rem' }}>\r\n                    <button\r\n                        onClick={() => navigate(`/search?museumId=${id}`)}\r\n                        style={{\r\n                            background: 'rgba(0,0,0,0.5)',\r\n                            border: '1px solid rgba(255,255,255,0.2)',\r\n                            color: '#fff',\r\n                            padding: '0.5rem 1rem',\r\n                            borderRadius: '20px',\r\n                            cursor: 'pointer',\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            gap: '0.5rem',\r\n                            backdropFilter: 'blur(4px)',\r\n                            transition: 'all 0.2s',\r\n                            fontWeight: '500'\r\n                        }}\r\n                        onMouseOver={e => e.currentTarget.style.background = 'rgba(255,255,255,0.1)'}\r\n                        onMouseOut={e => e.currentTarget.style.background = 'rgba(0,0,0,0.5)'}\r\n                    >\r\n                        <FaSearch /> <span style={{ display: 'none', '@media (min-width: 768px)': { display: 'inline' } }}>Search</span>\r\n                    </button>\r\n\r\n                    {!isOwner && (\r\n                        <button\r\n                            onClick={handleJoinMuseum}\r\n                            disabled={isMember || joining}\r\n                            style={{\r\n                                background: isMember ? 'rgba(127, 255, 212, 0.2)' : '#7FFFD4',\r\n                                color: isMember ? '#7FFFD4' : '#000',\r\n                                border: isMember ? '1px solid #7FFFD4' : 'none',\r\n                                padding: '0.5rem 1.5rem',\r\n                                borderRadius: '20px',\r\n                                fontWeight: 'bold',\r\n                                cursor: isMember ? 'default' : 'pointer',\r\n                                display: 'flex',\r\n                                alignItems: 'center',\r\n                                gap: '0.5rem',\r\n                                backdropFilter: 'blur(4px)',\r\n                                transition: 'all 0.2s'\r\n                            }}\r\n                        >\r\n                            {isMember ? <FaCheck /> : <FaPlus />}\r\n                            {isMember ? 'Member' : joining ? 'Joining...' : 'Join Museum'}\r\n                        </button>\r\n                    )}\r\n\r\n                    {isOwner && (\r\n                        <button\r\n                            onClick={() => setShowCreateExhibitModal(true)}\r\n                            style={{\r\n                                background: '#7FFFD4',\r\n                                color: '#000',\r\n                                border: 'none',\r\n                                padding: '0.5rem 1.5rem',\r\n                                borderRadius: '20px',\r\n                                fontWeight: 'bold',\r\n                                cursor: 'pointer',\r\n                                display: 'flex',\r\n                                alignItems: 'center',\r\n                                gap: '0.5rem',\r\n                                backdropFilter: 'blur(4px)',\r\n                                transition: 'all 0.2s'\r\n                            }}\r\n                        >\r\n                            <FaPlus /> Add Exhibit\r\n                        </button>\r\n                    )}\r\n                </div>\r\n\r\n                <div className=\"container-md\" style={{ position: 'absolute', bottom: 0, left: 0, right: 0 }}>\r\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '1rem', marginBottom: '0.5rem', color: '#7FFFD4' }}>\r\n                        <FaUniversity size={24} />\r\n                        <span style={{ textTransform: 'uppercase', letterSpacing: '2px', fontWeight: 'bold', fontSize: '0.9rem' }}>Museum</span>\r\n                    </div>\r\n                    <h1 style={{ fontSize: '3rem', fontWeight: 'bold', margin: '0 0 1rem 0', textShadow: '0 2px 10px rgba(0,0,0,0.5)' }}>{museum.title}</h1>\r\n                    <p style={{ fontSize: '1.1rem', color: '#ccc', maxWidth: '600px', lineHeight: '1.6' }}>{museum.description}</p>\r\n\r\n                    <div style={{ display: 'flex', gap: '1rem', marginTop: '1.5rem' }}>\r\n                        <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', background: 'rgba(255,255,255,0.1)', padding: '0.5rem 1rem', borderRadius: '20px', backdropFilter: 'blur(4px)' }}>\r\n                            <FaImage style={{ color: '#7FFFD4' }} />\r\n                            <span>{studios.length} Studios</span>\r\n                        </div>\r\n                        <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', background: 'rgba(255,255,255,0.1)', padding: '0.5rem 1rem', borderRadius: '20px', backdropFilter: 'blur(4px)' }}>\r\n                            <FaUser style={{ color: '#7FFFD4' }} />\r\n                            <span>{museum.memberCount || profiles.length} Members</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Content Section */}\r\n            <div className=\"container-md\" style={{ padding: '2rem 1rem' }}>\r\n\r\n                {/* Exhibits */}\r\n                {exhibits.length > 0 && (\r\n                    <div style={{ marginBottom: '4rem' }}>\r\n                        <h2 style={{ fontSize: '1.5rem', marginBottom: '1.5rem', display: 'flex', alignItems: 'center', gap: '0.75rem', borderBottom: '1px solid #333', paddingBottom: '1rem' }}>\r\n                            <FaClock style={{ color: '#7FFFD4' }} /> Current Exhibits\r\n                        </h2>\r\n                        <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(300px, 1fr))', gap: '1.5rem' }}>\r\n                            {exhibits.map(exhibit => (\r\n                                <div key={exhibit.id} style={{\r\n                                    background: '#111',\r\n                                    borderRadius: '12px',\r\n                                    overflow: 'hidden',\r\n                                    border: '1px solid #222'\r\n                                }}>\r\n                                    <div style={{ aspectRatio: '16/9', position: 'relative' }}>\r\n                                        <img src={exhibit.imageUrl} alt={exhibit.title} style={{ width: '100%', height: '100%', objectFit: 'cover' }} />\r\n                                        <div style={{\r\n                                            position: 'absolute',\r\n                                            bottom: '0.5rem',\r\n                                            right: '0.5rem',\r\n                                            background: 'rgba(0,0,0,0.7)',\r\n                                            padding: '0.25rem 0.5rem',\r\n                                            borderRadius: '4px',\r\n                                            fontSize: '0.75rem',\r\n                                            color: '#7FFFD4',\r\n                                            display: 'flex',\r\n                                            alignItems: 'center',\r\n                                            gap: '0.25rem'\r\n                                        }}>\r\n                                            <FaClock size={10} />\r\n                                            {Math.ceil((exhibit.expiresAt?.toDate() - new Date()) / (1000 * 60 * 60))}h left\r\n                                        </div>\r\n                                    </div>\r\n                                    <div style={{ padding: '1rem' }}>\r\n                                        <h3 style={{ margin: '0 0 0.5rem 0', fontSize: '1.1rem' }}>{exhibit.title}</h3>\r\n                                        <p style={{ margin: 0, color: '#888', fontSize: '0.9rem', lineHeight: '1.5' }}>{exhibit.description}</p>\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Studios */}\r\n                {studios.length > 0 && (\r\n                    <div style={{ marginBottom: '4rem' }}>\r\n                        <h2 style={{ fontSize: '1.5rem', marginBottom: '1.5rem', display: 'flex', alignItems: 'center', gap: '0.75rem', borderBottom: '1px solid #333', paddingBottom: '1rem' }}>\r\n                            <FaImage style={{ color: '#7FFFD4' }} /> Featured Studios\r\n                        </h2>\r\n                        <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(300px, 1fr))', gap: '1.5rem' }}>\r\n                            {studios.map(studio => (\r\n                                <GalleryCard key={studio.id} studio={studio} />\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Profiles */}\r\n                {profiles.length > 0 && (\r\n                    <div>\r\n                        <h2 style={{ fontSize: '1.5rem', marginBottom: '1.5rem', display: 'flex', alignItems: 'center', gap: '0.75rem', borderBottom: '1px solid #333', paddingBottom: '1rem' }}>\r\n                            <FaUser style={{ color: '#7FFFD4' }} /> Curators & Artists\r\n                        </h2>\r\n                        <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(250px, 1fr))', gap: '1.5rem' }}>\r\n                            {profiles.map(profile => (\r\n                                <div\r\n                                    key={profile.id}\r\n                                    onClick={() => navigate(`/profile/${profile.id}`)}\r\n                                    style={{\r\n                                        background: '#111',\r\n                                        borderRadius: '12px',\r\n                                        padding: '1.5rem',\r\n                                        display: 'flex',\r\n                                        flexDirection: 'column',\r\n                                        alignItems: 'center',\r\n                                        textAlign: 'center',\r\n                                        cursor: 'pointer',\r\n                                        border: '1px solid #222',\r\n                                        transition: 'all 0.2s'\r\n                                    }}\r\n                                    onMouseOver={e => {\r\n                                        e.currentTarget.style.transform = 'translateY(-4px)';\r\n                                        e.currentTarget.style.borderColor = '#7FFFD4';\r\n                                    }}\r\n                                    onMouseOut={e => {\r\n                                        e.currentTarget.style.transform = 'translateY(0)';\r\n                                        e.currentTarget.style.borderColor = '#222';\r\n                                    }}\r\n                                >\r\n                                    <img\r\n                                        src={profile.photoURL || 'https://via.placeholder.com/100'}\r\n                                        alt={profile.displayName}\r\n                                        style={{ width: '80px', height: '80px', borderRadius: '50%', objectFit: 'cover', marginBottom: '1rem', border: '2px solid #333' }}\r\n                                    />\r\n                                    <h3 style={{ margin: '0 0 0.5rem 0', fontSize: '1.1rem' }}>{profile.displayName}</h3>\r\n                                    <p style={{ margin: 0, color: '#888', fontSize: '0.9rem' }}>@{profile.username || 'user'}</p>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {galleries.length === 0 && profiles.length === 0 && !contentLoading && (\r\n                    <div style={{ textAlign: 'center', padding: '4rem', color: '#666' }}>\r\n                        <FaUniversity size={48} style={{ marginBottom: '1rem', opacity: 0.5 }} />\r\n                        <p>This museum is currently empty.</p>\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            <CreateExhibitModal\r\n                isOpen={showCreateExhibitModal}\r\n                onClose={(shouldRefresh) => {\r\n                    setShowCreateExhibitModal(false);\r\n                    if (shouldRefresh) {\r\n                        // Trigger refresh logic (e.g. by forcing re-mount or refetching)\r\n                        // For simplicity, we can reload the page or add a refetch function to useEffect dependency\r\n                        window.location.reload();\r\n                    }\r\n                }}\r\n                museumId={id}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default MuseumView;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\pages\\NotFound.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { FaCompass, FaArrowLeft } from 'react-icons/fa';\r\nimport SEO from '@/components/SEO';\r\n\r\nconst NotFound = () => {\r\n    const navigate = useNavigate();\r\n\r\n    return (\r\n        <div style={{\r\n            height: '100dvh', // Use dvh for mobile\r\n            width: '100vw',\r\n            background: '#000',\r\n            color: '#fff',\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            justifyContent: 'center',\r\n            alignItems: 'center',\r\n            textAlign: 'center',\r\n            padding: '2rem'\r\n        }}>\r\n            <SEO title=\"Page Not Found\" />\r\n\r\n            <div style={{\r\n                fontSize: 'clamp(4rem, 15vw, 8rem)', // Responsive font size\r\n                fontWeight: 'bold',\r\n                background: 'linear-gradient(45deg, #7FFFD4, #007A5D)',\r\n                WebkitBackgroundClip: 'text',\r\n                WebkitTextFillColor: 'transparent',\r\n                marginBottom: '1rem',\r\n                opacity: 0.8\r\n            }}>\r\n                404\r\n            </div>\r\n\r\n            <h1 style={{ fontSize: 'clamp(1.5rem, 5vw, 2rem)', marginBottom: '1rem' }}>Lost in Space?</h1>\r\n            <p style={{ color: '#aaa', maxWidth: '400px', marginBottom: '2rem' }}>\r\n                The page you are looking for doesn't exist or has been moved to another dimension.\r\n            </p>\r\n\r\n            <div style={{ display: 'flex', gap: '1rem' }}>\r\n                <button\r\n                    onClick={() => navigate(-1)}\r\n                    style={{\r\n                        padding: '0.8rem 1.5rem',\r\n                        background: 'transparent',\r\n                        border: '1px solid #333',\r\n                        color: '#fff',\r\n                        borderRadius: '8px',\r\n                        cursor: 'pointer',\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        gap: '0.5rem',\r\n                        fontSize: '1rem'\r\n                    }}\r\n                >\r\n                    <FaArrowLeft /> Go Back\r\n                </button>\r\n\r\n                <button\r\n                    onClick={() => navigate('/')}\r\n                    style={{\r\n                        padding: '0.8rem 1.5rem',\r\n                        background: 'var(--ice-mint)',\r\n                        border: 'none',\r\n                        color: '#000',\r\n                        borderRadius: '8px',\r\n                        cursor: 'pointer',\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        gap: '0.5rem',\r\n                        fontSize: '1rem',\r\n                        fontWeight: 'bold'\r\n                    }}\r\n                >\r\n                    <FaCompass /> Go Home\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default NotFound;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\pages\\Notifications.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaCheck' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaTimes' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":53,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":60},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadNotifications'. Either include it or remove the dependency array.","line":18,"column":8,"nodeType":"ArrayExpression","endLine":18,"endColumn":21,"suggestions":[{"desc":"Update the dependencies array to be: [currentUser, loadNotifications]","fix":{"range":[760,773],"text":"[currentUser, loadNotifications]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { getUserNotifications, markAsRead, markAllAsRead } from '@/services/notificationService';\r\nimport { FaBell, FaCheck, FaImage, FaBook, FaClock, FaTimes, FaCheckDouble } from 'react-icons/fa';\r\n\r\nconst Notifications = () => {\r\n    const navigate = useNavigate();\r\n    const { currentUser } = useAuth();\r\n    const [notifications, setNotifications] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [filter, setFilter] = useState('all'); // 'all', 'unread', 'magazine'\r\n\r\n    useEffect(() => {\r\n        if (currentUser) {\r\n            loadNotifications();\r\n        }\r\n    }, [currentUser]);\r\n\r\n    const loadNotifications = async () => {\r\n        try {\r\n            setLoading(true);\r\n            const notifs = await getUserNotifications(currentUser.uid);\r\n            setNotifications(notifs);\r\n        } catch (err) {\r\n            console.error('Error loading notifications:', err);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleNotificationClick = async (notification) => {\r\n        if (!notification.read) {\r\n            await markAsRead(notification.id);\r\n            setNotifications(prev =>\r\n                prev.map(n => n.id === notification.id ? { ...n, read: true } : n)\r\n            );\r\n        }\r\n\r\n        if (notification.actionUrl) {\r\n            navigate(notification.actionUrl);\r\n        }\r\n    };\r\n\r\n    const handleMarkAllRead = async () => {\r\n        try {\r\n            await markAllAsRead(currentUser.uid);\r\n            setNotifications(prev => prev.map(n => ({ ...n, read: true })));\r\n        } catch (err) {\r\n            console.error('Error marking all as read:', err);\r\n        }\r\n    };\r\n\r\n    const getIcon = (type) => {\r\n        switch (type) {\r\n            case 'magazine_submission':\r\n            case 'submission_approved':\r\n            case 'submission_rejected':\r\n                return <FaImage style={{ color: '#7FFFD4' }} />;\r\n            case 'magazine_published':\r\n                return <FaBook style={{ color: '#7FFFD4' }} />;\r\n            case 'magazine_deadline':\r\n                return <FaClock style={{ color: '#ffaa00' }} />;\r\n            default:\r\n                return <FaBell style={{ color: '#7FFFD4' }} />;\r\n        }\r\n    };\r\n\r\n    const filteredNotifications = notifications.filter(n => {\r\n        if (filter === 'unread') return !n.read;\r\n        if (filter === 'magazine') return n.type?.startsWith('magazine') || n.type?.startsWith('submission');\r\n        return true;\r\n    });\r\n\r\n    const unreadCount = notifications.filter(n => !n.read).length;\r\n\r\n    if (loading) {\r\n        return (\r\n            <div style={{ height: '100vh', display: 'flex', alignItems: 'center', justifyContent: 'center', background: '#000', color: '#fff' }}>\r\n                Loading notifications...\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div style={{ minHeight: '100vh', background: '#000', color: '#fff', paddingBottom: '6rem' }}>\r\n            {/* Header */}\r\n            <div style={{\r\n                padding: '1rem 2rem',\r\n                borderBottom: '1px solid #333',\r\n                position: 'sticky',\r\n                top: 0,\r\n                background: '#000',\r\n                zIndex: 100\r\n            }}>\r\n                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '1rem' }}>\r\n                    <h1 style={{ fontSize: '1.5rem', margin: 0, display: 'flex', alignItems: 'center', gap: '0.75rem' }}>\r\n                        <FaBell /> Notifications\r\n                        {unreadCount > 0 && (\r\n                            <span style={{\r\n                                background: '#7FFFD4',\r\n                                color: '#000',\r\n                                borderRadius: '12px',\r\n                                padding: '0.25rem 0.75rem',\r\n                                fontSize: '0.9rem',\r\n                                fontWeight: 'bold'\r\n                            }}>\r\n                                {unreadCount}\r\n                            </span>\r\n                        )}\r\n                    </h1>\r\n\r\n                    {unreadCount > 0 && (\r\n                        <button\r\n                            onClick={handleMarkAllRead}\r\n                            style={{\r\n                                background: 'transparent',\r\n                                border: '1px solid #333',\r\n                                color: '#7FFFD4',\r\n                                padding: '0.5rem 1rem',\r\n                                borderRadius: '8px',\r\n                                cursor: 'pointer',\r\n                                display: 'flex',\r\n                                alignItems: 'center',\r\n                                gap: '0.5rem',\r\n                                fontSize: '0.9rem'\r\n                            }}\r\n                        >\r\n                            <FaCheckDouble /> Mark All Read\r\n                        </button>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Filters */}\r\n                <div style={{ display: 'flex', gap: '0.5rem' }}>\r\n                    {['all', 'unread', 'magazine'].map(f => (\r\n                        <button\r\n                            key={f}\r\n                            onClick={() => setFilter(f)}\r\n                            style={{\r\n                                background: filter === f ? 'rgba(127, 255, 212, 0.2)' : 'transparent',\r\n                                border: filter === f ? '1px solid #7FFFD4' : '1px solid #333',\r\n                                color: filter === f ? '#7FFFD4' : '#888',\r\n                                padding: '0.5rem 1rem',\r\n                                borderRadius: '8px',\r\n                                cursor: 'pointer',\r\n                                fontSize: '0.9rem',\r\n                                textTransform: 'capitalize'\r\n                            }}\r\n                        >\r\n                            {f}\r\n                        </button>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Notifications List */}\r\n            <div style={{ maxWidth: '800px', margin: '0 auto', padding: '1rem' }}>\r\n                {filteredNotifications.length === 0 ? (\r\n                    <div style={{\r\n                        textAlign: 'center',\r\n                        padding: '4rem',\r\n                        color: '#666'\r\n                    }}>\r\n                        <FaBell style={{ fontSize: '3rem', marginBottom: '1rem', opacity: 0.5 }} />\r\n                        <p>No notifications</p>\r\n                    </div>\r\n                ) : (\r\n                    <div style={{ display: 'flex', flexDirection: 'column', gap: '0.5rem' }}>\r\n                        {filteredNotifications.map(notification => (\r\n                            <div\r\n                                key={notification.id}\r\n                                onClick={() => handleNotificationClick(notification)}\r\n                                style={{\r\n                                    background: notification.read ? '#111' : 'rgba(127, 255, 212, 0.05)',\r\n                                    border: notification.read ? '1px solid #333' : '1px solid rgba(127, 255, 212, 0.3)',\r\n                                    borderRadius: '12px',\r\n                                    padding: '1rem',\r\n                                    cursor: 'pointer',\r\n                                    display: 'flex',\r\n                                    gap: '1rem',\r\n                                    alignItems: 'flex-start',\r\n                                    transition: 'all 0.2s',\r\n                                    position: 'relative'\r\n                                }}\r\n                                onMouseEnter={(e) => {\r\n                                    e.currentTarget.style.background = notification.read ? '#1a1a1a' : 'rgba(127, 255, 212, 0.1)';\r\n                                }}\r\n                                onMouseLeave={(e) => {\r\n                                    e.currentTarget.style.background = notification.read ? '#111' : 'rgba(127, 255, 212, 0.05)';\r\n                                }}\r\n                            >\r\n                                {/* Icon */}\r\n                                <div style={{\r\n                                    width: '40px',\r\n                                    height: '40px',\r\n                                    borderRadius: '50%',\r\n                                    background: 'rgba(127, 255, 212, 0.1)',\r\n                                    display: 'flex',\r\n                                    alignItems: 'center',\r\n                                    justifyContent: 'center',\r\n                                    flexShrink: 0\r\n                                }}>\r\n                                    {getIcon(notification.type)}\r\n                                </div>\r\n\r\n                                {/* Content */}\r\n                                <div style={{ flex: 1 }}>\r\n                                    <h3 style={{\r\n                                        margin: '0 0 0.25rem 0',\r\n                                        fontSize: '1rem',\r\n                                        fontWeight: notification.read ? 'normal' : 'bold',\r\n                                        color: notification.read ? '#ccc' : '#fff'\r\n                                    }}>\r\n                                        {notification.title}\r\n                                    </h3>\r\n                                    <p style={{\r\n                                        margin: '0 0 0.5rem 0',\r\n                                        fontSize: '0.9rem',\r\n                                        color: '#888',\r\n                                        lineHeight: '1.4'\r\n                                    }}>\r\n                                        {notification.message}\r\n                                    </p>\r\n                                    <span style={{ fontSize: '0.8rem', color: '#666' }}>\r\n                                        {notification.createdAt?.toDate ?\r\n                                            notification.createdAt.toDate().toLocaleDateString('en-US', {\r\n                                                month: 'short',\r\n                                                day: 'numeric',\r\n                                                hour: '2-digit',\r\n                                                minute: '2-digit'\r\n                                            }) :\r\n                                            'Just now'\r\n                                        }\r\n                                    </span>\r\n                                </div>\r\n\r\n                                {/* Unread Indicator */}\r\n                                {!notification.read && (\r\n                                    <div style={{\r\n                                        width: '8px',\r\n                                        height: '8px',\r\n                                        borderRadius: '50%',\r\n                                        background: '#7FFFD4',\r\n                                        flexShrink: 0,\r\n                                        marginTop: '0.5rem'\r\n                                    }} />\r\n                                )}\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Notifications;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\pages\\ParkGallery.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { getParkById } from '@/core/constants/parksData';\r\nimport { useParks } from '@/hooks/useParks';\r\nimport { FaArrowLeft, FaMapMarkerAlt, FaMountain, FaTree, FaImage } from 'react-icons/fa';\r\nimport { SkeletonGrid } from '@/components/ui/Skeleton';\r\n\r\nconst ParkGallery = () => {\r\n    const { parkId } = useParams();\r\n    const navigate = useNavigate();\r\n    const { getParkPosts, loading } = useParks();\r\n\r\n    const [posts, setPosts] = useState([]);\r\n    const park = getParkById(parkId);\r\n\r\n    useEffect(() => {\r\n        const fetchPosts = async () => {\r\n            if (parkId) {\r\n                const parkPosts = await getParkPosts(parkId);\r\n                setPosts(parkPosts);\r\n            }\r\n        };\r\n        fetchPosts();\r\n    }, [parkId, getParkPosts]);\r\n\r\n    if (!park) {\r\n        return (\r\n            <div style={{ minHeight: '100vh', background: '#000', color: '#fff', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\r\n                <div style={{ textAlign: 'center' }}>\r\n                    <h1 style={{ fontSize: '2rem', marginBottom: '1rem' }}>Park Not Found</h1>\r\n                    <button\r\n                        onClick={() => navigate('/parks')}\r\n                        style={{\r\n                            background: '#7FFFD4',\r\n                            color: '#000',\r\n                            border: 'none',\r\n                            padding: '0.75rem 1.5rem',\r\n                            borderRadius: '8px',\r\n                            fontWeight: 'bold',\r\n                            cursor: 'pointer'\r\n                        }}\r\n                    >\r\n                        Back to Parks\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div style={{ minHeight: '100vh', background: '#000', color: '#fff', paddingBottom: '6rem' }}>\r\n            {/* Header */}\r\n            <div style={{\r\n                padding: '2rem',\r\n                borderBottom: '1px solid #333',\r\n                background: '#000',\r\n                position: 'sticky',\r\n                top: 0,\r\n                zIndex: 100\r\n            }}>\r\n                <button\r\n                    onClick={() => navigate('/parks')}\r\n                    style={{\r\n                        background: 'transparent',\r\n                        border: 'none',\r\n                        color: '#888',\r\n                        cursor: 'pointer',\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        gap: '0.5rem',\r\n                        marginBottom: '1rem',\r\n                        fontSize: '0.9rem',\r\n                        padding: 0\r\n                    }}\r\n                >\r\n                    <FaArrowLeft /> Back to Parks\r\n                </button>\r\n\r\n                <div style={{ display: 'flex', alignItems: 'flex-start', gap: '1.5rem' }}>\r\n                    <div style={{\r\n                        width: '80px',\r\n                        height: '80px',\r\n                        borderRadius: '16px',\r\n                        background: 'rgba(127, 255, 212, 0.1)',\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        justifyContent: 'center',\r\n                        flexShrink: 0\r\n                    }}>\r\n                        {park.parkType === 'national' ? (\r\n                            <FaMountain style={{ color: '#7FFFD4', fontSize: '2.5rem' }} />\r\n                        ) : (\r\n                            <FaTree style={{ color: '#7FFFD4', fontSize: '2.5rem' }} />\r\n                        )}\r\n                    </div>\r\n                    <div>\r\n                        <h1 style={{ fontSize: '2rem', fontWeight: 'bold', margin: '0 0 0.5rem 0' }}>\r\n                            {park.parkName}\r\n                        </h1>\r\n                        <div style={{ display: 'flex', alignItems: 'center', gap: '1rem', color: '#888' }}>\r\n                            <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                                <FaMapMarkerAlt size={14} />\r\n                                <span>{park.state}</span>\r\n                            </div>\r\n                            <div style={{\r\n                                padding: '0.25rem 0.75rem',\r\n                                background: park.parkType === 'national' ? 'rgba(127, 255, 212, 0.1)' : 'rgba(100, 200, 255, 0.1)',\r\n                                border: `1px solid ${park.parkType === 'national' ? 'rgba(127, 255, 212, 0.3)' : 'rgba(100, 200, 255, 0.3)'}`,\r\n                                borderRadius: '12px',\r\n                                color: park.parkType === 'national' ? '#7FFFD4' : '#64C8FF',\r\n                                fontSize: '0.75rem',\r\n                                fontWeight: '600',\r\n                                textTransform: 'uppercase',\r\n                                letterSpacing: '0.5px'\r\n                            }}>\r\n                                {park.parkType === 'national' ? 'National Park' : 'State Park'}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Posts Grid */}\r\n            <div className=\"container-md\">\r\n\r\n\r\n                {loading ? (\r\n                    <SkeletonGrid count={8} aspectRatio=\"1/1\" columns=\"repeat(auto-fill, minmax(250px, 1fr))\" />\r\n                ) : posts.length > 0 ? (\r\n                    <div style={{\r\n                        display: 'grid',\r\n                        gridTemplateColumns: 'repeat(auto-fill, minmax(250px, 1fr))',\r\n                        gap: '1.5rem'\r\n                    }}>\r\n                        {posts.map(post => (\r\n                            <div\r\n                                key={post.id}\r\n                                onClick={() => navigate(`/post/${post.id}`)}\r\n                                style={{\r\n                                    background: 'rgba(255,255,255,0.03)',\r\n                                    borderRadius: '12px',\r\n                                    overflow: 'hidden',\r\n                                    cursor: 'pointer',\r\n                                    border: '1px solid rgba(255,255,255,0.05)',\r\n                                    transition: 'transform 0.2s'\r\n                                }}\r\n                                onMouseEnter={e => e.currentTarget.style.transform = 'translateY(-4px)'}\r\n                                onMouseLeave={e => e.currentTarget.style.transform = 'translateY(0)'}\r\n                            >\r\n                                <div style={{\r\n                                    aspectRatio: '1',\r\n                                    background: '#111',\r\n                                    overflow: 'hidden'\r\n                                }}>\r\n                                    {post.images?.[0]?.url || post.imageUrl ? (\r\n                                        <img\r\n                                            src={post.images?.[0]?.url || post.imageUrl}\r\n                                            alt={post.title || ''}\r\n                                            style={{ width: '100%', height: '100%', objectFit: 'cover' }}\r\n                                        />\r\n                                    ) : (\r\n                                        <div style={{ width: '100%', height: '100%', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\r\n                                            <FaImage color=\"#333\" size={40} />\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                                <div style={{ padding: '1rem' }}>\r\n                                    <h3 style={{ margin: '0 0 0.5rem 0', color: '#fff', fontSize: '1rem' }}>\r\n                                        {post.title || 'Untitled'}\r\n                                    </h3>\r\n                                    <p style={{ margin: 0, fontSize: '0.85rem', color: '#888' }}>\r\n                                        by {post.authorName || 'Unknown'}\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                ) : (\r\n                    <div style={{ textAlign: 'center', padding: '4rem', color: '#555' }}>\r\n                        <FaImage size={60} style={{ marginBottom: '1rem', opacity: 0.3 }} />\r\n                        <h3 style={{ fontSize: '1.5rem', marginBottom: '0.5rem' }}>No Posts Yet</h3>\r\n                        <p style={{ color: '#888' }}>\r\n                            Be the first to share photos from {park.parkName}!\r\n                        </p>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ParkGallery;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\pages\\Parks.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'navigate' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":8,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":19}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { PARKS_DATA } from '@/core/constants/parksData';\r\nimport { FaTree, FaMountain } from 'react-icons/fa';\r\nimport ParkCard from '@/components/ui/cards/ParkCard';\r\n\r\nconst Parks = () => {\r\n    const navigate = useNavigate();\r\n\r\n    const nationalParks = PARKS_DATA.filter(p => p.parkType === 'national');\r\n    const stateParks = PARKS_DATA.filter(p => p.parkType === 'state');\r\n\r\n    return (\r\n        <div style={{ minHeight: '100vh', background: '#000', color: '#fff', paddingBottom: '6rem' }}>\r\n            {/* Header */}\r\n            <div style={{\r\n                padding: '2rem',\r\n                borderBottom: '1px solid #333',\r\n                background: '#000',\r\n                position: 'sticky',\r\n                top: 0,\r\n                zIndex: 100\r\n            }}>\r\n                <h1 style={{ fontSize: '2rem', fontWeight: 'bold', margin: '0 0 0.5rem 0' }}>\r\n                    Parks\r\n                </h1>\r\n                <p style={{ color: '#888', margin: 0 }}>\r\n                    Explore photography from National and State Parks\r\n                </p>\r\n            </div>\r\n\r\n            <div className=\"container-md\">\r\n                {/* National Parks Section */}\r\n                <div style={{ marginBottom: '3rem' }}>\r\n                    <h2 style={{\r\n                        fontSize: '1.5rem',\r\n                        fontWeight: 'bold',\r\n                        marginBottom: '1.5rem',\r\n                        color: '#7FFFD4',\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        gap: '0.75rem'\r\n                    }}>\r\n                        <FaMountain />\r\n                        National Parks\r\n                        <span style={{ fontSize: '0.9rem', color: '#666', fontWeight: 'normal' }}>\r\n                            ({nationalParks.length})\r\n                        </span>\r\n                    </h2>\r\n                    <div style={{\r\n                        display: 'grid',\r\n                        gridTemplateColumns: 'repeat(auto-fill, minmax(300px, 1fr))',\r\n                        gap: '1.5rem'\r\n                    }}>\r\n                        {nationalParks.map(park => (\r\n                            <ParkCard key={park.parkId} park={park} />\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* State Parks Section */}\r\n                <div>\r\n                    <h2 style={{\r\n                        fontSize: '1.5rem',\r\n                        fontWeight: 'bold',\r\n                        marginBottom: '1.5rem',\r\n                        color: '#64C8FF',\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        gap: '0.75rem'\r\n                    }}>\r\n                        <FaTree />\r\n                        State Parks\r\n                        <span style={{ fontSize: '0.9rem', color: '#666', fontWeight: 'normal' }}>\r\n                            ({stateParks.length})\r\n                        </span>\r\n                    </h2>\r\n                    <div style={{\r\n                        display: 'grid',\r\n                        gridTemplateColumns: 'repeat(auto-fill, minmax(300px, 1fr))',\r\n                        gap: '1.5rem'\r\n                    }}>\r\n                        {stateParks.map(park => (\r\n                            <ParkCard key={park.parkId} park={park} />\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Parks;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\pages\\PostDetail.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef } from 'react';\r\nimport { useParams, useNavigate, useLocation } from 'react-router-dom';\r\nimport { doc, getDoc, collection, query, where, orderBy, limit, getDocs } from 'firebase/firestore';\r\nimport { db } from '@/firebase';\r\nimport { FaArrowLeft } from 'react-icons/fa';\r\nimport Post from '@/components/Post';\r\nimport VirtualizedPostContainer from '@/components/feed/VirtualizedPostContainer';\r\nimport { logger } from '@/core/utils/logger';\r\n\r\nconst PostDetail = () => {\r\n    const { id } = useParams();\r\n    const navigate = useNavigate();\r\n    const location = useLocation();\r\n    const [loading, setLoading] = useState(true);\r\n    const [posts, setPosts] = useState([]);\r\n    const [initialPostIndex, setInitialPostIndex] = useState(0);\r\n    const containerRef = useRef(null);\r\n    const hasScrolledToInitial = useRef(false);\r\n\r\n    useEffect(() => {\r\n        const fetchUserPosts = async () => {\r\n            try {\r\n                setLoading(true);\r\n\r\n                // Check if we have context posts passed from navigation (e.g. from Search)\r\n                if (location.state?.contextPosts) {\r\n\r\n                    setPosts(location.state.contextPosts);\r\n                    setInitialPostIndex(location.state.initialIndex || 0);\r\n                    setLoading(false);\r\n                    return;\r\n                }\r\n\r\n                // 1. Fetch the selected post to get the user ID\r\n\r\n                const postDoc = await getDoc(doc(db, 'posts', id));\r\n                if (!postDoc.exists()) {\r\n                    logger.warn('Post not found:', id);\r\n                    setLoading(false);\r\n                    return;\r\n                }\r\n\r\n                const selectedPost = { id: postDoc.id, ...postDoc.data() };\r\n                const userId = selectedPost.authorId || selectedPost.userId; // Prefer authorId\r\n\r\n                if (!userId) {\r\n                    // If no user ID, just show the single post\r\n                    setPosts([selectedPost]);\r\n                    setLoading(false);\r\n                    return;\r\n                }\r\n\r\n                // 2. Fetch recent posts from this user (limit to 10 for \"More from this author\")\r\n                try {\r\n\r\n                    const userPostsQuery = query(\r\n                        collection(db, 'posts'),\r\n                        where('authorId', '==', userId),\r\n                        orderBy('createdAt', 'desc'),\r\n                        limit(10)\r\n                    );\r\n                    const postsSnap = await getDocs(userPostsQuery);\r\n                    const userPosts = postsSnap.docs.map(d => ({ id: d.id, ...d.data() }));\r\n\r\n                    // Find the index of the selected post\r\n                    const selectedIndex = userPosts.findIndex(p => p.id === id);\r\n\r\n                    // If the selected post isn't in the feed (e.g. mismatch), add it\r\n                    if (selectedIndex === -1) {\r\n                        userPosts.unshift(selectedPost);\r\n                        setInitialPostIndex(0);\r\n                    } else {\r\n                        setInitialPostIndex(selectedIndex);\r\n                    }\r\n\r\n                    setPosts(userPosts);\r\n                } catch (feedErr) {\r\n                    logger.error(\"Error loading user feed, falling back to single post:\", feedErr);\r\n                    setPosts([selectedPost]);\r\n                    setInitialPostIndex(0);\r\n                }\r\n\r\n            } catch (err) {\r\n                logger.error(\"Error loading posts:\", err);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchUserPosts();\r\n    }, [id, location.state]);\r\n\r\n    // Scroll to the initial post after posts are loaded\r\n    useEffect(() => {\r\n        if (!loading && posts.length > 0 && containerRef.current && !hasScrolledToInitial.current) {\r\n            hasScrolledToInitial.current = true;\r\n\r\n            // Scroll to the selected post\r\n            const postElements = containerRef.current.children;\r\n            if (postElements[initialPostIndex]) {\r\n                postElements[initialPostIndex].scrollIntoView({ behavior: 'instant' });\r\n            }\r\n        }\r\n    }, [loading, posts, initialPostIndex]);\r\n\r\n    if (loading) {\r\n        return (\r\n            <div style={{ height: '100vh', background: '#000', display: 'flex', justifyContent: 'center', alignItems: 'center', color: '#fff' }}>\r\n                Loading...\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (posts.length === 0) {\r\n        return (\r\n            <div style={{ height: '100vh', background: '#000', display: 'flex', justifyContent: 'center', alignItems: 'center', color: '#fff' }}>\r\n                Post not found\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div style={{\r\n            height: '100vh',\r\n            width: '100vw',\r\n            background: '#000',\r\n            position: 'relative',\r\n            userSelect: 'none',\r\n            WebkitUserSelect: 'none',\r\n            WebkitTouchCallout: 'none'\r\n        }}>\r\n            {/* Back Button */}\r\n            <button\r\n                onClick={() => navigate(-1)}\r\n                style={{\r\n                    position: 'fixed',\r\n                    top: '20px',\r\n                    left: '20px',\r\n                    zIndex: 50,\r\n                    background: 'linear-gradient(135deg, rgba(0,0,0,0.7), rgba(0,0,0,0.5))',\r\n                    backdropFilter: 'blur(10px)',\r\n                    border: '1px solid rgba(127, 255, 212, 0.2)',\r\n                    borderRadius: '50%',\r\n                    width: '40px',\r\n                    height: '40px',\r\n                    color: '#fff',\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'center',\r\n                    cursor: 'pointer',\r\n                    boxShadow: '0 4px 16px rgba(0,0,0,0.4), 0 0 0 1px rgba(127, 255, 212, 0.1)'\r\n                }}\r\n            >\r\n                <FaArrowLeft />\r\n            </button>\r\n\r\n            {/* Styles for hiding scrollbar */}\r\n            <style>\r\n                {`\r\n                    .no-scrollbar::-webkit-scrollbar {\r\n                        display: none;\r\n                    }\r\n                    .no-scrollbar {\r\n                         -ms-overflow-style: none;\r\n                        scrollbar-width: none;\r\n                    }\r\n                `}\r\n            </style>\r\n\r\n            {/* Scrollable Feed - Virtualized */}\r\n            <div style={{ height: '100vh', width: '100vw', background: '#000' }}>\r\n                <VirtualizedPostContainer\r\n                    posts={posts}\r\n                    initialIndex={initialPostIndex}\r\n                    renderPost={(post, index, isCurrent) => (\r\n                        <Post\r\n                            post={post}\r\n                            displayMode=\"feed\"\r\n                            priority={isCurrent ? 'high' : 'normal'}\r\n                        />\r\n                    )}\r\n                />\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default PostDetail;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\pages\\Profile.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'updateDoc' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":34,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":43},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'WalletDisplay' is defined but never used. Allowed unused vars must match /^_/u.","line":12,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MuseumCard' is defined but never used. Allowed unused vars must match /^_/u.","line":15,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaCheck' is defined but never used. Allowed unused vars must match /^_/u.","line":23,"column":63,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":70},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaCog' is defined but never used. Allowed unused vars must match /^_/u.","line":23,"column":72,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":77},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaFlag' is defined but never used. Allowed unused vars must match /^_/u.","line":23,"column":90,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":96},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaBan' is defined but never used. Allowed unused vars must match /^_/u.","line":23,"column":98,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":103},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaStar' is defined but never used. Allowed unused vars must match /^_/u.","line":23,"column":147,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":153},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'collectionsLoading' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":79,"column":35,"nodeType":"Identifier","messageId":"unusedVar","endLine":79,"endColumn":53},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'handleBlock' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":147,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":147,"endColumn":22}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { useParams, useNavigate, useLocation } from 'react-router-dom';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { doc, addDoc, deleteDoc, updateDoc, collection, serverTimestamp } from 'firebase/firestore';\r\nimport { db } from '@/firebase';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { useBlock } from '@/hooks/useBlock';\r\nimport { useCollections } from '@/hooks/useCollections';\r\nimport { useProfile } from '@/hooks/useProfile';\r\nimport SEO from '@/components/SEO';\r\nimport StarBackground from '@/components/StarBackground';\r\nimport WalletDisplay from '@/components/WalletDisplay';\r\nimport InfiniteGrid from '@/components/InfiniteGrid';\r\nimport CreateMuseumModal from '@/components/CreateMuseumModal';\r\nimport MuseumCard from '@/components/MuseumCard';\r\nimport ReportModal from '@/components/ReportModal';\r\nimport CreateCardModal from '@/components/CreateCardModal';\r\nimport BusinessCardModal from '@/components/BusinessCardModal';\r\nimport CommissionModal from '@/components/monetization/CommissionModal';\r\nimport WalletModal from '@/components/WalletModal';\r\nimport DisciplinesModal from '@/components/DisciplinesModal';\r\nimport { getUnreadCount } from '@/services/notificationService';\r\nimport { FaPlus, FaLayerGroup, FaTh, FaShoppingBag, FaRocket, FaCheck, FaCog, FaIdBadge, FaFlag, FaBan, FaUserPlus, FaImage, FaWallet, FaPalette, FaStar } from 'react-icons/fa';\r\nimport FollowListModal from '@/components/FollowListModal';\r\nimport { getDocs, query, where, orderBy, limit } from 'firebase/firestore';\r\nimport { isFeatureEnabled } from '@/config/featureFlags';\r\nimport { RocketIcon, AstronautIcon, PlanetIcon } from '@/components/SpaceIcons';\r\nimport PlanetUserIcon from '@/components/PlanetUserIcon'; // Import new shared icon\r\nimport ShopShelfRow from '@/components/ShopShelfRow'; // NEW: Shop Shelf Component\r\nimport { COLORS, getGradientCss, getThemeGradient } from '@/core/theme/colors';\r\nimport { useThemeStore } from '@/core/store/useThemeStore';\r\nimport { useFeedStore } from '@/core/store/useFeedStore';\r\n\r\nimport { useLayoutEngine } from '@/core/responsive/useLayoutEngine';\r\nimport SmartImage from '@/components/SmartImage';\r\nimport { renderCosmicUsername } from '@/utils/usernameRenderer';\r\n\r\n\r\nimport BannerThemeRenderer from '@/components/profile/BannerThemeRenderer';\r\n\r\nconst Profile = () => {\r\n    const { id } = useParams();\r\n    const navigate = useNavigate();\r\n    const location = useLocation();\r\n    const { currentUser } = useAuth();\r\n    const { blockUser } = useBlock();\r\n    const { t } = useTranslation();\r\n    const { setProfileAccent, resetProfileAccent } = useThemeStore();\r\n    const [showCreateMuseumModal, setShowCreateMuseumModal] = useState(false);\r\n\r\n    // Responsive Layout Engine\r\n    const { layout, isMobile, getSafeSpacing } = useLayoutEngine('profile');\r\n\r\n    const targetId = (id === 'me' || !id) ? currentUser?.uid : id;\r\n\r\n    const [activeTab, setActiveTab] = useState('posts');\r\n\r\n    // Handle initial tab from URL query params\r\n    React.useEffect(() => {\r\n        const params = new URLSearchParams(location.search);\r\n        const tabParam = params.get('tab');\r\n        if (tabParam) {\r\n            setActiveTab(tabParam);\r\n        }\r\n    }, [location.search]);\r\n    const [showReportModal, setShowReportModal] = useState(false);\r\n    const [showBusinessCard, setShowBusinessCard] = useState(false);\r\n    const [showCreateCardModal, setShowCreateCardModal] = useState(false);\r\n    const [showCommissionModal, setShowCommissionModal] = useState(false);\r\n    const [showDisciplinesModal, setShowDisciplinesModal] = useState(false);\r\n    const [showFollowList, setShowFollowList] = useState(false);\r\n    const [followListType, setFollowListType] = useState('followers');\r\n    const { currentFeed: feedType, toggleFeed } = useFeedStore();\r\n    const [showAddFunds, setShowAddFunds] = useState(false);\r\n    const [showProfilePopout, setShowProfilePopout] = useState(false);\r\n    const [followLoading, setFollowLoading] = useState(false);\r\n    const [unreadNotifications, setUnreadNotifications] = useState(0);\r\n    const [orders, setOrders] = useState([]);\r\n    const { collections, loading: collectionsLoading } = useCollections(targetId);\r\n\r\n    const {\r\n        user,\r\n        posts,\r\n        shopItems,\r\n        spaceCards,\r\n        badges,\r\n        loading,\r\n        isFollowing,\r\n        followDocId,\r\n        setIsFollowing,\r\n        setFollowDocId,\r\n        setSpaceCards\r\n    } = useProfile(targetId, currentUser, activeTab, feedType);\r\n\r\n    // Fetch orders for Gallery tab\r\n    React.useEffect(() => {\r\n        const fetchOrders = async () => {\r\n            if (activeTab === 'gallery' && targetId) {\r\n                try {\r\n                    // ≡ƒöÆ SAFETY: Limit to 30 most recent orders\r\n                    // WHY: User with 1000 orders = 1000 reads every profile view\r\n                    // With limit(30): Only 30 reads, can add \"Load More\" if needed\r\n                    const q = query(\r\n                        collection(db, 'orders'),\r\n                        where('userId', '==', targetId),\r\n                        orderBy('createdAt', 'desc'),\r\n                        limit(30)\r\n                    );\r\n                    const snapshot = await getDocs(q);\r\n                    setOrders(snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() })));\r\n                } catch (error) {\r\n                    console.error('Error fetching orders:', error);\r\n                }\r\n            }\r\n        };\r\n        fetchOrders();\r\n    }, [activeTab, targetId]);\r\n\r\n    const handleFollow = async () => {\r\n        if (!currentUser || followLoading) return;\r\n\r\n        setFollowLoading(true);\r\n        try {\r\n            if (isFollowing && followDocId) {\r\n                await deleteDoc(doc(db, 'follows', followDocId));\r\n                setIsFollowing(false);\r\n                setFollowDocId(null);\r\n            } else {\r\n                const docRef = await addDoc(collection(db, 'follows'), {\r\n                    followerId: currentUser.uid,\r\n                    followerName: currentUser.displayName || 'Anonymous',\r\n                    followingId: targetId,\r\n                    followingName: user.displayName || 'User',\r\n                    createdAt: serverTimestamp()\r\n                });\r\n                setIsFollowing(true);\r\n                setFollowDocId(docRef.id);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error toggling follow:', error);\r\n            alert('Failed to update follow status');\r\n        } finally {\r\n            setFollowLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleBlock = async () => {\r\n        if (!currentUser || !targetId) return;\r\n        if (window.confirm(`Are you sure you want to block ${user.displayName}?`)) {\r\n            try {\r\n                await blockUser(targetId);\r\n                navigate('/');\r\n            } catch (error) {\r\n                console.error('Error blocking user:', error);\r\n                alert('Failed to block user');\r\n            }\r\n        }\r\n    };\r\n\r\n    // Fetch unread notification count\r\n    React.useEffect(() => {\r\n        const loadUnreadCount = async () => {\r\n            if (currentUser && targetId === currentUser.uid) {\r\n                try {\r\n                    const count = await getUnreadCount(currentUser.uid);\r\n                    setUnreadNotifications(count);\r\n                } catch (err) {\r\n                    console.error('Error loading unread count:', err);\r\n                }\r\n            }\r\n        };\r\n\r\n        loadUnreadCount();\r\n        // Poll every 30 seconds\r\n        const interval = setInterval(loadUnreadCount, 30000);\r\n        return () => clearInterval(interval);\r\n    }, [currentUser, targetId]);\r\n\r\n    // Determine Banner Background and Mode - moved up for Hooks\r\n    const bannerMode = user?.profileTheme?.bannerMode || 'stars';\r\n    const bannerGradientId = user?.profileTheme?.gradientId || 'aurora-horizon';\r\n    const bannerGradient = getGradientCss(bannerGradientId);\r\n\r\n    let effectiveUsernameColor = user?.profileTheme?.usernameColor || '#FFFFFF';\r\n    const isGradientMode = ['gradient', 'simple_gradient'].includes(bannerMode);\r\n\r\n    // Calculate contrast and other colors...\r\n    // (Note: I am not modifying the lines I don't need to. I will target specific blocks)\r\n    // --- SMART CONTRAST CHECK ---\r\n    // Ensure username is visible against the background\r\n    if (effectiveUsernameColor) {\r\n        const uc = effectiveUsernameColor.toLowerCase();\r\n\r\n        // 1. Simple Gradient: Direct Color Match\r\n        if (bannerMode === 'simple_gradient') {\r\n            const bg = user.profileTheme?.bannerColor?.toLowerCase();\r\n            if (bg && uc === bg) effectiveUsernameColor = '#FFFFFF';\r\n        }\r\n        // 2. Presets: Check if color is part of the gradient definition (excluding white)\r\n        else if (bannerMode === 'gradient') {\r\n            const grad = getThemeGradient(bannerGradientId);\r\n            if (grad?.background?.toLowerCase().includes(uc) && uc !== '#ffffff') {\r\n                effectiveUsernameColor = '#FFFFFF';\r\n            }\r\n        }\r\n        // 3. Dark Themes (City, Ocean, Stars, Neon): Clash with Black/Dark\r\n        else if (['stars', 'neonGrid', 'cyberpunkLines'].includes(bannerMode) || bannerMode.startsWith('city') || bannerMode.startsWith('ocean')) {\r\n            if (['#000000', '#050505', '#000', '#111', '#0a0a0a'].includes(uc)) {\r\n                effectiveUsernameColor = '#FFFFFF';\r\n            }\r\n        }\r\n    }\r\n\r\n    const solidPlanetColor = (effectiveUsernameColor?.match(/#[0-9a-fA-F]{6}/) || [COLORS.iceMint])[0];\r\n\r\n    const isFadingToBlack = isGradientMode &&\r\n        (bannerGradientId?.endsWith('black') ||\r\n            ['night-sky'].includes(bannerGradientId));\r\n\r\n\r\n\r\n    // Set Global Profile Accent for MobileNavigation\r\n    React.useEffect(() => {\r\n        if (user && !loading) {\r\n            setProfileAccent(effectiveUsernameColor);\r\n        }\r\n        return () => resetProfileAccent();\r\n    }, [effectiveUsernameColor, setProfileAccent, resetProfileAccent, user, loading]);\r\n\r\n    if (loading) return <div className=\"ps-loading\">Loading...</div>;\r\n\r\n    if (!user) {\r\n        return (\r\n            <div className=\"ps-loading-column\">\r\n                <SEO title=\"User Not Found\" />\r\n                <h2>User not found</h2>\r\n                <button onClick={() => navigate('/')} style={{ padding: '0.5rem 1rem', background: '#333', color: '#fff', border: 'none', borderRadius: '4px' }}>Go Home</button>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // Derived state that requires user to be present (though user is present here due to checks above)\r\n    const isOwnProfile = currentUser?.uid === user.id;\r\n\r\n\r\n    return (\r\n        <div className=\"ps-page\">\r\n            <SEO\r\n                title={user.displayName || 'Profile'}\r\n                description={user.bio || `Check out ${user.displayName}'s profile on Panospace.`}\r\n                type=\"profile\"\r\n            />\r\n            {/* Header with Space Theme */}\r\n            <div style={{\r\n                background: isGradientMode ? bannerGradient : COLORS.black,\r\n                paddingTop: '0',\r\n                paddingBottom: '0', // Removed minimal padding\r\n                // Hide border if fading to black\r\n                borderBottom: isFadingToBlack ? '1px solid rgba(127, 255, 212, 0.06)' : '1px solid rgba(127, 255, 212, 0.2)',\r\n                width: '100%',\r\n                boxSizing: 'border-box',\r\n                position: 'relative'\r\n            }}>\r\n                {/* Animated Stars Background - Only if enabled */}\r\n                {/* Animated Stars Background - Only if enabled (Delegate to BannerRenderer for City/Ocean) */}\r\n                {(bannerMode === 'stars' || (user.profileTheme?.useStarsOverlay && !bannerMode.startsWith('city') && !bannerMode.startsWith('ocean'))) && (\r\n                    <StarBackground\r\n                        starColor={user.profileTheme?.starColor || COLORS.iceMint}\r\n                        transparent={isGradientMode || bannerMode === 'neonGrid'}\r\n                        maskTop={bannerMode === 'neonGrid'}\r\n                    />\r\n                )}\r\n\r\n                {/* Modular Banner Theme Renderer */}\r\n\r\n                <BannerThemeRenderer\r\n                    mode={bannerMode}\r\n                    color={user.profileTheme?.bannerColor || user.profileTheme?.borderColor || '#7FFFD4'}\r\n                    starSettings={{\r\n                        enabled: user.profileTheme?.useStarsOverlay,\r\n                        color: user.profileTheme?.starColor\r\n                    }}\r\n                />\r\n\r\n                {/* Gradient Polish Overlays (Noise + Vignette) - Only if gradient mode */}\r\n                {(isGradientMode) && (\r\n                    <>\r\n\r\n\r\n                        {/* 2. Bottom Vignette (Soft Fade) */}\r\n                        <div style={{\r\n                            position: 'absolute',\r\n                            bottom: 0,\r\n                            left: 0,\r\n                            right: 0,\r\n                            height: '40%', // Fade covers bottom 40%\r\n                            background: 'linear-gradient(to top, rgba(0,0,0,0.4) 0%, transparent 100%)',\r\n                            pointerEvents: 'none',\r\n                            zIndex: 0\r\n                        }} />\r\n                    </>\r\n                )}\r\n\r\n                {/* Content Layer */}\r\n                <div style={{\r\n                    width: '100%',\r\n                    // removed maxWidth/margin auto to allow true left alignment relative to screen\r\n                    position: 'relative',\r\n                    zIndex: 1,\r\n                    padding: `0.25rem ${layout.paddingX}`,\r\n                    display: 'flex',\r\n                    flexDirection: 'column',\r\n                    alignItems: 'stretch'\r\n                }}>\r\n\r\n                    {/* --- ACTIONS & NAVIGATION --- */}\r\n\r\n                    {/* Small Planet Home Icon - Fixed Top Left (Global Position) */}\r\n                    <button\r\n                        onClick={() => navigate('/')}\r\n                        style={{\r\n                            position: 'fixed',\r\n                            top: getSafeSpacing('top', '0.75rem'),\r\n                            left: '1rem',\r\n                            width: layout.profile.actionButtonSize,\r\n                            height: layout.profile.actionButtonSize,\r\n                            background: 'transparent',\r\n                            border: 'none',\r\n                            cursor: 'pointer',\r\n                            padding: 0,\r\n                            zIndex: 10000,\r\n                            transition: 'opacity 0.2s',\r\n                            filter: `drop-shadow(0 0 8px ${solidPlanetColor}4D)`\r\n                        }}\r\n                        title=\"Go to Home Feed\"\r\n                    >\r\n                        <svg width={layout.profile.actionButtonSize} height={layout.profile.actionButtonSize} viewBox=\"-5 -5 34 34\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                            <defs>\r\n                                <radialGradient id=\"planetGradientProfile\" cx=\"40%\" cy=\"40%\">\r\n                                    <stop offset=\"0%\" style={{ stopColor: solidPlanetColor, stopOpacity: 1 }} />\r\n                                    <stop offset=\"100%\" style={{ stopColor: solidPlanetColor, stopOpacity: 0.8 }} />\r\n                                </radialGradient>\r\n                                <filter id=\"planetGlowProfile\">\r\n                                    <feGaussianBlur stdDeviation=\"2\" result=\"coloredBlur\" />\r\n                                    <feMerge>\r\n                                        <feMergeNode in=\"coloredBlur\" />\r\n                                        <feMergeNode in=\"SourceGraphic\" />\r\n                                    </feMerge>\r\n                                </filter>\r\n                            </defs>\r\n                            <ellipse cx=\"12\" cy=\"12\" rx=\"14\" ry=\"4\" fill=\"none\" stroke={solidPlanetColor} strokeWidth=\"1.5\" opacity=\"0.4\" transform=\"rotate(-20 12 12)\" />\r\n                            <circle cx=\"12\" cy=\"12\" r=\"7\" fill=\"url(#planetGradientProfile)\" opacity=\"0.95\" filter=\"url(#planetGlowProfile)\" />\r\n                            <ellipse cx=\"12\" cy=\"12\" rx=\"14\" ry=\"4\" fill=\"none\" stroke={solidPlanetColor} strokeWidth=\"1.5\" opacity=\"0.6\" transform=\"rotate(-20 12 12)\" strokeDasharray=\"0,8,20,100\" />\r\n                            <circle cx=\"12\" cy=\"12\" r=\"7\" fill=\"none\" stroke={solidPlanetColor} strokeWidth=\"0.5\" opacity=\"0.3\" />\r\n                        </svg>\r\n                    </button>\r\n\r\n                    <div style={{\r\n                        display: 'flex',\r\n                        flexDirection: 'column',\r\n                        alignItems: 'center', // Center Username\r\n                        justifyContent: 'center',\r\n                        width: '100%',\r\n                        marginTop: '0', // Tightened to 0\r\n                        marginBottom: '0'\r\n                    }}>\r\n                        {/* Username - Single Source of Truth */}\r\n                        <h1 style={{\r\n                            fontSize: layout.profile.usernameSize,\r\n                            fontWeight: '800',\r\n                            margin: '0',\r\n                            fontFamily: 'var(--font-family-heading)',\r\n                            letterSpacing: '0.02em',\r\n                            textTransform: 'uppercase',\r\n                            lineHeight: '1.0',\r\n                            background: (effectiveUsernameColor && effectiveUsernameColor.includes('gradient'))\r\n                                ? effectiveUsernameColor\r\n                                : 'transparent',\r\n                            WebkitBackgroundClip: (effectiveUsernameColor && effectiveUsernameColor.includes('gradient'))\r\n                                ? 'text' : 'border-box',\r\n                            WebkitTextFillColor: (effectiveUsernameColor && effectiveUsernameColor.includes('gradient'))\r\n                                ? 'transparent' : (effectiveUsernameColor || '#FFFFFF'),\r\n                            color: (effectiveUsernameColor && !effectiveUsernameColor.includes('gradient'))\r\n                                ? effectiveUsernameColor\r\n                                : '#FFFFFF',\r\n                            textShadow: user.profileTheme?.textGlow\r\n                                ? `0 0 12px ${solidPlanetColor}80, 0 0 24px ${solidPlanetColor}40`\r\n                                : '0 0 30px rgba(0,0,0,0.5)',\r\n                            wordBreak: 'break-word',\r\n                            textAlign: 'center' // Explicitly center text\r\n                        }}>\r\n                            {renderCosmicUsername(user.username, user.profileTheme?.borderColor, user.profileTheme?.textGlow)}\r\n                        </h1>\r\n\r\n                    </div>\r\n\r\n                    {/* --- LAYER 2: STATS & ACTIONS --- */}\r\n                    <div style={{\r\n                        display: 'flex',\r\n                        flexDirection: 'column',\r\n                        alignItems: 'flex-start',\r\n                        textAlign: 'left',\r\n                        width: '100%',\r\n                        marginTop: '0px',\r\n                        marginBottom: '0px'\r\n                    }}>\r\n\r\n\r\n\r\n\r\n                        {/* Follow / Commission Buttons */}\r\n                        {false && !isOwnProfile && (\r\n                            <div style={{ marginTop: '12px', display: 'flex', gap: '0.75rem' }}>\r\n                                <button\r\n                                    onClick={handleFollow}\r\n                                    disabled={followLoading}\r\n                                    style={{\r\n                                        padding: '0.5rem 1.25rem',\r\n                                        background: isFollowing ? 'transparent' : (user.profileTheme?.usernameColor && !user.profileTheme.usernameColor.includes('gradient') ? user.profileTheme.usernameColor : 'var(--ice-mint)'),\r\n                                        border: `1px solid ${isFollowing ? (user.profileTheme?.usernameColor && !user.profileTheme.usernameColor.includes('gradient') ? user.profileTheme.usernameColor : 'var(--ice-mint)') : 'transparent'}`,\r\n                                        borderRadius: '2px',\r\n                                        color: isFollowing ? (user.profileTheme?.usernameColor && !user.profileTheme.usernameColor.includes('gradient') ? user.profileTheme.usernameColor : 'var(--ice-mint)') : '#000',\r\n                                        fontWeight: '700',\r\n                                        cursor: followLoading ? 'not-allowed' : 'pointer',\r\n                                        fontSize: '0.8rem',\r\n                                        opacity: followLoading ? 0.6 : 1,\r\n                                        fontFamily: 'var(--font-family-heading)',\r\n                                        letterSpacing: '0.05em',\r\n                                        textTransform: 'uppercase',\r\n                                        clipPath: 'polygon(8px 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%, 0 8px)'\r\n                                    }}\r\n                                >\r\n                                    {isFollowing ? 'Following' : 'Follow'}\r\n                                </button>\r\n                                <button\r\n                                    onClick={() => setShowCommissionModal(true)}\r\n                                    style={{\r\n                                        padding: '0.5rem 1.25rem',\r\n                                        background: 'rgba(255,255,255,0.1)',\r\n                                        border: '1px solid rgba(255,255,255,0.2)',\r\n                                        borderRadius: '2px',\r\n                                        color: '#fff',\r\n                                        fontWeight: '600',\r\n                                        cursor: 'pointer',\r\n                                        fontSize: '0.8rem',\r\n                                        fontFamily: 'var(--font-family-heading)',\r\n                                        letterSpacing: '0.05em',\r\n                                        textTransform: 'uppercase',\r\n                                        clipPath: 'polygon(8px 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%, 0 8px)'\r\n                                    }}\r\n                                >\r\n                                    Commission\r\n                                </button>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* --- LAYER 3: AVATAR (Relative Centered) --- */}\r\n                    <div\r\n                        style={{\r\n                            position: 'relative', // Resets to flow\r\n                            marginTop: '2px',\r\n                            marginBottom: '0.5rem', // Added space between avatar and username\r\n                            display: 'flex',\r\n                            justifyContent: 'center',\r\n                            width: 'auto',\r\n                            zIndex: 10\r\n                        }}>\r\n                        <div\r\n                            onClick={(e) => { e.stopPropagation(); setShowProfilePopout(prev => !prev); }}\r\n                            style={{\r\n                                position: 'relative',\r\n                                width: layout.profile.avatarSize,\r\n                                height: layout.profile.avatarSize,\r\n                                borderRadius: '20px', // Slightly sharper rounding\r\n                                background: '#000',\r\n                                zIndex: 10,\r\n                                cursor: 'pointer'\r\n                            }}>\r\n                            {/* Iridescent/Gradient Border Effect */}\r\n                            {user.profileTheme?.borderColor && user.profileTheme.borderColor.includes('gradient') && (\r\n                                <div style={{\r\n                                    position: 'absolute',\r\n                                    inset: '-3px',\r\n                                    borderRadius: '23px',\r\n                                    background: user.profileTheme.borderColor,\r\n                                    backgroundSize: '200% 200%',\r\n                                    animation: 'iridescent-border 3s linear infinite',\r\n                                    zIndex: 0\r\n                                }} />\r\n                            )}\r\n\r\n                            <div style={{\r\n                                width: '100%',\r\n                                height: '100%',\r\n                                borderRadius: '20px',\r\n                                overflow: 'hidden',\r\n                                border: (user.profileTheme?.borderColor && user.profileTheme.borderColor.includes('gradient'))\r\n                                    ? 'none'\r\n                                    : `2px solid ${user.profileTheme?.borderColor || 'rgba(127, 255, 212, 0.3)'}`,\r\n                                position: 'relative',\r\n                                zIndex: 1,\r\n                                background: '#111',\r\n                                boxShadow: user.profileTheme?.textGlow\r\n                                    ? `0 0 15px ${user.profileTheme?.borderColor || solidPlanetColor}66, 0 8px 32px rgba(0,0,0,0.5)`\r\n                                    : '0 8px 32px rgba(0,0,0,0.5)'\r\n                            }}>\r\n                                {user.photoURL ? (\r\n                                    <img src={user.photoURL} alt={user.displayName} style={{ width: '100%', height: '100%', objectFit: 'cover' }} />\r\n                                ) : (\r\n                                    <div style={{ width: '100%', height: '100%', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\r\n                                        <PlanetUserIcon size={parseInt(layout.profile.avatarSize, 10) * 0.7} color={user.profileTheme?.usernameColor || '#7FFFD4'} />\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n\r\n                            {/* Notification Badge */}\r\n                            {isOwnProfile && unreadNotifications > 0 && (\r\n                                <div\r\n                                    onClick={(e) => { e.stopPropagation(); navigate('/notifications'); }}\r\n                                    style={{\r\n                                        position: 'absolute',\r\n                                        top: '-4px',\r\n                                        right: '-4px',\r\n                                        width: '18px',\r\n                                        height: '18px',\r\n                                        background: '#00ff00',\r\n                                        borderRadius: '50%',\r\n                                        border: '2px solid #000',\r\n                                        boxShadow: '0 0 8px rgba(0, 255, 0, 0.8)',\r\n                                        cursor: 'pointer',\r\n                                        zIndex: 20,\r\n                                        animation: 'pulse 2s infinite'\r\n                                    }}\r\n                                />\r\n                            )}\r\n\r\n                            {/* Profile Info Popout */}\r\n                            {showProfilePopout && (\r\n                                <>\r\n                                    <div style={{ position: 'fixed', inset: 0, zIndex: 99, cursor: 'default' }} onClick={(e) => { e.stopPropagation(); setShowProfilePopout(false); }} />\r\n                                    <div style={{\r\n                                        position: 'absolute',\r\n                                        top: 'calc(100% + 12px)',\r\n                                        left: '50%',\r\n                                        transform: 'translateX(-50%)',\r\n                                        background: 'rgba(10, 10, 10, 0.95)',\r\n                                        backdropFilter: 'blur(16px)',\r\n                                        border: `1px solid ${user.profileTheme?.borderColor || '#7FFFD4'}`,\r\n                                        borderRadius: '16px',\r\n                                        padding: '1.25rem',\r\n                                        zIndex: 100,\r\n                                        width: 'max-content',\r\n                                        minWidth: '220px',\r\n                                        boxShadow: '0 20px 50px rgba(0,0,0,0.8)',\r\n                                        display: 'flex',\r\n                                        cursor: 'default',\r\n                                        flexDirection: 'column',\r\n                                        gap: '1rem',\r\n                                        textAlign: 'left'\r\n                                    }} onClick={(e) => e.stopPropagation()}>\r\n                                        {/* Social Section */}\r\n                                        <div>\r\n                                            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '0.35rem' }}>\r\n                                                <h4 style={{ margin: '0', fontSize: '0.75rem', opacity: 0.6, textTransform: 'uppercase', letterSpacing: '0.5px', color: user.profileTheme?.usernameColor }}>Social</h4>\r\n\r\n                                                {!isOwnProfile ? (\r\n                                                    <button\r\n                                                        onClick={handleFollow}\r\n                                                        disabled={followLoading}\r\n                                                        style={{\r\n                                                            padding: '2px 8px',\r\n                                                            fontSize: '0.65rem',\r\n                                                            background: 'transparent',\r\n                                                            border: `1px solid ${user.profileTheme?.usernameColor && !user.profileTheme.usernameColor.includes('gradient') ? user.profileTheme.usernameColor : 'var(--ice-mint)'}`,\r\n                                                            borderRadius: '4px',\r\n                                                            color: user.profileTheme?.usernameColor && !user.profileTheme.usernameColor.includes('gradient') ? user.profileTheme.usernameColor : 'var(--ice-mint)',\r\n                                                            fontWeight: '600',\r\n                                                            cursor: followLoading ? 'wait' : 'pointer',\r\n                                                            textTransform: 'uppercase',\r\n                                                            letterSpacing: '0.05em',\r\n                                                            fontFamily: 'var(--font-family-heading)',\r\n                                                            opacity: followLoading ? 0.5 : 1\r\n                                                        }}\r\n                                                    >\r\n                                                        {isFollowing ? t('profile.following') : t('profile.follow')}\r\n                                                    </button>\r\n                                                ) : (\r\n                                                    <button\r\n                                                        onClick={() => navigate('/edit-profile')}\r\n                                                        style={{\r\n                                                            padding: '2px 8px',\r\n                                                            fontSize: '0.65rem',\r\n                                                            background: 'transparent',\r\n                                                            border: `1px solid ${user.profileTheme?.usernameColor && !user.profileTheme.usernameColor.includes('gradient') ? user.profileTheme.usernameColor : 'var(--ice-mint)'}`,\r\n                                                            borderRadius: '4px',\r\n                                                            color: user.profileTheme?.usernameColor && !user.profileTheme.usernameColor.includes('gradient') ? user.profileTheme.usernameColor : 'var(--ice-mint)',\r\n                                                            fontWeight: '600',\r\n                                                            cursor: 'pointer',\r\n                                                            textTransform: 'uppercase',\r\n                                                            letterSpacing: '0.05em',\r\n                                                            fontFamily: 'var(--font-family-heading)'\r\n                                                        }}\r\n                                                    >\r\n                                                        {t('profile.editProfile')}\r\n                                                    </button>\r\n                                                )}\r\n                                            </div>\r\n                                            <div style={{ display: 'flex', gap: '1.25rem', alignItems: 'center' }}>\r\n                                                <div onClick={() => { setFollowListType('following'); setShowFollowList(true); setShowProfilePopout(false); }} style={{ cursor: 'pointer', display: 'flex', alignItems: 'baseline', gap: '0.4rem' }}>\r\n                                                    <span style={{ fontSize: '1rem', fontWeight: '800', fontFamily: 'var(--font-family-heading)', color: user.profileTheme?.usernameColor }}>{user.followingCount || 0}</span>\r\n                                                    <span style={{ fontSize: '0.8rem', opacity: 0.8 }}>{t('profile.following')}</span>\r\n                                                </div>\r\n                                                <div onClick={() => { setFollowListType('followers'); setShowFollowList(true); setShowProfilePopout(false); }} style={{ cursor: 'pointer', display: 'flex', alignItems: 'baseline', gap: '0.4rem' }}>\r\n                                                    <span style={{ fontSize: '1rem', fontWeight: '800', fontFamily: 'var(--font-family-heading)', color: user.profileTheme?.usernameColor }}>{user.followersCount || 0}</span>\r\n                                                    <span style={{ fontSize: '0.8rem', opacity: 0.8 }}>{t('profile.followers')}</span>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        {/* Creative Section */}\r\n                                        {(user.disciplines?.main?.length > 0) && (\r\n                                            <div>\r\n                                                <h4 style={{ margin: '0 0 0.35rem 0', fontSize: '0.75rem', opacity: 0.6, textTransform: 'uppercase', letterSpacing: '0.5px', color: user.profileTheme?.usernameColor }}>Creative</h4>\r\n                                                <div onClick={() => { setShowDisciplinesModal(true); setShowProfilePopout(false); }} style={{ cursor: 'pointer', display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                                                    <FaPalette size={14} color={(user.profileTheme?.usernameColor && !user.profileTheme.usernameColor.includes('gradient')) ? user.profileTheme.usernameColor : '#fff'} />\r\n                                                    <span style={{ fontSize: '0.9rem' }}>{user.disciplines.main.length} Disciplines</span>\r\n                                                </div>\r\n                                            </div>\r\n                                        )}\r\n\r\n                                        {/* Collectibles Section */}\r\n                                        {spaceCards?.length > 0 && (\r\n                                            <div>\r\n                                                <h4 style={{ margin: '0 0 0.35rem 0', fontSize: '0.75rem', opacity: 0.6, textTransform: 'uppercase', letterSpacing: '0.5px', color: user.profileTheme?.usernameColor }}>Collectibles</h4>\r\n                                                <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                                                    <PlanetIcon size={14} color={(user.profileTheme?.usernameColor && !user.profileTheme.usernameColor.includes('gradient')) ? user.profileTheme.usernameColor : '#fff'} />\r\n                                                    <span style={{ fontSize: '0.9rem' }}>{spaceCards.length} Space Cards</span>\r\n                                                </div>\r\n                                            </div>\r\n                                        )}\r\n\r\n                                        {/* Identity/Wallet Section */}\r\n                                        <div>\r\n                                            <h4 style={{ margin: '0 0 0.35rem 0', fontSize: '0.75rem', opacity: 0.6, textTransform: 'uppercase', letterSpacing: '0.5px', color: user.profileTheme?.usernameColor }}>Identity</h4>\r\n                                            <div style={{ display: 'flex', flexDirection: 'column', gap: '0.5rem' }}>\r\n                                                <div onClick={() => { setShowBusinessCard(true); setShowProfilePopout(false); }} style={{ cursor: 'pointer', display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                                                    <FaIdBadge size={14} color={(user.profileTheme?.usernameColor && !user.profileTheme.usernameColor.includes('gradient')) ? user.profileTheme.usernameColor : '#fff'} />\r\n                                                    <span style={{ fontSize: '0.9rem' }}>{t('profile.businessCard')}</span>\r\n                                                </div>\r\n                                                {isOwnProfile && (\r\n                                                    <div onClick={() => { setShowAddFunds(true); setShowProfilePopout(false); }} style={{ cursor: 'pointer', display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                                                        <FaWallet size={14} color={(user.profileTheme?.usernameColor && !user.profileTheme.usernameColor.includes('gradient')) ? user.profileTheme.usernameColor : '#fff'} />\r\n                                                        <span style={{ fontSize: '0.9rem' }}>{t('profile.wallet')}</span>\r\n                                                    </div>\r\n                                                )}\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        {/* Actions Section */}\r\n                                        {!isOwnProfile && (\r\n                                            <div>\r\n                                                <h4 style={{ margin: '0 0 0.35rem 0', fontSize: '0.75rem', opacity: 0.6, textTransform: 'uppercase', letterSpacing: '0.5px', color: user.profileTheme?.usernameColor }}>Actions</h4>\r\n                                                <div onClick={() => { setShowCommissionModal(true); setShowProfilePopout(false); }} style={{ cursor: 'pointer', display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                                                    <FaRocket size={14} color={(user.profileTheme?.usernameColor && !user.profileTheme.usernameColor.includes('gradient')) ? user.profileTheme.usernameColor : '#fff'} />\r\n                                                    <span style={{ fontSize: '0.9rem' }}>Commission</span>\r\n                                                </div>\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                </>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n\r\n\r\n\r\n                    {/* --- NEW STATS ROW (HIDDEN) --- */}\r\n                    {false && (\r\n                        <div style={{\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            justifyContent: 'center',\r\n                            gap: '2rem', // Generous spacing\r\n                            marginTop: '4px', // Symmetric space above\r\n                            marginBottom: '4px', // Symmetric space below\r\n                            zIndex: 50\r\n                        }}>\r\n                            {/* Following */}\r\n                            <button\r\n                                onClick={() => { setFollowListType('following'); setShowFollowList(true); }}\r\n                                style={{\r\n                                    background: 'transparent',\r\n                                    border: 'none',\r\n                                    cursor: 'pointer',\r\n                                    display: 'flex',\r\n                                    alignItems: 'center',\r\n                                    gap: '8px',\r\n                                    color: (user.profileTheme?.usernameColor && !user.profileTheme.usernameColor.includes('gradient')) ? user.profileTheme.usernameColor : '#fff',\r\n                                    fontFamily: 'var(--font-family-heading)',\r\n                                    fontSize: '1rem',\r\n                                    fontWeight: '600'\r\n                                }}\r\n                            >\r\n                                <RocketIcon size={20} color={(user.profileTheme?.usernameColor && !user.profileTheme.usernameColor.includes('gradient')) ? user.profileTheme.usernameColor : '#fff'} />\r\n                                {user.followingCount || 0}\r\n                            </button>\r\n\r\n                            {/* Followers */}\r\n                            <button\r\n                                onClick={() => { setFollowListType('followers'); setShowFollowList(true); }}\r\n                                style={{\r\n                                    background: 'transparent',\r\n                                    border: 'none',\r\n                                    cursor: 'pointer',\r\n                                    display: 'flex',\r\n                                    alignItems: 'center',\r\n                                    gap: '8px',\r\n                                    color: (user.profileTheme?.usernameColor && !user.profileTheme.usernameColor.includes('gradient')) ? user.profileTheme.usernameColor : '#fff',\r\n                                    fontFamily: 'var(--font-family-heading)',\r\n                                    fontSize: '1rem',\r\n                                    fontWeight: '600'\r\n                                }}\r\n                            >\r\n                                <AstronautIcon size={20} color={(user.profileTheme?.usernameColor && !user.profileTheme.usernameColor.includes('gradient')) ? user.profileTheme.usernameColor : '#fff'} />\r\n                                {user.followersCount || 0}\r\n                            </button>\r\n\r\n                            {/* Disciplines */}\r\n                            {user.disciplines?.main?.length > 0 && (\r\n                                <button\r\n                                    onClick={() => setShowDisciplinesModal(true)}\r\n                                    style={{\r\n                                        background: 'transparent',\r\n                                        border: 'none',\r\n                                        cursor: 'pointer',\r\n                                        display: 'flex',\r\n                                        alignItems: 'center',\r\n                                        gap: '8px',\r\n                                        color: (user.profileTheme?.usernameColor && !user.profileTheme.usernameColor.includes('gradient')) ? user.profileTheme.usernameColor : '#fff',\r\n                                        fontFamily: 'var(--font-family-heading)',\r\n                                        fontSize: '1rem',\r\n                                        fontWeight: '600'\r\n                                    }}\r\n                                >\r\n                                    <FaPalette size={20} />\r\n                                    {user.disciplines.main.length}\r\n                                </button>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div >\r\n\r\n            {/* Tabs */}\r\n            <div style={{\r\n                borderBottom: '1px solid #222',\r\n                marginBottom: isMobile ? '0.75rem' : '2rem',\r\n                marginTop: '1rem', // Balanced spacing\r\n                overflowX: 'auto'\r\n            }}>\r\n                <div style={{\r\n                    display: 'flex',\r\n                    justifyContent: 'center', // Center the tabs\r\n                    width: '100%', // Ensure full width for centering\r\n                    minWidth: 'max-content',\r\n                    // paddingLeft removed to allow centering\r\n                    // paddingRight removed\r\n                }}>\r\n                    {[\r\n                        { id: 'posts', label: t('tab.posts'), icon: FaTh, enabled: true },\r\n                        { id: 'collections', label: 'Collections', icon: FaLayerGroup, enabled: isFeatureEnabled('COLLECTIONS') },\r\n                        { id: 'shop', label: t('tab.shop'), icon: FaShoppingBag, enabled: true },\r\n                        { id: 'gallery', label: t('tab.galleries'), icon: FaImage, enabled: isFeatureEnabled('GALLERIES') },\r\n                        { id: 'cards', label: 'Cards', icon: PlanetIcon, enabled: isFeatureEnabled('SPACECARDS_CREATE') }\r\n                    ].filter(tab => tab.enabled).map(tab => {\r\n                        const Icon = tab.icon;\r\n                        const isSelected = activeTab === tab.id;\r\n\r\n                        // Tab Color Logic\r\n                        const usernameColor = user.profileTheme?.usernameColor || '#FFFFFF';\r\n                        const isGradient = usernameColor.includes('gradient');\r\n                        const bioColor = user.profileTheme?.bioColor || 'rgba(255,255,255,0.7)'; // Default dimmed color\r\n\r\n                        // Determine styles based on selection and color type\r\n                        let tabStyle = {};\r\n\r\n                        if (isSelected) {\r\n                            if (isGradient) {\r\n                                tabStyle = {\r\n                                    background: usernameColor,\r\n                                    WebkitBackgroundClip: 'text',\r\n                                    WebkitTextFillColor: 'transparent',\r\n                                    borderBottom: '2px solid transparent', // Can't easily gradient border here without extra div, use white or primary stop for now?\r\n                                    // Hack for gradient border-bottom: use border-image or pseudo element. \r\n                                    // Simple fallback: use a solid color for border if gradient text.\r\n                                    // Or just use star color for border.\r\n                                    borderBottomColor: user.profileTheme?.starColor || '#7FFFD4'\r\n                                };\r\n                            } else {\r\n                                tabStyle = {\r\n                                    color: usernameColor,\r\n                                    borderBottom: `2px solid ${usernameColor}`\r\n                                };\r\n                            }\r\n                        } else {\r\n                            // Unselected\r\n                            tabStyle = {\r\n                                color: bioColor, // Use the dimmed bio color\r\n                                borderBottom: '2px solid transparent'\r\n                            };\r\n                        }\r\n\r\n                        // Add Glow if selected and enabled\r\n                        if (isSelected && user.profileTheme?.textGlow) {\r\n                            tabStyle.textShadow = `0 0 10px ${usernameColor}`;\r\n                            // Removed box shadow per user request\r\n                        }\r\n\r\n                        return (\r\n                            <button\r\n                                key={tab.id}\r\n                                onClick={() => setActiveTab(tab.id)}\r\n                                style={{\r\n                                    flex: '0 0 auto',\r\n                                    height: isMobile ? '1.5rem' : '2rem', // Match username height (1.5rem)\r\n                                    padding: isMobile ? '0 12px' : '0 1.5rem',\r\n                                    boxSizing: 'border-box',\r\n                                    background: 'transparent',\r\n                                    border: 'none',\r\n                                    cursor: 'pointer',\r\n                                    display: 'flex',\r\n                                    alignItems: 'center',\r\n                                    gap: '0.5rem',\r\n                                    fontSize: isMobile ? '0.75rem' : '0.9rem',\r\n\r\n                                    // Font adjustments to remove \"weird padding\" from high-ascent fonts\r\n                                    lineHeight: '1',\r\n                                    paddingTop: '2px', // Micro-adjustment for visual centering of all-caps font\r\n\r\n                                    fontWeight: isSelected ? '700' : '500',\r\n                                    fontFamily: 'var(--font-family-heading)',\r\n                                    letterSpacing: '0.05em',\r\n                                    textTransform: 'uppercase',\r\n                                    ...tabStyle\r\n                                }}\r\n                            >\r\n                                <Icon\r\n                                    size={tab.id === 'cards' ? (isMobile ? 24 : 28) : (isMobile ? 13 : 16)}\r\n                                    style={{ color: isSelected && isGradient ? user.profileTheme?.starColor : 'inherit' }}\r\n                                />\r\n                                {tab.label}\r\n\r\n                                {/* Feed Switcher - Only next to Posts tab */}\r\n                                {tab.id === 'posts' && (\r\n                                    <div\r\n                                        onClick={(e) => {\r\n                                            e.stopPropagation(); // Prevent tab switching if clicked directly (though we are on buttons)\r\n                                            toggleFeed();\r\n                                        }}\r\n                                        style={{\r\n                                            marginLeft: '6px',\r\n                                            display: 'inline-flex',\r\n                                            alignItems: 'center',\r\n                                            padding: '4px',\r\n                                            cursor: 'pointer',\r\n                                            opacity: isSelected ? 1 : 0.5,\r\n                                            transition: 'transform 0.2s',\r\n                                        }}\r\n                                        title={`Switch to ${feedType === 'art' ? 'Social' : 'Art'} Feed`}\r\n                                    >\r\n                                        {feedType === 'art' ? <FaPalette size={14} /> : <FaUserPlus size={14} />}\r\n                                    </div>\r\n                                )}\r\n                            </button>\r\n                        );\r\n                    })}\r\n                </div>\r\n            </div >\r\n\r\n            {/* Content */}\r\n            <div style={{ maxWidth: '1200px', margin: '0 auto', padding: '0 1rem' }}>\r\n                {activeTab === 'posts' && (\r\n                    <>\r\n\r\n                        <InfiniteGrid\r\n                            items={posts}\r\n                            columns={layout.gridColumns}\r\n                            gap={layout.gridGap}\r\n                            renderItem={(post, index) => (\r\n                                <div\r\n                                    onClick={() => navigate(`/post/${post.id}`, {\r\n                                        state: {\r\n                                            contextPosts: posts,\r\n                                            initialIndex: index\r\n                                        }\r\n                                    })}\r\n                                    style={{\r\n                                        aspectRatio: '1',\r\n                                        background: '#111',\r\n                                        borderRadius: '8px',\r\n                                        overflow: 'hidden',\r\n                                        cursor: 'pointer',\r\n                                        transition: 'transform 0.2s',\r\n                                    }}\r\n                                >\r\n                                    {(() => {\r\n                                        const displaySrc = post.thumbnailUrl || post.images?.[0]?.thumbnailUrl || post.images?.[0]?.url || (typeof post.images?.[0] === 'string' ? post.images[0] : null) || post.imageUrl || post.image;\r\n                                        const previewSrc = post.previewUrl || post.images?.[0]?.previewUrl;\r\n\r\n                                        return displaySrc ? (\r\n                                            <SmartImage\r\n                                                src={displaySrc}\r\n                                                previewSrc={previewSrc}\r\n                                                thumbnailSrc={previewSrc}\r\n                                                alt=\"\"\r\n                                                eager={false}\r\n                                                style={{ width: '100%', height: '100%', objectFit: 'cover' }}\r\n                                            />\r\n                                        ) : (\r\n                                            <div style={{ width: '100%', height: '100%', display: 'flex', alignItems: 'center', justifyContent: 'center', color: '#666' }}>\r\n                                                No Image\r\n                                            </div>\r\n                                        );\r\n                                    })()}\r\n                                </div>\r\n                            )}\r\n                        />\r\n                    </>\r\n                )}\r\n\r\n\r\n\r\n                {\r\n                    activeTab === 'collections' && (\r\n                        <>\r\n                            {isOwnProfile && (\r\n                                <div style={{ marginBottom: '1.5rem', display: 'flex', justifyContent: 'center' }}>\r\n                                    <button\r\n                                        onClick={() => navigate('/create-collection')}\r\n                                        style={{\r\n                                            padding: '0.75rem 1.5rem',\r\n                                            background: effectiveUsernameColor || '#7FFFD4',\r\n                                            border: 'none',\r\n                                            borderRadius: '8px',\r\n                                            color: '#000',\r\n                                            fontWeight: 'bold',\r\n                                            cursor: 'pointer',\r\n                                            display: 'flex',\r\n                                            alignItems: 'center',\r\n                                            gap: '0.5rem'\r\n                                        }}\r\n                                    >\r\n                                        <FaPlus /> Create Collection\r\n                                    </button>\r\n                                </div>\r\n                            )}\r\n                            <InfiniteGrid\r\n                                items={collections}\r\n                                columns={layout.gridColumns}\r\n                                gap={layout.gridGap}\r\n                                renderItem={(collection) => (\r\n                                    <div\r\n                                        onClick={() => navigate(`/collection/${collection.id}`)}\r\n                                        style={{\r\n                                            aspectRatio: '1',\r\n                                            background: '#111',\r\n                                            borderRadius: '8px',\r\n                                            overflow: 'hidden',\r\n                                            cursor: 'pointer',\r\n                                            position: 'relative'\r\n                                        }}\r\n                                    >\r\n                                        {collection.coverImage ? (\r\n                                            <SmartImage\r\n                                                src={collection.coverImage}\r\n                                                alt={collection.title}\r\n                                                eager={false}\r\n                                                style={{ width: '100%', height: '100%', objectFit: 'cover' }}\r\n                                            />\r\n                                        ) : (\r\n                                            <div style={{ width: '100%', height: '100%', display: 'flex', alignItems: 'center', justifyContent: 'center', color: '#666', fontSize: '2rem' }}>\r\n                                                <FaLayerGroup />\r\n                                            </div>\r\n                                        )}\r\n                                        <div style={{\r\n                                            position: 'absolute',\r\n                                            bottom: 0,\r\n                                            left: 0,\r\n                                            right: 0,\r\n                                            background: 'rgba(0,0,0,0.8)',\r\n                                            padding: '0.5rem',\r\n                                            color: '#fff'\r\n                                        }}>\r\n                                            <div style={{ fontWeight: 'bold', marginBottom: '0.25rem', fontSize: '0.9rem' }}>{collection.title}</div>\r\n                                            <div style={{ color: '#888', fontSize: '0.75rem' }}>{collection.postRefs?.length || 0} posts</div>\r\n                                        </div>\r\n                                    </div>\r\n                                )}\r\n                            />\r\n                        </>\r\n                    )\r\n                }\r\n\r\n                {\r\n                    activeTab === 'cards' && (\r\n                        <>\r\n                            {isOwnProfile && (\r\n                                <div style={{ marginBottom: '1.5rem', display: 'flex', justifyContent: 'center' }}>\r\n                                    <button\r\n                                        onClick={() => setShowCreateCardModal(true)}\r\n                                        style={{\r\n                                            padding: '0.75rem 1.5rem',\r\n                                            background: effectiveUsernameColor || '#7FFFD4',\r\n                                            border: 'none',\r\n                                            borderRadius: '8px',\r\n                                            color: '#000',\r\n                                            fontWeight: 'bold',\r\n                                            cursor: 'pointer',\r\n                                            display: 'flex',\r\n                                            alignItems: 'center',\r\n                                            gap: '0.5rem'\r\n                                        }}\r\n                                    >\r\n                                        <FaPlus /> Create Card\r\n                                    </button>\r\n                                </div>\r\n                            )}\r\n                            {spaceCards.length > 0 ? (\r\n                                <InfiniteGrid\r\n\r\n                                    items={spaceCards}\r\n                                    columns={layout.gridColumns}\r\n                                    gap={layout.gridGap}\r\n                                    renderItem={(card) => {\r\n                                        const isHighRarity = card.rarity === 'Legendary' || card.rarity === 'Mythic' || card.rarity === 'Epic';\r\n                                        return (\r\n                                            <div style={{\r\n                                                position: 'relative',\r\n                                                aspectRatio: '2/3',\r\n                                                borderRadius: '12px',\r\n                                                overflow: 'visible'\r\n                                            }}>\r\n                                                {/* Iridescent border for high rarity cards */}\r\n                                                {isHighRarity && (\r\n                                                    <div style={{\r\n                                                        position: 'absolute',\r\n                                                        inset: '-3px',\r\n                                                        borderRadius: '12px',\r\n                                                        background: 'linear-gradient(135deg, #e0b3ff, #b3e5fc, #c5f5e8, #ffd6f0, #e0b3ff)',\r\n                                                        backgroundSize: '300% 300%',\r\n                                                        animation: 'iridescent-border 6s ease infinite',\r\n                                                        zIndex: 0\r\n                                                    }} />\r\n                                                )}\r\n\r\n                                                {/* Card content */}\r\n                                                <div style={{\r\n                                                    position: 'relative',\r\n                                                    width: '100%',\r\n                                                    height: '100%',\r\n                                                    background: '#000',\r\n                                                    borderRadius: '12px',\r\n                                                    overflow: 'hidden',\r\n                                                    border: isHighRarity ? 'none' : '2px solid #7FFFD4',\r\n                                                    boxShadow: isHighRarity\r\n                                                        ? '0 0 30px rgba(224, 179, 255, 0.4), 0 8px 32px rgba(0,0,0,0.5)'\r\n                                                        : '0 0 20px rgba(127, 255, 212, 0.3), 0 8px 24px rgba(0,0,0,0.4)',\r\n                                                    zIndex: 1\r\n                                                }}>\r\n                                                    {(card.images?.front || card.imageUrl) && (\r\n                                                        <SmartImage\r\n                                                            src={card.images?.front || card.imageUrl}\r\n                                                            alt={card.title || card.name}\r\n                                                            eager={false}\r\n                                                            style={{\r\n                                                                width: '100%',\r\n                                                                height: '100%',\r\n                                                                objectFit: 'cover'\r\n                                                            }}\r\n                                                        />\r\n                                                    )}\r\n\r\n                                                    {/* Card title overlay */}\r\n                                                    <div style={{\r\n                                                        position: 'absolute',\r\n                                                        bottom: 0,\r\n                                                        left: 0,\r\n                                                        right: 0,\r\n                                                        background: 'linear-gradient(to top, rgba(0,0,0,0.9), transparent)',\r\n                                                        padding: '1.5rem 0.75rem 0.75rem',\r\n                                                        color: '#fff'\r\n                                                    }}>\r\n                                                        <div style={{\r\n                                                            fontSize: '0.9rem',\r\n                                                            fontWeight: '600',\r\n                                                            marginBottom: '0.25rem'\r\n                                                        }}>\r\n                                                            {card.title || card.name}\r\n                                                        </div>\r\n                                                        {card.rarity && (\r\n                                                            <div style={{\r\n                                                                fontSize: '0.75rem',\r\n                                                                color: isHighRarity ? '#e0b3ff' : '#7FFFD4',\r\n                                                                fontWeight: '500'\r\n                                                            }}>\r\n                                                                {card.rarity}\r\n                                                            </div>\r\n                                                        )}\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        );\r\n                                    }}\r\n                                />\r\n                            ) : (\r\n                                <div style={{ padding: '2rem', textAlign: 'center', color: '#666', background: '#111', borderRadius: '8px' }}>\r\n                                    No marketplace cards owned.\r\n                                </div>\r\n                            )}\r\n                        </>\r\n                    )}\r\n\r\n                {activeTab === 'shop' && (\r\n                    <div className=\"tab-content\" style={{ padding: '0 2rem 2rem 2rem' }}>\r\n                        {/* 5.2 Filter Active Items */}\r\n                        {(() => {\r\n                            const activeShopItems = shopItems.filter(item => item.status === 'active');\r\n                            const printItems = activeShopItems.filter(item => item.kind !== 'spacecard');\r\n                            const spaceCardItems = activeShopItems.filter(item => item.kind === 'spacecard');\r\n\r\n                            if (activeShopItems.length === 0) {\r\n                                return (\r\n                                    <div className=\"ps-empty-state\">\r\n                                        <FaShoppingBag size={48} />\r\n                                        <h3>{t('shop.empty')}</h3>\r\n                                        {isOwnProfile && <p>Go to \"Create Post\" to add items to your shop.</p>}\r\n                                    </div>\r\n                                );\r\n                            }\r\n\r\n                            return (\r\n                                <div style={{ display: 'flex', flexDirection: 'column', gap: '3rem' }}>\r\n                                    {/* Prints Shelf */}\r\n                                    <section>\r\n                                        <h3 style={{\r\n                                            marginBottom: '1rem',\r\n                                            color: user.profileTheme?.usernameColor || '#fff',\r\n                                            display: 'flex',\r\n                                            alignItems: 'center',\r\n                                            gap: '0.5rem',\r\n                                            fontSize: '1.2rem',\r\n                                            textTransform: 'uppercase',\r\n                                            letterSpacing: '0.05em'\r\n                                        }}>\r\n                                            <FaImage /> Prints\r\n                                        </h3>\r\n                                        <ShopShelfRow items={printItems} kind=\"print\" />\r\n                                    </section>\r\n\r\n                                    {/* Space Cards Shelf */}\r\n                                    <section>\r\n                                        <h3 style={{\r\n                                            marginBottom: '1rem',\r\n                                            color: user.profileTheme?.usernameColor || '#fff',\r\n                                            display: 'flex',\r\n                                            alignItems: 'center',\r\n                                            gap: '0.5rem',\r\n                                            fontSize: '1.2rem',\r\n                                            textTransform: 'uppercase',\r\n                                            letterSpacing: '0.05em'\r\n                                        }}>\r\n                                            <PlanetIcon size={18} /> Space Cards\r\n                                        </h3>\r\n                                        <ShopShelfRow items={spaceCardItems} kind=\"spacecard\" />\r\n                                    </section>\r\n                                </div>\r\n                            );\r\n                        })()}\r\n                    </div>\r\n                )}\r\n\r\n                {\r\n                    activeTab === 'badges' && (\r\n                        <InfiniteGrid\r\n                            items={badges}\r\n                            columns={{ mobile: 3, tablet: 4, desktop: 6 }}\r\n                            gap={layout.gridGap}\r\n                            renderItem={(badge) => (\r\n                                <div style={{\r\n                                    aspectRatio: '1',\r\n                                    background: '#111',\r\n                                    borderRadius: '50%',\r\n                                    overflow: 'hidden',\r\n                                    border: `3px solid ${badge.borderColor || '#7FFFD4'}`,\r\n                                    position: 'relative'\r\n                                }}>\r\n                                    <SmartImage\r\n                                        src={badge.imageUrl}\r\n                                        alt={badge.title}\r\n                                        eager={false}\r\n                                        style={{ width: '100%', height: '100%', objectFit: 'cover' }}\r\n                                    />\r\n                                </div>\r\n                            )}\r\n                        />\r\n                    )\r\n                }\r\n\r\n                {\r\n                    activeTab === 'gallery' && (\r\n                        <>\r\n                            {/* Purchased Prints Section */}\r\n                            <div style={{ marginBottom: '3rem' }}>\r\n                                <h3 style={{ color: '#fff', fontSize: '1.2rem', marginBottom: '1rem', display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                                    <FaShoppingBag style={{ color: '#7FFFD4' }} />\r\n                                    Purchased Prints\r\n                                </h3>\r\n                                {orders.length > 0 ? (\r\n                                    <InfiniteGrid\r\n                                        items={orders}\r\n                                        columns={layout.gridColumns}\r\n                                        gap={layout.gridGap}\r\n                                        renderItem={(order) => (\r\n                                            <div style={{\r\n                                                background: '#111',\r\n                                                borderRadius: '8px',\r\n                                                overflow: 'hidden',\r\n                                                border: '1px solid #333',\r\n                                                padding: '1rem',\r\n                                                color: '#fff'\r\n                                            }}>\r\n                                                Order #{order.id}\r\n                                            </div>\r\n                                        )}\r\n                                    />\r\n                                ) : (\r\n                                    <div style={{ padding: '2rem', textAlign: 'center', color: '#666', background: '#111', borderRadius: '8px' }}>\r\n                                        No purchased prints yet.\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n\r\n                            {/* Owned Cards Section */}\r\n                            <div>\r\n                                <h3 style={{ color: '#fff', fontSize: '1.2rem', marginBottom: '1rem', display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                                    <FaRocket style={{ color: '#e0b3ff' }} />\r\n                                    Marketplace Cards\r\n                                </h3>\r\n                                {spaceCards.length > 0 ? (\r\n                                    <InfiniteGrid\r\n                                        items={spaceCards}\r\n                                        columns={layout.gridColumns}\r\n                                        gap={layout.gridGap}\r\n                                        renderItem={(card) => {\r\n                                            const isHighRarity = card.rarity === 'Legendary' || card.rarity === 'Mythic' || card.rarity === 'Epic';\r\n                                            return (\r\n                                                <div style={{\r\n                                                    position: 'relative',\r\n                                                    aspectRatio: '2/3',\r\n                                                    borderRadius: '12px',\r\n                                                    overflow: 'visible'\r\n                                                }}>\r\n                                                    {/* Iridescent border for high rarity cards */}\r\n                                                    {isHighRarity && (\r\n                                                        <div style={{\r\n                                                            position: 'absolute',\r\n                                                            inset: '-3px',\r\n                                                            borderRadius: '12px',\r\n                                                            background: 'linear-gradient(135deg, #e0b3ff, #b3e5fc, #c5f5e8, #ffd6f0, #e0b3ff)',\r\n                                                            backgroundSize: '300% 300%',\r\n                                                            animation: 'iridescent-border 6s ease infinite',\r\n                                                            zIndex: 0\r\n                                                        }} />\r\n                                                    )}\r\n\r\n                                                    {/* Card content */}\r\n                                                    <div style={{\r\n                                                        position: 'relative',\r\n                                                        width: '100%',\r\n                                                        height: '100%',\r\n                                                        background: '#000',\r\n                                                        borderRadius: '12px',\r\n                                                        overflow: 'hidden',\r\n                                                        border: isHighRarity ? 'none' : '2px solid #7FFFD4',\r\n                                                        boxShadow: isHighRarity\r\n                                                            ? '0 0 30px rgba(224, 179, 255, 0.4), 0 8px 32px rgba(0,0,0,0.5)'\r\n                                                            : '0 0 20px rgba(127, 255, 212, 0.3), 0 8px 24px rgba(0,0,0,0.4)',\r\n                                                        zIndex: 1\r\n                                                    }}>\r\n                                                        {(card.images?.front || card.imageUrl) && (\r\n                                                            <SmartImage\r\n                                                                src={card.images?.front || card.imageUrl}\r\n                                                                alt={card.title || card.name}\r\n                                                                eager={false}\r\n                                                                style={{\r\n                                                                    width: '100%',\r\n                                                                    height: '100%',\r\n                                                                    objectFit: 'cover'\r\n                                                                }}\r\n                                                            />\r\n                                                        )}\r\n\r\n                                                        {/* Card title overlay */}\r\n                                                        <div style={{\r\n                                                            position: 'absolute',\r\n                                                            bottom: 0,\r\n                                                            left: 0,\r\n                                                            right: 0,\r\n                                                            background: 'linear-gradient(to top, rgba(0,0,0,0.9), transparent)',\r\n                                                            padding: '1.5rem 0.75rem 0.75rem',\r\n                                                            color: '#fff'\r\n                                                        }}>\r\n                                                            <div style={{\r\n                                                                fontSize: '0.9rem',\r\n                                                                fontWeight: '600',\r\n                                                                marginBottom: '0.25rem'\r\n                                                            }}>\r\n                                                                {card.title || card.name}\r\n                                                            </div>\r\n                                                            {card.rarity && (\r\n                                                                <div style={{\r\n                                                                    fontSize: '0.75rem',\r\n                                                                    color: isHighRarity ? '#e0b3ff' : '#7FFFD4',\r\n                                                                    fontWeight: '500'\r\n                                                                }}>\r\n                                                                    {card.rarity}\r\n                                                                </div>\r\n                                                            )}\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                            );\r\n                                        }}\r\n                                    />\r\n                                ) : (\r\n                                    <div style={{ padding: '2rem', textAlign: 'center', color: '#666', background: '#111', borderRadius: '8px' }}>\r\n                                        No marketplace cards owned.\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        </>\r\n                    )\r\n                }\r\n                {\r\n                    activeTab === 'collections' && collections.length === 0 && (\r\n                        <div style={{ textAlign: 'center', padding: '3rem', color: '#666' }}>\r\n                            {isOwnProfile ? 'No collections yet. Create your first collection!' : 'No collections yet.'}\r\n                        </div>\r\n                    )\r\n                }\r\n                {\r\n                    activeTab === 'cards' && spaceCards.length === 0 && (\r\n                        <div style={{ textAlign: 'center', padding: '3rem', color: '#666' }}>No space cards yet.</div>\r\n                    )\r\n                }\r\n                {\r\n                    activeTab === 'badges' && badges.length === 0 && (\r\n                        <div style={{ textAlign: 'center', padding: '3rem', color: '#666' }}>No badges earned yet.</div>\r\n                    )\r\n                }\r\n            </div >\r\n\r\n            {/* Report Modal */}\r\n            {\r\n                showReportModal && (\r\n                    <ReportModal\r\n                        isOpen={showReportModal}\r\n                        onClose={() => setShowReportModal(false)}\r\n                        contentType=\"user\"\r\n                        contentId={targetId}\r\n                    />\r\n                )\r\n            }\r\n\r\n            {\r\n                showCreateCardModal && (\r\n                    <CreateCardModal\r\n                        onClose={() => setShowCreateCardModal(false)}\r\n                        onCreated={(newCard) => {\r\n                            setSpaceCards(prev => [newCard, ...prev]);\r\n                            setShowCreateCardModal(false);\r\n                        }}\r\n                    />\r\n                )\r\n            }\r\n\r\n            {\r\n                showBusinessCard && (\r\n                    <BusinessCardModal\r\n                        isOpen={showBusinessCard}\r\n                        onClose={() => setShowBusinessCard(false)}\r\n                        user={user}\r\n                    />\r\n                )\r\n            }\r\n\r\n            {\r\n                showCommissionModal && (\r\n                    <CommissionModal\r\n                        editorId={targetId}\r\n                        editorName={user.displayName}\r\n                        onClose={() => setShowCommissionModal(false)}\r\n                        onSuccess={() => {\r\n                            setShowCommissionModal(false);\r\n                            alert('Commission request submitted successfully!');\r\n                        }}\r\n                    />\r\n                )\r\n            }\r\n\r\n            {\r\n                showAddFunds && (\r\n                    <WalletModal\r\n                        onClose={() => setShowAddFunds(false)}\r\n                    />\r\n                )\r\n            }\r\n\r\n            <CreateMuseumModal\r\n                isOpen={showCreateMuseumModal}\r\n                onClose={() => setShowCreateMuseumModal(false)}\r\n                onSuccess={() => {\r\n                    window.location.reload();\r\n                }}\r\n            />\r\n\r\n            {/* Twinkle Animation CSS */}\r\n            <style>{`\r\n                @keyframes twinkle {\r\n                    0%, 100% {\r\n                        opacity: 0.3;\r\n                        transform: scale(1);\r\n                    }\r\n                    50% {\r\n                        opacity: 1;\r\n                        transform: scale(1.2);\r\n                    }\r\n                }\r\n                \r\n                @keyframes iridescent-border {\r\n                    0% { background-position: 0% 50%; }\r\n                    25% { background-position: 50% 100%; }\r\n                    50% { background-position: 100% 50%; }\r\n                    75% { background-position: 50% 0%; }\r\n                    100% { background-position: 0% 50%; }\r\n                }\r\n                \r\n                @keyframes pulse {\r\n                    0%, 100% {\r\n                        box-shadow: 0 0 8px rgba(0, 255, 0, 0.8);\r\n                    }\r\n                    50% {\r\n                        box-shadow: 0 0 16px rgba(0, 255, 0, 1);\r\n                    }\r\n                }\r\n                \r\n                /* Profile Action Icons - Mobile Only */\r\n                .profile-mobile-actions {\r\n                    display: none;\r\n                }\r\n                \r\n                @media (max-width: 768px) {\r\n                    .profile-mobile-actions {\r\n                        position: absolute !important;\r\n                        top: calc(max(0.75rem, env(safe-area-inset-top)) - 2px) !important;\r\n                        left: 1rem !important;\r\n                        right: auto !important;\r\n                        display: flex !important;\r\n                        gap: 0.75rem !important;\r\n                        align-items: center !important;\r\n                        z-index: 9999 !important;\r\n                    }\r\n                }\r\n                \r\n                @media (min-width: 769px) {\r\n                    .profile-mobile-actions {\r\n                        display: none !important;\r\n                    }\r\n                }\r\n            `}</style>\r\n\r\n            {/* Disciplines Modal */}\r\n            {\r\n                showDisciplinesModal && (\r\n                    <DisciplinesModal\r\n                        disciplines={user.disciplines}\r\n                        onClose={() => setShowDisciplinesModal(false)}\r\n                    />\r\n                )\r\n            }\r\n\r\n            {/* Follow List Modal */}\r\n            <FollowListModal\r\n                isOpen={showFollowList}\r\n                onClose={() => setShowFollowList(false)}\r\n                userId={user.id}\r\n                type={followListType}\r\n            />\r\n        </div >\r\n    );\r\n};\r\n\r\nexport default Profile;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\pages\\ProjectPage.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'query' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":35,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":40},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'where' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":42,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":47},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'getDocs' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":49,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":56},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaTrash' is defined but never used. Allowed unused vars must match /^_/u.","line":8,"column":65,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":72},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'postsRef' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":52,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":52,"endColumn":31}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { doc, getDoc, collection, query, where, getDocs } from 'firebase/firestore';\r\nimport { db } from '@/firebase';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { useProject } from '@/hooks/useProjects';\r\nimport { useProjectManagement } from '@/hooks/useProjects';\r\nimport { FaUsers, FaImage, FaHeart, FaRegHeart, FaPlus, FaEdit, FaTrash } from 'react-icons/fa';\r\nimport SEO from '@/components/SEO';\r\nimport StarBackground from '@/components/StarBackground';\r\nimport GridPostCard from '@/components/GridPostCard';\r\n\r\nconst ProjectPage = () => {\r\n    const { studioId, projectId } = useParams();\r\n    const navigate = useNavigate();\r\n    const { currentUser } = useAuth();\r\n    const { project, loading: projectLoading, refetch } = useProject(studioId, projectId);\r\n    const { toggleFollow } = useProjectManagement();\r\n\r\n    const [posts, setPosts] = useState([]);\r\n    const [postsLoading, setPostsLoading] = useState(true);\r\n    const [isFollowing, setIsFollowing] = useState(false);\r\n    const [studio, setStudio] = useState(null);\r\n\r\n    // Fetch studio details\r\n    useEffect(() => {\r\n        const fetchStudio = async () => {\r\n            if (!studioId) return;\r\n            try {\r\n                const studioDoc = await getDoc(doc(db, 'galleries', studioId));\r\n                if (studioDoc.exists()) {\r\n                    setStudio({ id: studioDoc.id, ...studioDoc.data() });\r\n                }\r\n            } catch (error) {\r\n                console.error('Error fetching studio:', error);\r\n            }\r\n        };\r\n        fetchStudio();\r\n    }, [studioId]);\r\n\r\n    // Fetch posts for this project\r\n    useEffect(() => {\r\n        const fetchPosts = async () => {\r\n            if (!project?.postIds || project.postIds.length === 0) {\r\n                setPosts([]);\r\n                setPostsLoading(false);\r\n                return;\r\n            }\r\n\r\n            try {\r\n                setPostsLoading(true);\r\n                const postsRef = collection(db, 'posts');\r\n                const postPromises = project.postIds.map(postId =>\r\n                    getDoc(doc(db, 'posts', postId))\r\n                );\r\n\r\n                const postDocs = await Promise.all(postPromises);\r\n                const fetchedPosts = postDocs\r\n                    .filter(doc => doc.exists())\r\n                    .map(doc => ({ id: doc.id, ...doc.data() }));\r\n\r\n                setPosts(fetchedPosts);\r\n            } catch (error) {\r\n                console.error('Error fetching posts:', error);\r\n            } finally {\r\n                setPostsLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchPosts();\r\n    }, [project?.postIds]);\r\n\r\n    // Check if user is following\r\n    useEffect(() => {\r\n        if (currentUser && project) {\r\n            setIsFollowing(project.followers?.includes(currentUser.uid) || false);\r\n        }\r\n    }, [currentUser, project]);\r\n\r\n    const handleFollowToggle = async () => {\r\n        if (!currentUser) {\r\n            navigate('/login');\r\n            return;\r\n        }\r\n\r\n        try {\r\n            await toggleFollow(studioId, projectId, currentUser.uid, !isFollowing);\r\n            setIsFollowing(!isFollowing);\r\n            refetch();\r\n        } catch (error) {\r\n            console.error('Error toggling follow:', error);\r\n        }\r\n    };\r\n\r\n    const isContributor = project?.contributors?.some(c => c.uid === currentUser?.uid);\r\n    const isOwner = project?.createdBy === currentUser?.uid;\r\n\r\n    if (projectLoading) {\r\n        return (\r\n            <div style={{\r\n                minHeight: '100vh',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'center',\r\n                color: '#888'\r\n            }}>\r\n                Loading project...\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (!project) {\r\n        return (\r\n            <div style={{\r\n                minHeight: '100vh',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'center',\r\n                flexDirection: 'column',\r\n                gap: '1rem',\r\n                color: '#888'\r\n            }}>\r\n                <h2>Project not found</h2>\r\n                <button\r\n                    onClick={() => navigate(`/gallery/${studioId}`)}\r\n                    style={{\r\n                        padding: '0.75rem 1.5rem',\r\n                        background: '#7FFFD4',\r\n                        color: '#000',\r\n                        border: 'none',\r\n                        borderRadius: '8px',\r\n                        fontWeight: 'bold',\r\n                        cursor: 'pointer'\r\n                    }}\r\n                >\r\n                    Back to Studio\r\n                </button>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div style={{ minHeight: '100vh', position: 'relative' }}>\r\n            <SEO\r\n                title={`${project.title} - ${studio?.title || 'Studio'}`}\r\n                description={project.description}\r\n            />\r\n\r\n            <StarBackground />\r\n\r\n            {/* Header */}\r\n            <div style={{\r\n                background: 'linear-gradient(180deg, rgba(0,0,0,0.9) 0%, rgba(0,0,0,0.7) 100%)',\r\n                borderBottom: '1px solid #333',\r\n                padding: '2rem 0',\r\n                position: 'relative'\r\n            }}>\r\n                <div className=\"container-md\" style={{ padding: '0 1rem' }}>\r\n                    {/* Breadcrumb */}\r\n                    <div style={{\r\n                        fontSize: '0.9rem',\r\n                        color: '#888',\r\n                        marginBottom: '1rem',\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        gap: '0.5rem'\r\n                    }}>\r\n                        <span\r\n                            onClick={() => navigate(`/gallery/${studioId}`)}\r\n                            style={{ cursor: 'pointer', color: '#7FFFD4' }}\r\n                        >\r\n                            {studio?.title || 'Studio'}\r\n                        </span>\r\n                        <span>/</span>\r\n                        <span>Projects</span>\r\n                        <span>/</span>\r\n                        <span>{project.title}</span>\r\n                    </div>\r\n\r\n                    {/* Project Title & Description */}\r\n                    <div style={{ marginBottom: '1.5rem' }}>\r\n                        <h1 style={{\r\n                            fontSize: '2.5rem',\r\n                            marginBottom: '0.5rem',\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            gap: '1rem'\r\n                        }}>\r\n                            {project.title}\r\n                            {project.isTemporary && (\r\n                                <span style={{\r\n                                    fontSize: '0.8rem',\r\n                                    padding: '0.25rem 0.75rem',\r\n                                    background: 'rgba(255, 165, 0, 0.2)',\r\n                                    border: '1px solid rgba(255, 165, 0, 0.5)',\r\n                                    borderRadius: '20px',\r\n                                    color: '#ffb84d'\r\n                                }}>\r\n                                    Temporary\r\n                                </span>\r\n                            )}\r\n                        </h1>\r\n                        {project.description && (\r\n                            <p style={{ color: '#aaa', fontSize: '1.1rem', lineHeight: '1.6' }}>\r\n                                {project.description}\r\n                            </p>\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Stats & Actions */}\r\n                    <div style={{\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        gap: '1.5rem',\r\n                        flexWrap: 'wrap'\r\n                    }}>\r\n                        <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', color: '#888' }}>\r\n                            <FaUsers />\r\n                            <span>{project.contributors?.length || 0} Contributors</span>\r\n                        </div>\r\n                        <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', color: '#888' }}>\r\n                            <FaImage />\r\n                            <span>{posts.length} Posts</span>\r\n                        </div>\r\n                        <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', color: '#888' }}>\r\n                            <FaHeart />\r\n                            <span>{project.followersCount || 0} Followers</span>\r\n                        </div>\r\n\r\n                        <div style={{ marginLeft: 'auto', display: 'flex', gap: '0.75rem' }}>\r\n                            {currentUser && (\r\n                                <button\r\n                                    onClick={handleFollowToggle}\r\n                                    style={{\r\n                                        padding: '0.5rem 1.5rem',\r\n                                        background: isFollowing ? 'transparent' : '#7FFFD4',\r\n                                        color: isFollowing ? '#7FFFD4' : '#000',\r\n                                        border: `1px solid ${isFollowing ? '#7FFFD4' : 'transparent'}`,\r\n                                        borderRadius: '20px',\r\n                                        fontWeight: 'bold',\r\n                                        cursor: 'pointer',\r\n                                        display: 'flex',\r\n                                        alignItems: 'center',\r\n                                        gap: '0.5rem',\r\n                                        transition: 'all 0.2s'\r\n                                    }}\r\n                                >\r\n                                    {isFollowing ? <FaHeart /> : <FaRegHeart />}\r\n                                    {isFollowing ? 'Following' : 'Follow'}\r\n                                </button>\r\n                            )}\r\n\r\n                            {isOwner && (\r\n                                <button\r\n                                    onClick={() => navigate(`/project/${studioId}/${projectId}/edit`)}\r\n                                    style={{\r\n                                        padding: '0.5rem 1rem',\r\n                                        background: 'transparent',\r\n                                        color: '#888',\r\n                                        border: '1px solid #333',\r\n                                        borderRadius: '20px',\r\n                                        cursor: 'pointer',\r\n                                        display: 'flex',\r\n                                        alignItems: 'center',\r\n                                        gap: '0.5rem'\r\n                                    }}\r\n                                >\r\n                                    <FaEdit /> Edit\r\n                                </button>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Content */}\r\n            <div className=\"container-md\" style={{ padding: '2rem 1rem' }}>\r\n                {/* Contributors Section */}\r\n                {project.contributors && project.contributors.length > 0 && (\r\n                    <div style={{ marginBottom: '3rem' }}>\r\n                        <h2 style={{\r\n                            fontSize: '1.5rem',\r\n                            marginBottom: '1.5rem',\r\n                            borderBottom: '1px solid #333',\r\n                            paddingBottom: '1rem'\r\n                        }}>\r\n                            Contributors\r\n                        </h2>\r\n                        <div style={{\r\n                            display: 'grid',\r\n                            gridTemplateColumns: 'repeat(auto-fill, minmax(250px, 1fr))',\r\n                            gap: '1rem'\r\n                        }}>\r\n                            {project.contributors.map((contributor, index) => (\r\n                                <div\r\n                                    key={index}\r\n                                    onClick={() => navigate(`/profile/${contributor.uid}`)}\r\n                                    style={{\r\n                                        background: '#111',\r\n                                        border: '1px solid #222',\r\n                                        borderRadius: '12px',\r\n                                        padding: '1rem',\r\n                                        cursor: 'pointer',\r\n                                        transition: 'all 0.2s'\r\n                                    }}\r\n                                    onMouseEnter={e => e.currentTarget.style.borderColor = '#7FFFD4'}\r\n                                    onMouseLeave={e => e.currentTarget.style.borderColor = '#222'}\r\n                                >\r\n                                    <div style={{ fontWeight: 'bold', marginBottom: '0.25rem' }}>\r\n                                        {contributor.displayName}\r\n                                    </div>\r\n                                    <div style={{ color: '#7FFFD4', fontSize: '0.9rem' }}>\r\n                                        {contributor.role}\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Posts Section */}\r\n                <div>\r\n                    <h2 style={{\r\n                        fontSize: '1.5rem',\r\n                        marginBottom: '1.5rem',\r\n                        borderBottom: '1px solid #333',\r\n                        paddingBottom: '1rem'\r\n                    }}>\r\n                        Project Posts\r\n                    </h2>\r\n\r\n                    {postsLoading ? (\r\n                        <div style={{ textAlign: 'center', padding: '3rem', color: '#888' }}>\r\n                            Loading posts...\r\n                        </div>\r\n                    ) : posts.length === 0 ? (\r\n                        <div style={{\r\n                            textAlign: 'center',\r\n                            padding: '3rem',\r\n                            color: '#888',\r\n                            background: '#111',\r\n                            borderRadius: '12px',\r\n                            border: '1px dashed #333'\r\n                        }}>\r\n                            <FaImage size={48} style={{ marginBottom: '1rem', opacity: 0.5 }} />\r\n                            <p>No posts in this project yet</p>\r\n                            {isContributor && (\r\n                                <button\r\n                                    onClick={() => navigate('/create')}\r\n                                    style={{\r\n                                        marginTop: '1rem',\r\n                                        padding: '0.5rem 1.5rem',\r\n                                        background: '#7FFFD4',\r\n                                        color: '#000',\r\n                                        border: 'none',\r\n                                        borderRadius: '20px',\r\n                                        fontWeight: 'bold',\r\n                                        cursor: 'pointer'\r\n                                    }}\r\n                                >\r\n                                    <FaPlus style={{ marginRight: '0.5rem' }} />\r\n                                    Create Post\r\n                                </button>\r\n                            )}\r\n                        </div>\r\n                    ) : (\r\n                        <div style={{\r\n                            display: 'grid',\r\n                            gridTemplateColumns: 'repeat(auto-fill, minmax(300px, 1fr))',\r\n                            gap: '1.5rem'\r\n                        }}>\r\n                            {posts.map(post => (\r\n                                <GridPostCard key={post.id} post={post} />\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ProjectPage;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\pages\\Search.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'SearchModeTabs' is defined but never used. Allowed unused vars must match /^_/u.","line":14,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'SearchFilters' is defined but never used. Allowed unused vars must match /^_/u.","line":15,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'filterVisiblePosts' is defined but never used. Allowed unused vars must match /^_/u.","line":18,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":28},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'filterVisibleItems' is defined but never used. Allowed unused vars must match /^_/u.","line":18,"column":30,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":48},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'filterVisibleUsers' is defined but never used. Allowed unused vars must match /^_/u.","line":18,"column":50,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":68},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'currentMode'. Either include it or remove the dependency array.","line":136,"column":8,"nodeType":"ArrayExpression","endLine":136,"endColumn":22,"suggestions":[{"desc":"Update the dependencies array to be: [currentMode, searchParams]","fix":{"range":[7053,7067],"text":"[currentMode, searchParams]"}}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'fetchFollowing' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":202,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":202,"endColumn":42},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'performSearch'. Either include it or remove the dependency array.","line":247,"column":8,"nodeType":"ArrayExpression","endLine":247,"endColumn":48,"suggestions":[{"desc":"Update the dependencies array to be: [currentMode, followingOnly, performSearch, searchMode]","fix":{"range":[12379,12419],"text":"[currentMode, followingOnly, performSearch, searchMode]"}}]}],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'performSearch'. Either include it or remove the dependency array.","line":537,"column":8,"nodeType":"ArrayExpression","endLine":537,"endColumn":142,"suggestions":[{"desc":"Update the dependencies array to be: [searchTerm, selectedTags, selectedPark, selectedDate, selectedCamera, selectedFilm, selectedOrientation, selectedAspectRatio, sortBy, performSearch]","fix":{"range":[26531,26665],"text":"[searchTerm, selectedTags, selectedPark, selectedDate, selectedCamera, selectedFilm, selectedOrientation, selectedAspectRatio, sortBy, performSearch]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useCallback, useReducer, useRef } from 'react';\r\nimport { FaTimes, FaUniversity } from 'react-icons/fa';\r\nimport { doc, getDoc } from 'firebase/firestore';\r\nimport { db } from '@/firebase';\r\nimport { useNavigate, useSearchParams } from 'react-router-dom';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { useSearch } from '@/hooks/useSearch';\r\nimport { useFollowing } from '@/hooks/useFollowing';\r\nimport { useBlock } from '@/hooks/useBlock';\r\nimport { parseDateFromURL } from '@/core/utils/dates';\r\nimport { getRecommendations } from '@/core/utils/recommendations';\r\nimport SearchLayoutWrapper from '@/components/search/SearchLayoutWrapper';\r\nimport SearchHeader from '@/components/search/SearchHeader';\r\nimport SearchModeTabs from '@/components/search/SearchModeTabs';\r\nimport SearchFilters from '@/components/search/SearchFilters';\r\nimport SearchResults from '@/components/search/SearchResults';\r\nimport { convertSearchInput } from '@/utils/convertSearchInput';\r\nimport { filterVisiblePosts, filterVisibleItems, filterVisibleUsers } from '@/core/utils/filterHelpers';\r\n\r\n\r\n\r\nconst searchReducer = (state, action) => {\r\n    switch (action.type) {\r\n        case 'SET_RESULTS':\r\n            return {\r\n                ...state,\r\n                results: action.isLoadMore\r\n                    ? {\r\n                        posts: [...state.results.posts, ...action.payload.posts],\r\n                        users: [...state.results.users, ...action.payload.users],\r\n                        galleries: [...state.results.galleries, ...action.payload.galleries],\r\n                        collections: [...state.results.collections, ...(action.payload.collections || [])],\r\n                        contests: [...state.results.contests, ...(action.payload.contests || [])],\r\n                        events: [...state.results.events, ...(action.payload.events || [])],\r\n                        spacecards: [...state.results.spacecards, ...(action.payload.spacecards || [])],\r\n                        museums: [...state.results.museums, ...(action.payload.museums || [])]\r\n                    }\r\n                    : action.payload,\r\n                lastPostDoc: action.lastPostDoc !== undefined ? action.lastPostDoc : state.lastPostDoc,\r\n                lastUserDoc: action.lastUserDoc !== undefined ? action.lastUserDoc : state.lastUserDoc,\r\n                lastGalleryDoc: action.lastGalleryDoc !== undefined ? action.lastGalleryDoc : state.lastGalleryDoc,\r\n                lastCollectionDoc: action.lastCollectionDoc !== undefined ? action.lastCollectionDoc : state.lastCollectionDoc,\r\n                lastContestDoc: action.lastContestDoc !== undefined ? action.lastContestDoc : state.lastContestDoc,\r\n                lastEventDoc: action.lastEventDoc !== undefined ? action.lastEventDoc : state.lastEventDoc,\r\n                lastSpaceCardDoc: action.lastSpaceCardDoc !== undefined ? action.lastSpaceCardDoc : state.lastSpaceCardDoc,\r\n                lastMuseumDoc: action.lastMuseumDoc !== undefined ? action.lastMuseumDoc : state.lastMuseumDoc,\r\n                hasMorePosts: action.hasMorePosts !== undefined ? action.hasMorePosts : state.hasMorePosts,\r\n                hasMoreUsers: action.hasMoreUsers !== undefined ? action.hasMoreUsers : state.hasMoreUsers,\r\n                hasMoreGalleries: action.hasMoreGalleries !== undefined ? action.hasMoreGalleries : state.hasMoreGalleries,\r\n                hasMoreCollections: action.hasMoreCollections !== undefined ? action.hasMoreCollections : state.hasMoreCollections,\r\n                hasMoreContests: action.hasMoreContests !== undefined ? action.hasMoreContests : state.hasMoreContests,\r\n                hasMoreEvents: action.hasMoreEvents !== undefined ? action.hasMoreEvents : state.hasMoreEvents,\r\n                hasMoreSpaceCards: action.hasMoreSpaceCards !== undefined ? action.hasMoreSpaceCards : state.hasMoreSpaceCards,\r\n                hasMoreMuseums: action.hasMoreMuseums !== undefined ? action.hasMoreMuseums : state.hasMoreMuseums,\r\n            };\r\n        case 'RESET_RESULTS':\r\n            return {\r\n                ...state,\r\n                results: { posts: [], users: [], galleries: [], collections: [], museums: [], contests: [], events: [], spacecards: [] },\r\n                lastPostDoc: null,\r\n                lastUserDoc: null,\r\n                lastGalleryDoc: null,\r\n                lastCollectionDoc: null,\r\n                lastContestDoc: null,\r\n                lastEventDoc: null,\r\n                lastSpaceCardDoc: null,\r\n                lastMuseumDoc: null,\r\n                hasMorePosts: true,\r\n                hasMoreUsers: true,\r\n                hasMoreGalleries: true,\r\n                hasMoreCollections: true,\r\n                hasMoreContests: true,\r\n                hasMoreEvents: true,\r\n                hasMoreSpaceCards: true,\r\n                hasMoreMuseums: true,\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nconst initialSearchState = {\r\n    results: { posts: [], users: [], galleries: [], collections: [], museums: [], contests: [], events: [], spacecards: [] },\r\n    lastPostDoc: null,\r\n    lastUserDoc: null,\r\n    lastGalleryDoc: null,\r\n    lastCollectionDoc: null,\r\n    lastContestDoc: null,\r\n    lastEventDoc: null,\r\n    lastSpaceCardDoc: null,\r\n    hasMorePosts: true,\r\n    hasMoreUsers: true,\r\n    hasMoreGalleries: true,\r\n    hasMoreCollections: true,\r\n    hasMoreContests: true,\r\n    hasMoreEvents: true,\r\n\r\n    hasMoreSpaceCards: true,\r\n    hasMoreMuseums: true,\r\n};\r\n\r\nconst Search = () => {\r\n    const { currentUser } = useAuth();\r\n    const [searchParams] = useSearchParams();\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n    const [selectedTags, setSelectedTags] = useState([]);\r\n    const [selectedPark, setSelectedPark] = useState(null);\r\n    const [selectedDate, setSelectedDate] = useState(() => {\r\n        // Initialize from URL param if present\r\n        const dateParam = searchParams.get('date');\r\n        return dateParam ? parseDateFromURL(dateParam) : null;\r\n    });\r\n    const [selectedMuseum, setSelectedMuseum] = useState(null);\r\n\r\n    // Fetch museum if museumId param exists\r\n    useEffect(() => {\r\n        const museumId = searchParams.get('museumId');\r\n        if (museumId) {\r\n            const fetchMuseum = async () => {\r\n                try {\r\n                    const docRef = doc(db, 'museums', museumId);\r\n                    const docSnap = await getDoc(docRef);\r\n                    if (docSnap.exists()) {\r\n                        setSelectedMuseum({ id: docSnap.id, ...docSnap.data() });\r\n                        // Optionally switch to 'posts' or 'galleries' if not already\r\n                        if (currentMode === 'museums') setCurrentMode('posts');\r\n                    }\r\n                } catch (err) {\r\n                    console.error(\"Error fetching museum filter:\", err);\r\n                }\r\n            };\r\n            fetchMuseum();\r\n        } else {\r\n            setSelectedMuseum(null);\r\n        }\r\n    }, [searchParams]);\r\n    const [selectedCamera, setSelectedCamera] = useState(null);\r\n    const [selectedFilm, setSelectedFilm] = useState(null);\r\n    const [selectedOrientation, setSelectedOrientation] = useState(null);\r\n    const [selectedAspectRatio, setSelectedAspectRatio] = useState(null);\r\n    const [sortBy, setSortBy] = useState('newest');\r\n    const [searchMode, setSearchMode] = useState('art'); // Phase 3: Search Mode State ('art' | 'social')\r\n    const [isMarketplaceMode, setIsMarketplaceMode] = useState(false); // NEW: Marketplace Toggle\r\n\r\n    const [viewMode, setViewMode] = useState('grid'); // 'grid' or 'feed'\r\n    const [isSearching, setIsSearching] = useState(false);\r\n    const [hasSearched, setHasSearched] = useState(false);\r\n    const [recommendations, setRecommendations] = useState(null);\r\n    const [isExploreMode, setIsExploreMode] = useState(true);\r\n    const [error, setError] = useState(null);\r\n\r\n    // Mode Switcher State\r\n    const [currentMode, setCurrentMode] = useState('posts'); // 'posts' | 'galleries' | 'collections' | 'museums' | 'contests' | 'events' | 'users' | 'spacecards'\r\n    const [followingOnly, setFollowingOnly] = useState(false);\r\n    const [isMobileFiltersOpen, setIsMobileFiltersOpen] = useState(false);\r\n    const [isSortDropdownOpen, setIsSortDropdownOpen] = useState(false);\r\n    const sortDropdownRef = useRef(null);\r\n\r\n    // Close dropdown when clicking outside\r\n    useEffect(() => {\r\n        const handleClickOutside = (event) => {\r\n            if (sortDropdownRef.current && !sortDropdownRef.current.contains(event.target)) {\r\n                setIsSortDropdownOpen(false);\r\n            }\r\n        };\r\n\r\n        document.addEventListener('mousedown', handleClickOutside);\r\n        return () => {\r\n            document.removeEventListener('mousedown', handleClickOutside);\r\n        };\r\n    }, []);\r\n    const [headerVisible, setHeaderVisible] = useState(true);\r\n    const [isMobile, setIsMobile] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const handleResize = () => {\r\n            setIsMobile(window.innerWidth < 768);\r\n        };\r\n        // Set initial value on mount\r\n        handleResize();\r\n\r\n        window.addEventListener('resize', handleResize);\r\n        return () => window.removeEventListener('resize', handleResize);\r\n    }, []);\r\n\r\n    const lastScrollY = useRef(0);\r\n\r\n    const handleScroll = (e) => {\r\n        const currentScrollY = e.target.scrollTop;\r\n        if (currentScrollY > lastScrollY.current && currentScrollY > 100) {\r\n            setHeaderVisible(false);\r\n        } else {\r\n            setHeaderVisible(true);\r\n        }\r\n        lastScrollY.current = currentScrollY;\r\n    };\r\n\r\n    const [searchState, dispatch] = useReducer(searchReducer, initialSearchState);\r\n    const { results, lastPostDoc, lastUserDoc, lastGalleryDoc, lastCollectionDoc, lastMuseumDoc, lastContestDoc, lastEventDoc, lastSpaceCardDoc, hasMorePosts, hasMoreUsers, hasMoreGalleries, hasMoreCollections, hasMoreMuseums, hasMoreContests, hasMoreEvents, hasMoreSpaceCards } = searchState;\r\n\r\n    const { searchUsers, searchPosts, searchShopItems, searchGalleries, searchCollections, searchContests, searchEvents, searchSpaceCards, loading } = useSearch();\r\n    const { followingList, fetchFollowing } = useFollowing(currentUser?.uid);\r\n    const { blockedUsers } = useBlock();\r\n\r\n    const isMountedRef = useRef(true);\r\n    const isLoadingRef = useRef(false);\r\n    const searchRequestId = useRef(0);\r\n    const currentSearchTermRef = useRef(searchTerm);\r\n    const currentSelectedTagsRef = useRef(selectedTags);\r\n    const currentSelectedParkRef = useRef(selectedPark);\r\n    const currentSelectedDateRef = useRef(selectedDate);\r\n    const currentSelectedCameraRef = useRef(selectedCamera);\r\n    const currentSelectedFilmRef = useRef(selectedFilm);\r\n    const currentSelectedOrientationRef = useRef(selectedOrientation);\r\n    const currentSelectedAspectRatioRef = useRef(selectedAspectRatio);\r\n    const currentSortByRef = useRef(sortBy);\r\n    const navigate = useNavigate();\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            isMountedRef.current = false;\r\n        };\r\n    }, []);\r\n\r\n    // Check if we're in Explore mode (no filters applied and in posts mode without Following)\r\n    useEffect(() => {\r\n        const hasFilters = searchTerm || selectedTags.length > 0 || selectedPark || selectedDate ||\r\n            selectedCamera || selectedFilm || selectedOrientation || selectedAspectRatio || selectedMuseum;\r\n        setIsExploreMode(!hasFilters && !followingOnly && currentMode === 'posts');\r\n    }, [searchTerm, selectedTags, selectedPark, selectedDate, selectedCamera, selectedFilm, selectedOrientation, selectedAspectRatio, followingOnly, currentMode, selectedMuseum]);\r\n\r\n    // Load personalized recommendations for Explore mode\r\n    useEffect(() => {\r\n        const loadRecommendations = async () => {\r\n            if (currentUser && isExploreMode) {\r\n                const filters = await getRecommendations(currentUser.uid);\r\n                setRecommendations(filters);\r\n            }\r\n        };\r\n        loadRecommendations();\r\n    }, [currentUser, isExploreMode]);\r\n\r\n    // Trigger search when mode or followingOnly changes\r\n    useEffect(() => {\r\n        dispatch({ type: 'RESET_RESULTS' });\r\n        performSearch();\r\n    }, [currentMode, followingOnly, searchMode]);\r\n\r\n    // Reset filters when switching away from posts (Fix filter state bugs)\r\n    useEffect(() => {\r\n        if (currentMode !== 'posts') {\r\n            setSelectedPark(null);\r\n            setSelectedDate(null);\r\n            setSelectedCamera(null);\r\n            setSelectedFilm(null);\r\n            setSelectedOrientation(null);\r\n            setSelectedAspectRatio(null);\r\n        }\r\n    }, [currentMode]);\r\n\r\n    const performSearch = useCallback(async (isLoadMore = false) => {\r\n        if (!isMountedRef.current) return;\r\n\r\n        // Prevent concurrent searches\r\n        if (isLoadingRef.current && !isLoadMore) return;\r\n\r\n        const currentRequestId = ++searchRequestId.current;\r\n\r\n        // Only set searching to true if this is a new search (not a callback recreation)\r\n        if (!isLoadMore) {\r\n            isLoadingRef.current = true;\r\n            setIsSearching(true);\r\n            setHasSearched(true);\r\n            setError(null);\r\n        }\r\n\r\n        try {\r\n            // Use refs to get current search params\r\n            const term = convertSearchInput(currentSearchTermRef.current);\r\n            const tags = currentSelectedTagsRef.current;\r\n            const parkId = currentSelectedParkRef.current;\r\n            const date = currentSelectedDateRef.current;\r\n\r\n            // Check if we're in Explore mode (no filters)\r\n            const hasFilters = term || tags.length > 0 || parkId || date ||\r\n                currentSelectedCameraRef.current || currentSelectedFilmRef.current ||\r\n                currentSelectedOrientationRef.current || currentSelectedAspectRatioRef.current || selectedMuseum;\r\n\r\n            // If Explore mode and we have recommendations, use them\r\n            let exploreTags = [];\r\n            let exploreSort = currentSortByRef.current;\r\n            if (!hasFilters && recommendations && currentMode === 'posts') {\r\n                if (recommendations.tags && recommendations.tags.length > 0) {\r\n                    exploreTags = recommendations.tags;\r\n                }\r\n            }\r\n\r\n            // Mode-based search\r\n            let resultData = [];\r\n            let newLastDoc = null;\r\n            let hasMore = true;\r\n\r\n            switch (currentMode) {\r\n                case 'posts': {\r\n                    if (isMarketplaceMode) {\r\n                        // MARKETPLACE MODE\r\n                        const { data, lastDoc } = await searchShopItems(\r\n                            term,\r\n                            {\r\n                                tags: tags,\r\n                                sort: currentSortByRef.current\r\n                            },\r\n                            isLoadMore ? lastPostDoc : null\r\n                        );\r\n                        // Filter blocked users (shop owner)\r\n                        resultData = data.filter(item => !blockedUsers.has(item.ownerId));\r\n                        newLastDoc = lastDoc;\r\n                        hasMore = data.length > 0;\r\n                    } else {\r\n                        // STANDARD POSTS MODE\r\n                        let searchAuthorIds = followingOnly ? followingList : [];\r\n\r\n                        if (selectedMuseum) {\r\n                            const museumMemberIds = selectedMuseum.members || [];\r\n                            if (followingOnly) {\r\n                                // Intersection\r\n                                searchAuthorIds = searchAuthorIds.filter(id => museumMemberIds.includes(id));\r\n                            } else {\r\n                                searchAuthorIds = museumMemberIds;\r\n                            }\r\n                        }\r\n\r\n                        const { data, lastDoc } = await searchPosts(\r\n                            term,\r\n                            {\r\n                                tags: hasFilters ? tags : exploreTags,\r\n                                parkId: parkId,\r\n                                selectedDate: date,\r\n                                camera: currentSelectedCameraRef.current,\r\n                                film: currentSelectedFilmRef.current,\r\n                                orientation: currentSelectedOrientationRef.current,\r\n                                aspectRatio: currentSelectedAspectRatioRef.current,\r\n                                sort: hasFilters ? currentSortByRef.current : exploreSort,\r\n                                authorIds: searchAuthorIds,\r\n                                postType: searchMode // Phase 3: Pass searchMode to filter\r\n                            },\r\n                            isLoadMore ? lastPostDoc : null\r\n                        );\r\n                        // Filter blocked users\r\n                        resultData = data.filter(post => !blockedUsers.has(post.authorId) && !blockedUsers.has(post.userId));\r\n                        newLastDoc = lastDoc;\r\n                        hasMore = data.length > 0;\r\n                    }\r\n                    break;\r\n                }\r\n\r\n                case 'users': {\r\n                    const { data, lastDoc } = await searchUsers(\r\n                        term,\r\n                        { userIds: selectedMuseum ? (selectedMuseum.members || []) : [] },\r\n                        isLoadMore ? lastUserDoc : null\r\n                    );\r\n                    // Filter blocked users\r\n                    resultData = data.filter(user => !blockedUsers.has(user.id));\r\n                    newLastDoc = lastDoc;\r\n                    hasMore = data.length > 0;\r\n                    break;\r\n                }\r\n\r\n                case 'galleries': {\r\n                    const { data, lastDoc } = await searchGalleries(\r\n                        term,\r\n                        {\r\n                            tags: tags,\r\n                            galleryIds: selectedMuseum ? (selectedMuseum.galleryIds || []) : []\r\n                        },\r\n                        isLoadMore ? lastGalleryDoc : null\r\n                    );\r\n                    // Filter blocked users\r\n                    resultData = data.filter(gallery => !blockedUsers.has(gallery.ownerId));\r\n                    newLastDoc = lastDoc;\r\n                    hasMore = data.length > 0;\r\n\r\n                    // Apply Following filter\r\n                    if (followingOnly && followingList.length > 0) {\r\n                        resultData = resultData.filter(gallery => followingList.includes(gallery.ownerId));\r\n                    }\r\n                    break;\r\n                }\r\n\r\n                case 'collections': {\r\n                    const { data, lastDoc } = await searchCollections(\r\n                        term,\r\n                        { tags: tags },\r\n                        isLoadMore ? lastCollectionDoc : null\r\n                    );\r\n                    // Filter blocked users\r\n                    resultData = data.filter(collection => !blockedUsers.has(collection.ownerId));\r\n                    newLastDoc = lastDoc;\r\n                    hasMore = data.length > 0;\r\n\r\n                    if (followingOnly && followingList.length > 0) {\r\n                        resultData = resultData.filter(collection => followingList.includes(collection.ownerId));\r\n                    }\r\n                    break;\r\n                }\r\n\r\n                case 'museums': {\r\n                    const { data, lastDoc } = await searchCollections(\r\n                        term,\r\n                        { tags: tags },\r\n                        isLoadMore ? lastMuseumDoc : null\r\n                    );\r\n\r\n                    // Filter for museums\r\n                    resultData = data.filter(item => item.type === 'museum' && !blockedUsers.has(item.ownerId));\r\n                    newLastDoc = lastDoc;\r\n                    hasMore = data.length > 0;\r\n\r\n                    if (followingOnly && followingList.length > 0) {\r\n                        resultData = resultData.filter(item => followingList.includes(item.ownerId));\r\n                    }\r\n                    break;\r\n                }\r\n\r\n                case 'contests': {\r\n                    const { data, lastDoc } = await searchContests(\r\n                        term,\r\n                        { tags: tags, status: 'active' },\r\n                        isLoadMore ? lastContestDoc : null\r\n                    );\r\n                    // Filter blocked users (assuming hostId or ownerId exists)\r\n                    resultData = data.filter(contest => !blockedUsers.has(contest.hostId) && !blockedUsers.has(contest.ownerId));\r\n                    newLastDoc = lastDoc;\r\n                    hasMore = data.length > 0;\r\n                    break;\r\n                }\r\n\r\n                case 'events': {\r\n                    const { data, lastDoc } = await searchEvents(\r\n                        term,\r\n                        { status: 'upcoming' },\r\n                        isLoadMore ? lastEventDoc : null\r\n                    );\r\n                    // Filter blocked users\r\n                    resultData = data.filter(event => !blockedUsers.has(event.hostId) && !blockedUsers.has(event.ownerId));\r\n                    newLastDoc = lastDoc;\r\n                    hasMore = data.length > 0;\r\n                    break;\r\n                }\r\n\r\n                case 'spacecards': {\r\n                    const { data, lastDoc } = await searchSpaceCards(\r\n                        term,\r\n                        { tags: tags },\r\n                        isLoadMore ? lastSpaceCardDoc : null\r\n                    );\r\n                    // Filter blocked users\r\n                    resultData = data.filter(card => !blockedUsers.has(card.ownerId));\r\n                    newLastDoc = lastDoc;\r\n                    hasMore = data.length > 0;\r\n                    break;\r\n                }\r\n\r\n                default:\r\n                    break;\r\n            }\r\n\r\n            if (!isMountedRef.current || searchRequestId.current !== currentRequestId) return;\r\n\r\n            // Build payload based on current mode\r\n            const payload = {\r\n                posts: currentMode === 'posts' ? resultData : [],\r\n                users: currentMode === 'users' ? resultData : [],\r\n                galleries: currentMode === 'galleries' ? resultData : [],\r\n                collections: currentMode === 'collections' ? resultData : [],\r\n                contests: currentMode === 'contests' ? resultData : [],\r\n                events: currentMode === 'events' ? resultData : [],\r\n                spacecards: currentMode === 'spacecards' ? resultData : [],\r\n                museums: currentMode === 'museums' ? resultData : []\r\n            };\r\n\r\n            dispatch({\r\n                type: 'SET_RESULTS',\r\n                payload,\r\n                isLoadMore,\r\n                lastPostDoc: currentMode === 'posts' ? newLastDoc : lastPostDoc,\r\n                lastUserDoc: currentMode === 'users' ? newLastDoc : lastUserDoc,\r\n                lastGalleryDoc: currentMode === 'galleries' ? newLastDoc : lastGalleryDoc,\r\n                lastCollectionDoc: currentMode === 'collections' ? newLastDoc : lastCollectionDoc,\r\n                lastContestDoc: currentMode === 'contests' ? newLastDoc : lastContestDoc,\r\n                lastEventDoc: currentMode === 'events' ? newLastDoc : lastEventDoc,\r\n                lastSpaceCardDoc: currentMode === 'spacecards' ? newLastDoc : lastSpaceCardDoc,\r\n                hasMorePosts: currentMode === 'posts' ? hasMore : hasMorePosts,\r\n                hasMoreUsers: currentMode === 'users' ? hasMore : hasMoreUsers,\r\n                hasMoreGalleries: currentMode === 'galleries' ? hasMore : hasMoreGalleries,\r\n                hasMoreCollections: currentMode === 'collections' ? hasMore : hasMoreCollections,\r\n                hasMoreContests: currentMode === 'contests' ? hasMore : hasMoreContests,\r\n                hasMoreEvents: currentMode === 'events' ? hasMore : hasMoreEvents,\r\n                hasMoreSpaceCards: currentMode === 'spacecards' ? hasMore : hasMoreSpaceCards,\r\n                hasMoreMuseums: currentMode === 'museums' ? hasMore : hasMoreMuseums,\r\n                lastMuseumDoc: currentMode === 'museums' ? newLastDoc : lastMuseumDoc,\r\n            });\r\n        } catch (err) {\r\n            console.error('Search error:', err);\r\n            setError('Failed to perform search. Please try again.');\r\n        } finally {\r\n            if (isMountedRef.current) {\r\n                setIsSearching(false);\r\n            }\r\n            isLoadingRef.current = false;\r\n        }\r\n    }, [currentMode, followingOnly, followingList, searchUsers, searchPosts, searchShopItems, searchGalleries, searchCollections, searchContests, searchEvents, searchSpaceCards, lastPostDoc, lastUserDoc, lastGalleryDoc, lastCollectionDoc, lastMuseumDoc, lastContestDoc, lastEventDoc, lastSpaceCardDoc, hasMorePosts, hasMoreUsers, hasMoreGalleries, hasMoreCollections, hasMoreMuseums, hasMoreContests, hasMoreEvents, hasMoreSpaceCards, recommendations, blockedUsers, selectedMuseum, searchMode, isMarketplaceMode]);\r\n\r\n    // Update refs when search params change\r\n    useEffect(() => {\r\n        currentSearchTermRef.current = searchTerm;\r\n        currentSelectedTagsRef.current = selectedTags;\r\n        currentSelectedParkRef.current = selectedPark;\r\n        currentSelectedDateRef.current = selectedDate;\r\n        currentSelectedCameraRef.current = selectedCamera;\r\n        currentSelectedFilmRef.current = selectedFilm;\r\n        currentSelectedOrientationRef.current = selectedOrientation;\r\n        currentSelectedAspectRatioRef.current = selectedAspectRatio;\r\n        currentSortByRef.current = sortBy;\r\n    }, [searchTerm, selectedTags, selectedPark, selectedDate, selectedCamera, selectedFilm, selectedOrientation, selectedAspectRatio, sortBy]);\r\n\r\n    // Debounced search effect - does NOT depend on performSearch to avoid loop\r\n    useEffect(() => {\r\n        const timer = setTimeout(() => {\r\n            if (isMountedRef.current) {\r\n                performSearch(false);\r\n            }\r\n        }, 300);\r\n        return () => clearTimeout(timer);\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [searchTerm, selectedTags, selectedPark, selectedDate, selectedCamera, selectedFilm, selectedOrientation, selectedAspectRatio, sortBy]);\r\n\r\n    // Prefetching: Load more when user scrolls near bottom\r\n    useEffect(() => {\r\n        let prefetchTimer = null;\r\n        const handleScroll = () => {\r\n            // Debounce scroll events\r\n            if (prefetchTimer) clearTimeout(prefetchTimer);\r\n\r\n            prefetchTimer = setTimeout(() => {\r\n                const scrollPosition = window.innerHeight + window.scrollY;\r\n                const documentHeight = document.documentElement.scrollHeight;\r\n                const threshold = documentHeight - 800; // Trigger 800px before bottom\r\n\r\n                // Prefetch if near bottom, not already loading, and has more posts\r\n                if (scrollPosition >= threshold && !loading && hasMorePosts && results.posts.length > 0) {\r\n                    performSearch(true); // Load more\r\n                }\r\n            }, 300);\r\n        };\r\n\r\n        window.addEventListener('scroll', handleScroll);\r\n        return () => {\r\n            window.removeEventListener('scroll', handleScroll);\r\n            if (prefetchTimer) clearTimeout(prefetchTimer);\r\n        };\r\n    }, [loading, hasMorePosts, results.posts.length, performSearch]);\r\n\r\n    // Hide header on scroll\r\n    useEffect(() => {\r\n        const handleScroll = () => {\r\n            const currentScrollY = window.scrollY;\r\n\r\n            if (currentScrollY < 10) {\r\n                setHeaderVisible(true);\r\n            } else if (currentScrollY > lastScrollY.current && currentScrollY > 100) {\r\n                // Scrolling down & past threshold\r\n                setHeaderVisible(false);\r\n            } else if (currentScrollY < lastScrollY.current) {\r\n                // Scrolling up\r\n                setHeaderVisible(true);\r\n            }\r\n\r\n            lastScrollY.current = currentScrollY;\r\n        };\r\n\r\n        window.addEventListener('scroll', handleScroll, { passive: true });\r\n        return () => window.removeEventListener('scroll', handleScroll);\r\n    }, []);\r\n\r\n    const handleTagToggle = (tag) => {\r\n        setSelectedTags(prev => {\r\n            if (prev.includes(tag)) {\r\n                return prev.filter(t => t !== tag);\r\n            }\r\n            return [...prev, tag];\r\n        });\r\n    };\r\n\r\n    const clearAllFilters = () => {\r\n        setSearchTerm('');\r\n        setSelectedTags([]);\r\n        setSelectedPark(null);\r\n        setSelectedDate(null);\r\n        setSelectedCamera(null);\r\n        setSelectedFilm(null);\r\n        setSelectedOrientation(null);\r\n        setSelectedAspectRatio(null);\r\n        setSortBy('newest');\r\n        // Clear museum filter by removing param\r\n        if (selectedMuseum) {\r\n            const newParams = new URLSearchParams(searchParams);\r\n            newParams.delete('museumId');\r\n            navigate({ search: newParams.toString() });\r\n        }\r\n\r\n        dispatch({ type: 'RESET_RESULTS' });\r\n    };\r\n\r\n\r\n\r\n    return (\r\n        <SearchLayoutWrapper\r\n            selectedTags={selectedTags}\r\n            onTagToggle={handleTagToggle}\r\n            selectedPark={selectedPark}\r\n            onParkSelect={setSelectedPark}\r\n            selectedDate={selectedDate}\r\n            onDateSelect={setSelectedDate}\r\n            selectedCamera={selectedCamera}\r\n            onCameraSelect={setSelectedCamera}\r\n            selectedFilm={selectedFilm}\r\n            onFilmSelect={setSelectedFilm}\r\n            selectedOrientation={selectedOrientation}\r\n            onOrientationSelect={setSelectedOrientation}\r\n            selectedAspectRatio={selectedAspectRatio}\r\n            onAspectRatioSelect={setSelectedAspectRatio}\r\n            onClearAll={clearAllFilters}\r\n            resultsCount={\r\n                currentMode === 'posts' ? results.posts.length :\r\n                    currentMode === 'users' ? results.users.length :\r\n                        currentMode === 'galleries' ? results.galleries.length :\r\n                            currentMode === 'collections' ? results.collections.length :\r\n                                currentMode === 'contests' ? results.contests.length :\r\n                                    currentMode === 'events' ? results.events.length :\r\n                                        currentMode === 'spacecards' ? results.spacecards.length :\r\n                                            currentMode === 'museums' ? results.museums.length : 0\r\n            }\r\n            currentMode={currentMode}\r\n            isMobileFiltersOpen={isMobileFiltersOpen}\r\n            onMobileFilterToggle={setIsMobileFiltersOpen}\r\n            onScroll={handleScroll}\r\n        >\r\n            {/* Active Museum Filter Indicator */}\r\n            {selectedMuseum && (\r\n                <div style={{\r\n                    background: 'rgba(127, 255, 212, 0.1)',\r\n                    borderBottom: '1px solid rgba(127, 255, 212, 0.2)',\r\n                    padding: '0.75rem 2rem',\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'space-between',\r\n                    color: '#7FFFD4',\r\n                    fontSize: '0.9rem'\r\n                }}>\r\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                        <FaUniversity />\r\n                        <span>Filtering by: <strong>{selectedMuseum.title}</strong></span>\r\n                    </div>\r\n                    <button\r\n                        onClick={() => {\r\n                            const newParams = new URLSearchParams(searchParams);\r\n                            newParams.delete('museumId');\r\n                            navigate({ search: newParams.toString() });\r\n                        }}\r\n                        style={{\r\n                            background: 'transparent',\r\n                            border: 'none',\r\n                            color: '#7FFFD4',\r\n                            cursor: 'pointer',\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            gap: '0.25rem',\r\n                            opacity: 0.8\r\n                        }}\r\n                    >\r\n                        <FaTimes /> Clear\r\n                    </button>\r\n                </div>\r\n            )}\r\n\r\n            <SearchHeader\r\n                isMobile={isMobile}\r\n                headerVisible={headerVisible}\r\n                searchTerm={searchTerm}\r\n                setSearchTerm={setSearchTerm}\r\n                currentMode={currentMode}\r\n                setCurrentMode={setCurrentMode}\r\n                followingOnly={followingOnly}\r\n                setFollowingOnly={setFollowingOnly}\r\n                selectedTags={selectedTags}\r\n                setIsMobileFiltersOpen={setIsMobileFiltersOpen}\r\n                sortBy={sortBy}\r\n                setSortBy={setSortBy}\r\n                viewMode={viewMode}\r\n                setViewMode={setViewMode}\r\n                isSortDropdownOpen={isSortDropdownOpen}\r\n                setIsSortDropdownOpen={setIsSortDropdownOpen}\r\n                searchMode={searchMode}\r\n                setSearchMode={setSearchMode}\r\n                isMarketplaceMode={isMarketplaceMode} // NEW\r\n                setIsMarketplaceMode={setIsMarketplaceMode} // NEW\r\n            />\r\n\r\n            <SearchResults\r\n                viewMode={viewMode}\r\n                currentMode={currentMode}\r\n                results={{\r\n                    ...results,\r\n                    // Filter logic handled deep in SearchResults or here: \r\n                    // If marketplace mode, we filter posts that are linked to active shop items?\r\n                    // Actually, the USER requested \"Turn Explore into Marketplace Mode\"\r\n                    // So we should pass isMarketplaceMode down to render Shop Item Cards instead of Post Cards.\r\n                    posts: results.posts.filter(p => (p.type || 'art') === searchMode)\r\n                }}\r\n                isMarketplaceMode={isMarketplaceMode} // NEW\r\n                isMobile={isMobile}\r\n                selectedOrientation={selectedOrientation}\r\n                selectedAspectRatio={selectedAspectRatio}\r\n                isSearching={isSearching}\r\n                hasSearched={hasSearched}\r\n                error={error}\r\n                performSearch={performSearch}\r\n                setSearchTerm={setSearchTerm}\r\n                setSelectedTags={setSelectedTags}\r\n                setSelectedPark={setSelectedPark}\r\n                setSelectedDate={setSelectedDate}\r\n                setSelectedCamera={setSelectedCamera}\r\n                setSelectedFilm={setSelectedFilm}\r\n                setSelectedOrientation={setSelectedOrientation}\r\n                setSelectedAspectRatio={setSelectedAspectRatio}\r\n                sortBy={sortBy}\r\n            />\r\n\r\n            {/* Twinkle Animation CSS */}\r\n            <style>{`\r\n@keyframes twinkle {\r\n    0 %, 100 % {\r\n        opacity: 0.3;\r\n        transform: scale(1);\r\n    }\r\n    50 % {\r\n        opacity: 1;\r\n        transform: scale(1.2);\r\n    }\r\n}\r\n`}</style>\r\n        </SearchLayoutWrapper>\r\n    );\r\n};\r\n\r\nexport default Search;","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\pages\\Settings.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'deleteDoc' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isFeatureEnabled' is defined but never used. Allowed unused vars must match /^_/u.","line":12,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaBell' is defined but never used. Allowed unused vars must match /^_/u.","line":14,"column":62,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":68},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaGlobe' is defined but never used. Allowed unused vars must match /^_/u.","line":14,"column":138,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":145},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'blockUser' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":21,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'notifications' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":97,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":97,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'toggleNotification' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":133,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":133,"endColumn":29}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { deleteUser, reauthenticateWithCredential, EmailAuthProvider } from 'firebase/auth';\r\nimport { doc, deleteDoc, collection, query, where, getDocs, writeBatch, updateDoc, getDoc, deleteField } from 'firebase/firestore';\r\nimport { db } from '@/firebase';\r\nimport { useUI } from '@/context/UIContext';\r\nimport ReportModal from '@/components/ReportModal';\r\nimport { useBlock } from '@/hooks/useBlock';\r\nimport { getUserNSFWPreference, setUserNSFWPreference } from '@/core/constants/nsfwTags';\r\nimport { isFeatureEnabled } from '@/config/featureFlags';\r\nimport { useFeedStore } from '@/core/store/useFeedStore';\r\nimport { FaArrowLeft, FaUserEdit, FaSignOutAlt, FaShieldAlt, FaBell, FaTrash, FaExclamationTriangle, FaChevronRight, FaEnvelope, FaLock, FaGlobe, FaPalette, FaCreditCard, FaHistory, FaFileContract, FaLifeRing, FaAward, FaSmile, FaCheck, FaStar, FaUsers } from 'react-icons/fa';\r\n\r\nconst Settings = () => {\r\n    const navigate = useNavigate();\r\n    const { currentUser, logout } = useAuth();\r\n    const { t, i18n } = useTranslation();\r\n    const { activePost } = useUI();\r\n    const { blockUser } = useBlock();\r\n    const [loading, setLoading] = useState(false);\r\n    const { currentFeed, switchToFeed, followingOnly, setFollowingOnly } = useFeedStore();\r\n\r\n    // Language State\r\n    const [showLanguageModal, setShowLanguageModal] = useState(false);\r\n    const languages = [\r\n        { code: 'en', name: 'English' },\r\n        { code: 'es', name: 'Espa├▒ol' },\r\n        { code: 'pt-BR', name: 'Portugu├¬s (Brasil)' },\r\n        { code: 'fr', name: 'Fran├ºais' },\r\n        { code: 'de', name: 'Deutsch' },\r\n        { code: 'it', name: 'Italiano' },\r\n        { code: 'ja', name: 'µùÑµ£¼Φ¬₧' },\r\n        { code: 'ko', name: 'φò£Ω╡¡∞û┤' },\r\n        { code: 'zh-CN', name: 'τ«ÇΣ╜ôΣ╕¡µûç' },\r\n        { code: 'zh-TW', name: 'τ╣üΘ½öΣ╕¡µûç' },\r\n        { code: 'hi', name: 'αñ╣αñ┐αñ¿αÑìαñªαÑÇ' },\r\n        { code: 'ar', name: '╪º┘ä╪╣╪▒╪¿┘è╪⌐' },\r\n        { code: 'ru', name: '╨á╤â╤ü╤ü╨║╨╕╨╣' },\r\n        { code: 'tr', name: 'T├╝rk├ºe' },\r\n        { code: 'id', name: 'Bahasa Indonesia' },\r\n        { code: 'vi', name: 'Tiß║┐ng Viß╗çt' },\r\n        { code: 'th', name: 'α╣äα╕ùα╕ó' },\r\n        { code: 'nl', name: 'Nederlands' },\r\n        { code: 'pl', name: 'Polski' },\r\n        { code: 'sv', name: 'Svenska' }\r\n    ];\r\n\r\n    const changeLanguage = async (langCode) => {\r\n        i18n.changeLanguage(langCode);\r\n        setShowLanguageModal(false);\r\n        if (currentUser) {\r\n            try {\r\n                const userRef = doc(db, 'users', currentUser.uid);\r\n                await updateDoc(userRef, { language: langCode });\r\n            } catch (error) {\r\n                console.error(\"Error saving language preference:\", error);\r\n            }\r\n        }\r\n    };\r\n\r\n\r\n\r\n    // Appearance State\r\n    const [togglingStars, setTogglingStars] = useState(false);\r\n\r\n    const toggleStarsOverlay = async () => {\r\n        if (!currentUser) return;\r\n        setTogglingStars(true);\r\n        try {\r\n            // Fetch latest to ensure we toggle correctly\r\n            const userRef = doc(db, 'users', currentUser.uid);\r\n            const userSnap = await getDoc(userRef);\r\n            if (userSnap.exists()) {\r\n                const userData = userSnap.data();\r\n                const currentVal = userData.profileTheme?.useStarsOverlay || false;\r\n                await updateDoc(userRef, {\r\n                    'profileTheme.useStarsOverlay': !currentVal\r\n                });\r\n                // Reload to reflect changes globally\r\n                window.location.reload();\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Error toggling stars:\", error);\r\n            alert(\"Failed to update theme setting.\");\r\n        } finally {\r\n            setTogglingStars(false);\r\n        }\r\n    };\r\n\r\n\r\n    // Report Modal State\r\n    const [showReportModal, setShowReportModal] = useState(false);\r\n\r\n    // Notification State (Local only for now)\r\n    const [notifications, setNotifications] = useState({\r\n        email: true,\r\n        push: true,\r\n        newFollowers: true,\r\n        mentions: true,\r\n        marketing: false\r\n    });\r\n\r\n    // Content Preferences\r\n    const [showNSFW, setShowNSFW] = useState(getUserNSFWPreference());\r\n\r\n    const toggleNSFW = () => {\r\n        const newValue = !showNSFW;\r\n        setShowNSFW(newValue);\r\n        setUserNSFWPreference(newValue);\r\n    };\r\n\r\n    // Delete Account State\r\n    const [showDeleteConfirm, setShowDeleteConfirm] = useState(false);\r\n    const [deletePassword, setDeletePassword] = useState('');\r\n    const [deleteError, setDeleteError] = useState('');\r\n\r\n    // Rating Conversion State\r\n    const [showConversionConfirm, setShowConversionConfirm] = useState(false);\r\n    const [converting, setConverting] = useState(false);\r\n    const [conversionError, setConversionError] = useState('');\r\n\r\n    const handleLogout = async () => {\r\n        try {\r\n            await logout();\r\n            navigate('/login');\r\n        } catch (error) {\r\n            console.error(\"Failed to log out\", error);\r\n        }\r\n    };\r\n\r\n    const toggleNotification = (key) => {\r\n        setNotifications(prev => ({ ...prev, [key]: !prev[key] }));\r\n    };\r\n\r\n    const handleDeleteAccount = async (e) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n        setDeleteError('');\r\n\r\n        try {\r\n            // 1. Re-authenticate\r\n            const credential = EmailAuthProvider.credential(currentUser.email, deletePassword);\r\n            await reauthenticateWithCredential(currentUser, credential);\r\n\r\n            // 2. Cleanup Data (Best effort client-side)\r\n            const batch = writeBatch(db);\r\n\r\n            // Delete User Profile\r\n            const userRef = doc(db, 'users', currentUser.uid);\r\n            batch.delete(userRef);\r\n\r\n            // Delete User's Posts (Limit to 500 for batch size limits)\r\n            const postsQuery = query(collection(db, 'posts'), where('authorId', '==', currentUser.uid));\r\n            const postsSnapshot = await getDocs(postsQuery);\r\n            postsSnapshot.forEach(doc => {\r\n                batch.delete(doc.ref);\r\n            });\r\n\r\n            // Commit Batch\r\n            await batch.commit();\r\n\r\n            // 3. Delete Auth Account\r\n            await deleteUser(currentUser);\r\n\r\n            // 4. Redirect\r\n            navigate('/login');\r\n        } catch (error) {\r\n            console.error(\"Error deleting account:\", error);\r\n            if (error.code === 'auth/wrong-password') {\r\n                setDeleteError('Incorrect password.');\r\n            } else {\r\n                setDeleteError('Failed to delete account. Please try again or contact support.');\r\n            }\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleConvertToSmiley = async () => {\r\n        if (!activePost || !currentUser) return;\r\n\r\n        setConverting(true);\r\n        setConversionError('');\r\n\r\n        try {\r\n            const postRef = doc(db, 'posts', activePost.id);\r\n            const postSnap = await getDoc(postRef);\r\n\r\n            if (!postSnap.exists()) {\r\n                throw new Error('Post not found');\r\n            }\r\n\r\n            const postData = postSnap.data();\r\n            const ratings = postData.ratings || {};\r\n\r\n            // Extract user IDs who rated\r\n            const userIds = Object.keys(ratings);\r\n\r\n            // Update post to smiley system\r\n            await updateDoc(postRef, {\r\n                enableRatings: false,\r\n                likes: userIds,\r\n                likeCount: userIds.length,\r\n                ratings: deleteField(),\r\n                averageRating: deleteField(),\r\n                totalVotes: deleteField()\r\n            });\r\n\r\n            setShowConversionConfirm(false);\r\n            // Refresh the page to show updated post\r\n            window.location.reload();\r\n        } catch (error) {\r\n            console.error('Error converting post:', error);\r\n            setConversionError('Failed to convert post. Please try again.');\r\n        } finally {\r\n            setConverting(false);\r\n        }\r\n    };\r\n\r\n    // Reusable Settings Row Component\r\n    const SettingsRow = ({ icon: Icon, label, onClick, isDestructive = false, showChevron = true }) => (\r\n        <button\r\n            onClick={onClick}\r\n            style={{\r\n                width: '100%',\r\n                height: '50px',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'space-between',\r\n                padding: '0 20px',\r\n                background: 'transparent',\r\n                border: '1px solid rgba(110, 255, 216, 0.15)',\r\n                borderRadius: '8px',\r\n                color: isDestructive ? '#ff4444' : 'var(--text-primary, #d8fff1)',\r\n                cursor: 'pointer',\r\n                transition: 'all 0.2s',\r\n                marginBottom: '8px'\r\n            }}\r\n            onMouseEnter={(e) => {\r\n                e.currentTarget.style.background = isDestructive ? 'rgba(255, 68, 68, 0.05)' : 'rgba(110, 255, 216, 0.05)';\r\n                e.currentTarget.style.borderColor = isDestructive ? 'rgba(255, 68, 68, 0.3)' : 'var(--accent, #6effd8)';\r\n                e.currentTarget.style.boxShadow = isDestructive ? '0 0 15px rgba(255, 68, 68, 0.2)' : '0 0 15px var(--accent-glow, rgba(110,255,216,0.35))';\r\n            }}\r\n            onMouseLeave={(e) => {\r\n                e.currentTarget.style.background = 'transparent';\r\n                e.currentTarget.style.borderColor = 'rgba(110, 255, 216, 0.15)';\r\n                e.currentTarget.style.boxShadow = 'none';\r\n            }}\r\n        >\r\n            <div style={{ display: 'flex', alignItems: 'center', gap: '16px' }}>\r\n                <Icon size={18} color={isDestructive ? '#ff4444' : 'var(--accent, #6effd8)'} />\r\n                <span style={{ fontSize: '0.95rem', fontWeight: '500' }}>{label}</span>\r\n            </div>\r\n            {showChevron && <FaChevronRight size={14} color={isDestructive ? '#ff4444' : 'var(--accent, #6effd8)'} />}\r\n        </button>\r\n    );\r\n\r\n    return (\r\n        <div style={{\r\n            minHeight: '100vh',\r\n            background: 'var(--bg-darker, #020404)',\r\n            color: 'var(--text-primary, #d8fff1)',\r\n            paddingBottom: '80px'\r\n        }}>\r\n            {/* Header */}\r\n            <div style={{\r\n                padding: '1rem 2rem',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '1rem',\r\n                background: 'rgba(0, 0, 0, 0.95)',\r\n                backdropFilter: 'blur(10px)',\r\n                borderBottom: '1px solid rgba(110, 255, 216, 0.2)',\r\n                position: 'sticky',\r\n                top: 0,\r\n                zIndex: 100\r\n            }}>\r\n                <button\r\n                    onClick={() => navigate(-1)}\r\n                    style={{\r\n                        background: 'transparent',\r\n                        border: 'none',\r\n                        color: 'var(--accent, #6effd8)',\r\n                        cursor: 'pointer',\r\n                        fontSize: '1.2rem',\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        padding: 0\r\n                    }}\r\n                >\r\n                    <FaArrowLeft />\r\n                </button>\r\n                <h1 style={{\r\n                    fontSize: '1.2rem',\r\n                    fontWeight: '700',\r\n                    color: 'var(--accent, #6effd8)',\r\n                    fontFamily: 'var(--font-family-heading)',\r\n                    letterSpacing: '0.15em',\r\n                    textTransform: 'uppercase',\r\n                    margin: 0\r\n                }}>{t('settings.title')}</h1>\r\n            </div>\r\n\r\n            <div style={{ padding: '1rem', maxWidth: '600px', margin: '0 auto' }}>\r\n\r\n                {/* Account Section */}\r\n                <h3 style={{\r\n                    color: 'var(--text-secondary, #6b7f78)',\r\n                    fontSize: '0.75rem',\r\n                    marginBottom: '12px',\r\n                    marginLeft: '4px',\r\n                    letterSpacing: '0.1em',\r\n                    textTransform: 'uppercase',\r\n                    fontWeight: '600'\r\n                }}>{t('settings.account')}</h3>\r\n                <div style={{\r\n                    background: 'var(--bg-card, #050808)',\r\n                    borderRadius: '12px',\r\n                    padding: '16px',\r\n                    marginBottom: '24px',\r\n                    border: '1px solid rgba(110, 255, 216, 0.1)'\r\n                }}>\r\n                    <SettingsRow icon={FaUserEdit} label={t('settings.editProfile')} onClick={() => navigate('/edit-profile')} />\r\n                    <SettingsRow icon={FaEnvelope} label={t('settings.changeEmail')} onClick={() => alert('Coming soon')} />\r\n                    <SettingsRow icon={FaLock} label={t('settings.changePassword')} onClick={() => alert('Coming soon')} />\r\n                    <SettingsRow icon={FaTrash} label={t('settings.deleteAccount')} onClick={() => setShowDeleteConfirm(true)} isDestructive={true} />\r\n                </div>\r\n\r\n                {/* Appearance Section */}\r\n                <h3 style={{\r\n                    color: 'var(--text-secondary, #6b7f78)',\r\n                    fontSize: '0.75rem',\r\n                    marginBottom: '12px',\r\n                    marginLeft: '4px',\r\n                    letterSpacing: '0.1em',\r\n                    textTransform: 'uppercase',\r\n                    fontWeight: '600'\r\n                }}>{t('settings.appearance') || 'APPEARANCE'}</h3>\r\n                <div style={{\r\n                    background: 'var(--bg-card, #050808)',\r\n                    borderRadius: '12px',\r\n                    padding: '16px',\r\n                    marginBottom: '24px',\r\n                    border: '1px solid rgba(110, 255, 216, 0.1)'\r\n                }}>\r\n                    <SettingsRow\r\n                        icon={FaStar}\r\n                        label={togglingStars ? \"Updating...\" : \"Toggle Star Overlay\"}\r\n                        onClick={toggleStarsOverlay}\r\n                    />\r\n                    <SettingsRow icon={FaPalette} label={t('settings.theme')} onClick={() => alert('Theme selection coming soon')} />\r\n                </div>\r\n\r\n                {/* Feed Preferences Section */}\r\n                <h3 style={{\r\n                    color: 'var(--text-secondary, #6b7f78)',\r\n                    fontSize: '0.75rem',\r\n                    marginBottom: '12px',\r\n                    marginLeft: '4px',\r\n                    letterSpacing: '0.1em',\r\n                    textTransform: 'uppercase',\r\n                    fontWeight: '600'\r\n                }}>FEED PREFERENCES</h3>\r\n                <div style={{\r\n                    background: 'var(--bg-card, #050808)',\r\n                    borderRadius: '12px',\r\n                    padding: '16px',\r\n                    marginBottom: '24px',\r\n                    border: '1px solid rgba(110, 255, 216, 0.1)'\r\n                }}>\r\n                    <SettingsRow\r\n                        icon={FaUsers}\r\n                        label={followingOnly ? 'Default: Following Only' : 'Default: Global Feed'}\r\n                        onClick={() => {\r\n                            setFollowingOnly(!followingOnly);\r\n                            // Persisted automatically by useFeedStore\r\n                        }}\r\n                    />\r\n                    <SettingsRow\r\n                        icon={FaPalette}\r\n                        label={currentFeed === 'art' ? 'Default: Art Feed' : 'Default: Social Feed'}\r\n                        onClick={() => {\r\n                            switchToFeed(currentFeed === 'art' ? 'social' : 'art');\r\n                        }}\r\n                    />\r\n                </div>\r\n\r\n                {/* Content Preferences Section */}\r\n                <h3 style={{\r\n                    color: 'var(--text-secondary, #6b7f78)',\r\n                    fontSize: '0.75rem',\r\n                    marginBottom: '12px',\r\n                    marginLeft: '4px',\r\n                    letterSpacing: '0.1em',\r\n                    textTransform: 'uppercase',\r\n                    fontWeight: '600'\r\n                }}>CONTENT PREFERENCES</h3>\r\n                <div style={{\r\n                    background: 'var(--bg-card, #050808)',\r\n                    borderRadius: '12px',\r\n                    padding: '16px',\r\n                    marginBottom: '24px',\r\n                    border: '1px solid rgba(110, 255, 216, 0.1)'\r\n                }}>\r\n                    <div\r\n                        onClick={toggleNSFW}\r\n                        style={{\r\n                            width: '100%',\r\n                            height: '50px',\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            justifyContent: 'space-between',\r\n                            padding: '0 20px',\r\n                            background: 'transparent',\r\n                            border: '1px solid rgba(110, 255, 216, 0.15)',\r\n                            borderRadius: '8px',\r\n                            color: 'var(--text-primary, #d8fff1)',\r\n                            cursor: 'pointer',\r\n                            transition: 'all 0.2s',\r\n                            marginBottom: '8px'\r\n                        }}\r\n                    >\r\n                        <div style={{ display: 'flex', alignItems: 'center', gap: '16px' }}>\r\n                            <FaShieldAlt size={18} color=\"var(--accent, #6effd8)\" />\r\n                            <span style={{ fontSize: '0.95rem', fontWeight: '500' }}>Show Sensitive Content</span>\r\n                        </div>\r\n                        <div style={{\r\n                            width: '44px',\r\n                            height: '24px',\r\n                            borderRadius: '12px',\r\n                            background: showNSFW ? 'var(--accent, #6effd8)' : 'rgba(255,255,255,0.2)',\r\n                            position: 'relative',\r\n                            transition: 'background 0.2s'\r\n                        }}>\r\n                            <div style={{\r\n                                width: '20px',\r\n                                height: '20px',\r\n                                borderRadius: '50%',\r\n                                background: '#fff',\r\n                                position: 'absolute',\r\n                                top: '2px',\r\n                                left: showNSFW ? '22px' : '2px',\r\n                                transition: 'left 0.2s',\r\n                                boxShadow: '0 2px 4px rgba(0,0,0,0.3)'\r\n                            }} />\r\n                        </div>\r\n                    </div>\r\n                    <p style={{\r\n                        fontSize: '0.8rem',\r\n                        color: 'var(--text-secondary, #6b7f78)',\r\n                        margin: '0 20px',\r\n                        opacity: 0.8\r\n                    }}>\r\n                        {showNSFW\r\n                            ? 'Sensitive content will be shown without warnings'\r\n                            : 'Sensitive content is hidden behind a warning overlay'}\r\n                    </p>\r\n                </div>\r\n\r\n\r\n\r\n                {/* Billing Section */}\r\n                <h3 style={{\r\n                    color: 'var(--text-secondary, #6b7f78)',\r\n                    fontSize: '0.75rem',\r\n                    marginBottom: '12px',\r\n                    marginLeft: '4px',\r\n                    letterSpacing: '0.1em',\r\n                    textTransform: 'uppercase',\r\n                    fontWeight: '600'\r\n                }}>{t('settings.billing')}</h3>\r\n                <div style={{\r\n                    background: 'var(--bg-card, #050808)',\r\n                    borderRadius: '12px',\r\n                    padding: '16px',\r\n                    marginBottom: '24px',\r\n                    border: '1px solid rgba(110, 255, 216, 0.1)'\r\n                }}>\r\n                    <SettingsRow icon={FaCreditCard} label={t('settings.manageSubscription')} onClick={() => alert('Coming soon')} />\r\n                    <SettingsRow icon={FaCreditCard} label={t('settings.paymentMethods')} onClick={() => alert('Coming soon')} />\r\n                    <SettingsRow icon={FaHistory} label={t('settings.purchaseHistory')} onClick={() => alert('Coming soon')} />\r\n                </div>\r\n\r\n                {/* About Section */}\r\n                <h3 style={{\r\n                    color: 'var(--text-secondary, #6b7f78)',\r\n                    fontSize: '0.75rem',\r\n                    marginBottom: '12px',\r\n                    marginLeft: '4px',\r\n                    letterSpacing: '0.1em',\r\n                    textTransform: 'uppercase',\r\n                    fontWeight: '600'\r\n                }}>{t('settings.about')}</h3>\r\n                <div style={{\r\n                    background: 'var(--bg-card, #050808)',\r\n                    borderRadius: '12px',\r\n                    padding: '16px',\r\n                    marginBottom: '24px',\r\n                    border: '1px solid rgba(110, 255, 216, 0.1)'\r\n                }}>\r\n                    <SettingsRow icon={FaFileContract} label={t('settings.terms')} onClick={() => navigate('/legal')} />\r\n                    <SettingsRow icon={FaShieldAlt} label={t('settings.privacyPolicy')} onClick={() => navigate('/legal')} />\r\n                    <SettingsRow icon={FaLifeRing} label={t('settings.support')} onClick={() => window.location.href = 'mailto:support@panospace.com'} />\r\n                    <SettingsRow icon={FaAward} label={t('settings.credits')} onClick={() => navigate('/credits')} />\r\n                </div>\r\n\r\n                {/* Sign Out */}\r\n                <div style={{\r\n                    background: 'var(--bg-card, #050808)',\r\n                    borderRadius: '12px',\r\n                    padding: '16px',\r\n                    marginBottom: '24px',\r\n                    border: '1px solid rgba(110, 255, 216, 0.1)'\r\n                }}>\r\n                    <SettingsRow icon={FaSignOutAlt} label={t('settings.signOut')} onClick={handleLogout} isDestructive={true} showChevron={false} />\r\n                </div>\r\n\r\n                {/* Version Info */}\r\n                <div style={{\r\n                    textAlign: 'center',\r\n                    color: 'var(--text-secondary, #6b7f78)',\r\n                    fontSize: '0.75rem',\r\n                    marginTop: '2rem',\r\n                    opacity: 0.6\r\n                }}>\r\n                    <p style={{ margin: '0 0 0.25rem 0' }}>{t('settings.version')}</p>\r\n                    <p style={{ margin: 0 }}>{t('settings.builtFor')}</p>\r\n                </div>\r\n\r\n            </div>\r\n\r\n            {/* Language Selection Modal */}\r\n            {\r\n                showLanguageModal && (\r\n                    <div style={{\r\n                        position: 'fixed',\r\n                        inset: 0,\r\n                        background: 'rgba(0,0,0,0.9)',\r\n                        backdropFilter: 'blur(10px)',\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        justifyContent: 'center',\r\n                        zIndex: 1000,\r\n                        padding: '2rem'\r\n                    }} onClick={() => setShowLanguageModal(false)}>\r\n                        <div style={{\r\n                            background: 'var(--bg-card, #050808)',\r\n                            border: '1px solid rgba(110, 255, 216, 0.2)',\r\n                            borderRadius: '16px',\r\n                            padding: '1.5rem',\r\n                            maxWidth: '400px',\r\n                            width: '100%',\r\n                            maxHeight: '80vh',\r\n                            display: 'flex',\r\n                            flexDirection: 'column',\r\n                            boxShadow: '0 0 40px var(--accent-glow, rgba(110,255,216,0.35))'\r\n                        }} onClick={(e) => e.stopPropagation()}>\r\n                            <h2 style={{\r\n                                fontSize: '1.25rem',\r\n                                fontWeight: 'bold',\r\n                                color: 'var(--text-primary, #d8fff1)',\r\n                                marginBottom: '1rem',\r\n                                textAlign: 'center'\r\n                            }}>{t('settings.language')}</h2>\r\n\r\n                            <div style={{\r\n                                overflowY: 'auto',\r\n                                display: 'flex',\r\n                                flexDirection: 'column',\r\n                                gap: '0.5rem',\r\n                                paddingRight: '0.5rem'\r\n                            }}>\r\n                                {languages.map((lang) => (\r\n                                    <button\r\n                                        key={lang.code}\r\n                                        onClick={() => changeLanguage(lang.code)}\r\n                                        style={{\r\n                                            padding: '1rem',\r\n                                            background: i18n.language === lang.code ? 'rgba(110, 255, 216, 0.1)' : 'transparent',\r\n                                            border: i18n.language === lang.code ? '1px solid var(--accent, #6effd8)' : '1px solid rgba(255, 255, 255, 0.05)',\r\n                                            borderRadius: '8px',\r\n                                            color: i18n.language === lang.code ? 'var(--accent, #6effd8)' : 'var(--text-secondary, #6b7f78)',\r\n                                            textAlign: 'left',\r\n                                            cursor: 'pointer',\r\n                                            fontSize: '1rem',\r\n                                            display: 'flex',\r\n                                            alignItems: 'center',\r\n                                            justifyContent: 'space-between',\r\n                                            transition: 'all 0.2s'\r\n                                        }}\r\n                                    >\r\n                                        <span>{lang.name}</span>\r\n                                        {i18n.language === lang.code && <FaCheck size={14} />}\r\n                                    </button>\r\n                                ))}\r\n                            </div>\r\n\r\n                            <button\r\n                                onClick={() => setShowLanguageModal(false)}\r\n                                style={{\r\n                                    marginTop: '1rem',\r\n                                    padding: '0.75rem',\r\n                                    background: 'transparent',\r\n                                    border: 'none',\r\n                                    color: 'var(--text-secondary, #6b7f78)',\r\n                                    cursor: 'pointer',\r\n                                    fontSize: '0.9rem',\r\n                                    textDecoration: 'underline',\r\n                                    alignSelf: 'center'\r\n                                }}\r\n                            >\r\n                                Cancel\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                )\r\n            }\r\n\r\n            {/* Delete Account Modal */}\r\n            {\r\n                showDeleteConfirm && (\r\n                    <div style={{\r\n                        position: 'fixed',\r\n                        inset: 0,\r\n                        background: 'rgba(0,0,0,0.9)',\r\n                        backdropFilter: 'blur(10px)',\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        justifyContent: 'center',\r\n                        zIndex: 1000,\r\n                        padding: '2rem'\r\n                    }}>\r\n                        <div style={{\r\n                            background: 'var(--bg-card, #050808)',\r\n                            border: '1px solid rgba(110, 255, 216, 0.2)',\r\n                            borderRadius: '16px',\r\n                            padding: '2rem',\r\n                            maxWidth: '400px',\r\n                            width: '100%',\r\n                            boxShadow: '0 0 40px var(--accent-glow, rgba(110,255,216,0.35))'\r\n                        }}>\r\n                            <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', gap: '1rem', textAlign: 'center' }}>\r\n                                <FaExclamationTriangle size={40} color=\"#ff4444\" />\r\n                                <h2 style={{ fontSize: '1.5rem', fontWeight: 'bold', color: 'var(--text-primary, #d8fff1)' }}>Delete Account?</h2>\r\n                                <p style={{ color: 'var(--text-secondary, #6b7f78)' }}>\r\n                                    This action is <strong>irreversible</strong>. All your photos, profile data, and settings will be permanently deleted.\r\n                                </p>\r\n\r\n                                {deleteError && (\r\n                                    <div style={{ color: '#ff4444', background: 'rgba(255,68,68,0.1)', padding: '0.5rem', borderRadius: '4px', fontSize: '0.9rem', width: '100%' }}>\r\n                                        {deleteError}\r\n                                    </div>\r\n                                )}\r\n\r\n                                <form onSubmit={handleDeleteAccount} style={{ width: '100%', display: 'flex', flexDirection: 'column', gap: '1rem', marginTop: '1rem' }}>\r\n                                    <div style={{ textAlign: 'left' }}>\r\n                                        <label style={{ fontSize: '0.9rem', color: 'var(--text-secondary, #6b7f78)', marginBottom: '0.5rem', display: 'block' }}>\r\n                                            Confirm Password to Delete\r\n                                        </label>\r\n                                        <input\r\n                                            type=\"password\"\r\n                                            value={deletePassword}\r\n                                            onChange={(e) => setDeletePassword(e.target.value)}\r\n                                            placeholder=\"Enter your password\"\r\n                                            required\r\n                                            style={{\r\n                                                width: '100%',\r\n                                                padding: '0.8rem',\r\n                                                background: 'var(--bg-darker, #020404)',\r\n                                                border: '1px solid rgba(110, 255, 216, 0.2)',\r\n                                                borderRadius: '8px',\r\n                                                color: 'var(--text-primary, #d8fff1)',\r\n                                                fontSize: '1rem'\r\n                                            }}\r\n                                        />\r\n                                    </div>\r\n\r\n                                    <button\r\n                                        type=\"submit\"\r\n                                        disabled={loading || !deletePassword}\r\n                                        style={{\r\n                                            padding: '1rem',\r\n                                            background: '#ff4444',\r\n                                            color: '#fff',\r\n                                            border: 'none',\r\n                                            borderRadius: '8px',\r\n                                            fontWeight: 'bold',\r\n                                            cursor: 'pointer',\r\n                                            opacity: loading || !deletePassword ? 0.5 : 1,\r\n                                            fontSize: '1rem'\r\n                                        }}\r\n                                    >\r\n                                        {loading ? 'Deleting...' : 'Permanently Delete Account'}\r\n                                    </button>\r\n                                </form>\r\n\r\n                                <button\r\n                                    onClick={() => {\r\n                                        setShowDeleteConfirm(false);\r\n                                        setDeletePassword('');\r\n                                        setDeleteError('');\r\n                                    }}\r\n                                    style={{\r\n                                        background: 'transparent',\r\n                                        border: 'none',\r\n                                        color: 'var(--text-secondary, #6b7f78)',\r\n                                        cursor: 'pointer',\r\n                                        textDecoration: 'underline',\r\n                                        fontSize: '0.9rem'\r\n                                    }}\r\n                                >\r\n                                    Cancel, keep my account\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )\r\n            }\r\n\r\n            {/* Conversion Confirmation Modal */}\r\n            {\r\n                showConversionConfirm && (\r\n                    <div style={{\r\n                        position: 'fixed',\r\n                        inset: 0,\r\n                        background: 'rgba(0,0,0,0.9)',\r\n                        backdropFilter: 'blur(10px)',\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        justifyContent: 'center',\r\n                        zIndex: 1000,\r\n                        padding: '2rem'\r\n                    }}>\r\n                        <div style={{\r\n                            background: 'var(--bg-card, #050808)',\r\n                            border: '1px solid rgba(110, 255, 216, 0.2)',\r\n                            borderRadius: '16px',\r\n                            padding: '2rem',\r\n                            maxWidth: '400px',\r\n                            width: '100%',\r\n                            boxShadow: '0 0 40px var(--accent-glow, rgba(110,255,216,0.35))'\r\n                        }}>\r\n                            <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', gap: '1rem', textAlign: 'center' }}>\r\n                                <FaSmile size={40} color=\"var(--accent, #6effd8)\" />\r\n                                <h2 style={{ fontSize: '1.5rem', fontWeight: 'bold', color: 'var(--text-primary, #d8fff1)' }}>Convert to Smiley Likes?</h2>\r\n                                <p style={{ color: 'var(--text-secondary, #6b7f78)' }}>\r\n                                    This will convert your star rating system to simple smiley likes. Each user who rated will count as 1 like.\r\n                                </p>\r\n                                <p style={{ color: '#ff4444', fontSize: '0.9rem', background: 'rgba(255,68,68,0.1)', padding: '0.75rem', borderRadius: '8px', width: '100%' }}>\r\n                                    ΓÜá∩╕Å This action cannot be reversed. Original star ratings will be permanently lost.\r\n                                </p>\r\n\r\n                                {conversionError && (\r\n                                    <div style={{ color: '#ff4444', background: 'rgba(255,68,68,0.1)', padding: '0.5rem', borderRadius: '4px', fontSize: '0.9rem', width: '100%' }}>\r\n                                        {conversionError}\r\n                                    </div>\r\n                                )}\r\n\r\n                                <button\r\n                                    onClick={handleConvertToSmiley}\r\n                                    disabled={converting}\r\n                                    style={{\r\n                                        width: '100%',\r\n                                        padding: '1rem',\r\n                                        background: 'var(--accent, #6effd8)',\r\n                                        color: '#000',\r\n                                        border: 'none',\r\n                                        borderRadius: '8px',\r\n                                        fontWeight: 'bold',\r\n                                        cursor: 'pointer',\r\n                                        opacity: converting ? 0.5 : 1,\r\n                                        marginTop: '0.5rem',\r\n                                        fontSize: '1rem'\r\n                                    }}\r\n                                >\r\n                                    {converting ? 'Converting...' : 'Convert to Smiley Likes'}\r\n                                </button>\r\n\r\n                                <button\r\n                                    onClick={() => {\r\n                                        setShowConversionConfirm(false);\r\n                                        setConversionError('');\r\n                                    }}\r\n                                    style={{\r\n                                        background: 'transparent',\r\n                                        border: 'none',\r\n                                        color: 'var(--text-secondary, #6b7f78)',\r\n                                        cursor: 'pointer',\r\n                                        textDecoration: 'underline',\r\n                                        fontSize: '0.9rem'\r\n                                    }}\r\n                                >\r\n                                    Cancel\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )\r\n            }\r\n\r\n            {/* Report Modal */}\r\n            {\r\n                showReportModal && activePost && (\r\n                    <ReportModal\r\n                        isOpen={showReportModal}\r\n                        targetType=\"post\"\r\n                        targetId={activePost.id}\r\n                        targetTitle={activePost.caption || activePost.title || 'Post'}\r\n                        onClose={() => setShowReportModal(false)}\r\n                    />\r\n                )\r\n            }\r\n        </div >\r\n    );\r\n};\r\n\r\nexport default Settings;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\pages\\Shop.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'where' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":34},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'SmartImage' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":18}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { collection, query, where, orderBy, limit, getDocs } from 'firebase/firestore';\r\nimport { db } from '@/firebase';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { FaShoppingBag, FaTag } from 'react-icons/fa';\r\nimport SmartImage from '@/components/SmartImage';\r\nimport ShopItemCard from '@/components/ui/cards/ShopItemCard';\r\nimport { PageSkeleton } from '@/components/ui/Skeleton';\r\nimport CreateShopItemModal from '@/components/shop/CreateShopItemModal';\r\n\r\n// Helper to sanitize and validate shop items from Firestore\r\nconst sanitizeShopItem = (raw) => {\r\n    if (!raw || typeof raw !== 'object') return null;\r\n\r\n    // 1. Must be available/active\r\n    if (raw.available !== true) return null;\r\n\r\n    // 2. Must have valid image\r\n    if (!raw.imageUrl || typeof raw.imageUrl !== 'string') return null;\r\n\r\n    // 3. Sanitize print sizes\r\n    let validSizes = [];\r\n    if (Array.isArray(raw.printSizes)) {\r\n        validSizes = raw.printSizes.map(size => {\r\n            if (!size || typeof size !== 'object') return null;\r\n            const price = Number(size.price);\r\n            if (!Number.isFinite(price) || price <= 0) return null;\r\n            return {\r\n                ...size,\r\n                price: price, // Ensure numeric\r\n                label: size.label || 'Print',\r\n                id: size.id || 'unknown'\r\n            };\r\n        }).filter(Boolean);\r\n    }\r\n\r\n    // 4. Must have at least one valid size (or we can't sell it)\r\n    // The prompt says \"Skip any Firestore doc that is missing... valid printSizes\"\r\n    // However, to be safe and show \"View Details\" for broken items if desired, we could keep them.\r\n    // But prompt explicitly says \"Skip...\". So we filter if no valid sizes.\r\n    if (validSizes.length === 0) return null;\r\n\r\n    // 5. Compute safe minPrice\r\n    const prices = validSizes.map(s => s.price);\r\n    const minPrice = prices.length > 0 ? Math.min(...prices) : null;\r\n\r\n    return {\r\n        id: raw.id,\r\n        title: raw.title || 'Untitled',\r\n        imageUrl: raw.imageUrl,\r\n        printSizes: validSizes,\r\n        minPrice: minPrice,\r\n        available: true\r\n    };\r\n};\r\n\r\nconst Shop = () => {\r\n    const navigate = useNavigate();\r\n    const { currentUser } = useAuth(); // Need auth context\r\n    const [items, setItems] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n    const [isCreateModalOpen, setIsCreateModalOpen] = useState(false);\r\n\r\n    const fetchShopItems = async () => {\r\n        try {\r\n            const q = query(\r\n                collection(db, 'shopItems'),\r\n                orderBy('createdAt', 'desc'),\r\n                limit(20)\r\n            );\r\n\r\n            const querySnapshot = await getDocs(q);\r\n            const fetchedItems = querySnapshot.docs\r\n                .map(doc => sanitizeShopItem({ id: doc.id, ...doc.data() }))\r\n                .filter(Boolean); // Filter out nulls (drafts, broken items)\r\n\r\n            setItems(fetchedItems);\r\n        } catch (err) {\r\n            console.error(\"Error fetching shop items:\", err);\r\n            // Graceful error handling - don't crash, just show empty or error state\r\n            setError(\"Failed to load shop items.\");\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchShopItems();\r\n    }, []);\r\n\r\n\r\n\r\n    if (loading) {\r\n        return <PageSkeleton />;\r\n    }\r\n\r\n    if (error) {\r\n        return (\r\n            <div style={{ height: '100vh', background: '#000', color: '#fff', display: 'flex', justifyContent: 'center', alignItems: 'center', flexDirection: 'column', gap: '1rem', padding: '2rem', textAlign: 'center' }}>\r\n                <h2 style={{ fontSize: '1.5rem', marginBottom: '0.5rem', color: '#ff6b6b' }}>Unable to load shop</h2>\r\n                <p style={{ color: '#aaa', maxWidth: '400px', marginBottom: '1.5rem' }}>{error}</p>\r\n                <button onClick={() => window.location.reload()} style={{ padding: '0.6rem 1.2rem', background: '#333', color: '#fff', border: 'none', borderRadius: '20px', cursor: 'pointer', fontWeight: 'bold' }}>\r\n                    Retry\r\n                </button>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // Determine if user can add items (shop enabled)\r\n    // NOTE: using currentUser check. Adjust property name if specific claim exists.\r\n    const canManageShop = currentUser && (currentUser.shopEnabled || currentUser.isShopEnabled);\r\n\r\n    return (\r\n        <div style={{ minHeight: '100vh', background: '#000', color: '#fff', paddingBottom: '80px' }}>\r\n            {/* Header */}\r\n            <div style={{ padding: '2rem', borderBottom: '1px solid #222', position: 'sticky', top: 0, background: '#000', zIndex: 10, display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                <h1 style={{ fontSize: '1.5rem', fontWeight: 'bold', display: 'flex', alignItems: 'center', gap: '0.5rem', margin: 0 }}>\r\n                    <FaShoppingBag /> Shop\r\n                </h1>\r\n\r\n                {canManageShop && (\r\n                    <button\r\n                        onClick={() => setIsCreateModalOpen(true)}\r\n                        style={{\r\n                            background: 'var(--ice-mint)', color: '#000', border: 'none', borderRadius: '8px',\r\n                            padding: '0.6rem 1rem', fontWeight: 'bold', cursor: 'pointer', fontSize: '0.9rem'\r\n                        }}\r\n                    >\r\n                        + Add Item\r\n                    </button>\r\n                )}\r\n            </div>\r\n\r\n            {/* Grid */}\r\n            <div className=\"container-md-1rem\">\r\n                {items.length === 0 ? (\r\n                    <div style={{ textAlign: 'center', padding: '4rem', color: '#666' }}>\r\n                        <FaTag size={48} style={{ marginBottom: '1rem', opacity: 0.5 }} />\r\n                        <p>No items available in the shop yet.</p>\r\n                    </div>\r\n                ) : (\r\n                    <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(min(100%, 200px), 1fr))', gap: '2px' }}>\r\n                        {items.map(item => (\r\n                            <ShopItemCard key={item.id} item={item} />\r\n                        ))}\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Create Modal */}\r\n            {isCreateModalOpen && (\r\n                <CreateShopItemModal\r\n                    onClose={() => setIsCreateModalOpen(false)}\r\n                    onCreated={() => {\r\n                        setIsCreateModalOpen(false);\r\n                        fetchShopItems(); // Refresh\r\n                        navigate('/shop-drafts'); // Optional: redirect to drafts if that's the flow\r\n                    }}\r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Shop;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\pages\\ShopDrafts.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadDrafts'. Either include it or remove the dependency array.","line":23,"column":8,"nodeType":"ArrayExpression","endLine":23,"endColumn":21,"suggestions":[{"desc":"Update the dependencies array to be: [currentUser, loadDrafts]","fix":{"range":[898,911],"text":"[currentUser, loadDrafts]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { ShopService } from '@/core/services/firestore/studios.service';\r\nimport PublishShopItemModal from '@/components/PublishShopItemModal';\r\nimport SmartImage from '@/components/SmartImage';\r\nimport { FaStore, FaEye, FaTrash, FaExclamationCircle } from 'react-icons/fa';\r\n\r\nconst ShopDrafts = () => {\r\n    const { currentUser } = useAuth();\r\n    const navigate = useNavigate();\r\n\r\n    const [drafts, setDrafts] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState('');\r\n\r\n    // Publish modal state\r\n    const [publishModalOpen, setPublishModalOpen] = useState(false);\r\n    const [selectedDraft, setSelectedDraft] = useState(null);\r\n\r\n    useEffect(() => {\r\n        loadDrafts();\r\n    }, [currentUser]);\r\n\r\n    const loadDrafts = async () => {\r\n        if (!currentUser) return;\r\n\r\n        setLoading(true);\r\n        setError('');\r\n\r\n        try {\r\n            const userDrafts = await ShopService.getDrafts(currentUser.uid);\r\n            setDrafts(userDrafts);\r\n        } catch (err) {\r\n            console.error('Error loading drafts:', err);\r\n            setError('Failed to load drafts');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handlePublishClick = (draft) => {\r\n        setSelectedDraft(draft);\r\n        setPublishModalOpen(true);\r\n    };\r\n\r\n    const handlePublishConfirm = async () => {\r\n        if (!selectedDraft) return;\r\n\r\n        try {\r\n            await ShopService.publishDraft(selectedDraft.id, currentUser.uid, true);\r\n            setPublishModalOpen(false);\r\n            setSelectedDraft(null);\r\n\r\n            // Reload drafts\r\n            await loadDrafts();\r\n\r\n            // Show success message (you could add a toast notification here)\r\n            alert('Item published successfully!');\r\n        } catch (err) {\r\n            console.error('Error publishing draft:', err);\r\n            alert('Failed to publish item: ' + err.message);\r\n        }\r\n    };\r\n\r\n    const handleDelete = async (draftId) => {\r\n        if (!confirm('Are you sure you want to delete this draft?')) return;\r\n\r\n        try {\r\n            await ShopService.deleteDraft(draftId, currentUser.uid);\r\n            await loadDrafts();\r\n        } catch (err) {\r\n            console.error('Error deleting draft:', err);\r\n            alert('Failed to delete draft');\r\n        }\r\n    };\r\n\r\n    if (loading) {\r\n        return (\r\n            <div style={{\r\n                minHeight: '100vh',\r\n                background: '#0a0a0a',\r\n                padding: '2rem',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'center'\r\n            }}>\r\n                <div style={{ color: '#888', fontSize: '1.1rem' }}>\r\n                    Loading drafts...\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div style={{\r\n            minHeight: '100vh',\r\n            background: '#0a0a0a',\r\n            padding: '2rem 1rem'\r\n        }}>\r\n            <div style={{\r\n                maxWidth: '1200px',\r\n                margin: '0 auto'\r\n            }}>\r\n                {/* Header */}\r\n                <div style={{\r\n                    marginBottom: '2rem',\r\n                    display: 'flex',\r\n                    justifyContent: 'space-between',\r\n                    alignItems: 'center',\r\n                    flexWrap: 'wrap',\r\n                    gap: '1rem'\r\n                }}>\r\n                    <div>\r\n                        <h1 style={{\r\n                            fontSize: '2rem',\r\n                            fontWeight: 'bold',\r\n                            color: '#fff',\r\n                            marginBottom: '0.5rem',\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            gap: '0.75rem'\r\n                        }}>\r\n                            <FaStore style={{ color: '#7FFFD4' }} />\r\n                            Shop Drafts\r\n                        </h1>\r\n                        <p style={{ color: '#888', fontSize: '1rem' }}>\r\n                            Publish your drafts to make them available in your shop\r\n                        </p>\r\n                    </div>\r\n\r\n                    <button\r\n                        onClick={() => navigate('/shop')}\r\n                        style={{\r\n                            padding: '0.75rem 1.5rem',\r\n                            background: '#333',\r\n                            border: 'none',\r\n                            borderRadius: '8px',\r\n                            color: '#fff',\r\n                            fontWeight: '600',\r\n                            cursor: 'pointer',\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            gap: '0.5rem'\r\n                        }}\r\n                    >\r\n                        <FaEye /> View Shop\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Info Banner */}\r\n                <div style={{\r\n                    background: 'rgba(127, 255, 212, 0.1)',\r\n                    border: '1px solid rgba(127, 255, 212, 0.3)',\r\n                    borderRadius: '8px',\r\n                    padding: '1rem',\r\n                    marginBottom: '2rem',\r\n                    display: 'flex',\r\n                    gap: '1rem',\r\n                    alignItems: 'flex-start'\r\n                }}>\r\n                    <FaExclamationCircle style={{ color: '#7FFFD4', fontSize: '1.25rem', marginTop: '2px' }} />\r\n                    <div>\r\n                        <div style={{ color: '#7FFFD4', fontWeight: '600', marginBottom: '0.25rem' }}>\r\n                            About Shop Drafts\r\n                        </div>\r\n                        <div style={{ color: '#ccc', fontSize: '0.95rem', lineHeight: '1.5' }}>\r\n                            When you create a post with \"Sell this image\" enabled, it creates a draft here. Drafts are not visible in your public shop until you publish them and confirm copyright ownership.\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {error && (\r\n                    <div style={{\r\n                        padding: '1rem',\r\n                        background: 'rgba(255, 68, 68, 0.1)',\r\n                        border: '1px solid rgba(255, 68, 68, 0.3)',\r\n                        borderRadius: '8px',\r\n                        color: '#ff4444',\r\n                        marginBottom: '2rem'\r\n                    }}>\r\n                        {error}\r\n                    </div>\r\n                )}\r\n\r\n                {/* Drafts Grid */}\r\n                {drafts.length === 0 ? (\r\n                    <div style={{\r\n                        background: '#111',\r\n                        borderRadius: '12px',\r\n                        padding: '4rem 2rem',\r\n                        textAlign: 'center',\r\n                        border: '1px solid #333'\r\n                    }}>\r\n                        <FaStore style={{\r\n                            fontSize: '4rem',\r\n                            color: '#444',\r\n                            marginBottom: '1rem'\r\n                        }} />\r\n                        <h3 style={{\r\n                            fontSize: '1.5rem',\r\n                            color: '#666',\r\n                            marginBottom: '0.5rem'\r\n                        }}>\r\n                            No drafts yet\r\n                        </h3>\r\n                        <p style={{ color: '#555', marginBottom: '2rem' }}>\r\n                            Create a post with \"Sell this image\" enabled to create shop drafts\r\n                        </p>\r\n                        <button\r\n                            onClick={() => navigate('/create')}\r\n                            style={{\r\n                                padding: '0.75rem 1.5rem',\r\n                                background: '#7FFFD4',\r\n                                border: 'none',\r\n                                borderRadius: '8px',\r\n                                color: '#000',\r\n                                fontWeight: 'bold',\r\n                                cursor: 'pointer'\r\n                            }}\r\n                        >\r\n                            Create Post\r\n                        </button>\r\n                    </div>\r\n                ) : (\r\n                    <div style={{\r\n                        display: 'grid',\r\n                        gridTemplateColumns: 'repeat(auto-fill, minmax(280px, 1fr))',\r\n                        gap: '1.5rem'\r\n                    }}>\r\n                        {drafts.map(draft => (\r\n                            <div\r\n                                key={draft.id}\r\n                                style={{\r\n                                    background: '#111',\r\n                                    borderRadius: '12px',\r\n                                    overflow: 'hidden',\r\n                                    border: '1px solid #333',\r\n                                    transition: 'transform 0.2s',\r\n                                    cursor: 'pointer'\r\n                                }}\r\n                                onMouseEnter={(e) => e.currentTarget.style.transform = 'translateY(-4px)'}\r\n                                onMouseLeave={(e) => e.currentTarget.style.transform = 'translateY(0)'}\r\n                            >\r\n                                {/* Image */}\r\n                                <div style={{\r\n                                    aspectRatio: '1',\r\n                                    background: '#222',\r\n                                    overflow: 'hidden'\r\n                                }}>\r\n                                    <SmartImage\r\n                                        src={draft.imageUrl}\r\n                                        alt={draft.title}\r\n                                        style={{\r\n                                            width: '100%',\r\n                                            height: '100%',\r\n                                            objectFit: 'cover'\r\n                                        }}\r\n                                    />\r\n                                </div>\r\n\r\n                                {/* Info */}\r\n                                <div style={{ padding: '1rem' }}>\r\n                                    <h3 style={{\r\n                                        color: '#fff',\r\n                                        fontSize: '1.1rem',\r\n                                        fontWeight: '600',\r\n                                        marginBottom: '0.5rem',\r\n                                        overflow: 'hidden',\r\n                                        textOverflow: 'ellipsis',\r\n                                        whiteSpace: 'nowrap'\r\n                                    }}>\r\n                                        {draft.title || 'Untitled'}\r\n                                    </h3>\r\n\r\n                                    <div style={{\r\n                                        color: '#888',\r\n                                        fontSize: '0.85rem',\r\n                                        marginBottom: '1rem'\r\n                                    }}>\r\n                                        {draft.productTier && (\r\n                                            <span style={{\r\n                                                display: 'inline-block',\r\n                                                padding: '0.25rem 0.5rem',\r\n                                                background: '#222',\r\n                                                borderRadius: '4px',\r\n                                                fontSize: '0.75rem',\r\n                                                textTransform: 'uppercase'\r\n                                            }}>\r\n                                                {draft.productTier}\r\n                                            </span>\r\n                                        )}\r\n                                    </div>\r\n\r\n                                    {/* Actions */}\r\n                                    <div style={{\r\n                                        display: 'flex',\r\n                                        gap: '0.5rem'\r\n                                    }}>\r\n                                        <button\r\n                                            onClick={() => handlePublishClick(draft)}\r\n                                            style={{\r\n                                                flex: 1,\r\n                                                padding: '0.75rem',\r\n                                                background: '#7FFFD4',\r\n                                                border: 'none',\r\n                                                borderRadius: '6px',\r\n                                                color: '#000',\r\n                                                fontWeight: 'bold',\r\n                                                cursor: 'pointer',\r\n                                                fontSize: '0.9rem'\r\n                                            }}\r\n                                        >\r\n                                            Publish\r\n                                        </button>\r\n                                        <button\r\n                                            onClick={() => handleDelete(draft.id)}\r\n                                            style={{\r\n                                                padding: '0.75rem',\r\n                                                background: '#333',\r\n                                                border: 'none',\r\n                                                borderRadius: '6px',\r\n                                                color: '#ff4444',\r\n                                                cursor: 'pointer',\r\n                                                fontSize: '1rem'\r\n                                            }}\r\n                                        >\r\n                                            <FaTrash />\r\n                                        </button>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Publish Modal */}\r\n            <PublishShopItemModal\r\n                isOpen={publishModalOpen}\r\n                itemTitle={selectedDraft?.title}\r\n                onConfirm={handlePublishConfirm}\r\n                onCancel={() => {\r\n                    setPublishModalOpen(false);\r\n                    setSelectedDraft(null);\r\n                }}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ShopDrafts;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\pages\\ShopItemDetail.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaSave' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":52,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":58},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaCheck' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":60,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":67},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaTimes' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":69,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":76},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'formatPrice' is defined but never used. Allowed unused vars must match /^_/u.","line":18,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'showWallPreview' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":45,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":45,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setShowWallPreview' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":45,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":45,"endColumn":47}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { db } from '@/firebase';\r\nimport { doc, getDoc, updateDoc, serverTimestamp } from 'firebase/firestore';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { FaArrowLeft, FaTag, FaInfoCircle, FaEdit, FaSave, FaCheck, FaTimes } from 'react-icons/fa';\r\nimport CheckoutButton from '@/components/CheckoutButton';\r\nimport {\r\n    getPrintifyProducts,\r\n    PRINT_TIERS,\r\n    STICKER_PRODUCTS,\r\n    calculatePrintifyEarnings,\r\n    getValidSizesForImage,\r\n    getRetailPrice,\r\n    calculateTieredPricing\r\n} from '@/domain/shop/pricing';\r\n\r\nimport { formatPrice } from '@/core/utils/helpers';\r\nimport { isFeatureEnabled } from '@/config/featureFlags';\r\n\r\nconst PRINT_SIZES = getPrintifyProducts();\r\n\r\nconst ShopItemDetail = () => {\r\n    const { id } = useParams();\r\n    const navigate = useNavigate();\r\n    const { currentUser, userProfile } = useAuth(); // Added userProfile for check\r\n\r\n    const [item, setItem] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n\r\n    // View Mode State\r\n    const [selectedSize, setSelectedSize] = useState(null);\r\n\r\n    // Edit Mode State\r\n    const [editDescription, setEditDescription] = useState('');\r\n    const [enabledSizes, setEnabledSizes] = useState({}); // { sizeId: boolean }\r\n    const [productTier, setProductTier] = useState(PRINT_TIERS.ECONOMY);\r\n    const [includeStickers, setIncludeStickers] = useState(false);\r\n    const [saving, setSaving] = useState(false);\r\n    const [isEditing, setIsEditing] = useState(false); // Toggle for owners to edit active items\r\n    const [previewSizeId, setPreviewSizeId] = useState(null); // For crop preview in edit mode\r\n    // New Feature States\r\n    const [showAdvanced, setShowAdvanced] = useState(false); // 5. Batch Editor Toggle\r\n    const [showWallPreview, setShowWallPreview] = useState(false); // 4. \"Preview on Wall\" Modal State\r\n    const [activeSlide, setActiveSlide] = useState(0); // Slider State\r\n    const [showVerificationBlocker, setShowVerificationBlocker] = useState(false); // New blocker modal\r\n\r\n    useEffect(() => {\r\n        const fetchItem = async () => {\r\n            try {\r\n                const docRef = doc(db, 'shopItems', id);\r\n                const docSnap = await getDoc(docRef);\r\n\r\n                if (docSnap.exists()) {\r\n                    const data = { id: docSnap.id, ...docSnap.data() };\r\n                    setItem(data);\r\n\r\n                    // Initialize View State\r\n                    if (data.printSizes && data.printSizes.length > 0) {\r\n                        setSelectedSize(data.printSizes[0].id);\r\n                    }\r\n\r\n                    // Initialize Edit State\r\n                    setEditDescription(data.description || '');\r\n                    setProductTier(data.productTier || PRINT_TIERS.ECONOMY);\r\n                    setIncludeStickers(data.includeStickers || false);\r\n\r\n                    const initialEnabled = {};\r\n\r\n                    // Pre-fill from existing configured sizes\r\n                    if (data.printSizes) {\r\n                        data.printSizes.forEach(s => {\r\n                            if (s.tier !== 'sticker') {\r\n                                initialEnabled[s.id] = true;\r\n                            }\r\n                        });\r\n                    }\r\n\r\n                    setEnabledSizes(initialEnabled);\r\n\r\n                } else {\r\n                    setError(\"Item not found\");\r\n                }\r\n            } catch (err) {\r\n                console.error(\"Error fetching shop item:\", err);\r\n                setError(\"Failed to load item\");\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchItem();\r\n    }, [id]);\r\n\r\n    // Helper to determine potential sizes\r\n    const getPotentialSizes = () => {\r\n        if (item.width && item.height) {\r\n            return getValidSizesForImage(item.width, item.height);\r\n        }\r\n        // Fallback: Return ALL sizes if dimensions are missing so user isn't locked out\r\n        return PRINT_SIZES;\r\n    };\r\n\r\n    const handleSave = async (publish = false) => {\r\n        setSaving(true);\r\n        try {\r\n            // Use the same source of truth for potential sizes\r\n            const potentialSizes = getPotentialSizes();\r\n\r\n            const newPrintSizes = potentialSizes\r\n                .filter(size => enabledSizes[size.id])\r\n                .map(size => {\r\n                    const retailPrice = getRetailPrice(size.id, productTier);\r\n                    const pricing = calculatePrintifyEarnings(retailPrice, size.id);\r\n                    return {\r\n                        id: size.id,\r\n                        label: size.label,\r\n                        price: Number(retailPrice.toFixed(2)),\r\n                        artistEarningsCents: Math.round(pricing.artistEarnings * 100),\r\n                        platformFeeCents: Math.round(pricing.platformEarnings * 100),\r\n                        tier: productTier\r\n                    };\r\n                });\r\n\r\n            // Add stickers if enabled and profitable\r\n            if (includeStickers) {\r\n                STICKER_PRODUCTS.forEach(sticker => {\r\n                    const retailPrice = sticker.price;\r\n                    const pricing = calculatePrintifyEarnings(retailPrice, sticker.id);\r\n\r\n                    if (pricing) {\r\n                        newPrintSizes.push({\r\n                            id: sticker.id,\r\n                            label: sticker.label,\r\n                            price: Number(retailPrice.toFixed(2)),\r\n                            artistEarningsCents: Math.round(pricing.artistEarnings * 100),\r\n                            platformFeeCents: Math.round(pricing.platformEarnings * 100),\r\n                            tier: 'sticker'\r\n                        });\r\n                    }\r\n                });\r\n            }\r\n\r\n            if (publish && newPrintSizes.length === 0) {\r\n                alert(\"You must enable at least one print size to publish.\");\r\n                setSaving(false);\r\n                return;\r\n            }\r\n\r\n            const updateData = {\r\n                description: editDescription,\r\n                printSizes: newPrintSizes,\r\n                productTier,\r\n                includeStickers,\r\n                updatedAt: serverTimestamp()\r\n            };\r\n\r\n            if (publish) {\r\n                // 4.1 Check Verification Status\r\n                if (!userProfile?.shopVerified) {\r\n                    setShowVerificationBlocker(true);\r\n                    setSaving(false);\r\n                    return;\r\n                }\r\n                updateData.available = true;\r\n                updateData.status = 'active';\r\n            }\r\n\r\n            await updateDoc(doc(db, 'shopItems', id), updateData);\r\n\r\n            // Refresh local state\r\n            setItem(prev => ({ ...prev, ...updateData }));\r\n\r\n            // Exit edit mode if we were editing an active item\r\n            if (isEditing) setIsEditing(false);\r\n\r\n            if (publish) navigate('/profile/me'); // Redirect to profile on publish\r\n\r\n        } catch (err) {\r\n            console.error(\"Error updating item:\", err);\r\n            alert(\"Failed to save changes.\");\r\n        } finally {\r\n            setSaving(false);\r\n        }\r\n    };\r\n\r\n    if (loading) return <div style={{ height: '100vh', background: '#000', color: '#fff', display: 'flex', justifyContent: 'center', alignItems: 'center' }}>Loading...</div>;\r\n    if (error) return <div style={{ height: '100vh', background: '#000', color: '#fff', display: 'flex', justifyContent: 'center', alignItems: 'center' }}>{error}</div>;\r\n    if (!item) return null;\r\n\r\n    const isOwner = currentUser?.uid === item.userId;\r\n    const isDraft = !item.available;\r\n\r\n    // ≡ƒöÆ ACCESS CONTROL: Prevent others from viewing drafts\r\n    if (isDraft && !isOwner) {\r\n        return (\r\n            <div style={{\r\n                height: '100vh',\r\n                background: '#000',\r\n                color: '#fff',\r\n                display: 'flex',\r\n                justifyContent: 'center',\r\n                alignItems: 'center',\r\n                flexDirection: 'column',\r\n                gap: '1rem'\r\n            }}>\r\n                <div style={{ fontSize: '3rem' }}>≡ƒöÆ</div>\r\n                <h2>Not Available</h2>\r\n                <p style={{ color: '#888' }}>This shop item hasn't been published yet.</p>\r\n                <button\r\n                    onClick={() => navigate('/shop')}\r\n                    style={{\r\n                        padding: '0.8rem 1.5rem',\r\n                        background: '#333',\r\n                        color: '#fff',\r\n                        border: 'none',\r\n                        borderRadius: '8px',\r\n                        cursor: 'pointer',\r\n                        marginTop: '1rem'\r\n                    }}\r\n                >\r\n                    Back to Shop\r\n                </button>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // Show editor if it's a draft OR if the owner explicitly requested to edit\r\n    const showEditor = (isOwner && isDraft) || (isOwner && isEditing);\r\n\r\n    // -------------------------------------------------------------------------\r\n    // RENDER: EDITOR MODE\r\n    // -------------------------------------------------------------------------\r\n    if (showEditor) {\r\n        const potentialSizes = getPotentialSizes();\r\n\r\n        // Calculate preview aspect ratio\r\n        let previewRatio = item.aspectRatio || 1.5;\r\n        let previewLabel = \"Original Image\";\r\n\r\n        if (previewSizeId) {\r\n            const sizeDef = PRINT_SIZES.find(s => s.id === previewSizeId);\r\n            if (sizeDef) {\r\n                const isPortrait = (item.width && item.height && item.height > item.width) || (item.aspectRatio && item.aspectRatio < 1);\r\n                previewRatio = isPortrait ? (1 / sizeDef.ratio) : sizeDef.ratio;\r\n                previewLabel = `Preview: ${sizeDef.label} Crop`;\r\n            }\r\n        }\r\n\r\n        return (\r\n            <div style={{ minHeight: '100vh', background: '#000', color: '#fff', padding: '2rem' }}>\r\n                <div style={{ maxWidth: '1000px', margin: '0 auto' }}>\r\n                    <button\r\n                        onClick={() => isEditing ? setIsEditing(false) : navigate(-1)}\r\n                        style={{ background: 'transparent', border: 'none', color: '#888', marginBottom: '2rem', cursor: 'pointer', display: 'flex', alignItems: 'center', gap: '0.5rem' }}\r\n                    >\r\n                        <FaArrowLeft /> {isEditing ? 'Cancel Edit' : 'Back'}\r\n                    </button>\r\n\r\n                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '2rem', borderBottom: '1px solid #333', paddingBottom: '1rem' }}>\r\n                        <h1 style={{ fontSize: '2rem', fontWeight: 'bold' }}>{isEditing ? 'Edit Shop Item' : 'Configure Shop Item'}</h1>\r\n                        <div style={{ display: 'flex', gap: '1rem' }}>\r\n                            <button\r\n                                onClick={() => handleSave(false)}\r\n                                disabled={saving}\r\n                                style={{ padding: '0.8rem 1.5rem', background: '#333', color: '#fff', border: 'none', borderRadius: '8px', cursor: 'pointer' }}\r\n                            >\r\n                                {saving ? 'Saving...' : (isEditing ? 'Save Changes' : 'Save Draft')}\r\n                            </button>\r\n\r\n                            {/* Only show Publish button if it's a draft */}\r\n                            {isDraft && (\r\n                                <button\r\n                                    onClick={() => handleSave(true)}\r\n                                    disabled={saving}\r\n                                    style={{ padding: '0.8rem 1.5rem', background: '#7FFFD4', color: '#000', border: 'none', borderRadius: '8px', fontWeight: 'bold', cursor: 'pointer' }}\r\n                                >\r\n                                    {saving ? 'Publishing...' : 'Publish to Shop'}\r\n                                </button>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '3rem' }}>\r\n                        {/* Left Col: Image Preview */}\r\n                        <div>\r\n                            <div style={{\r\n                                position: 'relative', // For overlay\r\n                                background: '#111',\r\n                                borderRadius: '12px',\r\n                                overflow: 'hidden',\r\n                                border: '1px solid #222',\r\n                                marginBottom: '1rem',\r\n                                // ALWAYS show original aspect ratio container\r\n                                aspectRatio: `${item.aspectRatio || 1.5}`,\r\n                                display: 'flex',\r\n                                alignItems: 'center',\r\n                                justifyContent: 'center'\r\n                            }}>\r\n                                <img\r\n                                    src={item.imageUrl}\r\n                                    alt={item.title}\r\n                                    loading=\"lazy\"\r\n                                    style={{\r\n                                        width: '100%',\r\n                                        height: '100%',\r\n                                        objectFit: 'contain', // Ensure full image is visible\r\n                                        display: 'block'\r\n                                    }}\r\n                                />\r\n\r\n                                {/* 1. LIVE MARGIN GUIDES (Mask) */}\r\n                                {(() => {\r\n                                    const originalRatio = item.aspectRatio || 1.5;\r\n                                    // Determine crop dimensions as percentage of container\r\n                                    let widthPercent = 100;\r\n                                    let heightPercent = 100;\r\n\r\n                                    if (previewRatio > originalRatio) {\r\n                                        // Target is wider/shorter than original -> Limit Height\r\n                                        heightPercent = (originalRatio / previewRatio) * 100;\r\n                                    } else {\r\n                                        // Target is taller/narrower than original -> Limit Width\r\n                                        widthPercent = (previewRatio / originalRatio) * 100;\r\n                                    }\r\n\r\n                                    return (\r\n                                        <>\r\n                                            {/* The \"Safe Zone\" Box */}\r\n                                            <div style={{\r\n                                                position: 'absolute',\r\n                                                width: `${widthPercent}%`,\r\n                                                height: `${heightPercent}%`,\r\n                                                border: '2px dashed #7FFFD4',\r\n                                                boxShadow: '0 0 0 9999px rgba(0, 0, 0, 0.75)', // Darken everything OUTSIDE this box\r\n                                                pointerEvents: 'none',\r\n                                                zIndex: 10\r\n                                            }} />\r\n\r\n                                            {/* Label */}\r\n                                            <div style={{\r\n                                                position: 'absolute',\r\n                                                bottom: '10px',\r\n                                                right: '10px',\r\n                                                background: '#7FFFD4',\r\n                                                color: '#000',\r\n                                                padding: '2px 8px',\r\n                                                borderRadius: '4px',\r\n                                                fontSize: '0.75rem',\r\n                                                fontWeight: 'bold',\r\n                                                zIndex: 11\r\n                                            }}>\r\n                                                PRINT AREA\r\n                                            </div>\r\n                                        </>\r\n                                    );\r\n                                })()}\r\n                            </div>\r\n                            <div style={{ color: '#7FFFD4', fontSize: '0.9rem', fontWeight: 'bold' }}>\r\n                                {previewLabel}\r\n                            </div>\r\n                            <div style={{ color: '#888', fontSize: '0.8rem', marginTop: '0.5rem' }}>\r\n                                Original Ratio: {(item.aspectRatio || 1.5).toFixed(2)} ΓåÆ Print Ratio: {previewRatio.toFixed(2)}\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Right Col: Configuration */}\r\n                        <div style={{ display: 'flex', flexDirection: 'column', gap: '2rem' }}>\r\n\r\n                            {/* Description */}\r\n                            <div>\r\n                                <label style={{ display: 'block', marginBottom: '0.5rem', fontWeight: 'bold', color: '#ccc' }}>Description</label>\r\n                                <textarea\r\n                                    value={editDescription}\r\n                                    onChange={(e) => setEditDescription(e.target.value)}\r\n                                    placeholder=\"Describe this print...\"\r\n                                    style={{ width: '100%', padding: '1rem', background: '#111', border: '1px solid #333', borderRadius: '8px', color: '#fff', minHeight: '100px', resize: 'vertical' }}\r\n                                />\r\n                            </div>\r\n\r\n                            {/* Tier Selection */}\r\n                            <div style={{ padding: '1rem', background: '#111', border: '1px solid #333', borderRadius: '8px' }}>\r\n                                <label style={{ display: 'block', marginBottom: '1rem', fontWeight: 'bold', color: '#ccc' }}>Print Quality Tier</label>\r\n                                <div style={{ display: 'flex', gap: '1rem' }}>\r\n                                    <button\r\n                                        type=\"button\"\r\n                                        onClick={() => setProductTier(PRINT_TIERS.ECONOMY)}\r\n                                        style={{\r\n                                            flex: 1,\r\n                                            padding: '0.8rem',\r\n                                            background: productTier === PRINT_TIERS.ECONOMY ? 'rgba(127, 255, 212, 0.2)' : '#222',\r\n                                            color: productTier === PRINT_TIERS.ECONOMY ? '#7FFFD4' : '#888',\r\n                                            border: productTier === PRINT_TIERS.ECONOMY ? '1px solid #7FFFD4' : '1px solid #333',\r\n                                            borderRadius: '8px',\r\n                                            cursor: 'pointer',\r\n                                            fontWeight: 'bold',\r\n                                            display: 'flex',\r\n                                            alignItems: 'center',\r\n                                            justifyContent: 'center',\r\n                                            gap: '0.5rem',\r\n                                            transition: 'all 0.2s'\r\n                                        }}\r\n                                    >\r\n                                        <span>≡ƒ¬Ö</span> Economy\r\n                                    </button>\r\n                                    <button\r\n                                        type=\"button\"\r\n                                        onClick={() => setProductTier(PRINT_TIERS.PREMIUM)}\r\n                                        style={{\r\n                                            flex: 1,\r\n                                            padding: '0.8rem',\r\n                                            background: productTier === PRINT_TIERS.PREMIUM ? 'rgba(127, 255, 212, 0.2)' : '#222',\r\n                                            color: productTier === PRINT_TIERS.PREMIUM ? '#7FFFD4' : '#888',\r\n                                            border: productTier === PRINT_TIERS.PREMIUM ? '1px solid #7FFFD4' : '1px solid #333',\r\n                                            borderRadius: '8px',\r\n                                            cursor: 'pointer',\r\n                                            fontWeight: 'bold',\r\n                                            display: 'flex',\r\n                                            alignItems: 'center',\r\n                                            justifyContent: 'center',\r\n                                            gap: '0.5rem',\r\n                                            transition: 'all 0.2s'\r\n                                        }}\r\n                                    >\r\n                                        <span>≡ƒÆÄ</span> Premium\r\n                                    </button>\r\n                                </div>\r\n                                <p style={{ fontSize: '0.8rem', color: '#888', marginTop: '0.8rem', lineHeight: '1.4' }}>\r\n                                    {productTier === PRINT_TIERS.ECONOMY\r\n                                        ? \"Affordable, lightweight, great for casual buyers. Lower base cost, fast delivery.\"\r\n                                        : \"Museum-grade quality, archival materials, deep color range. Best for collectors.\"}\r\n                                </p>\r\n                            </div>\r\n\r\n                            {/* Sticker Toggle */}\r\n                            <div style={{ display: 'flex', alignItems: 'center', gap: '0.8rem', padding: '1rem', background: '#111', borderRadius: '8px', border: '1px solid #333' }}>\r\n                                <input\r\n                                    type=\"checkbox\"\r\n                                    checked={includeStickers}\r\n                                    onChange={(e) => setIncludeStickers(e.target.checked)}\r\n                                    style={{ width: '20px', height: '20px', cursor: 'pointer' }}\r\n                                />\r\n                                <div>\r\n                                    <div style={{ fontWeight: '600', fontSize: '0.9rem' }}>Include Stickers?</div>\r\n                                    <div style={{ fontSize: '0.75rem', color: '#666' }}>Automatically add 3x3\" and 4x4\" stickers if profitable.</div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Size & Pricing */}\r\n                            <div>\r\n                                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '1rem' }}>\r\n                                    <label style={{ fontWeight: 'bold', color: '#ccc' }}>Available Sizes & Pricing</label>\r\n\r\n                                    {/* 5. Batch Switcher Toggle */}\r\n                                    <button\r\n                                        onClick={() => setShowAdvanced(!showAdvanced)}\r\n                                        style={{ fontSize: '0.8rem', color: '#7FFFD4', background: 'transparent', border: 'none', cursor: 'pointer', textDecoration: 'underline' }}\r\n                                    >\r\n                                        {showAdvanced ? 'Hide Advanced' : 'Show Advanced'}\r\n                                    </button>\r\n                                </div>\r\n\r\n                                {showAdvanced && (\r\n                                    <div style={{ marginBottom: '1rem', padding: '0.5rem', background: '#222', borderRadius: '4px', display: 'flex', gap: '1rem' }}>\r\n                                        <button\r\n                                            onClick={() => {\r\n                                                const newEnabled = {};\r\n                                                potentialSizes.forEach(s => newEnabled[s.id] = true);\r\n                                                setEnabledSizes(newEnabled);\r\n                                            }}\r\n                                            style={{ fontSize: '0.8rem', color: '#fff', background: '#333', border: 'none', padding: '4px 8px', borderRadius: '4px', cursor: 'pointer' }}\r\n                                        >\r\n                                            Select All\r\n                                        </button>\r\n                                        <button\r\n                                            onClick={() => setEnabledSizes({})}\r\n                                            style={{ fontSize: '0.8rem', color: '#fff', background: '#333', border: 'none', padding: '4px 8px', borderRadius: '4px', cursor: 'pointer' }}\r\n                                        >\r\n                                            Deselect All\r\n                                        </button>\r\n                                    </div>\r\n                                )}\r\n\r\n                                <p style={{ fontSize: '0.8rem', color: '#888', marginBottom: '1rem' }}>\r\n                                    Select sizes to offer. Click to preview cropping.\r\n                                </p>\r\n                                <div style={{ display: 'flex', flexDirection: 'column', gap: '1rem' }}>\r\n                                    {potentialSizes.map(size => {\r\n                                        const isEnabled = enabledSizes[size.id] || false;\r\n                                        const pricing = calculateTieredPricing(size.id, productTier);\r\n                                        const isPreviewing = previewSizeId === size.id;\r\n\r\n                                        return (\r\n                                            <div\r\n                                                key={size.id}\r\n                                                onClick={() => setPreviewSizeId(size.id)}\r\n                                                style={{\r\n                                                    display: 'flex',\r\n                                                    flexDirection: 'column',\r\n                                                    background: isPreviewing ? '#1a1a1a' : '#111',\r\n                                                    padding: '1rem',\r\n                                                    borderRadius: '8px',\r\n                                                    border: isEnabled ? '1px solid #7FFFD4' : (isPreviewing ? '1px solid #555' : '1px solid #333'),\r\n                                                    opacity: isEnabled ? 1 : 0.8,\r\n                                                    cursor: 'pointer',\r\n                                                    transition: 'all 0.2s'\r\n                                                }}\r\n                                            >\r\n                                                <div style={{ display: 'flex', alignItems: 'center', gap: '1rem', marginBottom: isEnabled ? '0.8rem' : '0' }}>\r\n                                                    <input\r\n                                                        type=\"checkbox\"\r\n                                                        checked={isEnabled}\r\n                                                        onChange={(e) => {\r\n                                                            e.stopPropagation();\r\n                                                            setEnabledSizes(prev => ({ ...prev, [size.id]: e.target.checked }));\r\n                                                            setPreviewSizeId(size.id); // Also preview when toggling\r\n                                                        }}\r\n                                                        style={{ width: '20px', height: '20px', cursor: 'pointer' }}\r\n                                                    />\r\n                                                    <div style={{ width: '80px', fontWeight: 'bold' }}>{size.label}</div>\r\n\r\n                                                    {!isEnabled && <span style={{ fontSize: '0.8rem', color: '#666' }}>Click to enable</span>}\r\n                                                </div>\r\n\r\n                                                {isEnabled && pricing && (\r\n                                                    <div style={{\r\n                                                        background: 'rgba(0,0,0,0.3)',\r\n                                                        padding: '0.8rem',\r\n                                                        borderRadius: '4px',\r\n                                                        fontSize: '0.85rem',\r\n                                                        display: 'grid',\r\n                                                        gridTemplateColumns: '1fr 1fr',\r\n                                                        gap: '0.5rem'\r\n                                                    }}>\r\n                                                        <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n                                                            <span style={{ color: '#ccc' }}>Buyer Price:</span>\r\n                                                            <span style={{ fontWeight: 'bold', color: '#fff' }}>${pricing.finalPrice.toFixed(2)}</span>\r\n                                                        </div>\r\n                                                        <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n                                                            <span style={{ color: '#888' }}>Base Cost:</span>\r\n                                                            <span style={{ color: '#888' }}>${pricing.baseCost.toFixed(2)}</span>\r\n                                                        </div>\r\n                                                        <div style={{ display: 'flex', justifyContent: 'space-between', borderTop: '1px solid #333', paddingTop: '0.3rem', marginTop: '0.3rem', gridColumn: '1 / -1' }}>\r\n                                                            <span style={{ color: '#aaa' }}>Total Profit:</span>\r\n                                                            <span style={{ color: '#fff' }}>${(pricing.finalPrice - pricing.baseCost).toFixed(2)}</span>\r\n                                                        </div>\r\n                                                        <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n                                                            <span style={{ color: '#7FFFD4' }}>Creator ({(pricing.artistShare * 100).toFixed(0)}%):</span>\r\n                                                            <span style={{ color: '#7FFFD4', fontWeight: 'bold' }}>${pricing.artistProfit.toFixed(2)}</span>\r\n                                                        </div>\r\n                                                        <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n                                                            <span style={{ color: '#aaa' }}>Platform:</span>\r\n                                                            <span style={{ color: '#aaa' }}>{(100 - pricing.artistShare * 100).toFixed(0)}%</span>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                )}\r\n                                            </div>\r\n                                        );\r\n                                    })}\r\n                                </div>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // -------------------------------------------------------------------------\r\n    // RENDER: VIEW MODE (Public / Active)\r\n    // -------------------------------------------------------------------------\r\n    const currentSizeConfig = (item.printSizes || []).find(s => s.id === selectedSize);\r\n\r\n    // Price Fallback Logic: If saved price is 0 or missing, look up default from PRINT_SIZES\r\n    let currentPrice = currentSizeConfig ? Number(currentSizeConfig.price || 0) : 0;\r\n    if (currentPrice === 0 && selectedSize) {\r\n        const defaultSize = PRINT_SIZES.find(s => s.id === selectedSize);\r\n        if (defaultSize) currentPrice = defaultSize.price;\r\n    }\r\n\r\n    const hasSizes = item.printSizes && item.printSizes.length > 0;\r\n\r\n    // Crop / Aspect Ratio Logic\r\n    const sizeDef = PRINT_SIZES.find(s => s.id === selectedSize);\r\n    // Default to image's own ratio if no size selected, or 1.5 if unknown\r\n    let targetRatio = item.aspectRatio || 1.5;\r\n\r\n    if (sizeDef) {\r\n        // If image is portrait, invert the print ratio (e.g. 1.5 becomes 0.666)\r\n        // We check dimensions if available, otherwise assume landscape ratio from PRINT_SIZES unless aspect ratio < 1\r\n        const isPortrait = (item.width && item.height && item.height > item.width) || (item.aspectRatio && item.aspectRatio < 1);\r\n        targetRatio = isPortrait ? (1 / sizeDef.ratio) : sizeDef.ratio;\r\n    }\r\n\r\n    // Warning for heavy cropping\r\n    let showCropWarning = false;\r\n    if (item.aspectRatio && sizeDef) {\r\n        const ratioDiff = Math.abs(item.aspectRatio - targetRatio);\r\n        if (ratioDiff > 0.15) {\r\n            showCropWarning = true;\r\n        }\r\n    }\r\n\r\n    // Helper to get dimensions from ID (e.g., '12x18' -> {w: 12, h: 18})\r\n    const getPrintDimensions = (sizeId) => {\r\n        if (!sizeId) return { w: 24, h: 36 }; // Default to a large size for visual impact\r\n        const parts = sizeId.split('x').map(Number);\r\n        if (parts.length === 2 && !isNaN(parts[0]) && !isNaN(parts[1])) {\r\n            return { w: parts[0], h: parts[1] };\r\n        }\r\n        return { w: 24, h: 36 };\r\n    };\r\n\r\n    // Calculate dynamic style based on selected size\r\n    const currentDims = getPrintDimensions(selectedSize);\r\n\r\n    const mockups = [\r\n        { id: 0, type: 'original', label: 'Original' },\r\n        {\r\n            id: 1,\r\n            type: 'mockup',\r\n            label: 'In Context 1',\r\n            bg: '/assets/andrew-neel-DLD5LvnFblU-unsplash.jpg',\r\n            wallWidthInches: 180, // Approx 15ft visible width (Back-calculated from 7ft ladder reference)\r\n            baseTop: '25%', // Raised as requested\r\n            baseLeft: '50%'\r\n        },\r\n        {\r\n            id: 2,\r\n            type: 'mockup',\r\n            label: 'In Context 2',\r\n            bg: '/assets/andrej-lisakov-3A4XZUopCJA-unsplash.jpg',\r\n            wallWidthInches: 80, // Adjusted to 80 inches (approx 6.5ft) to accurately scale up art relative to the lamp\r\n            baseTop: '35%',\r\n            baseLeft: '50%'\r\n        }\r\n    ];\r\n\r\n    // Helper to generate style for active slide\r\n    const getMockupStyle = (slideId) => {\r\n        const config = mockups.find(m => m.id === slideId);\r\n        if (!config || config.type !== 'mockup') return {};\r\n\r\n        const isLandscape = (item.width && item.height && item.width > item.height) || (item.aspectRatio && item.aspectRatio > 1);\r\n\r\n        // If image is landscape, the larger dimension is the width.\r\n        // If portrait, the smaller dimension is the width.\r\n        const printWidth = isLandscape ? Math.max(currentDims.w, currentDims.h) : Math.min(currentDims.w, currentDims.h);\r\n\r\n        const widthPercent = (printWidth / config.wallWidthInches) * 100;\r\n\r\n        // Safety clamp: Lowered min to 1% to allow small sizes (4x6) to scale linearly without being artificially inflated\r\n        const safeWidth = Math.max(1, Math.min(90, widthPercent));\r\n\r\n        return {\r\n            top: config.baseTop,\r\n            left: config.baseLeft,\r\n            width: `${safeWidth}%`,\r\n            transform: 'translate(-50%, -20%)',\r\n            boxShadow: '0 10px 30px rgba(0,0,0,0.5)'\r\n        };\r\n    };\r\n\r\n    return (\r\n        <div style={{ minHeight: '100vh', background: '#000', color: '#fff', padding: '2rem' }}>\r\n            <div style={{ maxWidth: '1200px', margin: '0 auto', display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '2rem' }}>\r\n                <button\r\n                    onClick={() => navigate(-1)}\r\n                    style={{\r\n                        background: 'transparent',\r\n                        border: 'none',\r\n                        color: '#fff',\r\n                        fontSize: '1.2rem',\r\n                        cursor: 'pointer',\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        gap: '0.5rem'\r\n                    }}\r\n                >\r\n                    <FaArrowLeft /> Back\r\n                </button>\r\n\r\n                {isOwner && (\r\n                    <div style={{ display: 'flex', gap: '1rem' }}>\r\n                        {item.isLimitedEdition && isFeatureEnabled('SPACECARDS_TRADING') && (\r\n                            <button\r\n                                onClick={() => alert(\"Resale feature coming soon!\")} // Placeholder for Resale Modal\r\n                                style={{\r\n                                    background: 'rgba(255, 215, 0, 0.1)',\r\n                                    color: '#FFD700',\r\n                                    border: '1px solid rgba(255, 215, 0, 0.3)',\r\n                                    padding: '0.8rem 1.2rem',\r\n                                    borderRadius: '8px',\r\n                                    cursor: 'pointer',\r\n                                    display: 'flex',\r\n                                    alignItems: 'center',\r\n                                    gap: '0.5rem',\r\n                                    fontWeight: 'bold'\r\n                                }}\r\n                            >\r\n                                <FaTag /> Resell Item\r\n                            </button>\r\n                        )}\r\n                        <button\r\n                            onClick={() => setIsEditing(true)}\r\n                            style={{\r\n                                background: '#333',\r\n                                color: '#fff',\r\n                                border: 'none',\r\n                                padding: '0.8rem 1.2rem',\r\n                                borderRadius: '8px',\r\n                                cursor: 'pointer',\r\n                                display: 'flex',\r\n                                alignItems: 'center',\r\n                                gap: '0.5rem',\r\n                                fontWeight: 'bold'\r\n                            }}\r\n                        >\r\n                            <FaEdit /> Edit Item\r\n                        </button>\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            <div style={{\r\n                display: 'grid',\r\n                gridTemplateColumns: 'repeat(auto-fit, minmax(300px, 1fr))',\r\n                gap: '3rem',\r\n                maxWidth: '1200px',\r\n                margin: '0 auto'\r\n            }}>\r\n                {/* Image Carousel Col */}\r\n                <div>\r\n                    <div style={{\r\n                        background: '#111',\r\n                        borderRadius: '12px',\r\n                        overflow: 'hidden',\r\n                        border: '1px solid #222',\r\n                        // Use mockup ratio (usually landscape) or targetRatio for original\r\n                        aspectRatio: activeSlide === 0 ? `${targetRatio}` : '1.5',\r\n                        width: '100%',\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        justifyContent: 'center',\r\n                        position: 'relative',\r\n                        marginBottom: '1rem'\r\n                    }}>\r\n                        {activeSlide === 0 ? (\r\n                            // Slide 0: Original Art\r\n                            <img\r\n                                src={item.imageUrl}\r\n                                alt={item.title}\r\n                                loading=\"lazy\"\r\n                                style={{\r\n                                    width: '100%',\r\n                                    height: '100%',\r\n                                    objectFit: 'cover',\r\n                                    objectPosition: 'center'\r\n                                }}\r\n                            />\r\n                        ) : (\r\n                            // Mockup Slides\r\n                            <div style={{ width: '100%', height: '100%', position: 'relative' }}>\r\n                                {/* Background Room */}\r\n                                <img\r\n                                    src={mockups[activeSlide].bg}\r\n                                    alt=\"Room Mockup\"\r\n                                    style={{ width: '100%', height: '100%', objectFit: 'cover' }}\r\n                                />\r\n                                {/* Overlay Art */}\r\n                                <div style={{\r\n                                    position: 'absolute',\r\n                                    ...getMockupStyle(activeSlide)\r\n                                }}>\r\n                                    <div style={{\r\n                                        // Maintain the ART's aspect ratio within the placement box\r\n                                        aspectRatio: `${item.aspectRatio || 1.5}`,\r\n                                        width: '100%',\r\n                                        background: '#000',\r\n                                        // Optional: Add matting or frame here\r\n                                        border: '1px solid rgba(255,255,255,0.8)'\r\n                                    }}>\r\n                                        <img\r\n                                            src={item.imageUrl}\r\n                                            style={{ width: '100%', height: '100%', objectFit: 'cover', display: 'block' }}\r\n                                        />\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n\r\n                        {/* Slide Navigation Arrows (Optional, let's stick to thumbnails below for now) */}\r\n                    </div>\r\n\r\n                    {/* Thumbnails */}\r\n                    <div style={{ display: 'flex', gap: '0.5rem', justifyContent: 'center' }}>\r\n                        {mockups.map((slide) => (\r\n                            <button\r\n                                key={slide.id}\r\n                                onClick={() => setActiveSlide(slide.id)}\r\n                                style={{\r\n                                    width: '60px',\r\n                                    height: '60px',\r\n                                    borderRadius: '8px',\r\n                                    border: activeSlide === slide.id ? '2px solid #7FFFD4' : '2px solid transparent',\r\n                                    overflow: 'hidden',\r\n                                    cursor: 'pointer',\r\n                                    padding: 0,\r\n                                    background: '#222'\r\n                                }}\r\n                            >\r\n                                {slide.type === 'original' ? (\r\n                                    <img src={item.imageUrl} style={{ width: '100%', height: '100%', objectFit: 'cover' }} />\r\n                                ) : (\r\n                                    <img src={slide.bg} style={{ width: '100%', height: '100%', objectFit: 'cover' }} />\r\n                                )}\r\n                            </button>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n\r\n\r\n                <div style={{ display: 'flex', flexDirection: 'column', gap: '1.5rem' }}>\r\n                    <h1 style={{ fontSize: '2.5rem', fontWeight: 'bold' }}>{item.title}</h1>\r\n\r\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '1rem', color: '#888' }}>\r\n                        <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                            <FaTag /> Fine Art Print\r\n                        </div>\r\n                        {item.productTier === PRINT_TIERS.PREMIUM && (\r\n                            <div style={{\r\n                                background: 'rgba(127, 255, 212, 0.1)',\r\n                                color: '#7FFFD4',\r\n                                padding: '0.2rem 0.6rem',\r\n                                borderRadius: '4px',\r\n                                fontSize: '0.8rem',\r\n                                fontWeight: 'bold',\r\n                                border: '1px solid rgba(127, 255, 212, 0.3)'\r\n                            }}>\r\n                                PREMIUM QUALITY\r\n                            </div>\r\n                        )}\r\n                        {item.isLimitedEdition && (\r\n                            <div style={{\r\n                                background: 'rgba(255, 215, 0, 0.1)',\r\n                                color: '#FFD700',\r\n                                padding: '0.2rem 0.6rem',\r\n                                borderRadius: '4px',\r\n                                fontSize: '0.8rem',\r\n                                fontWeight: 'bold',\r\n                                border: '1px solid rgba(255, 215, 0, 0.3)'\r\n                            }}>\r\n                                LIMITED EDITION {item.editionSize ? `(1 of ${item.editionSize})` : ''}\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    {item.isLimitedEdition && item.soldCount >= item.editionSize && (\r\n                        <div style={{\r\n                            background: 'rgba(255, 0, 0, 0.1)',\r\n                            color: '#FF4444',\r\n                            padding: '0.5rem',\r\n                            borderRadius: '4px',\r\n                            textAlign: 'center',\r\n                            fontWeight: 'bold',\r\n                            border: '1px solid rgba(255, 0, 0, 0.3)'\r\n                        }}>\r\n                            SOLD OUT\r\n                        </div>\r\n                    )}\r\n\r\n                    <div style={{ height: '1px', background: '#222', width: '100%' }} />\r\n\r\n                    {item.description && (\r\n                        <p style={{ color: '#ccc', lineHeight: '1.6' }}>{item.description}</p>\r\n                    )}\r\n\r\n                    <div>\r\n                        <h3 style={{ marginBottom: '1rem', fontSize: '1.1rem', color: '#7FFFD4' }}>Select Size</h3>\r\n                        {!hasSizes ? (\r\n                            <div style={{ color: '#888', fontStyle: 'italic' }}>No print sizes configured for this item.</div>\r\n                        ) : (\r\n                            <div style={{ display: 'flex', flexWrap: 'wrap', gap: '1rem' }}>\r\n                                {item.printSizes.map(size => {\r\n                                    // Price display in button: use fallback if needed\r\n                                    let btnPrice = Number(size.price || 0);\r\n                                    if (btnPrice === 0) {\r\n                                        const def = PRINT_SIZES.find(s => s.id === size.id);\r\n                                        if (def) btnPrice = def.price;\r\n                                    }\r\n\r\n                                    return (\r\n                                        <button\r\n                                            key={size.id}\r\n                                            onClick={() => setSelectedSize(size.id)}\r\n                                            style={{\r\n                                                padding: '1rem 1.5rem',\r\n                                                background: selectedSize === size.id ? '#7FFFD4' : 'transparent',\r\n                                                color: selectedSize === size.id ? '#000' : '#fff',\r\n                                                border: `1px solid ${selectedSize === size.id ? '#7FFFD4' : '#333'}`,\r\n                                                borderRadius: '8px',\r\n                                                cursor: 'pointer',\r\n                                                transition: 'all 0.2s',\r\n                                                display: 'flex',\r\n                                                flexDirection: 'column',\r\n                                                alignItems: 'center',\r\n                                                minWidth: '100px'\r\n                                            }}\r\n                                        >\r\n                                            <span style={{ fontWeight: 'bold', fontSize: '1.1rem' }}>{size.label}</span>\r\n                                            <span style={{ fontSize: '0.9rem', opacity: selectedSize === size.id ? 1 : 0.7 }}>\r\n                                                ${btnPrice.toFixed(2)}\r\n                                            </span>\r\n                                        </button>\r\n                                    );\r\n                                })}\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    <div style={{ marginTop: '1rem' }}>\r\n                        <div style={{ fontSize: '3rem', fontWeight: 'bold' }}>\r\n                            ${currentPrice.toFixed(2)}\r\n                        </div>\r\n                        <div style={{ color: '#888', fontSize: '0.9rem', marginTop: '0.5rem' }}>\r\n                            Includes secure shipping & handling\r\n                        </div>\r\n                        {showCropWarning && (\r\n                            <div style={{\r\n                                marginTop: '1rem',\r\n                                padding: '0.8rem',\r\n                                background: 'rgba(255, 165, 0, 0.15)',\r\n                                border: '1px solid rgba(255, 165, 0, 0.4)',\r\n                                borderRadius: '8px',\r\n                                color: '#ffcc00',\r\n                                fontSize: '0.9rem',\r\n                                display: 'flex',\r\n                                alignItems: 'start',\r\n                                gap: '0.5rem'\r\n                            }}>\r\n                                <FaInfoCircle style={{ marginTop: '3px', flexShrink: 0 }} />\r\n                                <span>\r\n                                    <strong>Heads up:</strong> This print size has a different aspect ratio than your image. Some cropping will occur.\r\n                                </span>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    <div style={{ marginTop: '2rem', display: 'flex', gap: '1rem', flexDirection: 'column' }}>\r\n                        <CheckoutButton\r\n                            post={item}\r\n                            selectedSize={selectedSize}\r\n                            buttonStyle={{\r\n                                width: '100%',\r\n                                padding: '1.2rem',\r\n                                background: '#7FFFD4',\r\n                                color: '#000',\r\n                                border: 'none',\r\n                                borderRadius: '8px',\r\n                                fontSize: '1.2rem',\r\n                                fontWeight: 'bold',\r\n                                display: 'flex',\r\n                                alignItems: 'center',\r\n                                justifyContent: 'center',\r\n                                gap: '1rem',\r\n                                cursor: 'pointer',\r\n                                transition: 'all 0.2s'\r\n                            }}\r\n                        />\r\n\r\n\r\n                    </div>\r\n\r\n                    {/* Preview on Wall Modal (Placeholder) */}\r\n\r\n\r\n                    <div style={{\r\n                        marginTop: '2rem',\r\n                        padding: '1.5rem',\r\n                        background: 'rgba(127, 255, 212, 0.05)',\r\n                        border: '1px solid rgba(127, 255, 212, 0.2)',\r\n                        borderRadius: '12px',\r\n                        fontSize: '0.9rem',\r\n                        lineHeight: '1.6',\r\n                        color: '#888'\r\n                    }}>\r\n                        <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', marginBottom: '0.5rem', color: '#7FFFD4' }}>\r\n                            <FaInfoCircle /> Quality Guarantee\r\n                        </div>\r\n                        {item.productTier === PRINT_TIERS.PREMIUM\r\n                            ? \"Museum-grade quality, archival materials, deep color range. Best for collectors.\"\r\n                            : \"Affordable, lightweight, great for casual buyers. Lower base cost, fast delivery.\"}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* 4.1 Verification Blocker Modal */}\r\n            {showVerificationBlocker && (\r\n                <div style={{\r\n                    position: 'fixed',\r\n                    inset: 0,\r\n                    background: 'rgba(0,0,0,0.85)',\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'center',\r\n                    zIndex: 2000\r\n                }}>\r\n                    <div style={{\r\n                        background: '#1a1a1a',\r\n                        padding: '2rem',\r\n                        borderRadius: '16px',\r\n                        border: '1px solid #333',\r\n                        maxWidth: '400px',\r\n                        textAlign: 'center',\r\n                        boxShadow: '0 8px 32px rgba(0,0,0,0.5)'\r\n                    }}>\r\n                        <div style={{ fontSize: '3rem', marginBottom: '1rem' }}>≡ƒÅ¬</div>\r\n                        <h2 style={{ color: '#fff', marginBottom: '0.5rem' }}>Set Up Your Shop</h2>\r\n                        <p style={{ color: '#ccc', marginBottom: '2rem', lineHeight: '1.5' }}>\r\n                            You can create drafts, but you need to verify your details and set up your shop before you can publish items for sale.\r\n                        </p>\r\n                        <div style={{ display: 'flex', flexDirection: 'column', gap: '0.8rem' }}>\r\n                            <button\r\n                                onClick={() => navigate('/shop/setup')}\r\n                                style={{\r\n                                    padding: '0.8rem',\r\n                                    background: '#7FFFD4',\r\n                                    color: '#000',\r\n                                    border: 'none',\r\n                                    borderRadius: '8px',\r\n                                    fontWeight: 'bold',\r\n                                    cursor: 'pointer',\r\n                                    display: 'flex',\r\n                                    alignItems: 'center',\r\n                                    justifyContent: 'center',\r\n                                    gap: '0.5rem'\r\n                                }}\r\n                            >\r\n                                Set Up Shop <FaArrowLeft style={{ transform: 'rotate(180deg)' }} />\r\n                            </button>\r\n                            <button\r\n                                onClick={() => setShowVerificationBlocker(false)}\r\n                                style={{\r\n                                    padding: '0.8rem',\r\n                                    background: 'transparent',\r\n                                    color: '#888',\r\n                                    border: '1px solid #333',\r\n                                    borderRadius: '8px',\r\n                                    cursor: 'pointer'\r\n                                }}\r\n                            >\r\n                                Keep in Drafts\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div >\r\n    );\r\n};\r\n\r\nexport default ShopItemDetail;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\pages\\ShopSetup.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { ShopService } from '@/core/services/firestore/studios.service';\r\nimport { FaStore, FaCheck, FaShieldAlt, FaGavel } from 'react-icons/fa';\r\n\r\nconst ShopSetup = () => {\r\n    const { currentUser } = useAuth();\r\n    const navigate = useNavigate();\r\n\r\n    const [step, setStep] = useState(1); // 1: Welcome, 2: Legal, 3: Profile\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState('');\r\n\r\n    // Legal agreements\r\n    const [acceptedCopyright, setAcceptedCopyright] = useState(false);\r\n    const [acceptedTerms, setAcceptedTerms] = useState(false);\r\n\r\n    // Shop profile\r\n    const [shopName, setShopName] = useState('');\r\n    const [shopBio, setShopBio] = useState('');\r\n\r\n    const handleComplete = async () => {\r\n        if (!acceptedCopyright || !acceptedTerms) {\r\n            setError('You must accept all agreements to continue');\r\n            return;\r\n        }\r\n\r\n        if (!shopName.trim()) {\r\n            setError('Shop name is required');\r\n            return;\r\n        }\r\n\r\n        setLoading(true);\r\n        setError('');\r\n\r\n        try {\r\n            await ShopService.completeShopSetup(currentUser.uid, {\r\n                shopName: shopName.trim(),\r\n                bio: shopBio.trim()\r\n            });\r\n\r\n            // Redirect to shop drafts or profile\r\n            navigate('/shop/drafts');\r\n        } catch (err) {\r\n            console.error('Error completing shop setup:', err);\r\n            setError('Failed to complete shop setup. Please try again.');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div style={{\r\n            minHeight: '100vh',\r\n            background: '#0a0a0a',\r\n            padding: '2rem 1rem'\r\n        }}>\r\n            <div style={{\r\n                maxWidth: '700px',\r\n                margin: '0 auto'\r\n            }}>\r\n                {/* Progress Indicator */}\r\n                <div style={{\r\n                    display: 'flex',\r\n                    justifyContent: 'center',\r\n                    gap: '1rem',\r\n                    marginBottom: '3rem'\r\n                }}>\r\n                    {[1, 2, 3].map(num => (\r\n                        <div\r\n                            key={num}\r\n                            style={{\r\n                                width: '40px',\r\n                                height: '40px',\r\n                                borderRadius: '50%',\r\n                                background: step >= num ? '#7FFFD4' : '#333',\r\n                                color: step >= num ? '#000' : '#666',\r\n                                display: 'flex',\r\n                                alignItems: 'center',\r\n                                justifyContent: 'center',\r\n                                fontWeight: 'bold',\r\n                                fontSize: '1.1rem'\r\n                            }}\r\n                        >\r\n                            {step > num ? <FaCheck /> : num}\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n\r\n                {/* Step 1: Welcome */}\r\n                {step === 1 && (\r\n                    <div style={{\r\n                        background: '#111',\r\n                        borderRadius: '12px',\r\n                        padding: '3rem 2rem',\r\n                        border: '1px solid #333',\r\n                        textAlign: 'center'\r\n                    }}>\r\n                        <FaStore style={{\r\n                            fontSize: '4rem',\r\n                            color: '#7FFFD4',\r\n                            marginBottom: '1.5rem'\r\n                        }} />\r\n                        <h1 style={{\r\n                            fontSize: '2rem',\r\n                            fontWeight: 'bold',\r\n                            color: '#fff',\r\n                            marginBottom: '1rem'\r\n                        }}>\r\n                            Welcome to PanoSpace Shop\r\n                        </h1>\r\n                        <p style={{\r\n                            fontSize: '1.1rem',\r\n                            color: '#ccc',\r\n                            lineHeight: '1.6',\r\n                            marginBottom: '2rem'\r\n                        }}>\r\n                            Set up your shop to sell your photography as prints, digital downloads, and collectibles.\r\n                        </p>\r\n\r\n                        <div style={{\r\n                            background: '#222',\r\n                            borderRadius: '8px',\r\n                            padding: '1.5rem',\r\n                            marginBottom: '2rem',\r\n                            textAlign: 'left'\r\n                        }}>\r\n                            <h3 style={{ color: '#7FFFD4', marginBottom: '1rem', fontSize: '1.1rem' }}>\r\n                                What you'll need:\r\n                            </h3>\r\n                            <ul style={{ color: '#ccc', lineHeight: '2', paddingLeft: '1.5rem' }}>\r\n                                <li>Accept copyright and seller agreements</li>\r\n                                <li>Create your shop profile</li>\r\n                                <li>Confirm you own rights to your content</li>\r\n                            </ul>\r\n                        </div>\r\n\r\n                        <button\r\n                            onClick={() => setStep(2)}\r\n                            style={{\r\n                                padding: '1rem 2rem',\r\n                                background: '#7FFFD4',\r\n                                border: 'none',\r\n                                borderRadius: '8px',\r\n                                color: '#000',\r\n                                fontSize: '1.1rem',\r\n                                fontWeight: 'bold',\r\n                                cursor: 'pointer',\r\n                                width: '100%',\r\n                                maxWidth: '300px'\r\n                            }}\r\n                        >\r\n                            Get Started\r\n                        </button>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Step 2: Legal Agreements */}\r\n                {step === 2 && (\r\n                    <div style={{\r\n                        background: '#111',\r\n                        borderRadius: '12px',\r\n                        padding: '2rem',\r\n                        border: '1px solid #333'\r\n                    }}>\r\n                        <h2 style={{\r\n                            fontSize: '1.5rem',\r\n                            fontWeight: 'bold',\r\n                            color: '#fff',\r\n                            marginBottom: '1.5rem',\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            gap: '0.75rem'\r\n                        }}>\r\n                            <FaGavel style={{ color: '#7FFFD4' }} />\r\n                            Legal Agreements\r\n                        </h2>\r\n\r\n                        {/* Copyright Agreement */}\r\n                        <div style={{\r\n                            background: '#222',\r\n                            borderRadius: '8px',\r\n                            padding: '1.5rem',\r\n                            marginBottom: '1.5rem',\r\n                            border: acceptedCopyright ? '1px solid #7FFFD4' : '1px solid #333'\r\n                        }}>\r\n                            <label style={{\r\n                                display: 'flex',\r\n                                alignItems: 'flex-start',\r\n                                gap: '1rem',\r\n                                cursor: 'pointer'\r\n                            }}>\r\n                                <input\r\n                                    type=\"checkbox\"\r\n                                    checked={acceptedCopyright}\r\n                                    onChange={(e) => setAcceptedCopyright(e.target.checked)}\r\n                                    style={{\r\n                                        width: '24px',\r\n                                        height: '24px',\r\n                                        cursor: 'pointer',\r\n                                        marginTop: '2px'\r\n                                    }}\r\n                                />\r\n                                <div>\r\n                                    <div style={{\r\n                                        color: '#fff',\r\n                                        fontWeight: '600',\r\n                                        marginBottom: '0.5rem',\r\n                                        fontSize: '1.05rem'\r\n                                    }}>\r\n                                        <FaShieldAlt style={{ color: '#7FFFD4', marginRight: '0.5rem' }} />\r\n                                        Copyright & Ownership Certification\r\n                                    </div>\r\n                                    <p style={{ color: '#ccc', lineHeight: '1.6', margin: 0 }}>\r\n                                        I certify that I own all rights to the content I sell on PanoSpace. I understand that selling copyrighted material without permission is illegal and may result in account suspension, legal action, and financial penalties. I accept full responsibility for any copyright claims.\r\n                                    </p>\r\n                                </div>\r\n                            </label>\r\n                        </div>\r\n\r\n                        {/* Seller Terms */}\r\n                        <div style={{\r\n                            background: '#222',\r\n                            borderRadius: '8px',\r\n                            padding: '1.5rem',\r\n                            marginBottom: '2rem',\r\n                            border: acceptedTerms ? '1px solid #7FFFD4' : '1px solid #333'\r\n                        }}>\r\n                            <label style={{\r\n                                display: 'flex',\r\n                                alignItems: 'flex-start',\r\n                                gap: '1rem',\r\n                                cursor: 'pointer'\r\n                            }}>\r\n                                <input\r\n                                    type=\"checkbox\"\r\n                                    checked={acceptedTerms}\r\n                                    onChange={(e) => setAcceptedTerms(e.target.checked)}\r\n                                    style={{\r\n                                        width: '24px',\r\n                                        height: '24px',\r\n                                        cursor: 'pointer',\r\n                                        marginTop: '2px'\r\n                                    }}\r\n                                />\r\n                                <div>\r\n                                    <div style={{\r\n                                        color: '#fff',\r\n                                        fontWeight: '600',\r\n                                        marginBottom: '0.5rem',\r\n                                        fontSize: '1.05rem'\r\n                                    }}>\r\n                                        PanoSpace Seller Terms\r\n                                    </div>\r\n                                    <p style={{ color: '#ccc', lineHeight: '1.6', margin: 0 }}>\r\n                                        I accept the PanoSpace Seller Terms of Service, including payment processing fees, content guidelines, and dispute resolution procedures. I understand that PanoSpace may remove content that violates these terms.\r\n                                    </p>\r\n                                </div>\r\n                            </label>\r\n                        </div>\r\n\r\n                        {error && (\r\n                            <div style={{\r\n                                padding: '1rem',\r\n                                background: 'rgba(255, 68, 68, 0.1)',\r\n                                border: '1px solid rgba(255, 68, 68, 0.3)',\r\n                                borderRadius: '8px',\r\n                                color: '#ff4444',\r\n                                marginBottom: '1.5rem'\r\n                            }}>\r\n                                {error}\r\n                            </div>\r\n                        )}\r\n\r\n                        <div style={{ display: 'flex', gap: '1rem' }}>\r\n                            <button\r\n                                onClick={() => setStep(1)}\r\n                                style={{\r\n                                    flex: 1,\r\n                                    padding: '0.75rem',\r\n                                    background: '#333',\r\n                                    border: 'none',\r\n                                    borderRadius: '8px',\r\n                                    color: '#fff',\r\n                                    fontWeight: '600',\r\n                                    cursor: 'pointer'\r\n                                }}\r\n                            >\r\n                                Back\r\n                            </button>\r\n                            <button\r\n                                onClick={() => setStep(3)}\r\n                                disabled={!acceptedCopyright || !acceptedTerms}\r\n                                style={{\r\n                                    flex: 2,\r\n                                    padding: '0.75rem',\r\n                                    background: (acceptedCopyright && acceptedTerms) ? '#7FFFD4' : '#444',\r\n                                    border: 'none',\r\n                                    borderRadius: '8px',\r\n                                    color: (acceptedCopyright && acceptedTerms) ? '#000' : '#666',\r\n                                    fontWeight: 'bold',\r\n                                    cursor: (acceptedCopyright && acceptedTerms) ? 'pointer' : 'not-allowed'\r\n                                }}\r\n                            >\r\n                                Continue\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Step 3: Shop Profile */}\r\n                {step === 3 && (\r\n                    <div style={{\r\n                        background: '#111',\r\n                        borderRadius: '12px',\r\n                        padding: '2rem',\r\n                        border: '1px solid #333'\r\n                    }}>\r\n                        <h2 style={{\r\n                            fontSize: '1.5rem',\r\n                            fontWeight: 'bold',\r\n                            color: '#fff',\r\n                            marginBottom: '1.5rem'\r\n                        }}>\r\n                            Create Your Shop Profile\r\n                        </h2>\r\n\r\n                        <div style={{ marginBottom: '1.5rem' }}>\r\n                            <label style={{\r\n                                display: 'block',\r\n                                color: '#ccc',\r\n                                fontWeight: '600',\r\n                                marginBottom: '0.5rem'\r\n                            }}>\r\n                                Shop Name *\r\n                            </label>\r\n                            <input\r\n                                type=\"text\"\r\n                                value={shopName}\r\n                                onChange={(e) => setShopName(e.target.value)}\r\n                                placeholder=\"e.g., Mountain Photography Studio\"\r\n                                maxLength={50}\r\n                                style={{\r\n                                    width: '100%',\r\n                                    padding: '0.75rem',\r\n                                    background: '#222',\r\n                                    border: '1px solid #333',\r\n                                    borderRadius: '8px',\r\n                                    color: '#fff',\r\n                                    fontSize: '1rem'\r\n                                }}\r\n                            />\r\n                            <div style={{\r\n                                fontSize: '0.85rem',\r\n                                color: '#666',\r\n                                marginTop: '0.5rem'\r\n                            }}>\r\n                                {shopName.length}/50 characters\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div style={{ marginBottom: '2rem' }}>\r\n                            <label style={{\r\n                                display: 'block',\r\n                                color: '#ccc',\r\n                                fontWeight: '600',\r\n                                marginBottom: '0.5rem'\r\n                            }}>\r\n                                Shop Bio (Optional)\r\n                            </label>\r\n                            <textarea\r\n                                value={shopBio}\r\n                                onChange={(e) => setShopBio(e.target.value)}\r\n                                placeholder=\"Tell customers about your photography style and what makes your work unique...\"\r\n                                maxLength={500}\r\n                                rows={4}\r\n                                style={{\r\n                                    width: '100%',\r\n                                    padding: '0.75rem',\r\n                                    background: '#222',\r\n                                    border: '1px solid #333',\r\n                                    borderRadius: '8px',\r\n                                    color: '#fff',\r\n                                    fontSize: '1rem',\r\n                                    resize: 'vertical'\r\n                                }}\r\n                            />\r\n                            <div style={{\r\n                                fontSize: '0.85rem',\r\n                                color: '#666',\r\n                                marginTop: '0.5rem'\r\n                            }}>\r\n                                {shopBio.length}/500 characters\r\n                            </div>\r\n                        </div>\r\n\r\n                        {error && (\r\n                            <div style={{\r\n                                padding: '1rem',\r\n                                background: 'rgba(255, 68, 68, 0.1)',\r\n                                border: '1px solid rgba(255, 68, 68, 0.3)',\r\n                                borderRadius: '8px',\r\n                                color: '#ff4444',\r\n                                marginBottom: '1.5rem'\r\n                            }}>\r\n                                {error}\r\n                            </div>\r\n                        )}\r\n\r\n                        <div style={{ display: 'flex', gap: '1rem' }}>\r\n                            <button\r\n                                onClick={() => setStep(2)}\r\n                                disabled={loading}\r\n                                style={{\r\n                                    flex: 1,\r\n                                    padding: '0.75rem',\r\n                                    background: '#333',\r\n                                    border: 'none',\r\n                                    borderRadius: '8px',\r\n                                    color: '#fff',\r\n                                    fontWeight: '600',\r\n                                    cursor: loading ? 'not-allowed' : 'pointer',\r\n                                    opacity: loading ? 0.5 : 1\r\n                                }}\r\n                            >\r\n                                Back\r\n                            </button>\r\n                            <button\r\n                                onClick={handleComplete}\r\n                                disabled={loading || !shopName.trim()}\r\n                                style={{\r\n                                    flex: 2,\r\n                                    padding: '0.75rem',\r\n                                    background: shopName.trim() ? '#7FFFD4' : '#444',\r\n                                    border: 'none',\r\n                                    borderRadius: '8px',\r\n                                    color: shopName.trim() ? '#000' : '#666',\r\n                                    fontWeight: 'bold',\r\n                                    cursor: (loading || !shopName.trim()) ? 'not-allowed' : 'pointer',\r\n                                    opacity: loading ? 0.5 : 1\r\n                                }}\r\n                            >\r\n                                {loading ? 'Setting up...' : 'Complete Setup'}\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ShopSetup;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\pages\\Signup.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'renderCosmicUsername' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":37,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":57},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\-.","line":28,"column":64,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":28,"endColumn":65,"suggestions":[{"messageId":"removeEscape","fix":{"range":[1076,1077],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[1076,1076],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport StarBackground from '@/components/StarBackground';\r\n\r\nimport { getRenderedUsernameLength, renderCosmicUsername } from '@/utils/usernameRenderer';\r\n\r\nconst Signup = () => {\r\n    const [email, setEmail] = useState('');\r\n    const [username, setUsername] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [passwordConfirm, setPasswordConfirm] = useState('');\r\n    const { signup } = useAuth();\r\n    const [error, setError] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n    const navigate = useNavigate();\r\n\r\n    async function handleSubmit(e) {\r\n        e.preventDefault();\r\n        if (password !== passwordConfirm) {\r\n            return setError('Passwords do not match');\r\n        }\r\n\r\n\r\n\r\n        // Validate Username\r\n        // Allow alpha-numeric + cosmic symbols: @ . * / \" _ % # ^ \\ ? [ ] ( ) { } < -\r\n        const usernameRegex = /^[a-zA-Z0-9_@.*/\"%#^\\\\?[\\](){}< \\-]+$/;\r\n\r\n        const renderedLen = getRenderedUsernameLength(username);\r\n        if (renderedLen < 3 || renderedLen > 20) {\r\n            return setError(`Username length must be 3-20 characters (currently ${renderedLen}).`);\r\n        }\r\n\r\n        if (!usernameRegex.test(username)) {\r\n            return setError('Username contains invalid characters.');\r\n        }\r\n\r\n        try {\r\n            setError('');\r\n            setLoading(true);\r\n\r\n            // Import Firestore early for check\r\n            const { doc, setDoc, getDocs, collection, query, where } = await import('firebase/firestore');\r\n            const { db } = await import('../firebase');\r\n\r\n            // Unique Check\r\n            const q = query(collection(db, 'users'), where('username', '==', username));\r\n            const existing = await getDocs(q);\r\n            if (!existing.empty) {\r\n                setLoading(false);\r\n                return setError('Username is already taken.');\r\n            }\r\n\r\n            const userCredential = await signup(email, password);\r\n\r\n            try {\r\n                // We keep displayName as username for Firebase Auth consistency, but app uses 'username' field\r\n                const { updateProfile } = await import('firebase/auth');\r\n                await updateProfile(userCredential.user, { displayName: username });\r\n\r\n                const userData = {\r\n                    username: username, // Primary field\r\n                    displayName: username, // Legacy consistency\r\n                    email: email,\r\n                    photoURL: userCredential.user.photoURL || '',\r\n                    createdAt: new Date().toISOString(),\r\n                    bio: 'New Panospace Artist',\r\n                    accountType: 'art',\r\n                };\r\n\r\n                // Generate search keywords\r\n                const { generateUserSearchKeywords } = await import('@/core/utils/searchKeywords');\r\n                userData.searchKeywords = generateUserSearchKeywords(userData);\r\n\r\n                await setDoc(doc(db, 'users', userCredential.user.uid), userData);\r\n            } catch (profileErr) {\r\n                console.error('Error setting up profile:', profileErr);\r\n            }\r\n            navigate('/');\r\n        } catch (err) {\r\n            setError('Failed to create an account: ' + err.message);\r\n        }\r\n        setLoading(false);\r\n    }\r\n\r\n    // Full-screen container that scrolls when content overflows\r\n    const containerStyle = {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        minHeight: '100vh',\r\n        width: '100vw',\r\n        background: 'radial-gradient(ellipse at center, rgba(20, 20, 40, 0.4) 0%, #000 70%)',\r\n        color: '#fff',\r\n        position: 'relative',\r\n        overflowY: 'auto',\r\n        overflowX: 'hidden',\r\n        padding: '2rem',\r\n    };\r\n\r\n    // Card that holds the form\r\n    const cardStyle = {\r\n        padding: '2.5rem',\r\n        borderRadius: '24px',\r\n        background: 'linear-gradient(135deg, rgba(15, 15, 20, 0.85) 0%, rgba(10, 10, 15, 0.75) 100%)',\r\n        backdropFilter: 'blur(40px) saturate(180%)',\r\n        border: '1px solid rgba(127, 255, 212, 0.15)',\r\n        boxShadow: `\r\n      0 0 60px rgba(127, 255, 212, 0.15),\r\n      0 0 120px rgba(76, 201, 240, 0.08),\r\n      0 20px 60px rgba(0, 0, 0, 0.6),\r\n      inset 0 1px 0 rgba(255, 255, 255, 0.1),\r\n      inset 0 -1px 0 rgba(127, 255, 212, 0.05)\r\n    `,\r\n        width: '100%',\r\n        maxWidth: '420px',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        gap: '1.75rem',\r\n        position: 'relative',\r\n        zIndex: 1,\r\n        animation: 'cardFadeIn 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards',\r\n        opacity: 0,\r\n        transform: 'translateY(20px)',\r\n    };\r\n\r\n    return (\r\n        <div style={containerStyle}>\r\n            {/* Animated Stars Background */}\r\n            <StarBackground />\r\n\r\n            {/* Galaxy Mist Layer */}\r\n            <div className=\"galaxy-mist\"></div>\r\n\r\n            <style>{`\r\n        @keyframes cardFadeIn { to { opacity: 1; transform: translateY(0); } }\r\n        @keyframes glowPulse { 0%,100%{ box-shadow: 0 0 60px rgba(127,255,212,0.15),0 0 120px rgba(76,201,240,0.08),0 20px 60px rgba(0,0,0,0.6),inset 0 1px 0 rgba(255,255,255,0.1),inset 0 -1px 0 rgba(127,255,212,0.05); } 50%{ box-shadow: 0 0 80px rgba(127,255,212,0.2),0 0 140px rgba(76,201,240,0.12),0 20px 60px rgba(0,0,0,0.6),inset 0 1px 0 rgba(255,255,255,0.15),inset 0 -1px 0 rgba(127,255,212,0.08); } }\r\n        @keyframes buttonPulse { 0%,100%{ box-shadow: 0 0 20px rgba(127,255,212,0.3),0 0 40px rgba(127,255,212,0.15),inset 0 1px 0 rgba(255,255,255,0.3); } 50%{ box-shadow: 0 0 30px rgba(127,255,212,0.5),0 0 60px rgba(127,255,212,0.25),inset 0 1px 0 rgba(255,255,255,0.4); } }\r\n        .y2k-input { padding:1.1rem 1.2rem; border-radius:14px; border:1px solid rgba(127,255,212,0.12); background:linear-gradient(135deg,rgba(0,0,0,0.6)0%,rgba(10,10,15,0.5)100%); color:#fff; font-size:1rem; width:100%; transition:all .3s cubic-bezier(.4,0,.2,1); outline:none; position:relative; box-shadow: inset 0 1px 3px rgba(0,0,0,.4),0 0 0 rgba(127,255,212,0); }\r\n        .y2k-input::placeholder { color:rgba(255,255,255,.35); font-weight:300; letter-spacing:.5px; }\r\n        .y2k-input:focus { border-color:rgba(127,255,212,.5); background:linear-gradient(135deg,rgba(5,5,10,.8)0%,rgba(15,15,20,.7)100%); box-shadow: inset 0 1px 3px rgba(0,0,0,.4),0 0 20px rgba(127,255,212,.15),0 0 40px rgba(127,255,212,.08), inset 0 0 30px rgba(127,255,212,.03); transform:translateY(-1px); }\r\n        .y2k-button { padding:1.1rem 1.5rem; border-radius:14px; border:none; background:linear-gradient(135deg,#7FFFD4 0%,#4CC9F0 50%,#7FFFD4 100%); background-size:200% 100%; color:#000; font-size:1rem; font-weight:800; cursor:pointer; width:100%; transition:all .3s cubic-bezier(.4,0,.2,1); box-shadow:0 0 20px rgba(127,255,212,.3),0 0 40px rgba(127,255,212,.15),inset 0 1px 0 rgba(255,255,255,.3); text-transform:uppercase; letter-spacing:1.5px; position:relative; overflow:hidden; animation:buttonPulse 3s ease-in-out infinite; }\r\n        .y2k-button::before { content:''; position:absolute; top:0; left:-100%; width:100%; height:100%; background:linear-gradient(90deg,transparent,rgba(255,255,255,.3),transparent); transition:left .5s; }\r\n        .y2k-button:hover:not(:disabled)::before { left:100%; }\r\n        .y2k-button:hover:not(:disabled) { transform:translateY(-2px); background-position:100% 0; box-shadow:0 0 30px rgba(127,255,212,.5),0 0 60px rgba(127,255,212,.25),0 4px 20px rgba(0,0,0,.3),inset 0 1px 0 rgba(255,255,255,.4); }\r\n        .y2k-button:active:not(:disabled) { transform:translateY(0); }\r\n        .y2k-button:disabled { opacity:.5; cursor:not-allowed; filter:grayscale(.8); animation:none; }\r\n        .galaxy-mist { position:absolute; width:100%; height:100%; top:0; left:0; pointer-events:none; opacity:.3; }\r\n        .galaxy-mist::before { content:''; position:absolute; width:600px; height:600px; top:50%; left:50%; transform:translate(-50%,-50%); background:radial-gradient(circle,rgba(127,255,212,.08)0%,transparent 70%); filter:blur(80px); animation:galaxyPulse 8s ease-in-out infinite; }\r\n        .galaxy-mist::after { content:''; position:absolute; width:800px; height:800px; top:50%; left:50%; transform:translate(-50%,-50%); background:radial-gradient(circle,rgba(76,201,240,.05)0%,transparent 70%); filter:blur(100px); animation:galaxyPulse 10s ease-in-out infinite reverse; }\r\n        @keyframes galaxyPulse { 0%,100%{ opacity:.3; transform:translate(-50%,-50%) scale(1); } 50%{ opacity:.5; transform:translate(-50%,-50%) scale(1.1); } }\r\n        \r\n        /* Landscape Mobile Optimization */\r\n        @media (max-height: 500px) and (orientation: landscape) {\r\n            .signup-card {\r\n                padding: 1.5rem !important;\r\n                gap: 1rem !important;\r\n                max-width: 90vw !important;\r\n            }\r\n            .signup-title {\r\n                font-size: 1.5rem !important;\r\n                margin-bottom: 0.5rem !important;\r\n            }\r\n            .signup-subtitle {\r\n                font-size: 0.7rem !important;\r\n                margin-top: 0.25rem !important;\r\n            }\r\n            .y2k-input {\r\n                padding: 0.8rem 1rem !important;\r\n                font-size: 0.9rem !important;\r\n            }\r\n            .y2k-button {\r\n                padding: 0.8rem 1.2rem !important;\r\n                font-size: 0.9rem !important;\r\n            }\r\n            .signup-form {\r\n                gap: 0.8rem !important;\r\n            }\r\n        }\r\n      `}</style>\r\n            <div style={cardStyle} className=\"signup-card\">\r\n                <div style={{ textAlign: 'center', marginBottom: '1rem' }}>\r\n                    <h2 className=\"signup-title\" style={{\r\n                        fontSize: 'clamp(1.5rem, 6vw, 2.5rem)',\r\n                        fontWeight: '800',\r\n                        margin: 0,\r\n                        background: 'linear-gradient(135deg,#fff 0%,#aaa 100%)',\r\n                        WebkitBackgroundClip: 'text',\r\n                        WebkitTextFillColor: 'transparent',\r\n                        letterSpacing: 'clamp(-1px, -0.3vw, 0px)',\r\n                        wordBreak: 'keep-all',\r\n                        whiteSpace: 'nowrap'\r\n                    }}>\r\n                        JOIN PANOSPACE\r\n                    </h2>\r\n                    <h3 className=\"signup-subtitle\" style={{\r\n                        fontSize: 'clamp(0.75rem, 3vw, 1rem)',\r\n                        color: '#7FFFD4',\r\n                        margin: '0.5rem 0 0 0',\r\n                        fontWeight: '400',\r\n                        letterSpacing: 'clamp(1px, 0.5vw, 2px)',\r\n                        textTransform: 'uppercase',\r\n                        opacity: 0.8\r\n                    }}>\r\n                        Enter the Visual Universe\r\n                    </h3>\r\n                </div>\r\n                {error && (\r\n                    <div style={{ padding: '0.75rem', background: 'rgba(255,107,107,0.1)', border: '1px solid rgba(255,107,107,0.3)', borderRadius: '8px', color: '#ff6b6b', textAlign: 'center', fontSize: '0.9rem' }}>{error}</div>\r\n                )}\r\n                <form onSubmit={handleSubmit} className=\"signup-form\" style={{ display: 'flex', flexDirection: 'column', gap: '1.2rem' }}>\r\n                    <input type=\"email\" value={email} onChange={e => setEmail(e.target.value)} required placeholder=\"Email\" className=\"y2k-input\" />\r\n                    {/* NEW USERNAME INPUT */}\r\n                    <input\r\n                        type=\"text\"\r\n                        value={username}\r\n                        onChange={e => setUsername(e.target.value.toLowerCase())} // Allow symbols, just lowercase\r\n                        required\r\n                        placeholder=\"Username (letters, numbers, cosmic symbols)\"\r\n                        className=\"y2k-input\"\r\n                    // Validation handled in handleSubmit with getRenderedUsernameLength\r\n                    />\r\n                    <input type=\"password\" value={password} onChange={e => setPassword(e.target.value)} required placeholder=\"Password\" className=\"y2k-input\" />\r\n                    <input type=\"password\" value={passwordConfirm} onChange={e => setPasswordConfirm(e.target.value)} required placeholder=\"Confirm Password\" className=\"y2k-input\" />\r\n\r\n                    <label style={{ display: 'flex', alignItems: 'start', gap: '0.5rem', fontSize: '0.8rem', color: '#aaa', cursor: 'pointer' }}>\r\n                        <input type=\"checkbox\" required style={{ marginTop: '0.2rem' }} />\r\n                        <span>\r\n                            I am at least 14 years old and agree to the <Link to=\"/legal\" target=\"_blank\" style={{ color: '#7FFFD4', textDecoration: 'none' }}>Terms &amp; Guidelines</Link>.\r\n                        </span>\r\n                    </label>\r\n                    <button disabled={loading} type=\"submit\" className=\"y2k-button\">Sign Up</button>\r\n                </form>\r\n                <div style={{ textAlign: 'center', marginTop: '1rem', fontSize: '0.9rem', color: '#888' }}>\r\n                    Already have an account? <Link to=\"/login\" style={{ color: '#7FFFD4', textDecoration: 'none', fontWeight: 'bold' }}>Log In</Link>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Signup;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\pages\\UltraPage.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FaCheck' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'subscribeToUltra' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setLoading' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":10,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":31},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadUserTier'. Either include it or remove the dependency array.","line":16,"column":8,"nodeType":"ArrayExpression","endLine":16,"endColumn":21,"suggestions":[{"desc":"Update the dependencies array to be: [currentUser, loadUserTier]","fix":{"range":[651,664],"text":"[currentUser, loadUserTier]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { FaGem, FaCheck, FaTrophy, FaImage, FaPalette, FaStore, FaCrown } from 'react-icons/fa';\r\nimport { subscribeToUltra, getUserTier, USER_TIERS } from '@/core/services/firestore/monetization.service';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport UltraBadge from '@/components/monetization/UltraBadge';\r\n\r\nconst UltraPage = () => {\r\n    const { currentUser } = useAuth();\r\n    const [tier, setTier] = useState(USER_TIERS.FREE);\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    useEffect(() => {\r\n        if (currentUser) {\r\n            loadUserTier();\r\n        }\r\n    }, [currentUser]);\r\n\r\n    const loadUserTier = async () => {\r\n        const userTier = await getUserTier(currentUser.uid);\r\n        setTier(userTier);\r\n    };\r\n\r\n    const handleSubscribe = async () => {\r\n        if (!currentUser) return;\r\n\r\n        // In a real app, we'd check balance here or open the wallet modal\r\n        // For this page, we'll just redirect them to open their wallet\r\n        alert(\"Please open your Wallet (top right) to upgrade to Space Creator!\");\r\n    };\r\n\r\n    const features = [\r\n        { icon: FaTrophy, title: 'Create Contests & Events', description: 'Host time-drop events and community challenges' },\r\n        { icon: FaImage, title: 'Limited Edition Prints', description: 'Create PhotoDex cards with rarity tiers and provenance tracking' },\r\n        { icon: FaPalette, title: 'RAW Editing Commissions', description: 'Accept paid editing requests from the community' },\r\n        { icon: FaStore, title: 'Shop Upgrades', description: 'Higher royalty split (75% vs 60%) and gallery print packs' },\r\n        { icon: FaCrown, title: 'Priority Feed Ranking', description: 'Small ethical boost in Explore feed' },\r\n        { icon: FaGem, title: 'Profile Customization', description: 'Custom gradients, animated banners, and exclusive badges' }\r\n    ];\r\n\r\n    if (tier === USER_TIERS.ULTRA || tier === USER_TIERS.PARTNER) {\r\n        return (\r\n            <div style={{\r\n                minHeight: '100vh',\r\n                background: '#000',\r\n                padding: '2rem',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'center'\r\n            }}>\r\n                <div style={{ textAlign: 'center', maxWidth: '600px' }}>\r\n                    <UltraBadge size=\"lg\" />\r\n                    <h1 style={{ color: '#fff', marginTop: '2rem', fontSize: '2.5rem' }}>\r\n                        You're a Space Creator!\r\n                    </h1>\r\n                    <p style={{ color: '#ccc', fontSize: '1.2rem', marginTop: '1rem' }}>\r\n                        Enjoy all the premium features PanoSpace has to offer.\r\n                    </p>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div style={{\r\n            minHeight: '100vh',\r\n            background: 'linear-gradient(180deg, #000 0%, #1a1a1a 100%)',\r\n            padding: '2rem'\r\n        }}>\r\n            <div style={{ maxWidth: '1200px', margin: '0 auto' }}>\r\n                {/* Hero Section */}\r\n                <div style={{ textAlign: 'center', marginBottom: '4rem' }}>\r\n                    <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center', gap: '1rem', marginBottom: '1rem' }}>\r\n                        <FaGem size={48} color=\"#FFD700\" />\r\n                        <h1 style={{\r\n                            color: '#fff',\r\n                            fontSize: '3rem',\r\n                            margin: 0,\r\n                            background: 'linear-gradient(45deg, #FFD700, #FFA500)',\r\n                            WebkitBackgroundClip: 'text',\r\n                            WebkitTextFillColor: 'transparent'\r\n                        }}>\r\n                            Space Creator\r\n                        </h1>\r\n                    </div>\r\n                    <p style={{ color: '#ccc', fontSize: '1.3rem', maxWidth: '600px', margin: '0 auto' }}>\r\n                        Unlock exclusive features, contests, and monetization tools for professional photographers.\r\n                    </p>\r\n                </div>\r\n\r\n                {/* Features Grid */}\r\n                <div style={{\r\n                    display: 'grid',\r\n                    gridTemplateColumns: 'repeat(auto-fit, minmax(300px, 1fr))',\r\n                    gap: '2rem',\r\n                    marginBottom: '4rem'\r\n                }}>\r\n                    {features.map((feature, index) => (\r\n                        <div\r\n                            key={index}\r\n                            style={{\r\n                                background: '#1a1a1a',\r\n                                border: '1px solid #333',\r\n                                borderRadius: '12px',\r\n                                padding: '2rem',\r\n                                transition: 'transform 0.2s',\r\n                                cursor: 'default'\r\n                            }}\r\n                            onMouseEnter={(e) => e.currentTarget.style.transform = 'translateY(-4px)'}\r\n                            onMouseLeave={(e) => e.currentTarget.style.transform = 'translateY(0)'}\r\n                        >\r\n                            <feature.icon size={32} color=\"#FFD700\" style={{ marginBottom: '1rem' }} />\r\n                            <h3 style={{ color: '#fff', marginBottom: '0.5rem' }}>{feature.title}</h3>\r\n                            <p style={{ color: '#888', lineHeight: '1.6' }}>{feature.description}</p>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n\r\n                {/* Pricing */}\r\n                <div style={{\r\n                    background: 'linear-gradient(135deg, #FFD700 0%, #FFA500 100%)',\r\n                    borderRadius: '16px',\r\n                    padding: '3rem',\r\n                    textAlign: 'center',\r\n                    maxWidth: '600px',\r\n                    margin: '0 auto'\r\n                }}>\r\n                    <h2 style={{ color: '#000', fontSize: '2.5rem', marginBottom: '1rem' }}>\r\n                        $5.00<span style={{ fontSize: '1.2rem' }}>/month</span>\r\n                    </h2>\r\n                    <p style={{ color: '#333', marginBottom: '2rem', fontSize: '1.1rem' }}>\r\n                        Cancel anytime. No long-term commitment.\r\n                    </p>\r\n                    <button\r\n                        onClick={handleSubscribe}\r\n                        disabled={loading}\r\n                        style={{\r\n                            padding: '1.2rem 3rem',\r\n                            background: '#000',\r\n                            color: '#FFD700',\r\n                            border: 'none',\r\n                            borderRadius: '30px',\r\n                            fontSize: '1.2rem',\r\n                            fontWeight: 'bold',\r\n                            cursor: loading ? 'not-allowed' : 'pointer',\r\n                            transition: 'transform 0.2s',\r\n                            opacity: loading ? 0.7 : 1\r\n                        }}\r\n                        onMouseEnter={(e) => !loading && (e.currentTarget.style.transform = 'scale(1.05)')}\r\n                        onMouseLeave={(e) => e.currentTarget.style.transform = 'scale(1)'}\r\n                    >\r\n                        {loading ? 'Processing...' : 'Upgrade via Wallet'}\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default UltraPage;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\pages\\shop\\ShopSetupPage.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'currentUser' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":29,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":29,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'currentStep' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":32,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":32,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setCurrentStep' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":32,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":32,"endColumn":39},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'loading' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":33,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":33,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setLoading' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":33,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":33,"endColumn":31}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { FaStore, FaLock, FaCheck, FaExclamationTriangle, FaShieldAlt } from 'react-icons/fa';\r\nimport { httpsCallable } from 'firebase/functions';\r\nimport { functions } from '@/firebase';\r\nimport { countries } from 'countries-list';\r\nimport PanoDateInput from '@/components/common/PanoDateInput';\r\n\r\nconst countryOptions = Object.entries(countries).map(([code, data]) => ({\r\n    code,\r\n    name: data.name\r\n})).sort((a, b) => a.name.localeCompare(b.name));\r\n\r\n// Helper for Age Calculation (Sync with backend logic)\r\nconst getAgeFromDob = (dobString) => {\r\n    if (!dobString) return null;\r\n    const dob = new Date(dobString);\r\n    const today = new Date();\r\n    let age = today.getFullYear() - dob.getFullYear();\r\n    const m = today.getMonth() - dob.getMonth();\r\n    if (m < 0 || (m === 0 && today.getDate() < dob.getDate())) {\r\n        age--;\r\n    }\r\n    return age;\r\n};\r\n\r\nconst ShopSetupPage = () => {\r\n    const { currentUser, userProfile } = useAuth(); // Assuming useAuth gives us the Firestore profile doc as userProfile\r\n    const navigate = useNavigate();\r\n\r\n    const [currentStep, setCurrentStep] = useState(1);\r\n    const [loading, setLoading] = useState(false);\r\n    const [verifying, setVerifying] = useState(false);\r\n\r\n    // Form State\r\n    const [formData, setFormData] = useState({\r\n        // Auth / Verification\r\n        dateOfBirth: '', // YYYY-MM-DD\r\n\r\n        // Business Info\r\n        shopLegalName: '',\r\n        shopCountry: 'US',\r\n        shopAddressLine1: '',\r\n        shopAddressLine2: '',\r\n        shopCity: '',\r\n        shopRegion: '',\r\n        shopPostalCode: '',\r\n        shopPayoutProvider: 'stripe', // Default\r\n\r\n        // Checkboxes\r\n        confirmAge: false,\r\n        confirmOwner: false,\r\n        confirmNoAI: false,\r\n        confirmRights: false,\r\n        confirmTerms: false\r\n    });\r\n\r\n    // Populate from existing profile if available\r\n    useEffect(() => {\r\n        if (userProfile) {\r\n            setFormData(prev => ({\r\n                ...prev,\r\n                dateOfBirth: userProfile.dateOfBirth || '',\r\n                shopLegalName: userProfile.shopLegalName || userProfile.displayName || '',\r\n                shopCountry: userProfile.shopCountry || 'US',\r\n                shopCity: userProfile.shopCity || '',\r\n                shopRegion: userProfile.shopRegion || '',\r\n                shopPostalCode: userProfile.shopPostalCode || '',\r\n                shopAddressLine1: userProfile.shopAddressLine1 || '',\r\n                // If they are already verified, we might show a read-only view or \"Edit\" view\r\n                // For now, we assume this page is for setup.\r\n            }));\r\n        }\r\n    }, [userProfile]);\r\n\r\n    const handleInputChange = (e) => {\r\n        const { name, value, type, checked } = e.target;\r\n        setFormData(prev => ({\r\n            ...prev,\r\n            [name]: type === 'checkbox' ? checked : value\r\n        }));\r\n    };\r\n\r\n    // -------------------------------------------------------------------------\r\n    // VALIDATION\r\n    // -------------------------------------------------------------------------\r\n\r\n    // 1. Age Check\r\n    const age = getAgeFromDob(formData.dateOfBirth);\r\n    const isUnderage = age !== null && age < 18;\r\n    const isDobMissing = !formData.dateOfBirth;\r\n\r\n    // 2. Checkboxes Check\r\n    const allCheckboxesChecked =\r\n        formData.confirmAge &&\r\n        formData.confirmOwner &&\r\n        formData.confirmNoAI &&\r\n        formData.confirmRights &&\r\n        formData.confirmTerms;\r\n\r\n    // 3. Required Fields Check\r\n    const requiredFieldsFilled =\r\n        formData.shopLegalName &&\r\n        formData.shopCountry &&\r\n        formData.shopAddressLine1 &&\r\n        formData.shopCity &&\r\n        formData.shopPostalCode;\r\n\r\n    // -------------------------------------------------------------------------\r\n    // ACTIONS\r\n    // -------------------------------------------------------------------------\r\n\r\n    const handleFinishSetup = async () => {\r\n        setVerifying(true);\r\n        try {\r\n            const verifyFn = httpsCallable(functions, 'verifyUserShop');\r\n            const result = await verifyFn({\r\n                dateOfBirth: formData.dateOfBirth,\r\n                shopLegalName: formData.shopLegalName,\r\n                shopCountry: formData.shopCountry,\r\n                shopAddressLine1: formData.shopAddressLine1,\r\n                shopAddressLine2: formData.shopAddressLine2,\r\n                shopCity: formData.shopCity,\r\n                shopRegion: formData.shopRegion,\r\n                shopPostalCode: formData.shopPostalCode,\r\n                shopPayoutProvider: formData.shopPayoutProvider,\r\n                rulesAccepted: true\r\n            });\r\n\r\n            if (result.data.success) {\r\n                // Success! Redirect or refresh\r\n                alert(\"Shop verified successfully! You can now publish items.\");\r\n                navigate('/profile/me'); // Or to the shop dashboard\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Setup failed:\", error);\r\n            alert(\"Shop verification failed: \" + error.message);\r\n        } finally {\r\n            setVerifying(false);\r\n        }\r\n    };\r\n\r\n    // -------------------------------------------------------------------------\r\n    // RENDER: BLOCKED STATES\r\n    // -------------------------------------------------------------------------\r\n\r\n    if (isDobMissing) {\r\n        return (\r\n            <div style={{ minHeight: '100vh', padding: '2rem', background: '#000', color: '#fff', display: 'flex', flexDirection: 'column', alignItems: 'center', justifyContent: 'center', textAlign: 'center' }}>\r\n                <FaStore size={48} style={{ color: '#888', marginBottom: '1rem' }} />\r\n                <h2 style={{ marginBottom: '1rem' }}>Set Up Your Shop</h2>\r\n                <p style={{ color: '#ccc', maxWidth: '400px', marginBottom: '2rem' }}>\r\n                    To ensure trust and safety on PanoSpace, we need to verify your date of birth before you can start selling.\r\n                </p>\r\n                <div style={{ padding: '1.5rem', background: '#111', borderRadius: '12px', border: '1px solid #333', textAlign: 'left', width: '100%', maxWidth: '400px' }}>\r\n                    <label style={{ display: 'block', marginBottom: '0.5rem', fontSize: '0.9rem', color: '#888' }}>Date of Birth</label>\r\n                    <PanoDateInput\r\n                        selected={formData.dateOfBirth ? new Date(formData.dateOfBirth + 'T12:00:00') : null} // Add time to prevent timezone shift issues on pure dates\r\n                        onChange={(date) => {\r\n                            const dateString = date ? date.toISOString().split('T')[0] : '';\r\n                            setFormData(prev => ({ ...prev, dateOfBirth: dateString }));\r\n                        }}\r\n                        placeholder=\"Select Date of Birth\"\r\n                        className=\"shop-setup-date-input\"\r\n                    />\r\n                    <p style={{ fontSize: '0.8rem', color: '#666', marginTop: '0.5rem' }}>\r\n                        You must be at least 18 years old. This will not be shown publicly on your profile.\r\n                    </p>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (isUnderage) {\r\n        return (\r\n            <div style={{ minHeight: '100vh', padding: '2rem', background: '#000', color: '#fff', display: 'flex', flexDirection: 'column', alignItems: 'center', justifyContent: 'center', textAlign: 'center' }}>\r\n                <FaLock size={48} style={{ color: '#ff4444', marginBottom: '1rem' }} />\r\n                <h2 style={{ marginBottom: '1rem' }}>Age Requirement</h2>\r\n                <p style={{ color: '#ccc', maxWidth: '400px', marginBottom: '2rem' }}>\r\n                    You must be at least 18 years old to run a shop and receive payouts on PanoSpace.\r\n                </p>\r\n                <button\r\n                    onClick={() => navigate(-1)}\r\n                    style={{ padding: '0.8rem 1.5rem', background: '#333', border: 'none', borderRadius: '8px', color: '#fff', cursor: 'pointer' }}\r\n                >\r\n                    Go Back\r\n                </button>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // -------------------------------------------------------------------------\r\n    // RENDER: MAIN FORM\r\n    // -------------------------------------------------------------------------\r\n\r\n    return (\r\n        <div style={{ minHeight: '100vh', padding: '2rem', background: '#000', color: '#fff' }}>\r\n            <div style={{ maxWidth: '800px', margin: '0 auto' }}>\r\n                <header style={{ marginBottom: '3rem', borderBottom: '1px solid #333', paddingBottom: '1.5rem' }}>\r\n                    <h1 style={{ fontSize: '2rem', fontWeight: 'bold' }}>Shop Setup & Verification</h1>\r\n                    <p style={{ color: '#888' }}>Complete the following steps to start selling your work.</p>\r\n                </header>\r\n\r\n                <div style={{ display: 'grid', gap: '3rem' }}>\r\n\r\n                    {/* SECTION 1: BUSINESS INFO */}\r\n                    <section>\r\n                        <h3 style={{ borderBottom: '1px solid #333', paddingBottom: '0.5rem', marginBottom: '1.5rem', color: '#7FFFD4', display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                            <span style={{ background: '#7FFFD4', color: '#000', width: '24px', height: '24px', borderRadius: '50%', display: 'flex', alignItems: 'center', justifyContent: 'center', fontSize: '0.8rem' }}>1</span>\r\n                            Business & Payout Info\r\n                        </h3>\r\n                        <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '1.5rem' }}>\r\n                            <div style={{ gridColumn: '1 / -1' }}>\r\n                                <label style={{ display: 'block', marginBottom: '0.5rem', color: '#aaa', fontSize: '0.9rem' }}>Legal Full Name</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    name=\"shopLegalName\"\r\n                                    value={formData.shopLegalName}\r\n                                    onChange={handleInputChange}\r\n                                    placeholder=\"Legal name for tax purposes\"\r\n                                    style={{ width: '100%', padding: '0.8rem', background: '#111', border: '1px solid #333', borderRadius: '6px', color: '#fff' }}\r\n                                />\r\n                            </div>\r\n\r\n                            <div>\r\n                                <label style={{ display: 'block', marginBottom: '0.5rem', color: '#aaa', fontSize: '0.9rem' }}>Country</label>\r\n                                <select\r\n                                    name=\"shopCountry\"\r\n                                    value={formData.shopCountry}\r\n                                    onChange={handleInputChange}\r\n                                    style={{ width: '100%', padding: '0.8rem', background: '#111', border: '1px solid #333', borderRadius: '6px', color: '#fff' }}\r\n                                >\r\n                                    {countryOptions.map(c => (\r\n                                        <option key={c.code} value={c.code}>{c.name}</option>\r\n                                    ))}\r\n                                </select>\r\n                            </div>\r\n\r\n                            <div>\r\n                                <label style={{ display: 'block', marginBottom: '0.5rem', color: '#aaa', fontSize: '0.9rem' }}>City</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    name=\"shopCity\"\r\n                                    value={formData.shopCity}\r\n                                    onChange={handleInputChange}\r\n                                    style={{ width: '100%', padding: '0.8rem', background: '#111', border: '1px solid #333', borderRadius: '6px', color: '#fff' }}\r\n                                />\r\n                            </div>\r\n\r\n                            <div style={{ gridColumn: '1 / -1' }}>\r\n                                <label style={{ display: 'block', marginBottom: '0.5rem', color: '#aaa', fontSize: '0.9rem' }}>Address Line 1</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    name=\"shopAddressLine1\"\r\n                                    value={formData.shopAddressLine1}\r\n                                    onChange={handleInputChange}\r\n                                    style={{ width: '100%', padding: '0.8rem', background: '#111', border: '1px solid #333', borderRadius: '6px', color: '#fff' }}\r\n                                />\r\n                            </div>\r\n\r\n                            <div style={{ gridColumn: '1 / -1' }}>\r\n                                <label style={{ display: 'block', marginBottom: '0.5rem', color: '#aaa', fontSize: '0.9rem' }}>Address Line 2 (Optional)</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    name=\"shopAddressLine2\"\r\n                                    value={formData.shopAddressLine2}\r\n                                    onChange={handleInputChange}\r\n                                    style={{ width: '100%', padding: '0.8rem', background: '#111', border: '1px solid #333', borderRadius: '6px', color: '#fff' }}\r\n                                />\r\n                            </div>\r\n\r\n                            <div>\r\n                                <label style={{ display: 'block', marginBottom: '0.5rem', color: '#aaa', fontSize: '0.9rem' }}>State / Region</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    name=\"shopRegion\"\r\n                                    value={formData.shopRegion}\r\n                                    onChange={handleInputChange}\r\n                                    style={{ width: '100%', padding: '0.8rem', background: '#111', border: '1px solid #333', borderRadius: '6px', color: '#fff' }}\r\n                                />\r\n                            </div>\r\n\r\n                            <div>\r\n                                <label style={{ display: 'block', marginBottom: '0.5rem', color: '#aaa', fontSize: '0.9rem' }}>Postal Code</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    name=\"shopPostalCode\"\r\n                                    value={formData.shopPostalCode}\r\n                                    onChange={handleInputChange}\r\n                                    style={{ width: '100%', padding: '0.8rem', background: '#111', border: '1px solid #333', borderRadius: '6px', color: '#fff' }}\r\n                                />\r\n                            </div>\r\n\r\n                            <div style={{ gridColumn: '1 / -1', marginTop: '1rem', padding: '1rem', background: 'rgba(100, 116, 139, 0.1)', borderRadius: '8px', border: '1px solid #333' }}>\r\n                                <label style={{ display: 'block', marginBottom: '0.5rem', color: '#fff', fontSize: '0.95rem', fontWeight: 'bold' }}>Payout Method</label>\r\n                                <select\r\n                                    disabled\r\n                                    style={{ width: '100%', padding: '0.8rem', background: '#222', border: '1px solid #333', borderRadius: '6px', color: '#888', cursor: 'not-allowed' }}\r\n                                >\r\n                                    <option>Stripe (Recommended)</option>\r\n                                </select>\r\n                                <p style={{ fontSize: '0.8rem', color: '#888', marginTop: '0.5rem' }}>\r\n                                    Payout integration will be configured in the next step. For now, this is just onboarding.\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                    </section>\r\n\r\n                    {/* SECTION 2: RULES */}\r\n                    <section>\r\n                        <h3 style={{ borderBottom: '1px solid #333', paddingBottom: '0.5rem', marginBottom: '1.5rem', color: '#7FFFD4', display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                            <span style={{ background: '#7FFFD4', color: '#000', width: '24px', height: '24px', borderRadius: '50%', display: 'flex', alignItems: 'center', justifyContent: 'center', fontSize: '0.8rem' }}>2</span>\r\n                            What You Can Sell\r\n                        </h3>\r\n\r\n                        <div style={{ background: '#111', padding: '1.5rem', borderRadius: '8px', border: '1px solid #333', marginBottom: '1.5rem' }}>\r\n                            <h4 style={{ color: '#4CAF50', marginTop: 0, display: 'flex', alignItems: 'center', gap: '0.5rem' }}><FaCheck /> Allowed</h4>\r\n                            <ul style={{ paddingLeft: '1.2rem', color: '#ccc', lineHeight: '1.6' }}>\r\n                                <li>The artwork is <strong>100% your original work</strong>, created by you.</li>\r\n                                <li>You own all necessary rights (copyright, model releases) to sell the image.</li>\r\n                                <li>Any identifiable people have given you permission to sell their image.</li>\r\n                                <li>You are not using stock images or templates you didn't create.</li>\r\n                            </ul>\r\n                        </div>\r\n\r\n                        <div style={{ background: 'rgba(255, 68, 68, 0.1)', padding: '1.5rem', borderRadius: '8px', border: '1px solid rgba(255, 68, 68, 0.3)' }}>\r\n                            <h4 style={{ color: '#ff4444', marginTop: 0, display: 'flex', alignItems: 'center', gap: '0.5rem' }}><FaExclamationTriangle /> NOT Allowed</h4>\r\n                            <ul style={{ paddingLeft: '1.2rem', color: '#ddd', lineHeight: '1.6' }}>\r\n                                <li>Images you didn't create (reposts, screenshots, Pinterest downloads).</li>\r\n                                <li><strong>AI-generated images</strong> (Midjourney, DALL-E, etc) are currently <strong>prohibited</strong> for sale.</li>\r\n                                <li>Pictures of public figures, celebrities, or athletes without a license.</li>\r\n                                <li>Images containing logos, trademarks, or brands you don't own.</li>\r\n                                <li>Hateful, illegal, or infringing content.</li>\r\n                            </ul>\r\n                        </div>\r\n                    </section>\r\n\r\n                    {/* SECTION 3: AGREEMENT */}\r\n                    <section>\r\n                        <h3 style={{ borderBottom: '1px solid #333', paddingBottom: '0.5rem', marginBottom: '1.5rem', color: '#7FFFD4', display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                            <span style={{ background: '#7FFFD4', color: '#000', width: '24px', height: '24px', borderRadius: '50%', display: 'flex', alignItems: 'center', justifyContent: 'center', fontSize: '0.8rem' }}>3</span>\r\n                            Agreement\r\n                        </h3>\r\n\r\n                        <div style={{ display: 'flex', flexDirection: 'column', gap: '1rem' }}>\r\n                            {[\r\n                                { key: 'confirmAge', label: 'I confirm that I am at least 18 years old.' },\r\n                                { key: 'confirmOwner', label: 'I confirm that I am the original creator of all works I upload to sell, and that I have all necessary rights.' },\r\n                                { key: 'confirmNoAI', label: 'I understand that I may NOT sell AI-generated images on PanoSpace.' },\r\n                                { key: 'confirmRights', label: 'I will not upload or sell images that include other people, celebrities, or brands without proper rights.' },\r\n                                { key: 'confirmTerms', label: 'I understand that violating these rules can result in my shop being suspended or my account being closed.' },\r\n                            ].map((item) => (\r\n                                <label key={item.key} style={{ display: 'flex', gap: '1rem', cursor: 'pointer', padding: '0.5rem', borderRadius: '6px', alignItems: 'start' }}>\r\n                                    <input\r\n                                        type=\"checkbox\"\r\n                                        name={item.key}\r\n                                        checked={formData[item.key]}\r\n                                        onChange={handleInputChange}\r\n                                        style={{ marginTop: '4px', width: '20px', height: '20px', accentColor: '#7FFFD4', cursor: 'pointer' }}\r\n                                    />\r\n                                    <span style={{ color: '#eee', lineHeight: '1.4' }}>{item.label}</span>\r\n                                </label>\r\n                            ))}\r\n                        </div>\r\n                    </section>\r\n\r\n                    <div style={{ marginTop: '2rem', borderTop: '1px solid #333', paddingTop: '2rem', display: 'flex', justifyContent: 'flex-end' }}>\r\n                        <button\r\n                            onClick={handleFinishSetup}\r\n                            disabled={!allCheckboxesChecked || !requiredFieldsFilled || verifying}\r\n                            style={{\r\n                                padding: '1rem 3rem',\r\n                                background: (!allCheckboxesChecked || !requiredFieldsFilled) ? '#333' : '#7FFFD4',\r\n                                color: (!allCheckboxesChecked || !requiredFieldsFilled) ? '#888' : '#000',\r\n                                border: 'none',\r\n                                borderRadius: '8px',\r\n                                fontSize: '1.1rem',\r\n                                fontWeight: 'bold',\r\n                                cursor: (!allCheckboxesChecked || !requiredFieldsFilled || verifying) ? 'not-allowed' : 'pointer',\r\n                                transition: 'all 0.2s',\r\n                                display: 'flex',\r\n                                alignItems: 'center',\r\n                                gap: '0.5rem'\r\n                            }}\r\n                        >\r\n                            {verifying ? 'Verifying...' : (\r\n                                <>\r\n                                    <FaShieldAlt /> Finish Shop Setup\r\n                                </>\r\n                            )}\r\n                        </button>\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ShopSetupPage;\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\services\\EventService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\services\\InstitutionService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\services\\ModerationService.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'DocumentData' is defined but never used. Allowed unused vars must match /^_/u.","line":19,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'imageUrl' is defined but never used. Allowed unused args must match /^_/u.","line":337,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":337,"endColumn":40},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'imageUrl' is defined but never used. Allowed unused args must match /^_/u.","line":343,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":343,"endColumn":40},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'imageUrl' is defined but never used. Allowed unused args must match /^_/u.","line":351,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":351,"endColumn":45},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'imageUrl' is defined but never used. Allowed unused args must match /^_/u.","line":359,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":359,"endColumn":41}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { db } from '@/firebase';\r\nimport {\r\n    doc,\r\n    getDoc,\r\n    getDocs,\r\n    setDoc,\r\n    addDoc,\r\n    deleteDoc,\r\n    runTransaction,\r\n    collection,\r\n    query,\r\n    where,\r\n    orderBy,\r\n    limit,\r\n    serverTimestamp,\r\n    increment,\r\n    Timestamp,\r\n    updateDoc,\r\n    type DocumentData,\r\n    type Transaction\r\n} from 'firebase/firestore';\r\n\r\nimport { MODERATION_THRESHOLDS, MODERATION_STATUS, REPORT_STATUS } from '@/core/constants/moderationConstants';\r\nimport { logger } from '@/core/utils/logger';\r\n\r\nexport interface ReportInput {\r\n    reporterUid: string;\r\n    reporterName: string;\r\n    category: string;\r\n    reason: string;\r\n    detail?: string;\r\n}\r\n\r\nexport interface Report extends ReportInput {\r\n    id: string;\r\n    targetType: 'post' | 'user';\r\n    targetId: string;\r\n    createdAt: Timestamp;\r\n    status: string;\r\n    reviewedBy: string | null;\r\n    reviewedAt: Timestamp | null;\r\n    reviewNotes: string;\r\n}\r\n\r\nexport interface ModerationFlags {\r\n    isFlagged: boolean;\r\n    hiddenFromExplore: boolean;\r\n    hiddenFromSearch: boolean;\r\n    requiresReview: boolean;\r\n    lastReportAt: any; // Timestamp or FieldValue\r\n}\r\n\r\nexport const ModerationService = {\r\n    /**\r\n     * Submit a report for content\r\n     */\r\n    reportContent: async (targetType: 'post' | 'user', targetId: string, reportData: ReportInput): Promise<string> => {\r\n        try {\r\n            const { reporterUid, reporterName, category, reason, detail } = reportData;\r\n\r\n            // Check if user already reported this target\r\n            const existingReport = await ModerationService.checkExistingReport(reporterUid, targetType, targetId);\r\n            if (existingReport) {\r\n                throw new Error('You have already reported this content');\r\n            }\r\n\r\n            // Create report\r\n            return await runTransaction(db, async (transaction: Transaction) => {\r\n                const reportRef = doc(collection(db, 'reports'));\r\n                const targetRef = doc(db, targetType === 'post' ? 'posts' : 'users', targetId);\r\n\r\n                // Add report\r\n                transaction.set(reportRef, {\r\n                    targetType,\r\n                    targetId,\r\n                    reporterUid,\r\n                    reporterName,\r\n                    category,\r\n                    reason,\r\n                    detail: detail || '',\r\n                    createdAt: serverTimestamp(),\r\n                    status: REPORT_STATUS.PENDING,\r\n                    reviewedBy: null,\r\n                    reviewedAt: null,\r\n                    reviewNotes: ''\r\n                });\r\n\r\n                // Increment report count on target\r\n                transaction.update(targetRef, {\r\n                    reportCount: increment(1),\r\n                    'reportFlags.lastReportAt': serverTimestamp()\r\n                });\r\n\r\n                return reportRef.id;\r\n            });\r\n        } catch (error) {\r\n            logger.error('Error submitting report:', error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Check if user already reported this target\r\n     */\r\n    checkExistingReport: async (reporterUid: string, targetType: string, targetId: string): Promise<boolean> => {\r\n        try {\r\n            const q = query(\r\n                collection(db, 'reports'),\r\n                where('reporterUid', '==', reporterUid),\r\n                where('targetType', '==', targetType),\r\n                where('targetId', '==', targetId),\r\n                limit(1)\r\n            );\r\n            const snapshot = await getDocs(q);\r\n            return !snapshot.empty;\r\n        } catch (error) {\r\n            console.error('Error checking existing report:', error);\r\n            return false;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Get all reports for a target\r\n     */\r\n    getReportsByTarget: async (targetType: string, targetId: string): Promise<Report[]> => {\r\n        try {\r\n            const q = query(\r\n                collection(db, 'reports'),\r\n                where('targetType', '==', targetType),\r\n                where('targetId', '==', targetId),\r\n                orderBy('createdAt', 'desc')\r\n            );\r\n            const snapshot = await getDocs(q);\r\n            return snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() } as Report));\r\n        } catch (error) {\r\n            console.error('Error fetching reports:', error);\r\n            return [];\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Get recent reports (within time window)\r\n     */\r\n    getRecentReports: async (targetType: string, targetId: string, hoursAgo: number = 24): Promise<Report[]> => {\r\n        try {\r\n            const cutoffTime = new Date(Date.now() - hoursAgo * 60 * 60 * 1000);\r\n            const reports = await ModerationService.getReportsByTarget(targetType, targetId);\r\n\r\n            return reports.filter(report => {\r\n                const reportTime = report.createdAt?.toDate();\r\n                return reportTime && reportTime > cutoffTime;\r\n            });\r\n        } catch (error) {\r\n            console.error('Error fetching recent reports:', error);\r\n            return [];\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Update moderation flags based on thresholds\r\n     */\r\n    updateModerationFlags: async (targetType: 'post' | 'user', targetId: string): Promise<{ flags: ModerationFlags; moderationStatus: string }> => {\r\n        try {\r\n            const targetRef = doc(db, targetType === 'post' ? 'posts' : 'users', targetId);\r\n            const targetDoc = await getDoc(targetRef);\r\n\r\n            if (!targetDoc.exists()) {\r\n                throw new Error('Target not found');\r\n            }\r\n\r\n            const totalReports = targetDoc.data()?.reportCount || 0;\r\n            const recentReports = await ModerationService.getRecentReports(targetType, targetId, 24);\r\n\r\n            const flags: ModerationFlags = {\r\n                isFlagged: totalReports >= MODERATION_THRESHOLDS.FLAGGED,\r\n                hiddenFromExplore: recentReports.length >= MODERATION_THRESHOLDS.HIDE_EXPLORE,\r\n                hiddenFromSearch: totalReports >= MODERATION_THRESHOLDS.HIDE_SEARCH,\r\n                requiresReview: totalReports >= MODERATION_THRESHOLDS.ADMIN_REVIEW,\r\n                lastReportAt: serverTimestamp()\r\n            };\r\n\r\n            // Determine moderation status\r\n            let moderationStatus: string = MODERATION_STATUS.ACTIVE;\r\n            if (totalReports >= MODERATION_THRESHOLDS.AUTO_HIDE) {\r\n                moderationStatus = MODERATION_STATUS.HIDDEN;\r\n            } else if (flags.requiresReview) {\r\n                moderationStatus = MODERATION_STATUS.FLAGGED;\r\n            }\r\n\r\n            await updateDoc(targetRef, {\r\n                reportFlags: flags,\r\n                moderationStatus\r\n            });\r\n\r\n            // Notify creator if threshold crossed\r\n            if (totalReports === MODERATION_THRESHOLDS.ADMIN_REVIEW) {\r\n                await ModerationService.notifyCreator(targetType, targetId, 'review_required');\r\n            }\r\n\r\n            return { flags, moderationStatus };\r\n        } catch (error) {\r\n            console.error('Error updating moderation flags:', error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Check thresholds after report submission\r\n     */\r\n    checkReportThresholds: async (targetType: 'post' | 'user', targetId: string) => {\r\n        return await ModerationService.updateModerationFlags(targetType, targetId);\r\n    },\r\n\r\n    /**\r\n     * Get all pending reports for admin review\r\n     */\r\n    getPendingReports: async (filters: { category?: string } = {}): Promise<Report[]> => {\r\n        try {\r\n            let q = query(\r\n                collection(db, 'reports'),\r\n                where('status', '==', REPORT_STATUS.PENDING),\r\n                orderBy('createdAt', 'desc')\r\n            );\r\n\r\n            if (filters.category) {\r\n                q = query(\r\n                    collection(db, 'reports'),\r\n                    where('status', '==', REPORT_STATUS.PENDING),\r\n                    where('category', '==', filters.category),\r\n                    orderBy('createdAt', 'desc')\r\n                );\r\n            }\r\n\r\n            const snapshot = await getDocs(q);\r\n            return snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() } as Report));\r\n        } catch (error) {\r\n            console.error('Error fetching pending reports:', error);\r\n            return [];\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Dismiss a report (admin action)\r\n     */\r\n    dismissReport: async (reportId: string, adminUid: string, notes?: string): Promise<boolean> => {\r\n        try {\r\n            const reportRef = doc(db, 'reports', reportId);\r\n            await updateDoc(reportRef, {\r\n                status: REPORT_STATUS.DISMISSED,\r\n                reviewedBy: adminUid,\r\n                reviewedAt: serverTimestamp(),\r\n                reviewNotes: notes || 'Report dismissed'\r\n            });\r\n            return true;\r\n        } catch (error) {\r\n            console.error('Error dismissing report:', error);\r\n            return false;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Take action on a report (admin action)\r\n     */\r\n    actionReport: async (reportId: string, adminUid: string, action: 'remove' | 'hide' | 'clear', notes?: string): Promise<boolean> => {\r\n        try {\r\n            const reportRef = doc(db, 'reports', reportId);\r\n            const reportDoc = await getDoc(reportRef);\r\n\r\n            if (!reportDoc.exists()) {\r\n                throw new Error('Report not found');\r\n            }\r\n\r\n            const reportData = reportDoc.data();\r\n            const targetRef = doc(db, reportData.targetType === 'post' ? 'posts' : 'users', reportData.targetId);\r\n\r\n            return await runTransaction(db, async (transaction) => {\r\n                // Update report status\r\n                transaction.update(reportRef, {\r\n                    status: REPORT_STATUS.ACTIONED,\r\n                    reviewedBy: adminUid,\r\n                    reviewedAt: serverTimestamp(),\r\n                    reviewNotes: notes || `Action taken: ${action}`\r\n                });\r\n\r\n                // Apply action to target\r\n                if (action === 'remove') {\r\n                    transaction.update(targetRef, {\r\n                        moderationStatus: MODERATION_STATUS.REMOVED,\r\n                        'reportFlags.requiresReview': false\r\n                    });\r\n                } else if (action === 'hide') {\r\n                    transaction.update(targetRef, {\r\n                        moderationStatus: MODERATION_STATUS.HIDDEN,\r\n                        'reportFlags.hiddenFromExplore': true,\r\n                        'reportFlags.hiddenFromSearch': true\r\n                    });\r\n                } else if (action === 'clear') {\r\n                    transaction.update(targetRef, {\r\n                        reportCount: 0,\r\n                        moderationStatus: MODERATION_STATUS.ACTIVE,\r\n                        reportFlags: {\r\n                            isFlagged: false,\r\n                            hiddenFromExplore: false,\r\n                            hiddenFromSearch: false,\r\n                            requiresReview: false,\r\n                            lastReportAt: null\r\n                        }\r\n                    });\r\n                }\r\n\r\n                return true;\r\n            });\r\n        } catch (error) {\r\n            console.error('Error actioning report:', error);\r\n            return false;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Notify creator about moderation action\r\n     */\r\n    notifyCreator: async (targetType: string, targetId: string, notificationType: string): Promise<boolean> => {\r\n        try {\r\n            // TODO: Implement notification system\r\n            // For now, just log\r\n            logger.log(`Notification: ${notificationType} for ${targetType} ${targetId}`);\r\n            return true;\r\n        } catch (error) {\r\n            logger.error('Error notifying creator:', error);\r\n            return false;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Content detection hooks (placeholders for future AI integration)\r\n     */\r\n    detectNSFW: async (imageUrl: string): Promise<any> => {\r\n        // TODO: Integrate with Clarifai, AWS Rekognition, or similar\r\n        // For now, return null\r\n        return null;\r\n    },\r\n\r\n    detectMeme: async (imageUrl: string): Promise<any> => {\r\n        // TODO: Heuristics for meme detection\r\n        // - Large text overlay detection\r\n        // - Impact font detection\r\n        // - Common meme template matching\r\n        return null;\r\n    },\r\n\r\n    detectStolenArt: async (imageUrl: string): Promise<any> => {\r\n        // TODO: Reverse image search\r\n        // - Google Vision API\r\n        // - TinEye API\r\n        // - Custom fingerprinting\r\n        return null;\r\n    },\r\n\r\n    detectAIArt: async (imageUrl: string): Promise<any> => {\r\n        // TODO: AI-generated art detection\r\n        // - Hive Moderation API\r\n        // - Custom model\r\n        return null;\r\n    },\r\n\r\n    // ==========================================\r\n    // USER BLOCKING & MUTING\r\n    // ==========================================\r\n\r\n    /**\r\n     * Block a user - their content will be hidden and they cannot interact with you\r\n     */\r\n    blockUser: async (blockerId: string, blockedUserId: string): Promise<void> => {\r\n        // TODO: Implement user blocking\r\n        // - Add to user's blockedUsers subcollection\r\n        // - Optionally notify the blocked user (app discretion)\r\n        // - Remove any existing follows between users\r\n        const blockerRef = doc(db, 'users', blockerId, 'blockedUsers', blockedUserId);\r\n        await setDoc(blockerRef, {\r\n            blockedAt: serverTimestamp(),\r\n            userId: blockedUserId\r\n        });\r\n        logger.log(`User ${blockerId} blocked user ${blockedUserId}`);\r\n    },\r\n\r\n    /**\r\n     * Unblock a previously blocked user\r\n     */\r\n    unblockUser: async (blockerId: string, blockedUserId: string): Promise<void> => {\r\n        // TODO: Implement user unblocking\r\n        const blockerRef = doc(db, 'users', blockerId, 'blockedUsers', blockedUserId);\r\n        await deleteDoc(blockerRef);\r\n        logger.log(`User ${blockerId} unblocked user ${blockedUserId}`);\r\n    },\r\n\r\n    /**\r\n     * Get list of users blocked by a specific user\r\n     */\r\n    getBlockedUsers: async (userId: string): Promise<string[]> => {\r\n        // TODO: Implement fetching blocked users list\r\n        const blockedRef = collection(db, 'users', userId, 'blockedUsers');\r\n        const snapshot = await getDocs(blockedRef);\r\n        return snapshot.docs.map(doc => doc.id);\r\n    },\r\n\r\n    /**\r\n     * Check if a user is blocked\r\n     */\r\n    isUserBlocked: async (blockerId: string, targetUserId: string): Promise<boolean> => {\r\n        const blockerRef = doc(db, 'users', blockerId, 'blockedUsers', targetUserId);\r\n        const snapshot = await getDoc(blockerRef);\r\n        return snapshot.exists();\r\n    },\r\n\r\n    /**\r\n     * Mute a user - hide their content from your feed without blocking\r\n     */\r\n    muteUser: async (muterId: string, mutedUserId: string): Promise<void> => {\r\n        // TODO: Implement user muting\r\n        // - Add to user's mutedUsers subcollection\r\n        // - Content from muted users filtered in feed queries\r\n        const muterRef = doc(db, 'users', muterId, 'mutedUsers', mutedUserId);\r\n        await setDoc(muterRef, {\r\n            mutedAt: serverTimestamp(),\r\n            userId: mutedUserId\r\n        });\r\n        logger.log(`User ${muterId} muted user ${mutedUserId}`);\r\n    },\r\n\r\n    /**\r\n     * Unmute a previously muted user\r\n     */\r\n    unmuteUser: async (muterId: string, mutedUserId: string): Promise<void> => {\r\n        // TODO: Implement user unmuting\r\n        const muterRef = doc(db, 'users', muterId, 'mutedUsers', mutedUserId);\r\n        await deleteDoc(muterRef);\r\n        logger.log(`User ${muterId} unmuted user ${mutedUserId}`);\r\n    },\r\n\r\n    /**\r\n     * Get list of users muted by a specific user\r\n     */\r\n    getMutedUsers: async (userId: string): Promise<string[]> => {\r\n        // TODO: Implement fetching muted users list\r\n        const mutedRef = collection(db, 'users', userId, 'mutedUsers');\r\n        const snapshot = await getDocs(mutedRef);\r\n        return snapshot.docs.map(doc => doc.id);\r\n    },\r\n\r\n    // ==========================================\r\n    // APPEALS\r\n    // ==========================================\r\n\r\n    /**\r\n     * Submit an appeal for a moderation action\r\n     */\r\n    appealReport: async (\r\n        reportId: string,\r\n        userId: string,\r\n        reason: string\r\n    ): Promise<string> => {\r\n        // TODO: Implement appeal submission\r\n        // - Create appeal document linked to original report\r\n        // - Notify moderation team\r\n        // - Track appeal status\r\n        const appealsRef = collection(db, 'moderationAppeals');\r\n        const appealDoc = await addDoc(appealsRef, {\r\n            reportId,\r\n            appealedBy: userId,\r\n            reason,\r\n            status: 'pending',\r\n            createdAt: serverTimestamp(),\r\n            updatedAt: serverTimestamp()\r\n        });\r\n        logger.log(`Appeal submitted for report ${reportId} by user ${userId}`);\r\n        return appealDoc.id;\r\n    },\r\n\r\n    /**\r\n     * Get appeals for a specific report\r\n     */\r\n    getAppealsForReport: async (reportId: string): Promise<any[]> => {\r\n        const appealsRef = collection(db, 'moderationAppeals');\r\n        const q = query(appealsRef, where('reportId', '==', reportId));\r\n        const snapshot = await getDocs(q);\r\n        return snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n    },\r\n\r\n    /**\r\n     * Process an appeal (admin action)\r\n     */\r\n    processAppeal: async (\r\n        appealId: string,\r\n        decision: 'approved' | 'rejected',\r\n        moderatorId: string,\r\n        notes?: string\r\n    ): Promise<void> => {\r\n        // TODO: Implement appeal processing\r\n        // - Update appeal status\r\n        // - If approved, reverse the original moderation action\r\n        // - Notify the user of the decision\r\n        const appealRef = doc(db, 'moderationAppeals', appealId);\r\n        await updateDoc(appealRef, {\r\n            status: decision,\r\n            processedBy: moderatorId,\r\n            processedAt: serverTimestamp(),\r\n            notes: notes || null,\r\n            updatedAt: serverTimestamp()\r\n        });\r\n        logger.log(`Appeal ${appealId} ${decision} by moderator ${moderatorId}`);\r\n    }\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\services\\OfflineQueue.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\services\\SoundTagService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\services\\SpaceCardService.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'DocumentData' is defined but never used. Allowed unused vars must match /^_/u.","line":17,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Transaction' is defined but never used. Allowed unused vars must match /^_/u.","line":18,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { db } from '@/firebase';\r\nimport {\r\n    doc,\r\n    getDoc,\r\n    getDocs,\r\n    addDoc,\r\n    updateDoc,\r\n    runTransaction,\r\n    collection,\r\n    query,\r\n    where,\r\n    orderBy,\r\n    limit,\r\n    serverTimestamp,\r\n    increment,\r\n    Timestamp,\r\n    type DocumentData,\r\n    type Transaction\r\n} from 'firebase/firestore';\r\nimport { WalletService } from './WalletService';\r\n\r\n// Rarity tiers with metadata\r\nexport const RARITY_TIERS = {\r\n    Common: { color: '#9E9E9E', weight: 60, border: '2px solid #9E9E9E' },\r\n    Uncommon: { color: '#4CAF50', weight: 25, border: '2px solid #4CAF50' },\r\n    Rare: { color: '#2196F3', weight: 10, border: '2px solid #2196F3' },\r\n    Epic: { color: '#9C27B0', weight: 3, border: '3px solid #9C27B0' },\r\n    Legendary: { color: '#FFD700', weight: 1.5, border: '3px solid #FFD700', glow: true },\r\n    Mythic: { color: '#FF00FF', weight: 0.5, border: '4px solid #FF00FF', holographic: true, iridescent: true }\r\n} as const;\r\n\r\nexport type Rarity = keyof typeof RARITY_TIERS;\r\n\r\n// Edition types\r\nexport const EDITION_TYPES = {\r\n    UNLIMITED: 'unlimited',\r\n    LIMITED: 'limited',\r\n    TIMED: 'timed',\r\n    CHALLENGE: 'challenge',\r\n    CONTEST: 'contest'\r\n} as const;\r\n\r\nexport type EditionType = typeof EDITION_TYPES[keyof typeof EDITION_TYPES];\r\n\r\n// Card disciplines\r\nexport const CARD_DISCIPLINES = {\r\n    SPORTS: 'sports',\r\n    CARS: 'cars',\r\n    WILDLIFE: 'wildlife',\r\n    LANDSCAPE: 'landscape',\r\n    URBAN: 'urban',\r\n    PORTRAIT: 'portrait',\r\n    ABSTRACT: 'abstract',\r\n    OTHER: 'other'\r\n} as const;\r\n\r\n// Card styles\r\nexport const CARD_STYLES = {\r\n    SPORTS: 'sports',\r\n    CAR: 'car',\r\n    WILDLIFE: 'wildlife',\r\n    CLASSIC: 'classic',\r\n    MODERN: 'modern'\r\n} as const;\r\n\r\nexport interface SpaceCardInput {\r\n    creatorUid: string;\r\n    creatorName: string;\r\n    frontImage: string;\r\n    backImage?: string;\r\n    title: string;\r\n    description?: string;\r\n    discipline?: string;\r\n    rarity: string;\r\n    editionType: string;\r\n    editionSize?: number;\r\n    linkedPostId?: string;\r\n    linkedPhotoDexEntryId?: string;\r\n    cardStyle?: string;\r\n    basePrice?: number;\r\n    cardType?: string;\r\n    subjectTag?: string;\r\n    isOfficial?: boolean;\r\n    isAudioCard?: boolean;\r\n    audioUrl?: string;\r\n    soundTag?: string;\r\n    imagePosition?: { x: number; y: number };\r\n}\r\n\r\nexport interface SpaceCard {\r\n    id: string;\r\n    creatorUid: string;\r\n    creatorName: string;\r\n    images: {\r\n        front: string;\r\n        back: string | null;\r\n        position: { x: number; y: number };\r\n    };\r\n    title: string;\r\n    description: string;\r\n    discipline: string;\r\n    rarity: string;\r\n    editionType: string;\r\n    editionSize: number | null;\r\n    mintedCount: number;\r\n    maxMints: number | null;\r\n    expiresAt: Timestamp | null;\r\n    linkedPostId: string | null;\r\n    linkedPhotoDexEntryId: string | null;\r\n    cardStyle: string;\r\n    basePrice: number;\r\n    cardType: string;\r\n    subjectTag: string | null;\r\n    isOfficial: boolean;\r\n    isAudioCard: boolean;\r\n    audioUrl: string | null;\r\n    soundTag: string | null;\r\n    createdAt: Timestamp;\r\n    updatedAt: Timestamp;\r\n    stats: {\r\n        totalMinted: number;\r\n        totalOwners: number;\r\n        floorPrice: number;\r\n        lastSalePrice: number;\r\n    };\r\n    [key: string]: any;\r\n}\r\n\r\nexport interface SpaceCardOwnership {\r\n    id: string;\r\n    cardId: string;\r\n    ownerId: string;\r\n    ownerName: string;\r\n    editionNumber: number;\r\n    isCreatorCopy: boolean;\r\n    acquiredFrom: 'creator' | 'primary' | 'resale';\r\n    acquiredAt: Timestamp;\r\n    purchasePrice: number;\r\n    forSale: boolean;\r\n    salePrice: number;\r\n    listedAt: Timestamp | null;\r\n}\r\n\r\nexport const SpaceCardService = {\r\n    /**\r\n     * Create a new SpaceCard\r\n     * Automatically creates a creator copy (Edition 0/0)\r\n     */\r\n    createCard: async (cardData: SpaceCardInput): Promise<SpaceCard> => {\r\n        try {\r\n            const {\r\n                creatorUid,\r\n                creatorName,\r\n                frontImage,\r\n                backImage,\r\n                title,\r\n                description,\r\n                discipline,\r\n                rarity,\r\n                editionType,\r\n                editionSize,\r\n                linkedPostId,\r\n                linkedPhotoDexEntryId,\r\n                cardStyle,\r\n                basePrice,\r\n                cardType,\r\n                subjectTag,\r\n                isOfficial,\r\n                isAudioCard,\r\n                audioUrl,\r\n                soundTag,\r\n                imagePosition\r\n            } = cardData;\r\n\r\n            // Validate required fields\r\n            if (!creatorUid || !creatorName || !frontImage || !title || !rarity || !editionType) {\r\n                throw new Error('Missing required card fields');\r\n            }\r\n\r\n            // Create card document\r\n            const cardDoc = {\r\n                creatorUid,\r\n                creatorName,\r\n                images: {\r\n                    front: frontImage,\r\n                    back: backImage || null,\r\n                    position: imagePosition || { x: 50, y: 50 }\r\n                },\r\n                title,\r\n                description: description || '',\r\n                discipline: discipline || CARD_DISCIPLINES.OTHER,\r\n                rarity,\r\n                editionType,\r\n                editionSize: editionType === EDITION_TYPES.LIMITED ? (editionSize || 0) : null,\r\n                mintedCount: 0,\r\n                maxMints: editionType === EDITION_TYPES.TIMED ? (editionSize || 1000) : null,\r\n                expiresAt: null, // Set when creating timed edition\r\n                linkedPostId: linkedPostId || null,\r\n                linkedPhotoDexEntryId: linkedPhotoDexEntryId || null,\r\n                cardStyle: cardStyle || CARD_STYLES.CLASSIC,\r\n                basePrice: basePrice || 0,\r\n                cardType: cardType || 'custom',\r\n                subjectTag: subjectTag || null,\r\n                isOfficial: isOfficial || false,\r\n                isAudioCard: isAudioCard || false,\r\n                audioUrl: audioUrl || null,\r\n                soundTag: soundTag || null,\r\n                createdAt: serverTimestamp(),\r\n                updatedAt: serverTimestamp(),\r\n                stats: {\r\n                    totalMinted: 0,\r\n                    totalOwners: 0,\r\n                    floorPrice: basePrice || 0,\r\n                    lastSalePrice: 0\r\n                }\r\n            };\r\n\r\n            // Add card to collection\r\n            const cardRef = await addDoc(collection(db, 'spaceCards'), cardDoc);\r\n\r\n            // Create creator copy (Edition 0/0)\r\n            const creatorCopyDoc = {\r\n                cardId: cardRef.id,\r\n                ownerId: creatorUid,\r\n                ownerName: creatorName,\r\n                editionNumber: 0,\r\n                isCreatorCopy: true,\r\n                acquiredFrom: 'creator',\r\n                acquiredAt: serverTimestamp(),\r\n                purchasePrice: 0,\r\n                forSale: false,\r\n                salePrice: 0,\r\n                listedAt: null\r\n            };\r\n\r\n            await addDoc(collection(db, 'spaceCardOwnership'), creatorCopyDoc);\r\n\r\n            return { id: cardRef.id, ...cardDoc } as unknown as SpaceCard;\r\n        } catch (error) {\r\n            console.error('Error creating card:', error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Mint a new edition of a card (primary sale)\r\n     */\r\n    mintCard: async (cardId: string, buyerId: string, buyerName: string): Promise<{ ownershipId: string; editionNumber: number }> => {\r\n        try {\r\n            return await runTransaction(db, async (transaction) => {\r\n                const cardRef = doc(db, 'spaceCards', cardId);\r\n                const cardDoc = await transaction.get(cardRef);\r\n\r\n                if (!cardDoc.exists()) {\r\n                    throw new Error('Card not found');\r\n                }\r\n\r\n                const cardData = cardDoc.data() as SpaceCard;\r\n\r\n                // Check if minting is allowed\r\n                if (cardData.editionType === EDITION_TYPES.LIMITED) {\r\n                    if (cardData.editionSize !== null && cardData.mintedCount >= cardData.editionSize) {\r\n                        throw new Error('All editions have been minted');\r\n                    }\r\n                } else if (cardData.editionType === EDITION_TYPES.TIMED) {\r\n                    if (cardData.expiresAt && new Date() > cardData.expiresAt.toDate()) {\r\n                        throw new Error('Timed edition has expired');\r\n                    }\r\n                    if (cardData.maxMints !== null && cardData.mintedCount >= cardData.maxMints) {\r\n                        throw new Error('Maximum mints reached');\r\n                    }\r\n                }\r\n\r\n                // Calculate edition number\r\n                const editionNumber = cardData.mintedCount + 1;\r\n\r\n                // Process payment\r\n                await WalletService.processPrimaryPurchase(\r\n                    buyerId,\r\n                    cardData.creatorUid,\r\n                    cardId,\r\n                    'spaceCard',\r\n                    cardData.basePrice,\r\n                    cardData.title\r\n                );\r\n\r\n                // Update card stats\r\n                transaction.update(cardRef, {\r\n                    mintedCount: increment(1),\r\n                    'stats.totalMinted': increment(1),\r\n                    'stats.totalOwners': increment(1),\r\n                    'stats.lastSalePrice': cardData.basePrice,\r\n                    updatedAt: serverTimestamp()\r\n                });\r\n\r\n                // Create ownership record\r\n                const ownershipDoc = {\r\n                    cardId,\r\n                    ownerId: buyerId,\r\n                    ownerName: buyerName,\r\n                    editionNumber,\r\n                    isCreatorCopy: false,\r\n                    acquiredFrom: 'primary',\r\n                    acquiredAt: serverTimestamp(),\r\n                    purchasePrice: cardData.basePrice,\r\n                    forSale: false,\r\n                    salePrice: 0,\r\n                    listedAt: null\r\n                };\r\n\r\n                const ownershipRef = doc(collection(db, 'spaceCardOwnership'));\r\n                transaction.set(ownershipRef, ownershipDoc);\r\n\r\n                return { ownershipId: ownershipRef.id, editionNumber };\r\n            });\r\n        } catch (error) {\r\n            console.error('Error minting card:', error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Get card details by ID\r\n     */\r\n    getCard: async (cardId: string): Promise<SpaceCard | null> => {\r\n        try {\r\n            const cardDoc = await getDoc(doc(db, 'spaceCards', cardId));\r\n            if (cardDoc.exists()) {\r\n                return { id: cardDoc.id, ...cardDoc.data() } as SpaceCard;\r\n            }\r\n            return null;\r\n        } catch (error) {\r\n            console.error('Error fetching card:', error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Get cards created by a user\r\n     */\r\n    getCardsByCreator: async (creatorUid: string): Promise<SpaceCard[]> => {\r\n        try {\r\n            const q = query(\r\n                collection(db, 'spaceCards'),\r\n                where('creatorUid', '==', creatorUid),\r\n                orderBy('createdAt', 'desc')\r\n            );\r\n            const querySnapshot = await getDocs(q);\r\n            return querySnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() } as SpaceCard));\r\n        } catch (error) {\r\n            console.error('Error fetching creator cards:', error);\r\n            return [];\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Get cards owned by a user\r\n     */\r\n    getOwnedCards: async (ownerId: string): Promise<any[]> => {\r\n        try {\r\n            const q = query(\r\n                collection(db, 'spaceCardOwnership'),\r\n                where('ownerId', '==', ownerId),\r\n                orderBy('acquiredAt', 'desc')\r\n            );\r\n            const querySnapshot = await getDocs(q);\r\n\r\n            // Fetch full card details for each ownership\r\n            const ownerships = querySnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() } as SpaceCardOwnership));\r\n            const cardsWithOwnership = await Promise.all(\r\n                ownerships.map(async (ownership) => {\r\n                    const card = await SpaceCardService.getCard(ownership.cardId);\r\n                    return { ...card, ownership };\r\n                })\r\n            );\r\n\r\n            return cardsWithOwnership;\r\n        } catch (error) {\r\n            console.error('Error fetching owned cards:', error);\r\n            return [];\r\n        }\r\n    },\r\n\r\n    /**\r\n     * List a card for sale on the marketplace\r\n     */\r\n    listCardForSale: async (ownershipId: string, salePrice: number): Promise<boolean> => {\r\n        try {\r\n            const ownershipRef = doc(db, 'spaceCardOwnership', ownershipId);\r\n            const ownershipDoc = await getDoc(ownershipRef);\r\n\r\n            if (!ownershipDoc.exists()) {\r\n                throw new Error('Ownership record not found');\r\n            }\r\n\r\n            const ownershipData = ownershipDoc.data() as SpaceCardOwnership;\r\n\r\n            // Check if card is tradable\r\n            const card = await SpaceCardService.getCard(ownershipData.cardId);\r\n            if (!card) throw new Error('Card details not found');\r\n\r\n            if (card.editionType === EDITION_TYPES.UNLIMITED) {\r\n                throw new Error('Unlimited edition cards cannot be sold');\r\n            }\r\n\r\n            if (ownershipData.isCreatorCopy) {\r\n                throw new Error('Creator copies cannot be sold');\r\n            }\r\n\r\n            await updateDoc(ownershipRef, {\r\n                forSale: true,\r\n                salePrice,\r\n                listedAt: serverTimestamp()\r\n            });\r\n\r\n            // Update card floor price if this is lower\r\n            const cardRef = doc(db, 'spaceCards', ownershipData.cardId);\r\n            const stats = card.stats;\r\n            const currentFloor = stats?.floorPrice;\r\n\r\n            if (!currentFloor || salePrice < currentFloor) {\r\n                await updateDoc(cardRef, {\r\n                    'stats.floorPrice': salePrice\r\n                });\r\n            }\r\n\r\n            return true;\r\n        } catch (error) {\r\n            console.error('Error listing card:', error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Purchase a card from the marketplace (resale)\r\n     */\r\n    purchaseCard: async (ownershipId: string, buyerId: string, buyerName: string): Promise<boolean> => {\r\n        try {\r\n            return await runTransaction(db, async (transaction) => {\r\n                const ownershipRef = doc(db, 'spaceCardOwnership', ownershipId);\r\n                const ownershipDoc = await transaction.get(ownershipRef);\r\n\r\n                if (!ownershipDoc.exists()) {\r\n                    throw new Error('Card not found');\r\n                }\r\n\r\n                const ownershipData = ownershipDoc.data() as SpaceCardOwnership;\r\n\r\n                if (!ownershipData.forSale) {\r\n                    throw new Error('Card is not for sale');\r\n                }\r\n\r\n                // Get card details for creator royalty\r\n                const cardRef = doc(db, 'spaceCards', ownershipData.cardId);\r\n                const cardDoc = await transaction.get(cardRef);\r\n                const cardData = cardDoc.data() as SpaceCard;\r\n\r\n                // Process resale payment (platform fee + creator royalty)\r\n                await WalletService.processResale(\r\n                    buyerId,\r\n                    ownershipData.ownerId,\r\n                    cardData.creatorUid,\r\n                    ownershipData.cardId,\r\n                    'spaceCard',\r\n                    ownershipData.salePrice,\r\n                    cardData.title\r\n                );\r\n\r\n                // Update ownership\r\n                transaction.update(ownershipRef, {\r\n                    ownerId: buyerId,\r\n                    ownerName: buyerName,\r\n                    acquiredFrom: 'resale',\r\n                    acquiredAt: serverTimestamp(),\r\n                    purchasePrice: ownershipData.salePrice,\r\n                    forSale: false,\r\n                    salePrice: 0,\r\n                    listedAt: null\r\n                });\r\n\r\n                // Update card stats\r\n                transaction.update(cardRef, {\r\n                    'stats.lastSalePrice': ownershipData.salePrice,\r\n                    updatedAt: serverTimestamp()\r\n                });\r\n\r\n                return true;\r\n            });\r\n        } catch (error) {\r\n            console.error('Error purchasing card:', error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Get marketplace listings with filters\r\n     */\r\n    getMarketplace: async (filters: { minPrice?: number; maxPrice?: number; sortBy?: string; rarity?: string; discipline?: string; editionType?: string } = {}): Promise<any[]> => {\r\n        try {\r\n            let q: any = collection(db, 'spaceCardOwnership');\r\n            const constraints: any[] = [where('forSale', '==', true)];\r\n\r\n            // Add filters\r\n            if (filters.minPrice !== undefined) {\r\n                constraints.push(where('salePrice', '>=', filters.minPrice));\r\n            }\r\n            if (filters.maxPrice !== undefined) {\r\n                constraints.push(where('salePrice', '<=', filters.maxPrice));\r\n            }\r\n\r\n            // Apply ordering\r\n            if (filters.sortBy === 'price_asc') {\r\n                constraints.push(orderBy('salePrice', 'asc'));\r\n            } else if (filters.sortBy === 'price_desc') {\r\n                constraints.push(orderBy('salePrice', 'desc'));\r\n            } else {\r\n                constraints.push(orderBy('listedAt', 'desc'));\r\n            }\r\n\r\n            constraints.push(limit(50));\r\n\r\n            q = query(q, ...(constraints as any[]));\r\n            const querySnapshot = await getDocs(q);\r\n\r\n            // Fetch full card details\r\n            const listings = querySnapshot.docs.map(doc => ({ id: doc.id, ...(doc.data() as any) } as SpaceCardOwnership));\r\n            const cardsWithListings = await Promise.all(\r\n                listings.map(async (listing) => {\r\n                    const card = await SpaceCardService.getCard(listing.cardId);\r\n                    if (!card) return null;\r\n\r\n                    // Apply additional filters that can't be done in Firestore\r\n                    if (filters.rarity && card.rarity !== filters.rarity) return null;\r\n                    if (filters.discipline && card.discipline !== filters.discipline) return null;\r\n                    if (filters.editionType && card.editionType !== filters.editionType) return null;\r\n\r\n                    return { ...card, listing };\r\n                })\r\n            );\r\n\r\n            return cardsWithListings.filter(card => card !== null);\r\n        } catch (error) {\r\n            console.error('Error fetching marketplace:', error);\r\n            return [];\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Unlist a card from the marketplace\r\n     */\r\n    unlistCard: async (ownershipId: string): Promise<boolean> => {\r\n        try {\r\n            const ownershipRef = doc(db, 'spaceCardOwnership', ownershipId);\r\n            await updateDoc(ownershipRef, {\r\n                forSale: false,\r\n                salePrice: 0,\r\n                listedAt: null\r\n            });\r\n            return true;\r\n        } catch (error) {\r\n            console.error('Error unlisting card:', error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Get user's spacecards from the new user_spacecards collection\r\n     */\r\n    getUserSpaceCards: async (userId: string): Promise<any[]> => {\r\n        try {\r\n            const q = query(\r\n                collection(db, 'user_spacecards'),\r\n                where('userId', '==', userId),\r\n                orderBy('acquiredAt', 'desc')\r\n            );\r\n            const querySnapshot = await getDocs(q);\r\n\r\n            // Fetch full card details\r\n            const userCards = querySnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() } as any));\r\n            const cardsWithDetails = await Promise.all(\r\n                userCards.map(async (userCard: any) => {\r\n                    const card = await SpaceCardService.getCard(userCard.spacecardId);\r\n                    return { ...card, userCardEntry: userCard };\r\n                })\r\n            );\r\n\r\n            return cardsWithDetails;\r\n        } catch (error) {\r\n            console.error('Error fetching user spacecards:', error);\r\n            return [];\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Add a card to user's collection (user_spacecards)\r\n     */\r\n    addToUserCollection: async (userId: string, spacecardId: string, method: string = 'purchase'): Promise<boolean> => {\r\n        try {\r\n            await addDoc(collection(db, 'user_spacecards'), {\r\n                userId,\r\n                spacecardId,\r\n                method,\r\n                acquiredAt: serverTimestamp()\r\n            });\r\n            return true;\r\n        } catch (error) {\r\n            console.error('Error adding to user collection:', error);\r\n            throw error;\r\n        }\r\n    }\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\services\\WalletService.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Timestamp' is defined but never used. Allowed unused vars must match /^_/u.","line":13,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'DocumentData' is defined but never used. Allowed unused vars must match /^_/u.","line":14,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":22}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { db } from '@/firebase';\r\nimport {\r\n    doc,\r\n    getDoc,\r\n    runTransaction,\r\n    collection,\r\n    serverTimestamp,\r\n    query,\r\n    where,\r\n    orderBy,\r\n    getDocs,\r\n    limit,\r\n    Timestamp,\r\n    type DocumentData,\r\n    type Transaction as FirestoreTransaction\r\n} from 'firebase/firestore';\r\n\r\nexport interface Wallet {\r\n    balance: number;\r\n    lifetimeEarnings: number;\r\n    lifetimeSpent: number;\r\n    pendingPayout: number;\r\n    currency: string;\r\n}\r\n\r\nexport interface WalletTransaction {\r\n    id: string;\r\n    userId: string;\r\n    type: 'sale' | 'purchase' | 'deposit' | 'withdrawal' | 'royalty' | 'fee' | 'refund' | 'commission';\r\n    amount: number;\r\n    description: string;\r\n    relatedItemId?: string | null;\r\n    relatedItemType?: string | null;\r\n    createdAt: Date;\r\n}\r\n\r\nexport const WalletService = {\r\n    getWallet: async (userId: string): Promise<Wallet> => {\r\n        try {\r\n            const userDoc = await getDoc(doc(db, 'users', userId));\r\n            if (userDoc.exists()) {\r\n                const data = userDoc.data();\r\n                return (data.wallet as Wallet) || {\r\n                    balance: 0,\r\n                    lifetimeEarnings: 0,\r\n                    lifetimeSpent: 0,\r\n                    pendingPayout: 0,\r\n                    currency: 'USD'\r\n                };\r\n            }\r\n            // Return default wallet for non-existent users (or handle as error depending on logic)\r\n            return {\r\n                balance: 0,\r\n                lifetimeEarnings: 0,\r\n                lifetimeSpent: 0,\r\n                pendingPayout: 0,\r\n                currency: 'USD'\r\n            };\r\n        } catch (error) {\r\n            console.error(\"Error fetching wallet:\", error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Add funds to a user's wallet (e.g. from a sale or deposit)\r\n     */\r\n    addFunds: async (userId: string, amount: number, type: 'sale' | 'deposit' | 'royalty' | 'refund' | 'commission', description: string, relatedItemId: string | null = null, relatedItemType: string | null = null): Promise<boolean> => {\r\n        try {\r\n            await runTransaction(db, async (transaction: FirestoreTransaction) => {\r\n                const userRef = doc(db, 'users', userId);\r\n                const userDoc = await transaction.get(userRef);\r\n\r\n                if (!userDoc.exists()) {\r\n                    throw new Error(\"User does not exist!\");\r\n                }\r\n\r\n                const userData = userDoc.data();\r\n                const currentWallet: Wallet = (userData.wallet as Wallet) || {\r\n                    balance: 0,\r\n                    lifetimeEarnings: 0,\r\n                    lifetimeSpent: 0,\r\n                    pendingPayout: 0,\r\n                    currency: 'USD'\r\n                };\r\n\r\n                const newBalance = (currentWallet.balance || 0) + amount;\r\n                const newLifetimeEarnings = type === 'sale' || type === 'royalty' || type === 'commission'\r\n                    ? (currentWallet.lifetimeEarnings || 0) + amount\r\n                    : (currentWallet.lifetimeEarnings || 0);\r\n\r\n                // Update User Wallet\r\n                transaction.update(userRef, {\r\n                    wallet: {\r\n                        ...currentWallet,\r\n                        balance: newBalance,\r\n                        lifetimeEarnings: newLifetimeEarnings\r\n                    }\r\n                });\r\n\r\n                // Create Transaction Record\r\n                const transactionRef = doc(collection(db, 'transactions'));\r\n                transaction.set(transactionRef, {\r\n                    userId,\r\n                    type,\r\n                    amount,\r\n                    description,\r\n                    relatedItemId,\r\n                    relatedItemType,\r\n                    createdAt: serverTimestamp()\r\n                });\r\n            });\r\n            return true;\r\n        } catch (error) {\r\n            console.error(\"Error adding funds:\", error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Subtract funds from a user's wallet (e.g. purchase or withdrawal)\r\n     */\r\n    subtractFunds: async (userId: string, amount: number, type: 'purchase' | 'withdrawal' | 'fee', description: string, relatedItemId: string | null = null, relatedItemType: string | null = null): Promise<boolean> => {\r\n        try {\r\n            await runTransaction(db, async (transaction: FirestoreTransaction) => {\r\n                const userRef = doc(db, 'users', userId);\r\n                const userDoc = await transaction.get(userRef);\r\n\r\n                if (!userDoc.exists()) {\r\n                    throw new Error(\"User does not exist!\");\r\n                }\r\n\r\n                const userData = userDoc.data();\r\n                const currentWallet: Wallet = (userData.wallet as Wallet) || {\r\n                    balance: 0,\r\n                    lifetimeEarnings: 0,\r\n                    lifetimeSpent: 0,\r\n                    pendingPayout: 0,\r\n                    currency: 'USD'\r\n                };\r\n\r\n                if (currentWallet.balance < amount) {\r\n                    throw new Error(\"Insufficient funds\");\r\n                }\r\n\r\n                const newBalance = currentWallet.balance - amount;\r\n                const newLifetimeSpent = type === 'purchase'\r\n                    ? (currentWallet.lifetimeSpent || 0) + amount\r\n                    : (currentWallet.lifetimeSpent || 0);\r\n\r\n                // Update User Wallet\r\n                transaction.update(userRef, {\r\n                    wallet: {\r\n                        ...currentWallet,\r\n                        balance: newBalance,\r\n                        lifetimeSpent: newLifetimeSpent\r\n                    }\r\n                });\r\n\r\n                // Create Transaction Record\r\n                const transactionRef = doc(collection(db, 'transactions'));\r\n                transaction.set(transactionRef, {\r\n                    userId,\r\n                    type,\r\n                    amount: -amount, // Store as negative for spending\r\n                    description,\r\n                    relatedItemId,\r\n                    relatedItemType,\r\n                    createdAt: serverTimestamp()\r\n                });\r\n            });\r\n            return true;\r\n        } catch (error) {\r\n            console.error(\"Error subtracting funds:\", error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Process a purchase transaction (Primary Sale)\r\n     * Splits: 100% to seller (minus potential platform fees if we add them later, currently 0 for primary)\r\n     */\r\n    processPrimaryPurchase: async (buyerId: string, sellerId: string, itemId: string, itemType: string, price: number, title: string): Promise<boolean> => {\r\n        try {\r\n            // 1. Deduct from Buyer\r\n            await WalletService.subtractFunds(buyerId, price, 'purchase', `Purchased ${title}`, itemId, itemType);\r\n\r\n            // 2. Add to Seller\r\n            await WalletService.addFunds(sellerId, price, 'sale', `Sold ${title}`, itemId, itemType);\r\n\r\n            return true;\r\n        } catch (error) {\r\n            console.error(\"Error processing primary purchase:\", error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Process a Resale transaction\r\n     * Splits:\r\n     * - Platform Fee: 10% (configurable)\r\n     * - Artist Royalty: 5% (configurable)\r\n     * - Seller: Remainder\r\n     */\r\n    processResale: async (buyerId: string, sellerId: string, originalArtistId: string, itemId: string, itemType: string, price: number, title: string): Promise<boolean> => {\r\n        const PLATFORM_FEE_PERCENT = 0.10;\r\n        const ARTIST_ROYALTY_PERCENT = 0.05;\r\n\r\n        const platformFee = price * PLATFORM_FEE_PERCENT;\r\n        const artistRoyalty = price * ARTIST_ROYALTY_PERCENT;\r\n        const sellerNet = price - platformFee - artistRoyalty;\r\n\r\n        try {\r\n            // 1. Deduct full amount from Buyer\r\n            await WalletService.subtractFunds(buyerId, price, 'purchase', `Purchased resale: ${title}`, itemId, itemType);\r\n\r\n            // 2. Add Net to Seller\r\n            await WalletService.addFunds(sellerId, sellerNet, 'sale', `Sold resale: ${title}`, itemId, itemType);\r\n\r\n            // 3. Add Royalty to Original Artist\r\n            if (originalArtistId && originalArtistId !== sellerId) {\r\n                await WalletService.addFunds(originalArtistId, artistRoyalty, 'royalty', `Royalty from resale of ${title}`, itemId, itemType);\r\n            }\r\n\r\n            // 4. Platform Fee (Tracked in a system wallet or just deducted from circulation)\r\n            // For now, we just don't pay it out to anyone, effectively burning it or keeping it in the system.\r\n            // In a real app, we'd add it to a 'platform' user wallet.\r\n\r\n            return true;\r\n        } catch (error) {\r\n            console.error(\"Error processing resale:\", error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Process a Commission Payment\r\n     * Splits: 100% to seller (for now)\r\n     */\r\n    processCommissionPayment: async (buyerId: string, sellerId: string, commissionId: string, price: number, title: string): Promise<boolean> => {\r\n        try {\r\n            // 1. Deduct from Buyer\r\n            await WalletService.subtractFunds(buyerId, price, 'purchase', `Commission Payment: ${title}`, commissionId, 'commission');\r\n\r\n            // 2. Add to Seller\r\n            await WalletService.addFunds(sellerId, price, 'commission', `Commission Earned: ${title}`, commissionId, 'commission');\r\n\r\n            return true;\r\n        } catch (error) {\r\n            console.error(\"Error processing commission payment:\", error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Get transaction history for a user\r\n     */\r\n    getTransactions: async (userId: string): Promise<WalletTransaction[]> => {\r\n        try {\r\n            const q = query(\r\n                collection(db, 'transactions'),\r\n                where('userId', '==', userId),\r\n                orderBy('createdAt', 'desc'),\r\n                limit(50)\r\n            );\r\n            const querySnapshot = await getDocs(q);\r\n            return querySnapshot.docs.map(doc => {\r\n                const data = doc.data();\r\n                return {\r\n                    id: doc.id,\r\n                    ...data,\r\n                    createdAt: data.createdAt?.toDate()\r\n                } as WalletTransaction;\r\n            });\r\n        } catch (error) {\r\n            console.error(\"Error fetching transactions:\", error);\r\n            return [];\r\n        }\r\n    }\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\services\\contestService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\services\\magazineService.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'DocumentData' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":121,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":133},{"ruleId":"prefer-const","severity":2,"message":"'nextDate' is never reassigned. Use 'const' instead.","line":154,"column":9,"nodeType":"Identifier","messageId":"useConst","endLine":154,"endColumn":17,"fix":{"range":[4507,4533],"text":"const nextDate = new Date();"}},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'lastDoc' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":181,"column":73,"nodeType":"Identifier","messageId":"unusedVar","endLine":181,"endColumn":85}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":1,"fixableWarningCount":0,"source":"import { db } from '@/firebase';\r\nimport { collection, addDoc, doc, getDoc, updateDoc, deleteDoc, query, where, getDocs, serverTimestamp, orderBy, limit, DocumentData } from 'firebase/firestore';\r\n\r\nexport interface Magazine {\r\n    id: string;\r\n    type: 'magazine';\r\n    title?: string;\r\n    description?: string;\r\n    coverImage?: string;\r\n    ownerId: string;\r\n    galleryId?: string;\r\n    issueCount: number;\r\n    visibility: 'public' | 'private';\r\n    releaseFrequency?: 'monthly' | 'bi-monthly' | string;\r\n    releaseDay?: number;\r\n    releaseTime?: string;\r\n    createdAt?: any;\r\n    updatedAt?: any;\r\n    [key: string]: any;\r\n}\r\n\r\nexport interface MagazineIssue {\r\n    id: string;\r\n    magazineId: string;\r\n    title?: string;\r\n    issueNumber: number;\r\n    status: 'draft' | 'queued' | 'published';\r\n    createdAt?: any;\r\n    publishedAt?: any;\r\n    updatedAt?: any;\r\n    [key: string]: any;\r\n}\r\n\r\n/**\r\n * Create a new magazine\r\n */\r\nexport const createMagazine = async (magazineData: Partial<Magazine>): Promise<Magazine> => {\r\n    try {\r\n        const magazineRef = collection(db, 'magazines');\r\n\r\n        const newMagazine = {\r\n            ...magazineData,\r\n            type: 'magazine',\r\n            issueCount: 0,\r\n            createdAt: serverTimestamp(),\r\n            updatedAt: serverTimestamp()\r\n        };\r\n\r\n        const docRef = await addDoc(magazineRef, newMagazine);\r\n        return { id: docRef.id, ...newMagazine } as Magazine;\r\n    } catch (error) {\r\n        console.error('Error creating magazine:', error);\r\n        throw error;\r\n    }\r\n};\r\n\r\n/**\r\n * Get a magazine by ID\r\n */\r\nexport const getMagazine = async (magazineId: string): Promise<Magazine> => {\r\n    try {\r\n        const magazineRef = doc(db, 'magazines', magazineId);\r\n        const magazineSnap = await getDoc(magazineRef);\r\n\r\n        if (magazineSnap.exists()) {\r\n            return { id: magazineSnap.id, ...magazineSnap.data() } as Magazine;\r\n        } else {\r\n            throw new Error('Magazine not found');\r\n        }\r\n    } catch (error) {\r\n        console.error('Error getting magazine:', error);\r\n        throw error;\r\n    }\r\n};\r\n\r\n/**\r\n * Update a magazine\r\n */\r\nexport const updateMagazine = async (magazineId: string, updates: Partial<Magazine>): Promise<void> => {\r\n    try {\r\n        const magazineRef = doc(db, 'magazines', magazineId);\r\n        await updateDoc(magazineRef, {\r\n            ...updates,\r\n            updatedAt: serverTimestamp()\r\n        });\r\n    } catch (error) {\r\n        console.error('Error updating magazine:', error);\r\n        throw error;\r\n    }\r\n};\r\n\r\n/**\r\n * Delete a magazine\r\n */\r\nexport const deleteMagazine = async (magazineId: string): Promise<void> => {\r\n    try {\r\n        const magazineRef = doc(db, 'magazines', magazineId);\r\n        await deleteDoc(magazineRef);\r\n    } catch (error) {\r\n        console.error('Error deleting magazine:', error);\r\n        throw error;\r\n    }\r\n};\r\n\r\n/**\r\n * Get magazines by owner\r\n */\r\nexport const getMagazinesByOwner = async (ownerId: string): Promise<Magazine[]> => {\r\n    try {\r\n        const magazinesRef = collection(db, 'magazines');\r\n        const q = query(\r\n            magazinesRef,\r\n            where('ownerId', '==', ownerId),\r\n            orderBy('createdAt', 'desc')\r\n        );\r\n\r\n        const querySnapshot = await getDocs(q);\r\n        return querySnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() } as Magazine));\r\n    } catch (error) {\r\n        console.error('Error getting magazines by owner:', error);\r\n        throw error;\r\n    }\r\n};\r\n\r\n/**\r\n * Get magazines by gallery\r\n */\r\nexport const getMagazinesByGallery = async (galleryId: string): Promise<Magazine[]> => {\r\n    try {\r\n        const magazinesRef = collection(db, 'magazines');\r\n        const q = query(\r\n            magazinesRef,\r\n            where('galleryId', '==', galleryId),\r\n            orderBy('createdAt', 'desc')\r\n        );\r\n\r\n        const querySnapshot = await getDocs(q);\r\n        return querySnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() } as Magazine));\r\n    } catch (error) {\r\n        console.error('Error getting magazines by gallery:', error);\r\n        throw error;\r\n    }\r\n};\r\n\r\n/**\r\n * Calculate next release date based on frequency\r\n */\r\nexport const calculateNextReleaseDate = (releaseFrequency: string, releaseDay: number, releaseTime: string): Date => {\r\n    const now = new Date();\r\n    const parts = releaseTime.split(':').map(Number);\r\n    const hours = parts[0] || 0;\r\n    const minutes = parts[1] || 0;\r\n\r\n    let nextDate = new Date();\r\n\r\n    if (releaseFrequency === 'monthly') {\r\n        // For monthly, use the specified day of the month\r\n        nextDate.setDate(releaseDay);\r\n        nextDate.setHours(hours, minutes, 0, 0);\r\n\r\n        // If the date has passed this month, move to next month\r\n        if (nextDate <= now) {\r\n            nextDate.setMonth(nextDate.getMonth() + 1);\r\n        }\r\n    } else if (releaseFrequency === 'bi-monthly') {\r\n        // For bi-monthly, use the specified day but add 2 months\r\n        nextDate.setHours(hours, minutes, 0, 0);\r\n\r\n        // If the date has passed this month, move to next period (2 months)\r\n        if (nextDate <= now) {\r\n            nextDate.setMonth(nextDate.getMonth() + 2);\r\n        }\r\n    }\r\n\r\n    return nextDate;\r\n};\r\n\r\n/**\r\n * Search magazines\r\n */\r\nexport const searchMagazines = async (searchTerm: string | null = null, lastDoc: any = null, limitCount: number = 20): Promise<{ data: Magazine[], lastDoc: any }> => {\r\n    try {\r\n        const magazinesRef = collection(db, 'magazines');\r\n        let q;\r\n\r\n        if (searchTerm) {\r\n            // Search by title (case-insensitive search would require additional indexing)\r\n            q = query(\r\n                magazinesRef,\r\n                where('visibility', '==', 'public'),\r\n                orderBy('createdAt', 'desc'),\r\n                limit(limitCount)\r\n            );\r\n        } else {\r\n            q = query(\r\n                magazinesRef,\r\n                where('visibility', '==', 'public'),\r\n                orderBy('createdAt', 'desc'),\r\n                limit(limitCount)\r\n            );\r\n        }\r\n\r\n        const querySnapshot = await getDocs(q);\r\n        const magazines = querySnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() } as Magazine));\r\n        const lastVisible = querySnapshot.docs[querySnapshot.docs.length - 1];\r\n\r\n        return {\r\n            data: magazines,\r\n            lastDoc: lastVisible\r\n        };\r\n    } catch (error) {\r\n        console.error('Error searching magazines:', error);\r\n        throw error;\r\n    }\r\n};\r\n\r\n/**\r\n * Get issues for a magazine\r\n */\r\nexport const getMagazineIssues = async (magazineId: string, status: string | null = null): Promise<MagazineIssue[]> => {\r\n    try {\r\n        const issuesRef = collection(db, 'magazineIssues');\r\n        let q;\r\n\r\n        if (status) {\r\n            q = query(\r\n                issuesRef,\r\n                where('magazineId', '==', magazineId),\r\n                where('status', '==', status),\r\n                orderBy('issueNumber', 'desc')\r\n            );\r\n        } else {\r\n            q = query(\r\n                issuesRef,\r\n                where('magazineId', '==', magazineId),\r\n                orderBy('issueNumber', 'desc')\r\n            );\r\n        }\r\n\r\n        const querySnapshot = await getDocs(q);\r\n        return querySnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() } as MagazineIssue));\r\n    } catch (error) {\r\n        console.error('Error getting magazine issues:', error);\r\n        throw error;\r\n    }\r\n};\r\n\r\n/**\r\n * Get a single issue by ID\r\n */\r\nexport const getMagazineIssue = async (issueId: string): Promise<MagazineIssue> => {\r\n    try {\r\n        const issueRef = doc(db, 'magazineIssues', issueId);\r\n        const issueSnap = await getDoc(issueRef);\r\n\r\n        if (issueSnap.exists()) {\r\n            return { id: issueSnap.id, ...issueSnap.data() } as MagazineIssue;\r\n        } else {\r\n            throw new Error('Issue not found');\r\n        }\r\n    } catch (error) {\r\n        console.error('Error getting issue:', error);\r\n        throw error;\r\n    }\r\n};\r\n\r\n/**\r\n * Publish a queued issue\r\n */\r\nexport const publishIssue = async (issueId: string): Promise<MagazineIssue> => {\r\n    try {\r\n        const issueRef = doc(db, 'magazineIssues', issueId);\r\n        const issueSnap = await getDoc(issueRef);\r\n\r\n        if (!issueSnap.exists()) {\r\n            throw new Error('Issue not found');\r\n        }\r\n\r\n        const issue = issueSnap.data();\r\n\r\n        // Update issue status\r\n        await updateDoc(issueRef, {\r\n            status: 'published',\r\n            publishedAt: serverTimestamp(),\r\n            updatedAt: serverTimestamp()\r\n        });\r\n\r\n        // Update magazine issue count\r\n        const magazineRef = doc(db, 'magazines', issue.magazineId);\r\n        await updateDoc(magazineRef, {\r\n            issueCount: (issue.issueNumber || 1),\r\n            updatedAt: serverTimestamp()\r\n        });\r\n\r\n        return { id: issueId, ...issue, status: 'published' } as MagazineIssue;\r\n    } catch (error) {\r\n        console.error('Error publishing issue:', error);\r\n        throw error;\r\n    }\r\n};\r\n\r\n/**\r\n * Delete an issue\r\n */\r\nexport const deleteIssue = async (issueId: string): Promise<void> => {\r\n    try {\r\n        const issueRef = doc(db, 'magazineIssues', issueId);\r\n        await deleteDoc(issueRef);\r\n    } catch (error) {\r\n        console.error('Error deleting issue:', error);\r\n        throw error;\r\n    }\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\services\\notificationService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\services\\pod.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'calculateEarnings' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":43},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'address' is defined but never used. Allowed unused args must match /^_/u.","line":45,"column":30,"nodeType":"Identifier","messageId":"unusedVar","endLine":45,"endColumn":42},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'orderData' is defined but never used. Allowed unused args must match /^_/u.","line":52,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":52,"endColumn":39}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { PRINT_PRODUCTS, calculateEarnings, type ProductDefinition as PrintProduct } from '@/domain/shop/pricing';\r\n\r\n// Re-export from single source of truth\r\nexport const PRINT_SIZES = PRINT_PRODUCTS;\r\n\r\n// Adapter for calculatePrice to match old signature if needed, \r\n// or just use calculateEarnings logic\r\nexport const calculatePrice = (basePrice: number, markup: number = 30): number => {\r\n    const price = basePrice * (1 + markup / 100);\r\n    return Math.ceil(price * 100) / 100;\r\n};\r\n\r\nexport interface PODProductResponse {\r\n    id: string;\r\n    status: string;\r\n    products: any[];\r\n}\r\n\r\nexport interface ShippingRate {\r\n    id: string;\r\n    name: string;\r\n    price: number;\r\n    days: string;\r\n}\r\n\r\nexport interface OrderResponse {\r\n    orderId: string;\r\n    status: string;\r\n    estimatedDelivery: string;\r\n}\r\n\r\nexport const mockPODIntegration = {\r\n    createProduct: async (designUrl: string, products: any[]): Promise<PODProductResponse> => {\r\n        // Creating POD product with design\r\n        return {\r\n            id: `pod_${Date.now()}`,\r\n            status: 'created',\r\n            products: products.map(p => ({\r\n                ...p,\r\n                externalId: `ext_${p.variantId}_${Date.now()}`\r\n            }))\r\n        };\r\n    },\r\n\r\n    getShippingRates: async (address: any): Promise<ShippingRate[]> => {\r\n        return [\r\n            { id: 'standard', name: 'Standard Shipping', price: 5.99, days: '5-7' },\r\n            { id: 'express', name: 'Express Shipping', price: 12.99, days: '2-3' }\r\n        ];\r\n    },\r\n\r\n    submitOrder: async (orderData: any): Promise<OrderResponse> => {\r\n        // Submitting POD order\r\n        return {\r\n            orderId: `ord_${Date.now()}`,\r\n            status: 'processing',\r\n            estimatedDelivery: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString()\r\n        };\r\n    }\r\n};\r\n\r\n// Helper to get print size details\r\nexport const getPrintSizeDetails = (sizeId: string): PrintProduct | undefined => {\r\n    return PRINT_SIZES.find(s => s.id === sizeId);\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\services\\printifyApi.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\services\\projectService.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'where' is defined but never used. Allowed unused vars must match /^_/u.","line":10,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":10},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'DocumentData' is defined but never used. Allowed unused vars must match /^_/u.","line":16,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":17}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\r\n    collection,\r\n    doc,\r\n    getDoc,\r\n    getDocs,\r\n    addDoc,\r\n    updateDoc,\r\n    deleteDoc,\r\n    query,\r\n    where,\r\n    orderBy,\r\n    serverTimestamp,\r\n    arrayUnion,\r\n    arrayRemove,\r\n    increment,\r\n    DocumentData\r\n} from 'firebase/firestore';\r\nimport { db } from '@/firebase';\r\n\r\nexport interface Contributor {\r\n    uid: string;\r\n    displayName: string;\r\n    role: string;\r\n}\r\n\r\nexport interface Project {\r\n    id: string;\r\n    studioId?: string;\r\n    studioTitle?: string;\r\n    title: string;\r\n    description: string;\r\n    contributors: Contributor[];\r\n    roles: string[];\r\n    postIds: string[];\r\n    isTemporary: boolean;\r\n    createdBy: string;\r\n    createdAt?: any;\r\n    updatedAt?: any;\r\n    followersCount: number;\r\n    postsCount: number;\r\n    followers?: string[];\r\n    [key: string]: any;\r\n}\r\n\r\n/**\r\n * Project Service\r\n * Manages projects within studios (galleries)\r\n * Structure: Studio ΓåÆ Projects ΓåÆ Posts\r\n */\r\n\r\n/**\r\n * Create a new project within a studio\r\n */\r\nexport const createProject = async (studioId: string, projectData: Partial<Project>): Promise<Project> => {\r\n    try {\r\n        const projectRef = collection(db, 'galleries', studioId, 'projects');\r\n\r\n        const newProject = {\r\n            title: projectData.title,\r\n            description: projectData.description || '',\r\n            contributors: projectData.contributors || [],\r\n            roles: projectData.roles || [],\r\n            postIds: projectData.postIds || [],\r\n            isTemporary: projectData.isTemporary || false,\r\n            createdBy: projectData.createdBy,\r\n            createdAt: serverTimestamp(),\r\n            updatedAt: serverTimestamp(),\r\n            followersCount: 0,\r\n            postsCount: 0\r\n        };\r\n\r\n        const docRef = await addDoc(projectRef, newProject);\r\n\r\n        return {\r\n            id: docRef.id,\r\n            ...(newProject as any)\r\n        } as Project;\r\n    } catch (error) {\r\n        console.error('Error creating project:', error);\r\n        throw error;\r\n    }\r\n};\r\n\r\n/**\r\n * Get a single project by ID\r\n */\r\nexport const getProject = async (studioId: string, projectId: string): Promise<Project> => {\r\n    try {\r\n        const projectRef = doc(db, 'galleries', studioId, 'projects', projectId);\r\n        const projectSnap = await getDoc(projectRef);\r\n\r\n        if (projectSnap.exists()) {\r\n            return {\r\n                id: projectSnap.id,\r\n                studioId,\r\n                ...projectSnap.data()\r\n            } as Project;\r\n        } else {\r\n            throw new Error('Project not found');\r\n        }\r\n    } catch (error) {\r\n        console.error('Error getting project:', error);\r\n        throw error;\r\n    }\r\n};\r\n\r\n/**\r\n * Get all projects for a studio\r\n */\r\nexport const getStudioProjects = async (studioId: string): Promise<Project[]> => {\r\n    try {\r\n        const projectsRef = collection(db, 'galleries', studioId, 'projects');\r\n        const q = query(projectsRef, orderBy('createdAt', 'desc'));\r\n        const snapshot = await getDocs(q);\r\n\r\n        return snapshot.docs.map(doc => ({\r\n            id: doc.id,\r\n            studioId,\r\n            ...doc.data()\r\n        } as Project));\r\n    } catch (error) {\r\n        console.error('Error getting studio projects:', error);\r\n        throw error;\r\n    }\r\n};\r\n\r\n/**\r\n * Get projects where user is a contributor\r\n */\r\nexport const getUserProjects = async (userId: string): Promise<Project[]> => {\r\n    try {\r\n        // Note: This requires a composite index on contributors array\r\n        // We'll need to query all galleries and filter\r\n        // For better performance, consider maintaining a separate user-projects collection\r\n\r\n        const galleriesRef = collection(db, 'galleries');\r\n        const galleriesSnap = await getDocs(galleriesRef);\r\n\r\n        const allProjects: Project[] = [];\r\n\r\n        for (const galleryDoc of galleriesSnap.docs) {\r\n            const projectsRef = collection(db, 'galleries', galleryDoc.id, 'projects');\r\n            const projectsSnap = await getDocs(projectsRef);\r\n\r\n            projectsSnap.docs.forEach(projectDoc => {\r\n                const projectData = projectDoc.data();\r\n                const isContributor = projectData.contributors?.some((c: Contributor) => c.uid === userId);\r\n\r\n                if (isContributor) {\r\n                    allProjects.push({\r\n                        id: projectDoc.id,\r\n                        studioId: galleryDoc.id,\r\n                        studioTitle: galleryDoc.data().title,\r\n                        ...projectData\r\n                    } as Project);\r\n                }\r\n            });\r\n        }\r\n\r\n        return allProjects;\r\n    } catch (error) {\r\n        console.error('Error getting user projects:', error);\r\n        throw error;\r\n    }\r\n};\r\n\r\n/**\r\n * Update project details\r\n */\r\nexport const updateProject = async (studioId: string, projectId: string, updates: Partial<Project>): Promise<void> => {\r\n    try {\r\n        const projectRef = doc(db, 'galleries', studioId, 'projects', projectId);\r\n\r\n        await updateDoc(projectRef, {\r\n            ...updates,\r\n            updatedAt: serverTimestamp()\r\n        });\r\n    } catch (error) {\r\n        console.error('Error updating project:', error);\r\n        throw error;\r\n    }\r\n};\r\n\r\n/**\r\n * Add a contributor to a project\r\n */\r\nexport const addContributor = async (studioId: string, projectId: string, contributor: Contributor): Promise<void> => {\r\n    try {\r\n        const projectRef = doc(db, 'galleries', studioId, 'projects', projectId);\r\n\r\n        await updateDoc(projectRef, {\r\n            contributors: arrayUnion(contributor),\r\n            updatedAt: serverTimestamp()\r\n        });\r\n    } catch (error) {\r\n        console.error('Error adding contributor:', error);\r\n        throw error;\r\n    }\r\n};\r\n\r\n/**\r\n * Remove a contributor from a project\r\n */\r\nexport const removeContributor = async (studioId: string, projectId: string, contributor: Contributor): Promise<void> => {\r\n    try {\r\n        const projectRef = doc(db, 'galleries', studioId, 'projects', projectId);\r\n\r\n        await updateDoc(projectRef, {\r\n            contributors: arrayRemove(contributor),\r\n            updatedAt: serverTimestamp()\r\n        });\r\n    } catch (error) {\r\n        console.error('Error removing contributor:', error);\r\n        throw error;\r\n    }\r\n};\r\n\r\n/**\r\n * Add a post to a project\r\n */\r\nexport const addPostToProject = async (studioId: string, projectId: string, postId: string): Promise<void> => {\r\n    try {\r\n        const projectRef = doc(db, 'galleries', studioId, 'projects', projectId);\r\n\r\n        await updateDoc(projectRef, {\r\n            postIds: arrayUnion(postId),\r\n            postsCount: increment(1), // Fixed: Use increment instead of invalid arrayUnion(...).length\r\n            updatedAt: serverTimestamp()\r\n        });\r\n    } catch (error) {\r\n        console.error('Error adding post to project:', error);\r\n        throw error;\r\n    }\r\n};\r\n\r\n/**\r\n * Remove a post from a project\r\n */\r\nexport const removePostFromProject = async (studioId: string, projectId: string, postId: string): Promise<void> => {\r\n    try {\r\n        const projectRef = doc(db, 'galleries', studioId, 'projects', projectId);\r\n\r\n        await updateDoc(projectRef, {\r\n            postIds: arrayRemove(postId),\r\n            postsCount: increment(-1),\r\n            updatedAt: serverTimestamp()\r\n        });\r\n    } catch (error) {\r\n        console.error('Error removing post from project:', error);\r\n        throw error;\r\n    }\r\n};\r\n\r\n/**\r\n * Delete a project\r\n */\r\nexport const deleteProject = async (studioId: string, projectId: string): Promise<void> => {\r\n    try {\r\n        const projectRef = doc(db, 'galleries', studioId, 'projects', projectId);\r\n        await deleteDoc(projectRef);\r\n    } catch (error) {\r\n        console.error('Error deleting project:', error);\r\n        throw error;\r\n    }\r\n};\r\n\r\n/**\r\n * Follow/unfollow a project\r\n */\r\nexport const toggleProjectFollow = async (studioId: string, projectId: string, userId: string, follow: boolean): Promise<void> => {\r\n    try {\r\n        const projectRef = doc(db, 'galleries', studioId, 'projects', projectId);\r\n        const userRef = doc(db, 'users', userId);\r\n\r\n        if (follow) {\r\n            await updateDoc(projectRef, {\r\n                followers: arrayUnion(userId),\r\n                followersCount: increment(1) // Fixed: Use increment\r\n            });\r\n\r\n            await updateDoc(userRef, {\r\n                followingProjects: arrayUnion(`${studioId}/${projectId}`)\r\n            });\r\n        } else {\r\n            await updateDoc(projectRef, {\r\n                followers: arrayRemove(userId),\r\n                followersCount: increment(-1)\r\n            });\r\n\r\n            await updateDoc(userRef, {\r\n                followingProjects: arrayRemove(`${studioId}/${projectId}`)\r\n            });\r\n        }\r\n    } catch (error) {\r\n        console.error('Error toggling project follow:', error);\r\n        throw error;\r\n    }\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\services\\reportService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\services\\submissionService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\test\\createPost.test.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'vi' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":32,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":34},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'beforeEach' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":36,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":46}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * CreatePost Integration Tests\r\n * Ensures all critical paths work correctly: uploads, validation, Firestore writes\r\n */\r\n\r\nimport { describe, it, expect, vi, beforeEach } from 'vitest';\r\nimport { calculateEarnings } from '@/domain/shop/pricing';\r\nimport { formatPrice } from '@/domain/shop/pricing';\r\n\r\ndescribe('CreatePost Data Flow', () => {\r\n    describe('Price Formatting', () => {\r\n        it('should handle all edge cases safely', () => {\r\n            expect(formatPrice(24.99)).toBe('$24.99');\r\n            expect(formatPrice(0)).toBe('$0.00');\r\n            expect(formatPrice(null)).toBe('$0.00');\r\n            expect(formatPrice(undefined)).toBe('$0.00');\r\n            expect(formatPrice(NaN)).toBe('$0.00');\r\n            expect(formatPrice('invalid')).toBe('$0.00');\r\n            expect(formatPrice('')).toBe('$0.00');\r\n        });\r\n    });\r\n\r\n    describe('Earnings Calculation', () => {\r\n        it('should never return NaN', () => {\r\n            const earnings1 = calculateEarnings(0, '8x10');\r\n            expect(earnings1.artistEarningsCents).toBeDefined();\r\n            expect(earnings1.platformCutCents).toBeDefined();\r\n            expect(Number.isNaN(earnings1.artistEarningsCents)).toBe(false);\r\n\r\n            const earnings2 = calculateEarnings(24.99, '8x10');\r\n            expect(earnings2.artistEarningsCents).toBeGreaterThan(0);\r\n            expect(earnings2.platformCutCents).toBeGreaterThan(0);\r\n        });\r\n\r\n        it('should handle prices below base cost', () => {\r\n            const earnings = calculateEarnings(5, '8x10'); // Below $12 base\r\n            expect(earnings.artistEarningsCents).toBe(0);\r\n            expect(earnings.platformCutCents).toBe(0);\r\n        });\r\n    });\r\n\r\n    describe('Slide Data Validation', () => {\r\n        it('should ensure required fields are present', () => {\r\n            const mockSlide = {\r\n                type: 'image',\r\n                file: new File([''], 'test.jpg', { type: 'image/jpeg' }),\r\n                caption: '',\r\n                addToShop: false,\r\n                printSizes: [],\r\n                customPrices: {},\r\n                exif: null,\r\n                manualExif: null\r\n            };\r\n\r\n            expect(mockSlide.type).toBe('image');\r\n            expect(mockSlide.addToShop).toBe(false);\r\n            expect(mockSlide.printSizes).toEqual([]);\r\n            expect(mockSlide.customPrices).toEqual({});\r\n        });\r\n\r\n        it('should handle missing optional fields', () => {\r\n            const mockSlide = {\r\n                type: 'image',\r\n                file: new File([''], 'test.jpg'),\r\n                caption: undefined,\r\n                addToShop: undefined,\r\n                printSizes: undefined,\r\n                customPrices: undefined\r\n            };\r\n\r\n            const caption = mockSlide.caption || '';\r\n            const addToShop = mockSlide.addToShop || false;\r\n            const printSizes = mockSlide.printSizes || [];\r\n            const customPrices = mockSlide.customPrices || {};\r\n\r\n            expect(caption).toBe('');\r\n            expect(addToShop).toBe(false);\r\n            expect(printSizes).toEqual([]);\r\n            expect(customPrices).toEqual({});\r\n        });\r\n    });\r\n\r\n    describe('Firestore Document Structure', () => {\r\n        it('should validate post document has all required fields', () => {\r\n            const mockPostDoc = {\r\n                userId: 'test-user-id',\r\n                username: 'Test User',\r\n                profileImage: '',\r\n                title: 'Test Post',\r\n                tags: [],\r\n                location: null,\r\n                images: [],\r\n                searchKeywords: [],\r\n                createdAt: new Date(),\r\n                updatedAt: new Date(),\r\n                likeCount: 0,\r\n                commentCount: 0,\r\n                addToShop: false\r\n            };\r\n\r\n            expect(mockPostDoc.userId).toBeDefined();\r\n            expect(mockPostDoc.createdAt).toBeDefined();\r\n            expect(mockPostDoc.images).toBeDefined();\r\n            expect(Array.isArray(mockPostDoc.images)).toBe(true);\r\n        });\r\n\r\n        it('should ensure shop items have correct structure', () => {\r\n            const mockShopItem = {\r\n                userId: 'test-user-id',\r\n                authorId: 'test-user-id',\r\n                authorName: 'Test User',\r\n                title: 'Test Item',\r\n                imageUrl: 'https://example.com/image.jpg',\r\n                printSizes: [],\r\n                available: true,\r\n                createdAt: new Date(),\r\n                tags: [],\r\n                searchKeywords: []\r\n            };\r\n\r\n            expect(mockShopItem.userId).toBeDefined();\r\n            expect(mockShopItem.authorId).toBeDefined();\r\n            expect(mockShopItem.createdAt).toBeDefined();\r\n        });\r\n    });\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\test\\feed.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\test\\pricing.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\test\\setup.ts","messages":[{"ruleId":"no-undef","severity":1,"message":"'vi' is not defined.","line":15,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":15,"endColumn":3},{"ruleId":"no-undef","severity":1,"message":"'vi' is not defined.","line":25,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":25,"endColumn":14},{"ruleId":"no-undef","severity":1,"message":"'vi' is not defined.","line":29,"column":22,"nodeType":"Identifier","messageId":"undef","endLine":29,"endColumn":24},{"ruleId":"no-undef","severity":1,"message":"'vi' is not defined.","line":30,"column":25,"nodeType":"Identifier","messageId":"undef","endLine":30,"endColumn":27},{"ruleId":"no-undef","severity":1,"message":"'vi' is not defined.","line":31,"column":27,"nodeType":"Identifier","messageId":"undef","endLine":31,"endColumn":29},{"ruleId":"no-undef","severity":1,"message":"'vi' is not defined.","line":32,"column":30,"nodeType":"Identifier","messageId":"undef","endLine":32,"endColumn":32},{"ruleId":"no-undef","severity":1,"message":"'vi' is not defined.","line":33,"column":24,"nodeType":"Identifier","messageId":"undef","endLine":33,"endColumn":26}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Vitest Test Setup\r\n */\r\n\r\nimport '@testing-library/jest-dom';\r\nimport { cleanup } from '@testing-library/react';\r\nimport { afterEach } from 'vitest';\r\n\r\n// Cleanup after each test\r\nafterEach(() => {\r\n    cleanup();\r\n});\r\n\r\n// Mock Firebase\r\nvi.mock('../firebase', () => ({\r\n    auth: {},\r\n    db: {},\r\n    storage: {},\r\n    functions: {},\r\n}));\r\n\r\n// Mock window.matchMedia\r\nObject.defineProperty(window, 'matchMedia', {\r\n    writable: true,\r\n    value: vi.fn().mockImplementation(query => ({\r\n        matches: false,\r\n        media: query,\r\n        onchange: null,\r\n        addListener: vi.fn(),\r\n        removeListener: vi.fn(),\r\n        addEventListener: vi.fn(),\r\n        removeEventListener: vi.fn(),\r\n        dispatchEvent: vi.fn(),\r\n    })),\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\utils\\convertSearchInput.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\utils\\emojiToCodeMap.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\utils\\usernameRenderer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\PANOSPACE MASTER\\Panospace\\src\\vite-env.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
