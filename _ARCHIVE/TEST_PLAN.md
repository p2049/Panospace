# PanoSpace - 10-Step Verification & Test Plan

## Overview
This document provides a systematic testing approach to verify all PanoSpace functionality works correctly after deployment. Follow these steps in order.

---

## PHASE 1: STABILITY & CORE FUNCTIONALITY

### ✅ Test 1: Black Screen Fix Verification

**Objective**: Ensure no posts display black screens

**Steps**:
1. Open app at http://localhost:5173 (dev) or your hosting URL
2. Navigate to Feed
3. Scroll through at least 10 posts
4. For each post that appears:
   - Verify image loads or shows placeholder text
   - Click/tap on author overlay → should navigate to profile
   - If post has multiple slides, swipe left/right

**Success Criteria**:
- ✅ No completely black screens
- ✅ Missing images show "Image unavailable" or "No content available"
- ✅ No console errors related to image rendering
- ✅ Modal/fullscreen viewer opens and displays content

**Failure Indicators**:
- ❌ Completely black screen when opening post
- ❌ Console error: "Cannot read property 'url' of undefined"
- ❌ App crashes when viewing specific posts

---

### ✅ Test 2: Post Creation End-to-End

**Objective**: Create a new post and verify all data saves correctly

**Steps**:
1. Click "+" button or navigate to `/create-post`
2. Upload an image file (JPEG or PNG, < 10MB)
3. Add title: "Test Post [timestamp]"
4. Add tags: "photography", "test"
5 (Optional) Add location manually
6. Submit post

**Verify in Firebase Console**:
- Go to Firestore → `posts` collection
- Find your post (sort by `createdAt` desc)
- Check fields exist:
  - `authorId` = your UID
  - `authorName` = your display name
  - `imageUrl` = URL to uploaded image
  - `storagePath` = path in Firebase Storage
  - `tags` = ["photography", "test"]
  - `searchKeywords` = array of lowercase words
  - `likeCount` = 0
  - `createdAt` = timestamp
  - `updatedAt` = timestamp

**Success Criteria**:
- ✅ Post appears in Feed within 5 seconds
- ✅ All fields populated correctly in Firestore
- ✅ Image visible when opening post
- ✅ `searchKeywords` array auto-generated by Cloud Function

**Failure Indicators**:
- ❌ Upload stuck at "Uploading..."
- ❌ Post does not appear in Firestore
- ❌ `searchKeywords` field missing (Cloud Function failed)
- ❌ Image URL broken

---

### ✅ Test 3: Profile Page Display

**Objective**: Verify profile displays posts correctly with Portfolio/Shop tabs

**Steps**:
1. Navigate to `/profile/me` or click your profile icon
2. Verify "Portfolio" tab shows your posts as thumbnails
3. Click on a thumbnail → should open fullscreen viewer
4. Close viewer → should return to profile
5. Click "Shop" tab → should show empty state or shop items (if any)

**Success Criteria**:
- ✅ All posts display as thumbnails
- ✅ Thumbnails show first image from post
- ✅ Clicking thumbnail opens fullscreen viewer without black screen
- ✅ Shop tab accessible and displays correctly
- ✅ Stats show correct count (X Posts, Y Followers, Z Following)

**Failure Indicators**:
- ❌ Thumbnails show placeholder instead of actual images
- ❌ Black screen when clicking thumbnail
- ❌ Shop tab crashes or shows error

---

## PHASE 2: BACKEND & INTEGRATION

### ✅ Test 4: Cloud Functions Deployment

**Objective**: Verify all Cloud Functions deployed and executing

**Steps**:
1. Run: `firebase functions:log --lines 20`
2. Create a test post (from Test 2)
3. Wait 5 seconds
4. Run: `firebase functions:log --only onPostCreate --lines 10`

**Expected Log Output**:
```
Post created: [postId]
Post [postId] indexed in Algolia  // (if Algolia configured)
```

**Success Criteria**:
- ✅ Function logs appear in Firebase Console → Functions → Logs
- ✅ "Post created" message with your postId
- ✅ No error messages in logs
- ✅ (If Algolia configured) "indexed in Algolia" message

**Failure Indicators**:
- ❌ No logs appear (function not triggered)
- ❌ Error: "Function execution took too long"
- ❌ Error: "Missing or insufficient permissions"

---

### ✅ Test 5: Algolia Search Integration

**Objective**: Test search functionality (Algolia or Firestore fallback)

**Steps**:
1. Create 2-3 test posts with distinct titles:
   - "Sunset Photography California"
   - "Portrait Studio Shot"
   - "Street Art Berlin"
2. Wait 10 seconds for indexing
3. Navigate to Feed
4. Type "sunset" in search bar → press Enter or click Search
5. Verify "Sunset Photography" post appears in results
6. Type "berlin" → verify "Street Art Berlin" appears
7. Clear search → verify Feed resets to latest posts

**Success Criteria**:
- ✅ Search returns relevant posts
- ✅ Typing updates results dynamically (if implemented)
- ✅ No results for gibberish query "asdfghjkl"
- ✅ Firestore fallback works if Algolia not configured

**Expected Behavior**:
- If **Algolia configured**: Fuzzy matching, typos tolerated
- If **Firestore fallback**: Exact keyword matching only

**Failure Indicators**:
- ❌ Search returns empty results for posts that exist
- ❌ Search crashes app
- ❌ Console error: "Algolia index undefined"

---

### ✅ Test 6: Shop Item Creation & POD

**Objective**: Create a shop item and verify POD product generation

**Steps**:
1. Create or select an existing post
2. Navigate to `/shop` or Profile → Shop tab
3. Click "Create Shop Item" or "Link to Shop"
4. Select your post
5. Set print sizes and prices
6. Submit

**Verify in Firestore**:
- Go to Firestore → `shopItems` collection
- Find your shop item
- Check fields:
  - `ownerId` = your UID
  - `postRef` = reference to your post (if linked)
  - `title`, `description`, `imageUrl`
  - `podProductId` = starts with "mock_" or Printful ID
  - `podVariants` = array of size/price objects
  - `available` = true
  - `createdAt` = timestamp

**Success Criteria**:
- ✅ Shop item appears in Profile → Shop tab
- ✅ `podProductId` populated (mock or real)
- ✅ `podVariants` array has at least 1 size option
- ✅ "Buy Print" button displays on shop item

**Failure Indicators**:
- ❌ Shop item not saved to Firestore
- ❌ `podProductId` missing
- ❌ Error: "Failed to create product"

---

### ✅ Test 7: Follow/Unfollow Functionality

**Objective**: Test user following system

**Steps**:
1. Create a second test account (or use existing user profile)
2. Navigate to another user's profile (not your own)
3. Click "Follow" button
4. Verify button changes to "Following"
5. Navigate to Feed → "Following" tab
6. Verify followed user's posts appear
7. Go back to user's profile → Click "Following" button to unfollow
8. Verify Feed → "Following" shows empty or other followed users

**Verify in Firestore**:
- Go to Firestore → `follows` collection
- Should see document with ID: `{yourUID}_{otherUserUID}`
- Fields: `followerId`, `followingId`, `createdAt`

**Success Criteria**:
- ✅ Follow button toggles between "Follow" and "Following"
- ✅ Followed user's posts appear in Following tab
- ✅ Unfollow removes posts from Following tab
- ✅ Follower/Following counts update in profiles

**Failure Indicators**:
- ❌ Button does not toggle
- ❌ Posts don't appear in Following tab
- ❌ Error: "Missing or insufficient permissions" (Security rules issue)

---

## PHASE 3: UX & EDGE CASES

### ✅ Test 8: Like/Unlike & Count Accuracy

**Objective**: Verify like system and count updates

**Steps**:
1. Open any post in Feed
2. Click heart icon → should fill with color
3. Refresh page → heart should still be filled
4. Click heart again → should unfill
5. Create a new account, like same post
6. Switch back to first account → verify likes count = 2

**Verify in Firestore**:
- Firestore → `likes` collection
- Should see document with ID pattern: `{yourUID}_{postId}`
- Check post document → `likeCount` should match actual likes

**Success Criteria**:
- ✅ Heart icon toggles filled/unfilled
- ✅ Like persists after page refresh
- ✅ Count increases/decreases correctly
- ✅ Multiple users can like same post

**Failure Indicators**:
- ❌ Like button doesn't respond
- ❌ Count doesn't update
- ❌ Like resets after refresh
- ❌ Error: "Maximum update frequency exceeded" (security rules issue)

---

### ✅ Test 9: Delete Post & Cleanup

**Objective**: Verify post deletion removes all associated data

**Steps**:
1. Create a test post with shop link (if possible)
2. Note the postId from Firestore
3. Go to post in Feed → click delete button (trash icon)
4. Confirm deletion
5. Verify post removed from Feed
6. Check Firestore:
   - `posts/{postId}` should not exist
   - If shop linked: `shopItems` doc with `postRef` to this post should be deleted
   - (If Algolia configured) Check Algolia dashboard → post should be removed

**Success Criteria**:
- ✅ Post disappears from Feed immediately
- ✅ Post deleted from Firestore
- ✅ Associated shop item deleted (if existed)
- ✅ Algolia index updated (if configured)
- ✅ Image still exists in Firebase Storage (or optionally deleted)

**Failure Indicators**:
- ❌ Post still visible in Feed
- ❌ Post still exists in Firestore
- ❌ Shop item not cleaned up
- ❌ Error in function logs for `onPostDelete`

---

### ✅ Test 10: Edge Cases & Error Handling

**Objective**: Test abnormal scenarios and error handling

**Test 10a: Upload Invalid File**
- Try uploading .txt, .pdf, .mp4 file
- Expected: Error message "Invalid file type"

**Test 10b: Upload Oversized Image**
- Try uploading image > 10MB
- Expected: Error "File too large"

**Test 10c: Create Post Without Image**
- Try submitting post with no image
- Expected: Error "Image required" or disabled submit button

**Test 10d: Network Offline**
- Turn off internet
- Try creating post
- Expected: "Network error" message, retries when online

**Test 10e: Search with Special Characters**
- Search for: `@#$%^&*()`
- Expected: No crash, returns empty results gracefully

**Test 10f: Open Non-Existent Post**
- Navigate to `/post/fake-id-12345`
- Expected: "Post not found" message or redirect to Feed

**Test 10g: Edit Another User's Post**
- Try to access `/edit-post/{someoneElsesPostId}`
- Expected: Permission denied or edit buttons hidden

**Success Criteria**:
- ✅ All error cases show user-friendly messages
- ✅ No app crashes or white screens
- ✅ Console shows descriptive error logs
- ✅ Security rules prevent unauthorized actions

---

## PHASE 4: PERFORMANCE & PRODUCTION

### ✅ Test 11: Performance Metrics (Bonus)

**Objective**: Ensure app meets performance standards

**Steps**:
1. Open Chrome DevTools
2. Navigate to Lighthouse tab
3. Run audit on your app URL
4. Check scores:
   - Performance > 80
   - Accessibility > 90
   - Best Practices > 90
   - SEO > 80

**Optimization Tips if scores low**:
- Compress images before upload
- Enable Firebase Hosting CDN
- Add service worker for caching
- Lazy load components

---

## TEST RESULTS TEMPLATE

```markdown
## Test Execution Report
**Date**: [YYYY-MM-DD]
**Tester**: [Your Name]
**Environment**: [Dev/Staging/Production]

| Test ID | Test Name | Status | Notes |
|---------|-----------|--------|-------|
| Test 1 | Black Screen Fix | ✅ PASS | No black screens observed |
| Test 2 | Post Creation | ✅ PASS | searchKeywords auto-generated |
| Test 3 | Profile Display | ✅ PASS | Thumbnails load correctly |
| Test 4 | Cloud Functions | ✅ PASS | onPostCreate logged successfully |
| Test 5 | Algolia Search | ⚠️ PARTIAL | Using Firestore fallback (Algolia not configured) |
| Test 6 | Shop & POD | ✅ PASS | Mock POD product created |
| Test 7 | Follow/Unfollow | ✅ PASS | Counts update correctly |
| Test 8 | Like System | ✅ PASS | Counts accurate |
| Test 9 | Post Deletion | ✅ PASS | Cleanup successful |
| Test 10 | Edge Cases | ✅ PASS | All errors handled gracefully |

**Overall Status**: READY FOR PRODUCTION / NEEDS FIXES

**Blockers**: [List any critical issues]

**Nice-to-Have**: [List minor issues or enhancements]
```

---

## Quick Smoke Test (5 Minutes)

If you need a rapid validation:

1. ✅ Open app → No errors in console
2. ✅ Create post → Appears in Feed
3. ✅ Open post → No black screen
4. ✅ Like post → Count increases
5. ✅ Search "test" → Returns results
6. ✅ Navigate to Profile → Shows posts
7. ✅ Delete post → Removed from Feed
8. ✅ Log out → Returns to login screen

If all above pass → **app is minimally functional**.

---

## Reporting Issues

When a test fails, provide:
1. **Test ID** (e.g., "Test 2")
2. **Steps to reproduce**
3. **Expected behavior**
4. **Actual behavior**
5. **Console errors** (screenshot or copy/paste)
6. **Firebase logs** (if backend issue)

Example:
```
ISSUE: Test 5 - Search returns empty

Steps:
1. Created post with title "Sunset Beach"
2. Searched for "sunset"
3. No results returned

Expected: Post should appear in results
Actual: Empty results

Console Error:
> algolia.js:45 AlgoliaSearchError: Index 'posts' does not exist

Firebase Logs:
> onPostCreate: Post created successfully but Algolia not configured

Resolution: Algolia app_id not set in Firebase config
```

---

**Status**: Ready for systematic testing
**Next**: Execute tests 1-10, document results, fix any issues
